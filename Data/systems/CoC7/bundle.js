(()=>{"use strict";class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus")));const roll=await new Roll("1dt"+("+1dt"+(""!==alternativeDice?"["+alternativeDice+"]":"")).repeat(Math.abs(modif))+"+1d10").roll({async:!0}),result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};return rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice),roll.dice.forEach((d=>{d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total))})),result.tens.total=modif<0?Math.max(...result.tens.results):Math.min(...result.tens.results),result.total=result.unit.total+result.tens.total,0===result.total&&(result.total=100),result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d");await game.dice3d.showForRoll(roll,game.user,syncDice)}}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];return chatHelper.getTokenFromKey(key)?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){Object.keys(object).forEach((prop=>{prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}))}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}element&&object&&Object.keys(element.dataset).forEach((prop=>{"template"!==prop&&deserialize(object,prop,element.dataset[prop])}))}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.data)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||{data:actor.data.token}:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token)return token.data.img}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.data.token?actor.data.token.img:actor.data.img}static getDistance(startToken,endToken){let distance={gridUnit:0,value:0,unit:canvas.scene.data.gridUnits};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];distance={gridUnit:ray.distance/canvas.scene.data.grid,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.data.gridUnits}}return distance}static toYards(distance){switch(distance.unit){case"ft":return distance.value/3;case"yd":case"m":default:return distance.value}}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];this.dices.tens.forEach((dieResult=>{diceResults.push(100===dieResult.value?0:dieResult.value/10)})),diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");tenDice&&tenDice.querySelectorAll("li").forEach((d=>{const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}));const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");return increaseSuccess&&increaseSuccess.querySelectorAll("button")&&increaseSuccess.querySelectorAll("button").forEach((isl=>{const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)})),roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");return damage.rolls=[],rolls.forEach((r=>{const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)})),object?void 0:damage}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);thresholdStr&&thresholdStr.length&&(threshold=Number(thresholdStr[0]),thresholdStr.forEach((match=>{escaped=escaped.replace(`(${match})`,"")})));const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length&&(difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]),difficultyStr.forEach((match=>{escaped=escaped.replace(`[${match}]`,"")}))),escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getCreatureSanData(creature){let creatureData,actor;if("CoCActor"===creature.constructor.name&&(actor=creature),"string"==typeof creature&&(actor=CoC7Utilities.getActorFromString(creature)),actor){if(actor.isToken){const specie=game.actors.get(actor.id);creatureData=specie&&specie.sanLossMax!==actor.sanLossMax?{id:actor.token.id,name:actor.name,sanLossMax:actor.sanLossMax,specie:{id:specie.id,name:specie.name,sanLossMax:specie.sanLossMax}}:{id:specie?specie.id:actor.id,name:specie?specie.name:actor.name,sanLossMax:specie?specie.sanLossMax:actor.sanLossMax}}else creatureData={id:actor.id,name:actor.name,sanLossMax:actor.sanLossMax};return creatureData}return"object"==typeof creature?creature:null}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold,event=null){await CoC7Utilities.rollDice(event,{threshold})}static async createMacro(bar,data,slot){if("Item"!==data.type)return;let item,origin,command,packName=null;if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;packName=data.pack,item=await pack.getDocument(data.id),origin="pack"}else data.data?(item=data.data,origin="actor"):(item=game.items.get(data.id),origin="game");if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`}let macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro||(macro=await Macro.create({name:item.name,type:"script",img:item.img,command})),game.user.assignHotbarMacro(macro,slot),!1}static async toggleDevPhase(){const isDevEnabled=game.settings.get("CoC7","developmentEnabled");await game.settings.set("CoC7","developmentEnabled",!isDevEnabled);game.CoC7.menus.controls.find((b=>"main-menu"===b.name)).tools.find((t=>"devphase"===t.name)).title=game.settings.get("CoC7","developmentEnabled")?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled"),ui.notifications.info(game.settings.get("CoC7","developmentEnabled")?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),ui.controls.render(),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(){const isCharCreation=game.settings.get("CoC7","charCreationEnabled");await game.settings.set("CoC7","charCreationEnabled",!isCharCreation);game.CoC7.menus.controls.find((b=>"main-menu"===b.name)).tools.find((t=>"charcreate"===t.name)).title=game.settings.get("CoC7","charCreationEnabled")?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled"),ui.notifications.info(game.settings.get("CoC7","charCreationEnabled")?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),ui.controls.render(),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async startRest(){const actors=game.actors.filter((actor=>actor.hasPlayerOwner));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;actors.forEach((actor=>{let quickHealer=!1;actor.data.items.forEach((item=>{"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0)}));const isCriticalWounds=actor.data.data.status.criticalWounds.value,dailySanityLoss=actor.data.data.attribs.san.dailyLoss,hpValue=actor.data.data.attribs.hp.value,hpMax=actor.data.data.attribs.hp.max,oneFifthSanity=" / "+Math.floor(actor.data.data.attribs.san.value/5),mpValue=actor.data.data.attribs.mp.value,mpMax=actor.data.data.attribs.mp.max;chatContent+=`<br><b>${actor.name}. </b>`,!1===isCriticalWounds&&hpValue<hpMax?game.settings.get("CoC7","pulpRules")&&!0===quickHealer?(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:3})}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+3})):game.settings.get("CoC7","pulpRules")?(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:2})}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+2})):(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+1})):!0===isCriticalWounds&&hpValue<hpMax&&(chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`),dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"data.attribs.san.dailyLoss":0,"data.attribs.san.oneFifthSanity":oneFifthSanity})),mpValue<mpMax&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: 7.</b>`,actor.update({"data.attribs.mp.value":actor.data.data.attribs.mp.value+7}))}));const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(){const isXPEnabled=game.settings.get("CoC7","xpEnabled");await game.settings.set("CoC7","xpEnabled",!isXPEnabled);game.CoC7.menus.controls.find((b=>"main-menu"===b.name)).tools.find((t=>"xptoggle"===t.name)).title=game.settings.get("CoC7","xpEnabled")?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"),ui.notifications.info(game.settings.get("CoC7","xpEnabled")?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled")),ui.controls.render()}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length?canvas.tokens.controlled.forEach((token=>{actors.push(token.actor.tokenKey)})):game.user.character&&actors.push(game.user.character.tokenKey),await actors.forEach((async tk=>{const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()})),!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){game.user.isGM?game.actors.contents.forEach((a=>{"character"===a?.data?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"data.flags.locked":!0}),a.render(!1))})):game.actors.contents.forEach((a=>{a.isOwner&&(a.update({"data.flags.locked":!0}),a.render(!1))}))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=game.folders.get(dataList.id);return folder?folder.contents:[]}if(dataList.type===entityType){if(dataList.pack){const pack=game.packs.get(dataList.pack);return pack.metadata.entity!==entityType?[]:[await pack.getDocument(dataList.id)]}return dataList.data?[dataList]:[game.items.get(dataList.id)]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error("Unable to copy to clipboard, this is likely due to your browser security settings.")),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error("Unable to copy to clipboard, this is likely due to your browser security settings.")}}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor","_creature"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get creature(){return!this.sanData.creatureKey||this.__creature&&"Object"!==this.__creature.constructor.name||(this.__creature=chatHelper.getActorFromKey(this.sanData.creatureKey)),this.__creature}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){if(this.state.sanRolled){if(this.sanData.sanMax&&this.sanCheck.failed)return isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax);if(this.sanData.sanMin&&this.sanCheck.passed)return isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin);const formula=this.creature?.sanLoss?this.sanCheck.passed:0;return formula?isNaN(Number(formula))?formula:Number(formula):0}return null}get sanLostToThisCreature(){if(this.creature)return this.actor.sanLostToCreature(this.creature)}get maxSanLossToThisCreature(){if(this.creature)return this.actor.maxPossibleSanLossToCreature(this.creature)}get maxSanLoss(){return this.creature?this.maxSanLossToThisCreature:this.sanData.sanMax?isNaN(Number(this.sanData.sanMax))?new Roll(this.sanData.sanMax).evaluate({maximize:!0}).total:Number(this.sanData.sanMax):null}get creatureEncountered(){if(this.creature)return this.actor.creatureEncountered(this.creature)}get creatureSpecieEncountered(){if(this.creature)return this.actor.creatureSpecieEncountered(this.creature)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get creatureHasSpecie(){return!!CoC7Utilities.getCreatureSanData(this.creature).specie}get isActorLoosingSan(){if(this.actor.isInABoutOfMadness)return!1;if(0===this.sanLossFormula)return!1;if(this.creature){if(!this.creature.sanLossMax)return!1;if(this.actor.sanLostToCreature(this.creature)>=this.creature.sanLossMax)return this.state.immuneToCreature=!0,!1;if(0===this.actor.maxPossibleSanLossToCreature(this.creature))return this.state.immuneToCreature=!0,!1}return!0}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} rounds`;if(this.boutSummary)return`${this.boutDuration} hours`}return null}get alreadyInsaneText(){return this.actor.sanity.underlying.indefintie?game.i18n.localize("CoC7.AlreadyUnderlyingInsanity"):game.i18n.localize("CoC7.AlreadyUnderlyingInsanity")+` (${this.actor.sanity.underlying.durationText})`}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.exitBoutOfMadness(),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform(),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform(),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.creature?(this.sanLoss=Math.min(this.sanLossFormula,this.maxSanLossToThisCreature),this.sanLossFormula>this.maxSanLossToThisCreature&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.maxSanLoss;else if(this.creature){new Roll(this.sanLossFormula).evaluate({minimize:!0}).total>=this.maxSanLossToThisCreature&&(this.state.sanLossRolled=!0,this.sanLoss=this.maxSanLossToThisCreature,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.isInABoutOfMadness&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.creature,this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll),this.creature&&this.sanLossRoll.total>this.maxSanLossToThisCreature&&(this.state.limitedLossToCreature=!0),this.sanLoss=this.creature?Math.min(this.sanLossRoll.total,this.maxSanLossToThisCreature):this.sanLossRoll.total,this.state.sanLossRolled=!0}async applySanLoss(){if(this.creature?await this.actor.looseSanToCreature(this.sanLoss,this.creature):await this.actor.looseSan(this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.isInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1;let oneFifthSanity=this.actor.data.data.attribs.san.oneFifthSanity;oneFifthSanity=parseInt(oneFifthSanity.replace(/\D/g,"")),this.actor.dailySanLoss>=oneFifthSanity&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform(),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){if(this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.enterInsanity(!0),this.state.temporaryInsane){if(this.actor.sanity.underlying.active&&this.actor.sanity.underlying.indefintie)return void(this.state.finish=!0);this.insanityDurationRoll=await new Roll("1D10").roll({async:!0}),this.insanityDuration=this.insanityDurationRoll.total,this.actor.sanity.underlying.duration&&(this.insanityDuration+=this.actor.sanity.underlying.duration),await this.actor.enterInsanity(!1,this.insanityDuration)}this.state.finish=!0}async resetCreatureSanData(){await this.actor.resetCreature(this.creature),this.creatureEncountered||this.creatureSpecieEncountered||(this.state.keepCreatureSanData=!0)}async resetSpecieSanData(){await this.actor.resetSpecie(this.creature),this.creatureEncountered||this.creatureSpecieEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(creatureKey,fastForward=!1){const targets=[...game.user.targets];targets.length&&targets.forEach((t=>{t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,{creatureKey},{fastForward}):SanCheckCard.create(t.actor.id,{creatureKey},{fastForward})}))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.isInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0),chatCard.creatureEncountered||chatCard.creatureSpecieEncountered||(chatCard.state.keepCreatureSanData=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.data.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}const COC7={eras:{nvct:"CoC7.EraNvct",drka:"CoC7.EraDrka",ddts:"CoC7.EraDdts",glit:"CoC7.EraGlit",1920:"CoC7.Era1920",pulp:"CoC7.EraPulp",mdrn:"CoC7.EraMdrn"},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.data.data.characteristics.str.value","@CON":"this.data.data.characteristics.con.value","@SIZ":"this.data.data.characteristics.siz.value","@DEX":"this.data.data.characteristics.dex.value","@APP":"this.data.data.characteristics.app.value","@INT":"this.data.data.characteristics.int.value","@POW":"this.data.data.characteristics.pow.value","@EDU":"this.data.data.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.data.data.characteristics.str.value","@CON":"this.actor.data.data.characteristics.con.value","@SIZ":"this.actor.data.data.characteristics.siz.value","@DEX":"this.actor.data.data.characteristics.dex.value","@APP":"this.actor.data.data.characteristics.app.value","@INT":"this.actor.data.data.characteristics.int.value","@POW":"this.actor.data.data.characteristics.pow.value","@EDU":"this.actor.data.data.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newSkillName="CoC7.NewSkillName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.dodgeSkillName="CoC7.DodgeSkillName",COC7.creditRatingSkillName="CoC7.CreditRatingSkillName",COC7.CthulhuMythosName="CoC7.CthulhuMythosName",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver"};class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isSuccess||this.isBlind||(this.stayAlive?await this.actor.fallDead():await this.actor.fallUnconscious()),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.fallDead():await this.actor.fallUnconscious()),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");li.closest(".item-list").querySelectorAll(".selectable").forEach((item=>{item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1})),$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${this.data.data.characteristics.list[key].label}: ${formula}`}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)}).render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=`${this.initiator.name} won. Roll damage`,this.winner=this.initiator,this.rollDamage=!0):(this.resultString=`${this.initiator.name} missed.`,this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.data.permission))if(v===CONST.ENTITY_PERMISSIONS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">',owners.forEach((function(k){content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>"})),content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{new FormData(html[0].querySelector("#selectform")).forEach((function(value,name){"user"===name&&(user=game.users.get(value))}))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"fightBack":target.dodging=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){if(this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[],[...game.user.targets].forEach((t=>{const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)})),this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.data.data.properties.auto&&(this.fullAuto=!0))}}this.tokenKey&&this._targets.forEach((t=>{if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.data.data.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.data.data.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}))}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.data.data.skill.main.id)}get autoWeaponSkill(){return this.weapon.data.data.skill.alternativ.id?this.actor.items.get(this.weapon.data.data.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;return this.rolls.forEach((r=>{anyHit=anyHit||r.isSuccess})),anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"":this.weapon.data.data.usesPerRound.max?parseInt(this.weapon.data.data.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.data.data.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){this.targets.forEach((t=>{t.shotDifficulty=this.shotDifficulty(t)}))}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.data.data.range.normal.damage;this.weapon.data.data.properties.shotgun&&(t.longRange&&(damage=this.weapon.data.data.range.long.damage),t.extremeRange&&(damage=this.weapon.data.data.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.data.data.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.data.data.usesPerRound.burst)?parseInt(this.weapon.data.data.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.data.data.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);card.querySelectorAll(".target").forEach((t=>{const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}));const cardShots=card.querySelectorAll(".shot");cardShots&&cardShots.forEach((s=>{const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)})),rangeInitiator.rolls=[];card.querySelectorAll(".roll-result").forEach((r=>{const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)})),rangeInitiator.damage=[];return card.querySelectorAll(".damage-results").forEach((dr=>{const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)})),rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[],damageFormula=h.shot.damage,damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token?this.token.data.img:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.message.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){toggle.querySelectorAll(".ic-radio-switch").forEach((b=>this.unsetFlag(b.dataset.flag))),this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isGM(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}activateListeners(html){super.activateListeners(html)}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return"undefined"===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error("Error evaluating damage");const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:`Damage ${targets[index].name} ${this.totalDamageString}HP`})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.data?.data?.range[range]?.damage,db=this.actor.db;if(db=null===db?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),this.weapon.data.data.properties.addb&&(formula+=db),this.weapon.data.data.properties.ahdb&&(formula=formula+db+"/2"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.data.data.attribs.armor.value:0}set armor(x){this._armor=x}}class RollCard{constructor(){this.rolls=[]}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){toggle.querySelectorAll(".toggle-switch").forEach((b=>card.unsetFlag(b.dataset.flag))),card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")));if(messages.length){const timestamp=new Date(messages[0].data.timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated"}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.message.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isGM(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;return this.rolls.forEach((r=>{r.winner&&(count+=1)})),count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.data.data.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank){if(rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.data.data.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data)),this.combat)this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1&&(this.rolls=[this.rolls[0],this.rolls[1]],this.rolls.forEach((r=>{delete r.winner,delete r.tie}))),this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0);else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;return this.rolls.forEach((r=>{r.passed&&(count+=1)})),count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll,silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll,this.options=data.options))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const roll={};if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(roll.diceModifier=Number(usage.get("bonusDice")),roll.difficulty=Number(usage.get("difficulty")),roll.flatDiceModifier=Number(usage.get("flatDiceModifier")),roll.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,options:roll};data.roll=await CoC7Dice.roll(roll.modifier||0),AudioHelper.play({src:CONFIG.sounds.dice}),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls.forEach((async r=>{r.rolled||(r.modifier=this.options.modifier||0,r.difficulty=this.options.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=this.options.flatDiceModifier||0,r.flatThresholdModifier=this.options.flatThresholdModifier||0,await r._perform({roll:this._roll,silent:!0}))}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data)),this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click",".coc7-link",await CoC7Parser._onCheck.bind(this)),html.on("dragstart","a.coc7-link",CoC7Parser._onDragCoC7Link.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.data.type){const card=$(chatMessage.data.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");targetsSelector.querySelectorAll("img").forEach((i=>{i.style.border="none"})),targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");targets.querySelectorAll(".target").forEach((t=>{t.style.display="none",t.dataset.active="false"}));const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");[].forEach.call(dropDownBoxes,(dpdnBox=>dpdnBox.classList.remove("switched-on"))),event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");[].forEach.call(dropDownBoxes,(dpdnBox=>dpdnBox.classList.remove("switched-on"))),event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card"),originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card);await initiator.performSkillCheck(event.currentTarget.dataset.skill),await initiator.publishCheckResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card);await target.performSkillCheck(event.currentTarget.dataset.skill),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode?check.updateChatCard({makePublic:!0}):check.updateChatCard();break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.resetCreatureSanData(),await sanCheck.updateChatCard();break}case"reset-specie-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.resetSpecieSanData(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const meleeTarget=new CoC7MeleeTarget(this.targetKey,this.messageId,this.fastForward);meleeTarget.initiatorKey=this.actorKey;const message=await meleeTarget.createChatCard();this.targetCard=message.id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{async initialize(){super.initialize(),await this.creatureInit()}static async create(data,options={}){return data.token=data.token||{},"character"===data.type?mergeObject(data.token,{vision:!0,dimSight:30,brightSight:0,actorLink:!0,disposition:1},{overwrite:!1}):"vehicle"===data.type&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.data.data.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.data.data.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.data.data.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.data.data.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.data.data.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.data.data.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get boutOfMadness(){return this.effects.find((e=>e.data.label===game.i18n.localize("CoC7.BoutOfMadnessName")))}get insanity(){return this.effects.find((e=>e.data.label===game.i18n.localize("CoC7.InsanityName")))}get isInABoutOfMadness(){return!!this.boutOfMadness&&!this.boutOfMadness.data.disabled}get isInsane(){return!!this.insanity&&!this.insanity.data.disabled}get sanity(){const boutRealTime=!!this.boutOfMadness?.data.flags?.CoC7?.realTime;let duration=boutRealTime?this.boutOfMadness?.data?.duration?.rounds:this.boutOfMadness?.data?.duration.seconds;!boutRealTime&&duration&&(duration=Math.round(duration/3600));let indefiniteInstanity=!!this.insanity?.data.flags?.CoC7?.indefinite,insaneDuration=indefiniteInstanity?null:this.insanity?.data?.duration.seconds;!indefiniteInstanity&&insaneDuration&&(insaneDuration/=3600);let boutDurationText=this.isInABoutOfMadness?boutRealTime?`${duration} ${game.i18n.localize("CoC7.rounds")}`:`${duration} ${game.i18n.localize("CoC7.hours")}`:null;const insanityDurationText=insaneDuration&&this.isInsane?indefiniteInstanity?null:`${insaneDuration} ${game.i18n.localize("CoC7.hours")}`:null;return!this.isInsane||insanityDurationText||indefiniteInstanity||(indefiniteInstanity=!0),duration||(boutDurationText=""),{boutOfMadness:{active:this.isInABoutOfMadness,realTime:this.isInABoutOfMadness?boutRealTime:void 0,summary:this.isInABoutOfMadness?!boutRealTime:void 0,duration:this.isInABoutOfMadness?duration:void 0,durationText:boutDurationText||"",hint:this.isInABoutOfMadness?`${game.i18n.localize("CoC7.BoutOfMadness")}${boutDurationText?": "+boutDurationText:""}`:game.i18n.localize("CoC7.BoutOfMadness")},underlying:{active:this.isInsane,indefintie:this.isInsane?indefiniteInstanity:void 0,duration:insaneDuration,durationText:insanityDurationText||"",hint:this.isInsane?indefiniteInstanity?game.i18n.localize("CoC7.IndefiniteInsanity"):`${game.i18n.localize("CoC7.TemporaryInsanity")} ${insanityDurationText||""}`:game.i18n.localize("CoC7.NotInsane")}}}get portrait(){return game.settings.get("CoC7","useToken")?this.isToken?this.token?.data?.img||this.img:this.data.token?.img||this.img:this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.ENTITY===result.tableRoll.results[0].data.type){const item=game.items.get(result.tableRoll.results[0].data.resultId);void 0!==item?(item.data?.data?.type?.phobia&&(result.phobia=!0),item.data?.data?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.data.data.description.value)}`,result.name=item.name,delete item.data._id,await this.createEmbeddedDocuments("Item",[item.data])):ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].data.type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].data.text))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.boutOfMadness?await this.boutOfMadness.update({disabled:!1,duration:{rounds:realTime&&duration?duration:void 0,seconds:realTime?void 0:3600*duration,turns:1},flags:{CoC7:{realTime}}}):await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.BoutOfMadnessName"),icon:"systems/CoC7/assets/icons/hanging-spider.svg",origin:this.uuid,duration:{rounds:realTime&&duration?duration:void 0,seconds:realTime?void 0:3600*duration,turns:1},flags:{CoC7:{madness:!0,realTime}},disabled:!1}]),result):result}async enterInsanity(indefinite=!0,duration){this.insanity?await this.insanity.update({disabled:!1,duration:{seconds:!indefinite&&duration?3600*duration:void 0,turns:1},flags:{CoC7:{indefinite}}}):await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.InsanityName"),icon:"systems/CoC7/assets/icons/tentacles-skull.svg",origin:this.uuid,duration:{seconds:!indefinite&&duration?3600*duration:void 0,turns:1},flags:{CoC7:{madness:!0,indefinite}},disabled:!1}])}async exitBoutOfMadness(){return await(this.boutOfMadness?.delete())}async exitInsanity(){return await(this.insanity?.delete())}async createSkill(skillName,value,showSheet=!1){const data={name:skillName,type:"skill",data:{value,properties:{special:!1,rarity:!1,push:!0,combat:!1}}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),data={name,type:"skill",data:{specialization:game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.data.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const skill=await this.createEmbeddedDocuments("Item",[{name:game.i18n.localize(COC7.creatureFightingSkill),type:"skill",data:{base:0,value:null,specialization:game.i18n.localize(COC7.fightingSpecializationName),properties:{combat:!0,fighting:!0,special:!0},flags:{}}}],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",data:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1}),createdAttack=this.items.get(attack._id);await createdAttack.update({"data.skill.main.id":skill._id,"data.skill.main.name":skill.name})}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",data:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",data:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.data.properties[key]=!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.data.data.biography?duplicate(this.data.data.biography):[];bio.push({title,value:null}),await this.update({"data.biography":bio})}async updateBioValue(index,content){const bio=duplicate(this.data.data.biography);bio[index].value=content,await this.update({"data.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.data.data.biography);bio[index].title=title,await this.update({"data.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.data.data.biography);bio.splice(index,1),await this.update({"data.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.data.data.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"data.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.data.data.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"data.biography":bio})}async updateTextArea(textArea){const name="data."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const output=[];for(const data of dataArray)switch(data.type){case"skill":if("character"!==this.data.type){if(this.getItemIdByName(data.name))return;if(data.data.base&&String(data.data.base)!==String(data.data.value)&&(data.data.value=data.data.base),isNaN(Number(data.data.value))){let value;try{value=(await new Roll(data.data.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.data.value=Math.floor(value))}}else data.data.value=null;if(CoC7Item.isAnySpec(data)){const specialization=data.data.specialization?.toLowerCase();if(specialization){let skillList=[];(data.data?.flags?.occupation||data.data?.flags?.archetype)&&(skillList=this.skills.filter((el=>!!el.data.data.specialization&&((!data.data?.flags?.occupation||!el.data.data.flags?.occupation)&&((!data.data?.flags?.archetype||!el.data.data.flags?.archetype)&&specialization.toLowerCase()===el.data.data.specialization?.toLowerCase())))));const skillData=await SkillSpecSelectDialog.create(skillList,data.data.specialization,data.data.base);if(skillData){if(skillData.get("existing-skill")){const existingItem=this.items.get(skillData.get("existing-skill"));for(const[key,value]of Object.entries(data.data.flags))value&&await existingItem.setItemFlag(key);return void(data.name=CoC7Item.getNameWithoutSpec(existingItem))}if(skillData.get("new-skill-name")?data.name=skillData.get("new-skill-name"):data.name=CoC7Item.getNameWithoutSpec(data),skillData.get("base-value")){const value=Number(skillData.get("base-value"));isNaN(value)||(data.data.base=value)}}}}else{data.data.specialization&&(data.name=CoC7Item.getNameWithoutSpec(data))}output.push(await super.createEmbeddedDocuments(embeddedName,[data],options));break;case"weapon":{const mainSkill=data.data?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.main.id=skill.id)}const secondSkill=data.data?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.alternativ.id=skill.id)}output.push(await super.createEmbeddedDocuments(embeddedName,[duplicate(data)],options));break}case"setup":{if(data.data.enableCharacterisitics){data.data.characteristics.list={},data.data.characteristics.list.str=this.getCharacteristic("str"),data.data.characteristics.list.con=this.getCharacteristic("con"),data.data.characteristics.list.siz=this.getCharacteristic("siz"),data.data.characteristics.list.dex=this.getCharacteristic("dex"),data.data.characteristics.list.app=this.getCharacteristic("app"),data.data.characteristics.list.int=this.getCharacteristic("int"),data.data.characteristics.list.pow=this.getCharacteristic("pow"),data.data.characteristics.list.edu=this.getCharacteristic("edu"),data.data.characteristics.list.luck={},data.data.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.data.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.data.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.data.characteristics.values||(data.data.characteristics.values={}),data.data.characteristics.values.str=data.data.characteristics.list.str.value,data.data.characteristics.values.con=data.data.characteristics.list.con.value,data.data.characteristics.values.siz=data.data.characteristics.list.siz.value,data.data.characteristics.values.dex=data.data.characteristics.list.dex.value,data.data.characteristics.values.app=data.data.characteristics.list.app.value,data.data.characteristics.values.int=data.data.characteristics.list.int.value,data.data.characteristics.values.pow=data.data.characteristics.list.pow.value,data.data.characteristics.values.edu=data.data.characteristics.list.edu.value,data.data.characteristics.values.luck=data.data.characteristics.list.luck.value,data.data.characteristics.points.enabled?data.data.title=game.i18n.localize("CoC7.SpendPoints"):data.data.title=game.i18n.localize("CoC7.RollCharac"),data.data.pointsWarning=!(null!==data.data.characteristics.values.str&&null!==data.data.characteristics.values.con&&null!==data.data.characteristics.values.siz&&null!==data.data.characteristics.values.dex&&null!==data.data.characteristics.values.app&&null!==data.data.characteristics.values.int&&null!==data.data.characteristics.values.pow&&null!==data.data.characteristics.values.edu);if(!await CharacRollDialog.create(data.data))return;{const updateData={};["str","con","siz","dex","app","int","pow","edu"].forEach((key=>{data.data.characteristics.values[key]&&(updateData[`data.characteristics.${key}.value`]=data.data.characteristics.values[key],updateData[`data.characteristics.${key}.formula`]=data.data.characteristics.rolls[key])})),data.data.characteristics.values.luck&&(updateData["data.attribs.lck.value"]=data.data.characteristics.values.luck),data.data.characteristics.values.pow&&(updateData["data.attribs.san.value"]=data.data.characteristics.values.pow,updateData["data.attribs.san.oneFifthSanity"]=" / "+Math.floor(data.data.characteristics.values.pow/5),updateData["data.indefiniteInsanityLevel.max"]=updateData["data.attribs.mp.value"]=updateData["data.attribs.mp.max"]=Math.floor(data.data.characteristics.values.pow/5)),await this.update(updateData),await this.update({"data.attribs.hp.value":this.hpMax,"data.attribs.hp.max":this.hpMax})}}const skills=data.data.items.filter((it=>"skill"===it.type)),othersItems=data.data.items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"data.backstory":data.data.backstory});else for(const sectionName of data.data.bioSections)!this.data.data.biography.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);break}case"archetype":if("character"===this.data.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];let charac;if(Object.entries(data.data.coreCharacteristics).forEach((entry=>{const[key,value]=entry;if(data.data.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}})),coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.data.coreCharacteristics[charac]=!0,data.data.coreCharacteristicsFormula.enabled){let value=Number(data.data.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.data.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${char.label}: ${data.data.coreCharacteristicsFormula.value}`}),value=char.value<roll.total?roll.total:char.value}await this.update({[`data.characteristics.${charac}.value`]:value})}await this.addUniqueItems(data.data.skills,"archetype");const newArchetype=await super.createEmbeddedDocuments(embeddedName,[data],options);await this.update({"data.development.archetype":this.archetypePoints}),output.push(newArchetype)}break;case"occupation":if("character"===this.data.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}const pointsDialogData={};pointsDialogData.characteristics=data.data.occupationSkillPoints;let total=0,optionalChar=!1;if(Object.entries(data.data.occupationSkillPoints).forEach((entry=>{const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)})),pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.data.groups.length;index++){const dialogData={skills:[],type:"occupation"};if(dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow"),data.data.groups[index].skills.forEach((value=>{if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.data.data.flags?.occupation){data.data.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}})),0!==dialogData.skills.length)if(dialogData.skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.data.personal)){const dialogData={skills:[],type:"occupation"};if(dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.data.personal)}),this.skills.forEach((s=>{if(!s.data.data.flags.occupation&&!s.data.data.properties.noadjustments&&!s.data.data.properties.noxpgain){data.data.skills.find((item=>item.name===s.name))||dialogData.skills.push(s.data)}})),0!==dialogData.skills.length)if(dialogData.skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.data.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"data.adjustments.occupation":Number(data.data.creditRating.min)}));const newOccupation=await super.createEmbeddedDocuments(embeddedName,[data],options);await this.update({"data.development.occupation":this.occupationPoints,"data.development.personal":this.personalPoints}),output.push(newOccupation)}break;default:output.push(await super.createEmbeddedDocuments(embeddedName,[data],options))}return output}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;return this.items.forEach((value=>{CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id)})),id}getItemsByName(itemName){const itemList=[];return this.items.forEach((value=>{value.name===itemName&&itemList.push(value)})),itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;return this.items.forEach((value=>{CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&"skill"===value.type&&skillList.push(value)})),skillList}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.data.data.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.data.data.attribs.san.value}:null}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"data.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"data.development.archetype":null})}get luck(){return parseInt(this.data.data.attribs.lck.value)}async setLuck(value){return await this.update({"data.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){if(["vehicle"].includes(this.data.type)){if(null===this.data.data.attribs.build.current||void 0===this.data.data.attribs.build.current||""===this.data.data.attribs.build.current)return this.build;if(this.data.data.attribs.build.current>this.data.data.attribs.build.value)return this.build;const hp=parseInt(this.data.data.attribs.build.current);return isNaN(hp)?null:hp}return parseInt(this.data.data.attribs.hp.value)}get hpMax(){if(["vehicle"].includes(this.data.type))return this.build;if(this.data.data.attribs.hp.auto){if(null!=this.data.data.characteristics.siz.value&&null!=this.data.data.characteristics.con.value){const maxHP=Math.floor((this.data.data.characteristics.siz.value+this.data.data.characteristics.con.value)/10);return game.settings.get("CoC7","pulpRules")&&"character"===this.data.type?2*maxHP:maxHP}return this.data.data.attribs.hp.max?parseInt(this.data.data.attribs.hp.max):null}return parseInt(this.data.data.attribs.hp.max)}async setHp(value){return value<0&&(value=0),["vehicle"].includes(this.data.type)?(value>this.build&&(value=parseInt(this.build)),await this.update({"data.attribs.build.current":value})):(value>this.hpMax&&(value=parseInt(this.hpMax)),await this.update({"data.attribs.hp.value":value}))}async addUniqueItems(skillList,flag=null){for(const skill of skillList)if(CoC7Item.isAnySpec(skill))skill.data.flags||(skill.data.flags={}),flag&&(skill.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1});else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}}async addItems(itemList,flag=null){for(const item of itemList)flag&&(item.data.flags||(item.data.flags={}),item.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[item],{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get mpMax(){return this.data.data.attribs.mp.auto?null!=this.data.data.characteristics.pow.value?Math.floor(this.data.data.characteristics.pow.value/5):null:parseInt(this.data.data.attribs.mp.max)}encounteredCreaturesSanData(creature){const i=this.encounteredCreaturesSanDataIndex(creature);return-1!==i?this.data.data.encounteredCreatures[i]:null}encounteredCreaturesSanDataIndex(creature){const sanData=CoC7Utilities.getCreatureSanData(creature);return this.data.data.encounteredCreatures.findIndex((cd=>cd.id===sanData?.id||cd.name.toLowerCase()===sanData.name?.toLocaleLowerCase()))}sanLostToCreature(creature){const sanData=this.encounteredCreaturesSanData(creature);if(sanData)return sanData.specie?Math.max(sanData.specie.totalLoss||0,sanData.totalLoss):sanData.totalLoss||0;{const creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(creatureSanData.specie){const specieEncountered=this.encounteredCreaturesSanData(creatureSanData.specie);if(specieEncountered)return specieEncountered.totalLoss}return 0}}maxPossibleSanLossToCreature(creature){const sanData=this.encounteredCreaturesSanData(creature),creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(sanData){let changes=!1;if(creatureSanData.sanLossMax!==sanData.sanLossMax&&(sanData.sanLossMax=creatureSanData.sanLossMax,changes=!0),creatureSanData.specie&&!sanData.specie&&(sanData.specie=creatureSanData.specie,changes=!0),creatureSanData.specie&&creatureSanData.specie.sanLossMax!==sanData.specie.sanLossMax&&(sanData.specie.sanLossMax=creatureSanData.specie.sanLossMax,changes=!0),sanData.totalLoss>sanData.sanLossMax&&(sanData.totalLoss=sanData.sanLossMax,changes=!0),sanData.specie&&sanData.specie.totalLoss>sanData.specie.sanLossMax&&(sanData.specie.totalLoss=sanData.specie.sanLossMax,changes=!0),changes){const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];encounteredCreaturesList[this.encounteredCreaturesSanDataIndex(creature)]=sanData,sanData.specie&&this._updateAllOfSameSpecie(encounteredCreaturesList,sanData.specie),this.update({"data.encounteredCreatures":encounteredCreaturesList})}return sanData.sanLossMax-sanData.totalLoss}if(creatureSanData){const sanLostToCreature=this.sanLostToCreature(creature);return Math.max(0,creatureSanData.sanLossMax-sanLostToCreature)}return 99}creatureEncountered(creature){return!!~this.encounteredCreaturesSanDataIndex(creature)}creatureSpecieEncountered(creature){const creatureSanData=CoC7Utilities.getCreatureSanData(creature);return creatureSanData.specie?!!~this.encounteredCreaturesSanDataIndex(creatureSanData.specie):this.creatureEncountered(creature)}_updateAllOfSameSpecie(encounteredCreaturesList,specieSanData){for(let index=0;index<encounteredCreaturesList.length;index++)if((encounteredCreaturesList[index].specie?.id===specieSanData.id||encounteredCreaturesList[index].specie?.name.toLowerCase()===specieSanData.name?.toLowerCase())&&encounteredCreaturesList[index].specie.totalLoss!==specieSanData.totalLoss){const delta=specieSanData.totalLoss-encounteredCreaturesList[index].specie.totalLoss;delta>0&&(encounteredCreaturesList[index].specie=specieSanData,encounteredCreaturesList[index].totalLoss+=delta,encounteredCreaturesList[index].totalLoss=Math.min(encounteredCreaturesList[index].totalLoss,encounteredCreaturesList[index].sanLossMax))}}_removeSpecie(encounteredCreaturesList,specieSanData){for(let index=0;index<encounteredCreaturesList.length;index++)if(encounteredCreaturesList[index].specie?.id===specieSanData.id||encounteredCreaturesList[index].specie?.name.toLowerCase()===specieSanData.name?.toLowerCase()){const previousSpecieLost=encounteredCreaturesList[index].specie.totalLoss;delete encounteredCreaturesList[index].specie,encounteredCreaturesList[index].totalLoss=encounteredCreaturesList[index].totalLoss-previousSpecieLost,encounteredCreaturesList[index].totalLoss<0&&(encounteredCreaturesList[index].totalLoss=0)}}async resetCreature(creature){const indexSanData=this.encounteredCreaturesSanDataIndex(creature);if(~indexSanData){const creatureSanData=CoC7Utilities.getCreatureSanData(creature),encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];encounteredCreaturesList.splice(indexSanData,1),creatureSanData.totalLoss=0,creatureSanData.specie&&delete creatureSanData.specie,this._updateAllOfSameSpecie(encounteredCreaturesList,creatureSanData),await this.update({"data.encounteredCreatures":encounteredCreaturesList})}}async resetSpecie(creature){const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[],creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(!creatureSanData.specie)return;const indexSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie);return~indexSanData&&encounteredCreaturesList.splice(indexSanData,1),this._removeSpecie(encounteredCreaturesList,creatureSanData.specie),await this.update({"data.encounteredCreatures":encounteredCreaturesList}),!1}async looseSanToCreature(sanLoss,creature){let exactSanLoss=sanLoss;const creatureSanData=CoC7Utilities.getCreatureSanData(creature),indexSanData=this.encounteredCreaturesSanDataIndex(creature);let indexSpeciesSanData=-1;creatureSanData.specie?.id&&(indexSpeciesSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie.id)),-1===indexSpeciesSanData&&creatureSanData.specie?.name&&(indexSpeciesSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie.name));const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];if(~indexSanData){const oldSanData=encounteredCreaturesList[indexSanData];let newSanData;creatureSanData&&(newSanData=creatureSanData,newSanData.totalLoss=oldSanData.totalLoss||0,newSanData.specie?newSanData.specie.totalLoss=oldSanData.specie?.totalLoss?oldSanData.specie.totalLoss:0:oldSanData.specie&&(newSanData.specie=oldSanData.specie)),newSanData.totalLoss=newSanData.totalLoss?newSanData.totalLoss+sanLoss:sanLoss,newSanData.totalLoss>newSanData.sanLossMax&&(exactSanLoss-=newSanData.totalLoss-newSanData.sanLossMax,newSanData.totalLoss=newSanData.sanLossMax),newSanData.specie&&(newSanData.specie.totalLoss=newSanData.specie.totalLoss?newSanData.specie.totalLoss+exactSanLoss:exactSanLoss,newSanData.specie.totalLoss>newSanData.specie.sanLossMax&&(newSanData.specie.totalLoss=newSanData.specie.sanLossMax),this._updateAllOfSameSpecie(encounteredCreaturesList,newSanData.specie)),encounteredCreaturesList[indexSanData]=newSanData,~indexSpeciesSanData&&newSanData.specie?encounteredCreaturesList[indexSpeciesSanData]=newSanData.specie:newSanData.specie&&encounteredCreaturesList.push(newSanData.specie)}else{const newSanData=creatureSanData;newSanData.totalLoss=0,newSanData.specie&&(~indexSpeciesSanData?(newSanData.specie.totalLoss=encounteredCreaturesList[indexSpeciesSanData].totalLoss,newSanData.totalLoss=newSanData.specie.totalLoss,newSanData.totalLoss>newSanData.sanLossMax&&(newSanData.totalLoss=newSanData.sanLossMax)):(newSanData.specie.totalLoss=0,newSanData.totalLoss=0)),newSanData.totalLoss=newSanData.totalLoss+sanLoss,newSanData.totalLoss>newSanData.sanLossMax&&(exactSanLoss-=newSanData.totalLoss-newSanData.sanLossMax,newSanData.totalLoss=newSanData.sanLossMax),newSanData.specie&&(newSanData.specie.totalLoss=newSanData.specie.totalLoss+exactSanLoss,newSanData.specie.totalLoss>newSanData.specie.sanLossMax&&(newSanData.specie.totalLoss=newSanData.specie.sanLossMax),~indexSpeciesSanData?encounteredCreaturesList[indexSpeciesSanData]=newSanData.specie:encounteredCreaturesList.push(newSanData.specie),this._updateAllOfSameSpecie(encounteredCreaturesList,newSanData.specie)),encounteredCreaturesList.push(newSanData)}return await this.setSan(this.san-exactSanLoss),await this.update({"data.encounteredCreatures":encounteredCreaturesList}),exactSanLoss}async looseSan(sanLoss,creature=null){creature?await this.looseSanToCreature(sanLoss,creature):await this.setSan(this.san-sanLoss)}get sanData(){return CoC7Utilities.getCreatureSanData(this)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.data.data.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.data.data.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.data.data.attribs.san?.dailyLoss||0}get sanMax(){if(this.data.data.attribs)return this.data.data.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.data.data.attribs.san.max)}get mp(){return parseInt(this.data.data.attribs.mp.value)}async setMp(value){return value<0&&(value=0),value>parseInt(this.mpMax)&&(value=parseInt(this.mpMax)),await this.update({"data.attribs.mp.value":value})}get san(){return parseInt(this.data.data.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.occupation&&(occupationPoints+=skill.data.data.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;return Object.entries(this.occupation.data.data.occupationSkillPoints).forEach((entry=>{const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))})),points}async resetOccupationPoints(){await this.update({"data.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"data.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"data.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.archetype&&(archetypePoints+=skill.data.data.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.data.data.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.experience&&(experiencePoints+=skill.data.data.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.personal&&(personalPoints+=skill.data.data.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.data.data.characteristics.int.value)}get hasSkillFlaggedForExp(){for(const skill of this.skills)if(skill.data.data.flags?.developement)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.sanMax&&(value=this.sanMax);const loss=parseInt(this.data.data.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.data.data.attribs.san.dailyLoss)?parseInt(this.data.data.attribs.san.dailyLoss):0;return totalLoss+=loss,loss>=5&&this.setStatus(COC7.status.tempoInsane),totalLoss>=Math.floor(this.san/5)&&this.setStatus(COC7.status.indefInsane),await this.update({"data.attribs.san.value":value,"data.attribs.san.dailyLoss":totalLoss})}return await this.update({"data.attribs.san.value":value})}async setAttribAuto(value,attrib){const updatedKey=`data.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.data.data.attribs[attrib].auto,attrib)}get build(){if(["vehicle"].includes(this.data.type)){const build=parseInt(this.data.data.attribs.build.value);return isNaN(build)?null:build}if(!this.data.data.attribs)return null;if(!this.data.data.attribs.build)return null;if("auto"===this.data.data.attribs.build.value&&(this.data.data.attribs.build.auto=!0),this.data.data.attribs.build.auto){const sum=this.data.data.characteristics.str.value+this.data.data.characteristics.siz.value;if(sum>164)return Math.floor((sum-45)/80)+1;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return 1}return this.data.data.attribs.build.value}get db(){if(["vehicle"].includes(this.data.type))return 0;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.db)return null;if("auto"===this.data.data.attribs.db.value&&(this.data.data.attribs.db.auto=!0),this.data.data.attribs.db.auto){const sum=this.data.data.characteristics.str.value+this.data.data.characteristics.siz.value;if(sum>164)return`${Math.floor((sum-45)/80)}D6`;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return"1D4"}return this.data.data.attribs.db.value}get mov(){if(["vehicle"].includes(this.data.type))return this.data.data.attribs.mov.value;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.mov)return null;if("auto"===this.data.data.attribs.mov.value&&(this.data.data.attribs.mov.auto=!0),this.data.data.attribs.mov.auto){let MOV;if(this.data.data.characteristics.dex.value<this.data.data.characteristics.siz.value&&this.data.data.characteristics.str.value<this.data.data.characteristics.siz.value?MOV=7:this.data.data.characteristics.dex.value>=this.data.data.characteristics.siz.value||this.data.data.characteristics.str.value>=this.data.data.characteristics.siz.value?MOV=8:this.data.data.characteristics.dex.value>this.data.data.characteristics.siz.value&&this.data.data.characteristics.str.value>this.data.data.characteristics.siz.value&&(MOV=9),"creature"!==this.data.data.type&&(isNaN(parseInt(this.data.data.infos.age))||(MOV=parseInt(this.data.data.infos.age)>=40?MOV-Math.floor(parseInt(this.data.data.infos.age)/10)+3:MOV)),MOV>0)return MOV}return this.data.data.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.data.data.flags||(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),this.update({"data.flags.locked":!1})),this.data.data.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"data.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.data.data.flags[flagName],name=`data.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){let skill=this.getSkillsByName(skillData.name?skillData.name:skillData);if(!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getEntity(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item.data)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await class{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)}).render(!0)}))}}.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){const itemId=weaponData.id;let weapon;if(weapon=this.items.get(itemId),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(`Actor ${this.name} has no weapon named ${weaponData.name}`);{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getEntity(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;{const mainSkill=item.data?.data?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!item.data.data.properties?.rngd)}skill&&(item.data.data.skill.main.id=skill._id)}const secondSkill=item.data?.data?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!item.data.data.properties?.rngd)}skill&&(item.data.data.skill.alternativ.id=skill._id)}await this.createEmbeddedDocuments("Item",[duplicate(item.data)])}if(weapons=this.getItemsFromName(item.name),!weapons)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(`Actor ${this.name} has more than one weapon named ${weaponData.name}. The first found will be used`);weapon=weapons[0]}if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){switch(game.settings.get("CoC7","initiativeRule")){case"optional":{const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.data.data.characteristics.dex.value/100}default:return hasGun?this.data.data.characteristics.dex.value+50:this.data.data.characteristics.dex.value}}getActorFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!1})}getWeaponSkills(itemId){const weapon=this.items.get(itemId);if("weapon"!==weapon.data.type)return null;const skills=[];return weapon.data.data.skill.main.id&&skills.push(this.items.get(weapon.data.data.skill.main.id)),weapon.usesAlternativeSkill&&weapon.data.data.skill.alternativ.id&&skills.push(this.items.get(weapon.data.data.skill.alternativ.id)),skills}find(name){const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.sName.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.sName.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>!!s.data.data.specialization&&s.data.data.specialization.length&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>!!s.data.data.specialization&&s.data.data.specialization.length&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.data.token.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`data.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.data.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.data.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.data.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}if(!fastForward){message+="</p>";const speaker={actor:this.actor};await chatHelper.createMessage(title,message,{speaker})}return{failure,success}}async developLuck(fastForward=!1){const luck=this.data.data.attribs.lck,upgradeRoll=new Roll("1D100"),title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>luck.value){const augmentRoll=new Roll("1D10");if(await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),luck.value+augmentRoll.total<=99)await this.update({"data.attribs.lck.value":this.data.data.attribs.lck.value+augmentRoll.total}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll.total,score:luck.value,augment:augmentRoll.total})}</span>`;else{let correctedValue;for(let i=1;i<=10;i++)if(luck.value+augmentRoll.total-i<=99){correctedValue=augmentRoll.total-i;break}await this.update({"data.attribs.lck.value":this.data.data.attribs.lck.value+correctedValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll.total,score:luck.value,augment:correctedValue})}</span>`}}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll.total,score:luck.value})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this.actor};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}async toggleStatus(statusName){let effectEffect,statusValue=this.data.data.status[statusName]?.value;if("boolean"!=typeof statusValue&&(statusValue="false"===statusValue),COC7.status.criticalWounds!==statusName)switch(statusName){case"dead":statusValue?(await this.unsetStatus("dead"),effectEffect=await this.hasActiveEffect("dead"),effectEffect.length>0&&effectEffect.forEach((effect=>effect.delete()))):this.fallDead();break;case"dying":statusValue?(await this.unsetStatus("dying"),effectEffect=await this.hasActiveEffect("dying"),effectEffect.length>0&&effectEffect.forEach((effect=>effect.delete()))):this.fallDying();break;case"prone":statusValue?(await this.unsetStatus("prone"),effectEffect=await this.hasActiveEffect("prone"),effectEffect.length>0&&effectEffect.forEach((effect=>effect.delete()))):this.fallProne();break;case"unconscious":statusValue?(await this.unsetStatus("unconscious"),effectEffect=await this.hasActiveEffect("unconscious"),effectEffect.length>0&&effectEffect.forEach((effect=>effect.delete()))):this.fallUnconscious()}else statusValue?await this.cureMajorWound():await this.inflictMajorWound()}async hasActiveEffect(effectLabel){return this.effects.map((effect=>effect)).filter((effect=>effect.data.label===effectLabel))}async toggleEffect(effectName){switch(effectName){case"boutOfMadness":this.boutOfMadness?await this.boutOfMadness.delete():await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.BoutOfMadnessName"),icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/hanging-spider.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},flags:{CoC7:{madness:!0,realTime:!0}},disabled:!1}]);break;case"insanity":this.insanity?this.insanity.delete():await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.InsanityName"),icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/tentacles-skull.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},flags:{CoC7:{madness:!0,indefinite:!0}},disabled:!1}])}}getStatus(statusName){if(!this.data.data.status)return!1;let statusValue=this.data.data.status[statusName]?.value;return void 0!==statusValue&&("boolean"!=typeof statusValue&&(statusValue="false"===statusValue),statusValue)}async setStatus(statusName){await this.update({[`data.status.${statusName}.value`]:!0})}async unsetStatus(statusName){await this.update({[`data.status.${statusName}.value`]:!1})}async resetCounter(counter){await this.update({[counter]:0})}async setOneFifthSanity(oneFifthSanity){await this.update({"data.attribs.san.oneFifthSanity":oneFifthSanity})}get fightingSkills(){const skillList=[];return this.items.forEach((value=>{"skill"===value.type&&value.data.data.properties.fighting&&skillList.push(value)})),skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get closeCombatWeapons(){const weaponList=[];return this.items.forEach((value=>{if("weapon"===value.type&&!value.data.data.properties.rngd){const skill=this.items.get(value.data.data.skill.main.id);value.data.data.skill.main.value=skill?skill.value:0,weaponList.push(value)}})),weaponList.sort(((a,b)=>a.name.localeCompare(b.name))),weaponList}get firearmSkills(){const skillList=[];return this.items.forEach((value=>{"skill"===value.type&&value.data.data.properties.firearm&&skillList.push(value)})),skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.dodgeSkillName));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.creditRatingSkillName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.CthulhuMythosName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.data.data.value)}return 0}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.data.data.value)}return 0}get spendingLevel(){const CR=this.creditRating;return CR>=99?5e3:CR>=90?250:CR>=50?50:CR>=10?10:CR>=1?2:.5}get cash(){const CR=this.creditRating;return CR>=99?5e4:CR>=90?20*CR:CR>=50?5*CR:CR>=10?2*CR:CR>=1?CR:.5}get assets(){const CR=this.creditRating;return CR>=99?5e6:CR>=90?2e3*CR:CR>=50?500*CR:CR>=10?50*CR:CR>=1?10*CR:0}get skills(){const skillList=[];return this.items.forEach((value=>{"skill"===value.type&&skillList.push(value)})),skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHealthStatusManually(event){if(event.preventDefault(),event.originalEvent){const healthBefore=parseInt(event.originalEvent.currentTarget.defaultValue),healthAfter=parseInt(event.originalEvent.currentTarget.value);let damageTaken;return healthAfter>healthBefore?await this.setHp(healthAfter):(damageTaken=healthAfter<0?Math.abs(healthAfter):healthBefore-healthAfter,this.render(!0),await this.dealDamage(damageTaken,{ignoreArmor:!0}))}}async dealDamage(amount,options={}){let total=parseInt(amount);if(this.data.data.attribs.armor.value&&!options.ignoreArmor){let armorValue;if(CoC7Utilities.isFormula(this.data.data.attribs.armor.value)){armorValue=(await new Roll(this.data.data.attribs.armor.value).roll({async:!0})).total}else isNaN(Number(this.data.data.attribs.armor.value))?(ui.notifications.warn(`Unable to process armor value :${this.data.data.attribs.armor.value}. Ignoring armor`),armorValue=0):armorValue=Number(this.data.data.attribs.armor.value);total-=armorValue}return total<=0?0:(await this.setHp(this.hp-total),total>=this.hpMax?await this.fallDead():(total>=Math.floor(this.hpMax/2)&&await this.inflictMajorWound(),0===this.hp&&(this.getStatus(COC7.status.unconscious)||await this.fallUnconscious(),this.majorWound&&this.fallDying())),total)}async inflictMajorWound(){if(!this.majorWound){await this.setStatus(COC7.status.criticalWounds);0===(await this.hasActiveEffect("criticalWounds")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"criticalWounds",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/arm-sling.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}if(await this.fallProne(),!this.getStatus(COC7.status.unconscious)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}async cureMajorWound(){await this.unsetStatus(COC7.status.criticalWounds);const criticalWoundsEffect=await this.hasActiveEffect("criticalWounds");criticalWoundsEffect.length>0&&criticalWoundsEffect.forEach((effect=>effect.delete()))}async fallProne(){await this.setStatus(COC7.status.prone);0===(await this.hasActiveEffect("prone")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"prone",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/falling.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallUnconscious(){await this.setStatus(COC7.status.unconscious);0===(await this.hasActiveEffect("unconscious")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"unconscious",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/knocked-out-stars.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallDying(){await this.setStatus(COC7.status.dying);0===(await this.hasActiveEffect("dying")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"dying",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/heart-beats.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallDead(){await this.inflictMajorWound(),await this.unsetStatus(COC7.status.dying),await this.fallUnconscious(),await this.setStatus(COC7.status.dead);0===(await this.hasActiveEffect("dead")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"dead",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/tombstone.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}]);const dyingEffect=await this.hasActiveEffect("dying");!this.dying&&dyingEffect.length>0&&dyingEffect.forEach((effect=>effect.delete()))}get majorWound(){return this.getStatus(COC7.status.criticalWounds)}get dying(){return this.getStatus(COC7.status.dying)}get unconscious(){return this.getStatus(COC7.status.unconscious)}get dead(){return this.getStatus(COC7.status.dead)}get prone(){return this.getStatus(COC7.status.prone)}}class CoC7Link{constructor(){this._linkData={type:CoC7Link.LINK_TYPE.CHECK,check:CoC7Link.CHECK_TYPE.SKILL}}static async fromData(linkData){const link=new CoC7Link;return await link.setData(linkData),link}static get TYPE_KEYWORD(){return["check","sanloss","item"]}static get CHARAC_KEYWORD(){return["charac","char","characteristic","characteristics"]}static get ATTRIB_KEYWORD(){return["attributes","attribute","attrib","attribs"]}static get SKILL_KEYWORD(){return["skill"]}static get LINK_TYPE(){return{CHECK:1,SANLOSS:2,ITEM:3}}static get CHECK_TYPE(){return{CHARACTERISTIC:1,ATTRIBUTE:2,SKILL:3}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get data(){const data=duplicate(this._linkData);return data.isCheck=this.is.check,data.isSanloss=this.is.sanloss,data.isItem=this.is.item,data}async fetchItem(){if(this._linkData.validItem=!1,!this._linkData.fromCompendium&&!this._linkData.fromDirectory)return this._item=void 0,!1;if(this._linkData.fromCompendium){const pack=game.packs.get(this._linkData.pack);if(!pack)return!1;if("Item"!==pack.metadata.entity)return;this._item=await pack.getEntity(this._linkData.id)}if(this._linkData.fromDirectory&&(this._item=game.items.get(this._linkData.id)),this._linkData.skillName=null,this._linkData.itemName=null,this._item){if("weapon"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.ITEM,this._linkData.itemName=this._item.data.name,this._linkData.validItem=!0,!0;if("skill"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.CHECK,this.check=CoC7Link.CHECK_TYPE.SKILL,this._linkData.skillName=this._item.data.name,this._linkData.validItem=!0,!0}return!1}async setData(x){this._linkData.fromCompendium=!1,this._linkData.fromDirectory=!1,this.hasPlayerOwner=!1,x.hasPlayerOwner&&(this.hasPlayerOwner=!0,this.actorKey=x.actorKey),x.pack&&x.id&&(this._linkData.fromCompendium=!0,this._linkData.pack=x.pack,this._linkData.id=x.id),x.id&&!x.pack&&(this._linkData.fromDirectory=!0,this._linkData.id=x.id);if(!await this.fetchItem()&&(x.check?this.type=x.check:this.type=CoC7Link.LINK_TYPE.CHECK,x.type?this.check=x.type:this.type&&(this.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),x.name))if(this._linkData.itemName=null,this._linkData.skillName=null,this._linkData.characteristicKey=null,this._linkData.attributeKey=null,this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x.name;break;case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x.name;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x.name}else this.is.item&&(this._linkData.itemName=x.name);!x.difficulty&&isNaN(Number(x.difficulty))||(this._linkData.difficulty=Number(x.difficulty)),!x.modifier&&isNaN(Number(x.modifier))||(this._linkData.modifier=Number(x.modifier)),void 0===x.difficulty&&void 0===x.modifier||(this._linkData.forceModifiers=!0),x.forceModifiers&&(this._linkData.forceModifiers=!0),"true"!==x.displayName&&!0!==x.displayName||(this._linkData.displayName=!0),x.label&&(this._linkData.hasLabel=!0,this._linkData.label=x.label),x.icon&&(this._linkData.hasIcon=!0,this._linkData.icon=x.icon),"true"!==x.blind&&!0!==x.blind||(this._linkData.blind=!0),this._linkData.sanMin=x.sanMin,this._linkData.sanMax=x.sanMax}get type(){return this._linkData.type}get checkType(){switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return"characteristic";case CoC7Link.CHECK_TYPE.ATTRIBUTE:return"attribute";case CoC7Link.CHECK_TYPE.SKILL:return"skill";default:return}}set type(x){if(isNaN(Number(x)))switch(x.toLowerCase()){case"check":this._linkData.type=CoC7Link.LINK_TYPE.CHECK;break;case"sanloss":this._linkData.type=CoC7Link.LINK_TYPE.SANLOSS;break;case"item":this._linkData.type=CoC7Link.LINK_TYPE.ITEM;break;default:this._linkData.type=void 0}else this._linkData.type=x}get check(){return isNaN(Number(this._linkData.check))?void 0:Number(this._linkData.check)}set check(x){isNaN(Number(x))?(this._linkData.check=void 0,CoC7Link.CHARAC_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),CoC7Link.ATTRIB_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.ATTRIBUTE),CoC7Link.SKILL_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.SKILL)):this._linkData.check=Number(x)}get name(){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return this._linkData.characteristicKey;case CoC7Link.CHECK_TYPE.ATTRIBUTE:return this._linkData.attributeKey;case CoC7Link.CHECK_TYPE.SKILL:return this._linkData.skillName;default:return}else if(this.is.item)return this._linkData.itemName}set name(x){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x;break;case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x}else this.is.item&&(this._linkData.itemName=x)}get is(){const link=this;return{get check(){return link.type===CoC7Link.LINK_TYPE.CHECK},set check(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.CHECK)},get sanloss(){return link.type===CoC7Link.LINK_TYPE.SANLOSS},set sanloss(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.SANLOSS)},get item(){return link.type===CoC7Link.LINK_TYPE.ITEM},set item(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.ITEM)}}}async update(updateData){this._linkData=mergeObject(this._linkData,updateData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}async updateFromLink(linkData){await this.setData(linkData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}get link(){if(!this.type)return null;switch(this.type){case CoC7Link.LINK_TYPE.CHECK:{if(!this.type||!this.name)return null;let options=`${this._linkData.blind?"blind,":""}type:${this.checkType},name:${this.name}`;void 0!==this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),void 0!==this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.check[${options}]`;return this._linkData.hasLabel&&this._linkData.label?link+=`{${this._linkData.label}}`:this.name&&(link+=`{${this.name}}`),link}case CoC7Link.LINK_TYPE.SANLOSS:{if(!this._linkData.sanMax||!this._linkData.sanMin)return null;let options=`sanMax:${this._linkData.sanMax},sanMin:${this._linkData.sanMin}`;this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`);let link=`@coc7.sanloss[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}case CoC7Link.LINK_TYPE.ITEM:{if(!this.type||!this.name)return null;let options=`name:${this.name}`;this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.item[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}default:return null}}}class CoC7LinkCreationDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0,width:400,height:"auto",choices:{},allowCustom:!0,minimum:0,maximum:null})}static async fromLinkData(linkData,options={}){const link=await CoC7Link.fromData(linkData);return new CoC7LinkCreationDialog(link,options)}async getData(){const data=await super.getData();data.link=this.link,data.data=this.link.data,data.fromGame=this.link.is.item||this.link.is.check&&this.link.check===CoC7Link.CHECK_TYPE.SKILL,data.askId=data.fromGame&&(this.link.data.fromDirectory||this.link.data.fromCompendium),data.askPack=data.fromGame&&this.link.data.fromCompendium,data.isSetFromGame=data.askId||data.askPack,data.difficultyLevel=CoC7Check.difficultyLevel,data.selectedDifficulty={unknown:CoC7Check.difficultyLevel.unknown===this.link.data.difficulty,regular:CoC7Check.difficultyLevel.regular===this.link.data.difficulty,hard:CoC7Check.difficultyLevel.hard===this.link.data.difficulty,extreme:CoC7Check.difficultyLevel.extreme===this.link.data.difficulty,critical:CoC7Check.difficultyLevel.critical===this.link.data.difficulty},this.link.data.difficulty||("unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?data.selectedDifficulty.unknown=!0:data.selectedDifficulty.regular=!0),data.linkType=[{key:CoC7Link.LINK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check"),selected:this.link.is.check},{key:CoC7Link.LINK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck"),selected:this.link.is.sanloss},{key:CoC7Link.LINK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon"),selected:this.link.is.item}],data.checkType=CoC7Link.CHECK_TYPE,data.selectedCheckType={characteristic:CoC7Link.CHECK_TYPE.CHARACTERISTIC===this.link.check,attribute:CoC7Link.CHECK_TYPE.ATTRIBUTE===this.link.check,skill:CoC7Link.CHECK_TYPE.SKILL===this.link.check},this.link.check||(data.selectedCheckType.characteristic=!0),data.characteristics=CoCActor.getCharacteristicDefinition();for(let i=0;i<data.characteristics.length;i++)data.data.characteristicKey===data.characteristics[i].key||data.data.characteristicKey===data.characteristics[i].shortName||data.data.characteristicKey===data.characteristics[i].label?data.characteristics[i].selected=!0:data.characteristics[i].selected=!1;return data.attributes=[{key:"lck",label:game.i18n.localize("CoC7.Luck"),selected:"lck"===data.data.attributeKey},{key:"san",label:game.i18n.localize("CoC7.Sanity"),selected:"san"===data.data.attributeKey}],data}get link(){return this.object}activateListeners(html){html.find(".submit-button").click(this._onClickSubmit.bind(this)),super.activateListeners(html)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("link"===data.CoC7Type)await this.link.updateFromLink(data),this.render(!0);else{if(data.actorId){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId,actor=chatHelper.getActorFromKey(actorKey);actor.hasPlayerOwner?(this.link.hasPlayerOwner=!0,this.link.actorKey=actor.actorKey):this.link.hasPlayerOwner=!1}if("Item"===data.type)if(data.data)switch(data.data.type){case"skill":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.CHECK,this.link.check=CoC7Link.CHECK_TYPE.SKILL,this.link.name=data.data.name,this.render(!0);break;case"weapon":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.ITEM,this.link.name=data.data.name,this.render(!0)}else data.id&&(this.link._linkData.id=data.id,this.link._linkData.fromDirectory=!0),data.pack&&(this.link._linkData.pack=data.pack,this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!0),await this.link.fetchItem(),this.render(!0)}}_onClickSubmit(event){const action=event.currentTarget.dataset.action;if(this.link.link){switch(action){case"clipboard":CoC7Utilities.copyToClipboard(this.link.link);break;case"chat":{const option={};option.speaker={alias:game.user.name},chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:this.link.link}),option)}break;case"whisper-owner":{const option={};option.speaker={alias:game.user.name},option.whisper=this.link.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:this.link.actor.name,check:this.link.link}),option)}break;case"whisper-selected":{if(!canvas.tokens.controlled.length)return void ui.notifications.warn("No tokens selected");const option={};option.speaker={alias:game.user.name},canvas.tokens.controlled.forEach((t=>{t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:this.link.link}),option))}))}}this.close()}}async _updateObject(event,formData){const target=event.currentTarget,group=target?.closest(".form-group"),groupName=group?.dataset.group;if("origin"===groupName)"fromCompendium"===target.name&&(this.link._linkData.fromCompendium=!this.link._linkData.fromCompendium,this.link._linkData.fromCompendium&&(this.link._linkData.fromDirectory=!1)),"fromDirectory"===target.name&&(this.link._linkData.fromDirectory=!this.link._linkData.fromDirectory,this.link._linkData.fromDirectory&&(this.link._linkData.fromCompendium=!1)),await this.link.fetchItem();else{const formDataEx=expandObject(formData);formDataEx.check&&(formDataEx.check=Number(formDataEx.check)),formDataEx.difficulty&&(formDataEx.difficulty=Number(formDataEx.difficulty)),formDataEx.type&&(formDataEx.type=Number(formDataEx.type));const diffData=diffObject(this.link.data,formDataEx);await this.link.update(diffData)}this.render(!0)}static async create(){const link=new CoC7Link;new CoC7LinkCreationDialog(link,{}).render(!0)}}class CoC7Parser{static async onEditorDrop(event,editor){event.preventDefault();const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("coc7-link"===data.linkType){if(event.stopPropagation(),!event.shiftKey&&(void 0===data.difficulty||void 0===data.modifier)){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(data.modifier=usage.get("bonusDice"),data.difficulty=usage.get("difficulty"))}"blindroll"===game.settings.get("core","rollMode")&&(data.blind=!0);const link=CoC7Parser.createCoC7Link(data);link&&editor.insertContent(link)}else if(isCtrlKey(event)){if(event.stopPropagation(),"Item"!==data.type)return;let item;const linkData={};if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(data.id)}else item=data.data?data.data:game.items.get(data.id);if(!item)return;if(linkData.name=item.name,data.pack&&(linkData.pack=data.pack),data.id&&(linkData.id=data.id),"skill"===item.type){if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(linkData.modifier=usage.get("bonusDice"),linkData.difficulty=usage.get("difficulty"))}linkData.check="check",linkData.type="skill","blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0)}else{if("weapon"!==item.type)return;linkData.check="item",linkData.type="weapon"}const link=CoC7Parser.createCoC7Link(linkData);link&&editor.insertContent(link)}}static ParseMessage(message,html,data){if(message.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}static createCoC7Link(data){if(data.check)switch(data.check.toLowerCase()){case"check":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;void 0!==data.difficulty&&(options+=`,difficulty:${data.difficulty}`),void 0!==data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.check[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"sanloss":{if(!data.sanMax||!data.sanMin)return;let options=`${data.blind?"blind,":""}sanMax:${data.sanMax},sanMin:${data.sanMin}`;data.difficulty&&(options+=`,difficulty:${data.difficulty}`),data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`);let link=`@coc7.sanloss[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"item":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.item[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}}}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _getTextNodes(parent){const text=[],walk=document.createTreeWalker(parent,NodeFilter.SHOW_TEXT,null,!1);for(;walk.nextNode();)text.push(walk.currentNode);return text}static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7).(.*?)\\[([^\\]]+)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Parser._createLink),html.innerHTML}static bindEventsHandler(html){html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _onDragCoC7Link(event){const a=event.currentTarget,i=a.querySelector("i.link-icon"),data=duplicate(a.dataset);data.linkType="coc7-link",data.CoC7Type="link",data.icon=null,i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static _createLink(match,tag,type,options,name){const data={cls:["coc7-link"],dataset:{check:type},icon:"fas fa-dice",blind:!1,name},matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=["check"].includes(type.toLowerCase())),data.dataset[key]=value}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case"check":{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case"sanloss":title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case"item":title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name})}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>${data.name}`,a}static async _onCheck(event){const options=event.currentTarget.dataset;if(options.difficulty&&(options.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),game.user.isGM){if(isCtrlKey(event)){options.displayName&&(options.label=event.currentTarget.innerText);const link=await CoC7Link.fromData(options);return void new CoC7LinkCreationDialog(link).render(!0)}if(canvas.tokens.controlled.length)canvas.tokens.controlled.forEach((token=>{switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return token.actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return token.actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return token.actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(token.actor.id,options,{fastForward:event.shiftKey});break;case"item":return token.actor.weaponCheck(options,event.shiftKey)}}));else if(game.user.data.document.character?.data)await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1})));else if(game.user.isGM){const option={speaker:{alias:game.user.name}};chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:(await CoC7Link.fromData(options)).link}),option)}}else{const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);if(actor)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(actor.id,options,{fastForward:event.shiftKey});break;case"item":return actor.weaponCheck(options,event.shiftKey)}else game.user.data.document.character?.data?await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1}))):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("chase"===data.type?data.img="systems/CoC7/assets/icons/running-solid.svg":"skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"spell"===data.type?data.img="systems/CoC7/assets/icons/pentagram-rose.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if("weapon"===this.type&&!override&&("ahdb"===propertyId&&(checkedProps=this.data.data.properties.ahdb?{"data.properties.ahdb":!1}:{"data.properties.ahdb":!0,"data.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.data.data.properties.addb?{"data.properties.addb":!1}:{"data.properties.addb":!0,"data.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.data.data.properties.shotgun?{"data.properties.shotgun":!1,"data.range.extreme.value":null,"data.range.extreme.damage":null,"data.range.long.value":null,"data.range.long.damage":null}:{"data.properties.rngd":!0,"data.properties.melee":!1,"data.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId)){let meleeWeapon;"melee"!==propertyId||this.data.data.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.data.data.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.data.data.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.data.data.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"data.properties.melee":!0,"data.properties.rngd":!1,"data.properties.shotgun":!1,"data.properties.brst":!1,"data.properties.auto":!1,"data.properties.dbrl":!1}:{"data.properties.melee":!1,"data.properties.rngd":!0}}if("skill"===this.type&&!override){let modif=!1;"combat"===propertyId&&(this.data.data.properties.combat?checkedProps={"data.properties.combat":!1,"data.properties.special":!1,"data.properties.fighting":!1,"data.properties.firearm":!1,"data.specialization":null}:this.data.data.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.data.data.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.data.data.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif&&(fighting&&(checkedProps={"data.properties.fighting":!0,"data.properties.firearm":!1,"data.properties.combat":!0,"data.properties.special":!0,"data.specialization":game.i18n.localize(COC7.fightingSpecializationName)}),firearms&&(checkedProps={"data.properties.fighting":!1,"data.properties.firearm":!0,"data.properties.combat":!0,"data.properties.special":!0,"data.specialization":game.i18n.localize(COC7.firearmSpecializationName)}))}if(Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`data.properties.${propertyId}`,propValue=!this.data.data.properties[propertyId];this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get name(){if("skill"!==this.type||!this.data.data?.properties?.special)return super.name;if(this.data.name.toLowerCase().includes(this.data.data.specialization?.toLowerCase())){if(this.isOwned&&super.name===this.data.name){const match=new RegExp("^"+this.data.data.specialization.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")+" \\((.+)\\)$").exec(this.data.name);if(null!==match&&void 0!==match[1])return match[1]}return super.name}return this.isOwned?super.name:`${this.data.data.specialization} (${this.data.name})`}get sName(){return"skill"===this.type&&this.data.data?.properties?.special?this.data.name.toLowerCase().includes(this.data.data.specialization?.toLowerCase())?super.name:`${this.data.name}`:super.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.data.data?.properties?.special){const specNameRegex=new RegExp(item.data.data.specialization,"ig"),filteredName=item.name.replace(specNameRegex,"").trim().replace(/^\(+|\)+$/gm,"");return filteredName.length?filteredName:item.name}}else if(item.data.properties?.special){const specNameRegex=new RegExp(item.data.specialization,"ig"),filteredName=item.name.replace(specNameRegex,"").trim().replace(/^\(+|\)+$/gm,"");return filteredName.length?filteredName:item.name}return item.name}static isAnySpec(item){return item instanceof CoC7Item?!("skill"!==item.type||!item.data.data.properties?.special)&&CoC7Item.getNameWithoutSpec(item).toLowerCase()===game.i18n.localize("CoC7.AnySpecName").toLowerCase():!("skill"!==item.type||!item.data.properties?.special)&&CoC7Item.getNameWithoutSpec(item).toLowerCase()===game.i18n.localize("CoC7.AnySpecName").toLowerCase()}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.data.data.properties.combat?(this.data.data.properties.special||(this.data.data.properties.special=!0,checkedProps["data.properties.special"]=!0),this.data.data.properties.fighting||this.data.data.properties.firearm||(this.data.data.properties.fighting=!0,checkedProps["data.properties.fighting"]=!0),!this.data.data.properties.fighting||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.data.data.properties.firearm||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.data.data.properties.fighting&&(this.data.data.properties.fighting=!1,checkedProps["data.properties.fighting"]=!1),this.data.data.properties.firearm&&(this.data.data.properties.firearm=!1,checkedProps["data.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.data.data[set]||(this.data.data[set]=[]);return this.data.data[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info("XP Gain disabled."):await this.update({[name]:flagValue}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.data.data.properties?.auto||!0===this.data.data.properties?.brst||!0===this.data.data.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.data.data.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.data.data.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.data.data.usesPerRound.normal?this.data.data.usesPerRound.normal:"1",this.data.data.usesPerRound.max&&(usesPerRound+=`(${this.data.data.usesPerRound.max})`),this.data.data.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.data.data.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.data.data.usesPerRound.burst&&(usesPerRound+=`(${this.data.data.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.data.data.range.normal.value)}get longRange(){return parseInt(this.data.data.range.long.value)}get extremeRange(){return parseInt(this.data.data.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}get _base(){if("skill"!==this.type)return null;if("string"!=typeof this.data.data.base)return this.data.data.base;if(this.data.data.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.data.data.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.data.data.base))?null:parseInt(this.data.data.base),!1]}async asyncBase(){const e=this._base;return e[1]&&await this.update({"data.base":e[0]}),e[0]}get base(){const e=this._base;return e[1]&&this.update({"data.base":e[0]}),e[0]}get value(){if("skill"!==this.type)return null;let value=0;return"character"===this.actor.data.type?(value=this.base,value+=this.data.data.adjustments?.personal?parseInt(this.data.data.adjustments?.personal):0,value+=this.data.data.adjustments?.occupation?parseInt(this.data.data.adjustments?.occupation):0,value+=this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments?.experience):0,game.settings.get("CoC7","pulpRules")&&this.data.data.adjustments?.archetype&&(value+=parseInt(this.data.data.adjustments?.archetype))):value=parseInt(this.data.data.value),isNaN(value)?null:value}async updateValue(value){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const delta=parseInt(value)-this.value,exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+delta;await this.update({"data.adjustments.experience":exp>0?exp:0})}else await this.update({"data.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+parseInt(x);await this.update({"data.adjustments.experience":exp>0?exp:0})}}getBulletLeft(){return"weapon"!==this.type?null:this.data.data.ammo?this.data.data.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.data.data.bullets?parseInt(this.data.data.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"data.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.data.data.bullets?parseInt(this.data.data.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.toLowerCase()+a.name.toLowerCase():a.name.toLowerCase(),lcb=b.data.properties.special?b.data.specialization.toLowerCase()+b.name.toLowerCase():b.name.toLowerCase()):(lca=a.name.toLowerCase(),lcb=b.name.toLowerCase()),lca.localeCompare(lcb)}))}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){const data=duplicate(this.data.data);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.data.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.data.data.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.data.data.skill.main.id){const skill=this.actor?.items.get(this.data.data.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.data.data.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.data.data.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.data.data.skill.main.name,this.usesAlternativeSkill&&this.data.data.skill.alternativ.name&&(skillName+=`/${this.data.data.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.data.data.malfunction?this.data.data.malfunction:"-"}),this.data.data.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.data.data.bullets})}canBePushed(){return!("skill"!==this.type||!this.data.data.properties.push)}get impale(){return this.data.data.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.DodgeSkillName").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){return this.rawValue?this.rawValue<50?96:100:null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.name;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get sName(){if(this.actor){if(this.skill)return this.skill.sName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.data.data.skill&&(this.item.data.data.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.data.data.skill.main.id):this.item.data.data.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.data.data.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform()}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null}={}){const check=new CoC7Check;return check.difficulty=difficulty,diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute&&(check.attribute=attribute)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||AudioHelper.play({src:CONFIG.sounds.dice}),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.data.data.malfunction&&Number(this.modifiedResult)>=Number(this.item.data.data.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.data.data.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.data.data.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];this.dices.tens.forEach((dieResult=>{diceResults.push(100===dieResult.value?0:dieResult.value/10)})),diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();return this.increaseSuccess.forEach((s=>{s.luckToSpend=s.luckToSpend-luckAmount})),this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){luckAmount?(this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty,this.increaseSuccess.forEach((s=>{s.luckToSpend=s.luckToSpend-luckAmount})),this.luckSpent=!0,this.isSuccess=!0,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()):(this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update))}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.data&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.data.data.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`)})+` (${this.actor.data.data.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.data.data.characteristics[this.characteristic].label)})+` (${this.actor.data.data.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):(speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0,originalSpeaker:duplicate(chatData.speaker)}},game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.data.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}const chatData={flavor:this.flavor,content:newContent};CONST.CHAT_MESSAGE_TYPES.ROLL===message.data.type&&(message.data.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),makePublic&&(chatData.whisper=[],chatData.blind=!1),ChatMessage.applyRollMode(chatData),forceRoll&&this.dice?.roll&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}async shortResult(details=!1){this.details=details||!1;return await renderTemplate("systems/CoC7/templates/chat/roll.html",this)}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",{allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,options});return new Promise((resolve=>{let formData=null;new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}}).render(!0)}))}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}}).render(!0)}))}}class CoC7ActorSheet extends ActorSheet{async getData(){const data=await super.getData(),actorData=this.actor.data.toObject(!1);if(data.data=actorData.data,data.editable=this.isEditable,data.isToken=this.actor.isToken,data.itemsByType={},data.skills={},data.combatSkills={},data.weapons={},data.rangeWpn=[],data.meleeWpn=[],data.actorFlags={},data.permissionLimited=(this.actor.data.permission[game.user.id]===CONST.ENTITY_PERMISSIONS.LIMITED||this.actor.data.permission.default===CONST.ENTITY_PERMISSIONS.LIMITED)&&!game.user.isGM,data.isGM=game.user.isGM,data.alowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(data["data.flags.locked"]=!1),["vehicle"].includes(this.actor.data.type)||(data.data.characteristics||(data.data.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),data.data.attribs||(data.data.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),data.data.status||(data.data.status={criticalWounds:{type:"Boolean",value:!1},unconscious:{type:"Boolean",value:!1},dying:{type:"Boolean",value:!1},dead:{type:"Boolean",value:!1},prone:{type:"Boolean",value:!1},tempoInsane:{type:"boolean",value:!1},indefInsane:{type:"boolean",value:!1}}),data.data.biography||(data.data.biography={personalDescription:{type:"string",value:""}}),data.data.infos||(data.data.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),data.data.flags||(data.data.flags={locked:!0,manualCredit:!1}),data.data.credit||(data.data.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),data.data.development||(data.data.development={personal:null,occupation:null,archetype:null}),data.data.biography||(data.data.biography=[]),data.data.encounteredCreatures||(data.data.encounteredCreatures=[]),data.isInABoutOfMadness=this.actor.isInABoutOfMadness,data.isInsane=this.actor.isInsane,data.boutOfMadness=this.actor.boutOfMadness,data.sanity=this.actor.sanity,data.pulpCharacter=game.settings.get("CoC7","pulpRules")),data.isDead=this.actor.dead,data.isDying=this.actor.dying,data.items){for(const item of data.items){if("skill"===item.type){if(item.data.properties.special){if(item.data.properties.fighting&&item.data.specialization!==game.i18n.localize("CoC7.FightingSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FightingSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FightingSpecializationName")}if(item.data.properties.firearm&&item.data.specialization!==game.i18n.localize("CoC7.FirearmSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FirearmSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FirearmSpecializationName")}}if("character"!==this.actor.data.type){if(isNaN(Number(item.data.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.data.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(`unable to parse formula :${item.data.value} for skill ${item.name}`),value=null}if(value){item.data.value=value;const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.value":value})}}}else{const skill=this.actor.items.get(item._id);if(item.data.base=await skill.asyncBase(),item.data.value){const value=item.data.value;let updatedExp=(item.data.adjustments?.experience?parseInt(item.data.adjustments.experience):0)+parseInt(item.data.value)-skill.value;updatedExp<=0&&(updatedExp=null),await this.actor.updateEmbeddedEntity("OwnedItem",{_id:item._id,"data.adjustments.experience":updatedExp,"data.value":null}),item.data.adjustments||(item.data.adjustments={}),item.data.adjustments.experience=updatedExp,item.data.value=value}else item.data.value=skill.value}}let list=data.itemsByType[item.type];list||(list=[],data.itemsByType[item.type]=list),list.push(item)}for(const itemType in data.itemsByType)data.itemsByType[itemType].sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special&&void 0!==a.data.specialization?a.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.data.properties.special&&void 0!==b.data.specialization?b.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()):(lca=a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),lca<lcb?-1:lca>lcb?1:0}));data.skills=data.items.filter((item=>"skill"===item.type)).sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.data.properties.special?b.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()):(lca=a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),lca<lcb?-1:lca>lcb?1:0})),data.meleeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.fighting)),data.rangeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.firearm));const cbtSkills=data.skills.filter((skill=>!0===skill.data.properties.combat));if(cbtSkills)for(const skill of cbtSkills)data.combatSkills[skill._id]=skill;const weapons=data.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.data.properties.auto||!0===weapon.data.properties.brst,weapon.data.ammo||(weapon.data.ammo=0),weapon.skillSet=!0,""===weapon.data.skill.main.id)weapon.skillSet=!1;else{if(data.combatSkills[weapon.data.skill.main.id]){const skill=this.actor.items.get(weapon.data.skill.main.id);weapon.data.skill.main.name=data.combatSkills[weapon.data.skill.main.id].name,weapon.data.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.data.skill.alternativ.id&&data.combatSkills[weapon.data.skill.alternativ.id]){const skill=this.actor.items.get(weapon.data.skill.alternativ.id);weapon.data.skill.alternativ.name=data.combatSkills[weapon.data.skill.alternativ.id].name,weapon.data.skill.alternativ.value=skill.value}}weapon.data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.data.properties[key],weapon.data._properties.push(property)}data.weapons[weapon._id]=weapon,weapon.data.properties.rngd?data.rangeWpn.push(weapon):data.meleeWpn.push(weapon)}const token=this.token;if(data.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,data.hasEmptyValueWithFormula=!1,data.data.characteristics)for(const characteristic of Object.values(data.data.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),data.hasEmptyValueWithFormula=data.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle"].includes(this.actor.data.type))data.data.attribs.hp.auto=!1,data.data.attribs.mp.auto=!1,data.data.attribs.san.auto=!1,data.data.attribs.mov.auto=!1,data.data.attribs.db.auto=!1,data.data.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();data.data=mergeObject(data.data,auto)}return data.data.attribs.mov.value=this.actor.mov,data.data.attribs.db.value=this.actor.db,data.data.attribs.build.value=this.actor.build,void 0===this.actor.compendium&&(this.actor.update({"data.attribs.mov.value":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.mov.max":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.db.value":this.actor.db},{render:!1}),this.actor.update({"data.attribs.build.current":this.actor.build},{render:!1}),this.actor.update({"data.attribs.build.value":this.actor.build},{render:!1})),data.data.attribs.mp.value<0&&(data.data.attribs.mp.value=null),data.data.attribs.san.value<0&&(data.data.attribs.san.value=null),data.data.attribs.hp.auto&&null!=data.data.characteristics.siz.value&&null!=data.data.characteristics.con.value&&(data.data.attribs.hp.max=this.actor.hpMax),data.data.attribs.mp.auto&&null!=data.data.characteristics.pow.value&&(data.data.attribs.mp.max=Math.floor(data.data.characteristics.pow.value/5)),data.data.attribs.san.auto&&(data.data.attribs.san.max=this.actor.sanMax),(data.data.attribs.mp.value>data.data.attribs.mp.max||null==data.data.attribs.mp.max)&&(data.data.attribs.mp.value=data.data.attribs.mp.max),(data.data.attribs.hp.value>data.data.attribs.hp.max||null==data.data.attribs.hp.max)&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.hp.value&&null!=data.data.attribs.hp.max&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.mp.value&&null!=data.data.attribs.mp.max&&(data.data.attribs.mp.value=data.data.attribs.mp.max),["vehicle"].includes(this.actor.data.type)||(null==data.data.attribs.san.value&&null!=data.data.characteristics.pow.value&&(data.data.attribs.san.value=data.data.characteristics.pow.value),data.data.attribs.san.value>data.data.attribs.san.max&&(data.data.attribs.san.value=data.data.attribs.san.max),data.data.biography instanceof Array&&data.data.biography.length&&(data.data.biography[0].isFirst=!0,data.data.biography[data.data.biography.length-1].isLast=!0),data.data.indefiniteInsanityLevel={},data.data.indefiniteInsanityLevel.value=data.data.attribs.san.dailyLoss?data.data.attribs.san.dailyLoss:0,data.data.indefiniteInsanityLevel.max=Math.floor(data.data.attribs.san.value/5)),data.hasInventory=Object.prototype.hasOwnProperty.call(data.itemsByType,"item")||Object.prototype.hasOwnProperty.call(data.itemsByType,"book")||Object.prototype.hasOwnProperty.call(data.itemsByType,"spell")||Object.prototype.hasOwnProperty.call(data.itemsByType,"talent"),data}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".status-monitor").click(this._onStatusToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"skill":this.actor.createEmptySkill(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".add-new-section").click((()=>{this.actor.createBioSection()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event))),html.find(".test-trigger").click((async event=>{await OpposedCheckCard.dispatch({type:OpposedCheckCard.defaultConfig.type,combat:!1,action:"new",roll:{characteristic:"str",actor:this.actor.actorKey}}),await OpposedCheckCard.dispatch({type:OpposedCheckCard.defaultConfig.type,combat:!1,action:"new",roll:{characteristic:"con"}}),event.shiftKey&&ui.notifications.info("Shift cliecked")})))}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){await super._onDrop(event)}async _onStatusToggle(event){event.preventDefault(),event.currentTarget.dataset.status?await this.actor.toggleStatus(event.currentTarget.dataset.status):event.currentTarget.dataset.effect&&await this.actor.toggleEffect(event.currentTarget.dataset.effect)}async revive(){game.user.isGM&&this.actor.unsetStatus(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetStatus(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onResetCounter(event){event.preventDefault();const counter=event.currentTarget.dataset.counter,oneFifthSanity=" / "+Math.floor(this.actor.data.data.attribs.san.value/5);this.actor.setOneFifthSanity(oneFifthSanity),counter&&this.actor.resetCounter(counter)}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value);switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"data.attribs.hp.value":this.actor.setHp(value);break;case"data.attribs.mp.value":this.actor.setMp(value);break;case"data.attribs.san.value":this.actor.setSan(value);break;case"data.attribs.lck.value":this.actor.setLuck(value);break;case"data.attribs.build.current":this.actor.setHp(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');if(chatData.labels.forEach((p=>labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`))),div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.data.data.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');chatData.properties.forEach((p=>props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`))),div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel,pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200):pannel.slideDown(200),pannel.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault();$(event.currentTarget).parents(".inventory-section").find("ol").toggle()}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.data.data.description.enrichedValue=TextEditor.enrichHTML(skill.data.data.description.value);new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:"item",type:"weapon",name:weapon.name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey};CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),event.altKey){const data={type:CombinedCheckCard.defaultConfig.type,action:"new"},roll=new CoC7Check;if(roll.actor=event.currentTarget.closest("form").dataset.tokenId||event.currentTarget.closest("form").dataset.actorId,roll.characteristic=event.currentTarget.parentElement.dataset.characteristic,roll.attribute=event.currentTarget.parentElement.dataset.attrib,roll.skillId=event.currentTarget.closest(".item")?.dataset.skillId,roll.rollMode=game.settings.get("core","rollMode"),roll.initiator=game.user.id,"db"===roll.attrib)return;data.roll=roll.JSONRollData,CombinedCheckCard.dispatch(data)}else{const data={type:OpposedCheckCard.defaultConfig.type,combat:event.currentTarget.classList?.contains("combat"),action:"new"},roll=new CoC7Check;if(roll.actor=event.currentTarget.closest("form").dataset.tokenId||event.currentTarget.closest("form").dataset.actorId,roll.characteristic=event.currentTarget.parentElement.dataset.characteristic,roll.attribute=event.currentTarget.parentElement.dataset.attrib,roll.item=event.currentTarget.closest(".item")?.dataset.itemId,roll.weaponAltSkill=event.currentTarget.classList.contains("alternativ-skill"),roll.skillId=event.currentTarget.closest(".item")?.dataset.skillId,roll.rollMode=game.settings.get("core","rollMode"),roll.initiator=game.user.id,"db"===roll.attrib)return;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(roll.diceModifier=Number(usage.get("bonusDice")),roll.difficulty=Number(usage.get("difficulty")),roll.flatDiceModifier=Number(usage.get("flatDiceModifier")),roll.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}roll.denyPush=!0,await roll._perform(),data.roll=roll.JSONRollData,OpposedCheckCard.dispatch(data)}}async _onRollCharacteriticTest(event){event.preventDefault();const actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,characteristic=event.currentTarget.parentElement.dataset.characteristic;if(isCtrlKey(event)&&game.user.isGM){const linkData={check:"check",type:"characteristic",name:characteristic,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}let difficulty,modifier,flatDiceModifier,flatThresholdModifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const check=new CoC7Check;"undefined"!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.actor=tokenKey||actorId,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.rollCharacteristic(characteristic),check.toMessage()}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if(isCtrlKey(event)&&game.user.isGM&&["lck","san"].includes(attrib)){const linkData=event.altKey?{check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey}:{check:"check",type:"attribute",name:attrib,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}if("db"===attrib){if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}return}if("lck"===attrib&&!this.actor.data.data.attribs.lck.value)return;const actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId;let difficulty,modifier,flatDiceModifier,flatThresholdModifier,sanMin,sanMax;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:!1,disableFlatDiceModifier:!1});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}if(event.altKey&&"san"===attrib){const sanData=await SanDataDialog.create({promptLabel:!1});sanData&&(sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0,isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)))}if(void 0!==sanMin&&void 0!==sanMax)SanCheckCard.create(this.actor.actorKey,{sanMin,sanMax},{sanModifier:modifier,sanDifficulty:difficulty,fastForward:event.shiftKey});else{const check=new CoC7Check;void 0!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tokenKey||actorId,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.rollAttribute(attrib),check.toMessage()}}async _onRollSkillTest(event){if(event.currentTarget.classList.contains("flagged4dev"))return;event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId;if(isCtrlKey(event)&&game.user.isGM){const name=this.actor.items.get(skillId)?.name;if(!name)return;const linkData={check:"check",type:"skill",name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}let difficulty,modifier,flatDiceModifier,flatThresholdModifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:!1,disableFlatDiceModifier:!1});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const check=new CoC7Check;void 0!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.actor=tokenKey||actorId,check.skill=skillId,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.roll(),check.toMessage()}async _updateObject(event,formData){if(event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize(COC7.creditRatingSkillName)===item.name){const creditValue=value||0;(creditValue>Number(this.actor.occupation.data.data.creditRating.max)||creditValue<Number(this.actor.occupation.data.data.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.data.data.creditRating.min),max:Number(this.actor.occupation.data.data.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")&&"data.attribs.san.value"===event.currentTarget.name)return void this.actor.setSan(parseInt(event.currentTarget.value));if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);item&&await item.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"data.skill.main.id":skill.id,"data.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"data.skill.alternativ.id":skill.id,"data.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(event.currentTarget.value+" is not a valid formula");else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"data.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"data.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":null});break;case"long":await weapon.update({"data.range.long.damage":null});break;case"extreme":await weapon.update({"data.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const data=await super.getData();return data.allowFormula=!0,data.displayFormula=this.actor.getActorFlag("displayFormula"),void 0===data.displayFormula&&(data.displayFormula=!1),data.hasSan=null!==data.data.attribs.san.value,data.hasMp=null!==data.data.attribs.mp.value,data.hasLuck=null!==data.data.attribs.lck.value,data}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event)))}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!0})}static forceAuto(app,html){const cell=html.find(".description.pannel.expanded");cell.length&&cell.height(Math.max(200,html.height()-cell.position().top-8)+"px")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7ActorSheet{async getData(){const data=await super.getData();return data.allowFormula=!0,data.displayFormula=this.actor.getActorFlag("displayFormula"),void 0===data.displayFormula&&(data.displayFormula=!1),data.hasSan=null!==data.data.attribs.san.value,data.hasMp=null!==data.data.attribs.mp.value,data.hasLuck=null!==data.data.attribs.lck.value,data}activateListeners(html){super.activateListeners(html),html.find(".roll-san").click(this._onSanCheck.bind(this)),this.actor.isOwner&&html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event)))}async _onSanCheck(event){if(event.preventDefault(),this.actor.data.data.special.sanLoss.checkPassed||this.actor.data.data.special.sanLoss.checkFailled)if((event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.data.data.special.sanLoss.checkPassed,sanMax:this.actor.data.data.special.sanLoss.checkFailled};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=CoC7Parser.createCoC7Link(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else SanCheckCard.checkTargets(this.actor.tokenKey,event.shiftKey)}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/actors/creature-sheet.html",width:580,classes:["coc7","sheet","actor","npc","creature"],dragDrop:[{dragSelector:".item",dropSelector:null}]})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){const cell=html.find(".description.pannel.expanded");cell.length&&cell.height(Math.max(130,html.height()-cell.position().top-8)+"px")}setPosition(a){super.setPosition(a),CoC7CreatureSheet.forceAuto(a,this._element)}}class CoC7CharacterSheet extends CoC7ActorSheet{async getData(){const data=await super.getData();if(this.actor.occupation?(data.data.infos.occupation=this.actor.occupation.name,data.data.infos.occupationSet=!0):data.data.infos.occupationSet=!1,this.actor.archetype?(data.data.infos.archetype=this.actor.archetype.name,data.data.infos.archetypeSet=!0):data.data.infos.archetypeSet=!1,data.totalExperience=this.actor.experiencePoints,data.totalOccupation=this.actor.occupationPointsSpent,data.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.data.data.development?.occupation),data.totalArchetype=this.actor.archetypePointsSpent,data.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.data.data.development?.archetype),data.totalPersonal=this.actor.personalPointsSpent,data.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.data.data.development?.personal),data.creditRatingMax=Number(this.actor.occupation?.data.data.creditRating.max),data.creditRatingMin=Number(this.actor.occupation?.data.data.creditRating.min),data.invalidCreditRating=this.actor.creditRatingSkill?.data.data.adjustments?.occupation>data.creditRatingMax||this.actor.creditRatingSkill?.data.data.adjustments?.occupation<data.creditRatingMin,data.pulpTalentCount=data.itemsByType.talent?.length?data.itemsByType.talent?.length:0,data.minPulpTalents=this.actor.archetype?.data.data.talents?this.actor.archetype?.data.data.talents:0,data.invalidPulpTalents=data.pulpTalentCount<data.minPulpTalents,data.hasSkillFlaggedForExp=this.actor.hasSkillFlaggedForExp,data.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),data.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),data.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),data.showDevPannel=data.allowDevelopment||data.allowCharCreation,data.manualCredit=this.actor.getActorFlag("manualCredit"),!data.manualCredit){let factor,moneySymbol;data.credit={},data.data.credit?(factor=parseInt(data.data.credit.multiplier)?parseInt(data.data.credit.multiplier):1,moneySymbol=data.data.credit.monetarySymbol?data.data.credit.monetarySymbol:"$"):(factor=1,moneySymbol="$"),data.credit.spendingLevel=`${this.actor.spendingLevel*factor}${moneySymbol}`,data.credit.assets=`${this.actor.assets*factor}${moneySymbol}`,data.credit.cash=`${this.actor.cash*factor}${moneySymbol}`}return data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event))))}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","character"],template:"systems/CoC7/templates/actors/character-sheet.html",width:600,height:650,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}}class CoC7CharacterSheetV2 extends CoC7CharacterSheet{async getData(){const data=await super.getData();data.skillList=[];let previousSpec="";for(const skill of data.skills)skill.data.properties.special&&previousSpec!==skill.data.specialization&&(previousSpec=skill.data.specialization,data.skillList.push({isSpecialization:!0,name:skill.data.specialization})),data.skillList.push(skill);if(data.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),data.displayPlayerName&&!data.data.infos.playername){const user=this.actor.characterUser;user&&(data.data.infos.playername=user.name)}return data}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character-sheet-v2.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}static renderSheet(sheet){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground")){if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover");break;default:CSSStyle.setProperty("background-size","auto")}}}}else"null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase()&&sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");if(game.settings.get("CoC7","artWorkOtherSheetBackground")?sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground")):"null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()&&sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkSheetImage")?sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage")):"null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()&&sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactie-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.data.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){ids="string"==typeof ids?[ids]:ids;const currentId=this.combatant.id,updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id);if(!combatant?.isOwner)return null;const roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),updateTurn&&await this.update({turn:this.turns.findIndex((t=>t.id===currentId))}),this):this}class Updater{static async checkForUpdate(){this.systemUpdateVersion=String(game.settings.get("CoC7","systemUpdateVersion")),isNewerVersion("0.3",this.systemUpdateVersion)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.Message",{version:game.system.data.version}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.data.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Actor entity ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Actor ${actor.name}: ${err.message}`,console.error(err)}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Item entity ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Item ${item.name}: ${err.message}`,console.error(err)}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Table entity ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${table.name}: ${err.message}`,console.error(err)}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Macro entity ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${macro.name}: ${err.message}`,console.error(err)}for(const pack of game.packs)"world"===pack.metadata.package&&["Actor","Item","Macro","RollTable"].includes(pack.metadata.entity)&&await Updater.migrateCompendiumData(pack);game.settings.set("CoC7","systemUpdateVersion","0.3")}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isObjectEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const entity=pack.metadata.entity;if(!["Actor","Item","Macro","RollTable"].includes(entity))return;const wasLocked=pack.locked;await pack.configure({locked:!1}),await pack.migrate();const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(entity){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject())}foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrated ${entity} entity ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){err.message=`Failed CoC7 system migration for entity ${doc.name} in pack ${pack.collection}: ${err.message}`,console.error(err)}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.data.adjustments?.experience&&(updateData["data.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(item.img).match(regEx);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.data.items))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.items"]&&(updateData["data.items"]=item.data.items),updateData["data.items"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("occupation"===item.type){for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);for(const[o,g]of Object.entries(item.data.groups))for(const[k,v]of Object.entries(g.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.groups"]&&(updateData["data.groups"]=item.data.groups),updateData["data.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1])}else if("book"===item.type)for(const[k,v]of Object.entries(item.data.spells))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.spells"]&&(updateData["data.spells"]=item.data.spells),updateData["data.spells"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("archetype"===item.type)for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.data.description.unidentified&&(updateData["data.author"]=item.data.author||"",updateData["data.date"]=item.data.date||"",updateData["data.language"]=item.data.language||"",updateData["data.sanityLoss"]=item.data.sanLoss||0,updateData["data.mythosRating"]=Number(item.data.mythosRating)||0,updateData["data.content"]=item.data.description.unidentified,updateData["data.keeperNotes"]=item.data.description.notes,updateData["data.difficultyLevel"]="regular",updateData["data.fullStudies"]=0,updateData["data.initialReading"]=!1,updateData["data.keeperNotes"]="",updateData["data.gains.cthulhuMythos.initial"]=Number(item.data.gain.cthulhuMythos.CMI)||0,updateData["data.gains.cthulhuMythos.final"]=Number(item.data.gain.cthulhuMythos.CMF)||0,updateData["data.gains.occult"]=Number(item.data.gain.occult)||0,updateData["data.gains.others"]=[],updateData["data.study"]={necessary:Number(item.data.weeksStudyTime)||0,progress:0},updateData["data.-=sanLoss"]=null,updateData["data.-=weeksStudyTime"]=null,updateData["data.-=gain"]=null,updateData["data.description.-=unidentified"]=null,updateData["data.description.-=notes"]=null,updateData["data.gains.-=other"]=null,updateData["data.-=properties"]=null,updateData["data.-=flags"]=null),updateData}static _migrateActorArtwork(actor,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(actor.img).match(regEx);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),image=String(actor.token.img).match(regEx),null!==image&&(updateData["token.img"]="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(regEx),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type){const oneFifthSanity=Math.ceil(actor.data.attribs.san.value/5);void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.attribs.san.oneFifthSanity&&null!==actor.data.attribs.san.oneFifthSanity||(updateData["data.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.value&&null!==actor.data.indefiniteInsanityLevel.value||(updateData["data.indefiniteInsanityLevel.value"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.max&&null!==actor.data.indefiniteInsanityLevel.max||(updateData["data.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.data.attribs.mp.value&&null!==actor.data.attribs.mp.value||(updateData["data.attribs.mp.value"]=oneFifthSanity),void 0!==actor.data.attribs.mp.max&&null!==actor.data.attribs.mp.max||(updateData["data.attribs.mp.max"]=oneFifthSanity),void 0!==actor.data.notes&&null!==actor.data.notes||(updateData["data.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/),image=String(table.img).match(regEx);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(table.img).match(regEx);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(regEx),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}}const accentedCharacters=function(string){const len=string.length;let qString="'";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current;else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString+="'",qString}("aeio");const englishRegExp={nameRegExp:new RegExp("^[\\s\\n\\r]*(?<name>[\\w\\s\\.\\/\\(\\)\\-"+accentedCharacters+"]+),"),ageRegExp:/[, ]?\s*age:?\s+(\d+)/i,strRegExp:/(?:STR):?\s+(\d+)/,conRegExp:/CON:?\s+(\d+)/,sizRegExp:/(?:SIZ):?\s+(\d+)/,intRegExp:/INT:?\s+(\d+)/,powRegExp:/(?:POW):?\s+(\d+)/,dexRegExp:/(?:DEX):?\s+(\d+)/,appRegExp:/(?:APP):?\s+(\d+)/,eduRegExp:/EDU:?\s+(\d+)/,sanRegExp:/(?:SAN|Sanity):?\s+(\d+)/,hpRegExp:/(?:HP|Hit points):?\s+(\d+)/,mpRegExp:/(?:MP|Magic points):?\s+(\d+)/,dbRegExp:/(?:Damage Bonus|DB):?\s+([+-]?\d+(?:d\d+|D\d+)?)/i,attacksRegExp:/(?:Attacks|Fighting|Combat):?\s+(.*)\.[\n|\r]?$/ims,buildRegExp:/(?:Build):?\s+([+-]?\d+)/i,armorRegExp:/(?:Armor):?\s+(none|\d+)/i,moveRegExp:/(?:Move):?\s+(\d+)/i,luckRegExp:/(?:Luck):?\s+(\d+)/i,spellsRegExp:/(?:Spells):?\s+(.*)\.[\n|\r]?$/ims,skillsRegExp:/(?:Skills):?\s+(.*)\.[\n|\r]?$/ims,dodgeRegExp:/(?<name>Dodge):?\s+\(?(?<percentage>\d+)\)?\s*%/i,languagesRegExp:/(?:Languages):?\s+(.*)\.[\n|\r]?$/ims,skillRegExp:new RegExp("(?<skill>[\\w\\s\\(\\).\\/"+accentedCharacters+"]+) (?<percentage>\\d+)%"),attacksPerRoundRegExp:/(?:Attacks per round|# Attacks):?\s+(none|\d+)/i,sanLossRegExp:/(?:Sanity loss|SAN loss):?\s+(none|\d[dD]?[+\d]*\/\d[dD][+\d]+)/i,weaponRegExp:new RegExp("^(?<weapon>[\\w\\s\\n\\(\\).\\/"+accentedCharacters+"]+):?[\\n\\r\\s]+(?<percentage>\\d+)%,?\\s*(?:\\(\\d+\\/\\d+\\))?\\s*,?\\s*(?:damage)\\s+(?<damage>[\\d+\\+dD\\- ]+\\s*(DB|db|damage bonus)?)","img"),stopWords:"(Spells|Skills|Sanity loss|Languages|Armor|Attacks|Combat|)",handgunRegExp:/( Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| .38)/i,rifleRegExp:/(Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)/i,smbRegExp:/(Submachine Gun|Thompson)/i,machineGunRegExp:/(Browning|Vickers)/i,launchedWeapons:/(Molotov|Grenade|Dynamite)/i},frenchRegExp={nameRegExp:new RegExp("^[\\s\\n\\r]*(?<name>[\\w\\s\\.\\/\\(\\)\\-"+accentedCharacters+"]+),"),ageRegExp:/(\d+) ans/i,strRegExp:/(?:FOR):?\s+(\d+)/,conRegExp:/CON:?\s+(\d+)/,sizRegExp:/(?:TAI):?\s+(\d+)/,intRegExp:/INT:?\s+(\d+)/,powRegExp:/(?:POU):?\s+(\d+)/,dexRegExp:/(?:DEX):?\s+(\d+)/,appRegExp:/(?:APP):?\s+(\d+)/,eduRegExp:/DU:?\s+(\d+)/,sanRegExp:/(?:SAN|Sant Mentale):?\s+(\d+)/,hpRegExp:/(?:PV|Points de vie):?\s+(\d+)/,mpRegExp:/(?:PM|Points de magie):?\s+(\d+)/,dbRegExp:/(?:BD|Bonus aux dommages|Impact|Imp):?\s+([+-]?\d+(?:d\d+|D\d+)?)/i,attacksRegExp:/(?:Attaques|Armes|Combat):?\s+(.*)\.[\n|\r]?$/ims,buildRegExp:/(?:Carrure):?\s+([+-]?\d+)/i,armorRegExp:/(?:Armure):?\s+(Acune|\d+)/i,moveRegExp:/(?:Mvt|Mouvement|Dplacement):?\s+(\d+)/i,luckRegExp:/(?:Chance):?\s+(\d+)/i,spellsRegExp:/(?:Sortilges|Sorts):?\s+(.*)\.[\n|\r]?$/ims,skillsRegExp:/(?:Comptences):?\s+(.*)\.[\n|\r]?$/ims,dodgeRegExp:/(?<name>Esquiver):?\s+\(?(?<percentage>\d+)\)?\s*%/i,languagesRegExp:/(?:Langue):?\s+(.*)\.[\n|\r]?$/ims,skillRegExp:new RegExp("(?<skill>[\\w\\s\\(\\).\\/"+accentedCharacters+"]+) (?<percentage>\\d+)%"),attacksPerRoundRegExp:/(?:Attaques par round):?\s+(Acune|\d+)/i,sanLossRegExp:/(?:Perte de [Sant mentale|SAN]):?\s+(no|\d[dD]?[+\d]*\/\d[dD][+\d]+)/i,weaponRegExp:new RegExp("^(?<weapon>[\\w\\s\\n\\(\\).\\/"+accentedCharacters+"]+):?[\\n\\r\\s]+(?<percentage>\\d+)%,?\\s*(?:\\(\\d+\\/\\d+\\))?\\s*,?\\s*(?:dommage|dgts)\\s+(?<damage>[\\d+\\+dD\\- ]+\\s*(Impact|Imp)?)","img"),stopWords:"(Langue|Armure|Carrure|Perte de Sant mentale|Comptences|Combat|Armes|Attaques)",handgunRegExp:/(Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| .38)/i,rifleRegExp:/(Carabine|Lee-Enfield|Fusil)/i,smbRegExp:/(SMG|Thompson)/i,machineGunRegExp:/(Browning|Vickers|Mitrailleuse)/i,launchedWeapons:/(Molotov|Grenade|Dynamite)/i},spanishRegExp={nameRegExp:new RegExp("^[\\s\\n\\r]*(?<name>[\\w\\s\\.\\/\\(\\)\\-"+accentedCharacters+"]+),"),ageRegExp:/(\d+) a[]os/i,strRegExp:/(?:FUE):?\s+(\d+)/,conRegExp:/CON:?\s+(\d+)/,sizRegExp:/(?:TAM):?\s+(\d+)/,intRegExp:/INT:?\s+(\d+)/,powRegExp:/(?:POD):?\s+(\d+)/,dexRegExp:/(?:DES):?\s+(\d+)/,appRegExp:/(?:APA):?\s+(\d+)/,eduRegExp:/EDU:?\s+(\d+)/,sanRegExp:/(?:COR|Cordura):?\s+(\d+)/,hpRegExp:/(?:PV|Puntos de vida|P\. ?V\.):?\s+(\d+)/,mpRegExp:/(?:PM|Puntos Mgicos|Puntos de Magia):?\s+(\d+)/,dbRegExp:/(?:BD):?\s+([+-]?\d+(?:d\d+|D\d+)?)/i,attacksRegExp:/(?:Combate|Armas):?\s+(.*)\.[\n|\r]?$/ims,buildRegExp:/(?:Corpulencia):?\s+([+-]?\d+)/i,armorRegExp:/(?:Armadura):?\s+(ninguna|\d+)/i,moveRegExp:/(?:Movimiento):?\s+(\d+)/i,luckRegExp:/(?:Suerte):?\s+(\d+)/i,spellsRegExp:/(?:Conjuros|Hechizos):?\s+(.*)\.[\n|\r]?$/ims,skillsRegExp:/(?:Habilidades):?\s+(.*)\.[\n|\r]?$/ims,dodgeRegExp:/(?<name>Esquivar):?\s+\(?(?<percentage>\d+)\)?\s*%/i,languagesRegExp:/(?:Idiomas|Lenguajes|Lenguas):?\s+(.*)\.[\n|\r]?$/ims,skillRegExp:new RegExp("(?<skill>[\\w\\s\\(\\).\\/"+accentedCharacters+"]+) (?<percentage>\\d+)%"),attacksPerRoundRegExp:/(?:Nmero de Ataques):?\s+(ninguno|\d+)/i,sanLossRegExp:/(?:Prdida de cordura|Prdida de COR):?\s+(no|\d[dD]?[+\d]*\/\d[dD][+\d]+)/i,weaponRegExp:new RegExp("^(?<weapon>[\\w\\s\\n\\(\\).\\/"+accentedCharacters+"]+):?[\\n\\r\\s]+(?<percentage>\\d+)%,?\\s*(?:\\(\\d+\\/\\d+\\))?\\s*,?\\s*(?:dao)\\s+(?<damage>[\\d+\\+dD\\- ]+\\s*(BD|bd|bonificacin de dao)?)","img"),stopWords:"(Conjuros|Habilidades|Prdida de cordura|Idiomas|Lenguajes|Lenguas|Armadura|Combate|Armas)",handgunRegExp:/(Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| .38)/i,rifleRegExp:/(Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)/i,smbRegExp:/(Subfusil|Thompson)/i,machineGunRegExp:/(Browning|Vickers|Ametralladora)/i,launchedWeapons:/(Molotov||Granada|Dinamita)/i};class CoC7ActorImporterRegExp{static get optionLangRegExp(){return/coc-(?<langcode>\w\w)/}constructor(){this.RE=CoC7ActorImporterRegExp.getRegularExpressions(game.i18n.lang)}static getRegularExpressions(lang){switch(console.debug("Set RegExp Lang: ",lang),lang){case"es":return spanishRegExp;case"fr":return frenchRegExp}return englishRegExp}}const defaultWeaponSkillAdjustments={personal:null,occupation:null,archetype:null,experience:null};class CoC7ActorImporter{static get RE(){return(new CoC7ActorImporterRegExp).RE}async parseCharacter(text){const extractedData={};extractedData.name=this.processName(text),extractedData.age=this.extractValue(text,this.RE.ageRegExp),console.debug("age",extractedData.age),extractedData.str=Number(this.extractValue(text,this.RE.strRegExp)),extractedData.con=Number(this.extractValue(text,this.RE.conRegExp)),extractedData.siz=Number(this.extractValue(text,this.RE.sizRegExp)),extractedData.int=Number(this.extractValue(text,this.RE.intRegExp)),extractedData.pow=Number(this.extractValue(text,this.RE.powRegExp)),extractedData.dex=Number(this.extractValue(text,this.RE.dexRegExp)),extractedData.app=Number(this.extractValue(text,this.RE.appRegExp)),extractedData.edu=Number(this.extractValue(text,this.RE.eduRegExp)),extractedData.san=Number(this.extractValue(text,this.RE.sanRegExp)),extractedData.hp=Number(this.extractValue(text,this.RE.hpRegExp)),extractedData.mp=Number(this.extractValue(text,this.RE.mpRegExp)),extractedData.db=this.extractValue(text,this.RE.dbRegExp),extractedData.build=this.extractValue(text,this.RE.buildRegExp),extractedData.armor=this.extractValue(text,this.RE.armorRegExp),console.debug("armor",extractedData.armor),extractedData.mov=Number(this.extractValue(text,this.RE.moveRegExp)),extractedData.lck=Number(this.extractValue(text,this.RE.luckRegExp)),extractedData.sanLoss=this.extractValue(text,this.RE.sanLossRegExp),extractedData.attacksPerRound=this.extractValue(text,this.RE.attacksPerRoundRegExp);const attacks=this.extractValue(text,this.RE.attacksRegExp);console.debug(attacks),extractedData.attacks=await this.processAttacks(attacks);const spells=this.extractValue(text,this.RE.spellsRegExp);console.debug(spells),extractedData.spells=await this.processSpells(spells);const skills=this.extractValue(text,this.RE.skillsRegExp);console.debug(skills),extractedData.skills=await this.processSkills(skills);const dodge=this.RE.dodgeRegExp.exec(text);null!==dodge&&extractedData.skills.push({name:this.cleanString(dodge.groups.name),value:Number(dodge.groups.percentage)});const languages=this.extractValue(text,this.RE.languagesRegExp);return console.debug(languages),extractedData.languages=await this.processSkills(languages),extractedData}processName(text){const nameFound=this.RE.nameRegExp.exec(text);return null!==nameFound?nameFound.groups.name:game.i18n.localize("COC7.ImportedUnnamedCharacter")}processAttacks(attacks){const results=[];if(null!=attacks){let weapon=this.RE.weaponRegExp.exec(attacks);for(;null!==weapon;){const cleanWeapon=this.cleanString(weapon.groups.weapon),doesDamageBonus=this.RE.dbRegExp.test(weapon.groups.damage),isRanged=this.RE.handgunRegExp.test(cleanWeapon)||this.RE.rifleRegExp.test(cleanWeapon)||this.RE.smbRegExp.test(cleanWeapon)||this.RE.machineGunRegExp.test(cleanWeapon),data={name:cleanWeapon,type:"weapon",data:{properties:{},range:{normal:{value:Number(weapon.groups.percentage),damage:weapon.groups.damage}}}};for(const[key]of Object.entries(COC7.weaponProperties))data.data.properties[key]=!1;data.data.properties.rngd=isRanged,data.data.properties.melee=doesDamageBonus,data.data.properties.addb=doesDamageBonus,results.push(data),weapon=this.RE.weaponRegExp.exec(attacks)}}return console.debug("attacks",results),results}processSpells(spells){const results=[];if(null!==spells){spells.replace(/(\n|\r)/g," ").split(",").forEach((s=>{results.push(this.cleanString(s))}))}return console.debug("spells",results),results}basicWeaponSkillData(firearms){return{specialization:game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),adjustments:defaultWeaponSkillAdjustments,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}}processSkills(skills){const results=[];if(console.debug("skills string",skills),null!==skills){const skillsArr=skills.replace(/(\n|\r)/g," ").split(",");console.debug("skillsArr",skillsArr),skillsArr.forEach((skill=>{const parsedSkill=this.RE.skillRegExp.exec(skill);if(console.debug("parsedSkill",parsedSkill),null!==parsedSkill){const skillName=this.cleanString(parsedSkill.groups.skill);results.push({name:skillName,value:Number(parsedSkill.groups.percentage)})}}))}return console.debug("skills",results),results}extractValue(text,re){const results=re.exec(text);return null!==results?results[1]:null}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*$/,"")}entityType(entityTypeString){switch(entityTypeString){case"coc-npc":return"npc";case"coc-creature":return"creature"}return console.warn("entity type: ",entityTypeString),"npc"}async createEntity(pc,entityTypeString){const importedCharactersFolder=await this.createImportCharactersFolderIfNotExists(),npc=await Actor.create({name:pc.name,type:this.entityType(entityTypeString),folder:importedCharactersFolder.id,data:{}});return await this.addTheSkills(pc,npc),await this.addTheLanguages(pc,npc),await this.addTheSpells(pc,npc),await this.handleTheAttacks(pc,npc),await this.updateActorData(pc,npc),npc}async createImportCharactersFolderIfNotExists(){let importedCharactersFolder=game.folders.find((entry=>"Imported characters"===entry.data.name&&"Actor"===entry.data.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:"Imported characters",type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("COC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}async updateActorData(pc,npc){let updateData={};if(["str","con","siz","dex","app","int","pow","edu"].forEach((key=>{updateData[`data.characteristics.${key}.value`]=Number(pc[key])})),await npc.update(updateData),await npc.setLuck(Number(pc.lck)),await npc.setHp(Number(pc.hp)),await npc.setMp(Number(pc.mp)),updateData={},["san","mov","db","build","armor"].forEach((key=>{updateData[`data.attribs.${key}.value`]=Number(pc[key])})),null!==pc.age&&(updateData["data.infos.age"]=pc.age),null!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");updateData["data.special.sanLoss.checkPassed"]=passed,updateData["data.special.sanLoss.checkFailled"]=failed}null!==pc.attacksPerRound&&(updateData["data.special.attacksPerRound"]=Number(pc.attacksPerRound)),console.debug("updateData:",updateData),await npc.update(updateData)}async handleTheAttacks(pc,npc){if(null!==pc.attacks)for(let i=0;i<pc.attacks.length;i++){const attack=pc.attacks[i];console.debug("attack",attack);const mainAttackSkill=await this.mainAttackSkill(attack);await npc.createEmbeddedDocuments("Item",[mainAttackSkill]).then((async newSkills=>{await npc.createEmbeddedDocuments("Item",[attack]).then((async createdAttacks=>{if(Array.isArray(createdAttacks)&&createdAttacks.length>0&&Array.isArray(newSkills)&&newSkills.length>0){const createdAttack=await this.setMainAttackSkill(createdAttacks[0],newSkills[0]);console.debug("createdAttack",createdAttack)}}))}))}}async mainAttackSkill(attack){const skill=await this.weaponSkill(attack.name);if(null!=skill){console.debug("skill",skill);const skillClone=skill.clone({data:{value:attack.data.range.normal.value}});return console.debug("skillClone",skillClone),skillClone}console.debug(`Weapon skill not found for ${attack.name}, creating a new one`);const newSkill={name:attack.name,type:"skill",data:this.basicWeaponSkillData(!1)};return newSkill.data.base=attack.data?.range?.normal?.value,newSkill.data.value=attack.data?.range?.normal?.value,console.debug("newSkill",newSkill),newSkill}async setMainAttackSkill(weapon,skill){return await weapon.update({"data.skill.main.id":skill.id,"data.skill.main.name":skill.name,"data.properties":skill.data.properties,"data.adjustments":skill.data.adjustments,"data.specialization":skill.data.specialization})}async addTheSpells(pc,npc){null!==pc.spells&&pc.spells.forEach((async spell=>{const created=await npc.addItems([{name:spell,type:"spell"}]);console.debug(created)}))}async addTheLanguages(pc,npc){if(null!==pc.languages)for(const lang of pc.languages){const created=await npc.createSkill(lang.name,lang.value);console.debug(created)}}async addTheSkills(pc,npc){if(null!==pc.skills)for(const skill of pc.skills){const existingSkill=await game.items.find((i=>"skill"===i.data.type&&i.data.name===skill.name));if(void 0!==existingSkill){const clonedSkill=existingSkill.toObject();clonedSkill.data.base=skill.value,await npc.createEmbeddedDocuments("Item",[clonedSkill]).then((created=>console.debug(created)))}else await npc.createSkill(skill.name,skill.value).then((created=>console.debug(created)))}}async weaponSkill(weaponName){let skill=null;return this.RE.handgunRegExp.exec(weaponName)?(skill=await game.items.find((i=>"skill"===i.data.type&&"Handgun"===i.data.name)),console.debug(`${weaponName} uses Handgun skill: ${skill}`)):this.RE.rifleRegExp.exec(weaponName)?(skill=await game.items.find((i=>"skill"===i.data.type&&"Rifle/Shotgun"===i.data.name)),console.debug(`${weaponName} uses Rifle skill: ${skill}`)):this.RE.smbRegExp.exec(weaponName)?(skill=await game.items.find((i=>"skill"===i.data.type&&"Submachine Gun"===i.data.name)),console.debug(`${weaponName} uses Submachine Gun skill: ${skill}`)):this.RE.machineGunRegExp.exec(weaponName)?(skill=await game.items.find((i=>"skill"===i.data.type&&"Machine Gun"===i.data.name)),console.debug(`${weaponName} uses Machine Gun skill: ${skill}`)):this.RE.launchedWeapons.exec(weaponName)&&(skill=await game.items.find((i=>"skill"===i.data.type&&"Launch"===i.data.name)),console.debug(`${weaponName} uses Launch skill: ${skill}`)),skill}needsConversion(npc){let needsConversionResult=!0;return["str","con","siz","dex","app","int","pow","edu"].forEach((key=>{npc[key]>30&&(needsConversionResult=!1)})),console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){const lang=this.extractValue(inputs.lang,CoC7ActorImporterRegExp.optionLangRegExp)||"en";this.RE=CoC7ActorImporterRegExp.getRegularExpressions(lang);let character=await this.parseCharacter(inputs.text);console.debug(character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));return await this.createEntity(character,inputs.entity)}async convert7E(creature){return console.debug("Converting creature",creature),["str","con","siz","dex","app","int","pow"].forEach((key=>{creature[key]*=5})),creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99,"-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2),console.debug("Converted creature",creature),creature}}class CoC7ActorImporterDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.on("submit","form",this._onSubmit.bind(this)),html.find("option[value=coc-"+game.i18n.lang+"]").attr("selected","selected")}static async getInputs(){const inputs={};inputs.entity=$("#coc-entity-type").val().trim(),inputs.convertFrom6E=$("#coc-convert-6E").val().trim(),console.debug("entity type:",inputs.entity),inputs.lang=$("#coc-entity-lang").val().trim();let text=$("#coc-pasted-character-data").val().trim();return console.debug("received text","##"+text+"##"),"."!==text[text.length]&&(text+="."),inputs.text=text,inputs}static async importActor(html){console.debug("html",html);const inputs=await CoC7ActorImporterDialog.getInputs(),actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);console.debug("createdActor:",createdActor),ui.notifications.info("Created "+createdActor.data?.type?.toUpperCase()+": "+createdActor.data?.name),await createdActor.sheet.render(!0)}async _onSubmit(event){event.preventDefault()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/actor-importer.html",data);return new Promise((resolve=>{new CoC7ActorImporterDialog({title:data.title,content:html,data,buttons:{import:{icon:'<i class="fas fa-file-import"></i>',label:game.i18n.localize("CoC7.Import"),callback:CoC7ActorImporterDialog.importActor},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel")}},default:"import",close:console.log("Closing:")},{classes:["coc7","dialog","actor-importer"],width:600}).render(!0)}))}}class CoC7Menu{constructor(options){this.options=options,this.controls=this._getControls()}static async renderMenu(controls,html){game.CoC7.menus||(game.CoC7.menus=new CoC7Menu);const menu=await renderTemplate("systems/CoC7/templates/coc7-menu.html",game.CoC7.menus.getData()),coc7Button=$(menu);coc7Button.find(".scene-control").click(game.CoC7.menus._onClickMenu.bind(game.CoC7.menus)),coc7Button.find(".control-tool").click(game.CoC7.menus._onClickTool.bind(game.CoC7.menus)),game.CoC7.menus.activeControl&&html.find(".scene-control").removeClass("active"),html.find(".scene-control").click(game.CoC7.menus._clearActive.bind(game.CoC7.menus)),html.append(coc7Button),game.CoC7.menus.html=html}get control(){return this.controls&&this.controls.find((c=>c.name===this.activeControl))||null}_clearActive(event){event.preventDefault();const customMenuActive=!!this.activeControl;this.activeControl="";const controlName=event.currentTarget.dataset?.control;ui.controls.activeControl===controlName&&customMenuActive&&ui.controls.render()}_onClickTool(event){if(event.preventDefault(),!canvas?.ready)return;const toolName=event.currentTarget.dataset.tool,tool=this.control.tools.find((t=>t.name===toolName));tool.toggle?(tool.active=!tool.active,tool.onClick instanceof Function&&tool.onClick(tool.active)):tool.button?tool.onClick instanceof Function&&tool.onClick(event):(tool.activeTool=toolName,tool.onClick instanceof Function&&tool.onClick())}_onClickMenu(event){if(event.preventDefault(),!canvas?.ready)return;const controlName=event.currentTarget.dataset.control,control=this.controls.find((t=>t.name===controlName));control.button?control.onClick instanceof Function&&control.onClick(event):(this.activeControl=controlName,ui.controls.render())}getData(){const isActive=!!canvas?.scene,controls=this.controls.filter((s=>!1!==s.visible)).map((s=>((s=duplicate(s)).css=["custom-control",s.button?"button":null,isActive&&this.activeControl===s.name?"active":""].filter((t=>!!t)).join(" "),s.button||(s.tools=s.tools.filter((t=>!1!==t.visible)).map((t=>{const active=isActive&&(s.activeTool===t.name||t.toggle&&t.active);return t.css=[t.toggle?"toggle":null,active?"active":null,t.class?t.class:null].filter((t=>!!t)).join(" "),t}))),s)));return{active:isActive,cssClass:isActive?"":"disabled",controls}}_getControls(){const isGM=game.user.isGM,controls=[];return controls.push({icon:"game-icon game-icon-tentacle-strike",name:"main-menu",title:"CoC7.GmTools",visible:isGM,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async()=>await CoC7Utilities.toggleDevPhase()},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async()=>await CoC7Utilities.toggleCharCreation()},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create({title:game.i18n.localize("CoC7.ActorImporter")})},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async()=>await CoC7Utilities.toggleXPGain()},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.startRest()}]}),controls.push({icon:"game-icon game-icon-d10",name:"dice-roll",title:"CoC7.RollDice",button:!0,onClick:event=>CoC7Utilities.rollDice(event)}),controls.push({icon:"fas fa-link",name:"create-link",title:"CoC7.CreateLink",visible:isGM,button:!0,onClick:CoC7LinkCreationDialog.create}),controls}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["link"]}static async onDropSomething(canvas,item){if(item.CoC7Type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(item.CoC7Type)){const gridSize=canvas.scene.data.grid,x=item.x-gridSize/2,y=item.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),item.CoC7Type){case"link":{const link=await CoC7Link.fromData(item);link.link||ui.notifications.error("Invalid link");const option={};if(option.speaker={alias:game.user.name},dropTargetTokens.length)dropTargetTokens.forEach((t=>{t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:link.link}),option))}));else{game.users.players.filter((u=>!!u.character)).forEach((u=>{option.whisper=[u],chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:u.character.name,check:link.link}),option)}))}}}}}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.data.data.spells?duplicate(this.data.data.spells):[];return spells.forEach((async spell=>{collection.push(spell)})),await this.update({"data.spells":collection})}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.data.data.difficultyLevel),language=this.data.data.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.data.data.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.data.data.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.data.data.study.necessary;let fullStudy=this.data.data.fullStudy,progress=this.data.data.study.progress;if(isNaN(progress))return await this.update({"data.study.progress":0});if(value&&progress>value)return await this.update({"data.fullStudy":++fullStudy,"data.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"data.study.progress":++progress}),progress===necessary)return await this.update({"data.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"data.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.data.data.mythosRating;if(this.data.data.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"data.study.progress":this.data.data.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.data.data.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.data.data.mythosRating;let mythosFinal=this.data.data.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythosFinal)},{name:this.data.data.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"data.fullStudies":++this.data.data.fullStudies})}async grantInitialReading(){if(this.data.data.initialReading)return;const developments=[],mythos={gains:this.data.data.gains.cthulhuMythos.initial,type:this.data.data.type.mythos},occult={gains:this.data.data.gains.occult,type:this.data.data.type.occult},other={gains:this.data.data.gains.others,type:this.data.data.type.other};return mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other.type&&other.gains.forEach((async skill=>{const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})})),await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.data.data.sanityLoss&&await this.rollSanityLoss(),await this.update({"data.initialReading":!0})}async grantSpellLearning(){return ui.notifications.warn("Automation of learning spells from books is not currently supported and will be added in future updates.")}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.data.type&&item.data.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"data.properties.special":!0,"data.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"data.study.progress":0}),await this.update({"data.study.necessary":2*this.data.data.study.necessary})}async rollSanityLoss(){const value=this.data.data.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.hbs",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.data.data.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning()}}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];dataList.forEach((async item=>{item&&item.data&&[type].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)))})),await this.item.update({[`data.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/archetype.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const coreCharacteristics=[];for(const[key,selected]of Object.entries(data.data.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}data.skillListEmpty=0===data.data.skills.length,data.data.skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),data.data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName))),data.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(data.coreCharacteristicsString+=coreCharacteristics.join(orString)),data.itemProperties=[],data.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${data.data.bonusPoints}`),data.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${data.data.talents}`),data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.hbs",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const data=super.getData(),itemData=data.data;return data.data=itemData.data,data.initialReading=this.item.data.data.initialReading,data.isKeeper=game.user.isGM,data.isOwned=this.item.isOwned,data.spellsLearned=this.spellsLearned,data.exhausted=!1!==await this.item.checkExhaustion(),data.studyCompleted=this.item.data.data.study.progress===this.item.data.data.study.necessary,data}get spellsLearned(){let amount=0;const spells=this.item.data.data.spells;for(const spell of spells)spell.data.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="data.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.data.data.spells?duplicate(this.item.data.data.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"data.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];dataList.forEach((async item=>{item&&"spell"===item.data.type&&spells.push(item.data)})),await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode){event.preventDefault();const element=$(event.currentTarget),index=element.parents("tr").data("index"),skills=this.item.data.data.gains.others?duplicate(this.item.data.data.gains.others):[];switch(mode){case"add":skills.push({name:game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"data.gains.others":skills})}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}get template(){return"systems/CoC7/templates/items/chase.html"}static get type(){return"coc7ChaseSheet"}getData(options={}){const data=super.getData(options),itemData=data.data;return data.data=itemData.data,data.participants=[],this.participants.forEach((p=>{data.participants.push(new _participant(p))})),data.preys=data.participants.filter((p=>p.chaser)).sort(((a,b)=>a.mov-b.mov)),data.chasers=data.participants.filter((p=>!p.chaser)).sort(((a,b)=>a.mov-b.mov)),data}get participants(){return this.item.data.data.participants}activateListeners(html){super.activateListeners(html),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this));new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0])}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),data.data.participants){const participants=duplicate(this.participants);for(const[k,v]of Object.entries(data.data.participants)){const index=Number(k),original=participants[Number(index)],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}data.data.participants=participants}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget;if("true"===target?.dataset?.override){const[,type,sIndex,subType,data]=target.name.split("."),index=Number(sIndex);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"data.participants":participants})}}super._updateObject(event,formData)}async _onDropParticipant(event){const index=event.currentTarget.dataset?.index;if(!index)return;const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,Number(index))}async _onAddParticipant(event){let data={};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data=JSON.parse(dataString)}await this.addParticipant(data)}async _onRollParticipant(event){const index=event.currentTarget.closest(".participant").dataset.index,participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}async _onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}async _onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const index=event.currentTarget.closest(".participant").dataset.index,participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const index=event.currentTarget.closest(".driver").dataset.index,participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].actorKey,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const index=event.currentTarget.closest(".participant").dataset.index,participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const index=event.currentTarget.closest(".participant").dataset.index,participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,index){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:"Actor"===data.type?data.id:data.actorId||data.actorKey,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],oldParticipant=participants[index];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async addParticipant(data){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId||data.actorKey||data.id,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":break;case"item":if(data.id){if("skill"!==game.items.get(data.id)?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants.push(participant),await this.item.update({"data.participants":participants})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.item.update({"data.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.item.uuid};game.socket.emit("system.CoC7",data)}}}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class _participant{constructor(data={}){this.data=data}get actor(){return this._actor||(this._actor=chatHelper.getActorFromKey(this.data.actorKey)),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=chatHelper.getActorFromKey(this.data.actorKey)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=void 0):this.data.hasValidDex=!0),this.data.dex}get isChaser(){return!!this.data.chaser}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){if(check.options=[],["con"].forEach((c=>{const characterisitc=this.actor.getCharacteristic(c);characterisitc?.value&&check.options.push(characterisitc.label)})),this.actor.driveSkills.forEach((s=>{check.options.push(s.name)})),this.actor.pilotSkills.forEach((s=>{check.options.push(s.name)})),check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}return check.rolled||check.score||(check.cssClasses+=" invalid"),check}}class CoC7ItemSheetV2 extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],width:290,height:300,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/item-sheetV2.html"}getData(options={}){const data=super.getData(options),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:520,height:480})}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[],groups=this.item.data.data.groups?duplicate(this.item.data.data.groups):[];dataList.forEach((async item=>{if(item&&item.data&&[type].includes(item.data.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))return;if(groups[index].skills.find((el=>el.name===item.name)))return}groups[index].skills=groups[index].skills.concat([item.data])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))return;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.data.name));-1!==index&&groups[i].skills.splice(index,1)}}collection.push(duplicate(item.data))}})),await this.item.update({"data.groups":groups}),await this.item.update({[`data.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.data.data.groups;await this.item.update({"data.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.data.data.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"data.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async _onGroupItemDelete(event){const li=event.currentTarget.closest(".item"),ol=li.closest(".item-list.group"),groups=duplicate(this.item.data.data.groups);groups[Number(ol.dataset.group)].skills.splice(Number(li.dataset.itemIndex),1),await this.item.update({"data.groups":groups})}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/occupation.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(data.data.occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}data.skillListEmpty=0===data.data.skills.length,data.data.skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),data.data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName)));for(let index=0;index<data.data.groups.length;index++)data.data.groups[index].isEmpty=0===data.data.groups[index].skills.length,data.data.groups[index].skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),data.data.groups[index].skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName)));data.occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;mandatory.length&&(data.occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(data.occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(data.occupationPointsString+=optionnal.join(orString)),data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];dataList.forEach((async item=>{item&&item.data&&["item","weapon","skill","book","spell"].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)))})),await this.item.update({[`data.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.data.data.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"data.bioSections":bio})}async _onAddBio(){const bio=this.item.data.data.bioSections?duplicate(this.item.data.data.bioSections):[];bio.push(null),await this.item.update({"data.bioSections":bio})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}getItem(itemId,collectionName="items"){return this.item.data.data[collectionName].find((s=>s._id===itemId))}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],width:520,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/setup.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.items.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData();data.isOwned=this.item.isOwned;const itemData=data.data;data.data=itemData.data,data.skills=data.data.items.filter((it=>"skill"===it.type)),data.otherItems=data.data.items.filter((it=>"skill"!==it.type)),data.skillListEmpty=0===data.skills.length,data.skills.forEach((skill=>{skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name})),data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName))),data.eras={},data.itemProperties=[];for(const[key,value]of Object.entries(COC7.eras))data.data.eras[key]||(data.data.eras[key]={},data.data.eras[key].selected=!1),data.data.eras[key].name=game.i18n.localize(value),data.data.eras[key].internalName=value;for(const entry of Object.entries(data.data.eras))entry[1].selected&&data.itemProperties.push(entry[1].name);return data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data}_updateObject(event,formData){formData.data||(formData=expandObject(formData)),formData.data.bioSections&&(formData.data.bioSections=Object.values(formData.data?.bioSections||[])),"data.characteristics.points.enabled"===event.currentTarget?.name&&(formData.data.characteristics.rolls.enabled=!event.currentTarget.checked),"data.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData.data.characteristics.points.enabled=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return`systems/CoC7/templates/items/${this.item.data.type}-sheet.html`}getData(){const data=super.getData(),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","spell"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/spell.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.castingCost="",data.data.cost.mp&&(data.castingCost+=`${data.data.cost.mp} ${game.i18n.localize("CoC7.MP")};`),data.data.cost.san&&(data.castingCost+=`${data.data.cost.san} ${game.i18n.localize("CoC7.SAN")};`),data.data.cost.pow&&(data.castingCost+=`${data.data.cost.pow} ${game.i18n.localize("CHARAC.POW")};`),data.data.cost.hp&&(data.castingCost+=`${data.data.cost.hp} ${game.i18n.localize("CoC7.HP")};`),data.data.cost.other&&(data.castingCost+=`${data.data.cost.other};`),data.castingCost.length?data.castingCost=data.castingCost.slice(0,-1):data.castingCost=game.i18n.localize("CoC7.SpellCastingCost"),data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.spellProperties[key]?COC7.spellProperties[key]:null);return data}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/status.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return data}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/talent.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return data}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:520,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const data=await super.getData();data.properties=[],this.actor.data.data.properties.armed&&data.properties.push(game.i18n.localize("CoC7.ArmedVehicle")),data.actor=this.actor;const expanded=this.actor.getFlag("CoC7","expanded");return data.expanded=void 0===expanded||expanded,data.expanded?data.options.height=420:data.options.height="auto",data}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.data.data.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"data.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.data.data.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"data.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),data.data.attribs.armor?.localized){const armor=data.data?.attribs.armor;armor&&(armor.locations=Object.values(armor?.locations||this.actor.data.data.attribs.armor.locations||{}))}return flattenObject(data)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}getData(){const data=super.getData();data.dtypes=["String","Number","Boolean"];const itemData=data.data;data.data=itemData.data,data.hasOwner=null!=this.item.actor,data.hasOwner&&(data.actorKey=this.item.actor.actorKey),data.combatSkill=[],data.hasOwner&&(data.firearmSkills=this.actor.firearmSkills,data.fightingSkills=this.actor.fightingSkills,data.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.data.data.properties.combat))),data.combatSkill.sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.toLowerCase()+a.name.toLowerCase():a.name.toLowerCase(),lcb=b.data.properties.special?b.data.specialization.toLowerCase()+b.name.toLowerCase():b.name.toLowerCase()):(lca=a.name.toLowerCase(),lcb=b.name.toLowerCase()),lca.localeCompare(lcb)}))),data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}this.item.data.data.price||(this.item.data.data.price={}),data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};this.item.data.data.price[key]||(this.item.data.data.price[key]=0),era.price=this.item.data.data.price[key],era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}return data.usesAlternateSkill=!0===this.item.data.data.properties.auto||!0===this.item.data.data.properties.brst||!0===this.item.data.data.properties.thrown,data}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property,elementName=event.currentTarget.parentElement.dataset.set+"-"+propertyId,checkboxControl=this.form.elements.namedItem(elementName);checkboxControl.checked?checkboxControl.checked=!1:checkboxControl.checked=!0,event.target.classList.toggle("switched-on"),await this._onSubmit(event)}async _onPropertyClick(event){event.preventDefault();const property=event.currentTarget.closest(".weapon-property").dataset.property,weaponId=event.currentTarget.closest(".weapon").dataset.itemId,actorKey=event.currentTarget.closest(".weapon").dataset.actorKey;let weapon=null;if(actorKey){weapon=CoCActor.getActorFromKey(actorKey).items.get(weaponId)}else weapon=game.items.get(weaponId);await weapon.toggleProperty(property)}}function listen(){Hooks.once("init",(async()=>{CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/actor-skills.html","systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/actor-weapons.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/character-development.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/actor-weapons-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/items/book/details.hbs"])}(),function(){if(game.settings.register("CoC7","pulpRules",{name:"SETTINGS.PulpRules",hint:"SETTINGS.PulpRulesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","developmentRollForLuck",{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","opposedRollTieBreaker",{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"wolrd",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","initiativeRule",{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!0,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")&&(game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number})),game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.data.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:Number,default:"0.2"}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),_setInitiativeOptions(game.settings.get("CoC7","initiativeRule")),CONFIG.Dice.terms.t=CoC7DecaderDie}(),Actors.unregisterSheet("core",CoC7ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"]}),Actors.registerSheet("CoC7",CoC7CharacterSheetV2,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0})}))}const CoC7Hooks={listen(){listen(),Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready")})),Hooks.on("renderActorSheet",(async(data,html,options)=>{console.log(data),"vehicle"===data.document.type&&(ui.notifications.warn("This feature is a work in progress and its use is still not recommended."),await data.close(),await data.close())})),Hooks.on("renderChatMessage",(()=>{})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#entity-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[];entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{console.log(data),"chase"===data.document.type&&(ui.notifications.warn("This feature is a work in progress and its use is still not recommended."),await data.close(),await data.close())}))}};function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.pulpRules]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRules")+"</h2>"),systemTab.find("select[name=CoC7\\.initiativeRule]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.displayActorOnCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"},"dt")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard}},Combat.prototype.rollInitiative=rollInitiative})),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>"dead"===t.id));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>"unconscious"===t.id)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:"boutOfMadness",label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:"insanity",label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:"criticalWounds",label:"criticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:"dying",label:"dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("hotbarDrop",(async(bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("renderChatMessage",((app,html,data)=>CoC7Chat.renderMessageHook(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),$("body").on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick),game.socket.on("system.CoC7",(async data=>{if("updateChar"===data.type&&CoC7Utilities.updateCharSheets(),game.user.isGM&&(OpposedCheckCard.defaultConfig.type===data.type&&OpposedCheckCard.dispatch(data),CombinedCheckCard.defaultConfig.type===data.type&&CombinedCheckCard.dispatch(data),"invoke"===data.type)){(await fromUuid(data.item))[data.method](data.data)}}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};game.tables.forEach((t=>{tableChoice[t.data._id]=t.data.name})),game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data)})),Hooks.on("renderActorSheet",CoC7CharacterSheetV2.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheetV2.renderSheet),Hooks.on("renderSceneControls",CoC7Menu.renderMenu),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),tinyMCE.PluginManager.add("CoC7_Editor_OnDrop",(function(editor){editor.on("drop",(event=>CoC7Parser.onEditorDrop(event,editor)))})),CONFIG.TinyMCE.plugins=`CoC7_Editor_OnDrop ${CONFIG.TinyMCE.plugins}`,Hooks.on("targetToken",(function(user,token,targeted){if(targeted){let gmonly=!0;if(token.actor.data.permission.default===CONST.ENTITY_PERMISSIONS.OWNER)gmonly=!1;else{const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(token.actor.data.permission))"default"===k||v!==CONST.ENTITY_PERMISSIONS.OWNER||gms.includes(k)||(gmonly=!1)}if(!gmonly){0===game.users.filter((a=>!a.isGM&&a.data.character===token.actor.id)).length&&ui.notifications.error(game.i18n.format("CoC7.MessageSelectedTargetIsNotControlled",{name:token.name}))}}})),CONFIG.ui.compendium=CoC7CompendiumDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3V0aWxpdGllcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkLWFjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbmNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9yYW5nZWNvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvZGFtYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3JvbGwtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2xpbmsuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcGFyc2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9zYW5kYXRhLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9iYXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9hY3Rvci1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXBkYXRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tcGVuZGl1bS1kaXJlY3RvcnkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2NoYXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NraWxsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc3BlbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5pdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2xvYWQtdGVtcGxhdGVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXNldHRpbmdzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXNoZWV0cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItYWN0b3Itc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb2M3LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlYm90LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBDT05GSUcsIGdhbWUsIFJvbGwgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEaWNlIHtcbiAgc3RhdGljIGFzeW5jIHJvbGwgKG1vZGlmID0gMCwgcm9sbE1vZGUgPSBudWxsLCBoaWRlRGljZSA9IGZhbHNlKSB7XG4gICAgbGV0IGFsdGVybmF0aXZlRGljZSA9ICcnXG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpXG4gICAgICB9IGVsc2UgaWYgKG1vZGlmID4gMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICcxZHQnICtcbiAgICAgICAgKFxuICAgICAgICAgICcrMWR0JyArIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnID8gJ1snICsgYWx0ZXJuYXRpdmVEaWNlICsgJ10nIDogJycpXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xuICAgICAgICAnKzFkMTAnXG4gICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsOiByb2xsXG4gICAgfVxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcbiAgICBpZiAoaGlkZURpY2UpIHJlc3VsdC5oaWRlRGljZSA9IGhpZGVEaWNlXG4gICAgcm9sbC5kaWNlLmZvckVhY2goZCA9PiB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9IGQudG90YWwgPT09IDEwID8gMCA6IGQudG90YWxcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxuICAgICAgfVxuICAgIH0pXG4gICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBNYXRoLm1heCguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfVxuICAgIHJlc3VsdC50b3RhbCA9IHJlc3VsdC51bml0LnRvdGFsICsgcmVzdWx0LnRlbnMudG90YWxcbiAgICBpZiAocmVzdWx0LnRvdGFsID09PSAwKSB7XG4gICAgICByZXN1bHQudG90YWwgPSAxMDBcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNob3dSb2xsRGljZTNkIChyb2xsKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXG5cbiAgICAgIGF3YWl0IGdhbWUuZGljZTNkLnNob3dGb3JSb2xsKHJvbGwsIGdhbWUudXNlciwgc3luY0RpY2UpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGR1cGxpY2F0ZSwgZ2FtZSwgUmF5LCBUb2tlbiAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuLyoqXG4gKiBSZXR1cm4gPGE+IGVsZW1lbnQgb2YgYSByb2xsIGluc3RhbmNlLiBmb3VuZHJ5LmpzIHJlZjpUZXh0RWRpdG9yLl9jcmVhdGVJbmxpbmVSb2xsXG4gKiBAcGFyYW0ge1JvbGx9IHJvbGwgICAgICBUaGUgcm9sbCBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlubGluZVJvbGwgKHJvbGwpIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBjbHM6IFsnaW5saW5lLXJvbGwnXSxcbiAgICBkYXRhc2V0OiB7fVxuICB9XG5cbiAgdHJ5IHtcbiAgICBkYXRhLmNscy5wdXNoKCdpbmxpbmUtcmVzdWx0JylcbiAgICBkYXRhLnJlc3VsdCA9IHJvbGwudG90YWxcbiAgICBkYXRhLnRpdGxlID0gcm9sbC5mb3JtdWxhXG4gICAgZGF0YS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkocm9sbCkpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBDb25zdHJ1Y3QgYW5kIHJldHVybiB0aGUgZm9ybWVkIGxpbmsgZWxlbWVudFxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgYS50aXRsZSA9IGRhdGEudGl0bGVcbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhc2V0KSkge1xuICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgfVxuICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhcyBmYS1kaWNlLWQyMFwiPjwvaT4gJHtkYXRhLnJlc3VsdH1gXG4gIHJldHVybiBhXG59XG5cbi8qKlxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXG4gKiBFeGNsdWRlIGFueSBrZXkgc3RhcnRpbmcgd2l0aCBfXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9fXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlX18gKGtleSwgdmFsdWUpIHtcbiAgLy8gY29udmVydCBSZWdFeHAgdG8gc3RyaW5nXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIFJldHVybiB0cnVlIGlzIENUUkwga2V5IGlzIHByZXNzZWRcbiAqIFVzZWQgZm9yIE1BQyBjb21wYXQuXG4gKiBAcGFyYW0ge1MuRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDdHJsS2V5IChldmVudCkge1xuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIE9iamVjdC5rZXlzKG9iamVjdCkuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmICghcHJvcC5zdGFydHNXaXRoKCdfJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3RbcHJvcF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQoXG4gICAgICAgICAgICBvYmplY3RbcHJvcF0sXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX06JHtwcm9wfTpgXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQuZGF0YXNldFtgJHtvYmplY3ROYW1lfSR7cHJvcH1gXSA9IG9iamVjdFtwcm9wXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIE9iamVjdC5rZXlzKGVsZW1lbnQuZGF0YXNldCkuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmIChwcm9wID09PSAndGVtcGxhdGUnKSByZXR1cm5cbiAgICAgIGRlc2VyaWFsaXplKG9iamVjdCwgcHJvcCwgZWxlbWVudC5kYXRhc2V0W3Byb3BdKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBkdXBsaWNhdGUoc2NlbmUuZGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGtleSlcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yVG9rZW4oYWN0b3IpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yVG9rZW4gKGFjdG9yKSB7XG4gICAgaWYgKCFhY3RvcikgcmV0dXJuIG51bGxcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXG4gICAgcmV0dXJuIGFjdG9yLnRva2VuIHx8IHsgZGF0YTogYWN0b3IuZGF0YS50b2tlbiB9XG4gICAgLyoqKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy8gQ2FzZSAwIC0gQWN0b3IgaXMgYSB0b2tlbiAoc3ludGhldGljIGFjdG9yKSwgcmV0dXJuIHRoYXQgdG9rZW4uXG4gICAgLy8gaWYoYWN0b3IuaXNUb2tlbikgcmV0dXJuIGFjdG9yLnRva2VuO1xuICAgIC8vIGVsc2V7XG4gICAgLy8gIC8vIENhc2UgMSAtIEFjdG9yIGlzIG5vdCBhIHRva2VuLCBmaW5kIGlmIGEgdG9rZW4gZXhpc3QgZm9yIHRoYXQgYWN0b3IuXG4gICAgLy8gIGNvbnN0IGFjdG9yVG9rZW5zID0gYWN0b3IuZ2V0QWN0aXZlVG9rZW5zKCk7XG4gICAgLy8gIGlmKCBhY3RvclRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgIC8vIENhc2UgMS4xIC0gSWYgaGUgaGFzIG9ubHkgb25lIFRva2VuIHJldHVybiBpdC5cbiAgICAvLyAgICBpZiggMSA9PT0gYWN0b3JUb2tlbnMubGVuZ3RoKSByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMiAtIEFjdG9yIGhhcyBtdWx0aXBsZSB0b2tlbnMsIGZpbmQgaWYgb25lIG9mIHRoZW0gaXMgdGhlIGNvbnRyb2xsZWQgdG9rZW4uXG4gICAgLy8gICAgY29uc3QgY29udHJvbGxlZFRva2VucyA9IGFjdG9yVG9rZW5zLmZpbHRlciggdCA9PiB0Ll9jb250cm9sbGVkKTtcbiAgICAvLyAgICBpZiggY29udHJvbGxlZFRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgICAgLy8gUmV0dXJuIHRoZSAxc3QgY29udHJvbGxlZCB0b2tlbiwgcmlzZSBhIHdhcm5pbmcgaWYgaGUgaGFzIG11bHRpcGxlIGNvbnRyb2xsZWQgdG9rZW5zLlxuICAgIC8vICAgICAgaWYoIHZlcmJvc2UgJiYgY29udHJvbGxlZFRva2Vucy5sZW5ndGggPiAxKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGhhcyAke2NvbnRyb2xsZWRUb2tlbnMubGVuZ3RofSBjb250cm9sbGVkIHRva2Vucy4gVXNpbmcgdGhlIGZpcnN0IGZvdW5kYCk7XG4gICAgLy8gICAgICByZXR1cm4gY29udHJvbGxlZFRva2Vuc1swXTtcbiAgICAvLyAgICB9XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMyBhY3RvciBkb2Vzbid0IGhhdmUgYW55IGFjdGl2ZSB0b2tlbi4gUmV0dXJuIHRoZSBmaXJzdCB2YWxpZCB0b2tlbiBmb3IgdGhhdCBhY3RvciBhbmQgcmFpc2UgYSB3YXJuaW5nLlxuICAgIC8vICAgIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGRvZXNuJ3QgaGF2ZSBhbnkgY29udHJvbGxlZCB0b2tlbi4gVXNpbmcgZmlyc3QgdG9rZW4gZm91bmQuYCk7XG4gICAgLy8gICAgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuICAgIC8vICB9XG5cbiAgICAvLyAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoIGBDb3VsZCBub3QgZmluIGFueSB0b2tlbiBmb3IgJHthY3Rvci5uYW1lfS5gKTtcbiAgICAvLyAgcmV0dXJuIG51bGw7XG4gICAgLy8gfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9ySW1nRnJvbUtleSAoYWN0b3JLZXkpIHtcbiAgICBpZiAoIWFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBUcnkgdG8gZmluZCBhIHRva2VuLlxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSlcbiAgICAgIGlmICh0b2tlbikgcmV0dXJuIHRva2VuLmRhdGEuaW1nXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBpZiBubyB0b2tlbiBmb3VuZCBmb3IgdGhhdCBhY3RvciByZXR1cm4gdGhlIHByb3RvdHlwZSB0b2tlbiBpbWFnZS5cbiAgICAgIGlmIChhY3Rvci5kYXRhLnRva2VuKSByZXR1cm4gYWN0b3IuZGF0YS50b2tlbi5pbWdcbiAgICB9XG4gICAgcmV0dXJuIGFjdG9yLmRhdGEuaW1nXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzdGFuY2UgKHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcbiAgICAvLyBjYW52YXMuc2lnaHQuaW5pdGlhbGl6ZVRva2VucygpO1xuICAgIGxldCBkaXN0YW5jZSA9IHtcbiAgICAgIGdyaWRVbml0OiAwLFxuICAgICAgdmFsdWU6IDAsXG4gICAgICB1bml0OiBjYW52YXMuc2NlbmUuZGF0YS5ncmlkVW5pdHNcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShzdGFydFRva2VuLmNlbnRlciwgZW5kVG9rZW4uY2VudGVyKVxuICAgICAgY29uc3Qgc2VnbWVudCA9IFt7IHJheSB9XVxuICAgICAgZGlzdGFuY2UgPSB7XG4gICAgICAgIGdyaWRVbml0OiByYXkuZGlzdGFuY2UgLyBjYW52YXMuc2NlbmUuZGF0YS5ncmlkLFxuICAgICAgICAvLyB2YWx1ZTogKHJheS5kaXN0YW5jZS9jYW52YXMuc2NlbmUuZGF0YS5ncmlkKSpjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2UsXG4gICAgICAgIHZhbHVlOiBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2VzKHNlZ21lbnQsIHtcbiAgICAgICAgICBncmlkU3BhY2VzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdncmlkU3BhY2VzJylcbiAgICAgICAgfSlbMF0sXG4gICAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5kYXRhLmdyaWRVbml0c1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2VcbiAgfVxuXG4gIHN0YXRpYyB0b1lhcmRzIChkaXN0YW5jZSkge1xuICAgIHN3aXRjaCAoZGlzdGFuY2UudW5pdCkge1xuICAgICAgY2FzZSAnZnQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWUgLyAzXG5cbiAgICAgIGNhc2UgJ3lkJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxEaXYgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kaWNlLXJvbGwnKVxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBnZXQgcmVzdWx0VHlwZSAoKSB7XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICh0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGxJZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICB0aGlzLmRpY2VzLnRlbnMuZm9yRWFjaChkaWVSZXN1bHQgPT4ge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfSlcbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3Qgcm9sbCA9IG9iamVjdCB8fCBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgZWxlbWVudClcbiAgICByb2xsLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7fVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KFxuICAgICAgcm9sbC5kaWNlcyxcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcbiAgICApXG4gICAgcm9sbC5kaWNlcy5oYXNCb251cyA9IHJvbGwuZGljZU1vZGlmaWVyICE9PSAwXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxuICAgIHJvbGwuZGljZXMuYm9udXNUeXBlID1cbiAgICAgIHJvbGwuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpXG4gICAgY29uc3QgdGVuRGljZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRlbi1kaWNlJylcbiAgICBpZiAodGVuRGljZSkge1xuICAgICAgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpLmZvckVhY2goZCA9PiB7XG4gICAgICAgIGNvbnN0IGRpZSA9IHtcbiAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxuICAgICAgICAgIGlzTWluOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogLTFcbiAgICAgICAgfVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRpZSwgZClcbiAgICAgICAgcm9sbC5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcbiAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKS5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICA6IG51bGxcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcblxuICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcbiAgICBpZiAoaW5jcmVhc2VTdWNjZXNzICYmIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpLmZvckVhY2goaXNsID0+IHtcbiAgICAgICAgY29uc3QgbmV3U3VjY2VzTGV2ZWwgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXG4gICAgICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV3U3VjY2VzTGV2ZWwpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcbiAgICAgIHJvbGwubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IHJvbGwubHVja05lZWRlZFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFvYmplY3QpIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNoZWNrIChjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuXG4gICAgcm9sbC5yb2xsVHlwZSA9IGNoZWNrLnJvbGxUeXBlXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxuICAgIHJvbGwuYWN0aW9uID0gY2hlY2suYWN0aW9uXG4gICAgcm9sbC5yZWZNZXNzYWdlSWQgPSBjaGVjay5yZWZNZXNzYWdlSWRcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxuXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBjaGVjay5zdWNjZXNzTGV2ZWxcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XG4gICAgcm9sbC5za2lsbElkID0gY2hlY2suc2tpbGwgPyBjaGVjay5za2lsbC5pZCA6IG51bGxcbiAgICByb2xsLml0ZW1JZCA9IGNoZWNrLml0ZW0gPyBjaGVjay5pdGVtLmlkIDogbnVsbFxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxuICAgIHJvbGwudmFsdWUgPSBwYXJzZUludChjaGVjay5yYXdWYWx1ZSlcbiAgICByb2xsLmZ1bWJsZSA9IGNoZWNrLmlzRnVtYmxlXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcbiAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gY2hlY2suY2hhcmFjdGVyaXN0aWMgPyBjaGVjay5jaGFyYWN0ZXJpc3RpYyA6IG51bGxcbiAgICByb2xsLnJlc3VsdCA9IGNoZWNrLmRpY2UudG90YWxcblxuICAgIHJvbGwuYWN0b3JLZXkgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICByb2xsLnRva2VuSWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJvbGwuYWN0b3JJZCA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbC50b2tlbktleSA9IG51bGxcbiAgICAgIHJvbGwuYWN0b3JJZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoQ2hlY2tUb0VsZW1lbnQgKGh0bWxFbGVtZW50LCBjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXG4gICAgcm9sbC5hdHRhY2hUb0VsZW1lbnQoaHRtbEVsZW1lbnQpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGh0bWxFbGVtZW50KVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3RGFtYWdlIHtcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDIwJykpIHJldHVybiAnZDIwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEyJykpIHJldHVybiAnZDEyJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDgnKSkgcmV0dXJuICdkOCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q0JykpIHJldHVybiAnZDQnXG4gICAgcmV0dXJuICdkNidcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3QgZGFtYWdlID0gb2JqZWN0IHx8IHt9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXG4gICAgY29uc3Qgcm9sbHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGxzJykucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGRhbWFnZS5yb2xscyA9IFtdXG4gICAgcm9sbHMuZm9yRWFjaChyID0+IHtcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByKVxuICAgICAgZGFtYWdlLnJvbGxzLnB1c2gocm9sbClcbiAgICB9KVxuXG4gICAgaWYgKCFvYmplY3QpIHJldHVybiBkYW1hZ2VcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBnYW1lLCBnZXREb2N1bWVudENsYXNzLCBNYWNybywgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1V0aWxpdGllcyB7XG4gIC8vIHN0YXRpYyB0ZXN0KGV2ZW50KXtcbiAgLy8gICBpZiggZXZlbnQuc2hpZnRLZXkpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnSGVsbG8gZnJvbSBTSElGVCB1dGlsaXRpZXMnKTtcbiAgLy8gICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnSGVsbG8gZnJvbSB1dGlsaXRpZXMnKTtcbiAgLy8gICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpO1xuICAvLyAgIGxldCBhY3RvcjtcbiAgLy8gICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl07XG4gIC8vICAgaWYgKCFhY3RvcikgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3Rvcik7XG5cbiAgLy8gIGFjdG9yLmluZmxpY3RNYWpvcldvdW5kKCk7XG4gIC8vIH1cblxuICBzdGF0aWMgaXNGb3JtdWxhICh4KSB7XG4gICAgaWYgKHR5cGVvZiB4ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh4KVxuICB9XG5cbiAgc3RhdGljIFBhcnNlQ2hhdEVudHJ5IChodG1sLCBjb250ZW50KSB7XG4gICAgY29uc3QgcmVnWCA9IC8oXFxTKykvZ1xuICAgIGNvbnN0IHRlcm1zID0gY29udGVudC5tYXRjaChyZWdYKVxuICAgIGlmIChcbiAgICAgIHRlcm1zWzBdPy50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eXFwvcihvbGwpPyQvKSAmJlxuICAgICAgdGVybXNbMV0/LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnMWQlJylcbiAgICApIHtcbiAgICAgIC8vIERlbGF5IGNhbGxpbmcgZnVuY3Rpb24gdG8gcHJldmVudCBjaGF0bWVzc2FnZSBrZXkgZG93biB0cmlnZ2VyaW5nIGRlZmF1bHRcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBDb0M3VXRpbGl0aWVzLl9FeGVjQ29tbWFuZChjb250ZW50KVxuICAgICAgfSwgMjAwKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9FeGVjQ29tbWFuZCAoY29udGVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb250ZW50XG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KCcgJylcbiAgICAgID8uam9pbignJylcbiAgICAgID8ucmVwbGFjZSgvXFwvcihvbGwpPzFkJS8sICcnKVxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICBsZXQgZXNjYXBlZCA9IG9wdGlvbnNcbiAgICAgIGxldCB0aHJlc2hvbGRcbiAgICAgIGxldCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBsZXQgZGljZU1vZGlmaWVyID0gMFxuICAgICAgbGV0IGFzayA9IGZhbHNlXG4gICAgICBsZXQgZmxhdERpY2VNb2RpZmllclxuICAgICAgbGV0IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgY29uc3QgdGhyZXNob2xkU3RyID0gZXNjYXBlZC5tYXRjaCgvW14oXSsoPz1cXCkpLylcbiAgICAgIGlmICh0aHJlc2hvbGRTdHIgJiYgdGhyZXNob2xkU3RyLmxlbmd0aCkge1xuICAgICAgICB0aHJlc2hvbGQgPSBOdW1iZXIodGhyZXNob2xkU3RyWzBdKVxuICAgICAgICB0aHJlc2hvbGRTdHIuZm9yRWFjaChtYXRjaCA9PiB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc3QgZGlmZmljdWx0eVN0ciA9IGVzY2FwZWQubWF0Y2goL1teW10rKD89XFxdKS8pXG4gICAgICBpZiAoZGlmZmljdWx0eVN0ciAmJiBkaWZmaWN1bHR5U3RyLmxlbmd0aCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkaWZmaWN1bHR5U3RyWzBdKVxuICAgICAgICBkaWZmaWN1bHR5U3RyLmZvckVhY2gobWF0Y2ggPT4ge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYFske21hdGNofV1gLCAnJylcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChlc2NhcGVkLmluY2x1ZGVzKCc/JykpIHtcbiAgICAgICAgYXNrID0gdHJ1ZVxuICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKCc/JywgJycpXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcihlc2NhcGVkKSkpIGRpY2VNb2RpZmllciA9IE51bWJlcihlc2NhcGVkKVxuXG4gICAgICBpZiAoYXNrKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ09wdGlvbnMgPSB7XG4gICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0Q3JlYXR1cmVTYW5EYXRhIChjcmVhdHVyZSkge1xuICAgIGxldCBjcmVhdHVyZURhdGFcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoY3JlYXR1cmUuY29uc3RydWN0b3IubmFtZSA9PT0gJ0NvQ0FjdG9yJykge1xuICAgICAgYWN0b3IgPSBjcmVhdHVyZVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGNyZWF0dXJlKVxuICAgIH1cblxuICAgIGlmIChhY3Rvcikge1xuICAgICAgaWYgKGFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgY29uc3Qgc3BlY2llID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yLmlkKVxuICAgICAgICAvLyBUaGUgdG9rZW4gaGFzIGEgZGlmZmVyZW50IG1heGltdW0gc2FuIGxvc3MuXG4gICAgICAgIC8vIFdlIGFzc3VtZSBpdCdzIGEgc3BlY2lhbCByZXByZXNhbnRhbnQgb2YgaGlzIHNwZWNpZS5cbiAgICAgICAgLy8gVGhlIHNhbiBsb3NzIGZvciBlbmNvdXRlcmVkIGNyZWF0dXJlIHdpbGwgY291bnRlZCBmb3IgdGhhdCB0b2tlbiBpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIGFuZCBmb3IgdGhlIGFsbCBzcGVjaWVcbiAgICAgICAgaWYgKHNwZWNpZSAmJiBzcGVjaWUuc2FuTG9zc01heCAhPT0gYWN0b3Iuc2FuTG9zc01heCkge1xuICAgICAgICAgIGNyZWF0dXJlRGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBhY3Rvci50b2tlbi5pZCxcbiAgICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgICBzYW5Mb3NzTWF4OiBhY3Rvci5zYW5Mb3NzTWF4LFxuICAgICAgICAgICAgc3BlY2llOiB7XG4gICAgICAgICAgICAgIGlkOiBzcGVjaWUuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IHNwZWNpZS5uYW1lLFxuICAgICAgICAgICAgICBzYW5Mb3NzTWF4OiBzcGVjaWUuc2FuTG9zc01heFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGV5IGluZHVjZSB0aGUgc2FtZSBTQU4gbG9vcyBjcmVkaXQgZXZlcnl0aGluZyB0byB0aGUgc3BlY2llLlxuICAgICAgICAgIC8vIElmIHRoZSBhY3RvciBkb2VuJ3QgZXhpc3QgaW4gYWN0b3IgZGlyZWN0b3J5IHVzZSB0aGUgdG9rZW4gZGF0YSBpbnN0ZWFkLlxuICAgICAgICAgIGNyZWF0dXJlRGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiBzcGVjaWUgPyBzcGVjaWUuaWQgOiBhY3Rvci5pZCxcbiAgICAgICAgICAgIG5hbWU6IHNwZWNpZSA/IHNwZWNpZS5uYW1lIDogYWN0b3IubmFtZSxcbiAgICAgICAgICAgIHNhbkxvc3NNYXg6IHNwZWNpZSA/IHNwZWNpZS5zYW5Mb3NzTWF4IDogYWN0b3Iuc2FuTG9zc01heFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3JlYXR1cmVEYXRhID0ge1xuICAgICAgICAgIGlkOiBhY3Rvci5pZCxcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIHNhbkxvc3NNYXg6IGFjdG9yLnNhbkxvc3NNYXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0dXJlRGF0YVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNyZWF0dXJlID09PSAnb2JqZWN0JykgcmV0dXJuIGNyZWF0dXJlXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21TdHJpbmcgKGFjdG9yU3RyaW5nKSB7XG4gICAgbGV0IGFjdG9yXG5cbiAgICAvLyBUb2tlbiBpcyBiZXR0ZXIgdGhhbiBhY3Rvci5cbiAgICAvLyBDYXNlIDEgOiB0cnlpbmcgd2l0aCBJRC5cbiAgICAvLyBDYXNlIDEuMSA6IHRva2VuIGZvdW5kLlxuICAgIGlmIChnYW1lLmFjdG9ycy50b2tlbnNbYWN0b3JTdHJpbmddKSByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXVxuICAgIC8vIENhc2UgMS4yIDogYWN0b3IgZm91bmQuXG4gICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoYWN0b3JTdHJpbmcpXG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIENhc2UgMiA6IHRyeWluZyB3aXRoIG5hbWVcbiAgICAvLyBDYXNlIDIuMSA6IHRva2VuIGZvdW5kLlxuICAgIGFjdG9yID0gT2JqZWN0LnZhbHVlcyhnYW1lLmFjdG9ycy50b2tlbnMpLmZpbmQodCA9PiB7XG4gICAgICBpZiAodC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIC8vIENhc2UgMi4yIDogYWN0b3IgZm91bmQuXG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmZpbmQoYSA9PiB7XG4gICAgICAgIGlmIChhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYWN0b3JTdHJpbmcudG9Mb3dlckNhc2UoKSkgcmV0dXJuIHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoYWN0b3IpIHJldHVybiBhY3RvclxuXG4gICAgLy8gLy8gQ2FzZSAzIHN0cmluZyBtYXliZSBhbiBhY3RvcktleVxuICAgIC8vIGlmIChjcmVhdHVyZS5pbmNsdWRlcygnLicpKSB7XG4gICAgLy8gICBjb25zdCBbLCBhY3RvcklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgLy8gICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21TdHJpbmcoYWN0b3JJZClcbiAgICAvLyB9XG5cbiAgICAvLyBObyBqb3lcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljTmFtZXMgKGNoYXIpIHtcbiAgICBjb25zdCBjaGFyS2V5ID0gY2hhci50b0xvd2VyQ2FzZSgpXG5cbiAgICBzd2l0Y2ggKGNoYXJLZXkpIHtcbiAgICAgIGNhc2UgJ3N0cic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNUUicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TdHJlbmd0aCcpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2Nvbic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNPTicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICBjYXNlICdzaXonOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TSVonKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU2l6ZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2RleCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRFWCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5EZXh0ZXJpdHknKVxuICAgICAgICB9XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5BUFAnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQXBwZWFyYW5jZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLklOVCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdwb3cnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5QT1cnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB9XG4gICAgICBjYXNlICdlZHUnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FRFUnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJylcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICAgICApKSB7XG4gICAgICAgICAgaWYgKGNoYXJLZXkgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XG4gICAgaWYgKFN0cmluZyhkaWZmaWN1bHR5KSA9PT0gJzAnKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGRpZmZpY3VsdHlcbiAgICBpZiAoIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5KSkpIHJldHVybiBOdW1iZXIoZGlmZmljdWx0eSlcblxuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjYXNlICcrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNraWxsQ2hlY2tNYWNybyAoc2tpbGwsIGV2ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpIC8vIE5vIG5lZWQgdG8gZmlsbCBhY3RvciB0b2tlblxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iuc2tpbGxDaGVjayhza2lsbCwgZXZlbnQuc2hpZnRLZXksIG9wdGlvbnMpXG4gIH1cblxuICBzdGF0aWMgd2VhcG9uQ2hlY2tNYWNybyAod2VhcG9uLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgaWYgKHNwZWFrZXIuc2NlbmUgJiYgc3BlYWtlci50b2tlbikge1xuICAgICAgICAvLyBDcmVhdGUgYSBzeW50aGV0aWMgYWN0b3IgbGlua2VkIHdpdGggdGhlIGFjdGl2ZSB0b2tlbi5cbiAgICAgICAgY29uc3QgYmFzZUFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNwZWFrZXIuc2NlbmUpXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUudG9rZW5zLmdldChzcGVha2VyLnRva2VuKVxuXG4gICAgICAgIGNvbnN0IEFjdG9yQ2xhc3MgPSBnZXREb2N1bWVudENsYXNzKCdBY3RvcicpXG4gICAgICAgIGNvbnN0IHRva2VuQWN0b3IgPSBuZXcgQWN0b3JDbGFzcyhiYXNlQWN0b3IudG9KU09OKCksIHtcbiAgICAgICAgICBwYXJlbnQ6IHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIGFjdG9yID0gdG9rZW5BY3RvclxuICAgICAgfSBlbHNlIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgfVxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iud2VhcG9uQ2hlY2sod2VhcG9uLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjaGVja01hY3JvICh0aHJlc2hvbGQgPSB1bmRlZmluZWQsIGV2ZW50ID0gbnVsbCkge1xuICAgIGF3YWl0IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQsIHsgdGhyZXNob2xkOiB0aHJlc2hvbGQgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVNYWNybyAoYmFyLCBkYXRhLCBzbG90KSB7XG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ0l0ZW0nKSByZXR1cm5cblxuICAgIGxldCBpdGVtXG4gICAgbGV0IG9yaWdpblxuICAgIGxldCBwYWNrTmFtZSA9IG51bGxcblxuICAgIGlmIChkYXRhLnBhY2spIHtcbiAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChkYXRhLnBhY2spXG4gICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXG4gICAgICBwYWNrTmFtZSA9IGRhdGEucGFja1xuICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoZGF0YS5pZClcbiAgICAgIG9yaWdpbiA9ICdwYWNrJ1xuICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhKSB7XG4gICAgICBpdGVtID0gZGF0YS5kYXRhXG4gICAgICBvcmlnaW4gPSAnYWN0b3InXG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgb3JpZ2luID0gJ2dhbWUnXG4gICAgfVxuXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvTm9JdGVtRm91bmQnKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIShpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSAmJiAhKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9JbmNvcnJlY3RUeXBlJylcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgY29tbWFuZFxuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy53ZWFwb25DaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgaWQ6JyR7aXRlbS5pZH0nLCBvcmlnaW46JyR7b3JpZ2lufScsIHBhY2s6ICcke3BhY2tOYW1lfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vR2xvYmFsU3BlYycpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy5za2lsbENoZWNrKHtuYW1lOicke2l0ZW0ubmFtZX0nLCBpZDonJHtpdGVtLmlkfScsIG9yaWdpbjonJHtvcmlnaW59JywgcGFjazogJyR7cGFja05hbWV9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXG4gICAgbGV0IG1hY3JvID0gZ2FtZS5tYWNyb3MuY29udGVudHMuZmluZChcbiAgICAgIG0gPT4gbS5uYW1lID09PSBpdGVtLm5hbWUgJiYgbS5jb21tYW5kID09PSBjb21tYW5kXG4gICAgKVxuICAgIGlmICghbWFjcm8pIHtcbiAgICAgIG1hY3JvID0gYXdhaXQgTWFjcm8uY3JlYXRlKHtcbiAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICB0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgaW1nOiBpdGVtLmltZyxcbiAgICAgICAgY29tbWFuZDogY29tbWFuZFxuICAgICAgfSlcbiAgICB9XG4gICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZURldlBoYXNlICgpIHtcbiAgICBjb25zdCBpc0RldkVuYWJsZWQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKVxuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcsICFpc0RldkVuYWJsZWQpXG4gICAgY29uc3QgZ3JvdXAgPSBnYW1lLkNvQzcubWVudXMuY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PT0gJ21haW4tbWVudScpXG4gICAgY29uc3QgdG9vbCA9IGdyb3VwLnRvb2xzLmZpbmQodCA9PiB0Lm5hbWUgPT09ICdkZXZwaGFzZScpXG4gICAgdG9vbC50aXRsZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXG4gICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VFbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpXG4gICAgKVxuICAgIHVpLmNvbnRyb2xzLnJlbmRlcigpXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICgpIHtcbiAgICBjb25zdCBpc0NoYXJDcmVhdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCAhaXNDaGFyQ3JlYXRpb24pXG4gICAgY29uc3QgZ3JvdXAgPSBnYW1lLkNvQzcubWVudXMuY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PT0gJ21haW4tbWVudScpXG4gICAgY29uc3QgdG9vbCA9IGdyb3VwLnRvb2xzLmZpbmQodCA9PiB0Lm5hbWUgPT09ICdjaGFyY3JlYXRlJylcbiAgICB0b29sLnRpdGxlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJylcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJylcbiAgICApXG4gICAgdWkuY29udHJvbHMucmVuZGVyKClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKCkge1xuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhY3RvciA9PiBhY3Rvci5oYXNQbGF5ZXJPd25lcilcbiAgICBsZXQgY2hhdENvbnRlbnQgPSBgPGk+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX0uLi48L2k+PGJyPmBcbiAgICBhY3RvcnMuZm9yRWFjaChhY3RvciA9PiB7XG4gICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgYWN0b3IuZGF0YS5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGFsZW50Jykge1xuICAgICAgICAgIGlmIChpdGVtLm5hbWUgPT09IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5xdWlja0hlYWxlcicpfWApIHtcbiAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNvbnN0IGlzQ3JpdGljYWxXb3VuZHMgPSBhY3Rvci5kYXRhLmRhdGEuc3RhdHVzLmNyaXRpY2FsV291bmRzLnZhbHVlXG4gICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICBjb25zdCBocFZhbHVlID0gYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWVcbiAgICAgIGNvbnN0IGhwTWF4ID0gYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9XG4gICAgICAgICcgLyAnICsgTWF0aC5mbG9vcihhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgY29uc3QgbXBWYWx1ZSA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICBjb25zdCBtcE1heCA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgY2hhdENvbnRlbnQgPSBjaGF0Q29udGVudCArIGA8YnI+PGI+JHthY3Rvci5uYW1lfS4gPC9iPmBcbiAgICAgIGlmIChpc0NyaXRpY2FsV291bmRzID09PSBmYWxzZSAmJiBocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpICYmIHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LnB1bHBIZWFsdGhSZWNvdmVyZWQnLFxuICAgICAgICAgICAgICB7IG51bWJlcjogMyB9XG4gICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlICsgM1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJykpIHtcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcucHVscEhlYWx0aFJlY292ZXJlZCcsXG4gICAgICAgICAgICAgIHsgbnVtYmVyOiAyIH1cbiAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgKyAyXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5oZWFsdGhSZWNvdmVyZWQnXG4gICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlICsgMVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gdHJ1ZSAmJiBocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrcmVkXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5oYXNDcml0aWNhbFdvdW5kcydcbiAgICAgICAgICApfS4gPC9iPmBcbiAgICAgIH1cbiAgICAgIGlmIChkYWlseVNhbml0eUxvc3MgPiAwKSB7XG4gICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LmRhaWx5U2FuTG9zc1Jlc3RhcnRlZCdcbiAgICAgICAgICApfS48L2I+YFxuICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IDAsXG4gICAgICAgICAgJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknOiBvbmVGaWZ0aFNhbml0eVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgJ0NvQzcubWFnaWNQb2ludHNSZWNvdmVyZWQnXG4gICAgICAgICAgKX06IDcuPC9iPmBcbiAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgKyA3XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgIGNvbnRlbnQ6IGNoYXRDb250ZW50LFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVYUEdhaW4gKCkge1xuICAgIGNvbnN0IGlzWFBFbmFibGVkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJylcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd4cEVuYWJsZWQnLCAhaXNYUEVuYWJsZWQpXG4gICAgY29uc3QgZ3JvdXAgPSBnYW1lLkNvQzcubWVudXMuY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PT0gJ21haW4tbWVudScpXG4gICAgY29uc3QgdG9vbCA9IGdyb3VwLnRvb2xzLmZpbmQodCA9PiB0Lm5hbWUgPT09ICd4cHRvZ2dsZScpXG4gICAgdG9vbC50aXRsZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpXG4gICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkRpc2FibGVkJylcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRGlzYWJsZWQnKVxuICAgIClcbiAgICB1aS5jb250cm9scy5yZW5kZXIoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJvbGxEaWNlIChldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5hc2tWYWx1ZSA9ICFvcHRpb25zLnRocmVzaG9sZFxuICAgIGxldCBkaWNlTW9kaWZpZXIsIGRpZmZpY3VsdHksIGZsYXREaWNlTW9kaWZpZXIsIGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGxldCB0aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZFxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikgZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFldmVudD8uc2hpZnRLZXkgJiYgIW9wdGlvbnMuZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdG9ycyA9IFtdXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmZvckVhY2godG9rZW4gPT4ge1xuICAgICAgICBhY3RvcnMucHVzaCh0b2tlbi5hY3Rvci50b2tlbktleSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyLnRva2VuS2V5KVxuICAgIH1cblxuICAgIGF3YWl0IGFjdG9ycy5mb3JFYWNoKGFzeW5jIHRrID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgY2hlY2suYWN0b3IgPSB0a1xuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH0pXG5cbiAgICBpZiAoIWFjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDaGFyU2hlZXRzICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGdhbWUuYWN0b3JzLmNvbnRlbnRzLmZvckVhY2goYSA9PiB7XG4gICAgICAgIGlmIChhPy5kYXRhPy50eXBlID09PSAnY2hhcmFjdGVyJyAmJiBhPy5zaGVldCAmJiBhPy5zaGVldD8ucmVuZGVyZWQpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZS5hY3RvcnMuY29udGVudHMuZm9yRWFjaChhID0+IHtcbiAgICAgICAgaWYgKGEuaXNPd25lcikge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ2RhdGEuZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgZnJvbSBfb25Ecm9wIHRvIGdldCB0aGUgZHJvcHBlZCBlbnRpdHlUeXBlIG9yIGVudGl0eVR5cGUgZnJvbSBhIGZvbGRlclxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyBbaXRlbXNdIGFycmF5IG9mIGl0ZW1zXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0RGF0YUZyb21Ecm9wRXZlbnQgKGV2ZW50LCBlbnRpdHlUeXBlID0gJ0l0ZW0nKSB7XG4gICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQpIHJldHVybiBbXVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhTGlzdCA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSlcbiAgICAgIGlmIChkYXRhTGlzdC50eXBlID09PSAnRm9sZGVyJyAmJiBkYXRhTGlzdC5kb2N1bWVudE5hbWUgPT09IGVudGl0eVR5cGUpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZ2FtZS5mb2xkZXJzLmdldChkYXRhTGlzdC5pZClcbiAgICAgICAgaWYgKCFmb2xkZXIpIHJldHVybiBbXVxuICAgICAgICByZXR1cm4gZm9sZGVyLmNvbnRlbnRzXG4gICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0LnR5cGUgPT09IGVudGl0eVR5cGUpIHtcbiAgICAgICAgaWYgKGRhdGFMaXN0LnBhY2spIHtcbiAgICAgICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoZGF0YUxpc3QucGFjaylcbiAgICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09IGVudGl0eVR5cGUpIHJldHVybiBbXVxuICAgICAgICAgIHJldHVybiBbYXdhaXQgcGFjay5nZXREb2N1bWVudChkYXRhTGlzdC5pZCldXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QuZGF0YSkge1xuICAgICAgICAgIHJldHVybiBbZGF0YUxpc3RdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtnYW1lLml0ZW1zLmdldChkYXRhTGlzdC5pZCldXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvcHlUb0NsaXBib2FyZCAodGV4dCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiB3aW5kb3cuaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dFxuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUubGVmdCA9ICctOTk5cHgnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnRvcCA9ICctOTk5cHgnXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEFyZWEpXG4gICAgICAgIHRleHRBcmVhLmZvY3VzKClcbiAgICAgICAgdGV4dEFyZWEuc2VsZWN0KClcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpID8gcmVzb2x2ZSgpIDogcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIGNvcHkgdG8gY2xpcGJvYXJkLCB0aGlzIGlzIGxpa2VseSBkdWUgdG8geW91ciBicm93c2VyIHNlY3VyaXR5IHNldHRpbmdzLicpKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdVbmFibGUgdG8gY29weSB0byBjbGlwYm9hcmQsIHRoaXMgaXMgbGlrZWx5IGR1ZSB0byB5b3VyIGJyb3dzZXIgc2VjdXJpdHkgc2V0dGluZ3MuJylcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSAqL1xuXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxNb2RlKSByZXR1cm4gbnVsbFxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0ZWRUb2tlbnMgKCkge1xuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cbiAgICByZXR1cm4gdGhpcy50YXJnZXRBY3RvclxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB0aGlzLl90YXJnZXRBY3RvciA9IHRoaXMudGFyZ2V0VG9rZW4uYWN0b3JcbiAgICAgIGVsc2UgdGhpcy5fdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0QWN0b3JcbiAgfVxuXG4gIGdldCB0YXJnZXRLZXkgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0S2V5XG4gIH1cblxuICBnZXQgaGFzVGFyZ2V0ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzZXQgdGFyZ2V0S2V5ICh4KSB7XG4gICAgdGhpcy5fdGFyZ2V0S2V5ID0geFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHRhcmdldEltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy50YXJnZXRLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikgcmV0dXJuIHRoaXMudG9rZW4ubmFtZVxuICAgIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCB0YXJnZXROYW1lICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0KSByZXR1cm4gJ2R1bW15J1xuICAgIHJldHVybiB0aGlzLnRhcmdldC5uYW1lXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGFzeW5jIHNheSAobWVzc2FnZSwgZmxhdm9yID0gbnVsbCkge1xuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBzcGVha2VyLFxuICAgICAgZmxhdm9yOiBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsLCBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5mdW5jdGlvbiByZXBsYWNlciAoa2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG5cbiAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19jcmVhdHVyZSddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuZXhwb3J0IGNsYXNzIFNhbkNoZWNrQ2FyZCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBzYW5EYXRhID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKFxuICAgICAgYWN0b3JLZXksXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5mYXN0Rm9yd2FyZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBCb29sZWFuKG9wdGlvbnMuZmFzdEZvcndhcmQpXG4gICAgICAgIDogZmFsc2VcbiAgICApXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICAvLyB0aGlzLm9wdGlvbnMub2JqPXt0ZXN0OjEsdGVzdDI6Mn07XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuaXNCbGluZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gQm9vbGVhbih0aGlzLm9wdGlvbnMuaXNCbGluZClcbiAgICAgIDogc3VwZXIuaXNCbGluZFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IHRoaXMub3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLm1vZGlmaWVyXG4gICAgICA6IDBcbiAgfVxuXG4gIGdldCBjcmVhdHVyZSAoKSB7XG4gICAgLy8gVE9ETyA6IGNoZWNrIGNvbnN0cnVjdG9yXG4gICAgaWYgKFxuICAgICAgdGhpcy5zYW5EYXRhLmNyZWF0dXJlS2V5ICYmXG4gICAgICAoIXRoaXMuX19jcmVhdHVyZSB8fCB0aGlzLl9fY3JlYXR1cmUuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpXG4gICAgKSB7XG4gICAgICB0aGlzLl9fY3JlYXR1cmUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEuY3JlYXR1cmVLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX2NyZWF0dXJlXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuXG4gICAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5jcmVhdHVyZT8uc2FuTG9zcyA/IHRoaXMuc2FuQ2hlY2sucGFzc2VkIDogMFxuICAgICAgaWYgKGZvcm11bGEpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoZm9ybXVsYSkpKSByZXR1cm4gTnVtYmVyKGZvcm11bGEpXG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3RUb1RoaXNDcmVhdHVyZSAoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb0NyZWF0dXJlKHRoaXMuY3JlYXR1cmUpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1heFNhbkxvc3NUb1RoaXNDcmVhdHVyZSAoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdG9yLm1heFBvc3NpYmxlU2FuTG9zc1RvQ3JlYXR1cmUodGhpcy5jcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1heFNhbkxvc3MgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSByZXR1cm4gdGhpcy5tYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmVcbiAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1heCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1heCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkRhdGEuc2FuTWF4KS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3JlYXR1cmVFbmNvdW50ZXJlZCAoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHJldHVybiB0aGlzLmFjdG9yLmNyZWF0dXJlRW5jb3VudGVyZWQodGhpcy5jcmVhdHVyZSlcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgY3JlYXR1cmVTcGVjaWVFbmNvdW50ZXJlZCAoKSB7XG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdG9yLmNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQodGhpcy5jcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZpcnN0RW5jb3VudGVyICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxuICB9XG5cbiAgZ2V0IGNyZWF0dXJlSGFzU3BlY2llICgpIHtcbiAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YSh0aGlzLmNyZWF0dXJlKVxuICAgIGlmIChjcmVhdHVyZVNhbkRhdGEuc3BlY2llKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzQWN0b3JMb29zaW5nU2FuICgpIHtcbiAgICAvLyBObyBzYW4gbG9zcyBkdXJpbmcgYm91dCBvZiBtYWQuXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNJbkFCb3V0T2ZNYWRuZXNzKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBUaGUgc2FuIGxvc3MgaXMgYSAwXG4gICAgaWYgKHRoaXMuc2FuTG9zc0Zvcm11bGEgPT09IDApIHJldHVybiBmYWxzZVxuXG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHtcbiAgICAgIC8vIENyZWF0dXJlIGhhcyBubyBzYW4gbG9zcyAod2hhdCBhcmUgd2UgZG9pbmcgaGVyZSA/Pz8pXG4gICAgICBpZiAoIXRoaXMuY3JlYXR1cmUuc2FuTG9zc01heCkgcmV0dXJuIGZhbHNlXG5cbiAgICAgIC8vIEFjdG9yIGFscmVhZHkgZW5jb3VudGVyZWQgdGhhdCBjcmVhdHVyZSBhbmQgbG9zdCBhbHJlYWR5IG1vcmUgb3IgZXF1YWwgdGhhbiBtYXggY3JlYXR1cmUgU0FOIGxvc3MuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuYWN0b3Iuc2FuTG9zdFRvQ3JlYXR1cmUodGhpcy5jcmVhdHVyZSkgPj0gdGhpcy5jcmVhdHVyZS5zYW5Mb3NzTWF4XG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbW11bmVUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgLy8gTWF4IHBvc3NpYmxlIGFjdG9yIGxvb3MgdG8gdGhpcyBjcmVhdHVyZSBpcyAwXG4gICAgICBpZiAodGhpcy5hY3Rvci5tYXhQb3NzaWJsZVNhbkxvc3NUb0NyZWF0dXJlKHRoaXMuY3JlYXR1cmUpID09PSAwKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lVG9DcmVhdHVyZSA9IHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBib3V0RHVyYXRpb25UZXh0ICgpIHtcbiAgICBpZiAodGhpcy5ib3V0RHVyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmJvdXRSZWFsVGltZSkgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSByb3VuZHNgXG4gICAgICBpZiAodGhpcy5ib3V0U3VtbWFyeSkgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSBob3Vyc2BcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBhbHJlYWR5SW5zYW5lVGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuaW5kZWZpbnRpZSkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbHJlYWR5VW5kZXJseWluZ0luc2FuaXR5JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFscmVhZHlVbmRlcmx5aW5nSW5zYW5pdHknKSArXG4gICAgICAgIGAgKCR7dGhpcy5hY3Rvci5zYW5pdHkudW5kZXJseWluZy5kdXJhdGlvblRleHR9KWBcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBnZXQgeW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmcgKCkge1xuICAgIGlmICh0aGlzLm15dGhvc0dhaW4pIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LllvdUdhaW5lZEN0aHVsaHVNeXRob3MnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLm15dGhvc0dhaW5cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBhZHZhbmNlU3RhdGUgKHN0YXRlKSB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSAna2VlcENyZWF0dXJlU2FuRGF0YSc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGVbc3RhdGVdID0gdHJ1ZVxuICAgICAgICBpZiAoIXRoaXMuaXNBY3Rvckxvb3NpbmdTYW4pIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnc2FuTG9zc0FwcGxpZWQnOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTYW5Mb3NzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2VudGVyQm91dE9mTWFkbmVzc1JlYWxUaW1lJzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSB0cnVlXG4gICAgICAgIHRoaXMuYm91dFN1bW1hcnkgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIHRoaXMuYm91dER1cmF0aW9uXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzUmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzU3VtbWFyeSc6IHtcbiAgICAgICAgdGhpcy5ib3V0RHVyYXRpb24gPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICAgIHRoaXMuYm91dFJlYWxUaW1lID0gZmFsc2VcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0UmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rvci5lbnRlckJvdXRPZk1hZG5lc3MoXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICAvLyBpZiggdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUpIHRoaXMuYWN0b3IuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5leGl0Qm91dE9mTWFkbmVzcygpXG4gICAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckluc2FuaXR5KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY3RodWxodU15dGhvc0F3YXJkZWQnOiB7XG4gICAgICAgIGxldCBhbW91bnRHYWluZWQgPSAxXG4gICAgICAgIGlmICghdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkKSB7XG4gICAgICAgICAgYW1vdW50R2FpbmVkID0gNVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IuZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIGNvbnN0IGN0aHVsaHVNeXRob3NTa2lsbCA9IHRoaXMuYWN0b3IuY3RodWxodU15dGhvc1NraWxsXG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID1cbiAgICAgICAgICBjdGh1bGh1TXl0aG9zU2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgfHwgMFxuICAgICAgICBpZiAoY3RodWxodU15dGhvc1NraWxsKSB7XG4gICAgICAgICAgYXdhaXQgY3RodWxodU15dGhvc1NraWxsLnVwZGF0ZSh7XG4gICAgICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogb2xkVmFsdWUgKyBhbW91bnRHYWluZWRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IGFtb3VudEdhaW5lZFxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJ5cGFzc1JvbGxTYW4gKCkge1xuICAgIHRoaXMuaXNCeXBhc3NlZCA9IHRydWVcbiAgICB0aGlzLnNhbkNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgdGhpcy5zYW5DaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICB0aGlzLnNhbkNoZWNrLmF0dHJpYnV0ZSA9ICdzYW4nXG4gICAgdGhpcy5zYW5DaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuc2FuQ2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLnNhbkNoZWNrLl9wZXJmb3JtKClcbiAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnN0YXRlLmludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkID0gdGhpcy5zYW5DaGVjay5wYXNzZWRcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pZ25vcmVTYW5DaGVjayA9IHRydWVcbiAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLnNhbkxvc3NGb3JtdWxhXG4gIH1cblxuICBhc3luYyByb2xsU2FuICgpIHtcbiAgICB0aGlzLnNhbkNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgdGhpcy5zYW5DaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICB0aGlzLnNhbkNoZWNrLmF0dHJpYnV0ZSA9ICdzYW4nXG4gICAgdGhpcy5zYW5DaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuc2FuQ2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLnNhbkNoZWNrLl9wZXJmb3JtKClcbiAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnN0YXRlLmludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkID0gdGhpcy5zYW5DaGVjay5wYXNzZWRcbiAgICBpZiAoIXRoaXMuaXNBY3Rvckxvb3NpbmdTYW4pIHtcbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNJbkFCb3V0T2ZNYWRuZXNzKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKFxuICAgICAgICAgIHRoaXMuc2FuTG9zc0Zvcm11bGEsXG4gICAgICAgICAgdGhpcy5tYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmVcbiAgICAgICAgKVxuICAgICAgICBpZiAodGhpcy5zYW5Mb3NzRm9ybXVsYSA+IHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0aGlzLnNhbkxvc3MgPSB0aGlzLnNhbkxvc3NGb3JtdWxhXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLm1heFNhbkxvc3NcbiAgICB9IGVsc2UgaWYgKHRoaXMuY3JlYXR1cmUpIHtcbiAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHRoaXMuc2FuTG9zc0Zvcm11bGEpLmV2YWx1YXRlKHtcbiAgICAgICAgbWluaW1pemU6IHRydWVcbiAgICAgIH0pLnRvdGFsXG4gICAgICBpZiAobWluID49IHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5tYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmVcbiAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbkxvc3MgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICAvLyB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYHske3RoaXMuc2FuTG9zc0Zvcm11bGF9LCR7dGhpcy5tYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmV9fWtsYCk7XG4gICAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuc2FuTG9zc1JvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG5cbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLnNhbkxvc3NSb2xsKVxuXG4gICAgaWYgKHRoaXMuY3JlYXR1cmUpIHtcbiAgICAgIC8vIFdpbGwgbmV2ZXIgaGFwcGVuXG4gICAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbC50b3RhbCA+IHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuY3JlYXR1cmVcbiAgICAgID8gTWF0aC5taW4odGhpcy5zYW5Mb3NzUm9sbC50b3RhbCwgdGhpcy5tYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmUpXG4gICAgICA6IHRoaXMuc2FuTG9zc1JvbGwudG90YWxcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmxvb3NlU2FuVG9DcmVhdHVyZSh0aGlzLnNhbkxvc3MsIHRoaXMuY3JlYXR1cmUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5Mb3NzKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPiAwKSB0aGlzLnN0YXRlLmFjdG9yTG9zdFNhbiA9IHRydWVcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NBcHBsaWVkID0gdHJ1ZVxuICAgIGlmICh0aGlzLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPCA1KSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IG9uZUZpZnRoU2FuaXR5ID0gdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHlcbiAgICBvbmVGaWZ0aFNhbml0eSA9IHBhcnNlSW50KG9uZUZpZnRoU2FuaXR5LnJlcGxhY2UoL1xcRC9nLCAnJykpXG4gICAgaWYgKHRoaXMuYWN0b3IuZGFpbHlTYW5Mb3NzID49IG9uZUZpZnRoU2FuaXR5KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKClcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSBhd2FpdCB0aGlzLmFjdG9yLmVudGVySW5zYW5pdHkodHJ1ZSlcbiAgICBpZiAodGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5hY3Rvci5zYW5pdHkudW5kZXJseWluZy5hY3RpdmUgJiZcbiAgICAgICAgdGhpcy5hY3Rvci5zYW5pdHkudW5kZXJseWluZy5pbmRlZmludGllXG4gICAgICApIHtcbiAgICAgICAgLy8gQWxyZWFkeSBpbmRlZmluaXRlIGluc2FuaXR5XG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zYW5pdHlEdXJhdGlvblJvbGwgPSBhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgdGhpcy5pbnNhbml0eUR1cmF0aW9uID0gdGhpcy5pbnNhbml0eUR1cmF0aW9uUm9sbC50b3RhbFxuICAgICAgaWYgKHRoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5pbnNhbml0eUR1cmF0aW9uICs9IHRoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuZHVyYXRpb25cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJJbnNhbml0eShmYWxzZSwgdGhpcy5pbnNhbml0eUR1cmF0aW9uKVxuICAgIH1cbiAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q3JlYXR1cmVTYW5EYXRhICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0Q3JlYXR1cmUodGhpcy5jcmVhdHVyZSlcbiAgICBpZiAoIXRoaXMuY3JlYXR1cmVFbmNvdW50ZXJlZCAmJiAhdGhpcy5jcmVhdHVyZVNwZWNpZUVuY291bnRlcmVkKSB7XG4gICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzZXRTcGVjaWVTYW5EYXRhICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0U3BlY2llKHRoaXMuY3JlYXR1cmUpXG4gICAgaWYgKCF0aGlzLmNyZWF0dXJlRW5jb3VudGVyZWQgJiYgIXRoaXMuY3JlYXR1cmVTcGVjaWVFbmNvdW50ZXJlZCkge1xuICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICAvLyBBdHRhY2hlIHRoZSBzYW5DaGVjayByZXN1bHQgdG8gdGhlIG1lc3NhZ2UuXG4gICAgaWYgKHRoaXMuc3RhdGUuc2FuUm9sbGVkKSB7XG4gICAgICB0aGlzLl9faW5saW5lU2FuQ2hlY2sgPSB0aGlzLnNhbkNoZWNrLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3NSb2xsKSB7XG4gICAgICBjb25zdCBhID0gY3JlYXRlSW5saW5lUm9sbCh0aGlzLnNhbkxvc3NSb2xsKVxuICAgICAgdGhpcy5fX2lubGluZVNhbkxvc3NSb2xsID0gYS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5pbnRSb2xsZWQgJiYgdGhpcy5pbnRDaGVjaykge1xuICAgICAgdGhpcy5fX2lubGluZUludENoZWNrID0gdGhpcy5pbnRDaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoU2FuQ2hlY2tDYXJkLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKEpTT04uc3RyaW5naWZ5KHRoaXMsIHJlcGxhY2VyKSlcblxuICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL3Nhbi1jaGVjay5odG1sJ1xuICB9XG5cbiAgc3RhdGljIGNoZWNrVGFyZ2V0cyAoY3JlYXR1cmVLZXksIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgdGFyZ2V0cy5mb3JFYWNoKHQgPT4ge1xuICAgICAgICAvLyBUT0RPIDogPyBNYWtlIGFzeW5jIGNhbGwgdG8gY3JlYXRlID9cbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoXG4gICAgICAgICAgICB0LmFjdG9yLnRva2VuS2V5LFxuICAgICAgICAgICAgeyBjcmVhdHVyZUtleTogY3JlYXR1cmVLZXkgfSxcbiAgICAgICAgICAgIHsgZmFzdEZvcndhcmQ6IGZhc3RGb3J3YXJkIH1cbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgICAgIHQuYWN0b3IuaWQsXG4gICAgICAgICAgICB7IGNyZWF0dXJlS2V5OiBjcmVhdHVyZUtleSB9LFxuICAgICAgICAgICAgeyBmYXN0Rm9yd2FyZDogZmFzdEZvcndhcmQgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICguLi5hcmdzKSB7XG4gICAgY29uc3QgY2hhdENhcmQgPSBuZXcgU2FuQ2hlY2tDYXJkKC4uLmFyZ3MpXG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3IuaXNJbnNhbmUpIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmFscmVhZHlJbnNhbmUgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5wZXJtYW5lbnRseUluc2FuZSA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICghY2hhdENhcmQuY3JlYXR1cmVFbmNvdW50ZXJlZCAmJiAhY2hhdENhcmQuY3JlYXR1cmVTcGVjaWVFbmNvdW50ZXJlZCkge1xuICAgICAgY2hhdENhcmQuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoU2FuQ2hlY2tDYXJkLnRlbXBsYXRlLCBjaGF0Q2FyZClcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKEpTT04uc3RyaW5naWZ5KGNoYXRDYXJkLCByZXBsYWNlcikpXG4gICAgYXdhaXQgY2hhdENhcmQuc2F5KGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaHRtbENhcmQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcblxuICAgIHJldHVybiBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbENhcmQpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBzYW5DaGVja0NhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcblxuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoKVxuICAgIE9iamVjdC5hc3NpZ24oc2FuQ2hlY2tDYXJkLCBzYW5DaGVja0NhcmREYXRhKVxuICAgIGlmICghc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCkge1xuICAgICAgc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuc2FuQ2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLmludENoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5pbnRDaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGwgPSBSb2xsLmZyb21EYXRhKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbClcbiAgICB9XG5cbiAgICAvLyBzYW5DaGVja0NhcmQuc2FuQ2hlY2s/LnRvTWVzc2FnZSgpO1xuXG4gICAgcmV0dXJuIHNhbkNoZWNrQ2FyZFxuICB9XG59XG4iLCIvLyBOYW1lc3BhY2UgQ09DNyBDb25maWd1cmF0aW9uIFZhbHVlc1xuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxuXG4vLyBDdXN0b20gY2hhdE1lc3NhZ2Vcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LmVyYXMgPSB7XG4gIG52Y3Q6ICdDb0M3LkVyYU52Y3QnLFxuICBkcmthOiAnQ29DNy5FcmFEcmthJyxcbiAgZGR0czogJ0NvQzcuRXJhRGR0cycsXG4gIGdsaXQ6ICdDb0M3LkVyYUdsaXQnLFxuICAxOTIwOiAnQ29DNy5FcmExOTIwJyxcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXG4gIG1kcm46ICdDb0M3LkVyYU1kcm4nXG59XG5cbkNPQzcuY2hhcmFjdGVyaXN0aWNzID0ge1xuICBzdHI6ICdDb0M3LkNoYXJhY1N0cicsXG4gIGNvbjogJ0NvQzcuQ2hhcmFjQ29uJyxcbiAgc2l6OiAnQ29DNy5DaGFyYWNTaXonLFxuICBkZXg6ICdDb0M3LkNoYXJhY0RleCcsXG4gIGFwcDogJ0NvQzcuQ2hhcmFjQXBwJyxcbiAgaW50OiAnQ29DNy5DaGFyYWNJbnQnLFxuICBwb3c6ICdDb0M3LkNoYXJhY1BvdycsXG4gIGVkdTogJ0NvQzcuQ2hhcmFjRWR1J1xufVxuXG4vKipcbiAqIFRoZSBzZXQgb2YgU2tpbGxzIGF0dHJpYnV0ZXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5za2lsbFByb3BlcnRpZXMgPSB7XG4gIG5vYWRqdXN0bWVudHM6ICdDb0M3LlNraWxsTm9BZGp1c3RtZW50cycsXG4gIG5veHBnYWluOiAnQ29DNy5Ta2lsbE5vWHBHYWluJyxcbiAgc3BlY2lhbDogJ0NvQzcuU2tpbGxTcGVjaWFsJyxcbiAgcmFyaXR5OiAnQ29DNy5Ta2lsbFJhcml0eScsXG4gIHB1c2g6ICdDb0M3LlNraWxsUHVzaCcsXG4gIGNvbWJhdDogJ0NvQzcuU2tpbGxDb21iYXQnLFxuICBmaWdodGluZzogJ0NvQzcuU2tpbGxGaWdodGluZycsXG4gIGZpcmVhcm06ICdDb0M3LlNraWxsRmlyZWFybSdcbn1cblxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xuICBtZWxlZTogJ0NvQzcuV2VhcG9uLlByb3BlcnR5Lk1lbGVlJyxcbiAgcm5nZDogJ0NvQzcuV2VhcG9uUm5nZCcsXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXG4gIHRocm93bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlRocm93bicsXG4gIHNob3RndW46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5TaG90Z3VuJyxcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXG4gIGltcGw6ICdDb0M3LldlYXBvbkltcGwnLFxuICBicnN0OiAnQ29DNy5XZWFwb25CcnN0JyxcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXG4gIGFoZGI6ICdDb0M3LldlYXBvbkFoZGInLFxuICBhZGRiOiAnQ29DNy5XZWFwb25BZGRiJyxcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXG4gIHNwY2w6ICdDb0M3LldlYXBvblNwY2wnLFxuICBtb250OiAnQ29DNy5XZWFwb25Nb250JyxcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXG4gIHN0dW46ICdDb0M3LldlYXBvblN0dW4nLFxuICByYXJlOiAnQ29DNy5XZWFwb25SYXJlJyxcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXG59XG5cbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xuICBjYWxsOiAnQ29DNy5DYWxsU3BlbGwnLFxuICBkaXNtaXNzOiAnQ29DNy5EaXNtaXNzU3BlbGwnLFxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxuICBzdW1tb246ICdDb0M3LlN1bW1vblNwZWxsJyxcbiAgYmluZDogJ0NvQzcuQmluZFNwZWxsJyxcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxuICBnYXRlOiAnQ29DNy5HYXRlU3BlbGwnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFNwZWxsJ1xufVxuXG5DT0M3LmJvb2tUeXBlID0ge1xuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxuICBvY2N1bHQ6ICdDb0M3Lk9jY3VsdEJvb2snLFxuICBvdGhlcjogJ0NvQzcuT3RoZXInXG59XG5cbkNPQzcudGFsZW50VHlwZSA9IHtcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcbiAgbWVudGFsOiAnQ29DNy5NZW50YWxUYWxlbnQnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFRhbGVudCcsXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxuICBiYXNpYzogJ0NvQzcuQmFzaWNUYWxlbnQnLFxuICBpbnNhbmU6ICdDb0M3Lkluc2FuZVRhbGVudCcsXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcbn1cblxuQ09DNy5zdGF0dXNUeXBlID0ge1xuICBtYW5pYTogJ0NvQzcuTWFuaWEnLFxuICBwaG9iaWE6ICdDb0M3LlBob2JpYSdcbn1cblxuQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllcyA9IHtcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXG4gIGxvdmVjcmFmdGlhbjogJ0NvQzcuTG92ZWNyYWZ0aWFuJyxcbiAgbW9kZXJuOiAnQ29DNy5Nb2Rlcm4nLFxuICBwdWxwOiAnQ29DNy5QdWxwJ1xufVxuXG5DT0M3LmZvcm11bGEgPSB7fVxuXG5DT0M3LmZvcm11bGEuYWN0b3IgPSB7XG4gICdAU1RSJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LmZvcm11bGEuYWN0b3JzaGVldCA9IHtcbiAgJ0BTVFInOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuc3RhdHVzID0ge1xuICB0ZW1wb0luc2FuZTogJ3RlbXBvSW5zYW5lJyxcbiAgaW5kZWZJbnNhbmU6ICdpbmRlZkluc2FuZScsXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxuICBjcml0aWNhbFdvdW5kczogJ2NyaXRpY2FsV291bmRzJyxcbiAgZHlpbmc6ICdkeWluZycsXG4gIHByb25lOiAncHJvbmUnLFxuICBkZWFkOiAnZGVhZCdcbn1cblxuQ09DNy5uZXdTa2lsbE5hbWUgPSAnQ29DNy5OZXdTa2lsbE5hbWUnXG5DT0M3Lm5ld0l0ZW1OYW1lID0gJ0NvQzcuTmV3SXRlbU5hbWUnXG5DT0M3Lm5ld1dlYXBvbk5hbWUgPSAnQ29DNy5OZXdXZWFwb25OYW1lJ1xuXG5DT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCA9ICdDb0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCdcblxuQ09DNy5kb2RnZVNraWxsTmFtZSA9ICdDb0M3LkRvZGdlU2tpbGxOYW1lJ1xuQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUgPSAnQ29DNy5DcmVkaXRSYXRpbmdTa2lsbE5hbWUnXG5DT0M3LkN0aHVsaHVNeXRob3NOYW1lID0gJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcidcbn1cblxuLy8gQ09DNy5kb2RnZSA9IHtcbi8vICAnbmFtZSc6IENPQzcuZG9kZ2VTa2lsbE5hbWUsXG4vLyAgJ3R5cGUnOiAnc2tpbGwnLFxuLy8gICdiYXNlJzogJzEvMipAREVYJyxcbi8vICAndmFsdWUnOiAtMSxcbi8vICAnZGF0YSc6IHtcbi8vICAgICdzcGVjaWFsaXphdGlvbic6IENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUgfSxcbi8vICAncHJvcGVydGllcyc6IHtcbi8vICAgICdzcGVjaWFsJzogdHJ1ZSxcbi8vICAgICdyYXJpdHknOiBmYWxzZSxcbi8vICAgICdwdXNoJzogZmFsc2UsXG4vLyAgICAnY29tYmF0JzogdHJ1ZSxcbi8vICAgICdmaWdodGluZyc6IHRydWUsXG4vLyAgICAnZmlyZWFybSc6IGZhbHNlXG4vLyAgfSxcbi8vICAnZmxhZ3MnOiB7ICd3cG5leGNsJzogdHJ1ZX1cbi8vIH07XG5cbi8vIENPQzcuUGNTa2lsbHMgPSB7XG4vLyAgJ2RvZGdlJyA6IENPQzcuZG9kZ2UsXG4vLyAgJ3Rocm93JyA6IHt9XG4vLyB9O1xuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbkNoZWNrIHtcbiAgY29uc3RydWN0b3IgKGFjdG9ySWQgPSBudWxsLCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgdGhpcy5jaGVjayA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZClcbiAgICB0aGlzLmNoZWNrLmNoYXJhY3RlcmlzdGljID0gJ2NvbidcbiAgICB0aGlzLmNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICB0aGlzLmFjdG9ySWQgPSBhY3RvcklkXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JJZCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBhY3RvcklkICh4KSB7XG4gICAgdGhpcy5fYWN0b3JJZCA9IHhcbiAgICB0aGlzLmNoZWNrLmFjdG9yID0geFxuICB9XG5cbiAgZ2V0IGFjdG9ySWQgKCkge1xuICAgIGlmICh0aGlzLl9hY3RvcklkKSByZXR1cm4gdGhpcy5fYWN0b3JJZFxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHJldHVybiB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpc1N1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrKSByZXR1cm4gdGhpcy5jaGVjay5pc1N1Y2Nlc3NcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzUm9sbGVkICgpIHtcbiAgICBpZiAodGhpcy5jaGVjayAmJiB0aGlzLmNoZWNrLmRpY2VzICYmIHRoaXMuY2hlY2suZGljZXMudG90YWwpIHJldHVybiB0cnVlXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjaygpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChjb25DaGVjaywgY2FyZClcbiAgICBjb25zdCBodG1sQ2hlY2sgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoaHRtbENoZWNrLCBjb25DaGVjay5jaGVjaylcbiAgICBjb25DaGVjay5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICByZXR1cm4gY29uQ2hlY2tcbiAgfVxuXG4gIGFzeW5jIGdldENoZWNrRWxlbWVudCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLmNoZWNrKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICBpZiAoaHRtbEVsZW1lbnQpIHtcbiAgICAgIGh0bWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NoYXQtY2FyZCcsICdpdGVtLWNhcmQnLCAncm9sbC1jYXJkJylcbiAgICAgIHJldHVybiBodG1sRWxlbWVudFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxDb24oKVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG4gICAgfVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IHNwZWFrZXIsXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxuICAgICAgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByb2xsQ29uICgpIHtcbiAgICB0aGlzLmNoZWNrLmhpZGVEaWNlUmVzdWx0ID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hlY2suX3BlcmZvcm0oKVxuICAgIGlmICghdGhpcy5pc1N1Y2Nlc3MgJiYgIXRoaXMuaXNCbGluZCkge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSBhd2FpdCB0aGlzLmFjdG9yLmZhbGxEZWFkKClcbiAgICAgIGVsc2UgYXdhaXQgdGhpcy5hY3Rvci5mYWxsVW5jb25zY2lvdXMoKVxuICAgIH1cbiAgICB0aGlzLmFwcGxpZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkgYXdhaXQgdGhpcy5hY3Rvci5mYWxsRGVhZCgpXG4gICAgICBlbHNlIGF3YWl0IHRoaXMuYWN0b3IuZmFsbFVuY29uc2Npb3VzKClcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgU2tpbGxTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnNlbGVjdC1za2lsbCcpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RTa2lsbENsaWNrZWQoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0U2tpbGxDbGlja2VkIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwXG4gICAgdGhpcy5kYXRhLmRhdGEuYWRkZWQrK1xuICAgIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5za2lsbC1zZWxlY3RvcicpXG4gICAgY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpXG4gICAgZGl2Q291bnQuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuYWRkZWRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKSAvLyBSZW5kZXIgdGVtcGxhdGUgYnVnIGF2ZWMgY2VydGFpbmVzIGRhdGFcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgU2tpbGxTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghZGF0YS5hZGRlZCA+PSBkYXRhLm9wdGlvbnNDb3VudCkgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGRhdGEuc2tpbGxzLmZpbHRlcihza2lsbCA9PiBza2lsbC5zZWxlY3RlZClcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHNlbGVjdGVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ3NraWxsLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgUG9pbnRTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tbmFtZScpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gICAgaHRtbC5maW5kKCdidXR0b24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkJ1dHRvbkNsaWNrZWQoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtTGlzdCA9IGxpLmNsb3Nlc3QoJy5pdGVtLWxpc3QnKVxuICAgIGl0ZW1MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RhYmxlJykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5vcHRpb25hbCA9IGZhbHNlXG4gICAgfSlcbiAgICAkKGxpKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKVxuICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgY29uc3QgdG90YWxQb2ludHMgPSBsaVxuICAgICAgLmNsb3Nlc3QoJyNza2lsbC1zZWxlY3Rpb24tZm9ybScpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgdG90YWxQb2ludHMuaW5uZXJUZXh0ID1cbiAgICAgIHRoaXMuZGF0YS5kYXRhLnRvdGFsICtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0ubXVsdGlwbGllciAqXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tsaS5kYXRhc2V0LmtleV0udmFsdWVcbiAgICBjb25zdCBidXR0b24gPSBsaVxuICAgICAgLmNsb3Nlc3QoJyNza2lsbC1zZWxlY3Rpb24tZm9ybScpXG4gICAgICAucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgIHRoaXMuZGF0YS5kYXRhLnJlc29sdmVkID0gdHJ1ZVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIC8vIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAvLyBpZiggIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDA7XG4gICAgLy8gdGhpcy5kYXRhLmRhdGEuYWRkZWQrKztcbiAgICAvLyBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcucG9pbnQtc2VsZWN0b3InKTtcbiAgICAvLyBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50Jyk7XG4gICAgLy8gZGl2Q291bnQuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuYWRkZWQ7XG4gICAgLy8gaWYoIHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnMpIHRoaXMuY2xvc2UoKTtcbiAgICAvLyByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICBhc3luYyBfb25CdXR0b25DbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIHN1cGVyLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3BvaW50LXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFBvaW50U2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZXNvbHZlZCkgcmV0dXJuIHJlc29sdmUoZGF0YSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIENoYXJhY1NlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgdGhpcy5kYXRhLmRhdGEuc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkKSByZXR1cm4gcmVzb2x2ZShkYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ2hhcmFjUm9sbERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBvcHRpb25zKSB7XG4gICAgc3VwZXIoZGF0YSwgb3B0aW9ucylcblxuICAgIHRoaXMucm9sbGVkID0gZGF0YS5yb2xsZWQgfHwge31cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQnLCB0aGlzLl9vbkNoYW5nZUlucHV0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignc3VibWl0JywgJ2Zvcm0nLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmVzZXQtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25SZXNldENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmluY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5yZXNldENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3JvbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgW1xuICAgICAgICAnc3RyJyxcbiAgICAgICAgJ2NvbicsXG4gICAgICAgICdzaXonLFxuICAgICAgICAnZGV4JyxcbiAgICAgICAgJ2FwcCcsXG4gICAgICAgICdpbnQnLFxuICAgICAgICAncG93JyxcbiAgICAgICAgJ2VkdScsXG4gICAgICAgICdsdWNrJ1xuICAgICAgXSkge1xuICAgICAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBhY3Rpb24gPT09ICd2YWxpZGF0ZScgJiZcbiAgICAgICFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKVxuICAgICkge1xuICAgICAgdGhpcy5jaGVja1RvdGFsKClcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGNvbnN0IGZvcm11bGEgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKGZvcm11bGEpKSkge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICBmbGF2b3I6IGBSb2xsaW5nIGNoYXJhY3RlcmlzaXRpYyAke3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0W2tleV0ubGFiZWx9OiAke2Zvcm11bGF9YFxuICAgICAgICB9KVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHJvbGwudG90YWxcbiAgICAgIH0gZWxzZSBpbnB1dC52YWx1ZSA9IE51bWJlcihmb3JtdWxhKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkgdGhpcy5yb2xsZWQgPSB7fVxuICAgICAgdGhpcy5yb2xsZWRba2V5XSA9IHRydWVcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSArIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQgJiYgTnVtYmVyKGlucHV0LnZhbHVlKSA+IDApIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSAtIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gbnVsbFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gMFxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlSW5wdXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2lucHV0Lm5hbWVdID0gdmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgY2hlY2tUb3RhbCAoKSB7XG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNcbiAgICApKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJylcbiAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSB0cnVlXG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnZhbHVlJylcbiAgICAgIHZhbHVlLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWVcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbCA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnRvdGFsJylcbiAgICB0b3RhbC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsXG5cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9XG4gICAgICAgICAgIU9iamVjdC5lbnRyaWVzKHRoaXMucm9sbGVkKS5maW5kKGVsID0+ICFlbCkgJiZcbiAgICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLnJvbGxlZCkubGVuZ3RoID09PSA5XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSkge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJ2J1dHRvbi52YWxpZGF0ZSdcbiAgICAgICAgICApXG4gICAgICAgICAgdmFsaWRhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCByb2xsZWQgPSB7fVxuICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlIHx8IDBcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4odmFsdWUpICYmIHZhbHVlID4gMCkge1xuICAgICAgICByb2xsZWRba2V5XSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09IE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5wb2ludHNXYXJuaW5nID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1yb2xsLmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ2hhcmFjUm9sbERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICByb2xsZWQ6IHJvbGxlZCxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEudmFsaWRhdGUpIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoXG4gICAgc2tpbGxzLFxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICBiYXNlVmFsdWUgPSBudWxsLFxuICAgIG5hbWUgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGhhc1NraWxsczogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxsczogc2tpbGxzLFxuICAgICAgICBiYXNlOiBiYXNlVmFsdWUsXG4gICAgICAgIG5hbWU6IG5hbWVcbiAgICAgIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBuYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsU2VsZWN0QmFzZScsIHsgbmFtZTogbmFtZSB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNwZWNTZWxlY3RUaXRsZScsIHtcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGluaXRpYXRvck1lc3NhZ2UgPSBudWxsLFxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxuICAgIG1lc3NhZ2VJZCA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxuICAgIHRoaXMudGFyZ2V0TWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICB9XG5cbiAgYXN5bmMgcHJlQ3JlYXRlTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7YWN0b3I6IHRoaXMuYWN0b3J9KTtcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgLy8gY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlcjtcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxuICAgIC8vIGRhdGEuZmxhZ3MgPSB7XG4gICAgLy8gICBpbWc6IHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW4uZGF0YS5pbWc6IHRoaXMuYWN0b3IuaW1nXG4gICAgLy8gfTtcblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IGNoYXRNZXNzYWdlLmlkXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLnRhcmdldE1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMudGFyZ2V0LmFjdG9yS2V5KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3JNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQodGhpcy5pbml0aWF0b3JNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvclRva2VuICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3IpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmUgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAncm9sbC1tZWxlZS1kYW1hZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5kYXRhLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ2RvZGdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVE9ETyB2ZXJpZmllciBsYSBjb25kaXRpb24gPD0gdnMgPFxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGAke3RoaXMuaW5pdGlhdG9yLm5hbWV9IHdvbi4gUm9sbCBkYW1hZ2VgXG4gICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBgJHt0aGlzLmluaXRpYXRvci5uYW1lfSBtaXNzZWQuYFxuICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLndpbm5lci50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLndpbm5lci50b2tlbi5kb2N1bW1lbnRcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLmFjdG9yKSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMud2lubmVyLmFjdG9yXG4gICAgICB9XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy53aW5uZXIgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKSA6IG51bGxcbiAgICAgIGNvbnN0IHVzZXIgPVxuICAgICAgICB0aGlzLndpbm5lciAmJiB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgPyB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgOiBnYW1lLnVzZXJcblxuICAgICAgbGV0IG1zZ1xuICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdSZXNvbGl0aW9uIGNhcmQgbWlzc2luZywgd2FzIGRlbGV0ZWQgPycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHNwZWFrZXIpIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIHNwZWFrZXIsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5odG1sJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVUYXJnZXQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gbnVsbFxuICAgIHRoaXMucGFyZW50TWVzc2FnZUlkID0gcGFyZW50TWVzc2FnZUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG5cbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMuc2tpbGxJZCA9IG51bGxcbiAgICB0aGlzLml0ZW1JZCA9IG51bGxcbiAgICB0aGlzLmRvZGdpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICB0aGlzLm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhY3Rpb25TZWxlY3RlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9kZ2luZyB8fCB0aGlzLmZpZ2h0aW5nQmFjayB8fCB0aGlzLm1hbmV1dmVyaW5nXG4gIH1cblxuICBnZXQgYWN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5kb2RnaW5nKSByZXR1cm4gJ2RvZGdlJ1xuICAgIGlmICh0aGlzLmZpZ2h0aW5nQmFjaykgcmV0dXJuICdmaWdodEJhY2snXG4gICAgaWYgKHRoaXMubWFuZXV2ZXJpbmcpIHJldHVybiAnbWFuZXV2ZXInXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgfVxuXG4gIHNldCBpbml0aWF0b3JLZXkgKHgpIHtcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XG4gICAgdGhpcy50YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yS2V5ICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2luaXRpYXRvcikgdGhpcy5faW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgfVxuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yS2V5XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmluaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmluaXRpYXRvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbWVsZWVJbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yKSB7XG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvclxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0Lmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUudGFyZ2V0JylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgdGFyZ2V0LnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZVxuXG4gICAgbGV0IHVzZXIgPSBnYW1lLnVzZXJcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCBvd25lcnMgPSBbXVxuICAgICAgY29uc3QgZ21zID0gZ2FtZS51c2Vycy5maWx0ZXIoYSA9PiBhLmlzR00pLm1hcChhID0+IGEuaWQpXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFjdG9yLmRhdGEucGVybWlzc2lvbikpIHtcbiAgICAgICAgaWYgKHYgPT09IENPTlNULkVOVElUWV9QRVJNSVNTSU9OUy5PV05FUikge1xuICAgICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICghZ21zLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnRlbnQgPSAnJ1xuICAgICAgc3dpdGNoIChvd25lcnMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAvLyBHTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodHlwZW9mIGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnKVxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgICAgICAgb3duZXJzLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICBjb250ZW50ICtcbiAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICtcbiAgICAgICAgICAgICAgayArXG4gICAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgICAgZ2FtZS51c2Vycy5nZXQoaykubmFtZSArXG4gICAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgICAgfSlcbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGEuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxuICAgIH1cblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuICAgIHJldHVybiBtZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcbiAgICByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKS50aGVuKGh0bWwgPT4ge1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSB0cnVlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25JZFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG4gICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcblxuICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgYWN0b3JLZXkgPSBjYXJkLmRhdGFzZXQuYWN0b3JLZXlcbiAgICBjb25zdCBwYXJlbnRNZXNzYWdlSWQgPSBjYXJkLmRhdGFzZXQucGFyZW50TWVzc2FnZUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBjYXJkLmRhdGFzZXQuZmFzdEZvcndhcmQgPT09ICd0cnVlJ1xuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3TWVsZWVUYXJnZXQoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCwgZmFzdEZvcndhcmQpXG5cbiAgICB0YXJnZXQucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICB0YXJnZXQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICB1cGdyYWRlUm9sbCAobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBvbGRDYXJkKSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRpZG4ndCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgZGljZVRvdGFsLmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG9sZENhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwsIENvQzdEYW1hZ2UgfSBmcm9tICcuL2hlbHBlci5qcydcbi8vIGltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vY2hhdC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBDb0M3UmFuZ2VJbml0aWF0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5pdGVtSWQgPSBpdGVtSWRcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnRhcmdldENhcmQgPSBudWxsXG4gICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICAgIHRoaXMuc2luZ2xlU2hvdCA9IGZhbHNlXG4gICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICB0aGlzLnRva2VuS2V5ID0gbnVsbFxuICAgIHRoaXMuYWltZWQgPSBmYWxzZVxuICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSAwXG4gICAgdGhpcy5fdGFyZ2V0cyA9IFtdXG4gICAgO1suLi5nYW1lLnVzZXIudGFyZ2V0c10uZm9yRWFjaCh0ID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoYCR7dC5zY2VuZS5pZH0uJHt0LmlkfWApIC8vXG4gICAgICB0YXJnZXQudG9rZW4gPSB0XG4gICAgICB0aGlzLl90YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH0pXG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICB0aGlzLl90YXJnZXRzLmZvckVhY2godCA9PiB7XG4gICAgICAgIGlmICh0LnRva2VuICYmIHRoaXMudG9rZW4pIHtcbiAgICAgICAgICB0LmRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZSh0LnRva2VuLCB0aGlzLnRva2VuKVxuICAgICAgICAgIHQucm91bmRlZERpc3RhbmNlID0gTWF0aC5yb3VuZCh0LmRpc3RhbmNlLnZhbHVlICogMTAwKSAvIDEwMFxuICAgICAgICAgIHQuZGlzdGFuY2VVbml0ID0gdC5kaXN0YW5jZS51bml0XG4gICAgICAgICAgY29uc3QgZGlzdEluWWQgPVxuICAgICAgICAgICAgTWF0aC5yb3VuZChjaGF0SGVscGVyLnRvWWFyZHModC5kaXN0YW5jZSkgKiAxMDApIC8gMTAwXG4gICAgICAgICAgLy8gaWYoIGRpc3RJbllkKXtcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgICAgICAgdC5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgcGJSYW5nZUluWWQgPVxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTVcbiAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSBwYlJhbmdlSW5ZZCkgdC5wb2ludEJsYW5rUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLndlYXBvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLmJhc2VSYW5nZSkge1xuICAgICAgICAgICAgICB0LmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0Lm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uZGF0YS5kYXRhLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5sb25nUmFuZ2VcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmxvbmdSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uZXh0cmVtZVJhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uZXh0cmVtZVJhbmdlKSB0Lm91dE9mUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSkgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDJcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQubG9uZ1JhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDIgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0KSB0Lm91dE9mUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICEodC5iYXNlUmFuZ2UgfHwgdC5sb25nUmFuZ2UgfHwgdC5leHRyZW1lUmFuZ2UgfHwgdC5vdXRPZlJhbmdlKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB9XG4gICAgICAgIH0gZWxzZSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgdGhpcy5yb2xscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgYW55SGl0ID0gYW55SGl0IHx8IHIuaXNTdWNjZXNzXG4gICAgfSlcbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgdGhpcy50YXJnZXRzLmZvckVhY2godCA9PiB7XG4gICAgICB0LnNob3REaWZmaWN1bHR5ID0gdGhpcy5zaG90RGlmZmljdWx0eSh0KVxuICAgIH0pXG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uZGF0YS5kYXRhLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcjogbW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIGNoYW5nZVZvbGxleVNpemUgKHgpIHtcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnJhbmdlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LWZsYWcnKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC50YXJnZXRLZXkpXG4gICAgICAgIGluaXRpYXRvci50YXJnZXRzW2tleV0udG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBwYXNzUm9sbCAocm9sbEluZGV4KSB7XG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChyb2xsLmx1Y2tOZWVkZWQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gcm9sbC5kaWZmaWN1bHR5XG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICB1cGdyYWRlUm9sbCAocm9sbEluZGV4LCB1cGdyYWRlaW5kZXgpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gcm9sbC5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcbiAgICByYW5nZUluaXRpYXRvci5fdGFyZ2V0cyA9IFtdXG4gICAgaWYgKG1lc3NhZ2VJZCkgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJhbmdlSW5pdGlhdG9yLCBjYXJkKVxuICAgIGNvbnN0IGNhcmRUYXJnZXRzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICBjYXJkVGFyZ2V0cy5mb3JFYWNoKHQgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN1JhbmdlVGFyZ2V0LmdldEZyb21FbGVtZW50KHQpXG4gICAgICByYW5nZUluaXRpYXRvci50YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH0pXG5cbiAgICBjb25zdCBjYXJkU2hvdHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG90JylcbiAgICBpZiAoY2FyZFNob3RzKSB7XG4gICAgICBjYXJkU2hvdHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgY29uc3Qgc2hvdCA9IHt9XG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoc2hvdCwgcylcbiAgICAgICAgcmFuZ2VJbml0aWF0b3Iuc2hvdHMucHVzaChzaG90KVxuICAgICAgfSlcbiAgICB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gIGNvbnN0IHNob3QgPSB7XG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXG4gICAgLy8gICAgICBhY3RvcktleTogbnVsbCxcbiAgICAvLyAgICAgIGFjdG9yTmFtZTogJ2R1bW15J1xuICAgIC8vICB9XG4gICAgLy8gfVxuXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxuICAgIGNvbnN0IHJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcucm9sbC1yZXN1bHQnKVxuICAgIHJvbGxzLmZvckVhY2gociA9PiB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQocilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzLnB1c2gocm9sbClcbiAgICB9KVxuXG4gICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlID0gW11cbiAgICBjb25zdCBkYW1hZ2VSb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmRhbWFnZS1yZXN1bHRzJylcbiAgICBkYW1hZ2VSb2xscy5mb3JFYWNoKGRyID0+IHtcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGwgPSBDb0M3RGFtYWdlLmdldEZyb21FbGVtZW50KGRyKVxuICAgICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlLnB1c2goZGFtYWdlUm9sbClcbiAgICB9KVxuXG4gICAgcmV0dXJuIHJhbmdlSW5pdGlhdG9yXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlICgpIHtcbiAgICB0aGlzLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgaGl0cyA9IHRoaXMuc3VjY2Vzc2Z1bEhpdHNcblxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcbiAgICAvLyBpZiggdGhpcy5mdWxsQXV0bykge1xuICAgIC8vICB2b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplO1xuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XG4gICAgLy8gfVxuICAgIC8vIGlmKCB0aGlzLmJ1cnN0KSB2b2xsZXlTaXplID0gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBoID0gaGl0c1tpXVxuICAgICAgY29uc3Qgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KGguc2hvdC5idWxsZXRzU2hvdClcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cblxuICAgICAgY29uc3QgZGFtYWdlRm9ybXVsYSA9IGguc2hvdC5kYW1hZ2VcbiAgICAgIGNvbnN0IGRhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShkYW1hZ2VGb3JtdWxhKVxuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZGFtYWdlRm9ybXVsYSkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSA9IHRoaXMud2VhcG9uLmltcGFsZVxuICAgICAgICA/IGAke2RhbWFnZUZvcm11bGF9ICsgJHttYXhEYW1hZ2V9YFxuICAgICAgICA6IGAke21heERhbWFnZX1gXG4gICAgICBjb25zdCBjcml0aWNhbERhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShjcml0aWNhbERhbWFnZUZvcm11bGEpXG5cbiAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgbGV0IHN1Y2Nlc3NmdWxTaG90cyA9IDBcbiAgICAgIGxldCBjcml0aWNhbCA9IGZhbHNlXG4gICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XG4gICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IE1hdGguZmxvb3Iodm9sbGV5U2l6ZSAvIDIpXG4gICAgICB9XG4gICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXG4gICAgICBpZiAoaC5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgaW1wYWxpbmdTaG90cyA9IHN1Y2Nlc3NmdWxTaG90c1xuICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xuICAgICAgICBjcml0aWNhbCA9IHRydWVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lIDw9IGgucm9sbC5kaWZmaWN1bHR5IHx8XG4gICAgICAgICAgICBoLnNob3QuZXh0cmVtZVJhbmdlKVxuICAgICAgICApIHtcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplXG4gICAgICAgICAgaW1wYWxpbmdTaG90cyA9IDBcbiAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHN1Y2Nlc3NmdWxTaG90czsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZGFtYWdlRm9ybXVsYSlcbiAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbClcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICBmb3JtdWxhOiBkYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgIGRpZTogZGFtYWdlRGllLFxuICAgICAgICAgIGNyaXRpY2FsOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW1wYWxpbmdTaG90czsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuICAgICAgICAvKiogTU9ESUYgMC44LnggKiovXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgIGZvcm11bGE6IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICB0b3RhbDogcm9sbC50b3RhbCxcbiAgICAgICAgICBkaWU6IGNyaXRpY2FsRGFtYWdlRGllLFxuICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgIH1cblxuICAgICAgbGV0IHRhcmdldE5hbWUgPSAnZHVtbXknXG4gICAgICBsZXQgdGFyZ2V0ID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoaC5yb2xsLnRhcmdldEtleSlcbiAgICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0YXJnZXQpIHRhcmdldE5hbWUgPSB0YXJnZXQubmFtZVxuXG4gICAgICB0aGlzLmRhbWFnZS5wdXNoKHtcbiAgICAgICAgdGFyZ2V0S2V5OiBoLnJvbGwudGFyZ2V0S2V5LFxuICAgICAgICB0YXJnZXROYW1lOiB0YXJnZXROYW1lLFxuICAgICAgICByb2xsczogZGFtYWdlUm9sbHMsXG4gICAgICAgIHRvdGFsOiB0b3RhbCxcbiAgICAgICAgY3JpdGljYWw6IGNyaXRpY2FsLFxuICAgICAgICBkZWFsdDogZmFsc2UsXG4gICAgICAgIHJlc3VsdFN0cmluZzogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5yYW5nZUNvbWJhdERhbWFnZScsIHtcbiAgICAgICAgICBuYW1lOiB0YXJnZXROYW1lLFxuICAgICAgICAgIHRvdGFsOiB0b3RhbFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmRhbWFnZVJvbGxlZCA9IHRoaXMuZGFtYWdlLmxlbmd0aCAhPT0gMFxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAoKSB7XG4gICAgZm9yIChsZXQgZEluZGV4ID0gMDsgZEluZGV4IDwgdGhpcy5kYW1hZ2UubGVuZ3RoOyBkSW5kZXgrKykge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhbWFnZVtkSW5kZXhdLnRhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9UYXJnZXRUb0RhbWFnZScpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuID0gMFxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgPSAwXG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IHJJbmRleCA9IDA7XG4gICAgICAgICAgckluZGV4IDwgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xscy5sZW5ndGg7XG4gICAgICAgICAgckluZGV4KytcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgZGVhbHRBbW91bnQgPSBhd2FpdCBhY3Rvci5kZWFsRGFtYWdlKFxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbiArPSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50YWtlbiA9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLmFic29yYmVkID1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkICs9XG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0uZGVhbHQgPSB0cnVlXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5yYW5nZUNvbWJhdERhbWFnZUFybW9yJyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRhcmdldE5hbWUsXG4gICAgICAgICAgICB0b3RhbDogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuLFxuICAgICAgICAgICAgYXJtb3I6IHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRhbWFnZURlYWx0ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3UmFuZ2VUYXJnZXQge1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuYmFzZVJhbmdlID0gdHJ1ZVxuICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcbiAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5pbk1lbGVlID0gZmFsc2VcbiAgfVxuXG4gIGdldCBiaWcgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2JpZykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5idWlsZCkgdGhpcy5fYmlnID0gdGhpcy5hY3Rvci5idWlsZCA+PSA0XG4gICAgICBlbHNlIHRoaXMuX2JpZyA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9iaWdcbiAgfVxuXG4gIHNldCBiaWcgKGIpIHtcbiAgICB0aGlzLl9iaWcgPSBiXG4gIH1cblxuICBnZXQgc21hbGwgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3NtYWxsKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9zbWFsbCA9IHRoaXMuYWN0b3IuYnVpbGQgPD0gLTJcbiAgICAgIGVsc2UgdGhpcy5fc21hbGwgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc21hbGxcbiAgfVxuXG4gIHNldCBzbWFsbCAoYikge1xuICAgIHRoaXMuX3NtYWxsID0gYlxuICB9XG5cbiAgZ2V0IG5vcm1hbCAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmJpZyAmJiAhdGhpcy5zbWFsbFxuICB9XG5cbiAgc2V0IG5vcm1hbCAoYikge1xuICAgIHRoaXMuX2JpZyA9IGZhbHNlXG4gICAgdGhpcy5fc21hbGwgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzRmFzdCAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHJldHVybiB0aGlzLmFjdG9yLm1vdiA+PSA4XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgZmFzdCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fZmFzdCkge1xuICAgICAgLy8gaWYoIHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5tb3YpIHRoaXMuX2Zhc3QgPSB0aGlzLmFjdG9yLm1vdiA+PSA4O1xuICAgICAgLy8gZWxzZSB0aGlzLl9mYXN0ID0gZmFsc2U7XG4gICAgICB0aGlzLl9mYXN0ID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2Zhc3RcbiAgfVxuXG4gIHNldCBmYXN0IChiKSB7XG4gICAgdGhpcy5fZmFzdCA9IGJcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkgJiYgIXRoaXMuX2FjdG9yKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikgcmV0dXJuIHRoaXMudG9rZW4ubmFtZVxuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuICdEdW1teSdcbiAgfVxuXG4gIGdldCBpbWcgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5kYXRhLmltZ1xuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5kYXRhLmltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90b2tlbiAmJiB0aGlzLmFjdG9yS2V5KSB7XG4gICAgICB0aGlzLl90b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90b2tlblxuICB9XG5cbiAgZ2V0IHNpemVUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldFRpdGxlJylcbiAgICB9XG4gICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLlNtYWxsVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXRUaXRsZScpXG4gIH1cblxuICBnZXQgc2l6ZUxhYmVsICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldCcpXG4gICAgaWYgKHRoaXMuc21hbGwpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuY29tYmF0Q2FyZC5TbWFsbFRhcmdldCcpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0JylcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAodGhpcy5iYXNlUmFuZ2UgfHwgdGhpcy5wb2ludEJsYW5rUmFuZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMubG9uZ1JhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZXh0cmVtZVJhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICBsZXQgbW9kaWZpZXIgPSAwXG4gICAgaWYgKHRoaXMuY292ZXIpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5wb2ludEJsYW5rUmFuZ2UpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5mYXN0KSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc21hbGwpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5iaWcpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5pbk1lbGVlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBtb2RpZmllcisrXG4gICAgcmV0dXJuIG1vZGlmaWVyXG4gIH1cblxuICBzZXQgdG9rZW4gKHQpIHtcbiAgICB0aGlzLl90b2tlbiA9IHRcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBlbGVtZW50KVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyBjaGFuZ2VEaXNwbGF5ZWRUYXJnZXQgKGV2ZW50KSB7XG4gICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LXNlbGVjdG9yJykpIHJldHVybiBudWxsXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFyZ2V0cyA9IHRhcmdldFNlbGVjdG9yLmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBjb25zdCB0YXJnZXRMaXN0ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICByZXR1cm4gdGFyZ2V0TGlzdFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgZWxlbWVudClcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWcpIHtcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnYmFzZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2xvbmdSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdleHRyZW1lUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAncG9pbnRCbGFua1JhbmdlJ1xuICAgICkge1xuICAgICAgdGhpcy5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnc2l6ZScpIHtcbiAgICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5iaWcpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gZmFsc2VcbiAgICAgIH0gZWxzZSB0aGlzLnNtYWxsID0gdHJ1ZVxuICAgIH0gZWxzZSB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICBpZiAoZmxhZyA9PT0gJ2Zhc3QnICYmIHRoaXMuZmFzdCAmJiAhdGhpcy5pc0Zhc3QpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XYXJuRmFzdFRhcmdldFdpdGhXcm9uZ01PVicsIHtcbiAgICAgICAgICBtb3Y6IHRoaXMuYWN0b3IubW92XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRpZmZPYmplY3QsIGV4cGFuZE9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXG4gIH1cblxuICBnZXQgb3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgIGNvbnN0IGNoYXREYXRhID0gbWVyZ2VPYmplY3QoXG4gICAgICB7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcHV0ZSkgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgaWYgKHRoaXMuY2xvc2VkKSBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcblxuICAgICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmludGVyYWN0aXZlLWNhcmQgLmljLXJhZGlvLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1zd2l0Y2gnLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5zdWJtaXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgJ2lucHV0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCBidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCAnZm9ybScsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYmluZExpc3RlbmVycyAoaHRtbCkge1xuICAgIGNvbnN0IGh0bWxNZXNzYWdlRWxlbWVudCA9IGh0bWxbMF1cbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQpIHJldHVyblxuICAgIGlmIChcbiAgICAgICFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhnYW1lLkNvQzcuY2FyZHMpLmluY2x1ZGVzKFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgSW50ZXJhY3RpdmVDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBjb25zdCB0eXBlZENhcmQgPSBPYmplY3QuYXNzaWduKFxuICAgICAgbmV3IGdhbWUuQ29DNy5jYXJkc1todG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NdKCksXG4gICAgICBjYXJkXG4gICAgKVxuICAgIHR5cGVkQ2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIHR5cGVkQ2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCB0eXBlXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3NpZ25PYmplY3QgKCkge31cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgLy9Bdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKHRoaXNbYWN0aW9uXSkgdGhpc1thY3Rpb25dKHsgZXZlbnQ6IGV2ZW50LCB1cGRhdGU6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxuICAgKi9cbiAgX29uS2V5IChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIHJldHVybiBldmVudC5rZXkgIT09ICdFbnRlcidcbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICAgIGRhdGEgPSBkaWZmT2JqZWN0KHRoaXMsIGV4cGFuZE9iamVjdChkYXRhKSlcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlXG4gICAgICAgIHVwZGF0ZXMgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVzXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZS5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsYXNzZXM6IFsnaW50ZXJhY3RpdmUtY2FyZCddLFxuICAgICAgZXhjbHVkZTogWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJywgJ19tZXNzYWdlJywgJ19odG1sUm9sbCddLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xuICAgIH1cbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgYnV0dG9ucy5mb3JFYWNoKGIgPT4gdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpKVxuICAgICAgdGhpcy5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmIChjYXJkKSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxNb2RlKSByZXR1cm4gbnVsbFxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0ZWRUb2tlbnMgKCkge1xuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cbiAgICByZXR1cm4gdGhpcy50YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IGlzVGFyZ2V0T3duZXIgKCkge1xuICAgIHJldHVybiB0aGlzLnRhcmdldC5pc093bmVyXG4gIH1cblxuICBnZXQgaXNHTSAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi4vaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIERhbWFnZUNhcmQgZXh0ZW5kcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBleGNsdWRlOiBbXG4gICAgICAgICdfdGFyZ2V0VG9rZW4nLFxuICAgICAgICAnX3RhcmdldEFjdG9yJyxcbiAgICAgICAgJ19odG1sUm9sbCcsXG4gICAgICAgICdfaHRtbElubGluZVJvbGwnXG4gICAgICBdLmNvbmNhdChzdXBlci5kZWZhdWx0T3B0aW9ucy5leGNsdWRlKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2RhbWFnZS5odG1sJ1xuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICBhc3luYyBhc3NpZ25PYmplY3QgKCkge1xuICAgIGlmICh0aGlzLmRhbWFnZVJvbGwgJiYgdGhpcy5kYW1hZ2VSb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICB0aGlzLmRhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMuZGFtYWdlUm9sbClcbiAgICB9XG4gIH1cblxuICBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgc3VwZXIuX29uQnV0dG9uKGV2ZW50KVxuICB9XG5cbiAgZ2V0IGNyaXRpY2FsICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNyaXRpY2FsXG4gIH1cblxuICBzZXQgY3JpdGljYWwgKHgpIHtcbiAgICB0aGlzLl9vcHRpb25zLmNyaXRpY2FsID0geFxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgaWYgKHRoaXMuX2ltcGFsZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICByZXR1cm4gdGhpcy5faW1wYWxlXG4gIH1cblxuICBzZXQgaW1wYWxlICh4KSB7XG4gICAgdGhpcy5faW1wYWxlID0geFxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhbWFnZUZvcm11bGEgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5kYW1hZ2VGb3JtdWxhKVxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlTnVtYmVyICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKVxuICB9XG5cbiAgZ2V0IGlzQXJtb3JGb3J1bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5hcm1vciAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5hcm1vcilcbiAgfVxuXG4gIGdldCB0b3RhbERhbWFnZVN0cmluZyAoKSB7XG4gICAgbGV0IGRhbWFnZSA9IE51bWJlcihcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICApXG4gICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSB8fCBOdW1iZXIodGhpcy5hcm1vcikgPiAwKSB7XG4gICAgICAgIGRhbWFnZSA9IGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgIGlmIChkYW1hZ2UgPD0gMCkge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGFtYWdlXG4gIH1cblxuICBnZXQgbm9EYW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgY29uc3QgZGFtYWdlID0gdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICAgIHJldHVybiAhIShkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcikgPD0gMClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhIShkYW1hZ2UgPD0gMClcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5yb2xsICYmICF0aGlzLmlzRGFtYWdlTnVtYmVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgfHxcbiAgICAgICh0aGlzLnJvbGwgJiYgdGhpcy5yb2xsLnRvdGFsICE9IG51bGwpIHx8XG4gICAgICB0aGlzLmhhcmRyb2xsZWRcbiAgICApIHtcbiAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMuZGFtYWdlSW5mbGljdGVkICYmICF0aGlzLm5vRGFtYWdlKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucm9sbGVkICYmIHRoaXMucm9sbCkge1xuICAgICAgaWYgKHRoaXMucm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICB0aGlzLnJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMucm9sbClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMucm9sbClcbiAgICAgIHRoaXMuX2h0bWxJbmxpbmVSb2xsID0gYS5vdXRlckhUTUxcbiAgICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsLnJlbmRlcigpXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgdGhpcy5yb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5kYW1hZ2VGb3JtdWxhIHx8ICcwJykuZXZhbHVhdGUoe1xuICAgICAgYXN5bmM6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMucm9sbClcbiAgICB0aGlzLmhhcmRyb2xsZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsQXJtb3IgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuYXJtb3IpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB0aGlzLmFybW9yID0gcm9sbC50b3RhbFxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGlmIChpc05hTihOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZykpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFcnJvciBldmFsdWF0aW5nIGRhbWFnZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0cyA9IFtdXG4gICAgY29uc3QgdGFyZ2V0TmFtZSA9IFtdXG4gICAgY29uc3Qgc2VsZWN0ZWRQbGF5ZXJzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XG4gICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICB9KVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZWxlY3RlZFBsYXllcnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5pZCkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgdGFyZ2V0TmFtZS5wdXNoKHNlbGVjdGVkUGxheWVyc1tpbmRleF0ubmFtZSlcbiAgICAgIHRhcmdldHMucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdKVxuICAgIH1cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdGl0bGU6ICcgJyxcbiAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGVhbERhbWFnZScsIHtcbiAgICAgICAgZGFtYWdlOiB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nLFxuICAgICAgICB0YXJnZXQ6IHRhcmdldE5hbWVcbiAgICAgIH0pLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICBvbmU6IHtcbiAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb25maXJtRGFtYWdlKHRhcmdldHMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0d286IHtcbiAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7fVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVmYXVsdDogJ3R3bydcbiAgICB9XG4gICAgaWYgKHRhcmdldE5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjb25maXJtRGFtYWdlICh0YXJnZXRzKSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRhcmdldHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBhd2FpdCB0YXJnZXRzW2luZGV4XS5kZWFsRGFtYWdlKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICBjb250ZW50OiBgRGFtYWdlICR7dGFyZ2V0c1tpbmRleF0ubmFtZX0gJHt0aGlzLnRvdGFsRGFtYWdlU3RyaW5nfUhQYFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGlmICh0aGlzLmlzQXJtb3JGb3J1bGEpIGF3YWl0IHRoaXMucm9sbEFybW9yKClcbiAgICBsZXQgZGFtYWdlID0gdGhpcy50b3RhbERhbWFnZVN0cmluZ1xuICAgIGlmIChpc05hTihOdW1iZXIoZGFtYWdlKSkpIHtcbiAgICAgIGlmIChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJykgPT09IGRhbWFnZSkge1xuICAgICAgICBkYW1hZ2UgPSAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFcnJvciBldmFsdWF0aW5nIGRhbWFnZScpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRBY3Rvcikge1xuICAgICAgYXdhaXQgdGhpcy50YXJnZXRBY3Rvci5kZWFsRGFtYWdlKE51bWJlcihkYW1hZ2UpLCB7XG4gICAgICAgIGlnbm9yZUFybW9yOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmRhbWFnZUluZmxpY3RlZCA9IHRydWVcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGdldCByYW5nZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZSB8fCAnbm9ybWFsJ1xuICB9XG5cbiAgc2V0IHJhbmdlICh4KSB7XG4gICAgY29uc3QgcmFuZ2VzID0gWydub3JtYWwnLCAnbG9uZycsICdleHRyZW1lJ11cbiAgICBpZiAoIXJhbmdlcy5pbmNsdWVzKHgudG9Mb3dlckNhc2UoKSkpIHJldHVyblxuICAgIHRoaXMuX29wdGlvbnMucmFuZ2UgPSB4XG4gIH1cblxuICBnZXQgZGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnJhbmdlXG4gICAgbGV0IGZvcm11bGEgPSB0aGlzLndlYXBvbj8uZGF0YT8uZGF0YT8ucmFuZ2VbcmFuZ2VdPy5kYW1hZ2VcbiAgICBsZXQgZGIgPSB0aGlzLmFjdG9yLmRiXG4gICAgaWYgKGRiID09PSBudWxsKSB7XG4gICAgICBkYiA9ICcnXG4gICAgfSBlbHNlIHtcbiAgICAgIGRiID0gYCR7ZGJ9YFxuICAgIH1cblxuICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcbiAgICBpZiAodGhpcy53ZWFwb24uZGF0YS5kYXRhLnByb3BlcnRpZXMuYWhkYikgZm9ybXVsYSA9IGZvcm11bGEgKyBkYiArICcvMidcblxuICAgIGlmIChmb3JtdWxhKSB7XG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChmb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICBsZXQgcm9sbFN0cmluZ1xuICAgICAgaWYgKHRoaXMuY3JpdGljYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1wYWxlKSB7XG4gICAgICAgICAgcm9sbFN0cmluZyA9IGZvcm11bGEgKyAnKycgKyBtYXhEYW1hZ2VcbiAgICAgICAgICByZXR1cm4gcm9sbFN0cmluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhEYW1hZ2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFybW9yICgpIHtcbiAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLl9hcm1vciAmJiB0aGlzLl9hcm1vciAhPT0gJycpIHJldHVybiB0aGlzLl9hcm1vclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNldCBhcm1vciAoeCkge1xuICAgIHRoaXMuX2FybW9yID0geFxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxDYXJkIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucm9sbHMgPSBbXVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNhcmQucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICBjYXJkLnJvbGxzW2luZGV4XSA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBjYXJkLnJvbGxzW2luZGV4XSlcbiAgICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdLnJvbGxlZCkge1xuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBzcGFuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmIChzcGFuICYmIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBzcGFuLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IGZsYWcgPSBzcGFuLmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gc3Bhbi5jbG9zZXN0KCcudG9nZ2xlJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgICAgYnV0dG9ucy5mb3JFYWNoKGIgPT4gY2FyZC51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpKVxuICAgICAgY2FyZC5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRpc3BhdGNoIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBsZXQgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJykgJiZcbiAgICAgICAgICBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnc3RhdGUnKSAhPT0gJ3Jlc29sdmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS5kYXRhLnRpbWVzdGFtcClcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCB0aW1lRGlmZlNlYyA9IChub3cgLSB0aW1lc3RhbXApIC8gMTAwMFxuICAgICAgICBpZiAoMjQgKiA2MCAqIDYwIDwgdGltZURpZmZTZWMpIHtcbiAgICAgICAgICBhd2FpdCBtZXNzYWdlc1swXS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcbiAgICAgICAgICBtZXNzYWdlcyA9IFtdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNhcmRcbiAgICAgIGlmICghbWVzc2FnZXMubGVuZ3RoKSBjYXJkID0gbmV3IHRoaXMoKVxuICAgICAgZWxzZSBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlc1swXSlcbiAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgIH0gZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpXG4gICAgaHRtbENhcmRFbGVtZW50WzBdLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5jb25maWcudGl0bGUpLFxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50WzBdLm91dGVySFRNTCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgICAgIHN0YXRlOiAnaW5pdGlhdGVkJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfXydcbiAgICB9XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IHdpbm5lcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIud2lubmVyKVxuICB9XG5cbiAgZ2V0IHdpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGgpIHJldHVybiB0aGlzLndpbm5lcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbG9vc2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gIXIud2lubmVyKVxuICB9XG5cbiAgZ2V0IGxvb3NlciAoKSB7XG4gICAgaWYgKHRoaXMubG9vc2Vycy5sZW5ndGgpIHJldHVybiB0aGlzLmxvb3NlcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgaGFzV2lubmVyICgpIHtcbiAgICBpZiAodGhpcy53aW5uZXJzLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNHTSAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5jb25maWcuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9kYW1hZ2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgT3Bwb3NlZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gc3VwZXIuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBhJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYnV0dG9uJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdvcHBvc2VkQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IGF0dGFja2VyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGF0dGFja2VyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ID09PSAwIHx8IHIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChhdHRhY2tlci5sZW5ndGgpIHJldHVybiBhdHRhY2tlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVmZW5kZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggIT09IDAgfHwgIXIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChkZWZlbmRlci5sZW5ndGgpIHJldHVybiBkZWZlbmRlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJJc0RvZGdpbmcgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LnNraWxsPy5uYW1lXG4gICAgKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZUF0dGFja2VyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hYVxuICB9XG5cbiAgZ2V0IHdpbm5lclJvbGxzRGFtYWdlICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5yb2xscy5sZW5ndGggPj0gMiAmJlxuICAgICAgdGhpcy5oYXNXaW5uZXIgJiZcbiAgICAgIHRoaXMud2lubmVyPy5pdGVtPy50eXBlID09PSAnd2VhcG9uJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXQgYWR2YW50YWdlQXR0YWNrZXIgKHgpIHtcbiAgICB0aGlzLl9hYSA9IHRydWVcbiAgICB0aGlzLl9hZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlRGVmZW5kZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgIHJldHVybiB0aGlzLl9hZFxuICB9XG5cbiAgc2V0IGFkdmFudGFnZURlZmVuZGVyICh4KSB7XG4gICAgdGhpcy5fYWQgPSB0cnVlXG4gICAgdGhpcy5fYWEgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVGllICgpIHtcbiAgICByZXR1cm4gdGhpcy53aW5uZXJDb3VudCA+IDFcbiAgfVxuXG4gIGdldCBuZWVkc1RpZUJyZWFrZXIgKCkge1xuICAgIGlmICghdGhpcy5jb21iYXQpIHJldHVybiBmYWxzZVxuICAgIGlmIChcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwuc3VjY2Vzc0xldmVsID09PSB0aGlzLmRlZmVuZGVyUm9sbC5zdWNjZXNzTGV2ZWxcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHdpbm5lckNvdW50ICgpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgdGhpcy5yb2xscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgaWYgKHIud2lubmVyKSBjb3VudCArPSAxXG4gICAgfSlcbiAgICByZXR1cm4gY291bnRcbiAgfVxuXG4gIGdldCBpc0F0dGFja01hbmV1dmVyICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgICghdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0gfHxcbiAgICAgICAgdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/Lm1udnIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByZXN1bHRUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQgJiYgdGhpcy5hdHRhY2tlclJvbGwgJiYgdGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgIGlmICghdGhpcy5hdHRhY2tlclJvbGwud2lubmVyICYmICF0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZlbmRlcklzRG9kZ2luZykge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgaWYgKCF0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNvbWJhdCA9IGRhdGEuY29tYmF0IHx8IHVuZGVmaW5lZFxuICAgICAgICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgICAgICAgZGF0YS5yb2xsLmF0dGFja2VyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnJvbGwuaW5kZXggPSB0aGlzLnJvbGxzLmxlbmd0aFxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOlxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgcm9sbCAocmFuaykge1xuICAgIGF3YWl0IHRoaXMucm9sbHNbcmFua10uX3BlcmZvcm0oKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICByYW5rOiByYW5rLFxuICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgIH1cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSB0aGlzLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndG9nZ2xlLWNvbWJhdCc6IHtcbiAgICAgICAgY2FyZC5jb21iYXQgPSAhY2FyZC5jb21iYXRcbiAgICAgICAgLy8gaWYoICFjYXJkLmFkdmFudGFnZUF0dGFja2VyICYmICFjYXJkLmFkdmFudGFnZURlZmVuZGVyKSBjYXJkLmFkdmFudGFnZUF0dGFja2VyID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgICAgaWYgKCFjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5KSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSA9IGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FyZC5yb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWRhbWFnZSc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGNhcmQud2lubmVyLmlzRXh0cmVtZVN1Y2Nlc3MsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gY2FyZC53aW5uZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gY2FyZC5sb29zZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gY2FyZC53aW5uZXIuaXRlbUlkXG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbms6IHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IGNhcmQucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGUgKHJhbmsgPSB1bmRlZmluZWQpIHtcbiAgICBpZiAoIXJhbmspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkZWxldGUgdGhpcy5yb2xsc1tpXS5tYW5ldXZlclxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgICAgICAoIXRoaXMucm9sbHNbaV0uaXRlbSB8fFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5tbnZyKSAmJlxuICAgICAgICAgICgodGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0/LnNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgICAgICF0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5tYW5ldXZlciA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW3JhbmtdLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW3JhbmtdLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbcmFua10uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuICh0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJykgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbiBhY3RvciBzZXQgYW5kIGlmIHRoZXJlJ3Mgb25lIGFuZCBpdCBkb2VzbnQgZXhpc3QgcmVtb3ZlIGhpbS5cbiAgICB9KVxuXG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAvLyBTb3J0IGNvbWJhdCByb2xscyBieSBpbmRleC5cbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5pbmRleCA+IGIuaW5kZXgpIHJldHVybiAxXG4gICAgICAgIGlmIChhLmluZGV4IDwgYi5pbmRleCkgcmV0dXJuIC0xXG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICAvLyBDb21iYXQgcm9sbCBpbmNsdWRlcyBvbmx5IDIgcGVyc29ucywgcmVtb3ZlIHRoZSByZXN0LlxuICAgICAgaWYgKHRoaXMucm9sbHMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLnJvbGxzID0gW3RoaXMucm9sbHNbMF0sIHRoaXMucm9sbHNbMV1dXG4gICAgICAgIHRoaXMucm9sbHMuZm9yRWFjaChyID0+IHtcbiAgICAgICAgICBkZWxldGUgci53aW5uZXJcbiAgICAgICAgICBkZWxldGUgci50aWVcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QgcGVyc29uIGFkZGVkIGlzIHRoZSBhdHRhY2tlci5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdKSB0aGlzLnJvbGxzWzBdLmF0dGFja2VyID0gdHJ1ZVxuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXT8ucm9sbGVkICYmIHRoaXMucm9sbHNbMV0/LnJvbGxlZCkge1xuICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5wYXNzZWQgfHwgdGhpcy5yb2xsc1sxXS5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWR2YW50YWdlQXR0YWNrZXIpIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgZWxzZSB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAtMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmIGIucm9sbGVkKSByZXR1cm4gMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIDBcbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsID4gYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA8IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gMVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKSkge1xuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0ID4gYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA8IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA+IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPCBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMud2luQ291bnQgPSAwXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSAmJiB0aGlzLnJvbGxzWzBdLnJvbGxlZCAmJiAhdGhpcy5yb2xsc1swXS5mYWlsZWQpIHtcbiAgICAgICAgdGhpcy53aW5Db3VudCA9IDFcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5yb2xsZWQgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID09PSB0aGlzLnJvbGxzW2ldLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpXG4gICAgICAgICAgICAgID8gdGhpcy5yb2xsc1swXS5tb2RpZmllZFJlc3VsdCA9PT0gdGhpcy5yb2xsc1tpXS5tb2RpZmllZFJlc3VsdFxuICAgICAgICAgICAgICA6IHRoaXMucm9sbHNbMF0ucmF3VmFsdWUgPT09IHRoaXMucm9sbHNbaV0ucmF3VmFsdWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLndpbkNvdW50ID0gdGhpcy53aW5Db3VudCArIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucm9sbHNbaV0ud2lubmVyID0gaSA8IHRoaXMud2luQ291bnRcbiAgICAgICAgdGhpcy5yb2xsc1tpXS50aWUgPSB0aGlzLnJvbGxzW2ldLndpbm5lciAmJiB0aGlzLndpbkNvdW50ID4gMVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBdWRpb0hlbHBlciwgQ09ORklHLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvbWJpbmVkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gaHRtbC5maW5kKCcucm9sbC1jYXJkIGEnKS5jbGljayhhc3luYyAoZXZlbnQpID0+IENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrKCBldmVudCkpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYScsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYnV0dG9uJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0Q29uZmlnLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmh0bWwnLFxuICAgICAgdHlwZTogJ2NvbWJpbmVkQ2FyZCcsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29tYmluZWRSb2xsQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcbiAgfVxuXG4gIGdldCBzdWNjZXNzQ291bnQgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgbGV0IGNvdW50ID0gMFxuICAgICAgdGhpcy5yb2xscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgICBpZiAoci5wYXNzZWQpIGNvdW50ICs9IDFcbiAgICAgIH0pXG4gICAgICByZXR1cm4gY291bnRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1haW5BY3RvcktleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHNbMF0/LmFjdG9yPy5hY3RvcktleSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBzdWNjZXNzICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2Vzc0NvdW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmFueSkge1xuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5hbGwpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gdGhpcy5yb2xscy5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZhaWx1cmUgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiAhdGhpcy5zdWNjZXNzXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oeyByb2xsOiB0aGlzLl9yb2xsLCBzaWxlbnQ6IHRydWUgfSlcbiAgICByZXR1cm4gYXdhaXQgY2hlY2suZ2V0SHRtbFJvbGwoeyBoaWRlU3VjY2VzczogdHJ1ZSB9KVxuICB9XG5cbiAgcHJvY2VzcyAoZGF0YSkge1xuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ25ldyc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6IHtcbiAgICAgICAgdGhpcy51cGRhdGVSb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Fzc2lnblJvbGwnOiB7XG4gICAgICAgIHRoaXMuYXNzaWduUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyBhc3NpZ25Sb2xsIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLl9yb2xsID0gZGF0YS5yb2xsXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGRhdGEub3B0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jYXJkJzoge1xuICAgICAgICBjb25zdCByb2xsID0ge31cblxuICAgICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICBkaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyOlxuICAgICAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0LFxuICAgICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6XG4gICAgICAgICAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICAgIHJvbGwuZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICAgIHJvbGwuZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICAgIHJvbGwuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICdhc3NpZ25Sb2xsJyxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIG9wdGlvbnM6IHJvbGxcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnJvbGwgPSBhd2FpdCBDb0M3RGljZS5yb2xsKHJvbGwubW9kaWZpZXIgfHwgMClcbiAgICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0pXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rOiByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGwpIHJldHVyblxuICAgIHRoaXMucm9sbHMuZm9yRWFjaChhc3luYyByID0+IHtcbiAgICAgIGlmICghci5yb2xsZWQpIHtcbiAgICAgICAgci5tb2RpZmllciA9IHRoaXMub3B0aW9ucy5tb2RpZmllciB8fCAwXG4gICAgICAgIHIuZGlmZmljdWx0eSA9XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgIHIuZmxhdERpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIHx8IDBcbiAgICAgICAgYXdhaXQgci5fcGVyZm9ybSh7IHJvbGw6IHRoaXMuX3JvbGwsIHNpbGVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuICh0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJykgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbiBhY3RvciBzZXQgYW5kIGlmIHRoZXJlJ3Mgb25lIGFuZCBpdCBkb2VzbnQgZXhpc3QgcmVtb3ZlIGhpbS5cbiAgICB9KVxuXG4gICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLmdldEh0bWxSb2xsKClcbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGdhbWUsIFRva2VuLCB0b2tlbkRhdGEsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcblxuY29uc3QgQ0hBVF9DT0M3X01FU1NBR0UgPSB7XG4gIEZBS0VST0xMOlxuICAgICc8ZGl2IGNsYXNzPVwiZGljZS1yb2xsXCI+PGRpdiBjbGFzcz1cImRpY2UtcmVzdWx0XCI+PGRpdiBjbGFzcz1cImRpY2UtZm9ybXVsYVwiPj8/PzwvZGl2PjxoNCBjbGFzcz1cImRpY2UtdG90YWxcIj4/PC9oND48L2Rpdj48L2Rpdj4nXG59XG5leHBvcnQgY2xhc3MgQ29DN0NoYXQge1xuICAvLyBzdGF0aWMgY3JlYXRlQ2hhdE1lc3NhZ2VIb29rKGNoYXRNZXNzYWdlLCBvcHRpb25zLCB1c2VyKXtcbiAgLy8gfVxuXG4gIHN0YXRpYyByZW5kZXJDaGF0TWVzc2FnZUhvb2sgKGNoYXRNZXNzYWdlLCBodG1sKSB7XG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnR01TZWxmUm9sbCcpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwiZmxhdm9yLXRleHRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlJvbGxTZWNyZXREaWNlJ1xuICAgICAgICAgICl9PC9zcGFuPmBcbiAgICAgICAgKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPiR7Q0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTEx9PC9kaXY+YFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnZmFrZVJvbGwnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5LZWVwZXJTZW50RGVjb3knKSlcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxuICAgICAgd2hpc3BlcjogZ2FtZS51c2Vycy5wbGF5ZXJzLFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVIsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgR01TZWxmUm9sbDogZmFsc2UsXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcbiAgICAgICAgICBmYWtlUm9sbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogQ0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTExcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICAvLyBUT0RPIHJlbXBsYWNlciBsZXMgZ2V0RWxlbWVudHNCeXh4eHggcGFyIHF1ZXJ5U2VsZWN0b3JcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBJbml0IHNvY2tldHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIHJlYWR5ICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQucmVhZHknKTtcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcbiAgfVxuXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcbiAgLy8gIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5vbk1lc3NhZ2UnKTtcbiAgLy8gIGNvbnNvbGUubG9nKGBtZXNzYWdlIHJlY2VpdmVkIHNlbmQmZXIgOiR7ZGF0YS51c2VyfSBtZXNzYWdlIHR5cGUgOiAke2RhdGEuYWN0aW9ufSBmb3IgbWVzc2FnZSA6JHtkYXRhLm1lc3NhZ2VJZH1gKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbi5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLXRpdGxlJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yYWRpby1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5wYW5lbC1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5zaW1wbGUtZmxhZycsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy52b2xsZXktc2l6ZScsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVm9sbGV5U2l6ZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRyb3Bkb3duLWVsZW1lbnQnLFxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuc2ltcGxlLXRvZ2dsZScsIENvQzdDaGF0Ll9vblRvZ2dsZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy50YXJnZXQtc2VsZWN0b3InLCBDb0M3Q2hhdC5fb25UYXJnZXRTZWxlY3QuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICcuY29jNy1saW5rJywgYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2RyYWdzdGFydCcsICdhLmNvYzctbGluaycsIENvQzdQYXJzZXIuX29uRHJhZ0NvQzdMaW5rLmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdjbGljaycsICdjb2M3LWlubGluZS1yZXN1bHQnLCBDb0M3Q2hhdC5fb25JbmxpbmUuYmluZCh0aGlzKSlcblxuICAgIC8vIFJvbGxDYXJkLmJpbmRMaXN0ZXJuZXJzKCBodG1sKTtcbiAgICBPcHBvc2VkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gICAgQ29tYmluZWRDaGVja0NhcmQuYmluZExpc3Rlcm5lcnMoaHRtbClcbiAgfVxuXG4gIHN0YXRpYyBfb25PcGVuQWN0b3IgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGFjdG9yS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgaWYgKGFjdG9yS2V5KSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3Rvci5pc093bmVyKSBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25VcGRhdGVDaGF0TWVzc2FnZSAoY2hhdE1lc3NhZ2UpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICAvLyBpZiggY2hhdE1lc3NhZ2UuZ2V0RmxhZyggJ0NvQzcnLCAncmV2ZWxlZCcpKXtcbiAgICAvLyB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNoYXRNZXNzYWdlLmRhdGEudHlwZSA9PT0gMCkge1xuICAgICAgY29uc3QgY2FyZCA9ICQoY2hhdE1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgIGlmIChjYXJkLmRhdGFzZXQucmVzb2x2ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQudGFyZ2V0Q2FyZCkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGluaXRpYXRvci50YXJnZXRDYXJkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKHRhcmdldC5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChpbml0aWF0b3IucmVzb2x1dGlvbkNhcmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICBpbml0aWF0b3IucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChjaGF0TWVzc2FnZS5pZClcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5tZWxlZUluaXRpYXRvci5jaGVja1JldmVhbGVkKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRhcmdldC5tZWxlZUluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlbmRlck1lc3NhZ2VIb29rIChtZXNzYWdlLCBodG1sKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgSW50ZXJhY3RpdmVDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAobWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnKSkge1xuICAgICAgaHRtbC5maW5kKCcuZGljZS1yb2xsJykucmVtb3ZlQ2xhc3MoJ2dtLXZpc2libGUtb25seScpXG4gICAgICBodG1sWzBdLmRhdGFzZXQuY2hlY2tSZXZlYWxlZCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2hvd2luZyBkcm9wZG93biBzZWxlY3Rpb25cbiAgICBodG1sLmZpbmQoJy5kcm9wYnRuJykuY2xpY2soZXZlbnQgPT5cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgLmNsb3Nlc3QoJy5kcm9wZG93bicpXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICApXG5cbiAgICAvLyBjb25zb2xlLmxvZygnKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLS0+Q29DN0NoYXQubWVzc2FnZUxpc3RlbmVycyBtZXNzYWdlIDonICsgbWVzc2FnZS5pZCk7XG4gICAgLy8gbWVzc2FnZS5kYXRhLmNvbnRlbnQgPSBcIlwiO1xuICAgIC8vIGRhdGEubWVzc2FnZS5jb250ZW50ID0gXCJcIjtcblxuICAgIC8vIFdoZW4gYSBuZXcgY2FyZCBpcyBwdWJsaXNoZWQsIGNoZWNrIHdldGhlciBpdCdzIGEgcm9sbCB0aGF0IG1vZGlmaWVzIGFuIG90aGVyIGNhcmQuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBjYXJkID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY29jNy5jaGF0LWNhcmQnKVxuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSAmJlxuICAgICAgICAgICEoY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9PT0gJ3RydWUnKSAmJlxuICAgICAgICAgIGNhcmQuZGF0YXNldC5yZWZNZXNzYWdlSWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KGNhcmQpXG5cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgICAgICByb2xsLmRlZmVuZGFudElkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ2luaXRpYXRvcicpIHtcbiAgICAgICAgICAgIHJvbGwuaW5pdGlhdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICd0cnVlJ1xuXG4gICAgICAgICAgQ29DN0NoYXQudXBkYXRlQ29tYmF0Q2FyZFRhcmdldChyb2xsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck9ubHkgPSBodG1sLmZpbmQoJy50YXJnZXQtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHVzZXJPbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBjb25zdCBhY3RvcklkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0b3ItaWQnKVxuICAgICAgICBpZiAoYWN0b3JJZCkge1xuICAgICAgICAgIGlmIChnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkuaXNPd25lcikge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdtT25seSA9IGh0bWwuZmluZCgnLmdtLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBnbU9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcudXNlci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiB1c2VyVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3QgZ21WaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLmdtLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIGdtVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IG93bmVyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5vd25lci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lclZpc2libGVPbmx5KSB7XG4gICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLmRhdGFzZXQ/LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBzZWxmLlxuICAgICAgaWYgKCFhY3RvcikgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3Rvcih6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkgLy8gVHJ5IHdpdGggY2xvc2VzdCBjaGF0IGNhcmQuXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XG4gICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAvLyBpZiggIUNvQzdDaGF0LmlzQ2FyZE93bmVyKCB6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkpIHt6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fVxuICAgIH1cblxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8vIEdNIGNhbiBzZWUgZXZlcnl0aGluZ1xuICAgICAgY29uc3Qgb3duZXJPbmx5ID0gaHRtbC5maW5kKCcub3duZXItb25seScpXG4gICAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJPbmx5KSB7XG4gICAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5kYXRhc2V0Py5hY3RvcktleSkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgICB9XG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCAoIWFjdG9yICYmICFnYW1lLnVzZXIuaXNHTSkpIHtcbiAgICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICAgIH1cblxuICAgICAgY29uc3QgZ21TZWxlY3RPbmx5ID0gaHRtbC5maW5kKCcuZ20tc2VsZWN0LW9ubHknKVxuICAgICAgZm9yIChjb25zdCBzZWxlY3Qgb2YgZ21TZWxlY3RPbmx5KSB7XG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdpbmFjdGl2ZScpXG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdzaW1wbGUtZmxhZycpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBhY3Rpb25UeXBlU3RyaW5nICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxuICAgICAgbWFuZXV2ZXI6ICdDb0M3Lm1hbmV1dmVyJyxcbiAgICAgIGRvZGdpbmc6ICdDb0M3LmRvZGdlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KVxuICAgIGNvbnN0IHRhcmdldHNTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMtc2VsZWN0b3InKVxuICAgIHRhcmdldHNTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKS5mb3JFYWNoKGkgPT4ge1xuICAgICAgaS5zdHlsZS5ib3JkZXIgPSAnbm9uZSdcbiAgICB9KVxuICAgIHRhcmdldHNTZWxlY3RvclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWtleT1cIiR7aW5kZXh9XCJdYClcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpLmZvckVhY2godCA9PiB7XG4gICAgICB0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIHQuZGF0YXNldC5hY3RpdmUgPSAnZmFsc2UnXG4gICAgfSlcbiAgICBjb25zdCB0YXJnZXRUb0Rpc3BsYXkgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxuICAgIClcbiAgICB0YXJnZXRUb0Rpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcbiAgICAvLyBjb25zdCBjaGF0Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZC5yYW5nZScpO1xuICAgIC8vIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKCBjaGF0Q2FyZCk7XG4gIH1cblxuICBzdGF0aWMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICA7W10uZm9yRWFjaC5jYWxsKGRyb3BEb3duQm94ZXMsIGRwZG5Cb3ggPT5cbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIClcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuXG4gICAgLy8gY2xvc2UgZHJvcGRvd25cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG5cbiAgICAvLyBEaXNwbGF5IHRoZSByb2xsIGJ1dHRvblxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgSWQgLSBCdWlsZCBjYW4gYmUgcmV0cmlldmVkIGZyb20gdGhhdFxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIGl0ZW1cblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBJZFxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IGFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbU5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZVxuXG4gICAgLy8gUHV0IHNvbWUgdGV4dCBpbiB0aGUgYnV0dG9uXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25JbmxpbmUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2lubGluZS1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVG9nZ2xlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkID09PSAnJykge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb0RvZGdlU2tpbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgO1tdLmZvckVhY2guY2FsbChkcm9wRG93bkJveGVzLCBkcGRuQm94ID0+XG4gICAgICBkcGRuQm94LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICApXG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpIC8vIE5lZWQgdG8gdGVzdCBpZiBpdCdzIHJlYWxseSBhIGRvZGdlICEhIVxuXG4gICAgLy8gU2F2ZSBhY3Rpb24gZm9yIHRoZSByb2xsXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9ICdkb2RnaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcblxuICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWV9ICgke1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICB9JSlgXG4gIH1cblxuICBzdGF0aWMgX29uQ2hhdENhcmRSYWRpb1N3aXRjaCAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaCcpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvcHRpb25MaXN0ID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgICAncmFkaW8tc3dpdGNoJ1xuICAgIClcbiAgICBsZXQgaW5kZXhcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbkxpc3RbaW5kZXhdXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRWb2xsZXlTaXplIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgxKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2ggKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdNZWxlZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3UmFuZ2VJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XG4gICAgICAvLyBDb0M3SXRlbS51cGRhdGVDYXJkU3dpdGNoKCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSkge1xuICAgICAgQ29DN0NoZWNrLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gaWYgZGF0YXNldC5vYmplY3QgaXMgdGhlcmUgPT4gbmVlZCB0byB1bmVzY2FwZSB0aGluZ3MgISFcbiAgICAvLyBpZiBub3QgdXNlIHRoZSBkYXRhc2V0IGRpcmVjdGx5LlxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxuICAgICAgPyBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgICAgOiBjYXJkLmRhdGFzZXRcblxuICAgIGlmIChjYXJkRGF0YS5hY3RvcktleSkgcmV0dXJuIENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoY2FyZERhdGEuYWN0b3JLZXkpXG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmREYXRhLnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkRGF0YS5hY3RvcklkXG4gICAgaWYgKGFjdG9ySWQpIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZClcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmIChjaGF0TWVzc2FnZS51c2VyKSByZXR1cm4gY2hhdE1lc3NhZ2UudXNlci5jaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzQ2FyZE93bmVyIChjYXJkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlLm93bm5lciB8fCBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIF9nZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbVRva2VuICh0b2tlbktleSkge1xuICAgIGNvbnN0IHRva2VuID0gQ29DN0NoYXQuZ2V0VG9rZW4odG9rZW5LZXkpXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4gfHwgbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPVxuICAgICAgbWVzc0lkID09IG51bGwgPyBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWQgOiBtZXNzSWRcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBjYXJkLm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZEFjdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24nKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGJ1dHRvbi5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBvcmlnaW5NZXNzYWdlID0gYnV0dG9uLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAvLyBjb25zdCBtZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuXG4gICAgaWYgKCFDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKSkgcmV0dXJuXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5uZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICAgIGxldCBtZWxlZUNhcmRcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIG1lbGVlQ2FyZC51cGdyYWRlUm9sbChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIGNhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBjb25zdCByb2xsUmVzdWx0ID0gYnV0dG9uLmNsb3Nlc3QoJy5yb2xsLXJlc3VsdCcpXG4gICAgICAgICAgY29uc3Qgcm9sbEluZGV4ID0gcm9sbFJlc3VsdFxuICAgICAgICAgICAgPyBwYXJzZUludChyb2xsUmVzdWx0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICByYW5nZUNhcmQucGFzc1JvbGwocm9sbEluZGV4KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIHJhbmdlQ2FyZC51cGdyYWRlUm9sbChyb2xsSW5kZXgsIHVwZ3JhZGVJbmRleCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpIHx8XG4gICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKSAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgY29uc3QgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciA9IGNhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICcucmVzdWx0LWRldGFpbHMnXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgaWYgKGFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ2ZhbHNlJyAvLyB0cmlnZ2VyIDMgdXBkYXRlcyBkZSBjYXJkXG4gICAgICAgICAgICBzd2l0Y2ggKG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZXBsYWNlKCdmYWlsdXJlJywgJ3N1Y2Nlc3MnKVxuICAgICAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bWJsZScpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b29sdGlwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSAvLyBUT0RPIG5vdCBuZWNlc3NhcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgICAgIHJlc3VsdC5pbm5lclRleHQgPVxuICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVzaGluZ1NraWxsJylcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2ZhaWx1cmUnKVxuICAgICAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgICAgICBuZXdDYXJkLmRhdGFzZXQucHVzaGVkUm9sbCA9IHRydWVcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQobmV3Q2FyZCwgb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLnB1c2goY2FyZClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlZmVuZGluZyc6IHtcbiAgICAgICAgbGV0IGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICBsZXQgZGVmZW5kZXJcbiAgICAgICAgaWYgKCFkZWZlbmRlcktleSkge1xuICAgICAgICAgIGRlZmVuZGVyS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAgICAgICAuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgZGVmZW5kZXIgPSBnYW1lLmFjdG9ycy5nZXQoZGVmZW5kZXJLZXkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZW5kZXIgPSB0aGlzLmdldEFjdG9yRnJvbVRva2VuKGRlZmVuZGVyS2V5KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblR5cGVcbiAgICAgICAgY29uc3Qgb3V0bnVtYmVyZWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQub3V0bnVtYmVyZWQgPT09ICd0cnVlJ1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgICAgIGNoZWNrLnNpZGUgPSAndGFyZ2V0J1xuICAgICAgICBjaGVjay5hY3Rpb24gPSByZXNwb25zZVR5cGVcbiAgICAgICAgc3dpdGNoIChyZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICBjYXNlICdkb2RnaW5nJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdtYW5ldXZlcic6IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8PSBhY3Rvci5idWlsZCAtIDMpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNYW5ldXZlck5vdFBvc3NpYmxlJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGlmIChvdXRudW1iZXJlZCkgY2hlY2suZGljZU1vZGlmaWVyID0gLTFcbiAgICAgICAgICAgIGlmIChkZWZlbmRlci5idWlsZCA8IGFjdG9yLmJ1aWxkKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyIC0gKGFjdG9yLmJ1aWxkIC0gZGVmZW5kZXIuYnVpbGQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGVjay5kaWNlTW9kaWZpZXIgPCAtMikge1xuICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ICsgTWF0aC5hYnMoY2hlY2suZGljZU1vZGlmaWVyKSAtIDJcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gLTJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBpbml0aWF0b3IucGVyZm9ybVNraWxsQ2hlY2soZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsKVxuICAgICAgICBhd2FpdCBpbml0aWF0b3IucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1yb2xsJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnBlcmZvcm1Ta2lsbENoZWNrKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID09PSAndHJ1ZScsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gYnV0dG9uLmRhdGFzZXQuZGVhbGVyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGJ1dHRvbi5kYXRhc2V0LnRhcmdldFxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBidXR0b24uZGF0YXNldC53ZWFwb25cbiAgICAgICAgaWYgKG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIH1cbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgICAgIC8vIGNvbnN0IGRhbWFnZUNhcmQgPSBuZXcgQ29DN0RhbWFnZVJvbGwoXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC53ZWFwb24sXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC5kZWFsZXIsXG4gICAgICAgIC8vICB7XG4gICAgICAgIC8vICAgIHRhcmdldEtleTogYnV0dG9uLmRhdGFzZXQudGFyZ2V0LFxuICAgICAgICAvLyAgICBjcml0aWNhbDogJ3RydWUnID09IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsLFxuICAgICAgICAvLyAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgLy8gIH0pO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICAvLyBkYW1hZ2VDYXJkLnJvbGxEYW1hZ2UoKTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgLy8gIGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtYnV0dG9ucycpLmZvckVhY2goIGIgPT4gYi5yZW1vdmUoKSk7XG4gICAgICAgIC8vICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZCggY2FyZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgcmFuZ2VJbml0aWF0b3IuYWRkU2hvdEF0Q3VycmVudFRhcmdldCgpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yZXNvbHZlQ2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3Iucm9sbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWFsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FyZC5kYXRhc2V0LnRhcmdldEtleVxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XG4gICAgICAgIGNvbnN0IHRhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgYXdhaXQgdGFyZ2V0QWN0b3IuZGVhbERhbWFnZShhbW91bnQpXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxuICAgICAgICBjb25zdCBkaWNlVG90YWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgJChkaWNlVG90YWwpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IuZGVhbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICAgICkge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrLWNhcmQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgZm9yY2VSb2xsOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXNldC1jcmVhdHVyZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucmVzZXRDcmVhdHVyZVNhbkRhdGEoKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc2V0LXNwZWNpZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucmVzZXRTcGVjaWVTYW5EYXRhKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWR2YW5jZS1zdGF0ZSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suYWR2YW5jZVN0YXRlKFxuICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnN0YXRlIC8qLCBidXR0b24uZGF0YXNldC5wYXJhbSAqL1xuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tbG9zcyc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtaW50LWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsSW50KClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBjYXNlICdhcHBseS1zYW4tbG9zcyc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBhd2FpdCBzYW5DaGVjay5hcHBseVNhbkxvc3MoKTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICAvLyBjYXNlICdyZXZlYWwtc2FuLWNoZWNrJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIHNhbkNoZWNrLmlzQmxpbmQgPSBmYWxzZTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICBjYXNlICdyb2xsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY29uQ2hlY2sucm9sbENvbigpXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uQ2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRvZ2dsaW5nIHRoZSB2aXNpYmlsaXR5IG9mIGNoYXQgY2FyZCBjb250ZW50IHdoZW4gdGhlIG5hbWUgaXMgY2xpY2tlZFxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaGVhZGVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBoZWFkZXIuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGlmICghY29udGVudC5zdHlsZS5kaXNwbGF5KSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9tZWxlZS10YXJnZXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcblxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZUluaXRpYXRvciBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMub3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcbiAgICBpZiAodGhpcy5hZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZWxlZVRhcmdldCA9IG5ldyBDb0M3TWVsZWVUYXJnZXQoXG4gICAgICAgIHRoaXMudGFyZ2V0S2V5LFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgdGhpcy5mYXN0Rm9yd2FyZFxuICAgICAgKVxuICAgICAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IG1lbGVlVGFyZ2V0LmNyZWF0ZUNoYXRDYXJkKClcbiAgICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG1lc3NhZ2UuaWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRvU3VjY2VzcyAmJiAhdGhpcy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5jaGVjay5mb3JjZVBhc3MoKVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudGFyZ2V0Q2FyZCAmJiAhdGhpcy5hdXRvU3VjY2VzcyAmJiB0aGlzLmhhc1RhcmdldCkge1xuICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICAgIClcbiAgICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG4gICAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBpbml0aWF0b3IgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGluaXRpYXRvciwgY2FyZClcbiAgICBpbml0aWF0b3Iucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgY29uc3Qgcm9sbERhbWFnZUJ1dHRvbiA9IG9sZENhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICdidXR0b25bZGF0YS1hY3Rpb249XCJyb2xsLW1lbGVlLWRhbWFnZVwiXSdcbiAgICApXG4gICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJylcblxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05TVCwgRGlhbG9nLCBEaWUsIGR1cGxpY2F0ZSwgZ2FtZSwgZ2V0UHJvcGVydHksIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBQb2ludFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENoYXJhY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU3BlY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxWYWx1ZURpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNlIEFjdG9yIGNsYXNzIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIGxvZ2ljIHNwZWNpYWxpemVkIGZvciBDb0MgN3RoLlxuICovXG5leHBvcnQgY2xhc3MgQ29DQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKVxuICAgIGF3YWl0IHRoaXMuY3JlYXR1cmVJbml0KCkgLy8gVE9ETyA6IG1vdmUgdGhpcyBpbiBDb0NBY3Rvci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKiogVGVzdGluZ1xuICAvLyBhc3luYyB1cGRhdGUoZGF0YSwgb3B0aW9ucz17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHRoaXMuY2hhcmFjdGVyaXN0aWNzLmludCA9IDE1O1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIC8vIGdldCBjaGFyYWN0ZXJpc3RpY3MoKXtcbiAgLy8gICBjb25zdCBhY3RvciA9IHRoaXM7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBnZXQgaW50KCl7XG4gIC8vICAgICAgICAgcmV0dXJuIGFjdG9yLmdldFByb3AoJ19pbnQnKTtcbiAgLy8gICAgICAgfSxcblxuICAvLyAgICAgICBzZXQgaW50KHgpe1xuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcbiAgLy8gICAgICAgfVxuICAvLyAgICB9O1xuICAvLyB9XG5cbiAgLy8gc2V0UHJvcChrZXksIHgpe1xuICAvLyAgIHRoaXNba2V5XSA9IHg7XG4gIC8vIH1cblxuICAvLyBnZXRQcm9wKGtleSl7XG4gIC8vICAgcmV0dXJuIHRoaXNba2V5XXx8MDtcbiAgLy8gfVxuICAvL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZGF0YS50b2tlbiA9IGRhdGEudG9rZW4gfHwge31cbiAgICBpZiAoZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgbWVyZ2VPYmplY3QoXG4gICAgICAgIGRhdGEudG9rZW4sXG4gICAgICAgIHtcbiAgICAgICAgICB2aXNpb246IHRydWUsXG4gICAgICAgICAgZGltU2lnaHQ6IDMwLFxuICAgICAgICAgIGJyaWdodFNpZ2h0OiAwLFxuICAgICAgICAgIGFjdG9yTGluazogdHJ1ZSxcbiAgICAgICAgICBkaXNwb3NpdGlvbjogMVxuICAgICAgICB9LFxuICAgICAgICB7IG92ZXJ3cml0ZTogZmFsc2UgfVxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAndmVoaWNsZScpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvamVlcC5zdmcnIC8vIENoYW5nZSB0aGUgaWNvbiBmb3IgdmVoaWNsZVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgaGFyZDogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDIpIHx8IG51bGwsXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXG4gICAgICAgICAgZm9ybXVsYTogdmFsdWUuZm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcbiAgICogQHBhcmFtIHsqfSBjcmVhdGVEYXRhXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XG4gICAgLy8gY2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24uYWN0aXZlXG4gICAgaWYgKGNyZWF0ZURhdGEpIHtcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgZ2V0IGJvdXRPZk1hZG5lc3MgKCkge1xuICAgIHJldHVybiB0aGlzLmVmZmVjdHMuZmluZChcbiAgICAgIGUgPT4gZS5kYXRhLmxhYmVsID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnKVxuICAgIClcbiAgfVxuXG4gIGdldCBpbnNhbml0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWZmZWN0cy5maW5kKFxuICAgICAgZSA9PiBlLmRhdGEubGFiZWwgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnNhbml0eU5hbWUnKVxuICAgIClcbiAgfVxuXG4gIGdldCBpc0luQUJvdXRPZk1hZG5lc3MgKCkge1xuICAgIGlmICghdGhpcy5ib3V0T2ZNYWRuZXNzKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gIXRoaXMuYm91dE9mTWFkbmVzcy5kYXRhLmRpc2FibGVkXG4gIH1cblxuICBnZXQgaXNJbnNhbmUgKCkge1xuICAgIGlmICghdGhpcy5pbnNhbml0eSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuICF0aGlzLmluc2FuaXR5LmRhdGEuZGlzYWJsZWRcbiAgfVxuXG4gIGdldCBzYW5pdHkgKCkge1xuICAgIGNvbnN0IGJvdXRSZWFsVGltZSA9ICEhdGhpcy5ib3V0T2ZNYWRuZXNzPy5kYXRhLmZsYWdzPy5Db0M3Py5yZWFsVGltZVxuICAgIGxldCBkdXJhdGlvbiA9IGJvdXRSZWFsVGltZVxuICAgICAgPyB0aGlzLmJvdXRPZk1hZG5lc3M/LmRhdGE/LmR1cmF0aW9uPy5yb3VuZHNcbiAgICAgIDogdGhpcy5ib3V0T2ZNYWRuZXNzPy5kYXRhPy5kdXJhdGlvbi5zZWNvbmRzXG4gICAgaWYgKCFib3V0UmVhbFRpbWUgJiYgZHVyYXRpb24pIGR1cmF0aW9uID0gTWF0aC5yb3VuZChkdXJhdGlvbiAvIDM2MDApXG4gICAgbGV0IGluZGVmaW5pdGVJbnN0YW5pdHkgPSAhIXRoaXMuaW5zYW5pdHk/LmRhdGEuZmxhZ3M/LkNvQzc/LmluZGVmaW5pdGVcbiAgICBsZXQgaW5zYW5lRHVyYXRpb24gPSBpbmRlZmluaXRlSW5zdGFuaXR5XG4gICAgICA/IG51bGxcbiAgICAgIDogdGhpcy5pbnNhbml0eT8uZGF0YT8uZHVyYXRpb24uc2Vjb25kc1xuICAgIGlmICghaW5kZWZpbml0ZUluc3Rhbml0eSAmJiBpbnNhbmVEdXJhdGlvbikge1xuICAgICAgaW5zYW5lRHVyYXRpb24gPSBpbnNhbmVEdXJhdGlvbiAvIDM2MDBcbiAgICB9XG4gICAgbGV0IGJvdXREdXJhdGlvblRleHQgPSB0aGlzLmlzSW5BQm91dE9mTWFkbmVzc1xuICAgICAgPyBib3V0UmVhbFRpbWVcbiAgICAgICAgPyBgJHtkdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgICA6IGAke2R1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIDogbnVsbFxuICAgIGNvbnN0IGluc2FuaXR5RHVyYXRpb25UZXh0ID0gaW5zYW5lRHVyYXRpb25cbiAgICAgID8gdGhpcy5pc0luc2FuZVxuICAgICAgICA/IGluZGVmaW5pdGVJbnN0YW5pdHlcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IGAke2luc2FuZUR1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgICAgOiBudWxsXG4gICAgICA6IG51bGxcbiAgICBpZiAodGhpcy5pc0luc2FuZSAmJiAhaW5zYW5pdHlEdXJhdGlvblRleHQgJiYgIWluZGVmaW5pdGVJbnN0YW5pdHkpIHtcbiAgICAgIGluZGVmaW5pdGVJbnN0YW5pdHkgPSB0cnVlXG4gICAgfVxuICAgIGlmICghZHVyYXRpb24pIGJvdXREdXJhdGlvblRleHQgPSAnJ1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJvdXRPZk1hZG5lc3M6IHtcbiAgICAgICAgYWN0aXZlOiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyxcbiAgICAgICAgcmVhbFRpbWU6IHRoaXMuaXNJbkFCb3V0T2ZNYWRuZXNzID8gYm91dFJlYWxUaW1lIDogdW5kZWZpbmVkLFxuICAgICAgICBzdW1tYXJ5OiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyA/ICFib3V0UmVhbFRpbWUgOiB1bmRlZmluZWQsXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyA/IGR1cmF0aW9uIDogdW5kZWZpbmVkLFxuICAgICAgICBkdXJhdGlvblRleHQ6IGJvdXREdXJhdGlvblRleHQgfHwgJycsXG4gICAgICAgIGhpbnQ6IHRoaXMuaXNJbkFCb3V0T2ZNYWRuZXNzXG4gICAgICAgICAgPyBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm91dE9mTWFkbmVzcycpfSR7XG4gICAgICAgICAgICAgIGJvdXREdXJhdGlvblRleHQgPyAnOiAnICsgYm91dER1cmF0aW9uVGV4dCA6ICcnXG4gICAgICAgICAgICB9YFxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvdXRPZk1hZG5lc3MnKVxuICAgICAgfSxcbiAgICAgIHVuZGVybHlpbmc6IHtcbiAgICAgICAgYWN0aXZlOiB0aGlzLmlzSW5zYW5lLFxuICAgICAgICBpbmRlZmludGllOiB0aGlzLmlzSW5zYW5lID8gaW5kZWZpbml0ZUluc3Rhbml0eSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZHVyYXRpb246IGluc2FuZUR1cmF0aW9uLFxuICAgICAgICBkdXJhdGlvblRleHQ6IGluc2FuaXR5RHVyYXRpb25UZXh0IHx8ICcnLFxuICAgICAgICBoaW50OiB0aGlzLmlzSW5zYW5lXG4gICAgICAgICAgPyBpbmRlZmluaXRlSW5zdGFuaXR5XG4gICAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmRlZmluaXRlSW5zYW5pdHknKVxuICAgICAgICAgICAgOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuVGVtcG9yYXJ5SW5zYW5pdHknXG4gICAgICAgICAgICAgICl9ICR7aW5zYW5pdHlEdXJhdGlvblRleHQgfHwgJyd9YFxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEluc2FuZScpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHBvcnRyYWl0ICgpIHtcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHJldHVybiB0aGlzLmltZ1xuICAgIGlmICh0aGlzLmlzVG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnRva2VuPy5kYXRhPy5pbWcgfHwgdGhpcy5pbWdcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS50b2tlbj8uaW1nIHx8IHRoaXMuaW1nXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRU5USVRZID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnJlc3VsdElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/LnBob2JpYSkgcmVzdWx0LnBob2JpYSA9IHRydWVcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgICAgICAgICAgKX1gXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgZGVsZXRlIGl0ZW0uZGF0YS5faWRcbiAgICAgICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuY3JlYXRlT3duZWRJdGVtKCBpdGVtLmRhdGEpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmRhdGFdKVxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRhdGEudHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0uZGF0YS50ZXh0XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlQm91dE9mTWFkbmVzc1RhYmxlTm90Rm91bmQnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBub3QgYSByZWFsIHRpbWUgbm8gbmVlZCB0byBhY3RpdmF0ZSB0aGUgYm91dFxuICAgIGlmICghcmVhbFRpbWUpIHJldHVybiByZXN1bHRcblxuICAgIGlmICh0aGlzLmJvdXRPZk1hZG5lc3MpIHtcbiAgICAgIGF3YWl0IHRoaXMuYm91dE9mTWFkbmVzcy51cGRhdGUoe1xuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgcm91bmRzOiByZWFsVGltZSAmJiBkdXJhdGlvbiA/IGR1cmF0aW9uIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHNlY29uZHM6IHJlYWxUaW1lID8gdW5kZWZpbmVkIDogZHVyYXRpb24gKiAzNjAwLFxuICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgIH0sXG4gICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgcmVhbFRpbWU6IHJlYWxUaW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zdCBlZmZlY3REYXRhID1cbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyksXG4gICAgICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJyxcbiAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgcm91bmRzOiByZWFsVGltZSAmJiBkdXJhdGlvbiA/IGR1cmF0aW9uIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2Vjb25kczogcmVhbFRpbWUgPyB1bmRlZmluZWQgOiBkdXJhdGlvbiAqIDM2MDAsXG4gICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgbWFkbmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVhbFRpbWU6IHJlYWxUaW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyB0aW50OiAnI2ZmMDAwMCcsXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0pXG4gICAgICAvLyBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHMuZ2V0KCBlZmZlY3REYXRhLl9pZCk7XG4gICAgICAvLyBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xuICAgIH1cbiAgICAvLyBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHMuZ2V0KCBlZmZlY3REYXRhLl9pZCk7XG4gICAgLy8gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGFzeW5jIGVudGVySW5zYW5pdHkgKGluZGVmaW5pdGUgPSB0cnVlLCBkdXJhdGlvbiA9IHVuZGVmaW5lZCkge1xuICAgIGlmICh0aGlzLmluc2FuaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLmluc2FuaXR5LnVwZGF0ZSh7XG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICBzZWNvbmRzOiAhaW5kZWZpbml0ZSAmJiBkdXJhdGlvbiA/IGR1cmF0aW9uICogMzYwMCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0dXJuczogMVxuICAgICAgICB9LFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgIGluZGVmaW5pdGU6IGluZGVmaW5pdGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkluc2FuaXR5TmFtZScpLFxuICAgICAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RlbnRhY2xlcy1za3VsbC5zdmcnLFxuICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiAhaW5kZWZpbml0ZSAmJiBkdXJhdGlvbiA/IGR1cmF0aW9uICogMzYwMCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgICBtYWRuZXNzOiB0cnVlLFxuICAgICAgICAgICAgICBpbmRlZmluaXRlOiBpbmRlZmluaXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBleGl0Qm91dE9mTWFkbmVzcyAoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm91dE9mTWFkbmVzcz8uZGVsZXRlKClcbiAgfVxuXG4gIGFzeW5jIGV4aXRJbnNhbml0eSAoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5zYW5pdHk/LmRlbGV0ZSgpXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gbmV3IGFjdG9yIGNyZWF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICAvLyBzdGF0aWMgYXN5bmMgY3JlYXRlKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8gIC8vIElmIHRoZSBjcmVhdGVkIGFjdG9yIGhhcyBpdGVtcyAob25seSBhcHBsaWNhYmxlIHRvIGR1cGxpY2F0ZWQgYWN0b3JzKSBieXBhc3MgdGhlIG5ldyBhY3RvciBjcmVhdGlvbiBsb2dpY1xuICAvLyAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgLy8gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gIH1cbiAgLy8gIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGNyZWF0ZVNraWxsIChza2lsbE5hbWUsIHZhbHVlLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgZGF0YToge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgICAgICByYXJpdHk6IGZhbHNlLFxuICAgICAgICAgIHB1c2g6IHRydWUsXG4gICAgICAgICAgY29tYmF0OiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSkgLy8gTU9ESUY6IDAuOC54ICdPd25lZEl0bWVtJyA9PiAnSXRlbVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVXZWFwb25Ta2lsbCAobmFtZSwgZmlyZWFybXMgPSBmYWxzZSwgYmFzZSA9IG51bGwpIHtcbiAgICAvLyBUT0RPIDogQXNrIGZvciBiYXNlIHZhbHVlIGlmIG51bGxcblxuICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY1NlbGVjdERpYWxvZy5jcmVhdGUoXG4gICAgICBbXSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICksXG4gICAgICAwLFxuICAgICAgbmFtZVxuICAgIClcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgZGF0YToge1xuICAgICAgICBzcGVjaWFsaXphdGlvbjogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICApLFxuICAgICAgICBiYXNlOiBpc05hTih2YWx1ZSkgPyAwIDogdmFsdWUsXG4gICAgICAgIGFkanVzdG1lbnRzOiB7XG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcbiAgICAgICAgICBhcmNoZXR5cGU6IG51bGwsXG4gICAgICAgICAgZXhwZXJpZW5jZTogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiAhYmFzZVxuICAgIH0pIC8vIE1PRElGOiAwLjgueCAnT3duZWRJdG1lbScgPT4gJ0l0ZW1cbiAgICAvLyAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnT3duZWRJdGVtJywgZGF0YSwgeyByZW5kZXJTaGVldDogIWJhc2V9KTtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHNraWxsWzBdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIGNyZWF0dXJlIHdpdGggbWluaW11bXMgc2tpbGxzXG4gICAqL1xuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEudHlwZSAhPT0gJ2NyZWF0dXJlJykgcmV0dXJuXG4gICAgaWYgKHRoaXMuZ2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpKSByZXR1cm4gLy8gQ2hhbmdlIHRvIHJldHVybiBza2lsbCA/XG5cbiAgICAvLyBDaGVjayBpZiBmaWdodGluZyBza2lsbHMgZXhpc3RzLCBpZiBub3QgY3JlYXRlIGl0IGFuZCB0aGUgYXNzb2NpYXRlZCBhdHRhY2suXG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpXG4gICAgKVxuICAgIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGluZyBuYXR1cmFsIGF0dGFjayBza2lsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICdJdGVtJywgLy8gTU9ESUY6IDAuOC54ICdPd25lZEl0bWVtJyA9PiAnSXRlbVxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKSxcbiAgICAgICAgICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGJhc2U6IDAsXG4gICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGZpZ2h0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc3BlY2lhbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmxhZ3M6IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH1cbiAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IGF0dGFjayA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgJ0l0ZW0nLCAvLyBNT0RJRjogMC44LnggJ093bmVkSXRtZW0nID0+ICdJdGVtXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXG4gICAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIixcbiAgICAgICAgICAgICAgICAgIGNoYXQ6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3cG5UeXBlOiAnaW5uYXRlJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBhZGRiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2xudDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZW5kZXJTaGVldDogZmFsc2UgfVxuICAgICAgICApXG5cbiAgICAgICAgY29uc3QgY3JlYXRlZEF0dGFjayA9IHRoaXMuaXRlbXMuZ2V0KGF0dGFjay5faWQpXG4gICAgICAgIGF3YWl0IGNyZWF0ZWRBdHRhY2sudXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5za2lsbC5tYWluLmlkJzogc2tpbGwuX2lkLFxuICAgICAgICAgICdkYXRhLnNraWxsLm1haW4ubmFtZSc6IHNraWxsLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdHVyZSBpbml0OiAnICsgZXJyLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZyggJ1NraWxsIGNyZWF0ZWQnKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpXG4gICAgICAvLyBDcmVhdGluZyBjb3JyZXNwb25kaW5nIHdlYXBvbi5cbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVJdGVtIChpdGVtTmFtZSwgcXVhbnRpdHkgPSAxLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSkgLy8gTU9ESUY6IDAuOC54ICdPd25lZEl0bWVtJyA9PiAnSXRlbVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVNraWxsIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgc2hvd1NoZWV0XG4gICAgICApXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKHNraWxsTmFtZSwgbnVsbCwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlJdGVtIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpLCAxLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgbGV0IHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKVxuICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSkpIHtcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUod2VhcG9uTmFtZSkpIHtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiB3ZWFwb25OYW1lLFxuICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBkYXRhLmRhdGEucHJvcGVydGllc1trZXldID0gZmFsc2VcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pIC8vIE1PRElGOiAwLjgueCAnT3duZWRJdG1lbScgPT4gJ0l0ZW1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKHtcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIHZhbHVlOiBudWxsXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVmFsdWUgKGluZGV4LCBjb250ZW50KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnZhbHVlID0gY29udGVudFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS50aXRsZSA9IHRpdGxlXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJpb1NlY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBiaW8uc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBtb3ZlQmlvU2VjdGlvblVwIChpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gMCkgcmV0dXJuXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBpZiAoaW5kZXggPj0gYmlvLmxlbmd0aCkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCAtIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoIC0gMSkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRleHRBcmVhICh0ZXh0QXJlYSkge1xuICAgIGNvbnN0IG5hbWUgPSAnZGF0YS4nICsgdGV4dEFyZWEuZGF0YXNldC5hcmVhTmFtZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiB0ZXh0QXJlYS52YWx1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpdGVtIGZvciB0aGF0IGFjdG9yLlxuICAgKiBJZiBpdCdzIGEgc2tpbGwgZmlyc3QgY2hlY2sgaWYgdGhlIHNraWxsIGlzIGFscmVhZHkgb3duZWQuIElmIGl0IGlzIGRvbid0IGNyZWF0ZSBhIHNlY29uZCB0aW1lLlxuICAgKiBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgd2l0aCBiYXNlIG9yIHRyeSB0byBldmFsdWF0ZSB0aGUgZm9ybXVsYS5cbiAgICogQHBhcmFtIHsqfSBlbWJlZGRlZE5hbWVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW1iZWRkZWREb2N1bWVudHMgKGVtYmVkZGVkTmFtZSwgZGF0YUFycmF5LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gW11cbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgZGF0YUFycmF5KSB7XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gSWYgbm90IGEgUEMgc2V0IHNraWxsIHZhbHVlIHRvIGJhc2VcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShkYXRhLm5hbWUpKSByZXR1cm4gLy8gSWYgc2tpbGwgd2l0aCB0aGlzIG5hbWUgZXhpc3QgcmV0dXJuXG5cbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuYmFzZSkge1xuICAgICAgICAgICAgICBpZiAoU3RyaW5nKGRhdGEuZGF0YS5iYXNlKSAhPT0gU3RyaW5nKGRhdGEuZGF0YS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEudmFsdWUgPSBkYXRhLmRhdGEuYmFzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoZGF0YS5kYXRhLnZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICAgICAgICAgICkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSBkYXRhLmRhdGEudmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBkYXRhLmRhdGEudmFsdWUgPSBudWxsXG5cbiAgICAgICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IGRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbj8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgaWYgKHNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhPy5mbGFncz8ub2NjdXBhdGlvbiB8fCBkYXRhLmRhdGE/LmZsYWdzPy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgICBza2lsbExpc3QgPSB0aGlzLnNraWxscy5maWx0ZXIoZWwgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKCFlbC5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24pIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGE/LmZsYWdzPy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEuZGF0YS5mbGFncz8ub2NjdXBhdGlvblxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGE/LmZsYWdzPy5hcmNoZXR5cGUgJiZcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YS5kYXRhLmZsYWdzPy5hcmNoZXR5cGVcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbj8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gaWYoIDEgPD0gc2tpbGxMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNTZWxlY3REaWFsb2cuY3JlYXRlKFxuICAgICAgICAgICAgICAgIHNraWxsTGlzdCxcbiAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLmJhc2VcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5nZXQoJ2V4aXN0aW5nLXNraWxsJykpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgICBza2lsbERhdGEuZ2V0KCdleGlzdGluZy1za2lsbCcpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEuZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgYXdhaXQgZXhpc3RpbmdJdGVtLnNldEl0ZW1GbGFnKGtleSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhleGlzdGluZ0l0ZW0pXG4gICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5nZXQoJ25ldy1za2lsbC1uYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gc2tpbGxEYXRhLmdldCgnbmV3LXNraWxsLW5hbWUnKVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGRhdGEubmFtZSA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhkYXRhKVxuXG4gICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmdldCgnYmFzZS12YWx1ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsRGF0YS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIGRhdGEuZGF0YS5iYXNlID0gdmFsdWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBkYXRhLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGlmIChzcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvdXRwdXQucHVzaChhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAgIGVtYmVkZGVkTmFtZSxcbiAgICAgICAgICAgIFtkYXRhXSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnd2VhcG9uJzoge1xuICAgICAgICAgIGNvbnN0IG1haW5Ta2lsbCA9IGRhdGEuZGF0YT8uc2tpbGw/Lm1haW4/Lm5hbWVcbiAgICAgICAgICBpZiAobWFpblNraWxsKSB7XG4gICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAhIWRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5kYXRhLnNraWxsLm1haW4uaWQgPSBza2lsbC5pZFxuICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cblxuICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5kYXRhPy5za2lsbD8uYWx0ZXJuYXRpdj8ubmFtZVxuICAgICAgICAgIGlmIChzZWNvbmRTa2lsbCkge1xuICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAhIWRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5pZFxuICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cblxuICAgICAgICAgIG91dHB1dC5wdXNoKGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICAgZW1iZWRkZWROYW1lLFxuICAgICAgICAgICAgW2R1cGxpY2F0ZShkYXRhKV0sXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc2V0dXAnOiB7XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QgPSB7fVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3N0cicpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zaXogPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzaXonKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2RleCcpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5pbnQgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdyA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3BvdycpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sgPSB7fVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHRoaXMubHVja1xuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5zaG9ydE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmICghZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ci52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmNvbi52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmFwcC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdy52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmVkdS52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjayA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBkYXRhLmRhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3BlbmRQb2ludHMnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5kYXRhLnBvaW50c1dhcm5pbmcgPSAhKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciAhPT0gbnVsbCAmJiBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gIT09IG51bGwgJiYgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ICE9PSBudWxsICYmIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCAhPT0gbnVsbCAmJiBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgIT09IG51bGwgJiYgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ICE9PSBudWxsICYmIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAhPT0gbnVsbCAmJiBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgIT09IG51bGwpXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLmRhdGEpXG4gICAgICAgICAgICBpZiAocm9sbGVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgICAgICAgICAgICA7WydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J10uZm9yRWFjaChcbiAgICAgICAgICAgICAgICBrZXkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPVxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LmZvcm11bGFgXSA9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xsc1trZXldXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2tcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvd1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9XG4gICAgICAgICAgICAgICAgICAnIC8gJyArIE1hdGguZmxvb3IoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93IC8gNSlcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCddID0gdXBkYXRlRGF0YVtcbiAgICAgICAgICAgICAgICAgICdkYXRhLmF0dHJpYnMubXAudmFsdWUnXG4gICAgICAgICAgICAgICAgXSA9IHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5tcC5tYXgnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogdGhpcy5ocE1heCxcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLm1heCc6IHRoaXMuaHBNYXhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoc2tpbGxzKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMob3RoZXJzSXRlbXMpXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JykpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmFja3N0b3J5JzogZGF0YS5kYXRhLmJhY2tzdG9yeSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeS5maW5kKFxuICAgICAgICAgICAgICAgICAgZWwgPT4gc2VjdGlvbk5hbWUgPT09IGVsLnRpdGxlXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2FyY2hldHlwZSc6XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gQXJjaGV0eXByZSBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBsZXQgcmVzZXRBcmNoZXR5cGUgPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldEFyY2hldHlwZScpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRBcmNoZXR5cGVIaW50Jywge1xuICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICAgICAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXNldEFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldEFyY2hldHlwZSkgYXdhaXQgdGhpcy5yZXNldEFyY2hldHlwZSgpXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWMgPSBbXVxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3MpLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc1trZXldID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgICAgICAgICAgIGNoYXIua2V5ID0ga2V5XG4gICAgICAgICAgICAgICAgY29yZUNoYXJhYy5wdXNoKGNoYXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGxldCBjaGFyYWNcblxuICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBjb25zdCBjaGFyRGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljcyA9IGNvcmVDaGFyYWNcbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2VsZWN0Q29yZUNoYXJhYycpXG4gICAgICAgICAgICAgIGNoYXJhYyA9IGF3YWl0IENoYXJhY1NlbGVjdERpYWxvZy5jcmVhdGUoY2hhckRpYWxvZ0RhdGEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXJhYyA9IGNvcmVDaGFyYWNbMF0ua2V5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2hhcmFjKSByZXR1cm5cbiAgICAgICAgICAgIGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NoYXJhY10gPSB0cnVlXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlID0gTnVtYmVyKGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhYylcbiAgICAgICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICBmbGF2b3I6IGBSb2xsaW5nIGNoYXJhY3RlcmlzaXRpYyAke2NoYXIubGFiZWx9OiAke2RhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZX1gXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoYXIudmFsdWUgPCByb2xsLnRvdGFsID8gcm9sbC50b3RhbCA6IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2NoYXJhY30udmFsdWVgXTogdmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoZGF0YS5kYXRhLnNraWxscywgJ2FyY2hldHlwZScpXG5cbiAgICAgICAgICAgIGNvbnN0IG5ld0FyY2hldHlwZSA9IGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICAgICAgICAgIFtkYXRhXSxcbiAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQuYXJjaGV0eXBlJzogdGhpcy5hcmNoZXR5cGVQb2ludHNcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG5ld0FyY2hldHlwZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzpcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBPY2N1cGF0aW9uIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMub2NjdXBhdGlvbikge1xuICAgICAgICAgICAgICBsZXQgcmVzZXRPY2N1cGF0aW9uID0gZmFsc2VcbiAgICAgICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVzZXRPY2N1cGF0aW9uJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldE9jY3VwYXRpb25IaW50Jywge1xuICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICAgICAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXNldE9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0WWVzOiBmYWxzZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAocmVzZXRPY2N1cGF0aW9uKSBhd2FpdCB0aGlzLnJlc2V0T2NjdXBhdGlvbigpXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNlbGVjdCBjaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgICAgY29uc3QgcG9pbnRzRGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljcyA9IGRhdGEuZGF0YS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgICAgIGxldCBvcHRpb25hbENoYXIgPSBmYWxzZVxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLm9jY3VwYXRpb25Ta2lsbFBvaW50cykuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLnRvdGFsID0gdG90YWxcbiAgICAgICAgICAgIGlmIChvcHRpb25hbENoYXIpIHtcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvaW50U2VsZWN0RGlhbG9nLmNyZWF0ZShwb2ludHNEaWFsb2dEYXRhKVxuICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIC8vIFBvaW50IG5vdCBzZWxlY3RlZCA9PiBleGl0LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgb3B0aW9uYWwgc2tpbGxzXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5kYXRhLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgY29uc3QgZGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzID0gW11cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50eXBlID0gJ29jY3VwYXRpb24nXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEuYWN0b3JJZCA9IHRoaXMuaWRcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5vcHRpb25zQ291bnQgPSBOdW1iZXIoZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0ub3B0aW9ucylcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFNlbGVjdGlvbldpbmRvdycpXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBkYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5kYXRhLmRhdGEuZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5kYXRhLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMuZm9yRWFjaChza2lsbCA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxsc1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKVxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBleHRyYSBza2lsbHNcbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5kYXRhLnBlcnNvbmFsKSkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLmRhdGEucGVyc29uYWwpXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNlbGVjdFBlcnNvbmFsU2tpbGxzJywge1xuICAgICAgICAgICAgICAgIG51bWJlcjogTnVtYmVyKGRhdGEuZGF0YS5wZXJzb25hbClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIHRoaXMuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGFsbCBza2lsbHMgdGhhdCBhcmUgbm90IGFscmVhZHkgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLCBjYW4gaGF2ZSBhZGp1c3RtZW50cyBhbmQgWFAuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXMuZGF0YS5kYXRhLmZsYWdzLm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5vYWRqdXN0bWVudHMgJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBpZiBza2lsbCBhbHJlYWR5IHNlbGVjdGVkIGRvbid0IGFkZCBpdFxuICAgICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeVNlbGVjdGVkU2tpbGwgPSBkYXRhLmRhdGEuc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocy5kYXRhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscy5mb3JFYWNoKHNraWxsID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAhc2tpbGwubmFtZS5pbmNsdWRlcyhza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uKVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsLmRpc3BsYXlOYW1lID0gYCR7c2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7c2tpbGwubmFtZX0pYFxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHNraWxsLmRpc3BsYXlOYW1lID0gc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxsc1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKSAvLyBEaWFsb2cgZGF0YSBidWcgPz8/XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmZvQWxsU2tpbGxzQWxyZWFkeVNlbGVjdGVkJylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoZGF0YS5kYXRhLnNraWxscywgJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gQ3JlZGl0IHJhdGluZyBpcyBhbHdheXMgcGFydCBvZiBvY2N1cGF0aW9uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICAgICAgICAvLyBzZXR0aW5nIGl0IHRvIG1pbiBjcmVkaXQgcmF0aW5nXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy51cGRhdGUoe1xuICAgICAgICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uJzogTnVtYmVyKGRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWluKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgbmV3T2NjdXBhdGlvbiA9IGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICAgICAgICAgIFtkYXRhXSxcbiAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50cyxcbiAgICAgICAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBvdXRwdXQucHVzaChuZXdPY2N1cGF0aW9uKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3V0cHV0LnB1c2goYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICAgICAgICBbZGF0YV0sXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gZ2V0U2tpbGxJZEJ5TmFtZSggc2tpbGxOYW1lKXtcbiAgLy8gICBsZXQgaWQgPSBudWxsO1xuICAvLyAgICB0aGlzLml0ZW1zLmZvckVhY2goICh2YWx1ZSwga2V5LCBtYXApID0+IHtcbiAgLy8gICAgIGlmKCB2YWx1ZS5uYW1lID09IHNraWxsTmFtZSkgaWQgPSB2YWx1ZS5pZDtcbiAgLy8gICB9KTtcblxuICAvLyAgIHJldHVybiBpZDtcbiAgLy8gfVxuXG4gIGdldEl0ZW1JZEJ5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBsZXQgaWQgPSBudWxsXG4gICAgY29uc3QgbmFtZSA9IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBpdGVtTmFtZVxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgaWQgPSB2YWx1ZS5pZFxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gaWRcbiAgfVxuXG4gIGdldEl0ZW1zQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGl0ZW1MaXN0ID0gW11cbiAgICB0aGlzLml0ZW1zLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IGl0ZW1OYW1lKSBpdGVtTGlzdC5wdXNoKHZhbHVlKVxuICAgIH0pXG5cbiAgICByZXR1cm4gaXRlbUxpc3RcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKlxuICAgKi9cbiAgZ2V0U2tpbGxzQnlOYW1lIChza2lsbE5hbWUpIHtcbiAgICAvLyBUT0RPIDogbW9yZSBhZ2dyZXNzaXZlIGZpbmRpbmcgaW5jbHVkaW5nIHNwZWNzXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBjb25zdCBuYW1lID0gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogc2tpbGxOYW1lXG5cbiAgICB0aGlzLml0ZW1zLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcbiAgfVxuXG4gIHBhcnNlQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkXG4gIH1cblxuICBzdGF0aWMgZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICApKSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3MucHVzaCh7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICBnZXRDaGFyYWN0ZXJpc3RpYyAoY2hhck5hbWUpIHtcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGtleSA9PT0gY2hhck5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uICgpIHtcbiAgICBjb25zdCBvY2N1cGF0aW9uID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJylcbiAgICByZXR1cm4gb2NjdXBhdGlvblswXVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZSAoKSB7XG4gICAgY29uc3QgYXJjaGV0eXBlID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKVxuICAgIHJldHVybiBhcmNoZXR5cGVbMF1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvbiAoZXJhc2VPbGQgPSB0cnVlKSB7XG4gICAgaWYgKGVyYXNlT2xkKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9jY3VwYXRpb25Ta2lsbC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgYXdhaXQgb2NjdXBhdGlvblNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMub2NjdXBhdGlvbikgYXdhaXQgdGhpcy5vY2N1cGF0aW9uLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiBudWxsIH0pXG4gIH1cblxuICBnZXQgbHVjayAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubGNrLnZhbHVlKVxuICB9XG5cbiAgYXN5bmMgc2V0THVjayAodmFsdWUpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmxjay52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzcGVuZEx1Y2sgKGFtb3VudCkge1xuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcbiAgICBpZiAoISh0aGlzLmx1Y2sgPj0gYW1vdW50KSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc2V0THVjayh0aGlzLmx1Y2sgLSBhbW91bnQpXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSBudWxsIHx8XG4gICAgICAgIHVuZGVmaW5lZCA9PT0gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50IHx8XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gJydcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhwID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50KVxuICAgICAgcmV0dXJuIGlzTmFOKGhwKSA/IG51bGwgOiBocFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSlcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICBjb25zdCBtYXhIUCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgK1xuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSkgL1xuICAgICAgICAgICAgMTBcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJykgJiZcbiAgICAgICAgICB0aGlzLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcidcbiAgICAgICAgICA/IG1heEhQICogMlxuICAgICAgICAgIDogbWF4SFBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5ocC5tYXgpXG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5ocC5tYXgpXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUgPiB0aGlzLmJ1aWxkKSB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuYnVpbGQpXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOiB2YWx1ZSB9KVxuICAgIH1cbiAgICBpZiAodmFsdWUgPiB0aGlzLmhwTWF4KSB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuaHBNYXgpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5ocC52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtcyAoc2tpbGxMaXN0LCBmbGFnID0gbnVsbCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxMaXN0KSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBpZiAoZmxhZykgc2tpbGwuZGF0YS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAvLyBhd2FpdCB0aGlzLmNyZWF0ZU93bmVkSXRlbSggc2tpbGwsIHtyZW5kZXJTaGVldDpmYWxzZX0pO1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW3NraWxsXSwge1xuICAgICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICAgICAgc2tpbGwuZGF0YS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIC8vIGF3YWl0IHRoaXMuY3JlYXRlT3duZWRJdGVtKCBza2lsbCwge3JlbmRlclNoZWV0OmZhbHNlfSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcbiAgICAgICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFkZEl0ZW1zIChpdGVtTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QpIHtcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghaXRlbS5kYXRhLmZsYWdzKSBpdGVtLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLmRhdGEuZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICAvKiogTU9ESUYgMC44LnggKiovXG4gICAgICAvLyBhd2FpdCB0aGlzLmNyZWF0ZU93bmVkSXRlbSggaXRlbSwge3JlbmRlclNoZWV0OmZhbHNlfSk7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW1dLCB7XG4gICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgfSlcbiAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICB9XG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtIChza2lsbCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgIGlmICghaXRlbUlkKSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBza2lsbC5kYXRhLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgLy8gYXdhaXQgdGhpcy5jcmVhdGVPd25lZEl0ZW0oIHNraWxsLCB7cmVuZGVyU2hlZXQ6ZmFsc2V9KTtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbc2tpbGxdLCB7XG4gICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgfSlcbiAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLyA1KVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YSAoY3JlYXR1cmUpIHtcbiAgICBjb25zdCBpID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChjcmVhdHVyZSlcbiAgICBpZiAoaSAhPT0gLTEpIHJldHVybiB0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlc1tpXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBlbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleCAoY3JlYXR1cmUpIHtcbiAgICBjb25zdCBzYW5EYXRhID0gQ29DN1V0aWxpdGllcy5nZXRDcmVhdHVyZVNhbkRhdGEoY3JlYXR1cmUpXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzLmZpbmRJbmRleChjZCA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBjZC5pZCA9PT0gc2FuRGF0YT8uaWQgfHxcbiAgICAgICAgY2QubmFtZS50b0xvd2VyQ2FzZSgpID09PSBzYW5EYXRhLm5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgc2FuTG9zdFRvQ3JlYXR1cmUgKGNyZWF0dXJlKSB7XG4gICAgY29uc3Qgc2FuRGF0YSA9IHRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhKGNyZWF0dXJlKVxuICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAvLyBjaGVjayBmb3IgaWYgc3BlY2llIGFscmVhZHkgZW5jb3VudGVyZWQgcmV0dXJuIG1heCBvZiBib3RoO1xuICAgICAgaWYgKHNhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChzYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgfHwgMCwgc2FuRGF0YS50b3RhbExvc3MpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzYW5EYXRhLnRvdGFsTG9zcyB8fCAwXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoYXQgY3JlYXR1cmUgd2FzIG5ldmVyIGVuY291bnRlcmVkLiBXaGF0IGFib3V0IGhpcyBzcGVjaWUuXG4gICAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcbiAgICAgIGlmIChjcmVhdHVyZVNhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgIGNvbnN0IHNwZWNpZUVuY291bnRlcmVkID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGEoXG4gICAgICAgICAgY3JlYXR1cmVTYW5EYXRhLnNwZWNpZVxuICAgICAgICApXG4gICAgICAgIGlmIChzcGVjaWVFbmNvdW50ZXJlZCkgcmV0dXJuIHNwZWNpZUVuY291bnRlcmVkLnRvdGFsTG9zc1xuICAgICAgfVxuICAgICAgcmV0dXJuIDAgLy8gTmV2ZXIgZW5jb3VudGVyZWQgdGhhdCBzcGVjaWUgb3IgdGhpcyBjcmVhdHVyZS5cbiAgICB9XG4gIH1cblxuICBtYXhQb3NzaWJsZVNhbkxvc3NUb0NyZWF0dXJlIChjcmVhdHVyZSkge1xuICAgIC8vIERvIHdlIGtub3cgeW91ID9cbiAgICBjb25zdCBzYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGEoY3JlYXR1cmUpXG4gICAgY29uc3QgY3JlYXR1cmVTYW5EYXRhID0gQ29DN1V0aWxpdGllcy5nZXRDcmVhdHVyZVNhbkRhdGEoY3JlYXR1cmUpXG5cbiAgICBpZiAoc2FuRGF0YSkge1xuICAgICAgLy8gV2FzIHRoZXJlIGFueSB1cGRhdGUgdG8gdGhhdCBjcmVhdHVyZSA/XG4gICAgICBsZXQgY2hhbmdlcyA9IGZhbHNlXG4gICAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNhbkxvc3NNYXggIT09IHNhbkRhdGEuc2FuTG9zc01heCkge1xuICAgICAgICBzYW5EYXRhLnNhbkxvc3NNYXggPSBjcmVhdHVyZVNhbkRhdGEuc2FuTG9zc01heFxuICAgICAgICBjaGFuZ2VzID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUgJiYgIXNhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgIHNhbkRhdGEuc3BlY2llID0gY3JlYXR1cmVTYW5EYXRhLnNwZWNpZVxuICAgICAgICBjaGFuZ2VzID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBjcmVhdHVyZVNhbkRhdGEuc3BlY2llICYmXG4gICAgICAgIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heCAhPT0gc2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heFxuICAgICAgKSB7XG4gICAgICAgIHNhbkRhdGEuc3BlY2llLnNhbkxvc3NNYXggPSBjcmVhdHVyZVNhbkRhdGEuc3BlY2llLnNhbkxvc3NNYXhcbiAgICAgICAgY2hhbmdlcyA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChzYW5EYXRhLnRvdGFsTG9zcyA+IHNhbkRhdGEuc2FuTG9zc01heCkge1xuICAgICAgICBzYW5EYXRhLnRvdGFsTG9zcyA9IHNhbkRhdGEuc2FuTG9zc01heFxuICAgICAgICBjaGFuZ2VzID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBzYW5EYXRhLnNwZWNpZSAmJlxuICAgICAgICBzYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPiBzYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4XG4gICAgICApIHtcbiAgICAgICAgc2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gc2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heFxuICAgICAgICBjaGFuZ2VzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlcykge1xuICAgICAgICBjb25zdCBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QgPSB0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlc1xuICAgICAgICAgID8gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKVxuICAgICAgICAgIDogW11cbiAgICAgICAgY29uc3Qgc2FuRGF0YUluZGV4ID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChjcmVhdHVyZSlcbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W3NhbkRhdGFJbmRleF0gPSBzYW5EYXRhXG4gICAgICAgIGlmIChzYW5EYXRhLnNwZWNpZSkge1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUFsbE9mU2FtZVNwZWNpZShlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QsIHNhbkRhdGEuc3BlY2llKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICdkYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJzogZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzYW5EYXRhLnNhbkxvc3NNYXggLSBzYW5EYXRhLnRvdGFsTG9zc1xuICAgIH1cbiAgICAvLyBXZSBkb24ndCBrbm93IHlvdS5cbiAgICBpZiAoY3JlYXR1cmVTYW5EYXRhKSB7XG4gICAgICBjb25zdCBzYW5Mb3N0VG9DcmVhdHVyZSA9IHRoaXMuc2FuTG9zdFRvQ3JlYXR1cmUoY3JlYXR1cmUpXG4gICAgICByZXR1cm4gTWF0aC5tYXgoMCwgY3JlYXR1cmVTYW5EYXRhLnNhbkxvc3NNYXggLSBzYW5Mb3N0VG9DcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIDk5XG4gIH1cblxuICBjcmVhdHVyZUVuY291bnRlcmVkIChjcmVhdHVyZSkge1xuICAgIHJldHVybiAhIX50aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KGNyZWF0dXJlKVxuICB9XG5cbiAgY3JlYXR1cmVTcGVjaWVFbmNvdW50ZXJlZCAoY3JlYXR1cmUpIHtcbiAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcbiAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSkge1xuICAgICAgcmV0dXJuICEhfnRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhSW5kZXgoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXR1cmVFbmNvdW50ZXJlZChjcmVhdHVyZSlcbiAgfVxuXG4gIF91cGRhdGVBbGxPZlNhbWVTcGVjaWUgKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCwgc3BlY2llU2FuRGF0YSkge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llPy5pZCA9PT0gc3BlY2llU2FuRGF0YS5pZCB8fFxuICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNwZWNpZT8ubmFtZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIHNwZWNpZVNhbkRhdGEubmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgKSB7XG4gICAgICAgIC8vIE5ldyBlbmNvdW50ZXIgd2l0aCB0aGF0IHNwZWNpZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llLnRvdGFsTG9zcyAhPT1cbiAgICAgICAgICBzcGVjaWVTYW5EYXRhLnRvdGFsTG9zc1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWx0YSA9XG4gICAgICAgICAgICBzcGVjaWVTYW5EYXRhLnRvdGFsTG9zcyAtXG4gICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNwZWNpZS50b3RhbExvc3NcbiAgICAgICAgICBpZiAoZGVsdGEgPiAwKSB7XG4gICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNwZWNpZSA9IHNwZWNpZVNhbkRhdGFcbiAgICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzICs9IGRlbHRhXG4gICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnRvdGFsTG9zcyA9IE1hdGgubWluKFxuICAgICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnRvdGFsTG9zcyxcbiAgICAgICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zYW5Mb3NzTWF4XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZVNwZWNpZSAoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBzcGVjaWVTYW5EYXRhKSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zcGVjaWU/LmlkID09PSBzcGVjaWVTYW5EYXRhLmlkIHx8XG4gICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llPy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgc3BlY2llU2FuRGF0YS5uYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNTcGVjaWVMb3N0ID1cbiAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNwZWNpZS50b3RhbExvc3NcbiAgICAgICAgZGVsZXRlIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llXG5cbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS50b3RhbExvc3MgPVxuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzIC0gcHJldmlvdXNTcGVjaWVMb3N0XG4gICAgICAgIGlmIChlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnRvdGFsTG9zcyA8IDApIHtcbiAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnRvdGFsTG9zcyA9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q3JlYXR1cmUgKGNyZWF0dXJlKSB7XG4gICAgY29uc3QgaW5kZXhTYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChjcmVhdHVyZSlcbiAgICBpZiAofmluZGV4U2FuRGF0YSkge1xuICAgICAgY29uc3QgY3JlYXR1cmVTYW5EYXRhID0gQ29DN1V0aWxpdGllcy5nZXRDcmVhdHVyZVNhbkRhdGEoY3JlYXR1cmUpXG4gICAgICBjb25zdCBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QgPSB0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlc1xuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcylcbiAgICAgICAgOiBbXVxuICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LnNwbGljZShpbmRleFNhbkRhdGEsIDEpXG4gICAgICBjcmVhdHVyZVNhbkRhdGEudG90YWxMb3NzID0gMFxuICAgICAgaWYgKGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUpIGRlbGV0ZSBjcmVhdHVyZVNhbkRhdGEuc3BlY2llXG4gICAgICB0aGlzLl91cGRhdGVBbGxPZlNhbWVTcGVjaWUoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBjcmVhdHVyZVNhbkRhdGEpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJzogZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0U3BlY2llIChjcmVhdHVyZSkge1xuICAgIGNvbnN0IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCA9IHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcylcbiAgICAgIDogW11cbiAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcbiAgICBpZiAoIWNyZWF0dXJlU2FuRGF0YS5zcGVjaWUpIHJldHVyblxuICAgIGNvbnN0IGluZGV4U2FuRGF0YSA9IHRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhSW5kZXgoXG4gICAgICBjcmVhdHVyZVNhbkRhdGEuc3BlY2llXG4gICAgKVxuICAgIGlmICh+aW5kZXhTYW5EYXRhKSB7XG4gICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3Quc3BsaWNlKGluZGV4U2FuRGF0YSwgMSlcbiAgICB9XG4gICAgdGhpcy5fcmVtb3ZlU3BlY2llKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCwgY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcyc6IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFxuICAgIH0pXG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuVG9DcmVhdHVyZSAoc2FuTG9zcywgY3JlYXR1cmUpIHtcbiAgICBsZXQgZXhhY3RTYW5Mb3NzID0gc2FuTG9zc1xuICAgIC8vIEdldCB0aGF0IGNyZWF0dXJlIFNBTiBkYXRhLlxuICAgIGNvbnN0IGNyZWF0dXJlU2FuRGF0YSA9IENvQzdVdGlsaXRpZXMuZ2V0Q3JlYXR1cmVTYW5EYXRhKGNyZWF0dXJlKVxuXG4gICAgLy8gR2V0IGFjdG9yIFNBTiBkYXRhIGZvciB0aGF0IGNyZWF0dXJlLlxuICAgIGNvbnN0IGluZGV4U2FuRGF0YSA9IHRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhSW5kZXgoY3JlYXR1cmUpXG5cbiAgICAvLyBDaGVjayBpZiB0aGF0IGNyZWF0dXJlIGJlbG9uZ3MgdG8gYSBzcGVjaWUgYW5kIGhhdmUgd2UgYWxyZWFkeSBlbmNvdXRlcmVkIGl0LlxuICAgIGxldCBpbmRleFNwZWNpZXNTYW5EYXRhID0gLTFcbiAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZT8uaWQpIHtcbiAgICAgIGluZGV4U3BlY2llc1NhbkRhdGEgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KFxuICAgICAgICBjcmVhdHVyZVNhbkRhdGEuc3BlY2llLmlkXG4gICAgICApXG4gICAgfVxuICAgIGlmIChpbmRleFNwZWNpZXNTYW5EYXRhID09PSAtMSAmJiBjcmVhdHVyZVNhbkRhdGEuc3BlY2llPy5uYW1lKSB7XG4gICAgICBpbmRleFNwZWNpZXNTYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChcbiAgICAgICAgY3JlYXR1cmVTYW5EYXRhLnNwZWNpZS5uYW1lXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQ29weSB0aGUgYXJyYXkgZm9yIHVwZGF0aW5nLlxuICAgIGNvbnN0IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCA9IHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcylcbiAgICAgIDogW11cblxuICAgIC8vIENyZWF0dXJlIGFscmVhZHkgZW5jb3VudGVyZWQuXG4gICAgaWYgKH5pbmRleFNhbkRhdGEpIHtcbiAgICAgIGNvbnN0IG9sZFNhbkRhdGEgPSBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhTYW5EYXRhXVxuICAgICAgbGV0IG5ld1NhbkRhdGFcbiAgICAgIC8vIFVwZGF0ZSBzYW5EYXRhIHdpdGggbmV3IFNBTiBkYXRhIChtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCA/KVxuICAgICAgaWYgKGNyZWF0dXJlU2FuRGF0YSkge1xuICAgICAgICBuZXdTYW5EYXRhID0gY3JlYXR1cmVTYW5EYXRhXG4gICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gb2xkU2FuRGF0YS50b3RhbExvc3MgfHwgMFxuICAgICAgICBpZiAobmV3U2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSBvbGRTYW5EYXRhLnNwZWNpZT8udG90YWxMb3NzXG4gICAgICAgICAgICA/IG9sZFNhbkRhdGEuc3BlY2llLnRvdGFsTG9zc1xuICAgICAgICAgICAgOiAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9sZFNhbkRhdGEuc3BlY2llKSBuZXdTYW5EYXRhLnNwZWNpZSA9IG9sZFNhbkRhdGEuc3BlY2llIC8vIFNob3VsZCBuZXZlciBoYXBwZW5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuZXdTYW5EYXRhLnRvdGFsTG9zcyA9IG5ld1NhbkRhdGEudG90YWxMb3NzXG4gICAgICAgID8gbmV3U2FuRGF0YS50b3RhbExvc3MgKyBzYW5Mb3NzXG4gICAgICAgIDogc2FuTG9zc1xuICAgICAgaWYgKG5ld1NhbkRhdGEudG90YWxMb3NzID4gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgIGV4YWN0U2FuTG9zcyA9XG4gICAgICAgICAgZXhhY3RTYW5Mb3NzIC0gKG5ld1NhbkRhdGEudG90YWxMb3NzIC0gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4KVxuICAgICAgICBuZXdTYW5EYXRhLnRvdGFsTG9zcyA9IG5ld1NhbkRhdGEuc2FuTG9zc01heFxuICAgICAgfVxuXG4gICAgICAvLyBDcmVkaXQgdGhlIGxvc3MgdG8gdGhhdCBjcmVhdHVyZSBzcGVjaWUgYXMgd2VsbCBpZiBpdCBleGlzdHMuXG4gICAgICBpZiAobmV3U2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzXG4gICAgICAgICAgPyBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgKyBleGFjdFNhbkxvc3NcbiAgICAgICAgICA6IGV4YWN0U2FuTG9zc1xuICAgICAgICBpZiAobmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID4gbmV3U2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heCkge1xuICAgICAgICAgIG5ld1NhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyA9IG5ld1NhbkRhdGEuc3BlY2llLnNhbkxvc3NNYXhcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBhbGwgY3JldHVyZSBmcm9tIHRoZSBzYW1lIHNwZWNpZS5cbiAgICAgICAgdGhpcy5fdXBkYXRlQWxsT2ZTYW1lU3BlY2llKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCwgbmV3U2FuRGF0YS5zcGVjaWUpXG4gICAgICB9XG5cbiAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleFNhbkRhdGFdID0gbmV3U2FuRGF0YVxuICAgICAgLy8gVXBkYXRlIHRoZSBzcGVjaWUgYWxzbyA6XG4gICAgICBpZiAofmluZGV4U3BlY2llc1NhbkRhdGEgJiYgbmV3U2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4U3BlY2llc1NhbkRhdGFdID0gbmV3U2FuRGF0YS5zcGVjaWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdlIGFscmVhZHkgZW5jb3V0ZXJlZCB0aGF0IHNwZWNpZVxuICAgICAgICAvLyBTaG91bGQgbmV2ZXIgaGFwcGVuIChlbmNvdW50ZXJlZCB0aGF0IGNyZWF0dXJlIGJ1dCBuZXZlciBoaXMgc3BlY2llKS5cbiAgICAgICAgaWYgKG5ld1NhbkRhdGEuc3BlY2llKSBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QucHVzaChuZXdTYW5EYXRhLnNwZWNpZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ3JlYXR1cmUgbmV2ZXIgZW5jb3VudGVyZWQuXG4gICAgICBjb25zdCBuZXdTYW5EYXRhID0gY3JlYXR1cmVTYW5EYXRhXG4gICAgICBuZXdTYW5EYXRhLnRvdGFsTG9zcyA9IDBcblxuICAgICAgaWYgKG5ld1NhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgIC8vIFNwZWNpZSBhbHJlYWR5IGVuY291bnRlcmVkLlxuICAgICAgICBpZiAofmluZGV4U3BlY2llc1NhbkRhdGEpIHtcbiAgICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPVxuICAgICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4U3BlY2llc1NhbkRhdGFdLnRvdGFsTG9zc1xuXG4gICAgICAgICAgLy8gV2UgYWxyZWFkeSBsb3NzIFNBTiB0byB0aGlzIHNwZWNpZSBvZiBjcmVhdHVyZS4gVGhlIGJhc2UgbG9zIGZvciB0aGlzIGNyZWF0dXJlIGlzIHRoZSBzcGVjaWUgYmFzZSBsb3NzLlxuICAgICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzXG4gICAgICAgICAgaWYgKG5ld1NhbkRhdGEudG90YWxMb3NzID4gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgICAgICBuZXdTYW5EYXRhLnRvdGFsTG9zcyA9IG5ld1NhbkRhdGEuc2FuTG9zc01heFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBXZSBuZXZlciBlbmNvdW50ZXJlZCBzcGVjaWUgb3IgY3JlYXR1cmUuXG4gICAgICAgICAgbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gMFxuICAgICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gMFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHRoZSBzYW4gbG9zcyB0byB0aGF0IGNyZWF0dXJlLlxuICAgICAgbmV3U2FuRGF0YS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnRvdGFsTG9zcyArIHNhbkxvc3NcblxuICAgICAgLy8gSWYgbG9zcyBpcyBtb3JlIHRoYW50IGNyZWF0dXJlIE1heC5cbiAgICAgIGlmIChuZXdTYW5EYXRhLnRvdGFsTG9zcyA+IG5ld1NhbkRhdGEuc2FuTG9zc01heCkge1xuICAgICAgICAvLyBHZXQgdGhlIGV4YWN0IHNhbiBsb3NzID0gbG9zcyAtIChvdmVyZmxvdyAtIG1heClcbiAgICAgICAgZXhhY3RTYW5Mb3NzID1cbiAgICAgICAgICBleGFjdFNhbkxvc3MgLSAobmV3U2FuRGF0YS50b3RhbExvc3MgLSBuZXdTYW5EYXRhLnNhbkxvc3NNYXgpXG4gICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4XG4gICAgICB9XG5cbiAgICAgIC8vIERlZHVjdCB0aGUgZXhhY3QgbG9zcyB0byB0aGF0IHNwZWNpZS5cbiAgICAgIGlmIChuZXdTYW5EYXRhLnNwZWNpZSkge1xuICAgICAgICAvLyBXYWl0IGZvciBleGFjdCBzYW4gTE9TUyBiZWZvcmUgZGVkdWNpdGluZyBpdCBmcm9tIHNwZWNpZS5cbiAgICAgICAgbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzICsgZXhhY3RTYW5Mb3NzXG4gICAgICAgIGlmIChuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPiBuZXdTYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgICAgbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2Ugbm93IHRoYXQgc3BlY2llIHVwZGF0ZSBpdC4gSWYgd2UgZG9uJ3QgYWRkIGl0LlxuICAgICAgICBpZiAofmluZGV4U3BlY2llc1NhbkRhdGEpIHtcbiAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhTcGVjaWVzU2FuRGF0YV0gPSBuZXdTYW5EYXRhLnNwZWNpZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5wdXNoKG5ld1NhbkRhdGEuc3BlY2llKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGFsbCBjcmVhdHVyZSBmcm9tIHRoZSBzYW1lIHNwZWNpZS5cbiAgICAgICAgdGhpcy5fdXBkYXRlQWxsT2ZTYW1lU3BlY2llKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCwgbmV3U2FuRGF0YS5zcGVjaWUpXG4gICAgICB9XG5cbiAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5wdXNoKG5ld1NhbkRhdGEpXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBleGFjdFNhbkxvc3MpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnOiBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RcbiAgICB9KVxuICAgIHJldHVybiBleGFjdFNhbkxvc3NcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuIChzYW5Mb3NzLCBjcmVhdHVyZSA9IG51bGwpIHtcbiAgICBpZiAoY3JlYXR1cmUpIGF3YWl0IHRoaXMubG9vc2VTYW5Ub0NyZWF0dXJlKHNhbkxvc3MsIGNyZWF0dXJlKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBzYW5Mb3NzKVxuICB9XG5cbiAgZ2V0IHNhbkRhdGEgKCkge1xuICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YSh0aGlzKVxuICB9XG5cbiAgc2FuTG9zcyAoY2hlY2tQYXNzZWQpIHtcbiAgICBpZiAoY2hlY2tQYXNzZWQpIHJldHVybiB0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZFxuICAgIHJldHVybiB0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tQYXNzZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja1Bhc3NlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NDaGVja0ZhaWxsZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja0ZhaWxsZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgIH0pLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc2FuTG9zc01pbiAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgIH0pLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgZGFpbHlTYW5Mb3NzICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4/LmRhaWx5TG9zcyB8fCAwXG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8uc2FuPy5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXG4gICAgICByZXR1cm4gOTlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLm1heClcbiAgfVxuXG4gIGdldCBtcCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUpXG4gIH1cblxuICBhc3luYyBzZXRNcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiBwYXJzZUludCh0aGlzLm1wTWF4KSkgdmFsdWUgPSBwYXJzZUludCh0aGlzLm1wTWF4KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMubXAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgZ2V0IHNhbiAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGludCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgb2NjdXBhdGlvblBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uKSB7XG4gICAgICAgIG9jY3VwYXRpb25Qb2ludHMgKz0gc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzLm9jY3VwYXRpb25cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9jY3VwYXRpb25Qb2ludHNcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzICgpIHtcbiAgICBpZiAoIXRoaXMub2NjdXBhdGlvbikgcmV0dXJuIDBcbiAgICBsZXQgcG9pbnRzID0gMFxuICAgIE9iamVjdC5lbnRyaWVzKHRoaXMub2NjdXBhdGlvbi5kYXRhLmRhdGEub2NjdXBhdGlvblNraWxsUG9pbnRzKS5mb3JFYWNoKFxuICAgICAgZW50cnkgPT4ge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gICAgcmV0dXJuIHBvaW50c1xuICB9XG5cbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLm9jY3VwYXRpb25Qb2ludHNcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRQZXJzb25hbFBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IGFyY2hldHlwZVBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpIHtcbiAgICAgICAgYXJjaGV0eXBlUG9pbnRzICs9IHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5hcmNoZXR5cGVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyY2hldHlwZVBvaW50c1xuICB9XG5cbiAgZ2V0IGFyY2hldHlwZVBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLmFyY2hldHlwZSkgcmV0dXJuIDBcbiAgICByZXR1cm4gdGhpcy5hcmNoZXR5cGUuZGF0YS5kYXRhLmJvbnVzUG9pbnRzXG4gIH1cblxuICBnZXQgZXhwZXJpZW5jZVBvaW50cyAoKSB7XG4gICAgbGV0IGV4cGVyaWVuY2VQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSkge1xuICAgICAgICBleHBlcmllbmNlUG9pbnRzICs9IHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHBlcmllbmNlUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IHBlcnNvbmFsUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LnBlcnNvbmFsKSB7XG4gICAgICAgIHBlcnNvbmFsUG9pbnRzICs9IHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5wZXJzb25hbFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGVyc29uYWxQb2ludHNcbiAgfVxuXG4gIGdldCBwZXJzb25hbFBvaW50cyAoKSB7XG4gICAgcmV0dXJuIDIgKiBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZSlcbiAgfVxuXG4gIGdldCBoYXNTa2lsbEZsYWdnZWRGb3JFeHAgKCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5kYXRhLmRhdGEuZmxhZ3M/LmRldmVsb3BlbWVudCkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zYW5NYXgpIHZhbHVlID0gdGhpcy5zYW5NYXhcbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcbiAgICAvLyBpZiggY3JlYXR1cmVEYXRhKXtcbiAgICAvLyAgY29uc3QgY3JlYXR1cmVJbmRleCA9IHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzLmZpbmRJbmRleCggYyA9PiB7XG4gICAgLy8gICAgaWYoIGMuaWQgJiYgYy5pZCA9PSBjcmVhdHVyZURhdGEuaWQpIHJldHVybiB0cnVlO1xuICAgIC8vICAgIGlmKCBjLm5hbWUgJiYgYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT0gY3JlYXR1cmVEYXRhLm5hbWU/LnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlO1xuICAgIC8vICAgIHJldHVybiBmYWxzZTt9KTtcbiAgICAvLyAgbGV0IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdDtcbiAgICAvLyAgaWYoIC0xIDwgY3JlYXR1cmVJbmRleCl7XG4gICAgLy8gICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0ID0gdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMgPyBkdXBsaWNhdGUoIHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKSA6IFtdO1xuICAgIC8vICAgIGNvbnN0IG1heExvc3NSZW1haW5pbmcgPSBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbY3JlYXR1cmVJbmRleF0ubWF4TG9zcyAtIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtjcmVhdHVyZUluZGV4XS50b3RhbExvc3M7XG4gICAgLy8gICAgaWYoIGxvc3MgPiBtYXhMb3NzUmVtYWluaW5nKSBsb3NzID0gbWF4TG9zc1JlbWFpbmluZztcbiAgICAvLyAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbY3JlYXR1cmVJbmRleF0udG90YWxMb3NzICs9IGxvc3M7XG4gICAgLy8gIH0gZWxzZSB7XG4gICAgLy8gICAgaWYoIGxvc3MgPiBjcmVhdGVEYXRhLm1heExvc3MpIGxvc3MgPSBjcmVhdGVEYXRhLm1heExvc3M7XG4gICAgLy8gICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0ID0gW3tcbiAgICAvLyAgICAgICAgaWQ6IGNyZWF0dXJlRGF0YS5pZCxcbiAgICAvLyAgICAgICAgbmFtZTogY3JlYXR1cmVEYXRhLm5hbWUsXG4gICAgLy8gICAgICAgIG1heExvc3M6IGNyZWF0ZURhdGEubWF4TG9zcyxcbiAgICAvLyAgICAgICAgdG90YWxMb3NzOiBsb3NzXG4gICAgLy8gICAgICB9XTtcbiAgICAvLyAgfVxuXG4gICAgLy8gIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoIHsgWydkYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJ10gOiBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3R9KTtcbiAgICAvLyB9XG5cbiAgICBpZiAobG9zcyA+IDApIHtcbiAgICAgIGxldCB0b3RhbExvc3MgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzKVxuICAgICAgICA6IDBcbiAgICAgIHRvdGFsTG9zcyA9IHRvdGFsTG9zcyArIGxvc3NcbiAgICAgIGlmIChsb3NzID49IDUpIHRoaXMuc2V0U3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICAgICAgaWYgKHRvdGFsTG9zcyA+PSBNYXRoLmZsb29yKHRoaXMuc2FuIC8gNSkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSc6IHZhbHVlLFxuICAgICAgICAnZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcbiAgICAgIH0pXG4gICAgfSBlbHNlIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHNldEF0dHJpYkF1dG8gKHZhbHVlLCBhdHRyaWIpIHtcbiAgICBjb25zdCB1cGRhdGVkS2V5ID0gYGRhdGEuYXR0cmlicy4ke2F0dHJpYn0uYXV0b2BcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBbdXBkYXRlZEtleV06IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBdHRyaWJBdXRvIChhdHRyaWIpIHtcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHtcbiAgICAgIGNvbnN0IGJ1aWxkID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZSlcbiAgICAgIHJldHVybiBpc05hTihidWlsZCkgPyBudWxsIDogYnVpbGRcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8pIHtcbiAgICAgIGNvbnN0IHN1bSA9XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgK1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlXG4gICAgICBpZiAoc3VtID4gMTY0KSByZXR1cm4gTWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApICsgMVxuICAgICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuIDFcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IGRiICgpIHtcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSByZXR1cm4gMFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuZGIudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYi5hdXRvKSB7XG4gICAgICBjb25zdCBzdW0gPVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlICtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgaWYgKHN1bSA+IDE2NCkgcmV0dXJuIGAke01hdGguZmxvb3IoKHN1bSAtIDQ1KSAvIDgwKX1ENmBcbiAgICAgIGlmIChzdW0gPCA2NSkgcmV0dXJuIC0yXG4gICAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgICAgaWYgKHN1bSA8IDEyNSkgcmV0dXJuIDBcbiAgICAgIGlmIChzdW0gPCAxNjUpIHJldHVybiAnMUQ0J1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYi52YWx1ZVxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LnZhbHVlXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1vdi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tb3YuYXV0bykge1xuICAgICAgbGV0IE1PVlxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIDxcbiAgICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICYmXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPFxuICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWVcbiAgICAgICkge1xuICAgICAgICBNT1YgPSA3XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDhcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPlxuICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiZcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEudHlwZSAhPT0gJ2NyZWF0dXJlJykge1xuICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmluZm9zLmFnZSkpKSB7XG4gICAgICAgICAgTU9WID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmluZm9zLmFnZSkgPj0gNDBcbiAgICAgICAgICAgICAgPyBNT1YgLSBNYXRoLmZsb29yKHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmluZm9zLmFnZSkgLyAxMCkgKyAzXG4gICAgICAgICAgICAgIDogTU9WXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChNT1YgPiAwKSByZXR1cm4gTU9WXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IHRva2VuSWQgKCkge1xuICAgIC8vIFRPRE8gY2xhcmlmaWVyIGNhIGV0IHRva2Vua2V5XG4gICAgcmV0dXJuIHRoaXMudG9rZW4gPyBgJHt0aGlzLnRva2VuLnNjZW5lLl9pZH0uJHt0aGlzLnRva2VuLmlkfWAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGxvY2tlZCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFncykge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MubG9ja2VkID0gdHJ1ZSAvLyBMb2NrZWQgYnkgZGVmYXVsdFxuICAgICAgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmxvY2tlZCc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICB9XG5cbiAgZ2V0SXRlbXNGcm9tTmFtZSAobmFtZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XG4gICAgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncy5sb2NrZWQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV1cbiAgICBjb25zdCBuYW1lID0gYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYXR0cmlidXRlTmFtZSBrZXkgb2YgYXR0cmlidXRlIHRvIGNoZWNrIGluIFsnbGNrJ11cbiAgICogQHBhcmFtIHsqfSBmYXN0Rm9yd2FyZFxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnMgZGlmZmljdWx0eSBpbiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLCBtb2RpZmllciAoLTIgKzIpLCBuYW1lXG4gICAqL1xuICBhc3luYyBhdHRyaWJ1dGVDaGVjayAoYXR0cmlidXRlTmFtZSwgZmFzdEZvcndhcmQgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYXR0cmliID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgIGlmICghYXR0cmliKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmQnLCB7XG4gICAgICAgICAgbWlzc2luZzogYXR0cmlidXRlTmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbEF0dHJpYnV0ZShhdHRyaWIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBjaGFyYWN0ZXJpc3RpY05hbWUga2V5IG9mIGNoYXJhY3RlcmlzdGljIHRvIGNoZWNrIGluIFsnc3RyJywnY29uJywnc2l6JywnZGV4JywnYXBwJywnaW50JywncG93JywnZWR1J11cbiAgICogQHBhcmFtIHsqfSBmYXN0Rm9yd2FyZFxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnMgZGlmZmljdWx0eSBpbiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLCBtb2RpZmllciAoLTIgKzIpLCBuYW1lXG4gICAqL1xuICBhc3luYyBjaGFyYWN0ZXJpc3RpY0NoZWNrIChcbiAgICBjaGFyYWN0ZXJpc3RpY05hbWUsXG4gICAgZmFzdEZvcndhcmQgPSBmYWxzZSxcbiAgICBvcHRpb25zID0ge31cbiAgKSB7XG4gICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjdGVyaXN0aWNOYW1lKVxuXG4gICAgaWYgKCFjaGFyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmRGb3JBY3RvcicsIHtcbiAgICAgICAgICBtaXNzaW5nOiBjaGFyYWN0ZXJpc3RpY05hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmIChvcHRpb25zLm1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBvcHRpb25zLmRpc3BsYXlOYW1lID0gY2hhci5sYWJlbFxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyLmtleSlcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgYXN5bmMgc2tpbGxDaGVjayAoc2tpbGxEYXRhLCBmYXN0Rm9yd2FyZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXG4gICAgKVxuICAgIGlmICghc2tpbGwubGVuZ3RoKSB7XG4gICAgICBsZXQgaXRlbSA9IG51bGxcbiAgICAgIGlmIChza2lsbERhdGEucGFjaykge1xuICAgICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoc2tpbGxEYXRhLnBhY2spXG4gICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RW50aXR5KHNraWxsRGF0YS5pZClcbiAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLmlkKSB7XG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChza2lsbERhdGEuaWQpXG4gICAgICB9XG5cbiAgICAgIC8vIE5vIHNraWxsIGZvdW5kLCB0cnkgdG8gZ2V0IGdldCBpdCBmcm9tIGNvbXBlbmRpdW0gIVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIC8vIFRPRE86IEltcGxlbWVudCByZXRyaWV2YWwgb2Ygc2tpbGwgZnJvbSBjb21wZW5kaXVtICEhXG4gICAgICAgIC8vIGdhbWUuc2V0dGluZ3MuZ2V0KCAnQ29DNycsICdEZWZhdWx0Q29tcGVuZGl1bScpO1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSAnPydcbiAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICB9XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vU2tpbGwnKSArXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmRGb3JBY3RvcicsIHtcbiAgICAgICAgICAgICAgbWlzc2luZzogc2tpbGxEYXRhLm5hbWUgPyBza2lsbERhdGEubmFtZSA6IHNraWxsRGF0YSxcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgLy8gYXdhaXQgdGhpcy5jcmVhdGVPd25lZEl0ZW0oIGR1cGxpY2F0ZShpdGVtLmRhdGEpKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkdXBsaWNhdGUoaXRlbS5kYXRhKV0pXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgIH0gZWxzZSByZXR1cm5cblxuICAgICAgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShpdGVtLm5hbWUpXG5cbiAgICAgIGlmICghc2tpbGwubGVuZ3RoKSByZXR1cm5cblxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBhd2FpdCBTa2lsbFZhbHVlRGlhbG9nLmNyZWF0ZShcbiAgICAgICAgICBza2lsbFswXS5uYW1lLFxuICAgICAgICAgIHNraWxsWzBdLmJhc2VcbiAgICAgICAgKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbFZhbHVlLmdldCgnYmFzZS12YWx1ZScpKVxuICAgICAgICBhd2FpdCBza2lsbFswXS51cGRhdGVWYWx1ZSh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIHdlYXBvbkNoZWNrICh3ZWFwb25EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgaXRlbUlkID0gd2VhcG9uRGF0YS5pZFxuICAgIGxldCB3ZWFwb25cbiAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIGxldCB3ZWFwb25zID0gdGhpcy5nZXRJdGVtc0Zyb21OYW1lKHdlYXBvbkRhdGEubmFtZSlcbiAgICAgIGlmICh3ZWFwb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBsZXQgaXRlbSA9IG51bGxcbiAgICAgICAgICBjb25zdCBwYWNrID0gd2VhcG9uRGF0YS5wYWNrID8gZ2FtZS5wYWNrcy5nZXQod2VhcG9uRGF0YS5wYWNrKSA6IG51bGxcbiAgICAgICAgICBpZiAocGFjaykge1xuICAgICAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RW50aXR5KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gaXRlbS5kYXRhPy5kYXRhPy5za2lsbD8ubWFpbj8ubmFtZVxuICAgICAgICAgICAgaWYgKG1haW5Ta2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICEhaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGl0ZW0uZGF0YS5kYXRhLnNraWxsLm1haW4uaWQgPSBza2lsbC5faWRcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cblxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kU2tpbGwgPSBpdGVtLmRhdGE/LmRhdGE/LnNraWxsPy5hbHRlcm5hdGl2Py5uYW1lXG4gICAgICAgICAgICBpZiAoc2Vjb25kU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICEhaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGl0ZW0uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5faWRcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkdXBsaWNhdGUoaXRlbS5kYXRhKV0pIC8vIE1PRElGOiAwLjgueCAnT3duZWRJdG1lbScgPT4gJ0l0ZW1cbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZShpdGVtLm5hbWUpXG4gICAgICAgICAgaWYgKCF3ZWFwb25zKSByZXR1cm5cbiAgICAgICAgICBhd2FpdCB3ZWFwb25zWzBdLnJlbG9hZCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgYEFjdG9yICR7dGhpcy5uYW1lfSBoYXMgbm8gd2VhcG9uIG5hbWVkICR7d2VhcG9uRGF0YS5uYW1lfWBcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAod2VhcG9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBgQWN0b3IgJHt0aGlzLm5hbWV9IGhhcyBtb3JlIHRoYW4gb25lIHdlYXBvbiBuYW1lZCAke3dlYXBvbkRhdGEubmFtZX0uIFRoZSBmaXJzdCBmb3VuZCB3aWxsIGJlIHVzZWRgXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cbiAgICB9XG5cbiAgICBpZiAoIXdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCB3ZWFwb24uaWQsIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICAgIGlmICh3ZWFwb24uZGF0YS5kYXRhLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgd2VhcG9uLmlkLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbml0aWF0aXZlIChoYXNHdW4gPSBmYWxzZSkge1xuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOiB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKHRoaXMuYWN0b3JLZXkpXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUx1Y2sgPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUJsaW5kVGFtcGVyaW5nID0gdHJ1ZVxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxuICAgICAgICByb2xsLmZsYXZvciA9ICdJbml0aWF0aXZlIHJvbGwnXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKCdkZXgnLCBoYXNHdW4gPyAxIDogMClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJvbGwuc3VjY2Vzc0xldmVsICsgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDEwMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBoYXNHdW5cbiAgICAgICAgICA/IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgKyA1MFxuICAgICAgICAgIDogdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGdldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncyA9IHt9XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBhc3luYyBzZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGlmICh3ZWFwb24uZGF0YS50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgIGlmICh3ZWFwb24uZGF0YS5kYXRhLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZCkpXG4gICAgfVxuXG4gICAgaWYgKHdlYXBvbi51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB3ZWFwb24uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgLyoqIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSBvciBza2lsbCB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgKi9cbiAgZmluZCAobmFtZSkge1xuICAgIC8vIFRyeSBJRFxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChuYW1lKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVnRXhwID0gL1xcKChbXildKylcXCkvXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4cC5leGVjKG5hbWUpXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkgc2hvcnROYW1lID0gbWF0Y2hlc1sxXVxuICAgIC8vIFRyeSB0byBmaW5kIGEgc2tpbGwgd2l0aCBleGFjdCBuYW1lLlxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLm5hbWUgJiZcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLnNOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpIHx8XG4gICAgICAgICAgcy5zTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgICBzaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSlcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChza2lsbC5sZW5ndGgpIHJldHVybiB7IHR5cGU6ICdpdGVtJywgdmFsdWU6IHNraWxsWzBdIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMuXG4gICAgY29uc3QgY2hhcktleSA9IFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyS2V5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyS2V5W2ldKVxuICAgICAgaWYgKGNoYXIpIHtcbiAgICAgICAgaWYgKGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgYXR0cmlidXRlLlxuICAgIGNvbnN0IGF0dHJpYktleSA9IFsnbGNrJywgJ3NhbiddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJLZXlbaV0pXG4gICAgICBpZiAoYXR0cikge1xuICAgICAgICBpZiAoYXR0ci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24ubGVuZ3RoICYmXG4gICAgICAgIHMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LlBpbG90U3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgZHJpdmVTa2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhIXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uICYmXG4gICAgICAgIHMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uLmxlbmd0aCAmJlxuICAgICAgICBzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbj8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICBnYW1lLmkxOG5cbiAgICAgICAgICAgIC5sb2NhbGl6ZSgnQ29DNy5Ecml2ZVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICAgICAgICA/LnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICAvLyBDbGFyaWZpZXIgY2EgZXQgdG9rZW5pZFxuICAgIC8qKiAqIE1PRElGIDAuOC54ICovXG4gICAgLy8gaWYgdGhpcy5zaGVldC50b2tlbiA9PiB3YXMgb3BlbmVkIGZyb20gdG9rZW5cbiAgICAvLyBpZiB0aGlzLnRva2VuID0+IHN5bnRoZXRpYyBhY3RvciA9PSB0aGlzLmlzVG9rZW5cbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4ucGFyZW50LmlkfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmlkXG4gICAgfVxuICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvL0Nhc2UgMTogdGhlIGFjdG9yIGlzIGEgc3ludGhldGljIGFjdG9yIGFuZCBoYXMgYSB0b2tlbiwgcmV0dXJuIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5pc1Rva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcblxuICAgIC8vIC8vQ2FzZSAyOiB0aGUgYWN0b3IgaXMgbm90IGEgdG9rZW4gKGxpbmtlZCBhY3RvcikuIElmIHRoZSBzaGVldCBoYXZlIGFuIGFzc29jaWF0ZWQgdG9rZW4gcmV0dXJuIHRoZSB0b2tlbiBrZXkuXG4gICAgLy8gaWYoIHRoaXMuc2hlZXQudG9rZW4pIHJldHVybiBgJHt0aGlzLnNoZWV0LnRva2VuLnNjZW5lPy5pZD90aGlzLnNoZWV0LnRva2VuLnNjZW5lLmlkOidUT0tFTid9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gO1xuXG4gICAgLy8gLy9DYXNlIDM6IEFjdG9yIGhhcyBubyB0b2tlbiByZXR1cm4gaGlzIElEO1xuICAgIC8vIHJldHVybiB0aGlzLmlkO1xuICB9XG5cbiAgZ2V0IGFjdG9yS2V5ICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnRva2VuLmFjdG9yTGluaykgcmV0dXJuIHRoaXMuaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICAvKipcbiAgICogVXNlIHRoZSBmb3JtdWxhIGlmIGF2YWlsYWJsZSB0byByb2xsIHNvbWUgY2hhcmFjdGVyaXRpY3MuXG4gICAqL1xuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoci50b3RhbCkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgci50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGVyZSBpcyBhIGZvcm11bGEsIHdpbGwgc2V0IHRoZSBjaGFyYWN0ZXJpc3RpYyB0byB0aGUgYXZlcmFnZSB2YWx1ZSAsaWYgZGl2aXNpYmxlIGJ5IDUsIG9yIHRoZSBjbG9zZXN0IDEwLlxuICAgKi9cbiAgYXN5bmMgYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBtYXggPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWluaW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgYXZlcmFnZSA9IE1hdGguZmxvb3IoKG1heCArIG1pbikgLyAyKVxuICAgICAgICBjb25zdCBjaGFyVmFsdWUgPVxuICAgICAgICAgIGF2ZXJhZ2UgJSA1ID09PSAwID8gYXZlcmFnZSA6IE1hdGgucm91bmQoYXZlcmFnZSAvIDEwKSAqIDEwXG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBhIGNoYXJhY3RlcmlzaXRjIGZvcm11bGEgaXMgYSByZWZlcmVuY2UgdG8gYW4gb3RoZXIgY2hhcmFjdGVyaXN0aWMgYW5kIHNldCBpdCBhY2NvcmRpbmdseS5cbiAgICovXG4gIGFzeW5jIHJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmIHZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGxldCBjaGFyVmFsdWVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBuZXcgUm9sbChcbiAgICAgICAgICAgIHZhbHVlLmZvcm11bGEsXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICApLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gIH1cblxuICBhc3luYyBzZXRDaGFyYWN0ZXJpc3RpYyAobmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHt9XG4gICAgY29uc3QgY2hhclZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUpKSA/IG51bGwgOiBwYXJzZUludCh2YWx1ZSlcbiAgICBjaGFyYWN0ZXJpc3RpY1tuYW1lXSA9IGNoYXJWYWx1ZVxuICAgIGlmICghY2hhclZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IGZvcm11bGEgPSBuYW1lLnJlcGxhY2UoJy52YWx1ZScsICcuZm9ybXVsYScpXG4gICAgICAgIGNoYXJhY3RlcmlzdGljW2Zvcm11bGFdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpYylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BlbWVudFBoYXNlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZmFpbHVyZSA9IFtdXG4gICAgY29uc3Qgc3VjY2VzcyA9IFtdXG4gICAgY29uc3Qgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgPSA5MFxuICAgIGNvbnN0IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQgPSA5NVxuXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKVxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmIChpdGVtLmRldmVsb3BlbWVudEZsYWcpIHtcbiAgICAgICAgICBjb25zdCBkaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwMCB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGl0ZW0udmFsdWVcbiAgICAgICAgICBsZXQgYXVnbWVudCA9IG51bGxcbiAgICAgICAgICBsZXQgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gbnVsbFxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiBza2lsbFZhbHVlIHx8IGRpZS50b3RhbCA+PSBhbHdheXNTdWNjZXNzVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zdCBhdWdtZW50RGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMCB9KS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc3VjY2Vzcy5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgU0FOIGF1Z21lbnQgd2hlbiB0aGUgc2tpbGwgZ29lcyBiZXlvbmQgdGhlIHNraWxsIG1hc3RlcmluZyB0aHJlc2hvbGQuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgPCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCAmJlxuICAgICAgICAgICAgICBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbCA+PSBza2lsbE1hc3RlcmluZ1RocmVzaG9sZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRTQU5EaWUgPSBhd2FpdCBuZXcgRGllKHtcbiAgICAgICAgICAgICAgICBmYWNlczogNixcbiAgICAgICAgICAgICAgICBudW1iZXI6IDJcbiAgICAgICAgICAgICAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWQgPSBhdWdtZW50U0FORGllLnRvdGFsXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZE1lc3NhZ2UgPSBgR2FpbmVkIDJkNiAoJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfSA9ICR7c2FuR2FpbmVkfSkgU0FOYFxuICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKHNhbkdhaW5lZE1lc3NhZ2UpXG4gICAgICAgICAgICAgIHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5TYW5HYWluZWQnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19YCxcbiAgICAgICAgICAgICAgICAgIHNhbkdhaW5lZDogc2FuR2FpbmVkLFxuICAgICAgICAgICAgICAgICAgc2tpbGw6IGl0ZW0uZGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgc2tpbGxWYWx1ZTogc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICAgIC8vIFNldCBzYW4gY29udHJvbHMgdGhhdCBpdCBkb2Vzbid0IGF1Z21lbnQgYmV5b25kIHNhbk1heFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiArIHNhbkdhaW5lZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1Z21lbnQgKz0gYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgaWYgKHNraWxsTWFzdGVyaW5nTWVzc2FnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IHNraWxsTWFzdGVyaW5nTWVzc2FnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgaXRlbS5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLmRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgZmFpbHVyZS5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IGl0ZW0udW5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuYWN0b3IgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXI6IHNwZWFrZXIgfSlcbiAgICB9XG4gICAgcmV0dXJuIHsgZmFpbHVyZTogZmFpbHVyZSwgc3VjY2Vzczogc3VjY2VzcyB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wTHVjayAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGx1Y2sgPSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmxja1xuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsTHVjazREZXYnKVxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGF3YWl0IHVwZ3JhZGVSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHVwZ3JhZGVSb2xsKVxuICAgIGlmICh1cGdyYWRlUm9sbC50b3RhbCA+IGx1Y2sudmFsdWUpIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRSb2xsID0gbmV3IFJvbGwoJzFEMTAnKVxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChhdWdtZW50Um9sbClcbiAgICAgIGlmIChsdWNrLnZhbHVlICsgYXVnbWVudFJvbGwudG90YWwgPD0gOTkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubGNrLnZhbHVlICsgYXVnbWVudFJvbGwudG90YWxcbiAgICAgICAgfSlcbiAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuTHVja0luY3JlYXNlZCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgICAgIHNjb3JlOiBsdWNrLnZhbHVlLFxuICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudFJvbGwudG90YWxcbiAgICAgICAgICB9XG4gICAgICAgICl9PC9zcGFuPmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjb3JyZWN0ZWRWYWx1ZVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGx1Y2sudmFsdWUgKyBhdWdtZW50Um9sbC50b3RhbCAtIGkgPD0gOTkpIHtcbiAgICAgICAgICAgIGNvcnJlY3RlZFZhbHVlID0gYXVnbWVudFJvbGwudG90YWwgLSBpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ2RhdGEuYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWUgKyBjb3JyZWN0ZWRWYWx1ZVxuICAgICAgICB9KVxuICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5MdWNrSW5jcmVhc2VkJyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICAgICAgc2NvcmU6IGx1Y2sudmFsdWUsXG4gICAgICAgICAgICBhdWdtZW50OiBjb3JyZWN0ZWRWYWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgKX08L3NwYW4+YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrTm90SW5jcmVhc2VkJyxcbiAgICAgICAgeyBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLCBzY29yZTogbHVjay52YWx1ZSB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcy5hY3RvciB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlcjogc3BlYWtlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BTa2lsbCAoc2tpbGxJZCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICBpZiAoIXNraWxsKSByZXR1cm5cbiAgICBsZXQgdGl0bGUgPSAnJ1xuICAgIGxldCBtZXNzYWdlID0gJydcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IG5ldyBSb2xsKCcxRDEwMCcpXG4gICAgYXdhaXQgdXBncmFkZVJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodXBncmFkZVJvbGwpXG4gICAgaWYgKHVwZ3JhZGVSb2xsLnRvdGFsID4gc2tpbGwudmFsdWUgfHwgdXBncmFkZVJvbGwudG90YWwgPj0gOTUpIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRSb2xsID0gbmV3IFJvbGwoJzFEMTAnKVxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChhdWdtZW50Um9sbClcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlN1Y2Nlc3NEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBhdWdtZW50OiBhdWdtZW50Um9sbC50b3RhbFxuICAgICAgfSlcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50Um9sbC50b3RhbClcbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2RmFpbHVyZURldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzLl9pZCB9XG4gICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXI6IHNwZWFrZXIgfSlcbiAgICBhd2FpdCBza2lsbC51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU3RhdHVzIChzdGF0dXNOYW1lKSB7XG4gICAgbGV0IHN0YXR1c1ZhbHVlID0gdGhpcy5kYXRhLmRhdGEuc3RhdHVzW3N0YXR1c05hbWVdPy52YWx1ZVxuICAgIGlmICghKHR5cGVvZiBzdGF0dXNWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSkge1xuICAgICAgc3RhdHVzVmFsdWUgPSBzdGF0dXNWYWx1ZSA9PT0gJ2ZhbHNlJyAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICBpZiAoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMgPT09IHN0YXR1c05hbWUpIHtcbiAgICAgIGlmIChzdGF0dXNWYWx1ZSkgYXdhaXQgdGhpcy5jdXJlTWFqb3JXb3VuZCgpXG4gICAgICBlbHNlIGF3YWl0IHRoaXMuaW5mbGljdE1ham9yV291bmQoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BkYXRhLnN0YXR1cy4ke3N0YXR1c05hbWV9LnZhbHVlYF06ICFzdGF0dXNWYWx1ZSB9KVxuICAgIGxldCBlZmZlY3RFZmZlY3RcbiAgICBzd2l0Y2ggKHN0YXR1c05hbWUpIHtcbiAgICAgIGNhc2UgJ2RlYWQnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCdkZWFkJylcbiAgICAgICAgICBlZmZlY3RFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnZGVhZCcpXG4gICAgICAgICAgaWYgKGVmZmVjdEVmZmVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBlZmZlY3RFZmZlY3QuZm9yRWFjaChlZmZlY3QgPT4gZWZmZWN0LmRlbGV0ZSgpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHRoaXMuZmFsbERlYWQoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZHlpbmcnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCdkeWluZycpXG4gICAgICAgICAgZWZmZWN0RWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ2R5aW5nJylcbiAgICAgICAgICBpZiAoZWZmZWN0RWZmZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGVmZmVjdEVmZmVjdC5mb3JFYWNoKGVmZmVjdCA9PiBlZmZlY3QuZGVsZXRlKCkpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5mYWxsRHlpbmcoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncHJvbmUnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCdwcm9uZScpXG4gICAgICAgICAgZWZmZWN0RWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ3Byb25lJylcbiAgICAgICAgICBpZiAoZWZmZWN0RWZmZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGVmZmVjdEVmZmVjdC5mb3JFYWNoKGVmZmVjdCA9PiBlZmZlY3QuZGVsZXRlKCkpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5mYWxsUHJvbmUoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndW5jb25zY2lvdXMnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCd1bmNvbnNjaW91cycpXG4gICAgICAgICAgZWZmZWN0RWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ3VuY29uc2Npb3VzJylcbiAgICAgICAgICBpZiAoZWZmZWN0RWZmZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGVmZmVjdEVmZmVjdC5mb3JFYWNoKGVmZmVjdCA9PiBlZmZlY3QuZGVsZXRlKCkpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5mYWxsVW5jb25zY2lvdXMoKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhc0FjdGl2ZUVmZmVjdCAoZWZmZWN0TGFiZWwpIHtcbiAgICBjb25zdCBlZmZlY3RMaXN0ID0gdGhpcy5lZmZlY3RzXG4gICAgICAubWFwKGVmZmVjdCA9PiB7XG4gICAgICAgIHJldHVybiBlZmZlY3RcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuZGF0YS5sYWJlbCA9PT0gZWZmZWN0TGFiZWwpXG4gICAgcmV0dXJuIGVmZmVjdExpc3RcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUVmZmVjdCAoZWZmZWN0TmFtZSkge1xuICAgIHN3aXRjaCAoZWZmZWN0TmFtZSkge1xuICAgICAgY2FzZSAnYm91dE9mTWFkbmVzcyc6XG4gICAgICAgIGlmICh0aGlzLmJvdXRPZk1hZG5lc3MpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3MuZGVsZXRlKClcbiAgICAgICAgICAvLyBpZiggYm91dE9mTWFkbmVzcyl7XG4gICAgICAgICAgLy8gICBhd2FpdCBib3V0T2ZNYWRuZXNzLnVwZGF0ZSh7IGRpc2FibGVkOiAhYm91dE9mTWFkbmVzcy5kYXRhLmRpc2FibGVkLCBkdXJhdGlvbjoge3NlY29uZHM6IHVuZGVmaW5lZCwgcm91bmRzOiB1bmRlZmluZWQsIHR1cm5zOiAxfX0pO1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyksXG4gICAgICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgICAgICA/ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZydcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICAgIG1hZG5lc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICByZWFsVGltZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSlcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpbnNhbml0eSc6XG4gICAgICAgIGlmICh0aGlzLmluc2FuaXR5KSB7XG4gICAgICAgICAgdGhpcy5pbnNhbml0eS5kZWxldGUoKVxuICAgICAgICAgIC8vIGlmKCBpbnNhbml0eSl7XG4gICAgICAgICAgLy8gICBhd2FpdCBpbnNhbml0eS51cGRhdGUoeyBkaXNhYmxlZDogIWluc2FuaXR5LmRhdGEuZGlzYWJsZWQsIGR1cmF0aW9uOiB7c2Vjb25kczogdW5kZWZpbmVkLCByb3VuZHM6IHVuZGVmaW5lZCwgdHVybnM6IDF9fSk7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5zYW5pdHlOYW1lJyksXG4gICAgICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgICAgICA/ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RlbnRhY2xlcy1za3VsbC5zdmcnXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdHVybnM6IDFcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgICAgICBtYWRuZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgaW5kZWZpbml0ZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLy8gdGludDogJyNmZjAwMDAnLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdHVzIChzdGF0dXNOYW1lKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5zdGF0dXMpIHJldHVybiBmYWxzZVxuICAgIGxldCBzdGF0dXNWYWx1ZSA9IHRoaXMuZGF0YS5kYXRhLnN0YXR1c1tzdGF0dXNOYW1lXT8udmFsdWVcbiAgICBpZiAodW5kZWZpbmVkID09PSBzdGF0dXNWYWx1ZSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCEodHlwZW9mIHN0YXR1c1ZhbHVlID09PSAnYm9vbGVhbicpKSB7XG4gICAgICBzdGF0dXNWYWx1ZSA9IHN0YXR1c1ZhbHVlID09PSAnZmFsc2UnIC8vIE5lY2Vzc2FyeSwgaW5jb3JyZWN0IHRlbXBsYXRlIGluaXRpYWxpemF0aW9uXG4gICAgfVxuICAgIHJldHVybiBzdGF0dXNWYWx1ZVxuICB9XG5cbiAgYXN5bmMgc2V0U3RhdHVzIChzdGF0dXNOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYGRhdGEuc3RhdHVzLiR7c3RhdHVzTmFtZX0udmFsdWVgXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRTdGF0dXMgKHN0YXR1c05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5zdGF0dXMuJHtzdGF0dXNOYW1lfS52YWx1ZWBdOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDb3VudGVyIChjb3VudGVyKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbY291bnRlcl06IDAgfSlcbiAgfVxuXG4gIGFzeW5jIHNldE9uZUZpZnRoU2FuaXR5IChvbmVGaWZ0aFNhbml0eSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknOiBvbmVGaWZ0aFNhbml0eSB9KVxuICB9XG5cbiAgZ2V0IGZpZ2h0aW5nU2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpXG4gICAgfSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbkxpc3QgPSBbXVxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3dlYXBvbicgJiYgIXZhbHVlLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldCh2YWx1ZS5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZClcbiAgICAgICAgdmFsdWUuZGF0YS5kYXRhLnNraWxsLm1haW4udmFsdWUgPSBza2lsbCA/IHNraWxsLnZhbHVlIDogMFxuICAgICAgICB3ZWFwb25MaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHdlYXBvbkxpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHdlYXBvbkxpc3RcbiAgfVxuXG4gIGdldCBmaXJlYXJtU2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBza2lsbExpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IHVzZXIgKCkge1xuICAgIC8vIGlzIHRoYXQgYWN0b3IgaW1wZXJzb25hbnRlZCBieSBhIHVzZXIgP1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmZpbmQodXNlciA9PiB7XG4gICAgICBpZiAodXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyLmlkID09PSB0aGlzLmlkKSByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkb2RnZVNraWxsICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmRvZGdlU2tpbGxOYW1lKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3JlZGl0UmF0aW5nU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlZGl0UmF0aW5nU2tpbGxOYW1lKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvc1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LkN0aHVsaHVNeXRob3NOYW1lKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvcyAoKSB7XG4gICAgY29uc3QgQ00gPSB0aGlzLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgIGlmIChDTSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBDTS52YWx1ZVxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcbiAgICAgIHJldHVybiBwYXJzZUludChDTS5kYXRhLmRhdGEudmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcsIHRydWUpXG4gIH1cblxuICBnZXQgY3JlZGl0UmF0aW5nICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGxcbiAgICBpZiAoQ1IpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ1IudmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ1IuZGF0YS5kYXRhLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNwZW5kaW5nTGV2ZWwgKCkge1xuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdcbiAgICBpZiAoQ1IgPj0gOTkpIHJldHVybiA1MDAwXG4gICAgaWYgKENSID49IDkwKSByZXR1cm4gMjUwXG4gICAgaWYgKENSID49IDUwKSByZXR1cm4gNTBcbiAgICBpZiAoQ1IgPj0gMTApIHJldHVybiAxMFxuICAgIGlmIChDUiA+PSAxKSByZXR1cm4gMlxuICAgIHJldHVybiAwLjVcbiAgfVxuXG4gIGdldCBjYXNoICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nXG4gICAgaWYgKENSID49IDk5KSByZXR1cm4gNTAwMDBcbiAgICBpZiAoQ1IgPj0gOTApIHJldHVybiBDUiAqIDIwXG4gICAgaWYgKENSID49IDUwKSByZXR1cm4gQ1IgKiA1XG4gICAgaWYgKENSID49IDEwKSByZXR1cm4gQ1IgKiAyXG4gICAgaWYgKENSID49IDEpIHJldHVybiBDUlxuICAgIHJldHVybiAwLjVcbiAgfVxuXG4gIGdldCBhc3NldHMgKCkge1xuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdcbiAgICBpZiAoQ1IgPj0gOTkpIHJldHVybiA1MDAwMDAwXG4gICAgaWYgKENSID49IDkwKSByZXR1cm4gQ1IgKiAyMDAwXG4gICAgaWYgKENSID49IDUwKSByZXR1cm4gQ1IgKiA1MDBcbiAgICBpZiAoQ1IgPj0gMTApIHJldHVybiBDUiAqIDUwXG4gICAgaWYgKENSID49IDEpIHJldHVybiBDUiAqIDEwXG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnKSBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICB9KVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpXG4gICAgfSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBvd25lcnMgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmZpbHRlcihcbiAgICAgIHUgPT4gdGhpcy50ZXN0VXNlclBlcm1pc3Npb24odSwgJ09XTkVSJykgJiYgIXUuaXNHTVxuICAgIClcbiAgfVxuXG4gIGdldCBwbGF5ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm93bmVycy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyVXNlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGdhbWUudXNlcnMuY29udGVudHMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVswXSB8fCBudWxsXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgc2V0SGVhbHRoU3RhdHVzTWFudWFsbHkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICBjb25zdCBoZWFsdGhCZWZvcmUgPSBwYXJzZUludChcbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5jdXJyZW50VGFyZ2V0LmRlZmF1bHRWYWx1ZVxuICAgICAgKVxuICAgICAgY29uc3QgaGVhbHRoQWZ0ZXIgPSBwYXJzZUludChldmVudC5vcmlnaW5hbEV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICBsZXQgZGFtYWdlVGFrZW5cbiAgICAgIC8vIGlzIGhlYWxpbmdcbiAgICAgIGlmIChoZWFsdGhBZnRlciA+IGhlYWx0aEJlZm9yZSkgcmV0dXJuIGF3YWl0IHRoaXMuc2V0SHAoaGVhbHRoQWZ0ZXIpXG4gICAgICBlbHNlIGlmIChoZWFsdGhBZnRlciA8IDApIGRhbWFnZVRha2VuID0gTWF0aC5hYnMoaGVhbHRoQWZ0ZXIpXG4gICAgICBlbHNlIGRhbWFnZVRha2VuID0gaGVhbHRoQmVmb3JlIC0gaGVhbHRoQWZ0ZXJcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpIC8vIG5lZWRlZCwgb3IgbmVnYXRpdmUgdmFsdWVzIHdpbGwgbm90IHdvcmtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoZGFtYWdlVGFrZW4sIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlIChhbW91bnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCB0b3RhbCA9IHBhcnNlSW50KGFtb3VudClcbiAgICAvLyBsZXQgaW5pdGlhbEhwID0gdGhpcy5ocDtcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSAmJiAhb3B0aW9ucy5pZ25vcmVBcm1vcikge1xuICAgICAgbGV0IGFybW9yVmFsdWVcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYSh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlKSkge1xuICAgICAgICBjb25zdCBhcm1vclJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgICAgICkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGFybW9yVmFsdWUgPSBhcm1vclJvbGwudG90YWxcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcih0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGBVbmFibGUgdG8gcHJvY2VzcyBhcm1vciB2YWx1ZSA6JHt0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlfS4gSWdub3JpbmcgYXJtb3JgXG4gICAgICAgIClcbiAgICAgICAgYXJtb3JWYWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHRvdGFsID0gdG90YWwgLSBhcm1vclZhbHVlXG4gICAgfVxuICAgIGlmICh0b3RhbCA8PSAwKSByZXR1cm4gMFxuICAgIGF3YWl0IHRoaXMuc2V0SHAodGhpcy5ocCAtIHRvdGFsKVxuICAgIGlmICh0b3RhbCA+PSB0aGlzLmhwTWF4KSB7XG4gICAgICBhd2FpdCB0aGlzLmZhbGxEZWFkKClcbiAgICAgIC8vIHJldHVybiB0aGlzLmhwTWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodG90YWwgPj0gTWF0aC5mbG9vcih0aGlzLmhwTWF4IC8gMikpIGF3YWl0IHRoaXMuaW5mbGljdE1ham9yV291bmQoKVxuICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmZhbGxVbmNvbnNjaW91cygpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFqb3JXb3VuZCkgdGhpcy5mYWxsRHlpbmcoKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiggdG90YWw+aW5pdGlhbEhwKSByZXR1cm4gaW5pdGlhbEhwO1xuICAgIHJldHVybiB0b3RhbFxuICB9XG5cbiAgYXN5bmMgaW5mbGljdE1ham9yV291bmQgKCkge1xuICAgIGlmICghdGhpcy5tYWpvcldvdW5kKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgIGNvbnN0IGNyaXRpY2FsV291bmRzRWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ2NyaXRpY2FsV291bmRzJylcbiAgICAgIGlmIChjcml0aWNhbFdvdW5kc0VmZmVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ2NyaXRpY2FsV291bmRzJyxcbiAgICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgICAgPyAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9hcm0tc2xpbmcuc3ZnJ1xuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmZhbGxQcm9uZSgpXG4gICAgaWYgKCF0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cykpIHtcbiAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayh0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZClcbiAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3VyZU1ham9yV291bmQgKCkge1xuICAgIGF3YWl0IHRoaXMudW5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgY29uc3QgY3JpdGljYWxXb3VuZHNFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnY3JpdGljYWxXb3VuZHMnKVxuICAgIGlmIChjcml0aWNhbFdvdW5kc0VmZmVjdC5sZW5ndGggPiAwKSB7XG4gICAgICBjcml0aWNhbFdvdW5kc0VmZmVjdC5mb3JFYWNoKGVmZmVjdCA9PiBlZmZlY3QuZGVsZXRlKCkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmFsbFByb25lICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldFN0YXR1cyhDT0M3LnN0YXR1cy5wcm9uZSlcbiAgICBjb25zdCBwcm9uZUVmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdwcm9uZScpXG4gICAgaWYgKHByb25lRWZmZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAncHJvbmUnLFxuICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvZmFsbGluZy5zdmcnXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgb3JpZ2luOiB0aGlzLnV1aWQsXG4gICAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJvdW5kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHVybnM6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZhbGxVbmNvbnNjaW91cyAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgY29uc3QgdW5jb25zY2lvdXNFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgndW5jb25zY2lvdXMnKVxuICAgIGlmICh1bmNvbnNjaW91c0VmZmVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ3VuY29uc2Npb3VzJyxcbiAgICAgICAgICBpY29uOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpXG4gICAgICAgICAgICA/ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2tub2NrZWQtb3V0LXN0YXJzLnN2ZydcbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgc2Vjb25kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmFsbER5aW5nICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldFN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgICBjb25zdCBkeWluZ0VmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdkeWluZycpXG4gICAgaWYgKGR5aW5nRWZmZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnZHlpbmcnLFxuICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBmYWxsRGVhZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5pbmZsaWN0TWFqb3JXb3VuZCgpXG4gICAgYXdhaXQgdGhpcy51bnNldFN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgICBhd2FpdCB0aGlzLmZhbGxVbmNvbnNjaW91cygpXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgICBjb25zdCBkZWFkRWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ2RlYWQnKVxuICAgIGlmIChkZWFkRWZmZWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnZGVhZCcsXG4gICAgICAgICAgaWNvbjogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKVxuICAgICAgICAgICAgPyAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90b21ic3RvbmUuc3ZnJ1xuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgXSlcbiAgICB9XG4gICAgY29uc3QgZHlpbmdFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnZHlpbmcnKVxuICAgIGlmICghdGhpcy5keWluZyAmJiBkeWluZ0VmZmVjdC5sZW5ndGggPiAwKSB7XG4gICAgICBkeWluZ0VmZmVjdC5mb3JFYWNoKGVmZmVjdCA9PiBlZmZlY3QuZGVsZXRlKCkpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1ham9yV291bmQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgfVxuXG4gIGdldCBkeWluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdHVzKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgZ2V0IHVuY29uc2Npb3VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gIH1cblxuICBnZXQgZGVhZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBnZXQgcHJvbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy5wcm9uZSlcbiAgfVxuXG4gIC8vIHN0YXRpYyB1cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpe1xuICAvLyAgIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGB1cGRhdGluZyBhY3RvciAke2FjdG9yLm5hbWV9YCk7XG4gIC8vICAgICBjb25zdCBwcm9uZSA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnByb25lXTtcbiAgLy8gICAgIGNvbnN0IHVuY29uc2Npb3VzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMudW5jb25zY2lvdXNdO1xuICAvLyAgICAgY29uc3QgY3JpdGljYWxXb3VuZHMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kc107XG4gIC8vICAgICBjb25zdCBkeWluZyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLmR5aW5nXTtcbiAgLy8gICAgIGlmKCBwcm9uZSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclByb25lJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIHVuY29uc2Npb3VzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXMnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggY3JpdGljYWxXb3VuZHMpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGR5aW5nKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yRHlpbmcnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JQcm9uZVwiOiBcInthY3Rvcn0gZmFsbCBwcm9uZVwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXNcIjogXCJ7YWN0b3J9IGZhbGwgdW5jb25zY2lvdXNcIixcbiAgLy8gXCJDb0M3LkluZm9BY3Rvck1ham9yV291bmRcIjogXCJ7YWN0b3J9IGdldCBhIG1ham9yIHdvdW5kXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JEeWluZ1wiOiBcInthY29yfSBpcyBkeWluZ1wiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9ySW5qdXJpZWRcIjogXCJ7YWN0b3J9IGlzIGluanVyaWVkXCIsXG5cbiAgLy8gc3RhdGljIHVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpe1xuICAvLyAgIGNvbnN0IGluanVyaWVkID0gZGF0YVVwZGF0ZT8uYWN0b3JEYXRhPy5mbGFncz8uQ29DNz8uaW5qdXJpZWQ7XG4gIC8vICAgaWYoIGluanVyaWVkKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9ySW5qdXJpZWQnLCB7YWN0b3I6IHRva2VuLm5hbWV9KSk7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsVmFsdWVEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChuYW1lID0gbnVsbCwgYmFzZVZhbHVlID0gbnVsbCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtdmFsdWUuaHRtbCcsXG4gICAgICB7IGJhc2U6IGJhc2VWYWx1ZSwgbmFtZTogbmFtZSB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFZhbHVlJywgeyBuYW1lOiBuYW1lIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZHVwbGljYXRlLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TGluayB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLl9saW5rRGF0YSA9IHtcbiAgICAgIHR5cGU6IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSyxcbiAgICAgIGNoZWNrOiBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChsaW5rRGF0YSkge1xuICAgIGNvbnN0IGxpbmsgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGF3YWl0IGxpbmsuc2V0RGF0YShsaW5rRGF0YSlcbiAgICByZXR1cm4gbGlua1xuICB9XG5cbiAgc3RhdGljIGdldCBUWVBFX0tFWVdPUkQgKCkge1xuICAgIHJldHVybiBbJ2NoZWNrJywgJ3Nhbmxvc3MnLCAnaXRlbSddXG4gIH1cblxuICBzdGF0aWMgZ2V0IENIQVJBQ19LRVlXT1JEICgpIHtcbiAgICByZXR1cm4gWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXVxuICB9XG5cbiAgc3RhdGljIGdldCBBVFRSSUJfS0VZV09SRCAoKSB7XG4gICAgcmV0dXJuIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXVxuICB9XG5cbiAgc3RhdGljIGdldCBTS0lMTF9LRVlXT1JEICgpIHtcbiAgICByZXR1cm4gWydza2lsbCddXG4gIH1cblxuICBzdGF0aWMgZ2V0IExJTktfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIRUNLOiAxLFxuICAgICAgU0FOTE9TUzogMixcbiAgICAgIElURU06IDNcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IENIRUNLX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEFSQUNURVJJU1RJQzogMSxcbiAgICAgIEFUVFJJQlVURTogMixcbiAgICAgIFNLSUxMOiAzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkge1xuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5fbGlua0RhdGEpXG4gICAgZGF0YS5pc0NoZWNrID0gdGhpcy5pcy5jaGVja1xuICAgIGRhdGEuaXNTYW5sb3NzID0gdGhpcy5pcy5zYW5sb3NzXG4gICAgZGF0YS5pc0l0ZW0gPSB0aGlzLmlzLml0ZW1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hJdGVtICgpIHtcbiAgICB0aGlzLl9saW5rRGF0YS52YWxpZEl0ZW0gPSBmYWxzZVxuICAgIGlmICghdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gJiYgIXRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KHRoaXMuX2xpbmtEYXRhLnBhY2spXG4gICAgICBpZiAoIXBhY2spIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHRoaXMuX2l0ZW0gPSBhd2FpdCBwYWNrLmdldEVudGl0eSh0aGlzLl9saW5rRGF0YS5pZClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgdGhpcy5faXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuX2xpbmtEYXRhLmlkKVxuICAgIH1cblxuICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IG51bGxcbiAgICB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZSA9IG51bGxcblxuICAgIGlmICh0aGlzLl9pdGVtKSB7XG4gICAgICBpZiAodGhpcy5faXRlbS5kYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0gdGhpcy5faXRlbS5kYXRhLm5hbWVcbiAgICAgICAgdGhpcy5fbGlua0RhdGEudmFsaWRJdGVtID0gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgIHRoaXMuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHRoaXMuX2l0ZW0uZGF0YS5uYW1lXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnZhbGlkSXRlbSA9IHRydWVcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXREYXRhICh4KSB7XG4gICAgLy8gdGhpcy5fbGlua0RhdGEgPSB4O1xuICAgIC8vIHRoaXMuX2xpbmtEYXRhLmZvcmNlTW9kaWZpZXJzID0gZmFsc2U7XG4gICAgdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxuICAgIHRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgIHRoaXMuaGFzUGxheWVyT3duZXIgPSBmYWxzZVxuXG4gICAgaWYgKHguaGFzUGxheWVyT3duZXIpIHtcbiAgICAgIHRoaXMuaGFzUGxheWVyT3duZXIgPSB0cnVlXG4gICAgICB0aGlzLmFjdG9yS2V5ID0geC5hY3RvcktleVxuICAgIH1cblxuICAgIC8vIFJldHJpZXZlIGl0ZW1cbiAgICBpZiAoeC5wYWNrICYmIHguaWQpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEucGFjayA9IHgucGFja1xuICAgICAgdGhpcy5fbGlua0RhdGEuaWQgPSB4LmlkXG4gICAgfVxuXG4gICAgaWYgKHguaWQgJiYgIXgucGFjaykge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IHRydWVcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmlkID0geC5pZFxuICAgIH1cblxuICAgIGNvbnN0IGxpbmtTZXQgPSBhd2FpdCB0aGlzLmZldGNoSXRlbSgpXG5cbiAgICBpZiAoIWxpbmtTZXQpIHtcbiAgICAgIC8vIExpbmsgZGVmaW5pdGlvblxuICAgICAgaWYgKHguY2hlY2spIHRoaXMudHlwZSA9IHguY2hlY2tcbiAgICAgIGVsc2UgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLIC8vIGNoZWNrLCBzYW5sb3NzLCBpdGVtXG4gICAgICBpZiAoeC50eXBlKSB0aGlzLmNoZWNrID0geC50eXBlXG4gICAgICAvLyBhdHRyaWIsIGNoYXJhYywgc2tpbGxcbiAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSkgdGhpcy5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUNcblxuICAgICAgLy8gTGluayBuYW1lXG4gICAgICBpZiAoeC5uYW1lKSB7XG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0gbnVsbFxuICAgICAgICB0aGlzLl9saW5rRGF0YS5za2lsbE5hbWUgPSBudWxsXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5ID0gbnVsbFxuICAgICAgICB0aGlzLl9saW5rRGF0YS5hdHRyaWJ1dGVLZXkgPSBudWxsXG4gICAgICAgIGlmICh0aGlzLmlzLmNoZWNrKSB7XG4gICAgICAgICAgc3dpdGNoICh0aGlzLmNoZWNrKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XG4gICAgICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHgubmFtZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxuICAgICAgICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGFyYWN0ZXJpc3RpY0tleSA9IHgubmFtZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcbiAgICAgICAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0geC5uYW1lXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzLml0ZW0pIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0geC5uYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kaWZpZXJzXG4gICAgaWYgKHguZGlmZmljdWx0eSB8fCAhaXNOYU4oTnVtYmVyKHguZGlmZmljdWx0eSkpKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5kaWZmaWN1bHR5ID0gTnVtYmVyKHguZGlmZmljdWx0eSlcbiAgICB9XG4gICAgaWYgKHgubW9kaWZpZXIgfHwgIWlzTmFOKE51bWJlcih4Lm1vZGlmaWVyKSkpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLm1vZGlmaWVyID0gTnVtYmVyKHgubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB4LmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgeC5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmZvcmNlTW9kaWZpZXJzID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoeC5mb3JjZU1vZGlmaWVycykgdGhpcy5fbGlua0RhdGEuZm9yY2VNb2RpZmllcnMgPSB0cnVlXG5cbiAgICAvLyBGb3JjZSBkaXNwbGF5ZWQgbmFtZVxuICAgIGlmICh4LmRpc3BsYXlOYW1lID09PSAndHJ1ZScgfHwgeC5kaXNwbGF5TmFtZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZGlzcGxheU5hbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmICh4LmxhYmVsKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCA9IHRydWVcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmxhYmVsID0geC5sYWJlbFxuICAgIH1cblxuICAgIC8vIEljb25cbiAgICBpZiAoeC5pY29uKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5oYXNJY29uID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEuaWNvbiA9IHguaWNvblxuICAgIH1cblxuICAgIC8vIEJsaW5kXG4gICAgaWYgKHguYmxpbmQgPT09ICd0cnVlJyB8fCB4LmJsaW5kID09PSB0cnVlKSB0aGlzLl9saW5rRGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIFNhbiBEYXRhXG4gICAgdGhpcy5fbGlua0RhdGEuc2FuTWluID0geC5zYW5NaW5cbiAgICB0aGlzLl9saW5rRGF0YS5zYW5NYXggPSB4LnNhbk1heFxuICB9XG5cbiAgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLl9saW5rRGF0YS50eXBlXG4gIH1cblxuICBnZXQgY2hlY2tUeXBlICgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQzpcbiAgICAgICAgcmV0dXJuICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgIHJldHVybiAnYXR0cmlidXRlJ1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMOlxuICAgICAgICByZXR1cm4gJ3NraWxsJ1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIHNldCB0eXBlICh4KSB7XG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSB0aGlzLl9saW5rRGF0YS50eXBlID0geFxuICAgIGVsc2Uge1xuICAgICAgc3dpdGNoICh4LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzYW5sb3NzJzpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSB1bmRlZmluZWRcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBjaGVjayAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5fbGlua0RhdGEuY2hlY2spKVxuICAgICAgPyBOdW1iZXIodGhpcy5fbGlua0RhdGEuY2hlY2spXG4gICAgICA6IHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IGNoZWNrICh4KSB7XG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSB0aGlzLl9saW5rRGF0YS5jaGVjayA9IE51bWJlcih4KVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSB1bmRlZmluZWRcbiAgICAgIGlmIChDb0M3TGluay5DSEFSQUNfS0VZV09SRC5pbmNsdWRlcyh4KSkge1xuICAgICAgICB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0xpbmsuQVRUUklCX0tFWVdPUkQuaW5jbHVkZXMoeCkpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3TGluay5TS0lMTF9LRVlXT1JELmluY2x1ZGVzKHgpKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTExcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaXMuY2hlY2spIHtcbiAgICAgIHN3aXRjaCAodGhpcy5jaGVjaykge1xuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUM6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLmF0dHJpYnV0ZUtleVxuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pcy5pdGVtKSByZXR1cm4gdGhpcy5fbGlua0RhdGEuaXRlbU5hbWVcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbmFtZSAoeCkge1xuICAgIGlmICh0aGlzLmlzLmNoZWNrKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5ID0geFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0geFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTDpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS5za2lsbE5hbWUgPSB4XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzLml0ZW0pIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0geFxuICB9XG5cbiAgZ2V0IGlzICgpIHtcbiAgICBjb25zdCBsaW5rID0gdGhpc1xuICAgIHJldHVybiB7XG4gICAgICBnZXQgY2hlY2sgKCkge1xuICAgICAgICByZXR1cm4gbGluay50eXBlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgIH0sXG4gICAgICBzZXQgY2hlY2sgKHgpIHtcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgfSxcbiAgICAgIGdldCBzYW5sb3NzICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmsudHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgIH0sXG4gICAgICBzZXQgc2FubG9zcyAoeCkge1xuICAgICAgICBpZiAoeCA9PT0gdHJ1ZSkgbGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgIH0sXG4gICAgICBnZXQgaXRlbSAoKSB7XG4gICAgICAgIHJldHVybiBsaW5rLnR5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICB9LFxuICAgICAgc2V0IGl0ZW0gKHgpIHtcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlICh1cGRhdGVEYXRhKSB7XG4gICAgdGhpcy5fbGlua0RhdGEgPSBtZXJnZU9iamVjdCh0aGlzLl9saW5rRGF0YSwgdXBkYXRlRGF0YSlcbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZyb21MaW5rIChsaW5rRGF0YSkge1xuICAgIGF3YWl0IHRoaXMuc2V0RGF0YShsaW5rRGF0YSlcbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxuICAgIH1cbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICBpZiAoIXRoaXMudHlwZSkgcmV0dXJuIG51bGxcbiAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgY2FzZSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0s6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIGlmICghdGhpcy50eXBlIHx8ICF0aGlzLm5hbWUpIHJldHVybiBudWxsXG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7dGhpcy5fbGlua0RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXR5cGU6JHtcbiAgICAgICAgICB0aGlzLmNoZWNrVHlwZVxuICAgICAgICB9LG5hbWU6JHt0aGlzLm5hbWV9YFxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHt0aGlzLl9saW5rRGF0YS5kaWZmaWN1bHR5fWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2xpbmtEYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke3RoaXMuX2xpbmtEYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHt0aGlzLl9saW5rRGF0YS5pY29ufWBcblxuICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHt0aGlzLl9saW5rRGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gfHwgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke3RoaXMuX2xpbmtEYXRhLmlkfWBcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaGFzTGFiZWwgJiYgdGhpcy5fbGlua0RhdGEubGFiZWwpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHt0aGlzLl9saW5rRGF0YS5sYWJlbH19YFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske3RoaXMubmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCF0aGlzLl9saW5rRGF0YS5zYW5NYXggfHwgIXRoaXMuX2xpbmtEYXRhLnNhbk1pbikgcmV0dXJuIG51bGxcblxuICAgICAgICAvLyBUT0RPIDogQmxpbmQgU0FOIHRlc3QgPz9cbiAgICAgICAgLy8gbGV0IG9wdGlvbnMgPSBgJHt0aGlzLl9saW5rRGF0YS5ibGluZD8nYmxpbmQsJzonJ31zYW5NYXg6JHt0aGlzLl9saW5rRGF0YS5zYW5NYXh9LHNhbk1pbjoke3RoaXMuX2xpbmtEYXRhLnNhbk1pbn1gO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IGBzYW5NYXg6JHt0aGlzLl9saW5rRGF0YS5zYW5NYXh9LHNhbk1pbjoke3RoaXMuX2xpbmtEYXRhLnNhbk1pbn1gXG5cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsZGlmZmljdWx0eToke3RoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5tb2RpZmllcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke3RoaXMuX2xpbmtEYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHt0aGlzLl9saW5rRGF0YS5pY29ufWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuc2FubG9zc1ske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmhhc0xhYmVsKSBsaW5rICs9IGB7JHt0aGlzLl9saW5rRGF0YS5sYWJlbH19YFxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICAvLyBEbyB3ZSBuZWVkIHRoYXQgPz8/XG4gICAgICBjYXNlIENvQzdMaW5rLkxJTktfVFlQRS5JVEVNOiB7XG4gICAgICAgIC8vIEBjb2M3Lml0ZW1bdHlwZTpvcHRpb25hbCxuYW1lOlNob3RndW4sZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNoaXRndW4gY2hlY2soLTEpfVxuICAgICAgICBpZiAoIXRoaXMudHlwZSB8fCAhdGhpcy5uYW1lKSByZXR1cm4gbnVsbFxuICAgICAgICBsZXQgb3B0aW9ucyA9IGBuYW1lOiR7dGhpcy5uYW1lfWBcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmljb24pIG9wdGlvbnMgKz0gYCxpY29uOiR7dGhpcy5fbGlua0RhdGEuaWNvbn1gXG5cbiAgICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7dGhpcy5fbGlua0RhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtIHx8IHRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHt0aGlzLl9saW5rRGF0YS5pZH1gXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaGFzTGFiZWwpIGxpbmsgKz0gYHske3RoaXMuX2xpbmtEYXRhLmxhYmVsfX1gXG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBkaWZmT2JqZWN0LCBleHBhbmRPYmplY3QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2xpbmsuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2xpbmstY3JlYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZUxpbmsnKSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6IG51bGwsIGRyb3BTZWxlY3RvcjogJy5jb250YWluZXInIH1dLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvbGluay1jcmVhdGlvbi5odG1sJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgd2lkdGg6IDQwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2hvaWNlczoge30sXG4gICAgICBhbGxvd0N1c3RvbTogdHJ1ZSxcbiAgICAgIG1pbmltdW06IDAsXG4gICAgICBtYXhpbXVtOiBudWxsXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTGlua0RhdGEgKGxpbmtEYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBsaW5rID0gYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEobGlua0RhdGEpXG4gICAgcmV0dXJuIG5ldyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nKGxpbmssIG9wdGlvbnMpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEubGluayA9IHRoaXMubGlua1xuICAgIGRhdGEuZGF0YSA9IHRoaXMubGluay5kYXRhXG4gICAgZGF0YS5mcm9tR2FtZSA9XG4gICAgICB0aGlzLmxpbmsuaXMuaXRlbSB8fFxuICAgICAgKHRoaXMubGluay5pcy5jaGVjayAmJiB0aGlzLmxpbmsuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEwpXG4gICAgZGF0YS5hc2tJZCA9XG4gICAgICBkYXRhLmZyb21HYW1lICYmXG4gICAgICAodGhpcy5saW5rLmRhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLmxpbmsuZGF0YS5mcm9tQ29tcGVuZGl1bSlcbiAgICBkYXRhLmFza1BhY2sgPSBkYXRhLmZyb21HYW1lICYmIHRoaXMubGluay5kYXRhLmZyb21Db21wZW5kaXVtXG4gICAgZGF0YS5pc1NldEZyb21HYW1lID0gZGF0YS5hc2tJZCB8fCBkYXRhLmFza1BhY2tcblxuICAgIC8vIFByZXBhcmUgZGlmZmljdWx0eSBzZWxlY3QgZGF0YVxuICAgIGRhdGEuZGlmZmljdWx0eUxldmVsID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFxuICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5ID0ge1xuICAgICAgdW5rbm93bjogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgcmVndWxhcjogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgaGFyZDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgZXh0cmVtZTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgY3JpdGljYWw6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgPT09IHRoaXMubGluay5kYXRhLmRpZmZpY3VsdHlcbiAgICB9XG4gICAgaWYgKCF0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5KSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bicpIHtcbiAgICAgICAgZGF0YS5zZWxlY3RlZERpZmZpY3VsdHkudW5rbm93biA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5LnJlZ3VsYXIgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBsaW5rIHR5cGVcbiAgICBkYXRhLmxpbmtUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpLFxuICAgICAgICBzZWxlY3RlZDogdGhpcy5saW5rLmlzLmNoZWNrXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5TQU5MT1NTLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJyksXG4gICAgICAgIHNlbGVjdGVkOiB0aGlzLmxpbmsuaXMuc2FubG9zc1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuSVRFTSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JdGVtV2VhcG9uJyksXG4gICAgICAgIHNlbGVjdGVkOiB0aGlzLmxpbmsuaXMuaXRlbVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgY2hlY2sgdHlwZSBkYXRhXG4gICAgZGF0YS5jaGVja1R5cGUgPSBDb0M3TGluay5DSEVDS19UWVBFXG4gICAgZGF0YS5zZWxlY3RlZENoZWNrVHlwZSA9IHtcbiAgICAgIGNoYXJhY3RlcmlzdGljOiBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDID09PSB0aGlzLmxpbmsuY2hlY2ssXG4gICAgICBhdHRyaWJ1dGU6IENvQzdMaW5rLkNIRUNLX1RZUEUuQVRUUklCVVRFID09PSB0aGlzLmxpbmsuY2hlY2ssXG4gICAgICBza2lsbDogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTCA9PT0gdGhpcy5saW5rLmNoZWNrXG4gICAgfVxuICAgIGlmICghdGhpcy5saW5rLmNoZWNrKSBkYXRhLnNlbGVjdGVkQ2hlY2tUeXBlLmNoYXJhY3RlcmlzdGljID0gdHJ1ZVxuXG4gICAgLy8gUHJlcGFyZSBjaGFyYWN0ZXJpc3RpY3NcbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcyA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmNoYXJhY3RlcmlzdGljcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLmtleSB8fFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLnNob3J0TmFtZSB8fFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLmxhYmVsXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5zZWxlY3RlZCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBjaGFyYWN0ZXJpc3RpY3NcbiAgICBkYXRhLmF0dHJpYnV0ZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICBzZWxlY3RlZDogZGF0YS5kYXRhLmF0dHJpYnV0ZUtleSA9PT0gJ2xjaydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JyksXG4gICAgICAgIHNlbGVjdGVkOiBkYXRhLmRhdGEuYXR0cmlidXRlS2V5ID09PSAnc2FuJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG5cbiAgICAvLyBSZXBsYWNlZCBpbiBvcHRpb25zIGJ5IGRyYWdEcm9wOiBbe2RyYWdTZWxlY3RvcjogbnVsbCwgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcid9XVxuICAgIC8vIGNvbnN0IGRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAvLyAgIGRyb3BTZWxlY3RvcjogJy5jb250YWluZXInLFxuICAgIC8vICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcC5iaW5kKHRoaXMpIH1cbiAgICAvLyB9KTtcbiAgICAvLyBjb25zdCB0ZXN0ID0gZHJhZ0Ryb3AuYmluZChodG1sWzBdKTtcblxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS5Db0M3VHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgICBhd2FpdCB0aGlzLmxpbmsudXBkYXRlRnJvbUxpbmsoZGF0YSlcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkYXRhLmFjdG9ySWQpIHtcbiAgICAgICAgY29uc3QgYWN0b3JLZXkgPVxuICAgICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICAgID8gYCR7ZGF0YS5zY2VuZUlkfS4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgICAgICA6IGRhdGEuYWN0b3JJZFxuICAgICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgICBpZiAoYWN0b3IuaGFzUGxheWVyT3duZXIpIHtcbiAgICAgICAgICB0aGlzLmxpbmsuaGFzUGxheWVyT3duZXIgPSB0cnVlXG4gICAgICAgICAgdGhpcy5saW5rLmFjdG9yS2V5ID0gYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgfSBlbHNlIHRoaXMubGluay5oYXNQbGF5ZXJPd25lciA9IGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnSXRlbScpIHtcbiAgICAgICAgaWYgKCFkYXRhLmRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5pZCkge1xuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5pZCA9IGRhdGEuaWRcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRhdGEucGFjaykge1xuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5wYWNrID0gZGF0YS5wYWNrXG4gICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5saW5rLmZldGNoSXRlbSgpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2l0Y2ggKGRhdGEuZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxuICAgICAgICAgICAgICB0aGlzLmxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgICAgICAgICB0aGlzLmxpbmsuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXG4gICAgICAgICAgICAgIHRoaXMubGluay5uYW1lID0gZGF0YS5kYXRhLm5hbWVcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXG4gICAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxuICAgICAgICAgICAgICB0aGlzLmxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICAgICAgICAgIHRoaXMubGluay5uYW1lID0gZGF0YS5kYXRhLm5hbWVcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcblxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKCF0aGlzLmxpbmsubGluaykge1xuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy53YXJuKCAnTGluayBpcyBpbnZhbGlkICEnKTtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnY2xpcGJvYXJkJzpcbiAgICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQodGhpcy5saW5rLmxpbmspXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0ge31cbiAgICAgICAgICBvcHRpb24uc3BlYWtlciA9IHtcbiAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgICBjaGVjazogdGhpcy5saW5rLmxpbmtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb3B0aW9uXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3doaXNwZXItb3duZXInOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0ge31cbiAgICAgICAgICBvcHRpb24uc3BlYWtlciA9IHtcbiAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgICBvcHRpb24ud2hpc3BlciA9IHRoaXMubGluay5hY3Rvci5vd25lcnNcbiAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMubGluay5hY3Rvci5uYW1lLFxuICAgICAgICAgICAgICBjaGVjazogdGhpcy5saW5rLmxpbmtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb3B0aW9uXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxuICAgICAgICB7XG4gICAgICAgICAgaWYgKCFjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIHRva2VucyBzZWxlY3RlZCcpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0ge31cbiAgICAgICAgICBvcHRpb24uc3BlYWtlciA9IHtcbiAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0LmFjdG9yLmhhc1BsYXllck93bmVyKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gdC5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0LmFjdG9yLm5hbWUsXG4gICAgICAgICAgICAgICAgICBjaGVjazogdGhpcy5saW5rLmxpbmtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QuXG4gICAqL1xuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZ3JvdXAgPSB0YXJnZXQ/LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJylcbiAgICBjb25zdCBncm91cE5hbWUgPSBncm91cD8uZGF0YXNldC5ncm91cFxuICAgIGlmIChncm91cE5hbWUgPT09ICdvcmlnaW4nKSB7XG4gICAgICAvLyBEZXByZWNhdGVkXG4gICAgICBpZiAodGFyZ2V0Lm5hbWUgPT09ICdmcm9tQ29tcGVuZGl1bScpIHtcbiAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9ICF0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtXG4gICAgICAgIGlmICh0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRhcmdldC5uYW1lID09PSAnZnJvbURpcmVjdG9yeScpIHtcbiAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gIXRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeVxuICAgICAgICBpZiAodGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XG4gICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMubGluay5mZXRjaEl0ZW0oKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmb3JtRGF0YUV4ID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKVxuICAgICAgaWYgKGZvcm1EYXRhRXguY2hlY2spIGZvcm1EYXRhRXguY2hlY2sgPSBOdW1iZXIoZm9ybURhdGFFeC5jaGVjaylcbiAgICAgIGlmIChmb3JtRGF0YUV4LmRpZmZpY3VsdHkpIHtcbiAgICAgICAgZm9ybURhdGFFeC5kaWZmaWN1bHR5ID0gTnVtYmVyKGZvcm1EYXRhRXguZGlmZmljdWx0eSlcbiAgICAgIH1cbiAgICAgIGlmIChmb3JtRGF0YUV4LnR5cGUpIGZvcm1EYXRhRXgudHlwZSA9IE51bWJlcihmb3JtRGF0YUV4LnR5cGUpXG4gICAgICBjb25zdCBkaWZmRGF0YSA9IGRpZmZPYmplY3QodGhpcy5saW5rLmRhdGEsIGZvcm1EYXRhRXgpXG4gICAgICBhd2FpdCB0aGlzLmxpbmsudXBkYXRlKGRpZmZEYXRhKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLy8gLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBfZ2V0U3VibWl0RGF0YTogJHt1cGRhdGVEYXRhfWApO1xuXG4gIC8vICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgLy8gICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xuICAvLyAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKTtcbiAgLy8gICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpO1xuXG4gIC8vICAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgIGNvbnN0IGRhbWFnZSA9IGRhdGEuZGF0YT8uZGFtYWdlO1xuICAvLyAgIGlmICggZGFtYWdlICkgZGFtYWdlLnBhcnRzID0gT2JqZWN0LnZhbHVlcyhkYW1hZ2U/LnBhcnRzIHx8IHt9KS5tYXAoZCA9PiBbZFswXSB8fCAnJywgZFsxXSB8fCAnJ10pO1xuXG4gIC8vICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSk7XG4gIC8vIH1cblxuICAvLyAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9vblN1Ym1pdFxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKCkge1xuICAgIGNvbnN0IGxpbmsgPSBuZXcgQ29DN0xpbmsoKVxuICAgIG5ldyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nKGxpbmssIHt9KS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIGR1cGxpY2F0ZSwgZ2FtZSwgTm9kZUZpbHRlciwgVGV4dEVkaXRvciwgdWkgKi9cblxuLyoqXG4gKiBBbGxvdyBmb3IgcGFyc2luZyBvZiBDb0M3IGVsZW1lbnRzIGluIGNoYXQgbWVzc2FnZSBhbmQgc2hlZXRzLlxuICogRm9ybWF0IGlzIDpcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cbiAqIFRZUEVfT0ZfUkVRVUVTVCA6XG4gKiAtIHNhbmxvc3MgOiB0cmlnZ2VyIGEgc2FuIGNoZWNrLCB1cG9uIGZhaWx1cmUgd2lsbCBwcm9wb3NlIHRvIGRlZHVjdCB0aGUgY29ycmVzcG9uZGluZyBTQU4uXG4gKiAtIGNoZWNrIDogdHJpZ2dlciBhIGNoZWNrIGRlcGVuZGluZyBvbiB0aGUgb3B0aW9ucy5cbiAqXG4gKiBPUFRJT05TOiBbXSA9IG9wdGlvbmFsXG4gKiBzYW5sb3NzOlxuICogICBzYW5NYXg6IG1heCBTQU4gbG9zc1xuICogICBzYW5NaW46IG1pbiBTQU4gbG9zc1xuICogY2hlY2s6XG4gKiAgIHR5cGU6IHR5cGUgb2YgY2hlY2sgKGNoYXJhY3RlcmlzdGljLCBza2lsbCwgYXR0cmliKS5cbiAqICAgbmFtZTogbmFtZSBvZiB0aGUgc2tpbGwvY2hhcmFjdGVyaXN0aWMuXG4gKiAgIFtkaWZmaWN1bHR5XTogPyAoYmxpbmQpLCAwIChyZWd1bGFyKSwgKyAoaGFyZCksICsrIChleHRyZW1lKSwgKysrIChjcml0aWNhbCkuXG4gKiAgIFttb2RpZmllcl06IC14ICh4IHBlbmFsdHkgZGljZSksICt4ICh4IGJvbnVzIGRpY2UpLCAwIChubyBtb2RpZmllcikuXG4gKiAgIFtpY29uXTogaWNvbiB0dSB1c2UgKGZvbnQgYXdzb21lKS5cbiAqICAgW2JsaW5kXTogd2lsbCB0cmlnZ2VyIGEgYmxpbmQgcm9sbC5cbiAqXG4gKiBbRElTUExBWUVEX05BTUU6IG5hbWUgdG8gZGlzcGxheS5dXG4gKlxuICovXG5cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5LCBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8vIGltcG9ydCB7IENvQzdTYW5DaGVjayB9IGZyb20gJy4uL2NoYXQvc2FuY2hlY2suanMnO1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4vbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vbGluay5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL3JvbGwtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1BhcnNlciB7XG4gIHN0YXRpYyBhc3luYyBvbkVkaXRvckRyb3AgKGV2ZW50LCBlZGl0b3IpIHtcbiAgICAvLyBUT0RPOiBNQU5BR0UgRkxBVCBNT0RJRklFUiBUSEVSRVxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIC8vIGNoZWNrIGtleSBwcmVzc2VkIChDVFJMID8pXG4gICAgLy8gaWYgQ1RSTCBjaGVjayBpZiBpdGVtIGlzIHNraWxsL3dlYXBvblxuICAgIC8vIGlmIGl0ZW0gZnJvbSBnYW1lIG9yIHBhY2sgYWRkIHJlZiB0byB0aGUgbGluayAhXG4gICAgLy8gY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLmxpbmtUeXBlID09PSAnY29jNy1saW5rJykge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGlmIChcbiAgICAgICAgIWV2ZW50LnNoaWZ0S2V5ICYmXG4gICAgICAgICh0eXBlb2YgZGF0YS5kaWZmaWN1bHR5ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIHR5cGVvZiBkYXRhLm1vZGlmaWVyID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkYXRhLm1vZGlmaWVyID0gdXNhZ2UuZ2V0KCdib251c0RpY2UnKVxuICAgICAgICAgIGRhdGEuZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW5rID0gQ29DN1BhcnNlci5jcmVhdGVDb0M3TGluayhkYXRhKVxuXG4gICAgICBpZiAobGluaykge1xuICAgICAgICBlZGl0b3IuaW5zZXJ0Q29udGVudChsaW5rKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgaWYgKGRhdGEudHlwZSAhPT0gJ0l0ZW0nKSByZXR1cm5cblxuICAgICAgbGV0IGl0ZW1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge31cblxuICAgICAgaWYgKGRhdGEucGFjaykge1xuICAgICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoZGF0YS5wYWNrKVxuICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXG4gICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KGRhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YSkge1xuICAgICAgICBpdGVtID0gZGF0YS5kYXRhXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcbiAgICAgIH1cblxuICAgICAgaWYgKCFpdGVtKSByZXR1cm5cblxuICAgICAgbGlua0RhdGEubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgaWYgKGRhdGEucGFjaykgbGlua0RhdGEucGFjayA9IGRhdGEucGFja1xuICAgICAgaWYgKGRhdGEuaWQpIGxpbmtEYXRhLmlkID0gZGF0YS5pZFxuXG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLm1vZGlmaWVyID0gdXNhZ2UuZ2V0KCdib251c0RpY2UnKVxuICAgICAgICAgICAgbGlua0RhdGEuZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxpbmtEYXRhLmNoZWNrID0gJ2NoZWNrJ1xuICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3NraWxsJ1xuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIGxpbmtEYXRhLmNoZWNrID0gJ2l0ZW0nXG4gICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnd2VhcG9uJ1xuICAgICAgfSBlbHNlIHJldHVyblxuXG4gICAgICBjb25zdCBsaW5rID0gQ29DN1BhcnNlci5jcmVhdGVDb0M3TGluayhsaW5rRGF0YSlcbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIGVkaXRvci5pbnNlcnRDb250ZW50KGxpbmspXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIFBhcnNlTWVzc2FnZSAoXG4gICAgbWVzc2FnZSxcbiAgICBodG1sLFxuICAgIGRhdGEgLyogY2hhdE1lc3NhZ2UsIGRhdGEvKiwgb3B0aW9uLCB1c2VyICovXG4gICkge1xuICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTphdHRyaWIsbmFtZTpsY2ssZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIGx1Y2sgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6c2tpbGwsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxpY29uOmZhcyBmYS1hcnJvdy1hbHQtY2lyY2xlLXJpZ2h0LG5hbWU6YW50aHJvcG9sb2d5LGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBBbnRocm9wb2xvZ3kgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3Lml0ZW1bbmFtZTpTaG90Z3VuLGljb246ZmFzIGZhLWJ1bGxzZXllLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17VXNlIHNob3RndW59XG4gICAgLy8gW1RCSV1AY29jNy5kYW1hZ2VbZm9ybXVsYToxRDZde0RhbWFnZSAxRDZ9XG4gICAgLy8gW1RCSV1AY29jNy5yb2xsW3RocmVzaG9sZDo1MF17U2ltcGxlIHJvbGx9XG5cbiAgICBpZiAoIW1lc3NhZ2UuaXNDb250ZW50VmlzaWJsZSkgcmV0dXJuXG5cbiAgICBpZiAoZGF0YS5tZXNzYWdlLmNvbnRlbnQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcygnQGNvYzcnKSkge1xuICAgICAgY29uc3QgcGFyc2VkQ29udGVudCA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChkYXRhLm1lc3NhZ2UuY29udGVudClcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLmh0bWwocGFyc2VkQ29udGVudClcbiAgICAgIC8vIGNoYXRNZXNzYWdlLmRhdGEuY29udGVudCA9IHBhcnNlZENvbnRlbnQ7XG4gICAgICBkYXRhLm1lc3NhZ2UuY29udGVudCA9IHBhcnNlZENvbnRlbnRcbiAgICB9XG4gICAgcmV0dXJuIHRydWUgLy8gYWxsb3cgbWVzc2FnZSB0byBiZSBwdWJsaXNoZWQgIVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUNvQzdMaW5rIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmNoZWNrKSByZXR1cm5cbiAgICBzd2l0Y2ggKGRhdGEuY2hlY2sudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnY2hlY2snOiB7XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxuICAgICAgICBpZiAoIWRhdGEudHlwZSB8fCAhZGF0YS5uYW1lKSByZXR1cm5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ310eXBlOiR7ZGF0YS50eXBlfSxuYW1lOiR7XG4gICAgICAgICAgZGF0YS5uYW1lXG4gICAgICAgIH1gXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZGF0YS5kaWZmaWN1bHR5fWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxuICAgICAgICBpZiAoZGF0YS5wYWNrKSBvcHRpb25zICs9IGAscGFjazoke2RhdGEucGFja31gXG4gICAgICAgIGlmIChkYXRhLmlkKSBvcHRpb25zICs9IGAsaWQ6JHtkYXRhLmlkfWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGlmIChkYXRhLmRpc3BsYXlOYW1lKSBsaW5rICs9IGB7JHtkYXRhLmRpc3BsYXlOYW1lfX1gXG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Nhbmxvc3MnOiB7XG4gICAgICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgICAgIGlmICghZGF0YS5zYW5NYXggfHwgIWRhdGEuc2FuTWluKSByZXR1cm5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ31zYW5NYXg6JHtcbiAgICAgICAgICBkYXRhLnNhbk1heFxuICAgICAgICB9LHNhbk1pbjoke2RhdGEuc2FuTWlufWBcbiAgICAgICAgaWYgKGRhdGEuZGlmZmljdWx0eSkgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICBpZiAoZGF0YS5tb2RpZmllcikgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gXG4gICAgICAgIGlmIChkYXRhLmljb24pIG9wdGlvbnMgKz0gYCxpY29uOiR7ZGF0YS5pY29ufWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuc2FubG9zc1ske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgLy8gRG8gd2UgbmVlZCB0aGF0ID8/P1xuICAgICAgY2FzZSAnaXRlbSc6IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZGF0YS50eXBlIHx8ICFkYXRhLm5hbWUpIHJldHVyblxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXR5cGU6JHtkYXRhLnR5cGV9LG5hbWU6JHtcbiAgICAgICAgICBkYXRhLm5hbWVcbiAgICAgICAgfWBcbiAgICAgICAgLy8gaWYoIGRhdGEuZGlmZmljdWx0eSkgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YDtcbiAgICAgICAgLy8gaWYoIGRhdGEubW9kaWZpZXIpIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2RhdGEubW9kaWZpZXJ9YDtcbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxuICAgICAgICBpZiAoZGF0YS5wYWNrKSBvcHRpb25zICs9IGAscGFjazoke2RhdGEucGFja31gXG4gICAgICAgIGlmIChkYXRhLmlkKSBvcHRpb25zICs9IGAsaWQ6JHtkYXRhLmlkfWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgUGFyc2VTaGVldENvbnRlbnQgKGFwcCwgaHRtbCkge1xuICAgIC8vIENoZWNrIGluIGFsbCBlZGl0b3JzIGNvbnRlbnQgZm9yIGEgbGluay5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgaHRtbC5maW5kKCdkaXYuZWRpdG9yLWNvbnRlbnQgPiAqLCBwJykpIHtcbiAgICAgIGlmIChlbGVtZW50Lm91dGVySFRNTC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKCdAY29jNycpKSB7XG4gICAgICAgIGVsZW1lbnQub3V0ZXJIVE1MID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGVsZW1lbnQub3V0ZXJIVE1MKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJpbmQgdGhlIGNsaWNrIHRvIGV4ZWN1dGUgdGhlIGNoZWNrLlxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJ2EuY29jNy1saW5rJywgQ29DN1BhcnNlci5fb25DaGVjay5iaW5kKHRoaXMpKTtcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbmsnKVxuICAgICAgLm9uKCdjbGljaycsIGFzeW5jIGV2ZW50ID0+IGF3YWl0IENvQzdQYXJzZXIuX29uQ2hlY2soZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IENvQzdQYXJzZXIuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBfZ2V0VGV4dE5vZGVzIChwYXJlbnQpIHtcbiAgICBjb25zdCB0ZXh0ID0gW11cbiAgICBjb25zdCB3YWxrID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgIHBhcmVudCxcbiAgICAgIE5vZGVGaWx0ZXIuU0hPV19URVhULFxuICAgICAgbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgKVxuICAgIHdoaWxlICh3YWxrLm5leHROb2RlKCkpIHRleHQucHVzaCh3YWxrLmN1cnJlbnROb2RlKVxuICAgIHJldHVybiB0ZXh0XG4gIH1cblxuICBzdGF0aWMgZW5yaWNoSFRNTCAoY29udGVudCkge1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGh0bWwuaW5uZXJIVE1MID0gU3RyaW5nKGNvbnRlbnQpXG5cbiAgICBsZXQgdGV4dCA9IFtdXG5cbiAgICB0ZXh0ID0gVGV4dEVkaXRvci5fZ2V0VGV4dE5vZGVzKGh0bWwpXG4gICAgLy8gQWx0ZXJuYXRpdmUgcmVnZXggOiAnQChjb2M3KS4oW15cXFtdKylcXFsoW15cXF1dKylcXF0oPzp7KFtefV0rKX0pPydcbiAgICBjb25zdCByZ3ggPSBuZXcgUmVnRXhwKFxuICAgICAgJ0AoY29jNykuKC4qPylcXFxcWyhbXlxcXFxdXSspXFxcXF0nICsgJyg/OnsoW159XSspfSk/JyxcbiAgICAgICdnaSdcbiAgICApXG4gICAgVGV4dEVkaXRvci5fcmVwbGFjZVRleHRDb250ZW50KHRleHQsIHJneCwgQ29DN1BhcnNlci5fY3JlYXRlTGluaylcbiAgICByZXR1cm4gaHRtbC5pbm5lckhUTUxcbiAgfVxuXG4gIHN0YXRpYyBiaW5kRXZlbnRzSGFuZGxlciAoaHRtbCkge1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2NsaWNrJywgYXN5bmMgZXZlbnQgPT4gYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjayhldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuICB9XG5cbiAgc3RhdGljIF9vbkRyYWdDb0M3TGluayAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2kubGluay1pY29uJylcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKGEuZGF0YXNldClcbiAgICBkYXRhLmxpbmtUeXBlID0gJ2NvYzctbGluaydcbiAgICBkYXRhLkNvQzdUeXBlID0gJ2xpbmsnXG4gICAgZGF0YS5pY29uID0gbnVsbFxuXG4gICAgaWYgKFxuICAgICAgaS5kYXRhc2V0ICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAhPT0gJ2ZhcyBmYS1kaWNlJ1xuICAgICkge1xuICAgICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXG4gICAgfVxuICAgIGRhdGEuZGlzcGxheU5hbWUgPSBhLmRhdGFzZXQuZGlzcGxheU5hbWUgPyBhLmlubmVyVGV4dCA6IG51bGxcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBzdGF0aWMgX2NyZWF0ZUxpbmsgKG1hdGNoLCB0YWcsIHR5cGUsIG9wdGlvbnMsIG5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluayddLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogdHlwZSB9LFxuICAgICAgaWNvbjogJ2ZhcyBmYS1kaWNlJyxcbiAgICAgIGJsaW5kOiBmYWxzZSxcbiAgICAgIG5hbWU6IG5hbWVcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgZm9yIChjb25zdCBtYXRjaCBvZiBBcnJheS5mcm9tKG1hdGNoZXMpKSB7XG4gICAgICBsZXQgW2tleSwgdmFsdWVdID0gbWF0Y2hbMF0uc3BsaXQoJzonKVxuICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSBkYXRhLmljb24gPSB2YWx1ZVxuICAgICAgaWYgKGtleSA9PT0gJ2JsaW5kJyAmJiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbJ2NoZWNrJ10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgfVxuICAgICAgZGF0YS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIGxldCB0aXRsZVxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyhkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSlcblxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdjaGVjayc6IHtcbiAgICAgICAgbGV0IGh1bWFuTmFtZSA9IGRhdGEuZGF0YXNldC5uYW1lXG4gICAgICAgIGlmIChcbiAgICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICBkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnbGNrJykge1xuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdzYW4nKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICBkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaHVtYW5OYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGRhdGEuZGF0YXNldC5uYW1lKVxuICAgICAgICAgICAgPy5sYWJlbFxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBodW1hbk5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3Nhbmxvc3MnOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua1Nhbkxvc3MkeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBzYW5NaW46IGRhdGEuZGF0YXNldC5zYW5NaW4sXG4gICAgICAgICAgICBzYW5NYXg6IGRhdGEuZGF0YXNldC5zYW5NYXhcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIGRhdGEubmFtZSA9IHRpdGxlXG4gICAgfSBlbHNlIGRhdGEuZGF0YXNldC5kaXNwbGF5TmFtZSA9IHRydWVcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gZ2FtZS51c2VyLmlzR00gPyBkYXRhLm5hbWUgOiB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgICBhLmRhdGFzZXRba10gPSB2XG4gICAgfVxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxuICAgIGEuaW5uZXJIVE1MID0gYCR7XG4gICAgICBkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJydcbiAgICB9PGkgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBjbGFzcz1cImxpbmstaWNvbiAke2RhdGEuaWNvbn1cIj48L2k+JHtcbiAgICAgIGRhdGEubmFtZVxuICAgIH1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYSBjaGVjayB3aGVuIGEgbGluayBpcyBjbGljcXVlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkNoZWNrIChldmVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXRcblxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIG9wdGlvbnMuZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIC8vIENsaWNrIG9yaWdpbiAoZnJvbSBtZXNzYWdlIG9yIGZyb20gc2hlZXQpXG4gICAgLy8gY29uc3QgZnJvbVNoZWV0ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJyk/ZmFsc2U6dHJ1ZTtcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzcGxheU5hbWUpIG9wdGlvbnMubGFiZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dFxuICAgICAgICBjb25zdCBsaW5rID0gYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEob3B0aW9ucylcbiAgICAgICAgY29uc3QgbGlua0RpYWxvZyA9IG5ldyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nKGxpbmspXG4gICAgICAgIGxpbmtEaWFsb2cucmVuZGVyKHRydWUpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmZvckVhY2godG9rZW4gPT4ge1xuICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgJ2NoYXJhYycsXG4gICAgICAgICAgICAgICAgICAnY2hhcicsXG4gICAgICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljcydcbiAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IuY2hhcmFjdGVyaXN0aWNDaGVjayhcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoWydza2lsbCddLmluY2x1ZGVzKG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5hY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmF0dHJpYnV0ZUNoZWNrKFxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgJ3Nhbmxvc3MnOiB7XG4gICAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodG9rZW4uYWN0b3IuaWQsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gY29uc3QgY2hlY2sgPSBuZXcgQ29DN1NhbkNoZWNrKFxuICAgICAgICAgICAgICAvLyAgIHRva2VuLmFjdG9yLmlkLFxuICAgICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWluLFxuICAgICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWF4LFxuICAgICAgICAgICAgICAvLyAgIHVuZGVmaW5lZCAhPSBvcHRpb25zLmRpZmZpY3VsdHk/Q29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpOkNvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICAgICAgICAgICAgLy8gICB1bmRlZmluZWQgIT0gb3B0aW9ucy5tb2RpZmllcj9OdW1iZXIob3B0aW9ucy5tb2RpZmllcik6MCk7XG4gICAgICAgICAgICAgIC8vIGNoZWNrLnRvTWVzc2FnZSggZXZlbnQuc2hpZnRLZXkpO1xuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlICdpdGVtJzoge1xuICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3Iud2VhcG9uQ2hlY2sob3B0aW9ucywgZXZlbnQuc2hpZnRLZXkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlcj8uZGF0YSkge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyLmRhdGEuaXRlbXMubWFwKGFzeW5jIHYgPT4ge1xuICAgICAgICAgICAgICBpZiAodi5uYW1lID09PSBvcHRpb25zLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgICAgICAgIGNoZWNrLl9yYXdWYWx1ZSA9IHYuZGF0YS5kYXRhLmJhc2VcbiAgICAgICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgICBjaGVjazogKGF3YWl0IENvQzdMaW5rLmZyb21EYXRhKG9wdGlvbnMpKS5saW5rXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICBjb25zdCBhY3RvciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3RvcihzcGVha2VyKVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgICAgIGNhc2UgJ2NoZWNrJzpcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdG9yLnNraWxsQ2hlY2sob3B0aW9ucywgZXZlbnQuc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdG9yLmF0dHJpYnV0ZUNoZWNrKG9wdGlvbnMubmFtZSwgZXZlbnQuc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnc2FubG9zcyc6IHtcbiAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoYWN0b3IuaWQsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gY29uc3QgY2hlY2sgPSBuZXcgQ29DN1NhbkNoZWNrKFxuICAgICAgICAgICAgLy8gICBhY3Rvci5pZCxcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5zYW5NaW4sXG4gICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWF4LFxuICAgICAgICAgICAgLy8gICB1bmRlZmluZWQgIT0gb3B0aW9ucy5kaWZmaWN1bHR5P0NvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KTpDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgICAgICAgICAvLyAgIHVuZGVmaW5lZCAhPSBvcHRpb25zLm1vZGlmaWVyP051bWJlcihvcHRpb25zLm1vZGlmaWVyKTowKTtcbiAgICAgICAgICAgIC8vIGNoZWNrLnRvTWVzc2FnZSggZXZlbnQuc2hpZnRLZXkpO1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdpdGVtJzoge1xuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyPy5kYXRhKSB7XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBnYW1lLnVzZXIuZGF0YS5kb2N1bWVudC5jaGFyYWN0ZXIuZGF0YS5pdGVtcy5tYXAoYXN5bmMgdiA9PiB7XG4gICAgICAgICAgICAgIGlmICh2Lm5hbWUgPT09IG9wdGlvbnMubmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gdi5kYXRhLmRhdGEuYmFzZVxuICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQ29udHJvbGxlZEFjdG9yJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgZ2V0UHJvcGVydHksIEl0ZW0sIFJvbGwsIFRleHRFZGl0b3IsIFRva2VuLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIE92ZXJyaWRlIGFuZCBleHRlbmQgdGhlIGJhc2ljIDpjbGFzczpgSXRlbWAgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtIGV4dGVuZHMgSXRlbSB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFzZScpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3BlbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcGVudGFncmFtLXJvc2Uuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgICAgfVxuICAgIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZmxhZ3MgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtYWxmdW5jdGlvbjogJ21hbGZjJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgb24gb2YgdGhlIGl0ZW0gcHJvcGVydHkgaW4gZGF0YS5kYXRhLnByb3BlcnRpZXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgOiBuYW1lIGZvciB0aGUgcHJvcGVydHkgdG8gdG9nZ2xlXG4gICAqL1xuICBhc3luYyB0b2dnbGVQcm9wZXJ0eSAocHJvcGVydHlJZCwgb3ZlcnJpZGUgPSBmYWxzZSkge1xuICAgIGxldCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGxldCBmaWdodGluZ1xuICAgIGxldCBmaXJlYXJtc1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmICFvdmVycmlkZSkge1xuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhaGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuYWhkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWhkYic6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FkZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc2hvdGd1bicpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zaG90Z3VuJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnJhbmdlLmV4dHJlbWUudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ2RhdGEucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsLFxuICAgICAgICAgICAgJ2RhdGEucmFuZ2UubG9uZy52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnZGF0YS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgfHwgcHJvcGVydHlJZCA9PT0gJ3JuZ2QnKSB7XG4gICAgICAgIGxldCBtZWxlZVdlYXBvblxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lbGVlV2VhcG9uKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5tZWxlZSc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5icnN0JzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZGJybCc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMucm5nZCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmICFvdmVycmlkZSkge1xuICAgICAgbGV0IG1vZGlmID0gZmFsc2VcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnY29tYmF0Jykge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgLy8gQ2xvc2UgY29tYmF0IGJ5IGRlZmF1bHRcbiAgICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpZ2h0aW5nJykge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpcmVhcm0nKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGlmKSB7XG4gICAgICAgIC8vIHNldCBzcGVjaWFsaXNhdGlvbiBpZiBmaWdodGluZyBvciBmaXJlYXJtXG4gICAgICAgIGlmIChmaWdodGluZykge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlyZWFybXMpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnNwZWNpYWxpemF0aW9uJzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgZGF0YS5wcm9wZXJ0aWVzLiR7cHJvcGVydHlJZH1gXG4gICAgICBjb25zdCBwcm9wVmFsdWUgPSAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllc1twcm9wZXJ0eUlkXVxuICAgICAgdGhpcy51cGRhdGUoeyBbcHJvcE5hbWVdOiBwcm9wVmFsdWUgfSkudGhlbihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaGFzUHJvcGVydHkgKHByb3BlcnR5SWQpIHtcbiAgICByZXR1cm4gdGhpcy5pc0luY2x1ZGVkSW5TZXQoJ3Byb3BlcnRpZXMnLCBwcm9wZXJ0eUlkKVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcgfHwgIXRoaXMuZGF0YS5kYXRhPy5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gc3VwZXIubmFtZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEubmFtZVxuICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAuaW5jbHVkZXModGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24/LnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICAvLyBSZXN0b3JlIG5hbWVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcHJvY2Vzc2VkXG4gICAgICBpZiAodGhpcy5pc093bmVkICYmIHN1cGVyLm5hbWUgPT09IHRoaXMuZGF0YS5uYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICAnXicgK1xuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24ucmVwbGFjZShcbiAgICAgICAgICAgICAgL1stW1xcXS97fSgpKis/LlxcXFxeJHxdL2csXG4gICAgICAgICAgICAgICdcXFxcJCYnXG4gICAgICAgICAgICApICtcbiAgICAgICAgICAgICcgXFxcXCgoLispXFxcXCkkJ1xuICAgICAgICApXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcmUuZXhlYyh0aGlzLmRhdGEubmFtZSlcbiAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsICYmIHR5cGVvZiBtYXRjaFsxXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2hbMV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1cGVyLm5hbWVcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNPd25lZCkge1xuICAgICAgcmV0dXJuIHN1cGVyLm5hbWVcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9ufSAoJHt0aGlzLmRhdGEubmFtZX0pYFxuICB9XG5cbiAgZ2V0IHNOYW1lICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnIHx8ICF0aGlzLmRhdGEuZGF0YT8ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIHN1cGVyLm5hbWVcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm5hbWVcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLmluY2x1ZGVzKHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uPy50b0xvd2VyQ2FzZSgpKVxuICAgICkge1xuICAgICAgcmV0dXJuIHN1cGVyLm5hbWVcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMuZGF0YS5uYW1lfWBcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGwpIHtcbiAgICBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMuc2hlZXQpIHJldHVybiBhd2FpdCB0aGlzLnNoZWV0LnVwZGF0ZVJvbGwocm9sbClcbiAgICBlbHNlIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcykgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlUm9sbChyb2xsKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXROYW1lV2l0aG91dFNwZWMgKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvQzdJdGVtKSB7XG4gICAgICBpZiAoaXRlbS5kYXRhLmRhdGE/LnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgICAgY29uc3Qgc3BlY05hbWVSZWdleCA9IG5ldyBSZWdFeHAoaXRlbS5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24sICdpZycpXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkTmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgIC5yZXBsYWNlKHNwZWNOYW1lUmVnZXgsICcnKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXlxcKCt8XFwpKyQvZ20sICcnKVxuICAgICAgICByZXR1cm4gZmlsdGVyZWROYW1lLmxlbmd0aCA/IGZpbHRlcmVkTmFtZSA6IGl0ZW0ubmFtZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXRlbS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgICAgY29uc3Qgc3BlY05hbWVSZWdleCA9IG5ldyBSZWdFeHAoaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uLCAnaWcnKVxuICAgICAgICBjb25zdCBmaWx0ZXJlZE5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAucmVwbGFjZShzcGVjTmFtZVJlZ2V4LCAnJylcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL15cXCgrfFxcKSskL2dtLCAnJylcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTmFtZS5sZW5ndGggPyBmaWx0ZXJlZE5hbWUgOiBpdGVtLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG5cbiAgc3RhdGljIGlzQW55U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoaXRlbSkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBc3N1bWUgaXQncyBkYXRhIG9ubHlcbiAgICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uZGF0YS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiAoXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhpdGVtKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tTa2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgIGNvbnN0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAvLyBpZiBza2lsbCBpcyBub3QgYSBzcGVjaWFsaXNhdGlvbiBtYWtlIGl0IGEgc3BlY2lhbGlzYXRpb25cbiAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm1cbiAgICAgICkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEucHJvcGVydGllcy5maWdodGluZyddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyBjbG9zZSBjb21iYXQgd2l0aG91dCBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAoIXRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnNwZWNpYWxpemF0aW9uJ10gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIHJhbmdlIGNvbWJhdCB3aXRob3V0IGEgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICghdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEucHJvcGVydGllcy5maWdodGluZyddID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuZmlyZWFybSddID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoZWNrZWRQcm9wc1xuXG4gICAgLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgLy8gIGNoZWNrZWRQcm9wc1tgZGF0YS5kYXRhLnByb3BlcnRpZXMke3Byb3BlcnR5fWBdID0gdHJ1ZTtcbiAgICAvLyB9XG4gIH1cblxuICAvLyBhc3luYyB0b2dnbGVJblNldCggc2V0LCBwcm9wZXJ0eUlkKXtcbiAgLy8gIGlmKCB0aGlzLmRhdGEuZGF0YVtzZXRdW3Byb3BlcnR5SWRdID09IFwiZmFsc2VcIikgdGhpcy5kYXRhLmRhdGFbc2V0XVtwcm9wZXJ0eUlkXSA9IFwidHJ1ZVwiOyBlbHNlIHRoaXMuZGF0YS5kYXRhW3NldF1bcHJvcGVydHlJZF0gPSBcImZhbHNlXCI7XG4gIC8vIH1cblxuICBpc0luY2x1ZGVkSW5TZXQgKHNldCwgcHJvcGVydHlJZCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGFbc2V0XSkgdGhpcy5kYXRhLmRhdGFbc2V0XSA9IFtdXG4gICAgY29uc3QgcHJvcGVydHlJbmRleCA9IHRoaXMuZGF0YS5kYXRhW3NldF0uaW5kZXhPZihwcm9wZXJ0eUlkKVxuICAgIGlmIChwcm9wZXJ0eUluZGV4ID4gLTEpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmRldmVsb3BlbWVudCc6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1bmZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MuZGV2ZWxvcGVtZW50JzogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICBnZXQgZGV2ZWxvcGVtZW50RmxhZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gIH1cblxuICBhc3luYyB0b2dnbGVJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBmbGFnVmFsdWUgPSAhdGhpcy5nZXRJdGVtRmxhZyhmbGFnTmFtZSlcbiAgICBjb25zdCBuYW1lID0gYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgIWZsYWdWYWx1ZSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgZGF0YS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZsYWdWYWx1ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWdOYW1lID09PSAnZGV2ZWxvcGVtZW50Jykge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnWFAgR2FpbiBkaXNhYmxlZC4nKVxuICAgICAgfVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IG5hbWUgPSBgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BkYXRhLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFncykge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXVxuICB9XG5cbiAgZ2V0IHVzZXNBbHRlcm5hdGl2ZVNraWxsICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXM/LmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcz8uYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy50aHJvd24gPT09IHRydWUpXG4gICAgKVxuICB9XG5cbiAgZ2V0IG1heFVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgbXVsdGlTaG90ID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heClcbiAgICBpZiAoaXNOYU4obXVsdGlTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gbXVsdGlTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBzaW5nbGVTaG90ID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbClcbiAgICBpZiAoaXNOYU4oc2luZ2xlU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIHNpbmdsZVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmRTdHJpbmcgKCkge1xuICAgIGxldCB1c2VzUGVyUm91bmRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbCkge1xuICAgICAgdXNlc1BlclJvdW5kID0gdGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbFxuICAgIH0gZWxzZSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSAnMSdcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXgpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heH0pYFxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvKSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25BdXRvJyl9YFxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5icnN0KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CcnN0Jyl9YFxuICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCkge1xuICAgICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdH0pYFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1c2VzUGVyUm91bmRcbiAgfVxuXG4gIGdldCBtdWx0aXBsZVNob3RzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5tYXhVc2VzUGVyUm91bmQgPD0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgc2luZ2xlU2hvdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnVzZXNQZXJSb3VuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgYmFzZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGxvbmdSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnJhbmdlLmxvbmcudmFsdWUpXG4gIH1cblxuICBnZXQgZXh0cmVtZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEucmFuZ2UuZXh0cmVtZS52YWx1ZSlcbiAgfVxuXG4gIGdldCBza2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbXVxuXG4gICAgY29uc3Qgc2tpbGxQcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHtcbiAgICAgICAgc2tpbGxQcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsUHJvcGVydGllc1xuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmRhdGEuYmFzZSAhPT0gJ3N0cmluZycpIHJldHVybiB0aGlzLmRhdGEuZGF0YS5iYXNlXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbCh0aGlzLmRhdGEuZGF0YS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3ZhbHVlLCB0cnVlXVxuICAgIH1cbiAgICByZXR1cm4gWyFpc05hTihwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5iYXNlKSlcbiAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYmFzZSlcbiAgICAgIDogbnVsbCwgZmFsc2VdXG4gIH1cblxuICBhc3luYyBhc3luY0Jhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldCBiYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJhc2UnOiBlWzBdIH0pXG4gICAgfVxuICAgIHJldHVybiBlWzBdXG4gIH1cblxuICBnZXQgdmFsdWUgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0aGlzLmFjdG9yLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5iYXNlXG4gICAgICB2YWx1ZSArPSB0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ucGVyc29uYWxcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ucGVyc29uYWwpXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/Lm9jY3VwYXRpb25cbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbilcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKVxuICAgICAgICA6IDBcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKSkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmFyY2hldHlwZSkge1xuICAgICAgICAgIHZhbHVlICs9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuICFpc05hTih2YWx1ZSkgPyB2YWx1ZSA6IG51bGxcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVZhbHVlICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuYWN0b3IuZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZGVsdGEgPSBwYXJzZUludCh2YWx1ZSkgLSB0aGlzLnZhbHVlXG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIGRlbHRhXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUV4cGVyaWVuY2UgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmFjdG9yLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgcGFyc2VJbnQoeClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGdldEJ1bGxldExlZnQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYW1tbykge1xuICAgICAgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYW1tb1xuICB9XG5cbiAgYXN5bmMgcmVsb2FkICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtYXhCdWxsZXQgPSB0aGlzLmRhdGEuZGF0YS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0KVxuICB9XG5cbiAgYXN5bmMgc2V0QnVsbGV0cyAoYnVsbGV0cykge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYW1tbyc6IGJ1bGxldHMgfHwgMCB9KVxuICB9XG5cbiAgYXN5bmMgYWRkQnVsbGV0ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBidWxsZXRzID0gYXdhaXQgdGhpcy5nZXRCdWxsZXRMZWZ0KClcbiAgICBjb25zdCBtYXhCdWxsZXRzID0gdGhpcy5kYXRhLmRhdGEuYnVsbGV0c1xuICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5idWxsZXRzKVxuICAgICAgOiAxXG4gICAgaWYgKGJ1bGxldHMgKyAxID49IG1heEJ1bGxldHMpIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXRzKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgKyAxKVxuICB9XG5cbiAgYXN5bmMgc2hvb3RCdWxsZXRzICh4KSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgaWYgKHggPiBidWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoMClcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzIC0geClcbiAgfVxuXG4gIHN0YXRpYyBtZXJnZU9wdGlvbmFsU2tpbGxzIChza2lsbExpc3QsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBqb2ludEFycmF5ID0gc2tpbGxMaXN0LmNvbmNhdChvcHRpb25zKVxuICAgIHJldHVybiBqb2ludEFycmF5XG4gICAgICAucmVkdWNlKChuZXdBcnJheSwgaXRlbSkgPT4ge1xuICAgICAgICAvLyBJZiBza2lsbCBpcyBub3QgYSBnZW5lcmljIHNwZWMgYW5kIGlzIGFscmVhZHkgaW5jbHVkZWQgd2UgZG9uJ3QgYWRkIGl0ZW1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkgJiZcbiAgICAgICAgICBuZXdBcnJheS5maW5kKHNraWxsID0+IHNraWxsLm5hbWUgPT09IGl0ZW0ubmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIG5ld0FycmF5XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSBpdGVtIGlzIGFkZGVkXG4gICAgICAgIHJldHVybiBbLi4ubmV3QXJyYXksIGl0ZW1dXG4gICAgICB9LCBbXSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGxldCBsY2FcbiAgICAgICAgbGV0IGxjYlxuICAgICAgICBpZiAoYS5kYXRhLnByb3BlcnRpZXMgJiYgYi5kYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICBsY2EgPSBhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsXG4gICAgICAgICAgICA/IGEuZGF0YS5zcGVjaWFsaXphdGlvbi50b0xvd2VyQ2FzZSgpICsgYS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIDogYS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICBsY2IgPSBiLmRhdGEucHJvcGVydGllcy5zcGVjaWFsXG4gICAgICAgICAgICA/IGIuZGF0YS5zcGVjaWFsaXphdGlvbi50b0xvd2VyQ2FzZSgpICsgYi5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIDogYi5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsY2EgPSBhLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIGxjYiA9IGIubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxjYS5sb2NhbGVDb21wYXJlKGxjYilcbiAgICAgIH0pXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YSlcbiAgICAvLyBGaXggOiBkYXRhIGNhbiBoYXZlIGRlc2NyaXB0aW9uIGRpcmVjdGx5IGluIGZpZWxkLCBub3QgdW5kZXIgdmFsdWUuXG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHtcbiAgICAgICAgdmFsdWU6IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHNwZWNpYWw6ICcnXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9ICcnXG4gICAgfVxuICAgIGNvbnN0IGxhYmVscyA9IFtdXG5cbiAgICAvLyBSaWNoIHRleHQgZGVzY3JpcHRpb25cbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIGh0bWxPcHRpb25zXG4gICAgKVxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsKVxuXG4gICAgLy8gSXRlbSB0eXBlIHNwZWNpZmljIHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wcyA9IFtdXG4gICAgY29uc3QgZm4gPSB0aGlzW2BfJHt0aGlzLmRhdGEudHlwZX1DaGF0RGF0YWBdXG4gICAgaWYgKGZuKSBmbi5iaW5kKHRoaXMpKGRhdGEsIGxhYmVscywgcHJvcHMsIGh0bWxPcHRpb25zKVxuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIHByb3BlcnRpZXMgYW5kIHJldHVyblxuICAgIGRhdGEucHJvcGVydGllcyA9IHByb3BzLmZpbHRlcihwID0+ICEhcClcbiAgICBkYXRhLmxhYmVscyA9IGxhYmVsc1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfd2VhcG9uQ2hhdERhdGEgKGRhdGEsIGxhYmVscywgcHJvcHMpIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlKSBwcm9wcy5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIGxldCBza2lsbExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsJylcbiAgICBsZXQgc2tpbGxOYW1lID0gJydcbiAgICBsZXQgZm91bmQgPSBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKSB7XG4gICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHNraWxsTmFtZSArPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxzJylcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHtDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpfWBcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgc2tpbGxOYW1lID0gdGhpcy5kYXRhLmRhdGEuc2tpbGwubWFpbi5uYW1lXG4gICAgICBpZiAodGhpcy51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB0aGlzLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHt0aGlzLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWV9YFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChza2lsbE5hbWUpIHtcbiAgICAgIGxhYmVscy5wdXNoKHtcbiAgICAgICAgbmFtZTogc2tpbGxMYWJlbCxcbiAgICAgICAgdmFsdWU6IHNraWxsTmFtZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uVXNlc1BlclJvdW5kJyksXG4gICAgICB2YWx1ZTogdGhpcy51c2VzUGVyUm91bmRTdHJpbmdcbiAgICB9KVxuXG4gICAgbGFiZWxzLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbk1hbGZ1bmN0aW9uJyksXG4gICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEubWFsZnVuY3Rpb24gPyB0aGlzLmRhdGEuZGF0YS5tYWxmdW5jdGlvbiA6ICctJ1xuICAgIH0pXG5cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYnVsbGV0cykge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnVsbGV0c0luTWFnJyksXG4gICAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZGF0YS5idWxsZXRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNhbkJlUHVzaGVkICgpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMucHVzaCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmltcGxcbiAgfVxuXG4gIGdldCBpc0RvZGdlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9kZ2VTa2lsbE5hbWUnKS50b0xvd2VyQ2FzZSgpXG4gICAgKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIEF1ZGlvSGVscGVyLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hlY2sge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgYWN0b3IgPSBudWxsLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBkaWNlTW9kID0gMCxcbiAgICBkaWZmaWN1bHR5ID0gbnVsbCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwXG4gICkge1xuICAgIHRoaXMuYWN0b3IgPSBhY3RvclxuICAgIHRoaXMuc2tpbGwgPSBza2lsbFxuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgICB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgdGhpcy5yYXdWYWx1ZSA9IDAgLy8gdmFsdWUgbmVlZGVkIGJlZm9yZSBkaWZmaWN1bHR5XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBudWxsXG4gICAgdGhpcy5yZWZlcmVuY2VNZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5wdXNoaW5nID0gZmFsc2VcbiAgICB0aGlzLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcblxuICAgIGlmIChkaWZmaWN1bHR5ID09PSBudWxsKSB7XG4gICAgICBjb25zdCBpc1Vua25vd24gPVxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gaXNVbmtub3duXG4gICAgICAgID8gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBjYXJkVHlwZSAoKSB7XG4gICAgcmV0dXJuICdyb2xsQ2FyZCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGlmZmljdWx0eUxldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdW5rbm93bjogLTEsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNCxcbiAgICAgIGltcG9zc2libGU6IDlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZ1bWJsZTogLTk5LFxuICAgICAgZmFpbHVyZTogMCxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRpZmZpY3VsdHlTdHJpbmcgKGRpZmZpY3VsdHlMZXZlbCkge1xuICAgIHN3aXRjaCAoXG4gICAgICAhaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHlMZXZlbCkpXG4gICAgICAgID8gTnVtYmVyKGRpZmZpY3VsdHlMZXZlbClcbiAgICAgICAgOiBkaWZmaWN1bHR5TGV2ZWxcbiAgICApIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgLy8gaWYgKCF0aGlzLmFjdG9yIHx8ICF0aGlzLmFjdG9yLmlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICB0aGlzLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0udmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNraWxsKSB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMSkgcmV0dXJuIDFcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgcmF3VmFsdWUgKHgpIHtcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IHhcbiAgfVxuXG4gIHNldCB1dWlkICh4KSB7XG4gICAgdGhpcy5fdXVpZCA9IHhcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICBpZiAoIXRoaXMuX3V1aWQpIHRoaXMuX3V1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHJldHVybiB0aGlzLl91dWlkXG4gIH1cblxuICBnZXQgaGFzQ2FyZCAoKSB7XG4gICAgY29uc3QgY2hhdENhcmQgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy51dWlkID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndXVpZCcpICYmXG4gICAgICAgIENvQzdDaGVjay5jYXJkVHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKGNoYXRDYXJkLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmF3VmFsdWVTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICkge1xuICAgICAgaWYgKHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyAnKycgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICApXG4gICAgfSBlbHNlIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICBnZXQgY3JpdGljYWxUaHJlc2hvbGQgKCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBnZXQgcmVndWxhclRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlID49IDEwMCkgcmV0dXJuIDk5XG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5yYXdWYWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBoYXJkVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBleHRyZW1lVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDUpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdW1ibGVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gdGhpcy5yYXdWYWx1ZSA8IDUwID8gOTYgOiAxMDBcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc1RocmVzaG9sZCAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5U3RyaW5nICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgZ2V0IG1vZGlmaWVkUmVzdWx0ICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9tb2RpZmllZFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLl9tb2RpZmllZFJlc3VsdFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIGNvbnN0IG1vZGlmaWVkID0gdGhpcy5kaWNlcy50b3RhbCArIHRoaXMuZmxhdERpY2VNb2RpZmllclxuICAgICAgaWYgKG1vZGlmaWVkIDwgMSkgcmV0dXJuIDFcbiAgICAgIGlmIChtb2RpZmllZCA+IDEwMCkgcmV0dXJuIDEwMFxuICAgICAgcmV0dXJuIG1vZGlmaWVkXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRpY2VzLnRvdGFsXG4gIH1cblxuICBzZXQgbW9kaWZpZWRSZXN1bHQgKHgpIHtcbiAgICB0aGlzLl9tb2RpZmllZFJlc3VsdCA9IHhcbiAgfVxuXG4gIGdldCBmbGF0RGljZU1vZGlmaWVyU3RyaW5nICgpIHtcbiAgICBpZiAoIXRoaXMuZmxhdERpY2VNb2RpZmllcikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIGArJHt0aGlzLmZsYXREaWNlTW9kaWZpZXJ9YFxuICAgIHJldHVybiB0aGlzLmZsYXREaWNlTW9kaWZpZXIudG9TdHJpbmcoKVxuICB9XG5cbiAgZ2V0IGlzRnVtYmxlICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPj0gdGhpcy5mdW1ibGVUaHJlc2hvbGRcbiAgfVxuXG4gIGdldCBpc0NyaXRpY2FsICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDFcbiAgfVxuXG4gIGdldCBpc0V4dHJlbWVTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICB9XG5cbiAgZ2V0IHBhc3NlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmx1Y2tTcGVudCkgcmV0dXJuIHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc1RocmVzaG9sZCA+PSB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8IHRoaXMuaXNDcml0aWNhbFxuICB9XG5cbiAgZ2V0IGZhaWxlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiAhdGhpcy5wYXNzZWRcbiAgfVxuXG4gIGdldCBpc1NpbXBsZVJvbGwgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5yYXdWYWx1ZSA9PT0gJ3VuZGVmaW5lZCdcbiAgfVxuXG4gIGdldCBoYXNCb251cyAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNQZW5hbHR5ICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPCAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc01vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgIT09IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgZGljZU1vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5fZGljZU1vZGlmaWVyKSByZXR1cm4gdGhpcy5fZGljZU1vZGlmaWVyXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBkaWNlTW9kaWZpZXIgKHgpIHtcbiAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwubmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5sYWJlbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzTmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zTmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5zaG9ydFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdWxsTmFtZSAoKSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLl9kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgbW9kaWZpZXIgPVxuICAgICAgdGhpcy5fZGljZU1vZGlmaWVyID4gMFxuICAgICAgICA/IGArJHt0aGlzLl9kaWNlTW9kaWZpZXJ9YFxuICAgICAgICA6IHRoaXMuX2RpY2VNb2RpZmllci50b1N0cmluZygpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7IGRpZmZpY3VsdHk6IGRpZmZpY3VsdHksIG1vZGlmaWVyOiBtb2RpZmllciwgbmFtZTogdGhpcy5uYW1lIH1cbiAgICApXG4gIH1cblxuICBnZXQgcm9sbGVkICgpIHtcbiAgICBpZiAodGhpcy5kaWNlKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGNoZWNrIGZyb20gYW4gSFRNTEVsZW1lbnQgb3IgYSBjaGF0IGNhcmQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgIFRoZSBIVE1MRWxlbWVudCB0aGF0IGlzIGEgcm9sbC1yZXN1bHQgb3IgYSBjaGF0IGNhcmQgY29udGFpbmluZyBhIHNpbmdsZSByb2xsLXJlc3VsdC5cbiAgICogQHJldHVybiB7Q29DN0NoZWNrfSAgICAgIEEgQ29DN0NoZWNrLlxuICAgKi9cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbFJlc3VsdCA9IGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpXG4gICAgICA/IGNhcmRcbiAgICAgIDogY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQocm9sbFJlc3VsdCwgY2hlY2spXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNoZWNrLm1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHB1c2ggKGNhcmQsIHB1Ymxpc2ggPSB0cnVlKSB7XG4gICAgY29uc3Qgb2xkQ2hlY2sgPSBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZCkgLy8gVE9ETzogUmVmYWN0b3JpbmdcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCBza2lsbElkID0gY2FyZC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBjaGFyYWMgPSBjYXJkLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICBjb25zdCBpdGVtSWQgPSBjYXJkLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZGljZU1vZCA9IGNhcmQuZGF0YXNldC5kaWNlTW9kXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IGNhcmQuZGF0YXNldC5kaWZmaWN1bHR5XG5cbiAgICBsZXQgcHVzaGVkUm9sbFxuICAgIGlmIChza2lsbElkKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjayhhY3RvcklkLCBza2lsbElkLCBpdGVtSWQsIGRpY2VNb2QsIGRpZmZpY3VsdHkpXG4gICAgfSBlbHNlIGlmIChjaGFyYWMpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHB1c2hlZFJvbGwuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgICAgcHVzaGVkUm9sbC5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgcHVzaGVkUm9sbC5hY3RvciA9IGFjdG9ySWRcbiAgICAgIHB1c2hlZFJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGFyYWNcbiAgICB9IGVsc2UgcmV0dXJuXG4gICAgaWYgKG9sZENoZWNrLnV1aWQpIHtcbiAgICAgIHB1c2hlZFJvbGwuY29udGV4dCA9IG9sZENoZWNrLmNvbnRleHRcbiAgICAgIHB1c2hlZFJvbGwudXVpZCA9IG9sZENoZWNrLnV1aWRcbiAgICB9XG4gICAgaWYgKG9sZENoZWNrLnBhcmVudCkgcHVzaGVkUm9sbC5wYXJlbnQgPSBvbGRDaGVjay5wYXJlbnRcbiAgICBwdXNoZWRSb2xsLnB1c2hpbmcgPSB0cnVlXG4gICAgYXdhaXQgcHVzaGVkUm9sbC5yb2xsKClcbiAgICBpZiAocHVibGlzaCkgcHVzaGVkUm9sbC50b01lc3NhZ2UodHJ1ZSwgY2FyZClcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgc2V0IGFjdG9yICh4KSB7XG4gICAgdGhpcy5hY3RvcktleSA9IHhcbiAgICBpZiAoeCA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4IGluc3RhbmNlb2YgQWN0b3IpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICAgICAgaWYgKHgudG9rZW4gJiYgeC50b2tlbi5zY2VuZSAmJiB4LnRva2VuLnNjZW5lLmlkKSB7XG4gICAgICAgIHRoaXMuYWN0b3JLZXkgPSBgJHt4LnRva2VuLnNjZW5lLmlkfS4ke3gudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHRoaXMuYWN0b3JLZXkgPSB4LmlkIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHguaW5jbHVkZXMoJy4nKSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0geC5zcGxpdCgnLicpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgdGhpcy5fYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5fYWN0b3IubmFtZSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICB0aGlzLl9hY3RvciA9IHRva2VuLmFjdG9yXG4gICAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdG9rZW4ubmFtZVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5fYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoeClcbiAgICB0aGlzLmFjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgc3VjY2Vzc0xldmVsSWNvbnMgKCkge1xuICAgIGlmICh0aGlzLnVua25vd25EaWZmaWN1bHR5KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zdWNjZXNzTGV2ZWwgPj0gdGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBpbmRleCA8IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMTtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgKSB7XG4gICAgICAgIGljb25zLnB1c2godGhpcy5pc0NyaXRpY2FsID8gJ21lZGFsJyA6ICdzdGFyJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN1Y2Nlc3NIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDFcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0NyaXRpY2FsID8gJ2NyaXRpY2FsJyA6ICdzdWNjZXNzJyxcbiAgICAgICAgaGludDogc3VjY2Vzc0hpbnQsXG4gICAgICAgIGljb25zOiBpY29uc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBjb25zdCBzdWNjZXNzTGV2ZWwgPSB0aGlzLmlzRnVtYmxlID8gLTEgOiB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNGdW1ibGUgPyAnc2t1bGwnIDogJ3NwaWRlcicpXG4gICAgICB9XG4gICAgICBjb25zdCBmYWlsdXJlSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZUxldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0Z1bWJsZSA/ICdmdW1ibGUnIDogJ2ZhaWx1cmUnLFxuICAgICAgICBoaW50OiBmYWlsdXJlSGludCxcbiAgICAgICAgaWNvbnM6IGljb25zXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHVua25vd25EaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5SGFyZCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gdGhpcy5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHNldCBza2lsbCAoeCkge1xuICAgIHRoaXMuX3NraWxsID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIHRoaXMuc2tpbGxJZCA9IHhcbiAgfVxuXG4gIHNldCBpdGVtICh4KSB7XG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICBpZiAodGhpcy5faXRlbT8udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIHRoaXMuaXRlbUlkID0geFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXG4gICAgICB0aGlzLml0ZW1JZCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIF9nZXRJdGVtRnJvbUlkICh4KSB7XG4gICAgaWYgKHggPT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICBpZiAoeCBpbnN0YW5jZW9mIEl0ZW0pIHJldHVybiB4XG4gICAgaWYgKHRoaXMuX2FjdG9yKSByZXR1cm4gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHgpXG4gICAgcmV0dXJuIGdhbWUuaXRlbXMuZ2V0KHgpXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fYWN0b3IgfHwgIXRoaXMuX2FjdG9yPy5pZCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3JLZXkpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAodGhpcy5hY3RvcklkKSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNEdW1teTogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yTmFtZSA/IHRoaXMuYWN0b3JOYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgaW1nOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnLFxuICAgICAgICAgIHBvcnRyYWl0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdG9yLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBjb25zdCBhY3RvciA9IG5ldyBDb0NBY3Rvcih0aGlzLl9hY3RvcilcbiAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5za2lsbElkKSB7XG4gICAgICB0aGlzLl9za2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgfVxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5pdGVtKSB7XG4gICAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkICYmICF0aGlzLndlYXBvbkFsdFNraWxsKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCAmJlxuICAgICAgICAgIHRoaXMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NraWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pdGVtICYmIHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1cbiAgfVxuXG4gIGdldCBkaXNwbGF5UmVzdWx0VHlwZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiB0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGRvbnREaXNwbGF5U3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgIXRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgaW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5pbWdcbiAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLmltZ1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMaW5rRWxlbWVudCgpLm91dGVySFRNTFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXRMaW5rRWxlbWVudCAoY2xhc3NlcyA9IG51bGwpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluaycsICdjb2M3LXJvbGwnXS5jb25jYXQoY2xhc3NlcyksXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiAnY2hlY2snIH0sXG4gICAgICBpY29uOiB0aGlzLmltYWdlXG4gICAgICAgID8gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHt0aGlzLmltYWdlfSlcIj48L2Rpdj5gXG4gICAgICAgIDogJzxpIGNsYXNzPVwiZmFzIGZhLWRpY2VcIj48L2k+JyxcbiAgICAgIGJsaW5kOiB0aGlzLmlzQmxpbmRcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyF0aGlzLl9kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7XG4gICAgICAgIGRpZmZpY3VsdHk6IGRpZmZpY3VsdHksXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLl9kaWNlTW9kaWZpZXIsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgfVxuICAgIClcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgYS5pbm5lckhUTUwgPSBgJHtkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJyd9JHtcbiAgICAgIGRhdGEuaWNvblxuICAgIH0ke3RoaXMubmFtZX1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgYXN5bmMgcm9sbCAoZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZSAoe1xuICAgIGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgZGljZU1vZGlmaWVyID0gbnVsbCxcbiAgICBhY3RvcktleSA9IG51bGwsXG4gICAgY2hhcmFjdGVyaXN0aWMgPSBudWxsLFxuICAgIGF0dHJpYnV0ZSA9IG51bGwsXG4gICAgcmF3VmFsdWUgPSAwLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGRpc3BsYXlOYW1lID0gbnVsbCxcbiAgICBhY3Rvck5hbWUgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdERpY2VNb2RpZmllcikgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKGRpc3BsYXlOYW1lKSBjaGVjay5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lXG4gICAgaWYgKGFjdG9yS2V5KSBjaGVjay5hY3RvciA9IGFjdG9yS2V5XG4gICAgaWYgKGFjdG9yTmFtZSkgY2hlY2suYWN0b3JOYW1lID0gYWN0b3JOYW1lXG4gICAgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkgY2hlY2sucmF3VmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpXG4gICAgaWYgKGNoZWNrLmFjdG9yICYmICFjaGVjay5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAvLyBUT0RPIDogQWRkIGNoZWNrIGZvciB2YWxpZGl0eSBvZiBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlLCBza2lsbElkXG4gICAgICBpZiAoc2tpbGwpIGNoZWNrLnNraWxsID0gc2tpbGxcbiAgICAgIC8vIFRPRE8gOiB0cnkgcmV0cmlldmUgc2tpbGwgYnkgbmFtZVxuICAgICAgZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWMpIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWNcbiAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZSkgY2hlY2suYXR0cmlidXRlID0gYXR0cmlidXRlXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChjaGFyLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmNoYXJhY3RlcmlzdGljID0gY2hhclxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxBdHRyaWJ1dGUgKGF0dHJpYiwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsVmFsdWUgKHZhbCwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbFxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIF9wZXJmb3JtIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRpY2UgPVxuICAgICAgb3B0aW9ucy5yb2xsIHx8XG4gICAgICAoYXdhaXQgQ29DN0RpY2Uucm9sbCh0aGlzLmRpY2VNb2RpZmllciwgdGhpcy5yb2xsTW9kZSwgdGhpcy5pc0JsaW5kKSlcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSlcblxuICAgIHRoaXMuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGljZS51bml0LnRvdGFsXG4gICAgICB9LFxuICAgICAgdG90YWw6IHRoaXMuZGljZS50b3RhbCxcbiAgICAgIHRlblJlc3VsdDogdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWwsXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgIGJvbnVzOiBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllciksXG4gICAgICBib251c1R5cGU6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKSxcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxuICAgIH1cblxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBjb21wdXRlQ2hlY2sgKCkge1xuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxuXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhcikge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUhhcmQpIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgIH1cblxuICAgIHRoaXMudGVuT25seU9uZURpZSA9IHRoaXMuZGljZXMudGVucy5sZW5ndGggPT09IDFcblxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXG4gICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gZmFsc2VcbiAgICB0aGlzLmlzU2tpbGwgPSBmYWxzZVxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcbiAgICB0aGlzLmlzQXR0cmlidXRlID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXG4gICAgICB0aGlzLmRlbnlMdWNrID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RvciA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICB0aGlzLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0udmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgdGhpcy5pc1NraWxsID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5leHRyZW1lVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVtYmxlVGhyZXNob2xkIDw9IHRoaXMubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gJydcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcbiAgICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIH1cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzVW5rbm93biAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdGhpcy5wYXNzZWRcbiAgICB9XG5cbiAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuXG4gICAgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlXG4gICAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5tYWxmdW5jdGlvbikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMubW9kaWZpZWRSZXN1bHQpID49IE51bWJlcih0aGlzLml0ZW0uZGF0YS5kYXRhLm1hbGZ1bmN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubWFsZnVuY3Rpb25UeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbGZ1bmN0aW9uJywge1xuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlSXRlbUZsYWcoQ29DN0l0ZW0uZmxhZ3MubWFsZnVuY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gdGhpcy5za2lsbCA/IHRoaXMuc2tpbGwuY2FuQmVQdXNoZWQoKSA6IGZhbHNlXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuZGVueVB1c2gpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuXG4gICAgaWYgKCF0aGlzLmRlbnlMdWNrICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAgICF0aGlzLnBhc3NlZCAmJlxuICAgICAgICAhdGhpcy5pc0Z1bWJsZSAmJlxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcbiAgICAgICAgIXRoaXMudW5rbm93bkRpZmZpY3VsdHlcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgY29uc3QgbHVja05lZWRlZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnN1Y2Nlc1RocmVzaG9sZFxuICAgICAgICAgIGlmICh0aGlzLmFjdG9yLmx1Y2sgPiBsdWNrTmVlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWQgPSBsdWNrTmVlZGVkXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cblxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnB1c2hpbmcgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ3NhbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy51bmtub3duRGlmZmljdWx0eSAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5oYXJkVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmNhbkF3YXJkRXhwZXJpZW5jZSA9XG4gICAgICB0aGlzLnNraWxsICYmICF0aGlzLnNraWxsLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnBhc3NlZCAmJlxuICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPD0gMCAmJlxuICAgICAgdGhpcy5za2lsbCAmJlxuICAgICAgIXRoaXMuc2tpbGwuZGF0YS5kYXRhLnByb3BlcnRpZXMubm94cGdhaW4gJiZcbiAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgIXRoaXMuZm9yY2VkICYmXG4gICAgICAhdGhpcy5pc0JsaW5kICYmXG4gICAgICAhdGhpcy5pc1Vua25vd25cbiAgICApIHtcbiAgICAgIHRoaXMuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLnBhcmVudClcbiAgICAgIGlmIChwYXJlbnQgJiYgJ3VwZGF0ZVJvbGwnIGluIHBhcmVudCkge1xuICAgICAgICBhd2FpdCBwYXJlbnQudXBkYXRlUm9sbCh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBSb2xsICR7dGhpcy51dWlkfSBkZXBlbmRzIG9mICR7dGhpcy5wYXJlbnR9YClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICB0aGlzLmRpY2VzLnRlbnMuZm9yRWFjaChkaWVSZXN1bHQgPT4ge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfSlcbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgbGV0IGNzc0NsYXNzID0gJydcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdmYWlsdXJlJ1xuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdzdWNjZXNzIGNyaXRpY2FsJ1xuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnZmFpbHVyZSBmdW1ibGUnXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgcmVndWxhci1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBoYXJkLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGV4dHJlbWUtc3VjY2VzcydcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBjc3NDbGFzc0xpc3QgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzID0gW11cbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnKVxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScpXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnLCAnY3JpdGljYWwnKVxuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScsICdmdW1ibGUnKVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnaGFyZC1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgcGxheWVyQ3NzQ2xhc3MgKCkge1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcyB8fCB0aGlzLmZvcmNlZFN1Y2Nlc3MpIHJldHVybiAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUgfHwgdGhpcy5mb3JjZWRGYWlsdXJlKSByZXR1cm4gJ2ZhaWx1cmUnXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHVwZ3JhZGVDaGVjayAodXBncmFkZWluZGV4LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja1RvU3BlbmQpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICA/IDBcbiAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5kaWZmaWN1bHR5KSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICB9XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHVwZ3JhZGVpbmRleCArIDE7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MuZm9yRWFjaChzID0+IHtcbiAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgIH0pXG4gICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHJlbW92ZVVwZ3JhZGVzICgpIHtcbiAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIHRoaXMubHVja05lZWRlZCA9IDBcbiAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBudWxsXG4gICAgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gIH1cblxuICBmb3JjZVBhc3MgKGx1Y2tBbW91bnQgPSBudWxsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHRoaXMuZGlmZmljdWx0eVxuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MuZm9yRWFjaChzID0+IHtcbiAgICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgICB9KVxuICAgICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgICAgPyAwXG4gICAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICAgIHRoaXMuZm9yY2VkU3VjY2VzcyA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciwgdXBkYXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHksIHVwZGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JjZUZhaWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICB0aGlzLmZvcmNlZEZhaWx1cmUgPSB0cnVlXG4gICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSwgdXBkYXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSAtIDEsIHVwZGF0ZSlcbiAgICB9XG4gIH1cblxuICBfZm9yY2VDaGVjayAoaGlnaCwgbG93LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IHRvdGFsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGhpZ2ggLSBsb3cpKSArIGxvdyArIDFcbiAgICBjb25zdCB1bml0VG90YWwgPSB0b3RhbCAlIDEwXG4gICAgbGV0IHRlblRvdGFsID0gTWF0aC5mbG9vcih0b3RhbCAvIDEwKVxuICAgIGNvbnN0IHRlbnMgPSBbXVxuXG4gICAgbGV0IGhhc0Vub3VnaCA9IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSA9PT0gdGVucy5sZW5ndGhcbiAgICB3aGlsZSAoIWhhc0Vub3VnaCkge1xuICAgICAgbGV0IHRlbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgbGV0IHJvbGwgPSB0ZW4gKiAxMCArIHVuaXRUb3RhbFxuICAgICAgaWYgKHJvbGwgPT09IDApIHtcbiAgICAgICAgcm9sbCA9IDEwMFxuICAgICAgICB0ZW4gPSAxMDBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc1BlbmFsdHkgJiYgcm9sbCA8PSBoaWdoKSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsID4gdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQm9udXMgJiYgcm9sbCA+IGxvdykge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA8IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGhhc0Vub3VnaCA9IHRlbnMubGVuZ3RoID09PSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcilcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgcmVzdWx0IGF0IHJhbmRvbSBwb3NpdGlvbi5cbiAgICBpZiAodGVuVG90YWwgPT09IDEwICYmIHVuaXRUb3RhbCA9PT0gMCkge1xuICAgICAgdGVuVG90YWwgPSAxMDBcbiAgICB9XG4gICAgdGVucy5zcGxpY2UoXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZW5zLmxlbmd0aCArIDEpLFxuICAgICAgMCxcbiAgICAgIHRlblRvdGFsID09PSAxMCA/IDAgOiB0ZW5Ub3RhbFxuICAgIClcblxuICAgIHRoaXMuZGljZXMudGVucyA9IFtdXG4gICAgdGhpcy5kaWNlcy51bml0LnZhbHVlID0gdW5pdFRvdGFsXG4gICAgdGhpcy5tb2RpZmllZFJlc3VsdCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50b3RhbCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50ZW5SZXN1bHQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgY29uc3QgbWF4ID0gdW5pdFRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB1bml0VG90YWwgPT09IDAgPyAxMCA6IDBcbiAgICBsZXQgc2VsZWN0ZWQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaWUgPSB7fVxuICAgICAgZGllLnZhbHVlID0gdGVuc1tpXVxuICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAxMDFcbiAgICAgICAgZGllLnNlbGVjdGVkID0gdHJ1ZVxuICAgICAgICBpZiAodGhpcy5oYXNCb251cykge1xuICAgICAgICAgIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtYXgpIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtaW4pIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gaWYoIGRpZS52YWx1ZSA9PSAxMDApIGRpZS52YWx1ZSA9IFwiMDBcIjtcbiAgICAgIHRoaXMuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBmb3JjZVN1Y2Nlc3NMZXZlbCAoc3VjY2Vzc0xldmVsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgaGlnaCA9IDEwMFxuICAgICAgfSBlbHNlIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDFcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBpbmNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBkZWNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICB0aGlzLmZsYWdnZWRGb3JEZXZlbG9wbWVudCA9IHRydWVcbiAgICBpZiAodGhpcy5za2lsbCkgYXdhaXQgdGhpcy5za2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIHNldCBkaWZmaWN1bHR5ICh4KSB7XG4gICAgdGhpcy5fZGlmZmljdWx0eSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpZmZpY3VsdHlcbiAgfVxuXG4gIHNldCBmbGF2b3IgKHgpIHtcbiAgICB0aGlzLl9mbGF2b3IgPSB4XG4gIH1cblxuICBzZXQgY29udGV4dCAoeCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSB4XG4gIH1cblxuICBnZXQgY29udGV4dCAoKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHRcbiAgfVxuXG4gIHNldCBwYXJlbnQgKHgpIHtcbiAgICBpZiAoIXRoaXMudXVpZCkgdGhpcy51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICB0aGlzLnBhcmVudFV1aWQgPSB4XG4gIH1cblxuICBnZXQgcGFyZW50ICgpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50VXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnBhcmVudFV1aWRcbiAgfVxuXG4gIGdldCBmbGF2b3IgKCkge1xuICAgIGlmICh0aGlzLl9mbGF2b3IpIHJldHVybiB0aGlzLl9mbGF2b3JcbiAgICBsZXQgZmxhdm9yID0gJydcbiAgICBpZiAodGhpcy5hY3Rvcj8uZGF0YSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0ubmFtZSxcbiAgICAgICAgICBza2lsbDogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmxhdm9yKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSYXdWYWx1ZScsIHtcbiAgICAgICAgICAgIHJhd3ZhbHVlOiB0aGlzLnJhd1ZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcbiAgICAgIGZsYXZvciA9IGAke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUHVzaGluZycpfSAke2ZsYXZvcn1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGZsYXZvclxuICB9XG5cbiAgZ2V0IHRvb2x0aXBIZWFkZXIgKCkge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuc2tpbGwudmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKGh0bWwpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgcmV0dXJuIGh0bWwgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKHB1c2hpbmcgPSBmYWxzZSkge1xuICAgIC8vIElmIGNhcmQgaXMgcHJvdmlkZWQgYXR0dGFjaGVkIHRoZSByb2xsIHRvIHRoZSBjYXJkLiBJZiBVUklEIHByb3ZpZGVkIGF0dGFjaCBhdCB0aGlzIHBvc2l0aW9uLj9cbiAgICB0aGlzLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICBlbHNlIGlmICh0aGlzLmFjdG9yLmlzRHVtbXkpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0b3IubmFtZSkgc3BlYWtlciA9IHsgYWxpYXM6IHRoaXMuYWN0b3IubmFtZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvcj8udXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcjogc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IENvQzdDaGVjay5jYXJkVHlwZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXG4gICAgaWYgKHRoaXMuY29udGV4dCkgY2hhdERhdGEuZmxhZ3MuQ29DNy5jb250ZXh0ID0gdGhpcy5jb250ZXh0XG5cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNoYXREYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcbiAgICAgICAgY2hhdERhdGEuZmxhZ3MgPSB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZSxcbiAgICAgICAgICAgIG9yaWdpbmFsU3BlYWtlcjogZHVwbGljYXRlKGNoYXREYXRhLnNwZWFrZXIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNhc2UgJ293bmVycyc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSAnZXZlcnlvbmUnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoIGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKTtcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XG4gICAgICBjaGF0RGF0YS5yb2xsID0gdGhpcy5kaWNlLnJvbGxcbiAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbWFrZVB1YmxpYyAgV2lsbCBjaGFuZ2UgdGhlIHJvbGwgbW9kZSB0byBwdWJsaWNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKG1ha2VQdWJsaWMpIHRoaXMucm9sbE1vZGUgPSBmYWxzZSAvLyByZXNldCByb2xsIG1vZGVcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF0gLy8gSWYgbm8gbWVzc2FnZUlkIHJldHVybiB0aGUgSFRNTEVsZW1lbnQgY29udGFpbmluZyB0aGUgcm9sbC5cbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghaHRtbE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpKSB7XG4gICAgICBjb25zdCBodG1sQ2hlY2sgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgICAgY29uc3Qgcm9sbFJlc3VsdEVsZW1lbnQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgaWYgKHJvbGxSZXN1bHRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJvbGxSZXN1bHRFbGVtZW50LnJlcGxhY2VXaXRoKGh0bWxDaGVjaylcbiAgICAgIH1cbiAgICAgIG5ld0NvbnRlbnQgPSBodG1sTWVzc2FnZS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHsgZmxhdm9yOiB0aGlzLmZsYXZvciwgY29udGVudDogbmV3Q29udGVudCB9XG4gICAgaWYgKENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMID09PSBtZXNzYWdlLmRhdGEudHlwZSkge1xuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS53aGlzcGVyPy5sZW5ndGgpIHtcbiAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cblxuICAgIGlmIChtYWtlUHVibGljKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhKVxuXG4gICAgaWYgKGZvcmNlUm9sbCAmJiB0aGlzLmRpY2U/LnJvbGwpIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKGNoYXREYXRhKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSBmYWxzZVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eVJlZ3VsYXInKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlIYXJkJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5RXh0cmVtZScpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUNyaXRpY2FsJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSB0cnVlXG4gICAgfVxuICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8gT0JTT0xFVEUgIVxuICBhc3luYyBzaG9ydFJlc3VsdCAoZGV0YWlscyA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwuaHRtbCdcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzIHx8IGZhbHNlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sXG4gIH1cblxuICBnZXQgdG9vbHRpcCAoKSB7XG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB0aGlzXG4gICAgKVxuICB9XG5cbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZS1jaGVjaycpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NMaXN0KVxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcbiAgICBhLmRhdGFzZXQucm9sbCA9IGVzY2FwZSh0aGlzLkpTT05Sb2xsU3RyaW5nKSAvLyBUT0RPIUlNUE9SVEFOVCEhIVxuICAgIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+ICR7dGhpc1xuICAgICAgLm1vZGlmaWVkUmVzdWx0IHx8ICc/Pyd9YFxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXQgcm9sbFRvb2xUaXAgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBwYXJ0cyA9IFtdXG4gICAgY29uc3QgdGVucyA9IHRoaXMuZGljZXMudGVucy5tYXAociA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHIudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiByLnNlbGVjdGVkLFxuICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgJ2RpZScsXG4gICAgICAgICAgJ2QxMCcsXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXG4gICAgICAgICAgci5pc01pbiA/ICdtaW4nIDogbnVsbCxcbiAgICAgICAgICByLmlzTWF4ID8gJ21heCcgOiBudWxsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYylcbiAgICAgICAgICAuam9pbignICcpXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB1bml0ID0gW1xuICAgICAge1xuICAgICAgICByZXN1bHQ6IHRoaXMuZGljZXMudW5pdC52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHBhcnRzLnB1c2goe1xuICAgICAgZm9ybXVsYTogdGhpcy50b29sdGlwSGVhZGVyLFxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXG4gICAgICBpY29uczogdGhpcy5zdWNjZXNzTGV2ZWxJY29ucyxcbiAgICAgIGNsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcbiAgICAgIHJlc3VsdFR5cGU6IHRoaXMucmVzdWx0VHlwZSxcbiAgICAgIGZhY2U6IDEwLFxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxuICAgIH0pXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB7IHBhcnRzIH1cbiAgICApXG4gIH1cblxuICBnZXQgSlNPTlJvbGxEYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXG4gICAgICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGZyb21Sb2xsU3RyaW5nIChkYXRhU3RyaW5nKSB7XG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoZGF0YVN0cmluZykpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcyhudWxsLCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHRydWVcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrSW5saW5lUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXG4gICAgaWYgKHRvb2x0aXApIHRvb2x0aXAucmVtb3ZlKClcbiAgICByZXR1cm4gYS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2V4cGFuZElubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxuICAgICkgLy8gVE9ETyA6IGZpbmQgc3RyaW5naWZ5IHVuZXNjYXBlICEhIDIwMjEwMjA1XG4gICAgaWYgKGNoZWNrLnN0YW5kYnkpIHJldHVyblxuXG4gICAgY29uc3QgdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXAuaW5uZXJIVE1MID0gYXdhaXQgY2hlY2sucm9sbFRvb2xUaXBcblxuICAgIC8vIEFkZCB0aGUgdG9vbHRpcFxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aXAuY2hpbGRyZW5bMF1cbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpXG5cbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXG4gICAgY29uc3QgcGEgPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgcHQgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS54LFxuICAgICAgd2luZG93LmlubmVyV2lkdGggLSAocHQud2lkdGggKyAzKVxuICAgICl9cHhgXG4gICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLnkgKyBwYS5oZWlnaHQgKyAzLFxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXG4gICAgKX1weGBcbiAgICBjb25zdCB6aSA9IGdldENvbXB1dGVkU3R5bGUoYSkuekluZGV4XG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwgPSB7fVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnVua25vd24gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5oYXJkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9ib251cy5odG1sJyxcbiAgICAgIHtcbiAgICAgICAgYWxsb3dGbGF0RGljZU1vZGlmaWVyOlxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicpICYmXG4gICAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICAgIGFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyOlxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJykgJiZcbiAgICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLFxuICAgICAgICB1bmtub3duRGlmZmljdWx0eURlZmF1bHQ6IHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNib251cy1yb2xsLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAncm9sbCcsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNhbkRhdGFEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCc6Y2hlY2tib3gnKS5jbGljaygoKSA9PiB0aGlzLl90b2dnbGVJbnB1dChodG1sKSlcbiAgfVxuXG4gIF90b2dnbGVJbnB1dCAoaHRtbCkge1xuICAgIGh0bWwuZmluZCgnKltuYW1lPVwiY3VzdG9tbmFtZVwiXScpLnRvZ2dsZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NhbmRhdGEuaHRtbCcsXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IFNhbkRhdGFEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TYW5EYXRhU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvdycpLCAvLyBUT0RPOiBSZW1vdmUgU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBWYWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzYW4tZGF0YS1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ1ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDaGF0TWVzc2FnZSwgQ09OU1QsIERpYWxvZywgZ2FtZSwgZ2V0UHJvcGVydHksIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCB1aSAqL1xuXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4uLy4uL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uLy4uL2FwcHMvcGFyc2VyLmpzJ1xuaW1wb3J0IHsgU2FuRGF0YURpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvc2FuZGF0YS1kaWFsb2cuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHRoaXMuYWN0b3IuZGF0YS50b09iamVjdChmYWxzZSlcbiAgICBkYXRhLmRhdGEgPSBhY3RvckRhdGEuZGF0YSAvLyBNb2RpZiAwLjgueCA6IGRhdGEuZGF0YVxuICAgIGRhdGEuZWRpdGFibGUgPSB0aGlzLmlzRWRpdGFibGUgLy8gTU9ESUYgMC44LnggOiBlZGl0YWJsZSByZW1vdmVkXG4gICAgLyoqKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXNUb2tlbiA9IHRoaXMuYWN0b3IuaXNUb2tlblxuICAgIGRhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIGRhdGEuc2tpbGxzID0ge31cbiAgICBkYXRhLmNvbWJhdFNraWxscyA9IHt9XG4gICAgZGF0YS53ZWFwb25zID0ge31cbiAgICBkYXRhLnJhbmdlV3BuID0gW11cbiAgICBkYXRhLm1lbGVlV3BuID0gW11cbiAgICBkYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgZGF0YS5wZXJtaXNzaW9uTGltaXRlZCA9XG4gICAgICAodGhpcy5hY3Rvci5kYXRhLnBlcm1pc3Npb25bZ2FtZS51c2VyLmlkXSA9PT1cbiAgICAgICAgQ09OU1QuRU5USVRZX1BFUk1JU1NJT05TLkxJTUlURUQgfHxcbiAgICAgICAgdGhpcy5hY3Rvci5kYXRhLnBlcm1pc3Npb24uZGVmYXVsdCA9PT1cbiAgICAgICAgICBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMuTElNSVRFRCkgJiZcbiAgICAgICFnYW1lLnVzZXIuaXNHTVxuICAgIGRhdGEuaXNHTSA9IGdhbWUudXNlci5pc0dNXG4gICAgZGF0YS5hbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgZGF0YVsnZGF0YS5mbGFncy5sb2NrZWQnXSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICghZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzID0ge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TVFInLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkNPTicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNJWicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5ERVgnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5BUFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuSU5UJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5FRFUnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuYXR0cmlicykge1xuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicyA9IHtcbiAgICAgICAgICBocDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnSGl0IHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTWFnaWMgcG9pbnRzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxjazogeyB2YWx1ZTogbnVsbCwgc2hvcnQ6ICdMQ0snLCBsYWJlbDogJ0x1Y2snIH0sXG4gICAgICAgICAgc2FuOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogOTksXG4gICAgICAgICAgICBzaG9ydDogJ1NBTicsXG4gICAgICAgICAgICBsYWJlbDogJ1Nhbml0eScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdNT1YnLFxuICAgICAgICAgICAgbGFiZWw6ICdNb3ZlbWVudCByYXRlJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnREInLFxuICAgICAgICAgICAgbGFiZWw6ICdEYW1hZ2UgYm9udXMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdCTEQnLFxuICAgICAgICAgICAgbGFiZWw6ICdCdWlsZCcsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm1vcjogeyB2YWx1ZTogbnVsbCwgYXV0bzogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLnN0YXR1cykge1xuICAgICAgICBkYXRhLmRhdGEuc3RhdHVzID0ge1xuICAgICAgICAgIGNyaXRpY2FsV291bmRzOiB7IHR5cGU6ICdCb29sZWFuJywgdmFsdWU6IGZhbHNlIH0sXG4gICAgICAgICAgdW5jb25zY2lvdXM6IHsgdHlwZTogJ0Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICBkeWluZzogeyB0eXBlOiAnQm9vbGVhbicsIHZhbHVlOiBmYWxzZSB9LFxuICAgICAgICAgIGRlYWQ6IHsgdHlwZTogJ0Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICBwcm9uZTogeyB0eXBlOiAnQm9vbGVhbicsIHZhbHVlOiBmYWxzZSB9LFxuICAgICAgICAgIHRlbXBvSW5zYW5lOiB7IHR5cGU6ICdib29sZWFuJywgdmFsdWU6IGZhbHNlIH0sXG4gICAgICAgICAgaW5kZWZJbnNhbmU6IHsgdHlwZTogJ2Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLmJpb2dyYXBoeSkge1xuICAgICAgICBkYXRhLmRhdGEuYmlvZ3JhcGh5ID0ge1xuICAgICAgICAgIHBlcnNvbmFsRGVzY3JpcHRpb246IHsgdHlwZTogJ3N0cmluZycsIHZhbHVlOiAnJyB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuaW5mb3MpIHtcbiAgICAgICAgZGF0YS5kYXRhLmluZm9zID0ge1xuICAgICAgICAgIG9jY3VwYXRpb246ICcnLFxuICAgICAgICAgIGFnZTogJycsXG4gICAgICAgICAgc2V4OiAnJyxcbiAgICAgICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgICAgIGFyY2hldHlwZTogJycsXG4gICAgICAgICAgb3JnYW5pemF0aW9uOiAnJyxcbiAgICAgICAgICBwbGF5ZXJuYW1lOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICAgIGRhdGEuZGF0YS5mbGFncyA9IHsgbG9ja2VkOiB0cnVlLCBtYW51YWxDcmVkaXQ6IGZhbHNlIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuY3JlZGl0KSB7XG4gICAgICAgIGRhdGEuZGF0YS5jcmVkaXQgPSB7XG4gICAgICAgICAgbW9uZXRhcnlTeW1ib2w6IG51bGwsXG4gICAgICAgICAgbXVsdGlwbGllcjogbnVsbCxcbiAgICAgICAgICBzcGVudDogbnVsbCxcbiAgICAgICAgICBhc3NldHNEZXRhaWxzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuZGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgZGF0YS5kYXRhLmRldmVsb3BtZW50ID0ge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuYmlvZ3JhcGh5KSBkYXRhLmRhdGEuYmlvZ3JhcGh5ID0gW11cbiAgICAgIGlmICghZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKSBkYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMgPSBbXVxuXG4gICAgICBkYXRhLmlzSW5BQm91dE9mTWFkbmVzcyA9IHRoaXMuYWN0b3IuaXNJbkFCb3V0T2ZNYWRuZXNzXG4gICAgICBkYXRhLmlzSW5zYW5lID0gdGhpcy5hY3Rvci5pc0luc2FuZVxuICAgICAgZGF0YS5ib3V0T2ZNYWRuZXNzID0gdGhpcy5hY3Rvci5ib3V0T2ZNYWRuZXNzXG4gICAgICBkYXRhLnNhbml0eSA9IHRoaXMuYWN0b3Iuc2FuaXR5XG4gICAgICBkYXRhLnB1bHBDaGFyYWN0ZXIgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKVxuICAgIH1cblxuICAgIGRhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgZGF0YS5pc0R5aW5nID0gdGhpcy5hY3Rvci5keWluZ1xuXG4gICAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09XG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvVXBkYXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbVRvVXBkYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgICApIC8vIFRPRE8gOiBDbGllbnQgd2l0aCBkaWZmZXJlbnQgbGFuZ3VhZ2UgPSByZWN1cnNpdmUgY2FsbCB3aGVuIG9wZW5pbmcgdGhlIHNhbWUgc2hlZXQuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09XG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtVG9VcGRhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNwZWNpYWxpemF0aW9uJzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci5kYXRhLnR5cGUgIT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGl0ZW0uZGF0YS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgICAgQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXRcbiAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uZGF0YS52YWx1ZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgYHVuYWJsZSB0byBwYXJzZSBmb3JtdWxhIDoke2l0ZW0uZGF0YS52YWx1ZX0gZm9yIHNraWxsICR7aXRlbS5uYW1lfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEudmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ2RhdGEudmFsdWUnOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGl0ZW0uZGF0YS5iYXNlID0gYXdhaXQgc2tpbGwuYXN5bmNCYXNlKClcblxuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS52YWx1ZSkge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW0uZGF0YS52YWx1ZVxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KGl0ZW0uZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICBsZXQgdXBkYXRlZEV4cCA9IGV4cCArIHBhcnNlSW50KGl0ZW0uZGF0YS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRW50aXR5KCdPd25lZEl0ZW0nLCB7XG4gICAgICAgICAgICAgICAgX2lkOiBpdGVtLl9pZCxcbiAgICAgICAgICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogdXBkYXRlZEV4cCxcbiAgICAgICAgICAgICAgICAnZGF0YS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKCFpdGVtLmRhdGEuYWRqdXN0bWVudHMpIGl0ZW0uZGF0YS5hZGp1c3RtZW50cyA9IHt9XG4gICAgICAgICAgICAgIGl0ZW0uZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlID0gdXBkYXRlZEV4cFxuICAgICAgICAgICAgICBpdGVtLmRhdGEudmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGl0ZW0uZGF0YS52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBkYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV1cbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgbGlzdCA9IFtdXG4gICAgICAgICAgZGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gbGlzdFxuICAgICAgICB9XG4gICAgICAgIGxpc3QucHVzaChpdGVtKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIGRhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgZGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGxldCBsY2FcbiAgICAgICAgICBsZXQgbGNiXG4gICAgICAgICAgaWYgKGEuZGF0YS5wcm9wZXJ0aWVzICYmIGIuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBsY2EgPVxuICAgICAgICAgICAgICBhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsICYmXG4gICAgICAgICAgICAgIHR5cGVvZiBhLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBhLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICBhLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIDogYS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIGxjYiA9XG4gICAgICAgICAgICAgIGIuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGIuZGF0YS5zcGVjaWFsaXphdGlvbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGIuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgIGIubmFtZVxuICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgOiBiLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsY2EgPSBhLm5hbWVcbiAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgbGNiID0gYi5uYW1lXG4gICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxjYSA8IGxjYikgcmV0dXJuIC0xXG4gICAgICAgICAgaWYgKGxjYSA+IGxjYikgcmV0dXJuIDFcbiAgICAgICAgICByZXR1cm4gMFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyByZWRvbmRhbnQgYXZlYyBtYXRyaWNlIGl0ZW1ieXR5cGVcbiAgICAgIGRhdGEuc2tpbGxzID0gZGF0YS5pdGVtc1xuICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGxldCBsY2FcbiAgICAgICAgICBsZXQgbGNiXG4gICAgICAgICAgaWYgKGEuZGF0YS5wcm9wZXJ0aWVzICYmIGIuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBsY2EgPSBhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsXG4gICAgICAgICAgICAgID8gYS5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgIGEubmFtZVxuICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIDogYS5uYW1lXG4gICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIGxjYiA9IGIuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICAgICAgICAgICAgPyBiLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgYi5uYW1lXG4gICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgOiBiLm5hbWVcbiAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsY2EgPSBhLm5hbWVcbiAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgbGNiID0gYi5uYW1lXG4gICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxjYSA8IGxjYikgcmV0dXJuIC0xXG4gICAgICAgICAgaWYgKGxjYSA+IGxjYikgcmV0dXJuIDFcbiAgICAgICAgICByZXR1cm4gMFxuICAgICAgICB9KVxuXG4gICAgICBkYXRhLm1lbGVlU2tpbGxzID0gZGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLmRhdGEucHJvcGVydGllcy5jb21iYXQgPT09IHRydWUgJiZcbiAgICAgICAgICBza2lsbC5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcbiAgICAgIClcbiAgICAgIGRhdGEucmFuZ2VTa2lsbHMgPSBkYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLmRhdGEucHJvcGVydGllcy5maXJlYXJtID09PSB0cnVlXG4gICAgICApXG5cbiAgICAgIGNvbnN0IGNidFNraWxscyA9IGRhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT4gc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgaWYgKGNidFNraWxscykge1xuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xuICAgICAgICAgIGRhdGEuY29tYmF0U2tpbGxzW3NraWxsLl9pZF0gPSBza2lsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdlYXBvbnMgPSBkYXRhLml0ZW1zQnlUeXBlLndlYXBvblxuXG4gICAgICBpZiAod2VhcG9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IHdlYXBvbiBvZiB3ZWFwb25zKSB7XG4gICAgICAgICAgd2VhcG9uLnVzZXNBbHRlcm5hdGVTa2lsbCA9XG4gICAgICAgICAgICB3ZWFwb24uZGF0YS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgICAgIHdlYXBvbi5kYXRhLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZVxuICAgICAgICAgIGlmICghd2VhcG9uLmRhdGEuYW1tbykgd2VhcG9uLmRhdGEuYW1tbyA9IDBcblxuICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IHRydWVcbiAgICAgICAgICAvLyB3ZWFwb24uZGF0YS5za2lsbC5tYWluLm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uZGF0YS5za2lsbC5tYWluLnZhbHVlID0gMDtcbiAgICAgICAgICAvLyB3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gMDtcbiAgICAgICAgICBpZiAod2VhcG9uLmRhdGEuc2tpbGwubWFpbi5pZCA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gOiBzaSBsJ0lEIG4nZXN0cyBwYXMgZMOpZmluaWUgbWFpcyBxdSd1biBub20gYSDDqXTDqSBkb25uw6ksIHV0aWxpc2VyIGNlIG5vbSBldCB0YW50ZXIgZGUgcmV0cm91dmVyIGxlIHNraWxsXG4gICAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogYXZhbnQgZCdhc3NpZ2VyIGxlIHNraWxsIHbDqXJpZmllciBxdSdpbCBleGlzdGUgdG91am91cnMuXG4gICAgICAgICAgICAvLyBzaSBpbCBuJ2V4aXN0ZSBwbHVzIGlsIGZhdXQgbGUgcmV0cm91dmVyIG91IHBhc3NlciBza2lsbHNldCBhIGZhbHNlLlxuICAgICAgICAgICAgaWYgKGRhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5kYXRhLnNraWxsLm1haW4uaWRdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQod2VhcG9uLmRhdGEuc2tpbGwubWFpbi5pZClcbiAgICAgICAgICAgICAgd2VhcG9uLmRhdGEuc2tpbGwubWFpbi5uYW1lID1cbiAgICAgICAgICAgICAgICBkYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uZGF0YS5za2lsbC5tYWluLmlkXS5uYW1lXG4gICAgICAgICAgICAgIHdlYXBvbi5kYXRhLnNraWxsLm1haW4udmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGlmIChkYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYubmFtZSA9XG4gICAgICAgICAgICAgICAgICBkYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkXS5uYW1lXG4gICAgICAgICAgICAgICAgd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB3ZWFwb24uZGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHkgPSB7fVxuICAgICAgICAgICAgcHJvcGVydHkuaWQgPSBrZXlcbiAgICAgICAgICAgIHByb3BlcnR5Lm5hbWUgPSB2YWx1ZVxuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB3ZWFwb24uZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgICAgIHdlYXBvbi5kYXRhLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YS53ZWFwb25zW3dlYXBvbi5faWRdID0gd2VhcG9uXG4gICAgICAgICAgaWYgKHdlYXBvbi5kYXRhLnByb3BlcnRpZXMucm5nZCkgZGF0YS5yYW5nZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgICBlbHNlIGRhdGEubWVsZWVXcG4ucHVzaCh3ZWFwb24pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBkYXRhLnRva2VuSWQgPSB0b2tlblxuICAgICAgICA/IGAke3Rva2VuLnBhcmVudD8uaWQgPyB0b2tlbi5wYXJlbnQuaWQgOiAnVE9LRU4nfS4ke3Rva2VuLmlkfWBcbiAgICAgICAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgICBkYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9IGZhbHNlXG4gICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoYXJhY3RlcmlzdGljIG9mIE9iamVjdC52YWx1ZXMoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlKSBjaGFyYWN0ZXJpc3RpYy5lZGl0YWJsZSA9IHRydWVcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXJkID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDIpXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA9IE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWMudmFsdWUgLyA1KVxuXG4gICAgICAgICAgLy8gSWYgbm8gdmFsdWUgJiYgbm8gZm9ybXVsYSBkb24ndCBkaXNwbGF5IGNoYXJhYy5cbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmICFjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpZiBhbnkgY2hhcmFjdGVyaXN0aWMgaGFzIG5vIHZhbHVlIGJ1dCBoYXMgYSBmb3JtdWxhLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWMuZm9ybXVsYSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID1cbiAgICAgICAgICAgIGRhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxuICAgIGlmICghWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5hY3Rvci5kYXRhLnR5cGUpKSB7XG4gICAgICBjb25zdCBhdXRvID0gdGhpcy5hY3Rvci5jaGVja1VuZGVmaW5lZEF1dG8oKVxuICAgICAgZGF0YS5kYXRhID0gbWVyZ2VPYmplY3QoZGF0YS5kYXRhLCBhdXRvKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuZGIuYXV0byA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gZmFsc2VcbiAgICB9XG5cbiAgICBkYXRhLmRhdGEuYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLmFjdG9yLm1vdiAvLyByZXR1cm4gY29tcHV0ZWQgdmFsdWVzIG9yIGZpeGVkIHZhbHVlcyBpZiBub3QgYXV0by5cbiAgICBkYXRhLmRhdGEuYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMuYWN0b3IuZGJcbiAgICBkYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMuYWN0b3IuYnVpbGRcblxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5jb21wZW5kaXVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5tb3YudmFsdWUnOiB0aGlzLmFjdG9yLm1vdiB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5tb3YubWF4JzogdGhpcy5hY3Rvci5tb3YgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgICB7ICdkYXRhLmF0dHJpYnMuZGIudmFsdWUnOiB0aGlzLmFjdG9yLmRiIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgICAgeyAnZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOiB0aGlzLmFjdG9yLmJ1aWxkIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgICAgeyAnZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlJzogdGhpcy5hY3Rvci5idWlsZCB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIGlmKCBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA8IDApIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gbnVsbDtcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPCAwKSBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IG51bGxcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxuICAgIC8vIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5maWZ0eU9mQ3VycmVudCA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA+PSAwID8gJyAvICcrTWF0aC5mbG9vcihkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUvNSk6Jyc7XG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLmhwLmF1dG8pIHtcbiAgICAgIC8vIFRPRE8gaWYgYW55IGlzIG51bGwgc2V0IG1heCBiYWNrIHRvIG51bGwuXG4gICAgICBpZiAoXG4gICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgIT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCA9IHRoaXMuYWN0b3IuaHBNYXhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgLy8gVE9ETyBpZiBhbnkgaXMgbnVsbCBzZXQgbWF4IGJhY2sgdG8gbnVsbC5cbiAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLyA1XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmF1dG8pIHtcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5tYXggPSB0aGlzLmFjdG9yLnNhbk1heFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4IHx8XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggPT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggfHxcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCA9PSBudWxsXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID09IG51bGwgJiZcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCAhPSBudWxsXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9PSBudWxsICYmXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggIT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICB9XG5cbiAgICBpZiAoIVsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuYWN0b3IuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPT0gbnVsbCAmJlxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID0gZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5zYW4ubWF4KSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5tYXhcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuZGF0YS5iaW9ncmFwaHkgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRhLmRhdGEuYmlvZ3JhcGh5Lmxlbmd0aCkge1xuICAgICAgICBkYXRhLmRhdGEuYmlvZ3JhcGh5WzBdLmlzRmlyc3QgPSB0cnVlXG4gICAgICAgIGRhdGEuZGF0YS5iaW9ncmFwaHlbZGF0YS5kYXRhLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGRhdGEuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9IHt9XG4gICAgICBkYXRhLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgID8gZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICA6IDBcbiAgICAgIGRhdGEuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPSBNYXRoLmZsb29yKFxuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApXG4gICAgfVxuICAgIGRhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpXG4gICAgLy8gY29uc3QgZmlyc3QgPSBkYXRhLmRhdGEuYmlvZ3JhcGh5WzBdO1xuICAgIC8vIGZpcnN0LmlzRmlyc3QgPSB0cnVlO1xuICAgIC8vIGRhdGEuZGF0YS5iaW9ncmFwaHlbMF0gPSBmaXJzdDtcbiAgICAvLyBjb25zdCBsYXN0ID0gZGF0YS5kYXRhLmJpb2dyYXBoeVtkYXRhLmRhdGEuYmlvZ3JhcGh5Lmxlbmd0aCAtIDFdO1xuICAgIC8vIGxhc3QuaXNMYXN0ID0gdHJ1ZTtcbiAgICAvLyBkYXRhLmRhdGEuYmlvZ3JhcGh5W2RhdGEuZGF0YS5iaW9ncmFwaHkubGVuZ3RoIC0gMV0gPSBsYXN0O1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBzdGF0aWMgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0RFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICAvLyBpZiggdGhpcy50b2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLy8gcmV0dXJuIHRoaXMuYWN0b3IuaWQ7XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBPd25lciBPbmx5IExpc3RlbmVyc1xuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgdHlwZW9mIHRoaXMuYWN0b3IuY29tcGVuZGl1bSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQ2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQXR0cmlidXRlKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5zYW4tY2hlY2snKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ1NhbkNoZWNrKGV2ZW50KSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNraWxsLWltYWdlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbEF0dHJpYlRlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuYXV0by10b2dnbGUnKS5jbGljayh0aGlzLl9vbkF1dG9Ub2dnbGUuYmluZCh0aGlzKSlcblxuICAgICAgLy8gU3RhdHVzIG1vbml0b3JcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGF0dXNQbGF5ZXJFZGl0YWJsZScpKSB7XG4gICAgICAgIGh0bWwuZmluZCgnLnJlc2V0LWNvdW50ZXInKS5jbGljayh0aGlzLl9vblJlc2V0Q291bnRlci5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5zdGF0dXMtbW9uaXRvcicpLmNsaWNrKHRoaXMuX29uU3RhdHVzVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWR5aW5nJykuY2xpY2sodGhpcy5oZWFsLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWRlYWQnKS5jbGljayh0aGlzLnJldml2ZS5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICBodG1sLmZpbmQoJy5keWluZy1jaGVjaycpLmNsaWNrKHRoaXMuY2hlY2tGb3JEZWF0aC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5pdGVtIC5pdGVtLWltYWdlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Ta2lsbFJvbGwoZXZlbnQpKVxuICAgICAgaHRtbC5maW5kKCcucmVsb2FkLXdlYXBvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVsb2FkV2VhcG9uKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZWxvYWQtd2VhcG9uJylcbiAgICAgICAgLm9uKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IHRoaXMuX29uUmVsb2FkV2VhcG9uKGV2ZW50KSlcbiAgICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnJlYWQtb25seScpLmRibGNsaWNrKHRoaXMuX3RvZ2dsZVJlYWRPbmx5LmJpbmQodGhpcykpXG4gICAgICBodG1sLm9uKCdjbGljaycsICcud2VhcG9uLWRhbWFnZScsIHRoaXMuX29uV2VhcG9uRGFtYWdlLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcblxuICAgICAgY29uc3Qgd2hlZWxJbnB1dHMgPSBodG1sLmZpbmQoJy5hdHRyaWJ1dGUtdmFsdWUnKVxuICAgICAgZm9yIChjb25zdCB3aGVlbElucHV0IG9mIHdoZWVsSW5wdXRzKSB7XG4gICAgICAgIHdoZWVsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldmVudCA9PiB0aGlzLl9vbldoZWVsKGV2ZW50KSwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLXBvcHVwJykuY2xpY2sodGhpcy5fb25JdGVtUG9wdXAuYmluZCh0aGlzKSlcblxuICAgIC8vIFVwZGF0ZSBJbnZlbnRvcnkgSXRlbVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgICBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldilcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2NsaWNrJywgYXN5bmMgZXZlbnQgPT4gYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjayhldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcudGVzdC10cmlnZ2VyJykuY2xpY2soYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICBjb21iYXQ6IGZhbHNlLFxuICAgICAgICBhY3Rpb246ICduZXcnLFxuICAgICAgICByb2xsOiB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWM6ICdzdHInLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgY29tYmF0OiBmYWxzZSxcbiAgICAgICAgYWN0aW9uOiAnbmV3JyxcbiAgICAgICAgcm9sbDoge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljOiAnY29uJ1xuICAgICAgICAgIC8vIGFjdG9yOiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyBjb25zdCB2YWwgPSBnZXRQcm9wZXJ0eSggdGhpcy5hY3RvciwgJ2RhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZScpO1xuXG4gICAgICAvLyB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyggdHJ1ZSwgMTApO1xuXG4gICAgICAvLyBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpO1xuICAgICAgLy8gcm9sbC5hY3RvciA9IHRoaXMuYWN0b3JLZXk7XG4gICAgICAvLyByb2xsLmF0dHJpYnV0ZSA9ICdzYW4nO1xuICAgICAgLy8gcm9sbC5kaWZmaWN1bHR5ID0gdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyO1xuICAgICAgLy8gcm9sbC5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgfHwgMDtcbiAgICAgIC8vIGF3YWl0IHJvbGwuX3BlcmZvcm0oKTtcblxuICAgICAgLy8gZm9yIChjb25zdCBlZmZlY3Qgb2YgdGhpcy5hY3Rvci5lZmZlY3RzKSB7XG4gICAgICAvLyAgYXdhaXQgZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcbiAgICAgIC8vICAvLyBlZmZlY3QuZGVsZXRlKCk7XG4gICAgICAvLyB9XG4gICAgICAvLyB0aGlzLmFjdG9yLmVmZmVjdHMuZm9yRWFjaCggZSA9PiBlLmRlbGV0ZSgpKTtcbiAgICAgIC8vIGF3YWl0IHNldFByb3BlcnR5KCB0aGlzLmFjdG9yLCAnZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJywgW10pO1xuXG4gICAgICAvLyBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSgge1snZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcyddIDogW119KTtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdTaGlmdCBjbGllY2tlZCcpXG4gICAgICAvLyBTYW5DaGVja0NhcmQuY3JlYXRlKCB0aGlzLmFjdG9yLmFjdG9yS2V5LCB7bWluOicxRDEwJyxtYXg6JzFEMTInfSwge2Zhc3RGb3J3YXJkOmV2ZW50LnNoaWZ0S2V5fSk7XG4gICAgfSlcbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5jaGFyYWN0ZXJpc3RpYyxcbiAgICAgIGljb246IG51bGxcbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnQXR0cmlidXRlIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsXG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ1NhbkNoZWNrIChldmVudCkge1xuICAgIGNvbnN0IHNhbk1pbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5wYXNzJylcbiAgICBjb25zdCBzYW5NYXggPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5zYW4tdmFsdWUuZmFpbGVkJylcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnc2FubG9zcycsXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgc2FuTWluOiBzYW5NaW4uaW5uZXJUZXh0LFxuICAgICAgc2FuTWF4OiBzYW5NYXguaW5uZXJUZXh0LFxuICAgICAgaWNvbjogbnVsbFxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vblN0YXR1c1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zdGF0dXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlU3RhdHVzKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zdGF0dXMpXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZWZmZWN0KSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnRvZ2dsZUVmZmVjdChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZWZmZWN0KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJldml2ZSAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmFjdG9yLnVuc2V0U3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBhc3luYyBoZWFsICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuZHlpbmcpXG4gIH1cblxuICBhc3luYyBjaGVja0ZvckRlYXRoIChldmVudCkge1xuICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgIHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW5LZXkgOiB0aGlzLmFjdG9yLmlkXG4gICAgKVxuICAgIGNvbkNoZWNrLnN0YXlBbGl2ZSA9IHRydWVcbiAgICBjb25DaGVjay50b01lc3NhZ2UoZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENvdW50ZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGNvdW50ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY291bnRlclxuICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID1cbiAgICAgICcgLyAnICsgTWF0aC5mbG9vcih0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgdGhpcy5hY3Rvci5zZXRPbmVGaWZ0aFNhbml0eShvbmVGaWZ0aFNhbml0eSlcbiAgICBpZiAoY291bnRlcikgdGhpcy5hY3Rvci5yZXNldENvdW50ZXIoY291bnRlcilcbiAgfVxuXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpKSB7XG4gICAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYlxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICApXG4gICAgaWYgKHdlYXBvbikge1xuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHksXG4gICAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvLyByb2xsIHRoZSBhY3RvciBjaGFyYWN0ZXJpc3RpYyBmcm9tIGZvcm11bGEgd2hlbiBwb3NzaWJsZS5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICB0aGlzLmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gIH1cblxuICBhc3luYyBfb25GbGFnQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZmxhZ05hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIHRoaXMuYWN0b3IudG9nZ2xlQWN0b3JGbGFnKGZsYWdOYW1lKVxuICB9XG5cbiAgYXN5bmMgX29uRm9ybXVsYUNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuYWN0b3IudG9nZ2xlQWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gIH1cblxuICBhc3luYyBfb25XaGVlbCAoZXZlbnQpIHtcbiAgICBsZXQgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlIC0gMVxuICAgIH1cblxuICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlICsgMVxuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZGF0YS5hdHRyaWJzLm1wLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRNcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RhdGEuYXR0cmlicy5zYW4udmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldFNhbih2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RhdGEuYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEx1Y2sodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0SHAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZVJlYWRPbmx5IChldmVudCkge1xuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHkgPSAhZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgncmVhZC1vbmx5JylcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLmdldENoYXREYXRhKHsgc2VjcmV0czogdGhpcy5hY3Rvci5pc093bmVyIH0pXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgY2hhdERhdGEubGFiZWxzLmZvckVhY2gocCA9PlxuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuXG4gICAgICBpZiAoaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgY2hhdERhdGEucHJvcGVydGllcy5mb3JFYWNoKHAgPT5cbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgQ29DN1BhcnNlci5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgX29uU2VjdGlvbkhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbGV0IHNlY3Rpb24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ3NlY3Rpb24nKSxcbiAgICAvLyAgcGFubmVsQ2xhc3MgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ3Bhbm5lbCcpLFxuICAgIC8vICBwYW5uZWwgPSBzZWN0aW9uLmZpbmQoIGAuJHtwYW5uZWxDbGFzc31gKTtcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnc2VjdGlvbicpXG4gICAgY29uc3QgcGFubmVsQ2xhc3MgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucGFubmVsXG4gICAgY29uc3QgcGFubmVsID0gJChzZWN0aW9uKS5maW5kKGAucGFubmVsLiR7cGFubmVsQ2xhc3N9YClcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgaWYgKHBhbm5lbC5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgcGFubmVsLnNsaWRlVXAoMjAwKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYW5uZWwuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaW52ZW50b3J5LXNlY3Rpb24nKVxuICAgIGNvbnN0IGRldGFpbHMgPSBsaS5maW5kKCdvbCcpXG4gICAgZGV0YWlscy50b2dnbGUoKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVBvcHVwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG5cbiAgICBDb0M3QWN0b3JTaGVldC5wb3B1cFNraWxsKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcG9wdXBTa2lsbCAoc2tpbGwpIHtcbiAgICBza2lsbC5kYXRhLmRhdGEuZGVzY3JpcHRpb24uZW5yaWNoZWRWYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgIClcbiAgICAvLyBnYW1lLkNvQzcuZW5yaWNoZXIoIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlKTtcbiAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKFxuICAgICAge1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsRGV0YWlsc1dpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBza2lsbCxcbiAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NraWxsJ10sXG4gICAgICAgIHdpZHRoOiA1MjAsXG4gICAgICAgIGhlaWdodDogNDgwLFxuICAgICAgICBzY3JvbGxZOiBbJy5pdGVtLWRlc2NyaXB0aW9uJ10sXG4gICAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLWRldGFpbHMuaHRtbCdcbiAgICAgIH1cbiAgICApXG4gICAgZGxnLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIG9mIGFuIGl0ZW0gZnJvbSB0aGUgQWN0b3Igc2hlZXQsIG9idGFpbmluZyB0aGUgSXRlbSBpbnN0YW5jZSBhbmQgZGlzcGF0Y2hpbmcgdG8gaXQncyByb2xsIG1ldGhvZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX29uSXRlbVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZDtcbiAgICAvLyBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkO1xuICAgIC8vIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkO1xuICAgIC8vIGxldCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKTtcblxuICAgIC8vIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5O1xuICAgIC8vIGNoZWNrLml0ZW0gPSBpdGVtSWQ7XG4gICAgLy8gY2hlY2sucm9sbCgpO1xuICAgIC8vIGNoZWNrLnRvTWVzc2FnZSgpO1xuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBldmVudC5zaGlmdEtleVxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAvLyBjb25zdCBhY3RvcktleSA9ICF0aGlzLnRva2VuPyB0aGlzLmFjdG9yLmFjdG9yS2V5IDogYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8qKiAqIE1PRElGIDAuOC54ICoqKi9cbiAgICBsZXQgYWN0b3JLZXlcbiAgICBpZiAoIXRoaXMudG9rZW4pIGFjdG9yS2V5ID0gdGhpcy5hY3Rvci5pZFxuICAgIC8vIFNoZWV0IHdhcyBvcGVuZWQgZnJvbSBhY3RvciBkaXJlY3RvcnlcbiAgICBlbHNlIHtcbiAgICAgIC8vIE9wZW5lZCBmcm9tIHRva2VuXG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuICYmIGdhbWUuYWN0b3JzLnRva2Vuc1t0aGlzLnRva2VuLmlkXSkge1xuICAgICAgICBhY3RvcktleSA9IGBUT0tFTi4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgJHt0aGlzLnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiAnaXRlbScsXG4gICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZSxcbiAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICB9XG5cbiAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxuICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9jZWVkV2l0aG91dFRhcmdldFxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPD0gMCkge1xuICAgICAgICBwcm9jZWVkV2l0aG91dFRhcmdldCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1RhcmdldFNlbGVjdGVkJywge1xuICAgICAgICAgICAgICB3ZWFwb246IHdlYXBvbi5uYW1lXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMCB8fCBwcm9jZWVkV2l0aG91dFRhcmdldCkge1xuICAgICAgICBpZiAoIXdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25SZWxvYWRXZWFwb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5yZWxvYWQoKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24uc2V0QnVsbGV0cygwKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uc2hvb3RCdWxsZXRzKDEpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQW1vIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Ta2lsbFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZFxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suaXRlbSA9IGl0ZW1JZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBIQUNLOiBqdXN0IHRvIHBvcCB0aGUgYWR2YW5jZWQgcm9sbCB3aW5kb3dcbiAgICAvLyBjaGVjay5pdGVtLnJvbGwoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvbkRhbWFnZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCByYW5nZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1kYW1hZ2UnKS5kYXRhc2V0LnJhbmdlXG4gICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXksXG4gICAgICByYW5nZTogcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKCFldmVudC5hbHRLZXkpIHtcbiAgICAgIC8vIGlmKCBldmVudC5jdHJsS2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0NUUkwgcHJlc3NlZCEnKTtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICBjb21iYXQ6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0Py5jb250YWlucygnY29tYmF0JyksXG4gICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwuYWN0b3IgPVxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQgfHxcbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgICByb2xsLmNoYXJhY3RlcmlzdGljID1cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgIHJvbGwuYXR0cmlidXRlID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgICByb2xsLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuaXRlbUlkXG4gICAgICByb2xsLndlYXBvbkFsdFNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICAgICdhbHRlcm5hdGl2LXNraWxsJ1xuICAgICAgKVxuICAgICAgcm9sbC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgIHJvbGwucm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICByb2xsLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuXG4gICAgICBpZiAocm9sbC5hdHRyaWIgPT09ICdkYicpIHJldHVyblxuXG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6XG4gICAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0LCAvLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXMgQ1RSTD9cbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICByb2xsLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgcm9sbC5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIHJvbGwuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByb2xsLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG5cbiAgICAgIGF3YWl0IHJvbGwuX3BlcmZvcm0oKVxuXG4gICAgICBkYXRhLnJvbGwgPSByb2xsLkpTT05Sb2xsRGF0YVxuXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgfVxuICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcm9sbC5hY3RvciA9XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZCB8fFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPVxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgICAgcm9sbC5hdHRyaWJ1dGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICAgIHJvbGwuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICByb2xsLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgcm9sbC5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcblxuICAgICAgaWYgKHJvbGwuYXR0cmliID09PSAnZGInKSByZXR1cm5cblxuICAgICAgZGF0YS5yb2xsID0gcm9sbC5KU09OUm9sbERhdGFcblxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAICBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkXG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgIG5hbWU6IGNoYXJhY3RlcmlzdGljLFxuICAgICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5mcm9tTGlua0RhdGEobGlua0RhdGEpLnRoZW4oZGxnID0+XG4gICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllciwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6XG4gICAgICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNCwgLy8gVE9ETyA6IFRoaXMgY2FuIGJlIHJlbW92ZWQgP1xuICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICB9KVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgaWYgKG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgY2hlY2suZGljZU1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICBpZiAodHlwZW9mIGRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBjaGVjay5zdGFuZGJ5ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjdGVyaXN0aWMpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBdHRyaWJUZXN0IChldmVudCkge1xuICAgIC8vIEZMQVRNT0RJRklFUlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00gJiYgWydsY2snLCAnc2FuJ10uaW5jbHVkZXMoYXR0cmliKSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSBldmVudC5hbHRLZXlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBjaGVjazogJ2NoZWNrJyxcbiAgICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgICAgICAgbmFtZTogYXR0cmliLFxuICAgICAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxuICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoYXR0cmliID09PSAnZGInKSB7XG4gICAgICBpZiAoXG4gICAgICAgICEvXi17MCwxfVxcZCskLy50ZXN0KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoIWlzTmFOKHIudG90YWwpICYmICEoci50b3RhbCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzRGFtYWdlUm9sbCcpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGF0dHJpYiA9PT0gJ2xjaycpIHtcbiAgICAgIGlmICghdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWUpIHJldHVybiAvLyBJZiBsdWNrIGlzIG51bGwsIDAgb3Igbm9uIGRlZmluZWQgc3RvcCB0aGVyZS5cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcblxuICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllciwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6IGZhbHNlLCAvLyBUT0RPOiBSZW1vdmUsIGRlcHJlY2F0ZWQuXG4gICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiBmYWxzZVxuICAgICAgfSkgLy8gVE9ETzogUmVtb3ZlLCBkZXByZWNhdGVkLlxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzYW5NaW4sIHNhbk1heFxuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJykge1xuICAgICAgY29uc3Qgc2FuRGF0YSA9IGF3YWl0IFNhbkRhdGFEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgcHJvbXB0TGFiZWw6IGZhbHNlIC8vIFRPRE86IFJlbW92ZSwgZGVwcmVjYXRlZC5cbiAgICAgIH0pXG4gICAgICBpZiAoc2FuRGF0YSkge1xuICAgICAgICBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxuICAgICAgICBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuXG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NYXgpKSkgc2FuTWF4ID0gTnVtYmVyKHNhbk1heClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc1NhbkNoZWNrID1cbiAgICAgIHR5cGVvZiBzYW5NaW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBzYW5NYXggIT09ICd1bmRlZmluZWQnXG5cbiAgICBpZiAoaXNTYW5DaGVjaykge1xuICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgeyBzYW5NaW46IHNhbk1pbiwgc2FuTWF4OiBzYW5NYXggfSxcbiAgICAgICAge1xuICAgICAgICAgIHNhbk1vZGlmaWVyOiBtb2RpZmllcixcbiAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBpZiAodHlwZW9mIG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgY2hlY2suZGljZU1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgICAgY2hlY2suc3RhbmRieSA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYilcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBuYW1lID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZCk/Lm5hbWVcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgZm9yY2VNb2RpZmllcnM6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmZyb21MaW5rRGF0YShsaW5rRGF0YSkudGhlbihkbGcgPT5cbiAgICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllcjogZmFsc2UsXG4gICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmICh0eXBlb2YgbW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBtb2RpZmllclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGNoZWNrLnN0YW5kYnkgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIHtcblxuICAvLyAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgLy8gIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XG4gIC8vICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XG4gIC8vICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSk7XG5cbiAgLy8gIC8vIEhhbmRsZSBEYW1hZ2UgYXJyYXlcbiAgLy8gIGNvbnN0IGRhbWFnZSA9IGRhdGEuZGF0YT8uZGFtYWdlO1xuICAvLyAgaWYgKCBkYW1hZ2UgKSBkYW1hZ2UucGFydHMgPSBPYmplY3QudmFsdWVzKGRhbWFnZT8ucGFydHMgfHwge30pLm1hcChkID0+IFtkWzBdIHx8ICcnLCBkWzFdIHx8ICcnXSk7XG5cbiAgLy8gIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAvLyAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ191cGRhdGVPYmplY3QnKTtcbiAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggICBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSBDZi4gc2hlZXQuanMoMjQzKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1hZGp1c3RtZW50JykpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICA/IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgIDogbnVsbFxuXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiBudWxsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUpID09PSBpdGVtLm5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPSB2YWx1ZSB8fCAwXG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjcmVkaXRWYWx1ZSA+XG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWF4KSB8fFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlIDxcbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JlZGl0T3V0T2ZSYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWluXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIG1heDogTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1heFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLXZhbHVlJykpIHtcbiAgICAgICAgICAvLyBUT0RPIDogY2hlY2sgd2h5IFNBTiBvbmx5ID9cbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSAnZGF0YS5hdHRyaWJzLnNhbi52YWx1ZScpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc2V0U2FuKHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZXh0LWFyZWEnKSkge1xuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlVGV4dEFyZWEoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlvLXNlY3Rpb24tdmFsdWUnKSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVCaW9WYWx1ZShpbmRleCwgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlvLXNlY3Rpb24tdGl0bGUnKSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVCaW9UaXRsZShpbmRleCwgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbnBjLXNraWxsLXNjb3JlJykpIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsLnVwZGF0ZVZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1uYW1lJykgfHxcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaXRlbS1uYW1lJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNraWxsLm1haW4uaWQnOiBza2lsbC5pZCxcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNraWxsLm1haW4ubmFtZSc6IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2FsdGVybmF0aXYnOlxuICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ2RhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ2RhdGEuc2tpbGwuYWx0ZXJuYXRpdi5uYW1lJzogc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMZSBub20gZGUgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dlYXBvbi1uYW1lJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHsgbmFtZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlcyBkZWdhdHMgZGUgbCdhcm1lIG9uIGNoYW5nw6lzLlxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5yYW5nZS5ub3JtYWwgLi4uKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZS1mb3JtdWxhJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgICAvLyB0ZXN0ZSBsYSB2YWxpZGl0w6kgZGUgbGEgZm9ybXVsZS5cbiAgICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHR5cGVvZiByLnRvdGFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlICsgJyBpcyBub3QgYSB2YWxpZCBmb3JtdWxhJ1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5yYW5nZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnbG9uZyc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdOUENTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBBY3RvciBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgZGF0YS5hbGxvd0Zvcm11bGEgPSB0cnVlXG4gICAgZGF0YS5kaXNwbGF5Rm9ybXVsYSA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gICAgaWYgKGRhdGEuZGlzcGxheUZvcm11bGEgPT09IHVuZGVmaW5lZCkgZGF0YS5kaXNwbGF5Rm9ybXVsYSA9IGZhbHNlXG4gICAgLy8gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdHVyZUluaXQoKTtcbiAgICBkYXRhLmhhc1NhbiA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAhPT0gbnVsbFxuICAgIGRhdGEuaGFzTXAgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSAhPT0gbnVsbFxuICAgIGRhdGEuaGFzTHVjayA9IGRhdGEuZGF0YS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICB0aGlzLmFjdG9yLnVuc2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gICAgc3VwZXIub25DbG9zZVNoZWV0KClcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICducGMnXSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvbnBjLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDU4MCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZm9yY2VBdXRvIChhcHAsIGh0bWwpIHtcbiAgICBjb25zdCBjZWxsID0gaHRtbC5maW5kKCcuZGVzY3JpcHRpb24ucGFubmVsLmV4cGFuZGVkJylcbiAgICBpZiAoY2VsbC5sZW5ndGgpIHtcbiAgICAgIGNlbGwuaGVpZ2h0KE1hdGgubWF4KDIwMCwgaHRtbC5oZWlnaHQoKSAtIGNlbGwucG9zaXRpb24oKS50b3AgLSA4KSArICdweCcpXG4gICAgfVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vLi4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdHVyZVNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqKioqKkNvQzdDcmVhdHVyZVNoZWV0IGdldGRhdGEqKioqKioqKioqKioqKionKTtcblxuICAgIC8vIFRPRE8gOiBkbyB3ZSBuZWVkIHRoYXQgP1xuICAgIGRhdGEuYWxsb3dGb3JtdWxhID0gdHJ1ZVxuICAgIGRhdGEuZGlzcGxheUZvcm11bGEgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICAgIGlmIChkYXRhLmRpc3BsYXlGb3JtdWxhID09PSB1bmRlZmluZWQpIGRhdGEuZGlzcGxheUZvcm11bGEgPSBmYWxzZVxuICAgIC8vIGF3YWl0IHRoaXMuYWN0b3IuY3JlYXR1cmVJbml0KCk7XG4gICAgZGF0YS5oYXNTYW4gPSBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgIT09IG51bGxcbiAgICBkYXRhLmhhc01wID0gZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBkYXRhLmhhc0x1Y2sgPSBkYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWUgIT09IG51bGxcblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcucm9sbC1zYW4nKS5jbGljayh0aGlzLl9vblNhbkNoZWNrLmJpbmQodGhpcykpXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnW25hbWU9XCJkYXRhLmF0dHJpYnMuaHAudmFsdWVcIl0nKVxuICAgICAgICAuY2hhbmdlKGV2ZW50ID0+IHRoaXMuYWN0b3Iuc2V0SGVhbHRoU3RhdHVzTWFudWFsbHkoZXZlbnQpKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblNhbkNoZWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoXG4gICAgICAhdGhpcy5hY3Rvci5kYXRhLmRhdGEuc3BlY2lhbC5zYW5Mb3NzLmNoZWNrUGFzc2VkICYmXG4gICAgICAhdGhpcy5hY3Rvci5kYXRhLmRhdGEuc3BlY2lhbC5zYW5Mb3NzLmNoZWNrRmFpbGxlZFxuICAgICkge1xuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdObyBzYW5pdHkgbG9zcyB2YWx1ZScpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChldmVudC5tZXRhS2V5IHx8XG4gICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3IuZGF0YS5kYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLmRhdGEuZGF0YS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEubW9kaWZpZXIgPSBtb2RpZmllclxuICAgICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIFNhbkNoZWNrQ2FyZC5jaGVja1RhcmdldHModGhpcy5hY3Rvci50b2tlbktleSwgZXZlbnQuc2hpZnRLZXkpXG4gICAgICAvLyBDb0M3U2FuQ2hlY2suY2hlY2tUYXJnZXRzKCB0aGlzLmFjdG9yLmRhdGEuZGF0YS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQsIHRoaXMuYWN0b3IuZGF0YS5kYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWQsIGV2ZW50LnNoaWZ0S2V5LCB0aGlzLnRva2VuS2V5KTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jcmVhdHVyZS1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJywgJ2NyZWF0dXJlJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV1cbiAgICB9KVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLXNjb3JlJykpIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnNldENoYXJhY3RlcmlzdGljKFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5uYW1lLFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgZm9yY2VBdXRvIChhcHAsIGh0bWwpIHtcbiAgICBjb25zdCBjZWxsID0gaHRtbC5maW5kKCcuZGVzY3JpcHRpb24ucGFubmVsLmV4cGFuZGVkJylcbiAgICBpZiAoY2VsbC5sZW5ndGgpIHtcbiAgICAgIGNlbGwuaGVpZ2h0KE1hdGgubWF4KDEzMCwgaHRtbC5oZWlnaHQoKSAtIGNlbGwucG9zaXRpb24oKS50b3AgLSA4KSArICdweCcpXG4gICAgfVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdDcmVhdHVyZVNoZWV0LmZvcmNlQXV0byhhLCB0aGlzLl9lbGVtZW50KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhcmFjdGVyU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGlmICh0aGlzLmFjdG9yLm9jY3VwYXRpb24pIHtcbiAgICAgIGRhdGEuZGF0YS5pbmZvcy5vY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uLm5hbWVcbiAgICAgIGRhdGEuZGF0YS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBkYXRhLmRhdGEuaW5mb3Mub2NjdXBhdGlvblNldCA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5hY3Rvci5hcmNoZXR5cGUpIHtcbiAgICAgIGRhdGEuZGF0YS5pbmZvcy5hcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZS5uYW1lXG4gICAgICBkYXRhLmRhdGEuaW5mb3MuYXJjaGV0eXBlU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBkYXRhLmRhdGEuaW5mb3MuYXJjaGV0eXBlU2V0ID0gZmFsc2VcblxuICAgIGRhdGEudG90YWxFeHBlcmllbmNlID0gdGhpcy5hY3Rvci5leHBlcmllbmNlUG9pbnRzXG4gICAgZGF0YS50b3RhbE9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudFxuICAgIGRhdGEuaW52YWxpZE9jY3VwYXRpb25Qb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvblBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLmRhdGEuZGF0YS5kZXZlbG9wbWVudD8ub2NjdXBhdGlvbilcbiAgICBkYXRhLnRvdGFsQXJjaGV0eXBlID0gdGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudFxuICAgIGRhdGEuaW52YWxpZEFyY2hldHlwZVBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5kYXRhLmRhdGEuZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcbiAgICBkYXRhLnRvdGFsUGVyc29uYWwgPSB0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnRcbiAgICBkYXRhLmludmFsaWRQZXJzb25hbFBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5wZXJzb25hbFBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLmRhdGEuZGF0YS5kZXZlbG9wbWVudD8ucGVyc29uYWwpXG4gICAgZGF0YS5jcmVkaXRSYXRpbmdNYXggPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWF4XG4gICAgKVxuICAgIGRhdGEuY3JlZGl0UmF0aW5nTWluID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1pblxuICAgIClcbiAgICBkYXRhLmludmFsaWRDcmVkaXRSYXRpbmcgPVxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uID5cbiAgICAgICAgZGF0YS5jcmVkaXRSYXRpbmdNYXggfHxcbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA8XG4gICAgICAgIGRhdGEuY3JlZGl0UmF0aW5nTWluXG4gICAgZGF0YS5wdWxwVGFsZW50Q291bnQgPSBkYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA/IGRhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgIDogMFxuICAgIGRhdGEubWluUHVscFRhbGVudHMgPSB0aGlzLmFjdG9yLmFyY2hldHlwZT8uZGF0YS5kYXRhLnRhbGVudHNcbiAgICAgID8gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LmRhdGEuZGF0YS50YWxlbnRzXG4gICAgICA6IDBcbiAgICBkYXRhLmludmFsaWRQdWxwVGFsZW50cyA9IGRhdGEucHVscFRhbGVudENvdW50IDwgZGF0YS5taW5QdWxwVGFsZW50c1xuXG4gICAgZGF0YS5oYXNTa2lsbEZsYWdnZWRGb3JFeHAgPSB0aGlzLmFjdG9yLmhhc1NraWxsRmxhZ2dlZEZvckV4cFxuXG4gICAgZGF0YS5hbGxvd0RldmVsb3BtZW50ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICBkYXRhLmFsbG93Q2hhckNyZWF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgZGF0YS5kZXZlbG9wbWVudFJvbGxGb3JMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaydcbiAgICApXG4gICAgZGF0YS5zaG93RGV2UGFubmVsID0gZGF0YS5hbGxvd0RldmVsb3BtZW50IHx8IGRhdGEuYWxsb3dDaGFyQ3JlYXRpb25cblxuICAgIGRhdGEubWFudWFsQ3JlZGl0ID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ21hbnVhbENyZWRpdCcpXG4gICAgaWYgKCFkYXRhLm1hbnVhbENyZWRpdCkge1xuICAgICAgZGF0YS5jcmVkaXQgPSB7fVxuICAgICAgbGV0IGZhY3RvclxuICAgICAgbGV0IG1vbmV5U3ltYm9sXG4gICAgICBpZiAoIWRhdGEuZGF0YS5jcmVkaXQpIHtcbiAgICAgICAgZmFjdG9yID0gMVxuICAgICAgICBtb25leVN5bWJvbCA9ICckJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yID0gcGFyc2VJbnQoZGF0YS5kYXRhLmNyZWRpdC5tdWx0aXBsaWVyKVxuICAgICAgICAgID8gcGFyc2VJbnQoZGF0YS5kYXRhLmNyZWRpdC5tdWx0aXBsaWVyKVxuICAgICAgICAgIDogMVxuICAgICAgICBtb25leVN5bWJvbCA9IGRhdGEuZGF0YS5jcmVkaXQubW9uZXRhcnlTeW1ib2xcbiAgICAgICAgICA/IGRhdGEuZGF0YS5jcmVkaXQubW9uZXRhcnlTeW1ib2xcbiAgICAgICAgICA6ICckJ1xuICAgICAgfVxuXG4gICAgICBkYXRhLmNyZWRpdC5zcGVuZGluZ0xldmVsID0gYCR7dGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsICpcbiAgICAgICAgZmFjdG9yfSR7bW9uZXlTeW1ib2x9YFxuICAgICAgZGF0YS5jcmVkaXQuYXNzZXRzID0gYCR7dGhpcy5hY3Rvci5hc3NldHMgKiBmYWN0b3J9JHttb25leVN5bWJvbH1gXG4gICAgICBkYXRhLmNyZWRpdC5jYXNoID0gYCR7dGhpcy5hY3Rvci5jYXNoICogZmFjdG9yfSR7bW9uZXlTeW1ib2x9YFxuICAgIH1cblxuICAgIGRhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICAvLyBNT0RJRjogMC44Lnggb3duZXIgZGVwcmVjYXRlZCAgPT4gaXNPd25lclxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUuZmxhZ2dlZDRkZXYnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25Ta2lsbERldihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtb2NjdXBhdGlvbicpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0T2NjdXBhdGlvbigpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LWFyY2hldHlwZScpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0QXJjaGV0eXBlKCkpXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgICAgLmNoYW5nZShldmVudCA9PiB0aGlzLmFjdG9yLnNldEhlYWx0aFN0YXR1c01hbnVhbGx5KGV2ZW50KSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ta2lsbERldiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGF3YWl0IHRoaXMuYWN0b3IuZGV2ZWxvcFNraWxsKHNraWxsSWQsIGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgX29uSXRlbURldGFpbHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yW3R5cGVdXG4gICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDYwMCxcbiAgICAgIGhlaWdodDogNjUwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtdGFicycsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9udEZhY2UsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuL2FjdG9yLXNoZWV0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0VjIgZXh0ZW5kcyBDb0M3Q2hhcmFjdGVyU2hlZXQge1xuICAvLyBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gIC8vICAgc3VwZXIoLi4uYXJncyk7XG4gIC8vIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnNraWxsTGlzdCA9IFtdXG5cbiAgICBsZXQgcHJldmlvdXNTcGVjID0gJydcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGRhdGEuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgaWYgKHByZXZpb3VzU3BlYyAhPT0gc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICBkYXRhLnNraWxsTGlzdC5wdXNoKHtcbiAgICAgICAgICAgIGlzU3BlY2lhbGl6YXRpb246IHRydWUsXG4gICAgICAgICAgICBuYW1lOiBza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZGF0YS5za2lsbExpc3QucHVzaChza2lsbClcbiAgICB9XG5cbiAgICBkYXRhLmRpc3BsYXlQbGF5ZXJOYW1lID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0J1xuICAgIClcbiAgICBpZiAoZGF0YS5kaXNwbGF5UGxheWVyTmFtZSAmJiAhZGF0YS5kYXRhLmluZm9zLnBsYXllcm5hbWUpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLmNoYXJhY3RlclVzZXJcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGRhdGEuZGF0YS5pbmZvcy5wbGF5ZXJuYW1lID0gdXNlci5uYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnY2hhcmFjdGVyJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci1zaGVldC12Mi5odG1sJyxcbiAgICAgIHdpZHRoOiA2ODcsXG4gICAgICBoZWlnaHQ6IDYyMyxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLy8gX29uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gIC8vICAgc3VwZXIuX29uRHJhZ1N0YXJ0KGV2ZW50KTtcbiAgLy8gfVxuXG4gIHN0YXRpYyByZW5kZXJTaGVldCAoc2hlZXQpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgKVxuICAgICAgICAvLyBjb25zdCBib3JkZXJJbWFnZSA9IHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJyk7XG4gICAgICAgIC8vIHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJywgJycpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSAhPT0gJ3NsaWNlJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmhyZWY/LmVuZHNXaXRoKCdjb2M3Zy5jc3MnKSkge1xuICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZVNoZWV0LnJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LnJ1bGVzW2ldLnNlbGVjdG9yVGV4dCA9PT0gJy5zaGVldFYyLmNoYXJhY3RlciBmb3JtJ1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3NzUnVsZUluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgQ1NTU3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvcmRlci1pbWFnZScpXG4gICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICBjYXNlICdhdXRvJzpcbiAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2F1dG8nKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW4nOlxuICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY29udGFpbicpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnY292ZXInOlxuICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY292ZXInKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3NcbiAgICAgICAgICAuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbWFnZScsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGllLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1sZW5ndGgnLCAnYXV0bycpXG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLXNwZWNpYWxpemF0aW9uLWxlbmd0aCcsICdhdXRvJylcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Rm9udCA9IG5ldyBGb250RmFjZShcbiAgICAgICAgICAnY3VzdG9tU2hlZXRGb250JyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Rm9udFxuICAgICAgICAgIC5sb2FkKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9hZGVkRmFjZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMuYWRkKGxvYWRlZEZhY2UpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRDdXJzaXZlRm9udCA9IG5ldyBGb250RmFjZShcbiAgICAgICAgICAnY3VzdG9tU2hlZXRGb250JyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJyksXG4gICAgICAgICAgeyB3ZWlnaHQ6ICdib2xkJyB9XG4gICAgICAgIClcbiAgICAgICAgY3VzdG9tU2hlZXRDdXJzaXZlRm9udFxuICAgICAgICAgIC5sb2FkKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9hZGVkRmFjZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMuYWRkKGxvYWRlZEZhY2UpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJykpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGAke2dhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnKX1weGBcbiAgICAgICAgaWYgKHNpemUgIT09ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKSkge1xuICAgICAgICAgICQoJzpyb290JykuY3NzKCdmb250LXNpemUnLCBzaXplKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuZXhwb3J0IGNsYXNzIENvQzdDb21iYXQge1xuICBzdGF0aWMgcmVuZGVyQ29tYmF0VHJhY2tlciAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgY3VycmVudENvbWJhdCA9IGRhdGEuY29tYmF0c1tkYXRhLmN1cnJlbnRJbmRleCAtIDFdXG4gICAgaWYgKCFjdXJyZW50Q29tYmF0KSByZXR1cm5cblxuICAgIC8vIFRPRE8gOiBTaSBsZSBjb21iYXQgZXN0IGRlamEgZGVidXTDqSBhdmFudCBjaGFyZ2VtZW50IGxhIGZvbmN0aW9uIGQnaW5pdGlhdGl2ZSBwb2ludGUgdmVycyBsJ2FuY2llbm5lLlxuICAgIC8vIGxhIGZvbmN0aW9uIGF0dHJpYnXDqWUgZXN0IGRhdGEuY29tYmF0LnJvbGxJbml0aWF0aXZlXG4gICAgaHRtbC5maW5kKCcuY29tYmF0YW50JykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgIC8vIGlmKCBnYW1lLmNvbWJhdC5zdGFydGVkKXtcblxuICAgICAgY29uc3QgY29tYklkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbWJhdGFudC1pZCcpXG4gICAgICBjb25zdCBjb21iYXRhbnRDb250cm9sc0RpdiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5jb21iYXRhbnQtY29udHJvbHMnKVxuICAgICAgLy8gY29uc3QgY29tYmF0YW50ID0gZ2FtZS5jb21iYXQuZ2V0Q29tYmF0YW50KGNvbWJJZCk7XG4gICAgICBjb25zdCBjb21iYXRhbnQgPSBjdXJyZW50Q29tYmF0LmRhdGEuY29tYmF0YW50cy5nZXQoY29tYklkKVxuXG4gICAgICBpZiAoY29tYmF0YW50LmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhY3RpdmUgYWRkLWluaXRcIiB0aXRsZT1cIiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuUHV0R3VuQXdheSdcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5EcmF3R3VuJ1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykgPT09ICdvcHRpb25hbCcgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXRBc1RleHQnKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSkge1xuICAgICAgICAgIGNvbnN0IHRva2VuSW5pdGlhdGl2ZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCBpbml0aWF0aXZlVGVzdCA9IHRva2VuSW5pdGlhdGl2ZS5xdWVyeVNlbGVjdG9yKCcuaW5pdGlhdGl2ZScpXG4gICAgICAgICAgY29uc3Qgcm9sbCA9XG4gICAgICAgICAgICAxMDAgKiBjb21iYXRhbnQuaW5pdGlhdGl2ZSAtIDEwMCAqIE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpXG4gICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKSkge1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2Z1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZmFpbHVyZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eVJlZ3VsYXInXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2hhcmQtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUhhcmQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUV4dHJlbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdjcml0aWNhbCcpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUNyaXRpY2FsJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSA8IDApIHtcbiAgICAgICAgY29uc3QgaDQgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4tbmFtZScpLnF1ZXJ5U2VsZWN0b3IoJ2g0JylcbiAgICAgICAgY29uc3Qgc3BhbiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uaW5pdGlhdGl2ZScpXG4gICAgICAgIGg0LnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgICBoNC5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIHNwYW4uc3R5bGUudGV4dFNoYWRvdyA9ICcxcHggMXB4IDRweCBkYXJrcmVkJ1xuXG4gICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJ2RhcmtyZWQnXG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSAnYmxhY2snXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgfVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLWluaXQnKS5jbGljayhldmVudCA9PiBDb0M3Q29tYmF0Ll9vblRvZ2dsZUd1bihldmVudCkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlR3VuIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGJ0bi5jbG9zZXN0KCcuY29tYmF0YW50JylcbiAgICBjb25zdCBjID0gYXdhaXQgZ2FtZS5jb21iYXQuY29tYmF0YW50cy5nZXQobGkuZGF0YXNldC5jb21iYXRhbnRJZClcbiAgICBpZiAoYy5hY3Rvci5pc093bmVyKSB7XG4gICAgICBpZiAoYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCBmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCB0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5ld0luaXQgPSBhd2FpdCBjLmFjdG9yLnJvbGxJbml0aWF0aXZlKCEhYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKVxuICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgIGlmIChjLmluaXRpYXRpdmUgPCBuZXdJbml0KSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXG4gICAgfSBlbHNlIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgfVxufVxuXG4vKipcbiAqIFJvbGwgaW5pdGlhdGl2ZSBmb3Igb25lIG9yIG11bHRpcGxlIENvbWJhdGFudHMgd2l0aGluIHRoZSBDb21iYXQgZW50aXR5XG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gaWRzICAgICBBIENvbWJhdGFudCBpZCBvciBBcnJheSBvZiBpZHMgZm9yIHdoaWNoIHRvIHJvbGxcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aGljaCBtb2RpZnkgaG93IGluaXRpYXRpdmUgcm9sbHMgYXJlIGNyZWF0ZWQgb3IgcHJlc2VudGVkLlxuICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gW29wdGlvbnMuZm9ybXVsYV0gICAgICAgICBBIG5vbi1kZWZhdWx0IGluaXRpYXRpdmUgZm9ybXVsYSB0byByb2xsLiBPdGhlcndpc2UgdGhlIHN5c3RlbSBkZWZhdWx0IGlzIHVzZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnVwZGF0ZVR1cm49dHJ1ZV0gICAgIFVwZGF0ZSB0aGUgQ29tYmF0IHR1cm4gYWZ0ZXIgYWRkaW5nIG5ldyBpbml0aWF0aXZlIHNjb3JlcyB0byBrZWVwIHRoZSB0dXJuIG9uIHRoZSBzYW1lIENvbWJhdGFudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5tZXNzYWdlT3B0aW9ucz17fV0gICAgQWRkaXRpb25hbCBvcHRpb25zIHdpdGggd2hpY2ggdG8gY3VzdG9taXplIGNyZWF0ZWQgQ2hhdCBNZXNzYWdlc1xuICogQHJldHVybiB7UHJvbWlzZTxDb21iYXQ+fSAgICAgICAgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHRoZSB1cGRhdGVkIENvbWJhdCBlbnRpdHkgb25jZSB1cGRhdGVzIGFyZSBjb21wbGV0ZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJvbGxJbml0aWF0aXZlIChcbiAgaWRzLFxuICB7IGZvcm11bGEgPSBudWxsLCB1cGRhdGVUdXJuID0gdHJ1ZSwgbWVzc2FnZU9wdGlvbnMgPSB7fSB9ID0ge31cbikge1xuICAvLyBTdHJ1Y3R1cmUgaW5wdXQgZGF0YVxuICBpZHMgPSB0eXBlb2YgaWRzID09PSAnc3RyaW5nJyA/IFtpZHNdIDogaWRzXG4gIGNvbnN0IGN1cnJlbnRJZCA9IHRoaXMuY29tYmF0YW50LmlkXG5cbiAgLy8gSXRlcmF0ZSBvdmVyIENvbWJhdGFudHMsIHBlcmZvcm1pbmcgYW4gaW5pdGlhdGl2ZSByb2xsIGZvciBlYWNoXG4gIGNvbnN0IHVwZGF0ZXMgPSBbXVxuICBmb3IgKGNvbnN0IFssIGlkXSBvZiBpZHMuZW50cmllcygpKSB7XG4gICAgLy8gR2V0IENvbWJhdGFudCBkYXRhIChub24tc3RyaWN0bHkpXG4gICAgY29uc3QgY29tYmF0YW50ID0gdGhpcy5jb21iYXRhbnRzLmdldChpZClcbiAgICBpZiAoIWNvbWJhdGFudD8uaXNPd25lcikgcmV0dXJuIG51bGxcblxuICAgIC8vIFByb2R1Y2UgYW4gaW5pdGlhdGl2ZSByb2xsIGZvciB0aGUgQ29tYmF0YW50XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IGNvbWJhdGFudC5hY3Rvci5yb2xsSW5pdGlhdGl2ZShcbiAgICAgICEhY29tYmF0YW50LmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJylcbiAgICApXG4gICAgdXBkYXRlcy5wdXNoKHsgX2lkOiBpZCwgaW5pdGlhdGl2ZTogcm9sbCB9KVxuICB9XG4gIGlmICghdXBkYXRlcy5sZW5ndGgpIHJldHVybiB0aGlzXG5cbiAgLy8gVXBkYXRlIG11bHRpcGxlIGNvbWJhdGFudHNcbiAgYXdhaXQgdGhpcy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnQ29tYmF0YW50JywgdXBkYXRlcylcblxuICAvLyBFbnN1cmUgdGhlIHR1cm4gb3JkZXIgcmVtYWlucyB3aXRoIHRoZSBzYW1lIGNvbWJhdGFudFxuICBpZiAodXBkYXRlVHVybikge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgdHVybjogdGhpcy50dXJucy5maW5kSW5kZXgodCA9PiB0LmlkID09PSBjdXJyZW50SWQpIH0pXG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBleHBhbmRPYmplY3QsIGZvdW5kcnksIGdhbWUsIGlzTmV3ZXJWZXJzaW9uICovXG5leHBvcnQgY2xhc3MgVXBkYXRlciB7XG4gIHN0YXRpYyBhc3luYyBjaGVja0ZvclVwZGF0ZSAoKSB7XG4gICAgdGhpcy5zeXN0ZW1VcGRhdGVWZXJzaW9uID0gU3RyaW5nKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgKVxuICAgIGlmIChpc05ld2VyVmVyc2lvbignMC4zJywgdGhpcy5zeXN0ZW1VcGRhdGVWZXJzaW9uKSkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5NZXNzYWdlJywge1xuICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0uZGF0YS52ZXJzaW9uXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25VcGRhdGUnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IFVwZGF0ZXIudXBkYXRlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBza2lwOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkdNUmVxdWlyZWQnLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS5kYXRhLnZlcnNpb25cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBPSzoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uT2theScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGVudGl0eSAke2FjdG9yLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBhY3Rvci51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBBY3RvciAke2FjdG9yLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBJdGVtc1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBnYW1lLml0ZW1zLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoaXRlbS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgSXRlbSBlbnRpdHkgJHtpdGVtLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5tZXNzYWdlID0gYEZhaWxlZCBDb0M3IHN5c3RlbSBtaWdyYXRpb24gZm9yIEl0ZW0gJHtpdGVtLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBUYWJsZXNcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIGdhbWUudGFibGVzLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKHRhYmxlLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBUYWJsZSBlbnRpdHkgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBgRmFpbGVkIENvQzcgc3lzdGVtIG1pZ3JhdGlvbiBmb3IgVGFibGUgJHt0YWJsZS5uYW1lfTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZW50aXR5ICR7bWFjcm8ubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IG1hY3JvLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5tZXNzYWdlID0gYEZhaWxlZCBDb0M3IHN5c3RlbSBtaWdyYXRpb24gZm9yIFRhYmxlICR7bWFjcm8ubmFtZX06ICR7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIENvbXBlbmRpdW0gUGFja3NcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKFxuICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICd3b3JsZCcgJiZcbiAgICAgICAgWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEuZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsICcwLjMnKVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3IgSXRlbXNcbiAgICBpZiAoYWN0b3IuaXRlbXMpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYWN0b3IuaXRlbXMucmVkdWNlKChhcnIsIGkpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPVxuICAgICAgICAgIGkgaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaS50b09iamVjdCgpIDogaVxuICAgICAgICBjb25zdCBpdGVtVXBkYXRlID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoaXRlbURhdGEpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KGl0ZW1VcGRhdGUpKSB7XG4gICAgICAgICAgaXRlbVVwZGF0ZS5faWQgPSBpdGVtRGF0YS5faWRcbiAgICAgICAgICBhcnIucHVzaChleHBhbmRPYmplY3QoaXRlbVVwZGF0ZSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyclxuICAgICAgfSwgW10pXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cGRhdGVEYXRhLml0ZW1zID0gaXRlbXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1pZ3JhdGVDb21wZW5kaXVtRGF0YSAocGFjaykge1xuICAgIGNvbnN0IGVudGl0eSA9IHBhY2subWV0YWRhdGEuZW50aXR5XG4gICAgaWYgKCFbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJ10uaW5jbHVkZXMoZW50aXR5KSkgcmV0dXJuXG5cbiAgICAvLyBVbmxvY2sgdGhlIHBhY2sgZm9yIGVkaXRpbmdcbiAgICBjb25zdCB3YXNMb2NrZWQgPSBwYWNrLmxvY2tlZFxuICAgIGF3YWl0IHBhY2suY29uZmlndXJlKHsgbG9ja2VkOiBmYWxzZSB9KVxuXG4gICAgYXdhaXQgcGFjay5taWdyYXRlKClcbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgY29tcGVuZGl1bSBlbnRyaWVzIC0gYXBwbHlpbmcgZmluZS10dW5lZCBtaWdyYXRpb24gZnVuY3Rpb25zXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKGVudGl0eSkge1xuICAgICAgICAgIGNhc2UgJ0FjdG9yJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0l0ZW0nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdNYWNybyc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdSb2xsVGFibGUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2VudGl0eX0gZW50aXR5ICR7ZG9jLm5hbWV9IGluIENvbXBlbmRpdW0gJHtwYWNrLmNvbGxlY3Rpb259YFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBlbnRpdHkgJHtkb2MubmFtZX0gaW4gcGFjayAke3BhY2suY29sbGVjdGlvbn06ICR7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogd2FzTG9ja2VkIH0pXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUl0ZW1EYXRhIChpdGVtKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgSXRlbVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXhwZXJpZW5jZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQXJ0d29yayhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlTWFjcm9EYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZU1hY3JvQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVRhYmxlRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVUYWJsZUFydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJ10gPSAwXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQXJ0d29yayAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKHJlZ0V4KVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5kYXRhLml0ZW1zKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID0gaXRlbS5kYXRhLml0ZW1zXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ10gPSBpdGVtLmRhdGEuc2tpbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPSBpdGVtLmRhdGEuZ3JvdXBzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdyb3VwcyddW29dLnNraWxsc1trXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc3BlbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5zcGVsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3BlbGxzJ10gPSBpdGVtLmRhdGEuc3BlbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3BlbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ10gPSBpdGVtLmRhdGEuc2tpbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICAvKipcbiAgICogQm9vayBhdXRvbWF0aW9uIHdhcyBpbmNyZWFzZWQgaW4gMC42LjVcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW0gRG9jdW1lbnQgZGF0YSBleHByZXNzZWQgYXMgYSBwbGFpbiBvYmplY3RcbiAgICogQHBhcmFtIHtqc29ufSB1cGRhdGVEYXRhIERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxuICAgKiBAcmV0dXJucyB7anNvbn0gRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqL1xuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgLyoqIElmIGJvb2sgc3RpbGwgaGFzIHRoZSBkYXRhLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCBrZXkgdGhlbiBydW4gbWlncmF0ZSBvbiBpdCAqL1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEuZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXV0aG9yJ10gPSBpdGVtLmRhdGEuYXV0aG9yIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGF0ZSddID0gaXRlbS5kYXRhLmRhdGUgfHwgJydcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5sYW5ndWFnZSddID0gaXRlbS5kYXRhLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNhbml0eUxvc3MnXSA9IGl0ZW0uZGF0YS5zYW5Mb3NzIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLmRhdGEubXl0aG9zUmF0aW5nKSB8fCAwXG4gICAgICAgIC8qKiBSZW5hbWVkL21vdmVkIGZpZWxkcyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbnRlbnQnXSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5rZWVwZXJOb3RlcyddID0gaXRlbS5kYXRhLmRlc2NyaXB0aW9uLm5vdGVzXG4gICAgICAgIC8qKiBOZXcgZmllbGRzIHNldCBkZWZhdWx0IHZhbHVlcyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRpZmZpY3VsdHlMZXZlbCddID0gJ3JlZ3VsYXInXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pbml0aWFsUmVhZGluZyddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5rZWVwZXJOb3RlcyddID0gJydcbiAgICAgICAgLyoqIE1vdmUgYW5kIHJlbmFtZSBnYWluIGZpZWxkcyB0byBnYWlucywgZGVmYXVsdCBOYU4gdmFsdWVzIHRvIDAgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uZGF0YS5nYWluLmN0aHVsaHVNeXRob3MuQ01JKSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5kYXRhLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5vY2N1bHQnXSA9IE51bWJlcihpdGVtLmRhdGEuZ2Fpbi5vY2N1bHQpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zdHVkeSddID0ge1xuICAgICAgICAgIG5lY2Vzc2FyeTogTnVtYmVyKGl0ZW0uZGF0YS53ZWVrc1N0dWR5VGltZSkgfHwgMCxcbiAgICAgICAgICBwcm9ncmVzczogMFxuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPXNhbkxvc3MnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPXdlZWtzU3R1ZHlUaW1lJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24uLT11bmlkZW50aWZpZWQnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09cHJvcGVydGllcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09ZmxhZ3MnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQXJ0d29yayAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2gocmVnRXgpXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpbWFnZSA9IFN0cmluZyhhY3Rvci50b2tlbi5pbWcpLm1hdGNoKHJlZ0V4KVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YVsndG9rZW4uaW1nJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgIGltYWdlID0gU3RyaW5nKHYuaWNvbikubWF0Y2gocmVnRXgpXG4gICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID0gTWF0aC5jZWlsKGFjdG9yLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5J10gPSAnIC8gJyArIG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMubXAudmFsdWUnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmF0dHJpYnMubXAubWF4ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLm1wLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEubm90ZXMgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEubm90ZXMgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLm5vdGVzJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlTWFjcm9BcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBjb25zdCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKHJlZ0V4KVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZVRhYmxlQXJ0d29yayAodGFibGUsIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2gocmVnRXgpXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5yZXN1bHRzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKHJlZ0V4KVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5yZXN1bHRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGEucmVzdWx0cyA9IHRhYmxlLnJlc3VsdHNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHNba10uaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5cbmNvbnN0IGFjY2VudGVkQ2hhcmFjdGVycyA9IHJlZ2V4cXVvdGUoXG4gICdhzIFlzIFpzIFvzIHDoMOow6zDssO5w4DDiMOMw5LDmcOhw6nDrcOzw7rDvcOBw4nDjcOTw5rDncOiw6rDrsO0w7vDgsOKw47DlMObw6PDscO1w4PDkcOVw6TDq8Ovw7bDvMO/w4TDi8OPw5bDnMW4w6fDh8Ofw5jDuMOFw6XDhsOmxZMnXG4pXG5cbi8vIGh0dHBzOi8vYml0YnVja2V0Lm9yZy9jZ2dhZXJ0bmVyL2pzLWhhY2tzL3Jhdy9tYXN0ZXIvcXVvdGUuanNcbmZ1bmN0aW9uIHJlZ2V4cXVvdGUgKHN0cmluZykge1xuICBjb25zdCBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGxldCBxU3RyaW5nID0gXCInXCJcblxuICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgY3VycmVudCA9IHN0cmluZy5jaGFyQXQoaSlcblxuICAgIGlmIChjdXJyZW50ID49ICcgJyAmJiBjdXJyZW50IDw9ICd+Jykge1xuICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICBxU3RyaW5nICs9ICdcXFxcJ1xuICAgICAgfVxuXG4gICAgICBxU3RyaW5nICs9IGN1cnJlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjdXJyZW50KSB7XG4gICAgICAgIGNhc2UgJ1xcYic6XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdcXGYnOlxuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdcXHQnOlxuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnXFx2JzpcbiAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcbiAgICAgICAgICBmb3IgKGxldCBqID0gNDsgLS1qID49IGN1cnJlbnQubGVuZ3RoOyBxU3RyaW5nICs9ICcwJyk7XG4gICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcVN0cmluZyArPSBcIidcIlxuICByZXR1cm4gcVN0cmluZ1xufVxuXG4vLyBSZWd1bGFyIGV4cHJlc3Npb25zIHRvIHBhcnNlIGFjdG9ycyBmcm9tIGFuIGVuZ2xpc2ggc291cmNlXG5jb25zdCBlbmdsaXNoUmVnRXhwID0ge1xuICBuYW1lUmVnRXhwOiBuZXcgUmVnRXhwKFxuICAgICdeW1xcXFxzXFxcXG5cXFxccl0qKD88bmFtZT5bXFxcXHdcXFxcc1xcXFwuXFxcXC9cXFxcKFxcXFwpXFxcXC0nICsgYWNjZW50ZWRDaGFyYWN0ZXJzICsgJ10rKSwnXG4gICksXG4gIGFnZVJlZ0V4cDogL1ssIF0/XFxzKmFnZTo/XFxzKyhcXGQrKS9pLFxuICBzdHJSZWdFeHA6IC8oPzpTVFIpOj9cXHMrKFxcZCspLyxcbiAgY29uUmVnRXhwOiAvQ09OOj9cXHMrKFxcZCspLyxcbiAgc2l6UmVnRXhwOiAvKD86U0laKTo/XFxzKyhcXGQrKS8sXG4gIGludFJlZ0V4cDogL0lOVDo/XFxzKyhcXGQrKS8sXG4gIHBvd1JlZ0V4cDogLyg/OlBPVyk6P1xccysoXFxkKykvLFxuICBkZXhSZWdFeHA6IC8oPzpERVgpOj9cXHMrKFxcZCspLyxcbiAgYXBwUmVnRXhwOiAvKD86QVBQKTo/XFxzKyhcXGQrKS8sXG4gIGVkdVJlZ0V4cDogL0VEVTo/XFxzKyhcXGQrKS8sXG4gIHNhblJlZ0V4cDogLyg/OlNBTnxTYW5pdHkpOj9cXHMrKFxcZCspLyxcbiAgaHBSZWdFeHA6IC8oPzpIUHxIaXQgcG9pbnRzKTo/XFxzKyhcXGQrKS8sXG4gIG1wUmVnRXhwOiAvKD86TVB8TWFnaWMgcG9pbnRzKTo/XFxzKyhcXGQrKS8sXG4gIGRiUmVnRXhwOiAvKD86RGFtYWdlIEJvbnVzfERCKTo/XFxzKyhbKy1dP1xcZCsoPzpkXFxkK3xEXFxkKyk/KS9pLFxuICAvLyAgYXR0YWNrc1JlZ0V4cCA6IC8oPzpBdHRhY2tzfENvbWJhdCk6P1xccysoLiopU3BlbGxzL3NpbSxcbiAgYXR0YWNrc1JlZ0V4cDogLyg/OkF0dGFja3N8RmlnaHRpbmd8Q29tYmF0KTo/XFxzKyguKilcXC5bXFxufFxccl0/JC9pbXMsXG4gIGJ1aWxkUmVnRXhwOiAvKD86QnVpbGQpOj9cXHMrKFsrLV0/XFxkKykvaSxcbiAgYXJtb3JSZWdFeHA6IC8oPzpBcm1vcik6P1xccysobm9uZXxcXGQrKS9pLFxuICBtb3ZlUmVnRXhwOiAvKD86TW92ZSk6P1xccysoXFxkKykvaSxcbiAgbHVja1JlZ0V4cDogLyg/Okx1Y2spOj9cXHMrKFxcZCspL2ksXG4gIC8vICBzcGVsbHNSZWdFeHAgOiAvU3BlbGxzOj9cXHMrKC4qKVNraWxscy9zaW0sXG4gIHNwZWxsc1JlZ0V4cDogLyg/OlNwZWxscyk6P1xccysoLiopXFwuW1xcbnxcXHJdPyQvaW1zLFxuICAvLyAgc2tpbGxzUmVnRXhwIDogL1NraWxsczo/XFxzKyguKilMYW5ndWFnZXMvc2ltLFxuICBza2lsbHNSZWdFeHA6IC8oPzpTa2lsbHMpOj9cXHMrKC4qKVxcLltcXG58XFxyXT8kL2ltcyxcbiAgZG9kZ2VSZWdFeHA6IC8oPzxuYW1lPkRvZGdlKTo/XFxzK1xcKD8oPzxwZXJjZW50YWdlPlxcZCspXFwpP1xccyolL2ksXG4gIC8vICBsYW5ndWFnZXNSZWdFeHAgOiAvTGFuZ3VhZ2VzOj9cXHMrKC4qKVxcLi9zaW0sXG4gIGxhbmd1YWdlc1JlZ0V4cDogLyg/Okxhbmd1YWdlcyk6P1xccysoLiopXFwuW1xcbnxcXHJdPyQvaW1zLFxuICBza2lsbFJlZ0V4cDogbmV3IFJlZ0V4cChcbiAgICAnKD88c2tpbGw+W1xcXFx3XFxcXHNcXFxcKFxcXFwpLlxcXFwvJyArXG4gICAgICBhY2NlbnRlZENoYXJhY3RlcnMgK1xuICAgICAgJ10rKSAoPzxwZXJjZW50YWdlPlxcXFxkKyklJ1xuICApLFxuICBhdHRhY2tzUGVyUm91bmRSZWdFeHA6IC8oPzpBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MpOj9cXHMrKG5vbmV8XFxkKykvaSxcbiAgc2FuTG9zc1JlZ0V4cDogLyg/OlNhbml0eSBsb3NzfFNBTiBsb3NzKTo/XFxzKyhub25lfFxcZFtkRF0/WytcXGRdKlxcL1xcZFtkRF1bK1xcZF0rKS9pLFxuICB3ZWFwb25SZWdFeHA6IG5ldyBSZWdFeHAoXG4gICAgJ14oPzx3ZWFwb24+W1xcXFx3XFxcXHNcXFxcblxcXFwoXFxcXCkuXFxcXC8nICtcbiAgICAgIGFjY2VudGVkQ2hhcmFjdGVycyArXG4gICAgICAnXSspOj9bXFxcXG5cXFxcclxcXFxzXSsoPzxwZXJjZW50YWdlPlxcXFxkKyklLD9cXFxccyooPzpcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpP1xcXFxzKiw/XFxcXHMqKD86ZGFtYWdlKVxcXFxzKyg/PGRhbWFnZT5bXFxcXGQrXFxcXCtkRFxcXFwtIF0rXFxcXHMqKERCfGRifGRhbWFnZSBib251cyk/KScsXG4gICAgJ2ltZydcbiAgKSxcbiAgc3RvcFdvcmRzOiAnKFNwZWxsc3xTa2lsbHN8U2FuaXR5IGxvc3N8TGFuZ3VhZ2VzfEFybW9yfEF0dGFja3N8Q29tYmF0fCknLFxuICAvLyBXZWFwb25zIHJlZ3VsYXIgZXhwcmVzc2lvbnMsXG4gIGhhbmRndW5SZWdFeHA6IC8oIEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IC4zOCkvaSxcbiAgcmlmbGVSZWdFeHA6IC8oUmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCkvaSxcbiAgc21iUmVnRXhwOiAvKFN1Ym1hY2hpbmUgR3VufFRob21wc29uKS9pLFxuICBtYWNoaW5lR3VuUmVnRXhwOiAvKEJyb3duaW5nfFZpY2tlcnMpL2ksXG4gIGxhdW5jaGVkV2VhcG9uczogLyhNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUpL2lcbn1cblxuLy8gUmVndWxhciBleHByZXNzaW9ucyB0byBwYXJzZSBhY3RvcnMgZnJvbSBhIGZyZW5jaCBzb3VyY2VcbmNvbnN0IGZyZW5jaFJlZ0V4cCA9IHtcbiAgbmFtZVJlZ0V4cDogbmV3IFJlZ0V4cChcbiAgICAnXltcXFxcc1xcXFxuXFxcXHJdKig/PG5hbWU+W1xcXFx3XFxcXHNcXFxcLlxcXFwvXFxcXChcXFxcKVxcXFwtJyArIGFjY2VudGVkQ2hhcmFjdGVycyArICddKyksJ1xuICApLFxuICBhZ2VSZWdFeHA6IC8oXFxkKykgYW5zL2ksXG4gIHN0clJlZ0V4cDogLyg/OkZPUik6P1xccysoXFxkKykvLFxuICBjb25SZWdFeHA6IC9DT046P1xccysoXFxkKykvLFxuICBzaXpSZWdFeHA6IC8oPzpUQUkpOj9cXHMrKFxcZCspLyxcbiAgaW50UmVnRXhwOiAvSU5UOj9cXHMrKFxcZCspLyxcbiAgcG93UmVnRXhwOiAvKD86UE9VKTo/XFxzKyhcXGQrKS8sXG4gIGRleFJlZ0V4cDogLyg/OkRFWCk6P1xccysoXFxkKykvLFxuICBhcHBSZWdFeHA6IC8oPzpBUFApOj9cXHMrKFxcZCspLyxcbiAgZWR1UmVnRXhwOiAvw4lEVTo/XFxzKyhcXGQrKS8sXG4gIHNhblJlZ0V4cDogLyg/OlNBTnxTYW50w6kgTWVudGFsZSk6P1xccysoXFxkKykvLFxuICBocFJlZ0V4cDogLyg/OlBWfFBvaW50cyBkZSB2aWUpOj9cXHMrKFxcZCspLyxcbiAgbXBSZWdFeHA6IC8oPzpQTXxQb2ludHMgZGUgbWFnaWUpOj9cXHMrKFxcZCspLyxcbiAgZGJSZWdFeHA6IC8oPzpCRHxCb251cyBhdXggZG9tbWFnZXN8SW1wYWN0fEltcCk6P1xccysoWystXT9cXGQrKD86ZFxcZCt8RFxcZCspPykvaSxcbiAgYXR0YWNrc1JlZ0V4cDogLyg/OkF0dGFxdWVzfEFybWVzfENvbWJhdCk6P1xccysoLiopXFwuW1xcbnxcXHJdPyQvaW1zLFxuICBidWlsZFJlZ0V4cDogLyg/OkNhcnJ1cmUpOj9cXHMrKFsrLV0/XFxkKykvaSxcbiAgYXJtb3JSZWdFeHA6IC8oPzpBcm11cmUpOj9cXHMrKEFjdW5lfFxcZCspL2ksXG4gIG1vdmVSZWdFeHA6IC8oPzpNdnR8TW91dmVtZW50fETDqXBsYWNlbWVudCk6P1xccysoXFxkKykvaSxcbiAgbHVja1JlZ0V4cDogLyg/OkNoYW5jZSk6P1xccysoXFxkKykvaSxcbiAgc3BlbGxzUmVnRXhwOiAvKD86U29ydGlsw6hnZXN8U29ydHMpOj9cXHMrKC4qKVxcLltcXG58XFxyXT8kL2ltcyxcbiAgc2tpbGxzUmVnRXhwOiAvKD86Q29tcMOpdGVuY2VzKTo/XFxzKyguKilcXC5bXFxufFxccl0/JC9pbXMsXG4gIGRvZGdlUmVnRXhwOiAvKD88bmFtZT5Fc3F1aXZlcik6P1xccytcXCg/KD88cGVyY2VudGFnZT5cXGQrKVxcKT9cXHMqJS9pLFxuICBsYW5ndWFnZXNSZWdFeHA6IC8oPzpMYW5ndWUpOj9cXHMrKC4qKVxcLltcXG58XFxyXT8kL2ltcyxcbiAgc2tpbGxSZWdFeHA6IG5ldyBSZWdFeHAoXG4gICAgJyg/PHNraWxsPltcXFxcd1xcXFxzXFxcXChcXFxcKS5cXFxcLycgK1xuICAgICAgYWNjZW50ZWRDaGFyYWN0ZXJzICtcbiAgICAgICddKykgKD88cGVyY2VudGFnZT5cXFxcZCspJSdcbiAgKSxcbiAgYXR0YWNrc1BlclJvdW5kUmVnRXhwOiAvKD86QXR0YXF1ZXMgcGFyIHJvdW5kKTo/XFxzKyhBY3VuZXxcXGQrKS9pLFxuICBzYW5Mb3NzUmVnRXhwOiAvKD86UGVydGUgZGUgW1NhbnTDqSBtZW50YWxlfFNBTl0pOj9cXHMrKG5vfFxcZFtkRF0/WytcXGRdKlxcL1xcZFtkRF1bK1xcZF0rKS9pLFxuICB3ZWFwb25SZWdFeHA6IG5ldyBSZWdFeHAoXG4gICAgJ14oPzx3ZWFwb24+W1xcXFx3XFxcXHNcXFxcblxcXFwoXFxcXCkuXFxcXC8nICtcbiAgICAgIGFjY2VudGVkQ2hhcmFjdGVycyArXG4gICAgICAnXSspOj9bXFxcXG5cXFxcclxcXFxzXSsoPzxwZXJjZW50YWdlPlxcXFxkKyklLD9cXFxccyooPzpcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpP1xcXFxzKiw/XFxcXHMqKD86ZG9tbWFnZXxkw6lnw6J0cylcXFxccysoPzxkYW1hZ2U+W1xcXFxkK1xcXFwrZERcXFxcLSBdK1xcXFxzKihJbXBhY3R8SW1wKT8pJyxcbiAgICAnaW1nJ1xuICApLFxuICBzdG9wV29yZHM6XG4gICAgJyhMYW5ndWV8QXJtdXJlfENhcnJ1cmV8UGVydGUgZGUgU2FudMOpIG1lbnRhbGV8Q29tcMOpdGVuY2VzfENvbWJhdHxBcm1lc3xBdHRhcXVlcyknLFxuICAvLyBXZWFwb25zIHJlZ3VsYXIgZXhwcmVzc2lvbnMsXG4gIGhhbmRndW5SZWdFeHA6IC8oUmV2b2x2ZXJ8UGlzdG9sZXR8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCAuMzgpL2ksXG4gIHJpZmxlUmVnRXhwOiAvKENhcmFiaW5lfExlZS1FbmZpZWxkfEZ1c2lsKS9pLFxuICBzbWJSZWdFeHA6IC8oU01HfFRob21wc29uKS9pLFxuICBtYWNoaW5lR3VuUmVnRXhwOiAvKEJyb3duaW5nfFZpY2tlcnN8TWl0cmFpbGxldXNlKS9pLFxuICBsYXVuY2hlZFdlYXBvbnM6IC8oTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlKS9pXG59XG5cbi8vIFJlZ3VsYXIgZXhwcmVzc2lvbnMgdG8gcGFyc2UgYWN0b3JzIGZyb20gYSBzcGFuaXNoIHNvdXJjZVxuY29uc3Qgc3BhbmlzaFJlZ0V4cCA9IHtcbiAgbmFtZVJlZ0V4cDogbmV3IFJlZ0V4cChcbiAgICAnXltcXFxcc1xcXFxuXFxcXHJdKig/PG5hbWU+W1xcXFx3XFxcXHNcXFxcLlxcXFwvXFxcXChcXFxcKVxcXFwtJyArIGFjY2VudGVkQ2hhcmFjdGVycyArICddKyksJ1xuICApLFxuICBhZ2VSZWdFeHA6IC8oXFxkKykgYVvDscORXW9zL2ksXG4gIHN0clJlZ0V4cDogLyg/OkZVRSk6P1xccysoXFxkKykvLFxuICBjb25SZWdFeHA6IC9DT046P1xccysoXFxkKykvLFxuICBzaXpSZWdFeHA6IC8oPzpUQU0pOj9cXHMrKFxcZCspLyxcbiAgaW50UmVnRXhwOiAvSU5UOj9cXHMrKFxcZCspLyxcbiAgcG93UmVnRXhwOiAvKD86UE9EKTo/XFxzKyhcXGQrKS8sXG4gIGRleFJlZ0V4cDogLyg/OkRFUyk6P1xccysoXFxkKykvLFxuICBhcHBSZWdFeHA6IC8oPzpBUEEpOj9cXHMrKFxcZCspLyxcbiAgZWR1UmVnRXhwOiAvRURVOj9cXHMrKFxcZCspLyxcbiAgc2FuUmVnRXhwOiAvKD86Q09SfENvcmR1cmEpOj9cXHMrKFxcZCspLyxcbiAgaHBSZWdFeHA6IC8oPzpQVnxQdW50b3MgZGUgdmlkYXxQXFwuID9WXFwuKTo/XFxzKyhcXGQrKS8sXG4gIG1wUmVnRXhwOiAvKD86UE18UHVudG9zIE3DoWdpY29zfFB1bnRvcyBkZSBNYWdpYSk6P1xccysoXFxkKykvLFxuICBkYlJlZ0V4cDogLyg/OkJEKTo/XFxzKyhbKy1dP1xcZCsoPzpkXFxkK3xEXFxkKyk/KS9pLFxuICBhdHRhY2tzUmVnRXhwOiAvKD86Q29tYmF0ZXxBcm1hcyk6P1xccysoLiopXFwuW1xcbnxcXHJdPyQvaW1zLFxuICBidWlsZFJlZ0V4cDogLyg/OkNvcnB1bGVuY2lhKTo/XFxzKyhbKy1dP1xcZCspL2ksXG4gIGFybW9yUmVnRXhwOiAvKD86QXJtYWR1cmEpOj9cXHMrKG5pbmd1bmF8XFxkKykvaSxcbiAgbW92ZVJlZ0V4cDogLyg/Ok1vdmltaWVudG8pOj9cXHMrKFxcZCspL2ksXG4gIGx1Y2tSZWdFeHA6IC8oPzpTdWVydGUpOj9cXHMrKFxcZCspL2ksXG4gIHNwZWxsc1JlZ0V4cDogLyg/OkNvbmp1cm9zfEhlY2hpem9zKTo/XFxzKyguKilcXC5bXFxufFxccl0/JC9pbXMsXG4gIHNraWxsc1JlZ0V4cDogLyg/OkhhYmlsaWRhZGVzKTo/XFxzKyguKilcXC5bXFxufFxccl0/JC9pbXMsXG4gIGRvZGdlUmVnRXhwOiAvKD88bmFtZT5Fc3F1aXZhcik6P1xccytcXCg/KD88cGVyY2VudGFnZT5cXGQrKVxcKT9cXHMqJS9pLFxuICBsYW5ndWFnZXNSZWdFeHA6IC8oPzpJZGlvbWFzfExlbmd1YWplc3xMZW5ndWFzKTo/XFxzKyguKilcXC5bXFxufFxccl0/JC9pbXMsXG4gIHNraWxsUmVnRXhwOiBuZXcgUmVnRXhwKFxuICAgICcoPzxza2lsbD5bXFxcXHdcXFxcc1xcXFwoXFxcXCkuXFxcXC8nICtcbiAgICAgIGFjY2VudGVkQ2hhcmFjdGVycyArXG4gICAgICAnXSspICg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUnXG4gICksXG4gIGF0dGFja3NQZXJSb3VuZFJlZ0V4cDogLyg/Ok7Dum1lcm8gZGUgQXRhcXVlcyk6P1xccysobmluZ3Vub3xcXGQrKS9pLFxuICBzYW5Mb3NzUmVnRXhwOiAvKD86UMOpcmRpZGEgZGUgY29yZHVyYXxQw6lyZGlkYSBkZSBDT1IpOj9cXHMrKG5vfFxcZFtkRF0/WytcXGRdKlxcL1xcZFtkRF1bK1xcZF0rKS9pLFxuICB3ZWFwb25SZWdFeHA6IG5ldyBSZWdFeHAoXG4gICAgJ14oPzx3ZWFwb24+W1xcXFx3XFxcXHNcXFxcblxcXFwoXFxcXCkuXFxcXC8nICtcbiAgICAgIGFjY2VudGVkQ2hhcmFjdGVycyArXG4gICAgICAnXSspOj9bXFxcXG5cXFxcclxcXFxzXSsoPzxwZXJjZW50YWdlPlxcXFxkKyklLD9cXFxccyooPzpcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpP1xcXFxzKiw/XFxcXHMqKD86ZGHDsW8pXFxcXHMrKD88ZGFtYWdlPltcXFxcZCtcXFxcK2REXFxcXC0gXStcXFxccyooQkR8YmR8Ym9uaWZpY2FjacOzbiBkZSBkYcOxbyk/KScsXG4gICAgJ2ltZydcbiAgKSxcbiAgc3RvcFdvcmRzOlxuICAgICcoQ29uanVyb3N8SGFiaWxpZGFkZXN8UMOpcmRpZGEgZGUgY29yZHVyYXxJZGlvbWFzfExlbmd1YWplc3xMZW5ndWFzfEFybWFkdXJhfENvbWJhdGV8QXJtYXMpJyxcbiAgLy8gV2VhcG9ucyByZWd1bGFyIGV4cHJlc3Npb25zLFxuICBoYW5kZ3VuUmVnRXhwOiAvKFJldm9sdmVyfFBpc3RvbGF8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCAuMzgpL2ksXG4gIHJpZmxlUmVnRXhwOiAvKFJpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYSkvaSxcbiAgc21iUmVnRXhwOiAvKFN1YmZ1c2lsfFRob21wc29uKS9pLFxuICBtYWNoaW5lR3VuUmVnRXhwOiAvKEJyb3duaW5nfFZpY2tlcnN8QW1ldHJhbGxhZG9yYSkvaSxcbiAgbGF1bmNoZWRXZWFwb25zOiAvKE1vbG90b3Z8fEdyYW5hZGF8RGluYW1pdGEpL2lcbn1cblxuLyoqXG4gKiBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCBpcyBhIGNsYXNzIHRvIGdldCB0aGUgc2V0IG9mIHJlZ3VsYXIgZXhwcmVzc2lvbnMgY29ycmVzcG9uZGluZyBvbiBhIGxhbmd1YWdlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB7XG4gIHN0YXRpYyBnZXQgb3B0aW9uTGFuZ1JlZ0V4cCAoKSB7XG4gICAgcmV0dXJuIC9jb2MtKD88bGFuZ2NvZGU+XFx3XFx3KS9cbiAgfVxuXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLlJFID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0UmVndWxhckV4cHJlc3Npb25zKGdhbWUuaTE4bi5sYW5nKVxuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ3VsYXJFeHByZXNzaW9ucyByZXR1cm5zIHRoZSBvYmplY3Qgd2l0aCB0aGUgcmVndWxhciBleHByZXNzaW9ucyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBsYW5ndWFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZyBsYW5ndWFnZSBjb2RlIGZvciB0aGUgcmVndWxhciBleHByZXNzaW9ucyAoXCJlblwiLCBcImVzXCIsIFwiZnJcIiwuLi4pXG4gICAqIEByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBzZXQgb2YgcmVndWxhciBleHByZXNzaW9uc1xuICAgKi9cbiAgc3RhdGljIGdldFJlZ3VsYXJFeHByZXNzaW9ucyAobGFuZykge1xuICAgIGNvbnNvbGUuZGVidWcoJ1NldCBSZWdFeHAgTGFuZzogJywgbGFuZylcbiAgICBzd2l0Y2ggKGxhbmcpIHtcbiAgICAgIGNhc2UgJ2VzJzpcbiAgICAgICAgcmV0dXJuIHNwYW5pc2hSZWdFeHBcbiAgICAgIGNhc2UgJ2ZyJzpcbiAgICAgICAgcmV0dXJuIGZyZW5jaFJlZ0V4cFxuICAgIH1cbiAgICAvLyBCeSBkZWZhdWx0IHVzZSBlbmdsaXNoIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG4gICAgcmV0dXJuIGVuZ2xpc2hSZWdFeHBcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBGb2xkZXIsIGdhbWUsIHVpICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuXG4vLyBEZWZhdWx0IHZhbHVlc1xuXG4vKipcbiAqIGRlZmF1bHRXZWFwb25Ta2lsbEFkanVzdG1lbnRzIGlzIGFuIG9iamVjdCB3aXRoIGRlZmF1bHQgdmFsdWVzIHRvIHVzZSB3aGVuIGNyZWF0aW5nIGEgd2VhcG9uIHNraWxsXG4gKi9cbmNvbnN0IGRlZmF1bHRXZWFwb25Ta2lsbEFkanVzdG1lbnRzID0ge1xuICBwZXJzb25hbDogbnVsbCxcbiAgb2NjdXBhdGlvbjogbnVsbCxcbiAgYXJjaGV0eXBlOiBudWxsLFxuICBleHBlcmllbmNlOiBudWxsXG59XG4vKipcbiAqIENvQzdBY3RvckltcG9ydGVyIGhlbHBlciBjbGFzcyB0byBpbXBvcnQgYW4gQWN0b3IgZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlciB7XG4gIC8vIENvQzdBY3RvckltcG9ydGVyUmdFeHAgY29udGFpbnMgbG9jYWxpemVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgdG8gZXh0cmFjdCBkYXRhIGZyb20gcmF3IHRleHRcblxuICBzdGF0aWMgZ2V0IFJFICgpIHtcbiAgICByZXR1cm4gbmV3IENvQzdBY3RvckltcG9ydGVyUmVnRXhwKCkuUkVcbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJzZUNoYXJhY3RlciBleHRyYWN0cyBpbmZvcm1hdGlvbiBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbiBvZiBhbiBlbnRpdHkgKE5QQyBvciBDcmVhdHVyZSlcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBlbnRpdHlcbiAgICogQHJldHVybnMgZXh0cmFjdGVkRGF0YSBvYmplY3Qgd2l0aCB0aGUgZW50aXR5IGRhdGFcbiAgICovXG4gIGFzeW5jIHBhcnNlQ2hhcmFjdGVyICh0ZXh0KSB7XG4gICAgY29uc3QgZXh0cmFjdGVkRGF0YSA9IHt9XG4gICAgZXh0cmFjdGVkRGF0YS5uYW1lID0gdGhpcy5wcm9jZXNzTmFtZSh0ZXh0KVxuICAgIGV4dHJhY3RlZERhdGEuYWdlID0gdGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5hZ2VSZWdFeHApXG4gICAgY29uc29sZS5kZWJ1ZygnYWdlJywgZXh0cmFjdGVkRGF0YS5hZ2UpXG4gICAgZXh0cmFjdGVkRGF0YS5zdHIgPSBOdW1iZXIodGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5zdHJSZWdFeHApKVxuICAgIGV4dHJhY3RlZERhdGEuY29uID0gTnVtYmVyKHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUuY29uUmVnRXhwKSlcbiAgICBleHRyYWN0ZWREYXRhLnNpeiA9IE51bWJlcih0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLnNpelJlZ0V4cCkpXG4gICAgZXh0cmFjdGVkRGF0YS5pbnQgPSBOdW1iZXIodGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5pbnRSZWdFeHApKVxuICAgIGV4dHJhY3RlZERhdGEucG93ID0gTnVtYmVyKHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUucG93UmVnRXhwKSlcbiAgICBleHRyYWN0ZWREYXRhLmRleCA9IE51bWJlcih0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLmRleFJlZ0V4cCkpXG4gICAgZXh0cmFjdGVkRGF0YS5hcHAgPSBOdW1iZXIodGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5hcHBSZWdFeHApKVxuICAgIGV4dHJhY3RlZERhdGEuZWR1ID0gTnVtYmVyKHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUuZWR1UmVnRXhwKSlcbiAgICBleHRyYWN0ZWREYXRhLnNhbiA9IE51bWJlcih0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLnNhblJlZ0V4cCkpXG4gICAgZXh0cmFjdGVkRGF0YS5ocCA9IE51bWJlcih0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLmhwUmVnRXhwKSlcbiAgICBleHRyYWN0ZWREYXRhLm1wID0gTnVtYmVyKHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUubXBSZWdFeHApKVxuICAgIGV4dHJhY3RlZERhdGEuZGIgPSB0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLmRiUmVnRXhwKVxuICAgIGV4dHJhY3RlZERhdGEuYnVpbGQgPSB0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLmJ1aWxkUmVnRXhwKVxuICAgIGV4dHJhY3RlZERhdGEuYXJtb3IgPSB0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLmFybW9yUmVnRXhwKVxuICAgIGNvbnNvbGUuZGVidWcoJ2FybW9yJywgZXh0cmFjdGVkRGF0YS5hcm1vcilcbiAgICBleHRyYWN0ZWREYXRhLm1vdiA9IE51bWJlcih0aGlzLmV4dHJhY3RWYWx1ZSh0ZXh0LCB0aGlzLlJFLm1vdmVSZWdFeHApKVxuICAgIGV4dHJhY3RlZERhdGEubGNrID0gTnVtYmVyKHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUubHVja1JlZ0V4cCkpXG4gICAgZXh0cmFjdGVkRGF0YS5zYW5Mb3NzID0gdGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5zYW5Mb3NzUmVnRXhwKVxuICAgIGV4dHJhY3RlZERhdGEuYXR0YWNrc1BlclJvdW5kID0gdGhpcy5leHRyYWN0VmFsdWUoXG4gICAgICB0ZXh0LFxuICAgICAgdGhpcy5SRS5hdHRhY2tzUGVyUm91bmRSZWdFeHBcbiAgICApXG5cbiAgICBjb25zdCBhdHRhY2tzID0gdGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5hdHRhY2tzUmVnRXhwKVxuICAgIGNvbnNvbGUuZGVidWcoYXR0YWNrcylcbiAgICBleHRyYWN0ZWREYXRhLmF0dGFja3MgPSBhd2FpdCB0aGlzLnByb2Nlc3NBdHRhY2tzKGF0dGFja3MpXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5zcGVsbHNSZWdFeHApXG4gICAgY29uc29sZS5kZWJ1ZyhzcGVsbHMpXG4gICAgZXh0cmFjdGVkRGF0YS5zcGVsbHMgPSBhd2FpdCB0aGlzLnByb2Nlc3NTcGVsbHMoc3BlbGxzKVxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZXh0cmFjdFZhbHVlKHRleHQsIHRoaXMuUkUuc2tpbGxzUmVnRXhwKVxuICAgIGNvbnNvbGUuZGVidWcoc2tpbGxzKVxuICAgIGV4dHJhY3RlZERhdGEuc2tpbGxzID0gYXdhaXQgdGhpcy5wcm9jZXNzU2tpbGxzKHNraWxscylcbiAgICBjb25zdCBkb2RnZSA9IHRoaXMuUkUuZG9kZ2VSZWdFeHAuZXhlYyh0ZXh0KVxuICAgIGlmIChkb2RnZSAhPT0gbnVsbCkge1xuICAgICAgZXh0cmFjdGVkRGF0YS5za2lsbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IHRoaXMuY2xlYW5TdHJpbmcoZG9kZ2UuZ3JvdXBzLm5hbWUpLFxuICAgICAgICB2YWx1ZTogTnVtYmVyKGRvZGdlLmdyb3Vwcy5wZXJjZW50YWdlKVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgbGFuZ3VhZ2VzID0gdGhpcy5leHRyYWN0VmFsdWUodGV4dCwgdGhpcy5SRS5sYW5ndWFnZXNSZWdFeHApXG4gICAgY29uc29sZS5kZWJ1ZyhsYW5ndWFnZXMpXG4gICAgZXh0cmFjdGVkRGF0YS5sYW5ndWFnZXMgPSBhd2FpdCB0aGlzLnByb2Nlc3NTa2lsbHMobGFuZ3VhZ2VzKVxuXG4gICAgcmV0dXJuIGV4dHJhY3RlZERhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzTmFtZSBleHRyYWN0cyB0aGUgQ2hhcmFjdGVyIG5hbWUgZnJvbSB0aGUgZmlyc3QgbGluZSBvZiB0aGUgYHRleHRgXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHJhdyBjaGFyYWN0ZXIgbmFtZSB0ZXh0XG4gICAqIEByZXR1cm5zIHRoZSBjaGFyYWN0ZXIgbmFtZSBvciAnSW1wb3J0ZWQgdW5uYW1lZCBjaGFyYWN0ZXInIGlmIHRoZSBuYW1lIHdhcyBub3QgZm91bmRcbiAgICovXG4gIHByb2Nlc3NOYW1lICh0ZXh0KSB7XG4gICAgY29uc3QgbmFtZUZvdW5kID0gdGhpcy5SRS5uYW1lUmVnRXhwLmV4ZWModGV4dClcbiAgICBpZiAobmFtZUZvdW5kICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmFtZUZvdW5kLmdyb3Vwcy5uYW1lXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NPQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzQXR0YWNrcyBleHRyYWN0IHRoZSBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIHRoZSBhdHRhY2tzIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHdlYXBvbnMgYmFzaWMgZGF0YVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYXR0YWNrcyByYXcgdGV4dCBmb3IgdGhlIEF0dGFja3MgZGF0YVxuICAgKiBAcmV0dXJucyBhcnJheSBvZiB3ZWFwb24gZGF0YS5cbiAgICovXG4gIHByb2Nlc3NBdHRhY2tzIChhdHRhY2tzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdXG4gICAgaWYgKGF0dGFja3MgIT0gbnVsbCkge1xuICAgICAgbGV0IHdlYXBvbiA9IHRoaXMuUkUud2VhcG9uUmVnRXhwLmV4ZWMoYXR0YWNrcylcbiAgICAgIHdoaWxlICh3ZWFwb24gIT09IG51bGwpIHtcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBndWVzcyBzb21lIG9mIHRoZSB3ZWFwb24gcHJvcGVydGllc1xuICAgICAgICBjb25zdCBjbGVhbldlYXBvbiA9IHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmdyb3Vwcy53ZWFwb24pXG4gICAgICAgIGNvbnN0IGRvZXNEYW1hZ2VCb251cyA9IHRoaXMuUkUuZGJSZWdFeHAudGVzdCh3ZWFwb24uZ3JvdXBzLmRhbWFnZSlcbiAgICAgICAgY29uc3QgaXNSYW5nZWQgPVxuICAgICAgICAgIHRoaXMuUkUuaGFuZGd1blJlZ0V4cC50ZXN0KGNsZWFuV2VhcG9uKSB8fFxuICAgICAgICAgIHRoaXMuUkUucmlmbGVSZWdFeHAudGVzdChjbGVhbldlYXBvbikgfHxcbiAgICAgICAgICB0aGlzLlJFLnNtYlJlZ0V4cC50ZXN0KGNsZWFuV2VhcG9uKSB8fFxuICAgICAgICAgIHRoaXMuUkUubWFjaGluZUd1blJlZ0V4cC50ZXN0KGNsZWFuV2VhcG9uKVxuICAgICAgICAvLyBCYXNpYyB3ZWFwb24gZGF0YVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIG5hbWU6IGNsZWFuV2VhcG9uLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IE51bWJlcih3ZWFwb24uZ3JvdXBzLnBlcmNlbnRhZ2UpLFxuICAgICAgICAgICAgICAgIGRhbWFnZTogd2VhcG9uLmdyb3Vwcy5kYW1hZ2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllc1trZXldID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWRcbiAgICAgICAgZGF0YS5kYXRhLnByb3BlcnRpZXMubWVsZWUgPSBkb2VzRGFtYWdlQm9udXMgLy8gaWYgYSB3ZWFwb24gZG9lc0RhbWFnZUJvbnVzIHVzdWFsbHkgbWVhbnMgaXQncyBhIG1lbGVlIHdlYXBvblxuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5hZGRiID0gZG9lc0RhbWFnZUJvbnVzXG4gICAgICAgIHJlc3VsdHMucHVzaChkYXRhKVxuICAgICAgICB3ZWFwb24gPSB0aGlzLlJFLndlYXBvblJlZ0V4cC5leGVjKGF0dGFja3MpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUuZGVidWcoJ2F0dGFja3MnLCByZXN1bHRzKVxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc1NwZWxscyBjb252ZXJ0cyB0aGUgcmF3IHRleHQgd2l0aCB0aGUgc3BlbGxzIHRvIGFuIGBBcnJheWAgb2YgYFN0cmluZ2Agd2l0aCB0aGUgc3BlbGxzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzcGVsbHMgcmF3IHRleHQgb2YgdGhlIHNwZWxsc1xuICAgKiBAcmV0dXJucyB7QXJyYXlbU3RyaW5nXX0gb2Ygc3BlbGxzXG4gICAqL1xuICBwcm9jZXNzU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW11cbiAgICBpZiAoc3BlbGxzICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBzcGVsbHNBcnIgPSBzcGVsbHMucmVwbGFjZSgvKFxcbnxcXHIpL2csICcgJykuc3BsaXQoJywnKVxuICAgICAgc3BlbGxzQXJyLmZvckVhY2gocyA9PiB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHMpKVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc29sZS5kZWJ1Zygnc3BlbGxzJywgcmVzdWx0cylcbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG5cbiAgLyoqXG4gICAqIGJhc2ljV2VhcG9uRGF0YSBjcmVhdGVzIGEgYmFzaWMgb2JqZWN0IHdpdGggdGhlIGRlZmF1bHQgYmFzaWMgZGF0YSBmb3IgYSB3ZWFwb24gc2tpbGxcbiAgICogQHBhcmFtIHtib29sZWFufSBmaXJlYXJtcyB0cnVlIGlmIHRoZSB3ZWFwb24gdXNlcyBmaXJlYXJtcywgZmFsc2UgaWYgaXQncyBhIG1lbGVlIG9uZS5cbiAgICogQHJldHVybnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSB3ZWFwb25cbiAgICovXG4gIGJhc2ljV2VhcG9uU2tpbGxEYXRhIChmaXJlYXJtcykge1xuICAgIHJldHVybiB7XG4gICAgICBzcGVjaWFsaXphdGlvbjogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKSxcbiAgICAgIGFkanVzdG1lbnRzOiBkZWZhdWx0V2VhcG9uU2tpbGxBZGp1c3RtZW50cyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgZmlnaHRpbmc6ICFmaXJlYXJtcyxcbiAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3Qgc2tpbGwgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgb2YgdGhlIHNraWxscyBzZWN0aW9uIG9mIGFuIGVudGl0eSAoTlBDIG9yIENyZWF0dXJlKVxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2tpbGxzIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgdG8gYmUgcHJvY2Vzc2VkXG4gICAqIEByZXR1cm5zIGFycmF5IG9mIHNraWxscyB3aXRoIHRoZSBgbmFtZWAgb2YgdGhlIHNraWxsIGFuZCB0aGUgYHZhbHVlYCAocGVyY2VudGFnZSlcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHNraWxscykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXVxuICAgIGNvbnNvbGUuZGVidWcoJ3NraWxscyBzdHJpbmcnLCBza2lsbHMpXG4gICAgaWYgKHNraWxscyAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgc2tpbGxzQXJyID0gc2tpbGxzLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpLnNwbGl0KCcsJylcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3NraWxsc0FycicsIHNraWxsc0FycilcbiAgICAgIHNraWxsc0Fyci5mb3JFYWNoKHNraWxsID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkU2tpbGwgPSB0aGlzLlJFLnNraWxsUmVnRXhwLmV4ZWMoc2tpbGwpXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3BhcnNlZFNraWxsJywgcGFyc2VkU2tpbGwpXG4gICAgICAgIGlmIChwYXJzZWRTa2lsbCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IHNraWxsTmFtZSA9IHRoaXMuY2xlYW5TdHJpbmcocGFyc2VkU2tpbGwuZ3JvdXBzLnNraWxsKVxuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBhcnNlZFNraWxsLmdyb3Vwcy5wZXJjZW50YWdlKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnNvbGUuZGVidWcoJ3NraWxscycsIHJlc3VsdHMpXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBleHRyYWN0VmFsdWUgZXhwZWN0cyB0byByZWNlaXZlIGEgcmVndWxhciBleHByZXNzaW9uIGByZWAgdGhhdFxuICAgKiBpbmNsdWRlcyBvbmUgcGFyZW50aGVzaXMgZ3JvdXAsIGFuZCByZXR1cm5zIHRoZSB2YWx1ZSBtYXRjaGluZyB0aGUgZmlyc3RcbiAgICogcGFyZW50aGVzaXMgZ3JvdXAgb3IgYG51bGxgXG4gICAqL1xuICBleHRyYWN0VmFsdWUgKHRleHQsIHJlKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IHJlLmV4ZWModGV4dClcbiAgICBpZiAocmVzdWx0cyAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlc3VsdHNbMV1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBjbGVhblN0cmluZywgcmVtb3ZlcyBuZXcgbGluZSBhbmQgY2FycmllciByZXR1cm4gY2hhcmFjdGVyIGFuZCBsYXRlcmFsIHNwYWNlcyBmcm9tIGEgc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdGluZyB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgY2xlYW5lZCBzdHJpbmdcbiAgICovXG4gIGNsZWFuU3RyaW5nIChzKSB7XG4gICAgcmV0dXJuIHNcbiAgICAgIC5yZXBsYWNlKC8oXFxufFxccikvZywgJyAnKVxuICAgICAgLnJlcGxhY2UoL15cXHMqLywgJycpXG4gICAgICAucmVwbGFjZSgvXFxzKlxcLj9cXHMqJC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIGVudGl0eSB0eXBlIHRvIHVzZSAoYG5wY2Agb3IgYGNyZWF0dXJlYCkgZGVwZW5kaW5nIG9uIHRoZSB1c2VyIHNlbGVjdGlvbiBvbiB0aGUgZGlhbG9nXG4gICAqIGhlbHBzIHRvIHZhbGlkYXRlIC8gY2xlYW4gdGhlIGlucHV0LCBpbiBjYXNlIG9mIGFuIHVua25vd24gZW50aXR5IHR5cGUgc2hvd3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIGBucGNgXG4gICAqIGFzIGEgZGVmYXVsdCB2YWx1ZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IGVudGl0eVR5cGVTdHJpbmcgc3RyaW5nIHdpdGggdGhlIGVudGl0eSB0eXBlIGFzIHNlbGVjdGVkIGJ5IHRoZSB1c2Vyc1xuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBgbnBjYCBvciBgY3JlYXR1cmVgXG4gICAqL1xuICBlbnRpdHlUeXBlIChlbnRpdHlUeXBlU3RyaW5nKSB7XG4gICAgc3dpdGNoIChlbnRpdHlUeXBlU3RyaW5nKSB7XG4gICAgICBjYXNlICdjb2MtbnBjJzpcbiAgICAgICAgcmV0dXJuICducGMnXG4gICAgICBjYXNlICdjb2MtY3JlYXR1cmUnOlxuICAgICAgICByZXR1cm4gJ2NyZWF0dXJlJ1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oJ2VudGl0eSB0eXBlOiAnLCBlbnRpdHlUeXBlU3RyaW5nKVxuICAgIHJldHVybiAnbnBjJ1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBlbnRpdHkgKGBucGNgb3IgYGNyZWF0dXJlYCkgZnJvbSB0aGUgb2JqZWN0IHdpdGggdGhlIGFscmVhZHkgcGFyc2VkIGVudGl0eSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0LCB3aWxsIGJlIHNhbml0aXplZCBieSBjYWxsaW5nIGBlbnRpdHlUeXBlYFxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBjcmVhdGVkIGZvdW5kcnkgYEFjdG9yYFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW50aXR5IChwYywgZW50aXR5VHlwZVN0cmluZykge1xuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGF3YWl0IHRoaXMuY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzKClcblxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZSh7XG4gICAgICBuYW1lOiBwYy5uYW1lLFxuICAgICAgdHlwZTogdGhpcy5lbnRpdHlUeXBlKGVudGl0eVR5cGVTdHJpbmcpLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBkYXRhOiB7fVxuICAgIH0pXG4gICAgLy8gZGVidWdnZXJcbiAgICAvLyBBZGQgdGhlIHNraWxsc1xuICAgIGF3YWl0IHRoaXMuYWRkVGhlU2tpbGxzKHBjLCBucGMpXG4gICAgLy8gQWRkIHRoZSBsYW5ndWFnZXNcbiAgICBhd2FpdCB0aGlzLmFkZFRoZUxhbmd1YWdlcyhwYywgbnBjKVxuICAgIC8vIEFkZCB0aGUgc3BlbGxzXG4gICAgYXdhaXQgdGhpcy5hZGRUaGVTcGVsbHMocGMsIG5wYylcbiAgICAvLyBIYW5kbGUgdGhlIGF0dGFja3NcbiAgICBhd2FpdCB0aGlzLmhhbmRsZVRoZUF0dGFja3MocGMsIG5wYylcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUFjdG9yRGF0YShwYywgbnBjKVxuXG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmb2xkZXIgb24gdGhlIGFjdG9ycyB0YWIgY2FsbGVkIFwiSW1wb3J0ZWQgQ2hhcmFjdGVyc1wiIGlmIHRoZSBmb2xkZXIgZG9lc24ndCBleGlzdC5cbiAgICogQHJldHVybnMge0ZvbGRlcn0gdGhlIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlclxuICAgKi9cbiAgYXN5bmMgY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzICgpIHtcbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXG4gICAgICBlbnRyeSA9PlxuICAgICAgICBlbnRyeS5kYXRhLm5hbWUgPT09ICdJbXBvcnRlZCBjaGFyYWN0ZXJzJyAmJiBlbnRyeS5kYXRhLnR5cGUgPT09ICdBY3RvcidcbiAgICApXG4gICAgaWYgKFxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID09PSBudWxsIHx8XG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBmb2xkZXJcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGF3YWl0IEZvbGRlci5jcmVhdGUoe1xuICAgICAgICBuYW1lOiAnSW1wb3J0ZWQgY2hhcmFjdGVycycsXG4gICAgICAgIHR5cGU6ICdBY3RvcicsXG4gICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgfSlcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDT0M3LkNyZWF0ZWRJbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gIH1cblxuICBhc3luYyB1cGRhdGVBY3RvckRhdGEgKHBjLCBucGMpIHtcbiAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XG4gICAgO1snc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdSddLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIHVwZGF0ZURhdGFbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTnVtYmVyKHBjW2tleV0pXG4gICAgfSlcbiAgICBhd2FpdCBucGMudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgYXdhaXQgbnBjLnNldEx1Y2soTnVtYmVyKHBjLmxjaykpXG4gICAgYXdhaXQgbnBjLnNldEhwKE51bWJlcihwYy5ocCkpXG4gICAgYXdhaXQgbnBjLnNldE1wKE51bWJlcihwYy5tcCkpXG5cbiAgICB1cGRhdGVEYXRhID0ge31cbiAgICA7WydzYW4nLCAnbW92JywgJ2RiJywgJ2J1aWxkJywgJ2FybW9yJ10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgdXBkYXRlRGF0YVtgZGF0YS5hdHRyaWJzLiR7a2V5fS52YWx1ZWBdID0gTnVtYmVyKHBjW2tleV0pXG4gICAgfSlcbiAgICBpZiAocGMuYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhWydkYXRhLmluZm9zLmFnZSddID0gcGMuYWdlXG4gICAgfVxuICAgIGlmIChwYy5zYW5Mb3NzICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBbcGFzc2VkLCBmYWlsZWRdID0gcGMuc2FuTG9zcy5zcGxpdCgnLycpXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCddID0gcGFzc2VkXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWQnXSA9IGZhaWxlZFxuICAgIH1cbiAgICBpZiAocGMuYXR0YWNrc1BlclJvdW5kICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhWydkYXRhLnNwZWNpYWwuYXR0YWNrc1BlclJvdW5kJ10gPSBOdW1iZXIocGMuYXR0YWNrc1BlclJvdW5kKVxuICAgIH1cbiAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVEYXRhOicsIHVwZGF0ZURhdGEpXG4gICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVGhlQXR0YWNrcyAocGMsIG5wYykge1xuICAgIGlmIChwYy5hdHRhY2tzICE9PSBudWxsKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBjLmF0dGFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXR0YWNrID0gcGMuYXR0YWNrc1tpXVxuICAgICAgICBjb25zb2xlLmRlYnVnKCdhdHRhY2snLCBhdHRhY2spXG4gICAgICAgIGNvbnN0IG1haW5BdHRhY2tTa2lsbCA9IGF3YWl0IHRoaXMubWFpbkF0dGFja1NraWxsKGF0dGFjaylcbiAgICAgICAgYXdhaXQgbnBjXG4gICAgICAgICAgLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW21haW5BdHRhY2tTa2lsbF0pXG4gICAgICAgICAgLnRoZW4oYXN5bmMgbmV3U2tpbGxzID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnN0IG5ld1NraWxsID0gbmV3U2tpbGxzWzBdLmNsb25lKClcbiAgICAgICAgICAgIC8vIG5ld1NraWxsLmRhdGEuZGF0YS52YWx1ZSA9IGF0dGFjay5kYXRhLnJhbmdlLm5vcm1hbC52YWx1ZVxuICAgICAgICAgICAgYXdhaXQgbnBjXG4gICAgICAgICAgICAgIC5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFthdHRhY2tdKVxuICAgICAgICAgICAgICAudGhlbihhc3luYyBjcmVhdGVkQXR0YWNrcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShjcmVhdGVkQXR0YWNrcykgJiZcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdHRhY2tzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkobmV3U2tpbGxzKSAmJlxuICAgICAgICAgICAgICAgICAgbmV3U2tpbGxzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWRBdHRhY2sgPSBhd2FpdCB0aGlzLnNldE1haW5BdHRhY2tTa2lsbChcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0dGFja3NbMF0sXG4gICAgICAgICAgICAgICAgICAgIG5ld1NraWxsc1swXVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEF0dGFjaycsIGNyZWF0ZWRBdHRhY2spXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWFpbkF0dGFja1NraWxsIChhdHRhY2spIHtcbiAgICBjb25zdCBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrLm5hbWUpXG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3NraWxsJywgc2tpbGwpXG4gICAgICBjb25zdCBza2lsbENsb25lID0gc2tpbGwuY2xvbmUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdmFsdWU6IGF0dGFjay5kYXRhLnJhbmdlLm5vcm1hbC52YWx1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY29uc29sZS5kZWJ1Zygnc2tpbGxDbG9uZScsIHNraWxsQ2xvbmUpXG4gICAgICByZXR1cm4gc2tpbGxDbG9uZVxuICAgIH1cbiAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7YXR0YWNrLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgXG4gICAgKVxuICAgIGNvbnN0IG5ld1NraWxsID0ge1xuICAgICAgbmFtZTogYXR0YWNrLm5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgZGF0YTogdGhpcy5iYXNpY1dlYXBvblNraWxsRGF0YShmYWxzZSlcbiAgICB9XG4gICAgbmV3U2tpbGwuZGF0YS5iYXNlID0gYXR0YWNrLmRhdGE/LnJhbmdlPy5ub3JtYWw/LnZhbHVlXG4gICAgbmV3U2tpbGwuZGF0YS52YWx1ZSA9IGF0dGFjay5kYXRhPy5yYW5nZT8ubm9ybWFsPy52YWx1ZVxuICAgIGNvbnNvbGUuZGVidWcoJ25ld1NraWxsJywgbmV3U2tpbGwpXG4gICAgcmV0dXJuIG5ld1NraWxsXG4gIH1cblxuICAvKipcbiAgICogc2V0TWFpbldlYXBvblNraWxsIHNldHMgdGhlIG1haW4gc2tpbGwgZm9yIGEgd2VhcG9uXG4gICAqIEBwYXJhbSB7Q29DN0l0ZW19IHdlYXBvblxuICAgKiBAcGFyYW0ge0NvQzdJdGVtfSBza2lsbFxuICAgKi9cbiAgYXN5bmMgc2V0TWFpbkF0dGFja1NraWxsICh3ZWFwb24sIHNraWxsKSB7XG4gICAgcmV0dXJuIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgJ2RhdGEuc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgJ2RhdGEuc2tpbGwubWFpbi5uYW1lJzogc2tpbGwubmFtZSxcbiAgICAgICdkYXRhLnByb3BlcnRpZXMnOiBza2lsbC5kYXRhLnByb3BlcnRpZXMsXG4gICAgICAnZGF0YS5hZGp1c3RtZW50cyc6IHNraWxsLmRhdGEuYWRqdXN0bWVudHMsXG4gICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVGhlU3BlbGxzIChwYywgbnBjKSB7XG4gICAgaWYgKHBjLnNwZWxscyAhPT0gbnVsbCkge1xuICAgICAgcGMuc3BlbGxzLmZvckVhY2goYXN5bmMgc3BlbGwgPT4ge1xuICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgbnBjLmFkZEl0ZW1zKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBzcGVsbCxcbiAgICAgICAgICAgIHR5cGU6ICdzcGVsbCdcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICAgIGNvbnNvbGUuZGVidWcoY3JlYXRlZClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWRkVGhlTGFuZ3VhZ2VzIChwYywgbnBjKSB7XG4gICAgaWYgKHBjLmxhbmd1YWdlcyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBsYW5nIG9mIHBjLmxhbmd1YWdlcykge1xuICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgbnBjLmNyZWF0ZVNraWxsKGxhbmcubmFtZSwgbGFuZy52YWx1ZSlcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhjcmVhdGVkKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFkZFRoZVNraWxscyAocGMsIG5wYykge1xuICAgIGlmIChwYy5za2lsbHMgIT09IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaSA9PiBpLmRhdGEudHlwZSA9PT0gJ3NraWxsJyAmJiBpLmRhdGEubmFtZSA9PT0gc2tpbGwubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChleGlzdGluZ1NraWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWRTa2lsbCA9IGV4aXN0aW5nU2tpbGwudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZFNraWxsLmRhdGEuYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgYXdhaXQgbnBjXG4gICAgICAgICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbY2xvbmVkU2tpbGxdKVxuICAgICAgICAgICAgLnRoZW4oY3JlYXRlZCA9PiBjb25zb2xlLmRlYnVnKGNyZWF0ZWQpKVxuICAgICAgICAgIC8vIGNyZWF0ZWQuZGF0YS52YWx1ZSA9IHNraWxsLnZhbHVlICYmIGNvbnNvbGUuZGVidWcoY3JlYXRlZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgbnBjXG4gICAgICAgICAgICAuY3JlYXRlU2tpbGwoc2tpbGwubmFtZSwgc2tpbGwudmFsdWUpXG4gICAgICAgICAgICAudGhlbihjcmVhdGVkID0+IGNvbnNvbGUuZGVidWcoY3JlYXRlZCkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogd2VhcG9uU2tpbGwgdHJpZXMgb3QgZ3Vlc3Mgd2hhdCBraW5kIG9mIHdlYXBvbiBza2lsbCB0byB1c2UgZm9yIHdlYXBvbiBmcm9tIGl0J3MgbmFtZVxuICAgKiBAcGFyYW0gd2VhcG9uTmFtZTogU3RyaW5nLCB0aGUgd2VhcG9uIG5hbWVcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb25OYW1lKSB7XG4gICAgbGV0IHNraWxsID0gbnVsbFxuICAgIGlmICh0aGlzLlJFLmhhbmRndW5SZWdFeHAuZXhlYyh3ZWFwb25OYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgIGkgPT4gaS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgaS5kYXRhLm5hbWUgPT09ICdIYW5kZ3VuJ1xuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb25OYW1lfSB1c2VzIEhhbmRndW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICB9IGVsc2UgaWYgKHRoaXMuUkUucmlmbGVSZWdFeHAuZXhlYyh3ZWFwb25OYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgIGkgPT4gaS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgaS5kYXRhLm5hbWUgPT09ICdSaWZsZS9TaG90Z3VuJ1xuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb25OYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgfSBlbHNlIGlmICh0aGlzLlJFLnNtYlJlZ0V4cC5leGVjKHdlYXBvbk5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgaSA9PiBpLmRhdGEudHlwZSA9PT0gJ3NraWxsJyAmJiBpLmRhdGEubmFtZSA9PT0gJ1N1Ym1hY2hpbmUgR3VuJ1xuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb25OYW1lfSB1c2VzIFN1Ym1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgfSBlbHNlIGlmICh0aGlzLlJFLm1hY2hpbmVHdW5SZWdFeHAuZXhlYyh3ZWFwb25OYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgIGkgPT4gaS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgaS5kYXRhLm5hbWUgPT09ICdNYWNoaW5lIEd1bidcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uTmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgIH0gZWxzZSBpZiAodGhpcy5SRS5sYXVuY2hlZFdlYXBvbnMuZXhlYyh3ZWFwb25OYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgIGkgPT4gaS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgaS5kYXRhLm5hbWUgPT09ICdMYXVuY2gnXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbk5hbWV9IHVzZXMgTGF1bmNoIHNraWxsOiAke3NraWxsfWApXG4gICAgfVxuICAgIHJldHVybiBza2lsbFxuICB9XG5cbiAgLyoqXG4gICAqIG5lZWRzQ29udmVyc2lvbiBkb2VzIGFuIGV2YWx1YXRpb24gdG8gc2VlIGlmIHRoZSBnaXZlbiBucGMgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIDd0aCBFZGl0aW9uXG4gICAqIFJldHVybnMgYGZhbHNlYCB3aGVuIGFueSBvZiB0aGUgQ2hhcmFjdGVyaXN0aWNzIHZhbHVlIGl0J3MgYWJvdmUgMjlcbiAgICovXG4gIG5lZWRzQ29udmVyc2lvbiAobnBjKSB7XG4gICAgbGV0IG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IHRydWVcbiAgICA7WydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J10uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgcmV0dXJuIG5lZWRzQ29udmVyc2lvblJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZUFjdG9yIG1haW4gbWV0aG9kIHRvIGNyZWF0ZSBhbiBgQWN0b3JgIGZyb20gYSBnaXZlIHVzZXIgaW5wdXQsIHRha2VzIG9uIGFjY291bnQgdGhlIGxhbmcsIGVudGl0eSB0eXBlLFxuICAgKiB0aGUgY29udmVydCB0byA3IEVkaXRpb24gZmxhZywgYW5kIHRoZSByYXcgZW50aXR5IGRhdGEuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dHMgaW5wdXRzIGZyb20gdGhlIGZvcm0gdG8gY3JlYXRlIGFuIEFjdG9yXG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGZvdW5kcnkgYEFjdG9yYCBmcm9tIHRoZSBnaXZlbiBgaW5wdXRgIG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUFjdG9yIChpbnB1dHMpIHtcbiAgICBjb25zdCBsYW5nID1cbiAgICAgIHRoaXMuZXh0cmFjdFZhbHVlKFxuICAgICAgICBpbnB1dHMubGFuZyxcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAub3B0aW9uTGFuZ1JlZ0V4cFxuICAgICAgKSB8fCAnZW4nXG4gICAgdGhpcy5SRSA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFJlZ3VsYXJFeHByZXNzaW9ucyhsYW5nKVxuICAgIGxldCBjaGFyYWN0ZXIgPSBhd2FpdCB0aGlzLnBhcnNlQ2hhcmFjdGVyKGlucHV0cy50ZXh0KVxuICAgIGNvbnNvbGUuZGVidWcoY2hhcmFjdGVyKVxuICAgIGlmIChcbiAgICAgIChpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1ndWVzcycgJiZcbiAgICAgICAgdGhpcy5uZWVkc0NvbnZlcnNpb24oY2hhcmFjdGVyKSkgfHxcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWNvbnZlcnQnXG4gICAgKSB7XG4gICAgICBjaGFyYWN0ZXIgPSBhd2FpdCB0aGlzLmNvbnZlcnQ3RShjaGFyYWN0ZXIpXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGNoYXJhY3RlciwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGNvbnNvbGUuZGVidWcoJ0NvbnZlcnRpbmcgY3JlYXR1cmUnLCBjcmVhdHVyZSlcbiAgICA7WydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjcmVhdHVyZVtrZXldICo9IDVcbiAgICB9KVxuICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgIGNyZWF0dXJlLmVkdSAqPSA1XG4gICAgfSBlbHNlIGlmIChjcmVhdHVyZS5lZHUgPD0gMjYpIHtcbiAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY3JlYXR1cmUuZWR1ID49MjhcbiAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgfVxuICAgIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDQnKSB7XG4gICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgfSBlbHNlIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDYnKSB7XG4gICAgICBjcmVhdHVyZS5kYiA9IC0yXG4gICAgfVxuICAgIGNvbnNvbGUuZGVidWcoJ0NvbnZlcnRlZCBjcmVhdHVyZScsIGNyZWF0dXJlKVxuICAgIHJldHVybiBjcmVhdHVyZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5vbignc3VibWl0JywgJ2Zvcm0nLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdvcHRpb25bdmFsdWU9Y29jLScgKyBnYW1lLmkxOG4ubGFuZyArICddJylcbiAgICAgIC5hdHRyKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMgZ2V0SW5wdXRzIGV4dHJhY3RzIHRoZSBkYXRhIGZyb20gdGhlIGlucHV0IGZpZWxkcyBhbmRcbiAgICogYWRkcyBhIGAuYCBhdCB0aGUgZW5kIGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0SW5wdXRzICgpIHtcbiAgICBjb25zdCBpbnB1dHMgPSB7fVxuICAgIGlucHV0cy5lbnRpdHkgPSAkKCcjY29jLWVudGl0eS10eXBlJylcbiAgICAgIC52YWwoKVxuICAgICAgLnRyaW0oKVxuICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID0gJCgnI2NvYy1jb252ZXJ0LTZFJylcbiAgICAgIC52YWwoKVxuICAgICAgLnRyaW0oKVxuICAgIGNvbnNvbGUuZGVidWcoJ2VudGl0eSB0eXBlOicsIGlucHV0cy5lbnRpdHkpXG4gICAgaW5wdXRzLmxhbmcgPSAkKCcjY29jLWVudGl0eS1sYW5nJylcbiAgICAgIC52YWwoKVxuICAgICAgLnRyaW0oKVxuICAgIGxldCB0ZXh0ID0gJCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKVxuICAgICAgLnZhbCgpXG4gICAgICAudHJpbSgpXG4gICAgY29uc29sZS5kZWJ1ZygncmVjZWl2ZWQgdGV4dCcsICcjIycgKyB0ZXh0ICsgJyMjJylcbiAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aF0gIT09ICcuJykge1xuICAgICAgdGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgaW5wdXRzLnRleHQgPSB0ZXh0XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChodG1sKSB7XG4gICAgY29uc29sZS5kZWJ1ZygnaHRtbCcsIGh0bWwpXG4gICAgY29uc3QgaW5wdXRzID0gYXdhaXQgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuZ2V0SW5wdXRzKClcbiAgICBjb25zdCBhY3RvciA9IG5ldyBDb0M3QWN0b3JJbXBvcnRlcigpXG4gICAgY29uc3QgY3JlYXRlZEFjdG9yID0gYXdhaXQgYWN0b3IuY3JlYXRlQWN0b3IoaW5wdXRzKVxuICAgIC8vIEFjdG9yIGNyZWF0ZWQsIE5vdGlmeSB0aGUgdXNlciBhbmQgc2hvdyB0aGUgc2hlZXQuXG4gICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAnQ3JlYXRlZCAnICtcbiAgICAgICAgY3JlYXRlZEFjdG9yLmRhdGE/LnR5cGU/LnRvVXBwZXJDYXNlKCkgK1xuICAgICAgICAnOiAnICtcbiAgICAgICAgY3JlYXRlZEFjdG9yLmRhdGE/Lm5hbWVcbiAgICApXG4gICAgYXdhaXQgY3JlYXRlZEFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIC8vIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBVcGRhdGVyLnVwZGF0ZUFjdG9yKG5wYylcbiAgICAvLyBjb25zb2xlLmRlYnVnKCd1cGRhdGVkOicsIHVwZGF0ZWQpXG4gIH1cblxuICBhc3luYyBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdlYiB0byBjcmF0ZSB0aGUgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2dcbiAgICogQHBhcmFtIHt9IGRhdGEgY2FuIGluY2x1ZGUgYSBgdGl0bGVgIGZvciB0aGUgZGlhbG9nLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYWN0b3ItaW1wb3J0ZXIuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBpbXBvcnQ6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWZpbGUtaW1wb3J0XCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0JyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5pbXBvcnRBY3RvclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5vOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWZhdWx0OiAnaW1wb3J0JyxcbiAgICAgICAgICBjbG9zZTogY29uc29sZS5sb2coJ0Nsb3Npbmc6JylcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcbiAgICAgICAgICB3aWR0aDogNjAwXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgY2FudmFzLCBkdXBsaWNhdGUsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVudSB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLl9nZXRDb250cm9scygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVuZGVyTWVudSAoY29udHJvbHMsIGh0bWwpIHtcbiAgICAvLyBUaGlzIGNvdWxkIGJlIG1hZGUgbm9uIHN0YXRpYyBieSBtb3ZpbmcgdGhlIGdhbWUuQ29DNy5tZW51cyBpbml0aWFsaXphdGlvbiB0byBnZXRTY2VuZUNvbnRyb2xCdXR0b25zIGhvb2tcbiAgICBpZiAoIWdhbWUuQ29DNy5tZW51cykge1xuICAgICAgZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KClcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ01lbnUgaW5pdCcpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lbnUgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NvYzctbWVudS5odG1sJyxcbiAgICAgIGdhbWUuQ29DNy5tZW51cy5nZXREYXRhKClcbiAgICApXG4gICAgY29uc3QgY29jN0J1dHRvbiA9ICQobWVudSlcblxuICAgIGNvYzdCdXR0b25cbiAgICAgIC5maW5kKCcuc2NlbmUtY29udHJvbCcpXG4gICAgICAuY2xpY2soZ2FtZS5Db0M3Lm1lbnVzLl9vbkNsaWNrTWVudS5iaW5kKGdhbWUuQ29DNy5tZW51cykpXG4gICAgY29jN0J1dHRvblxuICAgICAgLmZpbmQoJy5jb250cm9sLXRvb2wnKVxuICAgICAgLmNsaWNrKGdhbWUuQ29DNy5tZW51cy5fb25DbGlja1Rvb2wuYmluZChnYW1lLkNvQzcubWVudXMpKVxuXG4gICAgaWYgKGdhbWUuQ29DNy5tZW51cy5hY3RpdmVDb250cm9sKSB7XG4gICAgICBodG1sLmZpbmQoJy5zY2VuZS1jb250cm9sJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5zY2VuZS1jb250cm9sJylcbiAgICAgIC5jbGljayhnYW1lLkNvQzcubWVudXMuX2NsZWFyQWN0aXZlLmJpbmQoZ2FtZS5Db0M3Lm1lbnVzKSlcblxuICAgIGh0bWwuYXBwZW5kKGNvYzdCdXR0b24pXG4gICAgZ2FtZS5Db0M3Lm1lbnVzLmh0bWwgPSBodG1sXG4gIH1cblxuICBnZXQgY29udHJvbCAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRyb2xzKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzLmZpbmQoYyA9PiBjLm5hbWUgPT09IHRoaXMuYWN0aXZlQ29udHJvbCkgfHwgbnVsbFxuICB9XG5cbiAgX2NsZWFyQWN0aXZlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBjdXN0b21NZW51QWN0aXZlID0gISF0aGlzLmFjdGl2ZUNvbnRyb2xcbiAgICB0aGlzLmFjdGl2ZUNvbnRyb2wgPSAnJ1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNvbnRyb2xOYW1lID0gbGkuZGF0YXNldD8uY29udHJvbFxuICAgIGlmICh1aS5jb250cm9scy5hY3RpdmVDb250cm9sID09PSBjb250cm9sTmFtZSAmJiBjdXN0b21NZW51QWN0aXZlKSB7XG4gICAgICB1aS5jb250cm9scy5yZW5kZXIoKVxuICAgIH1cbiAgfVxuXG4gIF9vbkNsaWNrVG9vbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKCFjYW52YXM/LnJlYWR5KSByZXR1cm5cbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0b29sTmFtZSA9IGxpLmRhdGFzZXQudG9vbFxuICAgIGNvbnN0IHRvb2wgPSB0aGlzLmNvbnRyb2wudG9vbHMuZmluZCh0ID0+IHQubmFtZSA9PT0gdG9vbE5hbWUpXG5cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBmb3VuZCB0b29sOiAke3Rvb2wubmFtZX1gKTtcblxuICAgIGlmICh0b29sLnRvZ2dsZSkge1xuICAgICAgLy8gSGFuZGxlIFRvZ2dsZXNcbiAgICAgIHRvb2wuYWN0aXZlID0gIXRvb2wuYWN0aXZlXG4gICAgICBpZiAodG9vbC5vbkNsaWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHRvb2wub25DbGljayh0b29sLmFjdGl2ZSlcbiAgICB9IGVsc2UgaWYgKHRvb2wuYnV0dG9uKSB7XG4gICAgICAvLyBIYW5kbGUgQnV0dG9uc1xuICAgICAgaWYgKHRvb2wub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB0b29sLm9uQ2xpY2soZXZlbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEhhbmRsZSBUb29sc1xuICAgICAgdG9vbC5hY3RpdmVUb29sID0gdG9vbE5hbWVcbiAgICAgIGlmICh0b29sLm9uQ2xpY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikgdG9vbC5vbkNsaWNrKClcbiAgICB9XG4gIH1cblxuICBfb25DbGlja01lbnUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICghY2FudmFzPy5yZWFkeSkgcmV0dXJuXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY29udHJvbE5hbWUgPSBsaS5kYXRhc2V0LmNvbnRyb2xcbiAgICBjb25zdCBjb250cm9sID0gdGhpcy5jb250cm9scy5maW5kKHQgPT4gdC5uYW1lID09PSBjb250cm9sTmFtZSlcblxuICAgIGlmIChjb250cm9sLmJ1dHRvbikge1xuICAgICAgaWYgKGNvbnRyb2wub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSBjb250cm9sLm9uQ2xpY2soZXZlbnQpIC8vIElmIGNvbnRyb2wgaXMgYSBidXR0b24sIGRvbid0IG1ha2UgaXQgYWN0aXZlLlxuICAgICAgLy8gdWkuY29udHJvbHMucmVuZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGNvbnRyb2wgaXMgYSBtZW51IGFuZCBpcyBub3QgYWN0aXZlLlxuICAgICAgLy8gaHRtbC5maW5kKCcuc2NlbmUtY29udHJvbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsgLy8gRGVhY3RpdmF0ZSBvdGhlciBtZW51LlxuICAgICAgLy8gZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgLy9BY3RpdmF0ZSB0aGlzIG1lbnUuXG4gICAgICB0aGlzLmFjdGl2ZUNvbnRyb2wgPSBjb250cm9sTmFtZSAvLyBTZXQgY3Vyc3RvbSBhY3RpdmUgY29udHJvbCB0byB0aGF0IGNvbnRyb2wuXG4gICAgICB1aS5jb250cm9scy5yZW5kZXIoKVxuICAgIH1cbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGlzQWN0aXZlID0gISFjYW52YXM/LnNjZW5lXG5cbiAgICAvLyBGaWx0ZXIgdG8gY29udHJvbCB0b29sIHNldHMgd2hpY2ggY2FuIGJlIGRpc3BsYXllZFxuICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy5jb250cm9sc1xuICAgICAgLmZpbHRlcihzID0+IHMudmlzaWJsZSAhPT0gZmFsc2UpXG4gICAgICAubWFwKHMgPT4ge1xuICAgICAgICBzID0gZHVwbGljYXRlKHMpXG5cbiAgICAgICAgLy8gQWRkIHN0eWxpbmcgcnVsZXNcbiAgICAgICAgcy5jc3MgPSBbXG4gICAgICAgICAgJ2N1c3RvbS1jb250cm9sJyxcbiAgICAgICAgICBzLmJ1dHRvbiA/ICdidXR0b24nIDogbnVsbCxcbiAgICAgICAgICBpc0FjdGl2ZSAmJiB0aGlzLmFjdGl2ZUNvbnRyb2wgPT09IHMubmFtZSA/ICdhY3RpdmUnIDogJydcbiAgICAgICAgXVxuICAgICAgICAgIC5maWx0ZXIodCA9PiAhIXQpXG4gICAgICAgICAgLmpvaW4oJyAnKVxuXG4gICAgICAgIC8vIGlmKCB0aGlzLmFjdGl2ZUNvbnRyb2wgPT09IHMubmFtZSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0aXZlIGNvbnRyb2w6ICR7dGhpcy5hY3RpdmVDb250cm9sfWApO1xuXG4gICAgICAgIGlmIChzLmJ1dHRvbikgcmV0dXJuIHNcblxuICAgICAgICAvLyBQcmVwYXJlIGNvbnRhaW5lZCB0b29sc1xuICAgICAgICBzLnRvb2xzID0gcy50b29sc1xuICAgICAgICAgIC5maWx0ZXIodCA9PiB0LnZpc2libGUgIT09IGZhbHNlKVxuICAgICAgICAgIC5tYXAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPVxuICAgICAgICAgICAgICBpc0FjdGl2ZSAmJiAocy5hY3RpdmVUb29sID09PSB0Lm5hbWUgfHwgKHQudG9nZ2xlICYmIHQuYWN0aXZlKSlcbiAgICAgICAgICAgIHQuY3NzID0gW1xuICAgICAgICAgICAgICB0LnRvZ2dsZSA/ICd0b2dnbGUnIDogbnVsbCxcbiAgICAgICAgICAgICAgYWN0aXZlID8gJ2FjdGl2ZScgOiBudWxsLFxuICAgICAgICAgICAgICB0LmNsYXNzID8gdC5jbGFzcyA6IG51bGxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgLmZpbHRlcih0ID0+ICEhdClcbiAgICAgICAgICAgICAgLmpvaW4oJyAnKVxuICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc1xuICAgICAgfSlcblxuICAgIC8vIFJldHVybiBkYXRhIGZvciByZW5kZXJpbmdcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlOiBpc0FjdGl2ZSxcbiAgICAgIGNzc0NsYXNzOiBpc0FjdGl2ZSA/ICcnIDogJ2Rpc2FibGVkJyxcbiAgICAgIGNvbnRyb2xzOiBjb250cm9scyAvLyAuZmlsdGVyKHMgPT4gcy50b29scy5sZW5ndGgpXG4gICAgfVxuICB9XG5cbiAgX2dldENvbnRyb2xzICgpIHtcbiAgICBjb25zdCBpc0dNID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBjb250cm9scyA9IFtdXG4gICAgY29udHJvbHMucHVzaCh7XG4gICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnLFxuICAgICAgbmFtZTogJ21haW4tbWVudScsXG4gICAgICB0aXRsZTogJ0NvQzcuR21Ub29scycsXG4gICAgICB2aXNpYmxlOiBpc0dNLFxuICAgICAgdG9vbHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gICAgICAgICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5EZXZQaGFzZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWVkaXQnLFxuICAgICAgICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQ2hhckNyZWF0aW9uTW9kZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24oKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1wbHVzJyxcbiAgICAgICAgICBuYW1lOiAnYWN0b3ItaW1wb3J0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQWN0b3JJbXBvcnRlcicsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT5cbiAgICAgICAgICAgIGF3YWl0IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtY2VydGlmaWNhdGUnLFxuICAgICAgICAgIGNsYXNzOiAneHBfdG9nZ2xlJyxcbiAgICAgICAgICBuYW1lOiAneHB0b2dnbGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnRvZ2dsZVhQJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZVhQR2FpbigpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tY2FyZC1qb2tlcicsXG4gICAgICAgICAgbmFtZTogJ2Zha2Vyb2xsJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRmFrZVJvbGwnLFxuICAgICAgICAgIG9uQ2xpY2s6IENvQzdDaGF0LmZha2VSb2xsTWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtbW9vbicsXG4gICAgICAgICAgbmFtZTogJ3N0YXJ0cmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnN0YXJ0UmVzdCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy5zdGFydFJlc3QoKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcblxuICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZDEwJyxcbiAgICAgIG5hbWU6ICdkaWNlLXJvbGwnLFxuICAgICAgdGl0bGU6ICdDb0M3LlJvbGxEaWNlJyxcbiAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgIG9uQ2xpY2s6IGV2ZW50ID0+IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQpXG4gICAgfSlcblxuICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgaWNvbjogJ2ZhcyBmYS1saW5rJyxcbiAgICAgIG5hbWU6ICdjcmVhdGUtbGluaycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ3JlYXRlTGluaycsXG4gICAgICB2aXNpYmxlOiBpc0dNLFxuICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgb25DbGljazogQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5jcmVhdGVcbiAgICB9KVxuICAgIHJldHVybiBjb250cm9sc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cblxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2xpbmsuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2FudmFzIHtcbiAgc3RhdGljIGdldCBDT0M3X1RZUEVTX1NVUFBPUlRFRCAoKSB7XG4gICAgcmV0dXJuIFsnbGluayddXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25Ecm9wU29tZXRoaW5nIChjYW52YXMsIGl0ZW0pIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLkNvQzdUeXBlICYmXG4gICAgICBDb0M3Q2FudmFzLkNPQzdfVFlQRVNfU1VQUE9SVEVELmluY2x1ZGVzKGl0ZW0uQ29DN1R5cGUpXG4gICAgKSB7XG4gICAgICBjb25zdCBncmlkU2l6ZSA9IGNhbnZhcy5zY2VuZS5kYXRhLmdyaWRcbiAgICAgIGNvbnN0IHggPSBpdGVtLnggLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IHkgPSBpdGVtLnkgLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IGhlaWdodCA9IGdyaWRTaXplXG4gICAgICBjb25zdCB3aWR0aCA9IGdyaWRTaXplXG4gICAgICBsZXQgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMucGxhY2VhYmxlcy5maWx0ZXIob2JqID0+IHtcbiAgICAgICAgY29uc3QgYyA9IG9iai5jZW50ZXJcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLngsIHgsIHggKyB3aWR0aCkgJiZcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLnksIHksIHkgKyBoZWlnaHQpXG4gICAgICAgIClcbiAgICAgIH0pIC8vIEZpbmQgZHJvcCB0YXJnZXQuXG4gICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSBkcm9wVGFyZ2V0VG9rZW5zID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkIC8vIElmIG5vIHRhcmdldCB3aGlzcGVyIHRvIHNlbGVjdGVkIHRva2VuXG4gICAgICBzd2l0Y2ggKGl0ZW0uQ29DN1R5cGUpIHtcbiAgICAgICAgY2FzZSAnbGluayc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbGluayA9IGF3YWl0IENvQzdMaW5rLmZyb21EYXRhKGl0ZW0pXG4gICAgICAgICAgICBpZiAoIWxpbmsubGluaykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbnZhbGlkIGxpbmsnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxuICAgICAgICAgICAgb3B0aW9uLnNwZWFrZXIgPSB7XG4gICAgICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHdoaXNwZXJUYXJnZXRzID0gZ2FtZS51c2Vycy5wbGF5ZXJzLmZpbHRlcihcbiAgICAgICAgICAgICAgICB1ID0+ICEhdS5jaGFyYWN0ZXJcbiAgICAgICAgICAgICAgKSAvLyBVc2VyIHdpdGggYXQgbGVhc3QgYSBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgd2hpc3BlclRhcmdldHMuZm9yRWFjaCh1ID0+IHtcbiAgICAgICAgICAgICAgICBvcHRpb24ud2hpc3BlciA9IFt1XVxuICAgICAgICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdS5jaGFyYWN0ZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGxpbmsubGlua1xuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkcm9wVGFyZ2V0VG9rZW5zLmZvckVhY2godCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHQuYWN0b3IuaGFzUGxheWVyT3duZXIpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gdC5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogdC5hY3Rvci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGNoZWNrOiBsaW5rLmxpbmtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ29tcGVuZGl1bURpcmVjdG9yeSwgRGlhbG9nLCBnYW1lICovXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSBleHRlbmRzIENvbXBlbmRpdW1EaXJlY3Rvcnkge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgbGV0IHRyYW5zbGF0ZWQgPSBmYWxzZVxuICAgIGlmIChnYW1lLmkxOG4ubGFuZyA9PT0gJ2VuJykge1xuICAgICAgdHJhbnNsYXRlZCA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnYW1lLmJhYmVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3QgdiBvZiBPYmplY3QudmFsdWVzKGdhbWUuYmFiZWxlLm1vZHVsZXMpKSB7XG4gICAgICAgIGlmICh2LmxhbmcgPT09IGdhbWUuaTE4bi5sYW5nKSB7XG4gICAgICAgICAgdHJhbnNsYXRlZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRyYW5zbGF0ZWQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJjb21wZW5kaXVtLXRyYW5zbGF0aW9uXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJykgK1xuICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnPC9hPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcuY29tcGVuZGl1bS10cmFuc2xhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVdhcm5pbmcnKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlSW5zdGFsbEJhYmVsZScpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlRW5hYmxlVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlTm9UcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPidcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbG9zZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHt9XG4gICAgICAgICkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBkdXBsaWNhdGUsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5kYXRhLmRhdGEuc3BlbGxzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgc3BlbGxzLmZvckVhY2goYXN5bmMgc3BlbGwgPT4ge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxuICAgIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuc3BlbGxzJzogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIHRoZSBsb2dpYyBpbnZvbHZpbmcgdGhlIGF0dGVtcHQgb2YgaW5pdGlhbCByZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBAc2VlIGxpc3RlbiBAc2VlIGdyYW50SW5pdGlhbFJlYWRpbmdcbiAgICovXG4gIGFzeW5jIGF0dGVtcHRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIENvbnZlcnRzIHRoZSBkaWZmaWN1bHR5IHZhbHVlIHRvIHNvbWV0aGluZyBhY2NlcHRlZCBieSBDb0M3Q2hlY2sgKi9cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0Jvb2suY29udmVydERpZmZpY3VsdHkoXG4gICAgICB0aGlzLmRhdGEuZGF0YS5kaWZmaWN1bHR5TGV2ZWxcbiAgICApXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLmRhdGEuZGF0YS5sYW5ndWFnZVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uZ2V0U2tpbGxzQnlOYW1lKGxhbmd1YWdlKVxuICAgIGlmICghc2tpbGwpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH0gZWxzZSBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBY3RvciB3aG8gb3ducyB0aGlzIGRvZXMgbm90IGhhdmUgdGhlIHNraWxsIG9mXG4gICAgICAgKiB0aGUgbGFuZ3VhZ2UgaW4gd2hpY2ggaXQgd2FzIHdyaXR0ZW5cbiAgICAgICAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkxhbmd1YWdlJywgeyBhY3RvcjogdGhpcy5hY3Rvci5uYW1lIH0pXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnSU5JVElBTF9SRUFESU5HJ1xuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kYXRhLmRhdGEuZGlmZmljdWx0eUxldmVsXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICByZXR1cm4gYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRzIGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGludGVyYWN0cyBpbiBzb21lIHdheSB3aXRoIHByb2dyZXNzIGJhclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAncmVzZXQnIHx8ICdpbmNyZWFzZScgfHwgJ2RlY3JlYXNlJ1xuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUganVzdCBzbyB0aGF0IHByb2dyZXNzIGlzIG5vdCBncmVhdGVyIHRoYW4gbmVjZXNzYXJ5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGNoYW5nZVByb2dyZXNzIChtb2RlLCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc093bmVkICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmluaXRpYWxSZWFkaW5nICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYWxSZWFkaW5nTmVlZGVkJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEudHlwZS5teXRob3MgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE15dGhvc1RvbWUnKSlcbiAgICB9XG4gICAgY29uc3QgbmVjZXNzYXJ5ID0gdGhpcy5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5XG4gICAgbGV0IGZ1bGxTdHVkeSA9IHRoaXMuZGF0YS5kYXRhLmZ1bGxTdHVkeVxuICAgIGxldCBwcm9ncmVzcyA9IHRoaXMuZGF0YS5kYXRhLnN0dWR5LnByb2dyZXNzXG4gICAgaWYgKGlzTmFOKHByb2dyZXNzKSkge1xuICAgICAgLyoqIEl0IHNlZW1zIGEgbGl0dGxlIGltcG9zc2libGUsIGJ1dCB5b3UgbmV2ZXIga25vdyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuc3R1ZHkucHJvZ3Jlc3MnOiAwXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodmFsdWUgJiYgcHJvZ3Jlc3MgPiB2YWx1ZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBQcm9ncmVzcyB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdmFsdWUgZW50ZXJlZCBieSB1c2VyIGFzIG5lY2Vzc2FyeSxcbiAgICAgICAqIHJlc2V0IHByb2dyZXNzIHRvIGJlIGVxdWFsIG5lY2Vzc2FyeSBhbmQgY29tcGxldGUgZnVsbCBzdHVkeVxuICAgICAgICovXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5LFxuICAgICAgICAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IHZhbHVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29tcGxldGVGdWxsU3R1ZHkoKVxuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gJ2luY3JlYXNlJyAmJiBwcm9ncmVzcyA8IG5lY2Vzc2FyeSkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gaW5jcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuc3R1ZHkucHJvZ3Jlc3MnOiArK3Byb2dyZXNzXG4gICAgICB9KVxuICAgICAgaWYgKHByb2dyZXNzID09PSBuZWNlc3NhcnkpIHtcbiAgICAgICAgLyoqIENvbXBsZXRlIGZ1bGwgc3R1ZHkgaWYgcHJvZ3Jlc3MgaXMgZXF1YWwgbmVjZXNzYXJ5ICovXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuZnVsbFN0dWR5JzogKytmdWxsU3R1ZHkgfSlcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRGdWxsU3R1ZHkoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2RlY3JlYXNlJyAmJiBwcm9ncmVzcyA+IDApIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byBkZWNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuc3R1ZHkucHJvZ3Jlc3MnOiAtLXByb2dyZXNzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrRXhoYXVzdGlvbiAoKSB7XG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3I/LmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLmRhdGEuZGF0YS5teXRob3NSYXRpbmdcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuaW5pdGlhbFJlYWRpbmcpIHtcbiAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlID49IG15dGhvc1JhdGluZykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ2RhdGEuc3R1ZHkucHJvZ3Jlc3MnOiB0aGlzLmRhdGEuZGF0YS5zdHVkeS5uZWNlc3NhcnlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvb2tIYXNOb3RoaW5nTW9yZVRvVGVhY2gnLCB7XG4gICAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdyYW50RnVsbFN0dWR5ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnR5cGUubXl0aG9zKSByZXR1cm5cbiAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3IuY3RodWxodU15dGhvc1xuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5kYXRhLmRhdGEubXl0aG9zUmF0aW5nXG4gICAgbGV0IG15dGhvc0ZpbmFsID0gdGhpcy5kYXRhLmRhdGEuZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbFxuICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgPiBteXRob3NSYXRpbmcpIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gbXl0aG9zRmluYWw7IGluZGV4KyspIHtcbiAgICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCAtIGluZGV4IDw9IG15dGhvc1JhdGluZykge1xuICAgICAgICAgIG15dGhvc0ZpbmFsIC09IGluZGV4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYWRlciBhdXRvbWF0aWNhbGx5IGdhaW5zIGEgc2tpbGwgdGljayBmb3IgdGhlXG4gICAgICogbGFuZ3VhZ2UgaW4gd2hpY2ggdGhlIGJvb2sgaXMgd3JpdHRlblxuICAgICAqL1xuICAgIGRldmVsb3BtZW50cy5wdXNoKFxuICAgICAge1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zRmluYWwpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLmRhdGEuZGF0YS5sYW5ndWFnZSxcbiAgICAgICAgZ2FpbjogJ2RldmVsb3BtZW50J1xuICAgICAgfVxuICAgIClcbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdkYXRhLmZ1bGxTdHVkaWVzJzogKyt0aGlzLmRhdGEuZGF0YS5mdWxsU3R1ZGllc1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgZ3JhbnRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIElmIGluaXRpYWwgcmVhZGluZyBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgdGhlcmUgaXMgbm90aGluZyB0byBkbyBoZXJlICovXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmluaXRpYWxSZWFkaW5nKSByZXR1cm5cbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvcyA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLmRhdGEuZGF0YS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwsXG4gICAgICB0eXBlOiB0aGlzLmRhdGEuZGF0YS50eXBlLm15dGhvc1xuICAgIH1cbiAgICBjb25zdCBvY2N1bHQgPSB7XG4gICAgICBnYWluczogdGhpcy5kYXRhLmRhdGEuZ2FpbnMub2NjdWx0LFxuICAgICAgdHlwZTogdGhpcy5kYXRhLmRhdGEudHlwZS5vY2N1bHRcbiAgICB9XG4gICAgY29uc3Qgb3RoZXIgPSB7XG4gICAgICBnYWluczogdGhpcy5kYXRhLmRhdGEuZ2FpbnMub3RoZXJzLFxuICAgICAgdHlwZTogdGhpcy5kYXRhLmRhdGEudHlwZS5vdGhlclxuICAgIH1cbiAgICBpZiAobXl0aG9zLnR5cGUgJiYgbXl0aG9zLmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DdGh1bGh1TXl0aG9zTmFtZScpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3MuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob2NjdWx0LnR5cGUgJiYgb2NjdWx0LmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PY2N1bHQnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQob2NjdWx0LmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG90aGVyLnR5cGUpIHtcbiAgICAgIG90aGVyLmdhaW5zLmZvckVhY2goYXN5bmMgc2tpbGwgPT4ge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxuICAgICAgICAvKiogU2FuaXRpemF0aW9uIHRvIGRlYWwgd2l0aCBzcGVjaWFsaXphdGlvbnMgKi9cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cbiAgICAgICAgICBza2lsbC5uYW1lID0gcGF0dGVyblsyXVxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIHNraWxsLnZhbHVlID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoc2tpbGwudmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUpIHtcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgZ2Fpbjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgaWYgKChteXRob3MudHlwZSB8fCBvY2N1bHQudHlwZSkgJiYgdGhpcy5kYXRhLmRhdGEuc2FuaXR5TG9zcykge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgfVxuICAgIC8qKiBNYXJrIGluaXRpYWwgcmVhZGluZyBhcyBjb21wbGV0ZSAqL1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmluaXRpYWxSZWFkaW5nJzogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgZ3JhbnRTcGVsbExlYXJuaW5nICgpIHtcbiAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgJ0F1dG9tYXRpb24gb2YgbGVhcm5pbmcgc3BlbGxzIGZyb20gYm9va3MgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYW5kIHdpbGwgYmUgYWRkZWQgaW4gZnV0dXJlIHVwZGF0ZXMuJ1xuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0uZGF0YS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0uZGF0YS5uYW1lID09PSBkZXZlbG9wbWVudC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKGV4aXN0aW5nU2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgICAgICBkdXBsaWNhdGUoZXhpc3RpbmdTa2lsbClcbiAgICAgICAgICBdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVTa2lsbChkZXZlbG9wbWVudC5uYW1lLCAwKVxuICAgICAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNraWxsID0gc2tpbGxbMF1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIC8qKiBTaW1wbHkgbWFyayB0aGUgc2tpbGwgZm9yIGRldmVsb3BtZW50ICovXG4gICAgICAgIGF3YWl0IHNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSByZWNlaXZlZCB2YWx1ZSBnYWluZWQgaXMgbnVtZXJpYywgZW5zdXJlIHRoYXQgdGhlIGFtb3VudFxuICAgICAgICAgKiB3aWxsIG5vdCBleGNlZWQgdGhlIG1heGltdW0gdmFsdWUgb2YgOTlcbiAgICAgICAgICovXG4gICAgICAgIGlmIChza2lsbC52YWx1ZSArIGRldmVsb3BtZW50LmdhaW4gPiA5OSkge1xuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gZGV2ZWxvcG1lbnQuZ2FpbjsgaW5kZXgrKykge1xuICAgICAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiAtIGluZGV4IDw9IDk5KSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50LmdhaW4gLT0gaW5kZXhcbiAgICAgICAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShkZXZlbG9wbWVudC5nYWluKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zaG93RGV2ZWxvcG1lbnRzVGFibGUoZGV2ZWxvcG1lbnRzKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNlcXVlbnQgcGVyaW9kcyBvZiBmdWxsIHN0dWR5IG1heSBiZSB1bmRlcnRha2VuLCB0aGUgZGlmZmVyZW5jZSBiZWluZ1xuICAgKiB0aGF0IGVhY2ggc3R1ZHkgd2lsbCB0YWtlIHR3aWNlIGFzIGxvbmcgYXMgdGhlIHByZXZpb3VzIG9uZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgcmVkb0Z1bGxTdHVkeSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IDAgfSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZGF0YS5kYXRhLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaGJzJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXZlbG9wbWVudHMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5HYWluc0ZvclJlYWRpbmcnLCB7IGJvb2s6IHRoaXMubmFtZSB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYXR0ZW1wdFNwZWxsTGVhcm5pbmcgKGlkKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBjb25zdCBzcGVsbCA9IHRoaXMuZGF0YS5kYXRhLnNwZWxscy5maW5kKHNwZWxsID0+IHtcbiAgICAgIHJldHVybiBzcGVsbC5faWQgPT09IGlkXG4gICAgfSlcbiAgICBpZiAoc3BlbGwpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MZWFyblNwZWxsQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBzcGVsbDogc3BlbGwubmFtZVxuICAgICAgfSlcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnU1BFTExfTEVBUk5JTkcnXG4gICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBMaXN0ZW4gdG8gY2hhbmdlcyBvbiB0aGUgY2hlY2sgY2FyZCAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsKSB7XG4gICAgY29uc3QgY2hlY2sgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbClcbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZygpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGljZVRlcm0gKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllIGV4dGVuZHMgRGljZVRlcm0ge1xuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcbiAgICBzdXBlcih0ZXJtRGF0YSlcbiAgICB0aGlzLmZhY2VzID0gMTBcbiAgfVxuXG4gIGdldCB0b3RhbCAoKSB7XG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxuICAgIHJldHVybiB0b3RhbCA9PT0gMTAgPyAwIDogdG90YWwgKiAxMFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICd0J1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuLy8gaW1wb3J0ICB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnO1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QXJjaGV0eXBlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgOiBbXVxuICAgIGRhdGFMaXN0LmZvckVhY2goYXN5bmMgaXRlbSA9PiB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uZGF0YSkgcmV0dXJuXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLmRhdGEudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0uZGF0YS5uYW1lKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChkdXBsaWNhdGUoaXRlbS5kYXRhKSlcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGNoYXREYXRhLnByb3BlcnRpZXMuZm9yRWFjaChwID0+IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApKTtcbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5wYXJlbnRzKCcuaXRlbScpXG4gICAgICAuZGF0YSgnaXRlbS1pZCcpXG4gICAgaWYgKGl0ZW1JbmRleCkgYXdhaXQgdGhpcy5yZW1vdmVJdGVtKGl0ZW1JbmRleCwgY29sbGVjdGlvbk5hbWUpXG4gIH1cblxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gaXRlbUlkXG4gICAgfSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgICAgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9hcmNoZXR5cGUuaHRtbCdcbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbHMuZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YXNldC5pdGVtSWRcbiAgICB9KVxuXG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdJdGVtJywgZGF0YTogc2tpbGwgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG5cbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHNlbGVjdGVkXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLmRhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIGRhdGEuZGF0YS5za2lsbHMuZm9yRWFjaChza2lsbCA9PiB7XG4gICAgICAvLyBGb3IgZWFjaCBza2lsbCBpZiBpdCdzIGEgc3BlYyBhbmQgc3BhYyBuYW1lIG5vdCBpbmNsdWRlZCBpbiB0aGUgbmFtZSBhZGQgaXRcbiAgICAgIGlmIChcbiAgICAgICAgc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbiAmJlxuICAgICAgICAhc2tpbGwubmFtZS5pbmNsdWRlcyhza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uKVxuICAgICAgKSB7XG4gICAgICAgIHNraWxsLmRpc3BsYXlOYW1lID0gYCR7c2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7c2tpbGwubmFtZX0pYFxuICAgICAgfSBlbHNlIHNraWxsLmRpc3BsYXlOYW1lID0gc2tpbGwubmFtZVxuICAgIH0pXG5cbiAgICBkYXRhLmRhdGEuc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLmRpc3BsYXlOYW1lLmxvY2FsZUNvbXBhcmUoYi5kaXNwbGF5TmFtZSlcbiAgICB9KVxuXG4gICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCkge1xuICAgICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtkYXRhLmRhdGEuYm9udXNQb2ludHN9YFxuICAgIClcbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNQb2ludHMnKX06ICR7ZGF0YS5kYXRhLnRhbGVudHN9YFxuICAgIClcblxuICAgIC8vIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAvLyAgIGlmKCB2YWx1ZSkgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0/Q09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldOm51bGwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gVE9ETzogVGhpcyBjYW4gYmUgcmVtb3ZlZCBvbmNlIDAuNy54IGlzIHJlbGVhc2UgY2hhbm5lbFxuICAgIGlmICghZm9ybURhdGEuZGF0YSkgZm9ybURhdGEgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpXG5cbiAgICBpZiAoZm9ybURhdGEuZGF0YS5ncm91cHMpIHtcbiAgICAgIGZvcm1EYXRhLmRhdGEuZ3JvdXBzID0gT2JqZWN0LnZhbHVlcyhmb3JtRGF0YS5kYXRhPy5ncm91cHMgfHwge30pXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGZvcm1EYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBkdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxsc1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Qm9va1NoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9tYWluLmhicycsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdib29rJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5zcGVsbHMnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGFcbiAgICBkYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZ1xuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG4gICAgZGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXG4gICAgZGF0YS5leGhhdXN0ZWQgPSBhd2FpdCB0aGlzLml0ZW0uY2hlY2tFeGhhdXN0aW9uKCkgIT09IGZhbHNlXG4gICAgZGF0YS5zdHVkeUNvbXBsZXRlZCA9XG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnN0dWR5LnByb2dyZXNzID09PSB0aGlzLml0ZW0uZGF0YS5kYXRhLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XG4gICAgbGV0IGFtb3VudCA9IDBcbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnNwZWxsc1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuZGF0YS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy50ZWFjaC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGlkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAucGFyZW50cygnbGknKVxuICAgICAgICAuZGF0YSgnaWQnKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCdbbmFtZT1cImRhdGEuc3R1ZHkubmVjZXNzYXJ5XCJdJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygncmVzZXQnLCB2YWx1ZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2luY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdpbmNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNkZWNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnZGVjcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2FkZCcpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5jaGFuZ2Utb3RoZXItZ2FpbnMnKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2NoYW5nZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNyZWRvLWZ1bGwtc3R1ZHknKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0ucmVkb0Z1bGxTdHVkeSgpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAncmVtb3ZlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZGVsZXRlIGEgc3BlbGwgb24gdGhlIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25EZWxldGUgKGV2ZW50KSB7XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgcmV0dXJuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5zcGVsbHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGlmIChpbmRleCA+PSAwKSBzcGVsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuc3BlbGxzJzogc3BlbGxzIH0pXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcbiAgICogRmlsdGVycyBvbmx5ICdzcGVsbCcgaXRlbXMgYW5kIGluc2VydHMgdGhlbSBpbiBhIEB0eXBlIHtBcnJheX1cbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NwZWxsJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBzcGVsbHMgPSBbXVxuICAgIGRhdGFMaXN0LmZvckVhY2goYXN5bmMgaXRlbSA9PiB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIShpdGVtLmRhdGEudHlwZSA9PT0gJ3NwZWxsJykpIHJldHVyblxuICAgICAgc3BlbGxzLnB1c2goaXRlbS5kYXRhKVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFkZFNwZWxscyhzcGVsbHMpXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IEl0ZW0gZGF0YSBiYXNlZCBvbiB1c2VyIGludGVyYWN0aW9ucyB3aXRoIHRoZSBvdGhlciBza2lsbFxuICAgKiBnYWlucyB0YWJsZSBvbiBkZXRhaWxzIHRhYiBvbiB0aGlzIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdhZGQnIHx8ICdjaGFuZ2UnIHx8ICdyZW1vdmUnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIG1vZGlmeU90aGVyc0dhaW5zIChldmVudCwgbW9kZSkge1xuICAgIC8qKiBObyBuZWVkIHRvIGNoZWNrIGlmIHVzZXIgaXMgR00gYmVjYXVzZSBvbmx5IHRoZXkgY2FuIHNlZSBkZXRhaWxzIHRhYiAqL1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygndHInKS5kYXRhKCdpbmRleCcpXG4gICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ2FpbnMub3RoZXJzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdhaW5zLm90aGVycylcbiAgICAgIDogW11cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBza2lsbHMucHVzaCh7XG4gICAgICAgICAgLyoqIG5ldyBza2lsbCAqL1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZXdTa2lsbE5hbWUnKSxcbiAgICAgICAgICAvKiogZGV2ZWxvcG1lbnQgYnkgZGVmYXVsdCwgdmFsdWUgY2FuIGFsc28gYmUgMWQ2IG9yIDFkMTAgKi9cbiAgICAgICAgICB2YWx1ZTogJ2RldmVsb3BtZW50J1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhbmdlJzpcbiAgICAgICAgLyoqIFVzZXIgY2hhbmdlZCBuYW1lIChpbnB1dCkgb3IgdmFsdWUgKHNlbGVjdCkgb2YgYSBza2lsbCBvbiB0YWJsZSAqL1xuICAgICAgICBza2lsbHNbaW5kZXhdID0ge1xuICAgICAgICAgIG5hbWU6IGVsZW1lbnQuaXMoJ2lucHV0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmlzKCdzZWxlY3QnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byByZW1vdmUgYSBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkgc2tpbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5nYWlucy5vdGhlcnMnOiBza2lsbHMgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZmxhdHRlbk9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgZ2V0VHlwZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLy8gY29uc3RydWN0b3IoIC4uLmFyZ3MpIHtcbiAgLy8gIHN1cGVyKCAuLi5hcmdzKTtcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbScsICdjaGFzZSddLFxuICAgICAgd2lkdGg6IDU1MCxcbiAgICAgIGhlaWdodDogNTAwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3BhcnRpY2lwYW50cydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG5cbiAgICByZXR1cm4gb3B0aW9uc1xuXG4gICAgLy8gY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgLy8gc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9jaGFzZS5odG1sJ1xuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4gJ2NvYzdDaGFzZVNoZWV0J1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEucGFydGljaXBhbnRzID0gW11cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgZGF0YS5wYXJ0aWNpcGFudHMucHVzaChuZXcgX3BhcnRpY2lwYW50KHApKVxuICAgIH0pXG4gICAgZGF0YS5wcmV5cyA9IGRhdGEucGFydGljaXBhbnRzXG4gICAgICAuZmlsdGVyKHAgPT4gcC5jaGFzZXIpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5tb3YgLSBiLm1vdilcbiAgICBkYXRhLmNoYXNlcnMgPSBkYXRhLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+ICFwLmNoYXNlcilcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm1vdiAtIGIubW92KVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHMgKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcucC1zaWRlJykuY2xpY2sodGhpcy5fb25DaGFuZ2VTaWRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25EZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXJvbGwnKS5jbGljayh0aGlzLl9vblJlc2V0Um9sbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1kcml2ZXInKS5jbGljayh0aGlzLl9vbkRlbGV0ZURyaXZlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1zaWduJykuY2xpY2sodGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JylcbiAgICAgIC5jbGljayh0aGlzLl9vblJvbGxQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcucGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCBuZXdQYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5uZXctcGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBuZXdQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcbiAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICBpZiAodXBkYXRlRGF0YSkgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpXG5cbiAgICBpZiAoZGF0YS5kYXRhLnBhcnRpY2lwYW50cykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gZHVwbGljYXRlKHRoaXMucGFydGljaXBhbnRzKVxuICAgICAgLy8gSGFuZGxlIHBhcnRpY2lwYW50cyBhcnJheVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnBhcnRpY2lwYW50cykpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIoaylcbiAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBwYXJ0aWNpcGFudHNbTnVtYmVyKGluZGV4KV1cbiAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHYpXG4gICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdID0gb3JpZ2luYWxcbiAgICAgIH1cblxuICAgICAgZGF0YS5kYXRhLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgIH1cbiAgICAvLyBjb25zdCBwYXJ0aWNpcGFudHMgPSBkYXRhLmRhdGE/LnBhcnRpY2lwYW50cztcbiAgICAvLyBpZiggcGFydGljaXBhbnRzKSBkYXRhLmRhdGEucGFydGljaXBhbnRzID0gT2JqZWN0LnZhbHVlcyggcGFydGljaXBhbnRzKS5tYXAoIHAgPT4gY2xlYW4ocCkpO1xuXG4gICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gICAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gYXN5bmMgX29uU3VibWl0KC4uLmFyZ3MpIHtcbiAgLy8gIGF3YWl0IHN1cGVyLl9vblN1Ym1pdCguLi5hcmdzKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBvdmVycmlkZSA9IHRhcmdldD8uZGF0YXNldD8ub3ZlcnJpZGUgPT09ICd0cnVlJ1xuICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgY29uc3QgWywgdHlwZSwgc0luZGV4LCBzdWJUeXBlLCBkYXRhXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IGluZGV4ID0gTnVtYmVyKHNJbmRleClcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZSA9PT0gJ3BhcnRpY2lwYW50cycgJiZcbiAgICAgICAgIWlzTmFOKGluZGV4KSAmJlxuICAgICAgICBzdWJUeXBlID09PSAnc3BlZWQtY2hlY2snXG4gICAgICApIHtcbiAgICAgICAgaWYgKGRhdGEgPT09ICduYW1lJykge1xuICAgICAgICAgIC8vIENoYW5naW5nIG5hbWUgd2lsbCByZW1vdmUgYWxsIG90aGVyIHJlZiAhXG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgICAgICAgOiBbXVxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2spIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2suaWRcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sudHlwZVxuICAgICAgICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sgPSB7fVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5uYW1lID0gdGFyZ2V0LnZhbHVlXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBpbmRleCA9IHRhcmdldC5kYXRhc2V0Py5pbmRleFxuICAgIGlmICghaW5kZXgpIHJldHVyblxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBhd2FpdCB0aGlzLmFsdGVyUGFydGljaXBhbnQoZGF0YSwgTnVtYmVyKGluZGV4KSlcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGxldCBkYXRhID0ge31cbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5hZGRQYXJ0aWNpcGFudChkYXRhKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudEVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50RWxlbWVudC5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50c1tpbmRleF0pXG4gICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmU2V0KSB7XG4gICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSAmJiBwYXJ0aWNpcGFudC5hY3Rvci5wbGF5ZXIpIHtcbiAgICAgICAgcm9sbC5zdGFuZGJ5ID0gdHJ1ZVxuICAgICAgICByb2xsLnN0YW5kYnlUZXh0ID0gJ0NvQzcuQ2hhc2UnXG4gICAgICAgIHJvbGwuc3RhbmRieVJpZ2h0SWNvbiA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgICAgfVxuXG4gICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNTa2lsbCkge1xuICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNBdHRyaWJ1dGUpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQXR0cmlidXRlKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5jcmVhdGUocm9sbERhdGEpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRHJhZ0VudGVyUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uRHJhZ0xlYXZlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlU2lkZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCB0ZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLm5DZG9DeW9pdWR0anJOa3UnKTtcbiAgICAvLyBjb25zdCBpdGVtVGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnSXRlbS5wbElFbU5SUDZPN1B2ZU52LnJvbGwucTJzQXpzSHQ0RnNxc2RmRCcpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudC5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgaW5kZXggPSBkcml2ZXIuZGF0YXNldC5pbmRleFxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBkZWxldGUgcGFydGljaXBhbnQuYWN0b3JLZXlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25EZWxldGVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50LmRhdGFzZXQuaW5kZXhcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25SZXNldFJvbGwgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudC5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCBpbmRleCkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID1cbiAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgPyBgJHtkYXRhLnNjZW5lSWR9LiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgOiBkYXRhLnR5cGUgPT09ICdBY3RvcidcbiAgICAgICAgPyBkYXRhLmlkXG4gICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXlcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGlmIChhY3Rvci5kYXRhLnR5cGUgPT09ICd2ZWhpY2xlJykgcGFydGljaXBhbnQudmVoaWNsZUtleSA9IGFjdG9yS2V5XG4gICAgICBlbHNlIHBhcnRpY2lwYW50LmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3Qgb2xkUGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgaWYgKG9sZFBhcnRpY2lwYW50Lm1vdikgZGVsZXRlIG9sZFBhcnRpY2lwYW50Lm1vdlxuICAgIG1lcmdlT2JqZWN0KG9sZFBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoZGF0YSkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID1cbiAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgPyBgJHtkYXRhLnNjZW5lSWR9LiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBpZiAoYWN0b3IuZGF0YS50eXBlID09PSAndmVoaWNsZScpIHBhcnRpY2lwYW50LnZlaGljbGVLZXkgPSBhY3RvcktleVxuICAgICAgZWxzZSBwYXJ0aWNpcGFudC5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgfVxuXG4gICAgLy8gY29uc3QgcGFydGljaXBhbnQgPSB7XG4gICAgLy8gIGFjdG9yS2V5IDogKGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWQpP2Ake2RhdGEuc2NlbmVJZH0uJHtkYXRhLnRva2VuSWR9YDpkYXRhLmFjdG9ySWR8fGRhdGEuYWN0b3JLZXl8fGRhdGEuaWRcbiAgICAvLyB9O1xuICAgIC8vIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoIHBhcnRpY2lwYW50LmFjdG9yS2V5KTtcbiAgICAvLyBpZiggIWFjdG9yKSBkZWxldGUgcGFydGljaXBhbnQuYWN0b3JLZXk7XG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KGRhdGEuaWQpXG4gICAgICAgICAgaWYgKGl0ZW0/LmRhdGE/LnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsU3RyaW5nKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGxTdHJpbmcpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgICAgOiBbXVxuICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC5yb2xsVXVpZCA9PT0gcm9sbC51dWlkKVxuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGRhdGE6IHJvbGxTdHJpbmcsXG4gICAgICAgIHR5cGU6ICdpbnZva2UnLFxuICAgICAgICBtZXRob2Q6ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgaXRlbTogdGhpcy5pdGVtLnV1aWRcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuIChvYmopIHtcbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBvYmopIHtcbiAgICBjb25zdCB0cCA9IGdldFR5cGUob2JqW3Byb3BOYW1lXSlcbiAgICBpZiAodHAgPT09ICdPYmplY3QnKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gY2xlYW4ob2JqW3Byb3BOYW1lXSlcbiAgICB9XG5cbiAgICBpZiAodHAgPT09ICdPYmplY3QnICYmICFPYmplY3QuZW50cmllcyhvYmpbcHJvcE5hbWVdKS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIW9ialtwcm9wTmFtZV0ubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gTnVtYmVyKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpcbn1cblxuZXhwb3J0IGNsYXNzIF9wYXJ0aWNpcGFudCB7XG4gIGNvbnN0cnVjdG9yIChkYXRhID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBpc0FjdG9yICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBY3RvciB8fCB0aGlzLmhhc1ZlaGljbGVcbiAgfVxuXG4gIGdldCBrZXkgKCkge1xuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUuYWN0b3JLZXlcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgaWNvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzQWN0b3IpIHtcbiAgICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnXG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUuaW1nXG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmltZ1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkcml2ZXIgKCkge1xuICAgIGlmICghdGhpcy5fZHJpdmVyKSB7XG4gICAgICB0aGlzLl9kcml2ZXIgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kcml2ZXJcbiAgfVxuXG4gIGdldCB2ZWhpY2xlICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnZlaGljbGVLZXkpIHtcbiAgICAgIHRoaXMuX3ZlaGljbGUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEudmVoaWNsZUtleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZlaGljbGVcbiAgfVxuXG4gIGdldCBoYXNBY3RvciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hY3RvclxuICB9XG5cbiAgZ2V0IGhhc1ZlaGljbGUgKCkge1xuICAgIHJldHVybiAhIXRoaXMudmVoaWNsZVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUubmFtZVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5uYW1lIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSB0aGlzLmRhdGEubW92ID0gdGhpcy52ZWhpY2xlLm1vdlxuICAgICAgZWxzZSBpZiAodGhpcy5oYXNBY3RvcikgdGhpcy5kYXRhLm1vdiA9IHRoaXMuYWN0b3IubW92XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5tb3YgPSB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdlxuICB9XG5cbiAgZ2V0IGRleCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzRHJpdmVyKVxuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5kcml2ZXIuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgZWxzZSBpZiAodGhpcy5oYXNBY3RvcilcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEuZGV4KSkpIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kZXhcbiAgfVxuXG4gIGdldCBpc0NoYXNlciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5kYXRhLmNoYXNlclxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICBnZXQgc3BlZWRDaGVjayAoKSB7XG4gICAgY29uc3QgY2hlY2sgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSBjaGVjay5zY29yZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLnNjb3JlXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY2hlY2sucm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XG4gICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5IHx8IGNoZWNrLnJvbGwuaGFzQ2FyZCkge1xuICAgICAgICAgIGNoZWNrLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICAgICAgICBjaGVjay5jc3NDbGFzc2VzICs9ICdyb2xsZWQnXG4gICAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICAgICAgY2hlY2subW9kaWZpZXJDc3MgPSAndXBncmFkZSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2sucm9sbC5mYWlsZWQpIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ2Rvd25ncmFkZSdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuZmFpbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY2hlY2suaGFzTW9kaWZpZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICBjaGVjay5vcHRpb25zID0gW11cbiAgICAgIDtbJ2NvbiddLmZvckVhY2goYyA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzaXRjID0gdGhpcy5hY3Rvci5nZXRDaGFyYWN0ZXJpc3RpYyhjKVxuICAgICAgICBpZiAoY2hhcmFjdGVyaXNpdGM/LnZhbHVlKSBjaGVjay5vcHRpb25zLnB1c2goY2hhcmFjdGVyaXNpdGMubGFiZWwpXG4gICAgICB9KVxuXG4gICAgICB0aGlzLmFjdG9yLmRyaXZlU2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9KVxuXG4gICAgICB0aGlzLmFjdG9yLnBpbG90U2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9KVxuICAgICAgY2hlY2suaGFzT3B0aW9ucyA9ICEhY2hlY2sub3B0aW9ucy5sZW5ndGhcblxuICAgICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgICBsZXQgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgY29uc3QgZ2FtZUl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgICAgICBpZiAoZ2FtZUl0ZW0pIGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQoZ2FtZUl0ZW0ubmFtZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2l0ZW0nICYmIGl0ZW0udmFsdWUuZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubmFtZVxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2NoYXJhY3RlcmlzdGljJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgICAgICBjaGVjay5pc0NoYXJhY3RlcmlzdGljID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdhdHRyaWJ1dGUnXG4gICAgICAgICAgICBjaGVjay5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkge1xuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWUpXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2l0ZW0nICYmIGl0ZW0udmFsdWUuZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubmFtZVxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2NoYXJhY3RlcmlzdGljJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgICAgICBjaGVjay5pc0NoYXJhY3RlcmlzdGljID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdhdHRyaWJ1dGUnXG4gICAgICAgICAgICBjaGVjay5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgY2hlY2sucmVmID0gaXRlbVxuICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcbiAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0uYmFzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaGVjay5yb2xsZWQgJiYgIWNoZWNrLnNjb3JlKSBjaGVjay5jc3NDbGFzc2VzICs9ICcgaW52YWxpZCdcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG4iLCIvKiBnbG9iYWwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpXG4gICAgdGhpcy5fc2hlZXRUYWIgPSAnaXRlbXMnXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiAyOTAsXG4gICAgICBoZWlnaHQ6IDMwMCxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LXRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9pdGVtLXNoZWV0VjIuaHRtbCdcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKG9wdGlvbnMgPSB7fSkge1xuICAgIC8vIHRoaXMuaXRlbS5jaGVja1NraWxsUHJvcGVydGllcygpO1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5hY3RvciAhPT0gbnVsbFxuXG4gICAgaWYgKHRoaXMuaXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgcHJvcGVydHkuaWQgPSBrZXlcbiAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgIHByb3BlcnR5LmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgIGRhdGEuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgIH1cblxuICAgICAgZGF0YS5fZXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IHt9XG4gICAgICAgIGVyYS5pZCA9IGtleVxuICAgICAgICBlcmEubmFtZSA9IHZhbHVlXG4gICAgICAgIGVyYS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmVyYXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICBkYXRhLl9lcmFzLnB1c2goZXJhKVxuICAgICAgfVxuXG4gICAgICBkYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgZGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICAgIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmdcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXRcbiAgICAgIC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpO1xuICAvLyAgIGNvbnN0IGZvcm1BdHRycyA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSkuZGF0YS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QudmFsdWVzKGZvcm1BdHRycykucmVkdWNlKChvYmosIHYpID0+IHtcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XG4gIC8vICAgICBpZiAoL1tcXHNcXC5dLy50ZXN0KGspKSByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcIkF0dHJpYnV0ZSBrZXlzIG1heSBub3QgY29udGFpbiBzcGFjZXMgb3IgcGVyaW9kc1wiKTtcbiAgLy8gICAgIGRlbGV0ZSB2W1wia2V5XCJdO1xuICAvLyAgICAgb2JqW2tdID0gdjtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwge30pO1xuXG4gIC8vICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgd2hpY2ggYXJlIG5vIGxvbmdlciB1c2VkXG4gIC8vICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcykpIHtcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcbiAgLy8gICBmb3JtRGF0YSA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5maWx0ZXIoZSA9PiAhZVswXS5zdGFydHNXaXRoKFwiZGF0YS5hdHRyaWJ1dGVzXCIpKS5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAvLyAgICAgb2JqW2VbMF1dID0gZVsxXTtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwgeyBfaWQ6IHRoaXMub2JqZWN0Ll9pZCwgXCJkYXRhLmF0dHJpYnV0ZXNcIjogYXR0cmlidXRlcyB9KTtcblxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxuICAvLyAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpO1xuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi9pdGVtLXNoZWV0VjIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXQgZXh0ZW5kcyBDb0M3SXRlbVNoZWV0VjIge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MFxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEcmFnRHJvcCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdPY2N1cGF0aW9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcblxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWl0ZW0tZGVsZXRlJykuY2xpY2sodGhpcy5fb25Hcm91cEl0ZW1EZWxldGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5ncm91cC1jb250cm9sJykuY2xpY2sodGhpcy5fb25Hcm91cENvbnRyb2wuYmluZCh0aGlzKSlcblxuICAgIGNvbnN0IGRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5kcm9wcGFibGUnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIGRyYWdEcm9wLmJpbmQoaHRtbFswXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3Qgb3B0aW9uYWxTa2lsbCA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbGFzc0xpc3Q/LmNvbnRhaW5zKFxuICAgICAgJ29wdGlvbmFsLXNraWxscydcbiAgICApXG4gICAgY29uc3Qgb2wgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xvc2VzdCgnb2wnKVxuICAgIGNvbnN0IGluZGV4ID0gb2w/LmRhdGFzZXQ/Lmdyb3VwXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICA6IFtdXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzKVxuICAgICAgOiBbXVxuXG4gICAgZGF0YUxpc3QuZm9yRWFjaChhc3luYyBpdGVtID0+IHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5kYXRhKSByZXR1cm5cbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0uZGF0YS50eXBlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIG1haW4gZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChncm91cHNbaW5kZXhdLnNraWxscy5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIGdyb3VwIGRvbid0IGFkZCBpdFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZ3JvdXBzW2luZGV4XS5za2lsbHMuY29uY2F0KFtpdGVtLmRhdGFdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2FtZSBza2lsbCBpcyBpbiBvbmUgb2YgdGhlIGdyb3VwIHJlbW92ZSBpdCBmcm9tIHRoZSBncm91cHNcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ3JvdXBzW2ldLnNraWxscy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIGVsID0+IGVsLm5hbWUgPT09IGl0ZW0uZGF0YS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0uZGF0YSkpXG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25Hcm91cENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICAvLyBBZGQgbmV3IGRhbWFnZSBjb21wb25lbnRcbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuZ3JvdXBzJzogZ3JvdXBzLmNvbmNhdChbeyBvcHRpb25zOiAwLCBza2lsbHM6IFtdIH1dKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlbW92ZS1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3VwcylcbiAgICAgIGNvbnN0IG9sID0gYS5jbG9zZXN0KCcuaXRlbS1saXN0Lmdyb3VwJylcbiAgICAgIGdyb3Vwcy5zcGxpY2UoTnVtYmVyKG9sLmRhdGFzZXQuZ3JvdXApLCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLmRhdGEuZGVzY3JpcHRpb25cblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGEudmFsdWV9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBjaGF0RGF0YS5wcm9wZXJ0aWVzLmZvckVhY2gocCA9PiBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSk7XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtSW5kZXggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAucGFyZW50cygnLml0ZW0nKVxuICAgICAgLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGlmIChpdGVtSW5kZXgpIGF3YWl0IHRoaXMucmVtb3ZlSXRlbShpdGVtSW5kZXgsIGNvbGxlY3Rpb25OYW1lKVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBJdGVtRGVsZXRlIChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBvbCA9IGxpLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgIGNvbnN0IGdyb3VwcyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3VwcylcbiAgICBncm91cHNbTnVtYmVyKG9sLmRhdGFzZXQuZ3JvdXApXS5za2lsbHMuc3BsaWNlKFxuICAgICAgTnVtYmVyKGxpLmRhdGFzZXQuaXRlbUluZGV4KSxcbiAgICAgIDFcbiAgICApXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlSXRlbSAoaXRlbUlkLCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxuICAgIH0pXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICAgIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvb2NjdXBhdGlvbi5odG1sJ1xuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxscy5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhc2V0Lml0ZW1JZFxuICAgIH0pXG5cbiAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ0l0ZW0nLCBkYXRhOiBza2lsbCB9XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5pc093bmVkID0gdGhpcy5pdGVtLmlzT3duZWRcblxuICAgIGNvbnN0IG9wdGlvbm5hbCA9IFtdXG4gICAgY29uc3QgbWFuZGF0b3J5ID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGRhdGEuZGF0YS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBpZiAoY2FyYWMubXVsdGlwbGllcikge1xuICAgICAgICBjb25zdCBjYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiBjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG9wdGlvbm5hbC5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmICFjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG1hbmRhdG9yeS5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBkYXRhLnNraWxsTGlzdEVtcHR5ID0gZGF0YS5kYXRhLnNraWxscy5sZW5ndGggPT09IDBcbiAgICBkYXRhLmRhdGEuc2tpbGxzLmZvckVhY2goc2tpbGwgPT4ge1xuICAgICAgLy8gRm9yIGVhY2ggc2tpbGwgaWYgaXQncyBhIHNwZWMgYW5kIHNwYWMgbmFtZSBub3QgaW5jbHVkZWQgaW4gdGhlIG5hbWUgYWRkIGl0XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICkge1xuICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICB9KVxuXG4gICAgZGF0YS5kYXRhLnNraWxscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5kaXNwbGF5TmFtZS5sb2NhbGVDb21wYXJlKGIuZGlzcGxheU5hbWUpXG4gICAgfSlcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uaXNFbXB0eSA9XG4gICAgICAgIGRhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscy5sZW5ndGggPT09IDBcbiAgICAgIGRhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscy5mb3JFYWNoKHNraWxsID0+IHtcbiAgICAgICAgLy8gRm9yIGVhY2ggc2tpbGwgb2YgZWFjaCBzdWIgZ3JvdXAgaWYgaXQncyBhIHNwZWMgYW5kIHNwYWMgbmFtZSBub3QgaW5jbHVkZWQgaW4gdGhlIG5hbWUgYWRkIGl0XG4gICAgICAgIGlmIChcbiAgICAgICAgICBza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uICYmXG4gICAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2tpbGwuZGlzcGxheU5hbWUgPSBgJHtza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9ufSAoJHtza2lsbC5uYW1lfSlgXG4gICAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICAgIH0pXG5cbiAgICAgIGRhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmRpc3BsYXlOYW1lLmxvY2FsZUNvbXBhcmUoYi5kaXNwbGF5TmFtZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChtYW5kYXRvcnkubGVuZ3RoKSBkYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gbWFuZGF0b3J5LmpvaW4oJyArICcpXG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgZGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IGAgKyAoJHtvcHRpb25uYWwuam9pbihvclN0cmluZyl9KWBcbiAgICB9XG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgIW1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIGRhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBvcHRpb25uYWwuam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gPyBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIC8vIFRPRE86IFRoaXMgY2FuIGJlIHJlbW92ZWQgb25jZSAwLjcueCBpcyByZWxlYXNlIGNoYW5uZWxcbiAgICBpZiAoIWZvcm1EYXRhLmRhdGEpIGZvcm1EYXRhID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKVxuXG4gICAgaWYgKGZvcm1EYXRhLmRhdGEuZ3JvdXBzKSB7XG4gICAgICBmb3JtRGF0YS5kYXRhLmdyb3VwcyA9IE9iamVjdC52YWx1ZXMoZm9ybURhdGEuZGF0YT8uZ3JvdXBzIHx8IHt9KVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBmb3JtRGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHNcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG4vLyBpbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnO1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dXBTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuXG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgIC8vICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJyk7XG4gICAgLy8gICBjb25zdCBpdGVtRGF0YSA9IHRoaXMuZ2V0SXRlbShsaS5kYXRhKCdpdGVtSWQnKSwgJ3NraWxscycpO1xuICAgIC8vICAgZGVsZXRlIGl0ZW1EYXRhLl9pZDtcbiAgICAvLyAgIGRlbGV0ZSBpdGVtRGF0YS5mb2xkZXI7XG4gICAgLy8gICBjb25zdCBpdGVtID0gbmV3IENvQzdJdGVtKGl0ZW1EYXRhKTtcbiAgICAvLyAgIGF3YWl0IGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpOyAvL21hcmNoZSBwYXMgISFcbiAgICAvLyB9KTtcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgIDogW11cbiAgICBkYXRhTGlzdC5mb3JFYWNoKGFzeW5jIGl0ZW0gPT4ge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLmRhdGEpIHJldHVyblxuICAgICAgaWYgKFxuICAgICAgICAhWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS5kYXRhLnR5cGUpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5kYXRhLm5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29sbGVjdGlvbi5wdXNoKGR1cGxpY2F0ZShpdGVtLmRhdGEpKVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVTZWN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuYmlvU2VjdGlvbnMpXG4gICAgYmlvLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zKVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLmJpb1NlY3Rpb25zJzogYmlvIH0pXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5kYXRhLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gY2hhdERhdGEucHJvcGVydGllcy5mb3JFYWNoKHAgPT4gcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkpO1xuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIC5kYXRhKCdpdGVtLWlkJylcbiAgICBpZiAoaXRlbUluZGV4KSBhd2FpdCB0aGlzLnJlbW92ZUl0ZW0oaXRlbUluZGV4LCBjb2xsZWN0aW9uTmFtZSlcbiAgfVxuXG4gIGdldEl0ZW0gKGl0ZW1JZCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxuICAgIH0pXG4gIH1cblxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gaXRlbUlkXG4gICAgfSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgICAgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2V0dXAnXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDUzMCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCdcbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5pdGVtcy5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhc2V0Lml0ZW1JZFxuICAgIH0pXG5cbiAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ0l0ZW0nLCBkYXRhOiBza2lsbCB9XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLmlzT3duZWQgPSB0aGlzLml0ZW0uaXNPd25lZFxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIC8vIGRhdGEuZGF0YS5pdGVtcyA9IGR1cGxpY2F0ZSggZGF0YS5kYXRhLnNraWxscyk7XG4gICAgLy8gdGhpcy5pdGVtLnVwZGF0ZSggeyBbJ2RhdGEuaXRlbXMnXSA6IGR1cGxpY2F0ZSggZGF0YS5kYXRhLnNraWxscyl9KTtcblxuICAgIGRhdGEuc2tpbGxzID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgIGRhdGEub3RoZXJJdGVtcyA9IGRhdGEuZGF0YS5pdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLnNraWxscy5sZW5ndGggPT09IDBcbiAgICBkYXRhLnNraWxscy5mb3JFYWNoKHNraWxsID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbiAmJlxuICAgICAgICAhc2tpbGwubmFtZS5pbmNsdWRlcyhza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uKVxuICAgICAgKSB7XG4gICAgICAgIHNraWxsLmRpc3BsYXlOYW1lID0gYCR7c2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7c2tpbGwubmFtZX0pYFxuICAgICAgfSBlbHNlIHNraWxsLmRpc3BsYXlOYW1lID0gc2tpbGwubmFtZVxuICAgIH0pXG5cbiAgICBkYXRhLnNraWxscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5kaXNwbGF5TmFtZS5sb2NhbGVDb21wYXJlKGIuZGlzcGxheU5hbWUpXG4gICAgfSlcblxuICAgIGRhdGEuZXJhcyA9IHt9XG4gICAgZGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBpZiAoIWRhdGEuZGF0YS5lcmFzW2tleV0pIHtcbiAgICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XSA9IHt9XG4gICAgICAgIGRhdGEuZGF0YS5lcmFzW2tleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgfVxuICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XS5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XS5pbnRlcm5hbE5hbWUgPSB2YWx1ZVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLmVyYXMpKSB7XG4gICAgICBpZiAoZW50cnlbMV0uc2VsZWN0ZWQpIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChlbnRyeVsxXS5uYW1lKVxuICAgIH1cblxuICAgIGRhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gVE9ETzogVGhpcyBjYW4gYmUgcmVtb3ZlZCBvbmNlIDAuNy54IGlzIHJlbGVhc2UgY2hhbm5lbFxuICAgIGlmICghZm9ybURhdGEuZGF0YSkgZm9ybURhdGEgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpXG5cbiAgICBpZiAoZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucyA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIGZvcm1EYXRhLmRhdGE/LmJpb1NlY3Rpb25zIHx8IFtdXG4gICAgICApXG4gICAgICAvLyBmb3IobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgLy8gICBmb3JtRGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSk7XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCcpIHtcbiAgICAgIGZvcm1EYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQgPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQgPSAhZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAuY2hlY2tlZFxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LXRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBgc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy8ke3RoaXMuaXRlbS5kYXRhLnR5cGV9LXNoZWV0Lmh0bWxgXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5hY3RvciAhPT0gbnVsbFxuXG4gICAgaWYgKHRoaXMuaXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgcHJvcGVydHkuaWQgPSBrZXlcbiAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgIHByb3BlcnR5LmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgIGRhdGEuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgIH1cblxuICAgICAgZGF0YS5fZXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IHt9XG4gICAgICAgIGVyYS5pZCA9IGtleVxuICAgICAgICBlcmEubmFtZSA9IHZhbHVlXG4gICAgICAgIGVyYS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmVyYXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICBkYXRhLl9lcmFzLnB1c2goZXJhKVxuICAgICAgfVxuXG4gICAgICBkYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgZGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICAgIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmdcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXRcbiAgICAgIC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpO1xuICAvLyAgIGNvbnN0IGZvcm1BdHRycyA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSkuZGF0YS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QudmFsdWVzKGZvcm1BdHRycykucmVkdWNlKChvYmosIHYpID0+IHtcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XG4gIC8vICAgICBpZiAoL1tcXHNcXC5dLy50ZXN0KGspKSByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcIkF0dHJpYnV0ZSBrZXlzIG1heSBub3QgY29udGFpbiBzcGFjZXMgb3IgcGVyaW9kc1wiKTtcbiAgLy8gICAgIGRlbGV0ZSB2W1wia2V5XCJdO1xuICAvLyAgICAgb2JqW2tdID0gdjtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwge30pO1xuXG4gIC8vICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgd2hpY2ggYXJlIG5vIGxvbmdlciB1c2VkXG4gIC8vICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcykpIHtcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcbiAgLy8gICBmb3JtRGF0YSA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5maWx0ZXIoZSA9PiAhZVswXS5zdGFydHNXaXRoKFwiZGF0YS5hdHRyaWJ1dGVzXCIpKS5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAvLyAgICAgb2JqW2VbMF1dID0gZVsxXTtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwgeyBfaWQ6IHRoaXMub2JqZWN0Ll9pZCwgXCJkYXRhLmF0dHJpYnV0ZXNcIjogYXR0cmlidXRlcyB9KTtcblxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxuICAvLyAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpO1xuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc3BlbGwnXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsLmh0bWwnXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuY2FzdGluZ0Nvc3QgPSAnJ1xuXG4gICAgaWYgKGRhdGEuZGF0YS5jb3N0Lm1wKSB7XG4gICAgICBkYXRhLmNhc3RpbmdDb3N0ICs9IGAke2RhdGEuZGF0YS5jb3N0Lm1wfSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTVAnXG4gICAgICApfTtgXG4gICAgfVxuICAgIGlmIChkYXRhLmRhdGEuY29zdC5zYW4pIHtcbiAgICAgIGRhdGEuY2FzdGluZ0Nvc3QgKz0gYCR7ZGF0YS5kYXRhLmNvc3Quc2FufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuU0FOJ1xuICAgICAgKX07YFxuICAgIH1cbiAgICBpZiAoZGF0YS5kYXRhLmNvc3QucG93KSB7XG4gICAgICBkYXRhLmNhc3RpbmdDb3N0ICs9IGAke2RhdGEuZGF0YS5jb3N0LnBvd30gJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDSEFSQUMuUE9XJ1xuICAgICAgKX07YFxuICAgIH1cbiAgICBpZiAoZGF0YS5kYXRhLmNvc3QuaHApIHtcbiAgICAgIGRhdGEuY2FzdGluZ0Nvc3QgKz0gYCR7ZGF0YS5kYXRhLmNvc3QuaHB9ICR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5IUCdcbiAgICAgICl9O2BcbiAgICB9XG4gICAgaWYgKGRhdGEuZGF0YS5jb3N0Lm90aGVyKSBkYXRhLmNhc3RpbmdDb3N0ICs9IGAke2RhdGEuZGF0YS5jb3N0Lm90aGVyfTtgXG4gICAgaWYgKGRhdGEuY2FzdGluZ0Nvc3QubGVuZ3RoKSB7XG4gICAgICBkYXRhLmNhc3RpbmdDb3N0ID0gZGF0YS5jYXN0aW5nQ29zdC5zbGljZSgwLCAtMSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5jYXN0aW5nQ29zdCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TcGVsbENhc3RpbmdDb3N0JylcbiAgICB9XG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3LnNwZWxsUHJvcGVydGllc1trZXldID8gQ09DNy5zcGVsbFByb3BlcnRpZXNba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U3RhdHVzU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3N0YXR1cyddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3RhdHVzLmh0bWwnXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1RhbGVudFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICd0YWxlbnQnXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3RhbGVudC5odG1sJ1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKCkge1xuICAgIC8vIHRoaXMuaXRlbS5jaGVja1NraWxsUHJvcGVydGllcygpO1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKioqKioqKioqKioqKioqKiovXG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3LnRhbGVudFR5cGVba2V5XSA/IENPQzcudGFsZW50VHlwZVtrZXldIDogbnVsbFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZmxhdHRlbk9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZVNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2FjdG9yJywgJ2l0ZW0nLCAndmVoaWNsZSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDIwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy92ZWhpY2xlLmh0bWwnLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5hY3RvcicsIGRyb3BTZWxlY3RvcjogJy5kcm9wWm9uZScgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5kYXRhLmRhdGEucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgZGF0YS5wcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybWVkVmVoaWNsZScpKVxuICAgIH1cbiAgICBkYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh1bmRlZmluZWQgPT09IGV4cGFuZGVkKSBkYXRhLmV4cGFuZGVkID0gdHJ1ZVxuICAgIGVsc2UgZGF0YS5leHBhbmRlZCA9IGV4cGFuZGVkXG4gICAgaWYgKGRhdGEuZXhwYW5kZWQpIHtcbiAgICAgIGRhdGEub3B0aW9ucy5oZWlnaHQgPSA0MjBcbiAgICB9IGVsc2UgZGF0YS5vcHRpb25zLmhlaWdodCA9ICdhdXRvJ1xuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgIC8vICAgaWYoIHZhbHVlKSBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goIENPQzcuYm9va1R5cGVba2V5XT9DT0M3LmJvb2tUeXBlW2tleV06bnVsbCk7XG4gICAgLy8gfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICApXG4gICAgbG9jYXRpb25zLnB1c2goeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9KVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMnOiBsb2NhdGlvbnMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZUFybW9yIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbiA9IGJ1dHRvbi5jbG9zZXN0KCcuYXJtb3InKVxuICAgIGNvbnN0IGluZGV4ID0gbG9jYXRpb24uZGF0YXNldC5pbmRleFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcbiAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICBpZiAodXBkYXRlRGF0YSkgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpXG5cbiAgICAvLyBIYW5kbGUgQXJtb3IgYXJyYXlcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3I/LmxvY2FsaXplZCkge1xuICAgICAgY29uc3QgYXJtb3IgPSBkYXRhLmRhdGE/LmF0dHJpYnMuYXJtb3JcbiAgICAgIGlmIChhcm1vcikge1xuICAgICAgICBhcm1vci5sb2NhdGlvbnMgPSBPYmplY3QudmFsdWVzKFxuICAgICAgICAgIGFybW9yPy5sb2NhdGlvbnMgfHwgdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwge31cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1dlYXBvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIGRhdGEuZHR5cGVzID0gWydTdHJpbmcnLCAnTnVtYmVyJywgJ0Jvb2xlYW4nXVxuICAgIC8qKiBNT0RJRiAwLjgueCAqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqIE1PRElGIDAuOC54ICovXG5cbiAgICBkYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmFjdG9yICE9IG51bGxcbiAgICBpZiAoZGF0YS5oYXNPd25lcikgZGF0YS5hY3RvcktleSA9IHRoaXMuaXRlbS5hY3Rvci5hY3RvcktleVxuXG4gICAgZGF0YS5jb21iYXRTa2lsbCA9IFtdXG4gICAgaWYgKGRhdGEuaGFzT3duZXIpIHtcbiAgICAgIGRhdGEuZmlyZWFybVNraWxscyA9IHRoaXMuYWN0b3IuZmlyZWFybVNraWxsc1xuICAgICAgZGF0YS5maWdodGluZ1NraWxscyA9IHRoaXMuYWN0b3IuZmlnaHRpbmdTa2lsbHNcbiAgICAgIGRhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIGRhdGEuY29tYmF0U2tpbGwuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBsZXQgbGNhXG4gICAgICAgIGxldCBsY2JcbiAgICAgICAgaWYgKGEuZGF0YS5wcm9wZXJ0aWVzICYmIGIuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgbGNhID0gYS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgICAgICAgPyBhLmRhdGEuc3BlY2lhbGl6YXRpb24udG9Mb3dlckNhc2UoKSArIGEubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICA6IGEubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgbGNiID0gYi5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgICAgICAgPyBiLmRhdGEuc3BlY2lhbGl6YXRpb24udG9Mb3dlckNhc2UoKSArIGIubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICA6IGIubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGNhID0gYS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICBsY2IgPSBiLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsY2EubG9jYWxlQ29tcGFyZShsY2IpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgIHByb3BlcnR5LmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICBkYXRhLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLml0ZW0uZGF0YS5kYXRhLnByaWNlKSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByaWNlID0ge31cblxuICAgIGRhdGEuX2VyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIGNvbnN0IGVyYSA9IHt9XG4gICAgICBpZiAoIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJpY2Vba2V5XSkgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZVtrZXldID0gMFxuICAgICAgZXJhLnByaWNlID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZVtrZXldXG4gICAgICBlcmEuaWQgPSBrZXlcbiAgICAgIGVyYS5uYW1lID0gdmFsdWVcbiAgICAgIGVyYS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmVyYXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgZGF0YS5fZXJhcy5wdXNoKGVyYSlcbiAgICB9XG4gICAgZGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy53ZWFwb24tcHJvcGVydHknKS5jbGljayh0aGlzLl9vblByb3BlcnR5Q2xpY2suYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqL1xuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0XG4gICAgICAucHJvcGVydHlcbiAgICBjb25zdCBzZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5zZXRcbiAgICBjb25zdCBlbGVtZW50TmFtZSA9IHNldCArICctJyArIHByb3BlcnR5SWRcbiAgICBjb25zdCBjaGVja2JveENvbnRyb2wgPSB0aGlzLmZvcm0uZWxlbWVudHMubmFtZWRJdGVtKGVsZW1lbnROYW1lKVxuXG4gICAgaWYgKGNoZWNrYm94Q29udHJvbC5jaGVja2VkKSBjaGVja2JveENvbnRyb2wuY2hlY2tlZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVja2JveENvbnRyb2wuY2hlY2tlZCA9IHRydWVcblxuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25Qcm9wZXJ0eUNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXRcbiAgICAgIC5wcm9wZXJ0eVxuICAgIGNvbnN0IHdlYXBvbklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuYWN0b3JLZXlcbiAgICBsZXQgd2VhcG9uID0gbnVsbFxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBDb0NBY3Rvci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpXG4gICAgICB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQod2VhcG9uSWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHdlYXBvbiA9IGdhbWUuaXRlbXMuZ2V0KHdlYXBvbklkKVxuICAgIH1cbiAgICBhd2FpdCB3ZWFwb24udG9nZ2xlUHJvcGVydHkocHJvcGVydHkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5pbXBvcnQgeyBjb25maWd1cmVEb2N1bWVudHMgfSBmcm9tICcuLi9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMnXG5pbXBvcnQgeyBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyB9IGZyb20gJy4uL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMnXG5pbXBvcnQgeyByZWdpc3RlclNldHRpbmdzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2hlZXRzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdpbml0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbmZpZ3VyZURvY3VtZW50cygpXG4gICAgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMoKVxuICAgIHJlZ2lzdGVyU2V0dGluZ3MoKVxuICAgIHJlZ2lzdGVyU2hlZXRzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cblxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZURvY3VtZW50cyAoKSB7XG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzID0gQ29DQWN0b3JcbiAgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyA9IHt9XG4gIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPSBDb0M3SXRlbVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgYm9vazogQ29DN0Jvb2tcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itc2tpbGxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtc2tpbGxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci13ZWFwb25zLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1iYWNrZ3JvdW5kLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1za2lsbHMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXdlYXBvbnMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NoYXJhY3Rlci1kZXZlbG9wbWVudC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL3ZpdGFscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY29tYmF0Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmhicydcbiAgXVxuXG4gIC8qKiBMb2FkIHRoZSB0ZW1wbGF0ZSBwYXJ0cyAqL1xuICByZXR1cm4gbG9hZFRlbXBsYXRlcyh0ZW1wbGF0ZVBhdGhzKVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gIC8qKlxuICAgKiBSdWxlc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdwdWxwUnVsZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlB1bHBSdWxlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlB1bHBSdWxlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaycsXG4gICAgaGludDogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2tIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXG4gICAgc2NvcGU6ICd3b2xyZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCB0aGUgaW5pdGlhdGl2ZSBydWxlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2Jhc2ljJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYmFzaWM6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUJhc2ljJyxcbiAgICAgIG9wdGlvbmFsOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVPcHRpb25hbCdcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBydWxlID0+IF9zZXRJbml0aWF0aXZlT3B0aW9ucyhydWxlKVxuICB9KVxuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0RGljZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dCcsXG4gICAgaGludDogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBSb2xsIGN1c3RvbWlzYWlvbnNcbiAgICovXG4gIC8qKiBTdGFuZGJ5IHJvbGxzIG1hZGUgYnkgR00gZnJvbSBwbGF5ZXIgc2hlZXQgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzdGFuYnlHTVJvbGxzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGFuYnlHTVJvbGxzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xsc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCBkaWNlIG1vZGlmaWVyICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IHRocmVzaG9sZCBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdyZWd1bGFyJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgcmVndWxhcjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVJlZ3VsYXInLFxuICAgICAgdW5rbm93bjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVVua25vd24nXG4gICAgfVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0JyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdldmVyeW9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIG5vYm9keTogJ1NFVFRJTkdTLkRvTm90QWR2aXNlJyxcbiAgICAgIG93bmVyczogJ1NFVFRJTkdTLkFkdmlzZU93bmVyc09ubHknLFxuICAgICAgZXZlcnlvbmU6ICdTRVRUSU5HUy5BZHZpc2VBbGxQbGF5ZXInXG4gICAgfVxuICB9KVxuXG4gIC8qKlxuICAgKiBDaGF0IENhcmRzXG4gICAqL1xuICAvKiogU2V0IHRoZSBuZWVkIHRvIGRpc3BsYXkgYWN0b3IgaW1hZ2Ugb24gY2hhdCBjYXJkcyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUFjdG9yT25DYXJkJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcGxheUFjdG9yT25DYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5UmVzdWx0VHlwZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheVJlc3VsdFR5cGUnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IHRoZSB1c2Ugb2YgdG9rZW4gaW5zdGVhZCBvZiBwb3J0cmFpdHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VUb2tlbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVXNlVG9rZW4nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VUb2tlbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIFNjZW5lIFNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5FbmFibGVTdGF0dXNJY29ucycsXG4gICAgaGludDogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2dyaWRTcGFjZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlJlc3RyaWN0R3JpZFNwYWNlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlJlc3RyaWN0R3JpZFNwYWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIFNoZWV0IHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheVBsYXllck5hbWVPblNoZWV0JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIHVubG9jayB0aGUgc2hlZXQgb3V0c2lkZSBvZiBjcmVhdGlvbiBtb2RlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5QbGF5ZXJVbmxvY2tTaGVldE1vZGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnYWx3YXlzJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYWx3YXlzOiAnU0VUVElOR1MuQWx3YXlzRWRpdGFibGUnLFxuICAgICAgY3JlYXRpb246ICdTRVRUSU5HUy5DcmVhdGlvbk1vZGVPbmx5JyxcbiAgICAgIG5ldmVyOiAnU0VUVElOR1MuTmV2ZXJFZGl0YWJsZSdcbiAgICB9XG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gbW9kaWZ5IHN0YXR1cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeScsXG4gICAgaGludDogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKSA0IHJlcGVhdFwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3NsaWNlJyxcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGNob2ljZXM6IHtcbiAgICAgICAgc2xpY2U6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kU2xpY2UnLFxuICAgICAgICBhdXRvOiAnU0VUVElOR1MuQmFja2dyb3VuZEF1dG8nLFxuICAgICAgICBjb250YWluOiAnU0VUVElOR1MuQmFja2dyb3VuZENvbnRhaW4nLFxuICAgICAgICBjb3ZlcjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb3ZlcidcbiAgICAgIH1cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvdGVudGFjbGVzLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSg0Myw1NSw4MywxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udEJvbGQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udFNpemUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAxNixcbiAgICAgIHR5cGU6IE51bWJlclxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogV2VhcG9uc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkQW1tbycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tbycsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW9IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBEaWNlIFNvIE5pY2VcbiAgICovXG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeW5jRGljZTNkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLlN5bmNEaWNlM0QnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLlN5bmNEaWNlM0RIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGNvbnN0IFt2ZXJzaW9uXSA9IGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5kYXRhLnZlcnNpb24uc3BsaXQoJy4nKVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHZlcnNpb24pKSAmJiBOdW1iZXIodmVyc2lvbikgPj0gMykge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVCb251cycsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzJyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzSGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYnJvbnplJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVQZW5hbHR5Jywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eScsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5SGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYmxvb2Rtb29uJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXZlbG9wZXIgYW5kIGRlYnVnIHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlYnVnbW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVidWdNb2RlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVidWdNb2RlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcblxuICAvKipcbiAgICogT3RoZXIgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xuICAgIG5hbWU6ICdEZXYgcGhhc2VkIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0NoYXIgY3JlYXRpb24gYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHtcbiAgICBuYW1lOiAnU3lzdGVtIHVwZGF0ZSB2ZXJzaW9uJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAnMC4yJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3hwRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRW5hYmxlIFhQIGdhaW4nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIC8qKiBTZXQgYW4gaW5pdGlhdGl2ZSBmb3JtdWxhIGZvciB0aGUgc3lzdGVtICovXG4gIENPTkZJRy5Db21iYXQuaW5pdGlhdGl2ZSA9IHtcbiAgICBmb3JtdWxhOiAnQGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAgIGRlY2ltYWxzOiA0XG4gIH1cbiAgQ09ORklHLmRlYnVnLmhvb2tzID0gISFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWJ1Z21vZGUnKVxuICBmdW5jdGlvbiBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMgKHJ1bGUpIHtcbiAgICBsZXQgZGVjaW1hbHMgPSAwXG4gICAgc3dpdGNoIChydWxlKSB7XG4gICAgICBjYXNlICdvcHRpb25hbCc6XG4gICAgICAgIGRlY2ltYWxzID0gMlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYmFzaWMnOlxuICAgICAgICBkZWNpbWFscyA9IDBcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgICAgZm9ybXVsYTogbnVsbCxcbiAgICAgIGRlY2ltYWxzOiBkZWNpbWFsc1xuICAgIH1cbiAgfVxuICBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSlcblxuICBDT05GSUcuRGljZS50ZXJtcy50ID0gQ29DN0RlY2FkZXJEaWVcbn1cbiIsIi8qIGdsb2JhbCBBY3RvcnMsIEl0ZW1zLCBJdGVtU2hlZXQgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2Jhc2UuanMnXG5pbXBvcnQgeyBDb0M3QXJjaGV0eXBlU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvYXJjaGV0eXBlLmpzJ1xuaW1wb3J0IHsgQ29DN0Jvb2tTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2FjdG9yLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0VjIgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2NoYXNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN09jY3VwYXRpb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9vY2N1cGF0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHVwU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2V0dXAuanMnXG5pbXBvcnQgeyBDb0M3U2tpbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9za2lsbC5qcydcbmltcG9ydCB7IENvQzdTcGVsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NwZWxsLmpzJ1xuaW1wb3J0IHsgQ29DN1N0YXR1c1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3N0YXR1cy5qcydcbmltcG9ydCB7IENvQzdUYWxlbnRTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN1dlYXBvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcbiAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIENvQzdBY3RvclNoZWV0KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xuICAgIHR5cGVzOiBbJ25wYyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1ZlaGljbGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ3ZlaGljbGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDcmVhdHVyZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFyYWN0ZXJTaGVldCwgeyB0eXBlczogWydjaGFyYWN0ZXInXSB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFyYWN0ZXJTaGVldFYyLCB7XG4gICAgdHlwZXM6IFsnY2hhcmFjdGVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgSXRlbVNoZWV0KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NraWxsU2hlZXQsIHtcbiAgICB0eXBlczogWydza2lsbCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3V2VhcG9uU2hlZXQsIHtcbiAgICB0eXBlczogWyd3ZWFwb24nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0Jvb2tTaGVldCwge1xuICAgIHR5cGVzOiBbJ2Jvb2snXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NwZWxsU2hlZXQsIHtcbiAgICB0eXBlczogWydzcGVsbCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VGFsZW50U2hlZXQsIHtcbiAgICB0eXBlczogWyd0YWxlbnQnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1N0YXR1c1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3RhdHVzJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdPY2N1cGF0aW9uU2hlZXQsIHtcbiAgICB0eXBlczogWydvY2N1cGF0aW9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdBcmNoZXR5cGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ2FyY2hldHlwZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2V0dXBTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NldHVwJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFzZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY2hhc2UnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldCwgeyB0eXBlczogWydpdGVtJ10gfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXRWMiwge1xuICAgIHR5cGVzOiBbJ2l0ZW0nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxufVxuIiwiaW1wb3J0ICogYXMgSW5pdCBmcm9tICcuL2luaXQuanMnXG5pbXBvcnQgKiBhcyBSZWFkeSBmcm9tICcuL3JlYWR5LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyQWN0b3JTaGVldCBmcm9tICcuL3JlbmRlci1hY3Rvci1zaGVldC5qcydcbmltcG9ydCAqIGFzIFJlbmRlckNoYXRNZXNzYWdlIGZyb20gJy4vcmVuZGVyLWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckRpYWxvZyBmcm9tICcuL3JlbmRlci1kaWFsb2cuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJJdGVtU2hlZXQgZnJvbSAnLi9yZW5kZXItaXRlbS1zaGVldC5qcydcblxuZXhwb3J0IGNvbnN0IENvQzdIb29rcyA9IHtcbiAgbGlzdGVuICgpIHtcbiAgICBJbml0Lmxpc3RlbigpXG4gICAgUmVhZHkubGlzdGVuKClcbiAgICBSZW5kZXJBY3RvclNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcbiAgICBSZW5kZXJEaWFsb2cubGlzdGVuKClcbiAgICBSZW5kZXJJdGVtU2hlZXQubGlzdGVuKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnQ2FsbCBvZiBDdGh1bGh1IDd0aCBFZGl0aW9uIHwgUmVhZHknKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzLCB1aSAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgaWYgKGRhdGEuZG9jdW1lbnQudHlwZSA9PT0gJ3ZlaGljbGUnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1RoaXMgZmVhdHVyZSBpcyBhIHdvcmsgaW4gcHJvZ3Jlc3MgYW5kIGl0cyB1c2UgaXMgc3RpbGwgbm90IHJlY29tbWVuZGVkLicpXG4gICAgICBhd2FpdCBkYXRhLmNsb3NlKClcbiAgICAgIGF3YWl0IGRhdGEuY2xvc2UoKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKCkgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJEaWFsb2cnLCAoZGlhbG9nLCBodG1sKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGh0bWwuZmluZCgnZm9ybScpXG4gICAgaWYgKGZvcm0uaXMoJyNlbnRpdHktY3JlYXRlJykgJiYgZm9ybS5maW5kKCdzZWxlY3QnKS5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcbiAgICAgIGNvbnN0IGVudGl0eVNvcnRlZExpc3QgPSBbXVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVudGl0eU9wdGlvbi50ZXh0Q29udGVudD8uY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIChnYW1lLmkxOG4uaGFzKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApKSB7XG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5U29ydGVkTGlzdC5wdXNoKGVudGl0eU9wdGlvbilcbiAgICAgIH0pXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuZW1wdHkoKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmFwcGVuZChcbiAgICAgICAgZW50aXR5U29ydGVkTGlzdC5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PlxuICAgICAgICAgIGZpcnN0LmlubmVyVGV4dC5sb2NhbGVDb21wYXJlKHNlY29uZC5pbm5lclRleHQpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdhY3RvcicpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnY2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYm9vaycpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnaXRlbScpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzLCB1aSAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSlcbiAgICBpZiAoZGF0YS5kb2N1bWVudC50eXBlID09PSAnY2hhc2UnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1RoaXMgZmVhdHVyZSBpcyBhIHdvcmsgaW4gcHJvZ3Jlc3MgYW5kIGl0cyB1c2UgaXMgc3RpbGwgbm90IHJlY29tbWVuZGVkLicpXG4gICAgICBhd2FpdCBkYXRhLmNsb3NlKClcbiAgICAgIGF3YWl0IGRhdGEuY2xvc2UoKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCAkLCBDb21iYXQsIENPTkZJRywgQ09OU1QsIGZyb21VdWlkLCBnYW1lLCBIb29rcywgdGlueU1DRSwgdWkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldFYyIH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbWJhdCwgcm9sbEluaXRpYXRpdmUgfSBmcm9tICcuL2NvbWJhdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IFVwZGF0ZXIgfSBmcm9tICcuL3VwZGF0ZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi9hcHBzL3BhcnNlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TWVudSB9IGZyb20gJy4vbWVudS5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NhbnZhcyB9IGZyb20gJy4vYXBwcy9jYW52YXMuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3SG9va3MgfSBmcm9tICcuL2hvb2tzL2luZGV4LmpzJ1xuaW1wb3J0ICogYXMgRGljZUJvdCBmcm9tICcuL2RpY2Vib3QuanMnXG5pbXBvcnQgJy4uL3N0eWxlcy9zeXN0ZW0vaW5kZXgubGVzcydcblxuSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzeXN0ZW1UYWIgPSAkKGFwcC5mb3JtKS5maW5kKCcudGFiW2RhdGEtdGFiPXN5c3RlbV0nKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5wdWxwUnVsZXNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJ1bGVzJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnc2VsZWN0W25hbWU9Q29DN1xcXFwuaW5pdGlhdGl2ZVJ1bGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUluaXRpYXRpdmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN0YW5ieUdNUm9sbHNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJvbGwnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlBY3Rvck9uQ2FyZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlQ2hhdENhcmRzJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5lbmFibGVTdGF0dXNJY29uc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2NlbmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2hlZXQnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3JlZ2FyZFVzZVBlclJvdW5kXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVXZWFwb24nKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN5bmNEaWNlM2RdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURpY2VTb05pY2UnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRlYnVnbW9kZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGV2ZWxvcGVyRGVidWcnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdzZWxlY3RbbmFtZT1Db0M3XFxcXC5ib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsVGFibGUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG59KVxuXG5Ib29rcy5vbmNlKCdkaWNlU29OaWNlUmVhZHknLCBkaWNlM2QgPT4ge1xuICBkaWNlM2QuYWRkRGljZVByZXNldChcbiAgICB7XG4gICAgICB0eXBlOiAnZHQnLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9LFxuICAgICdkdCdcbiAgKVxufSlcblxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgZ2FtZS5Db0M3ID0ge1xuICAgIG1hY3Jvczoge1xuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXG4gICAgICB3ZWFwb25DaGVjazogQ29DN1V0aWxpdGllcy53ZWFwb25DaGVja01hY3JvLFxuICAgICAgY2hlY2s6IENvQzdVdGlsaXRpZXMuY2hlY2tNYWNyb1xuICAgIH0sXG4gICAgY2FyZHM6IHtcbiAgICAgIERhbWFnZUNhcmQ6IERhbWFnZUNhcmRcbiAgICB9XG4gIH1cbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXG59KVxuXG5Ib29rcy5vbigncmVuZGVyQ29tYmF0VHJhY2tlcicsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkRpY2VCb3QubGlzdGVuKClcbkNvQzdIb29rcy5saXN0ZW4oKVxuXG5Ib29rcy5vbmNlKCdzZXR1cCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxuICBjb25zdCB0b0xvY2FsaXplID0gW1xuICAgICdzcGVsbFByb3BlcnRpZXMnLFxuICAgICdib29rVHlwZScsXG4gICAgJ3RhbGVudFR5cGUnLFxuICAgICdvY2N1cGF0aW9uUHJvcGVydGllcycsXG4gICAgJ3N0YXR1c1R5cGUnXG4gIF1cblxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xuICAgIGNvbnN0IGxvY2FsaXplZCA9IE9iamVjdC5lbnRyaWVzKENPQzdbb10pLm1hcChlID0+IHtcbiAgICAgIHJldHVybiBbZVswXSwgZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pXVxuICAgIH0pXG4gICAgQ09DN1tvXSA9IGxvY2FsaXplZC5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAgICAgb2JqW2VbMF1dID0gZVsxXVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9XG5cbiAgbGV0IGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KHQgPT4gdC5pZCA9PT0gJ2RlYWQnKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleCh0ID0+IHQuaWQgPT09ICd1bmNvbnNjaW91cycpXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9rbm9ja2VkLW91dC1zdGFycy5zdmcnXG4gIH1cbiAgQ09ORklHLnN0YXR1c0VmZmVjdHMudW5zaGlmdChcbiAgICB7XG4gICAgICBpZDogJ2JvdXRPZk1hZG5lc3MnLFxuICAgICAgbGFiZWw6ICdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnaW5zYW5pdHknLFxuICAgICAgbGFiZWw6ICdDb0M3Lkluc2FuaXR5TmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90ZW50YWNsZXMtc2t1bGwuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjcml0aWNhbFdvdW5kcycsXG4gICAgICBsYWJlbDogJ2NyaXRpY2FsV291bmRzJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2FybS1zbGluZy5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2R5aW5nJyxcbiAgICAgIGxhYmVsOiAnZHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCBhc3luYyAoYmFyLCBkYXRhLCBzbG90KSA9PlxuICBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbilcblxuSG9va3Mub24oJ3JlbmRlckNoYXRMb2cnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q2hhdC5jaGF0TGlzdGVuZXJzKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDaGF0LnJlbmRlck1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCd1cGRhdGVDaGF0TWVzc2FnZScsIChjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpID0+XG4gIENvQzdDaGF0Lm9uVXBkYXRlQ2hhdE1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKVxuKVxuXG5Ib29rcy5vbigncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IFVwZGF0ZXIuY2hlY2tGb3JVcGRhdGUoKVxuXG4gIC8vIGdhbWUuQ29DNy5tZW51cyA9IG5ldyBDb0M3TWVudSgpO1xuXG4gIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIoKVxuXG4gIGdhbWUuc29ja2V0Lm9uKCdzeXN0ZW0uQ29DNycsIGFzeW5jIGRhdGEgPT4ge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICd1cGRhdGVDaGFyJykgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlID09PSBkYXRhLnR5cGUpIHtcbiAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgfVxuXG4gICAgICBpZiAoQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlID09PSBkYXRhLnR5cGUpIHtcbiAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2ludm9rZScpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGRhdGEuaXRlbSlcbiAgICAgICAgaXRlbVtkYXRhLm1ldGhvZF0oZGF0YS5kYXRhKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhcIjogXCJQaG9iaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhcIjogXCJNYW5pYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBtYW5pYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGVcIjogXCJTYW1wbGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlXCI6IFwiU2FtcGxlIE1hbmlhcyB0YWJsZVwiLFxuXG4gIGZ1bmN0aW9uIF90YWJsZVNldHRpbmdzQ2hhbmdlZCAodGFibGUsIGlkKSB7XG4gICAgaWYgKGlkID09PSAnbm9uZScpIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gbnVsbFxuICAgIGVsc2UgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBnYW1lLnRhYmxlcy5nZXQoaWQpXG4gIH1cblxuICAvLyBmdW5jdGlvbiBfdGFibGVJbmRleENoYW5nZWQoIHRhYmxlLCBpbmRleCl7XG4gIC8vICBnYW1lLkNvQzcudGFibGVzW3RhYmxlXT1pbmRleDtcbiAgLy8gfVxuXG4gIGNvbnN0IHRhYmxlQ2hvaWNlID0geyBub25lOiAnU0VUVElOR1MuTGV0S2VlcGVyRGVjaWRlJyB9XG4gIGdhbWUudGFibGVzLmZvckVhY2godCA9PiB7XG4gICAgdGFibGVDaG9pY2VbdC5kYXRhLl9pZF0gPSB0LmRhdGEubmFtZVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICAgICAgICApLFxuICAgIGJvdXRPZk1hZG5lc3NfUmVhbFRpbWU6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpID09PSAnbm9uZSdcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZ2FtZS50YWJsZXMuZ2V0KFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICAgIClcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzSW5kZXg6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKSxcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXG4gIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVBY3RvcicsIChjcmVhdGVEYXRhKSA9PiBDb0NBY3Rvci5pbml0VG9rZW4oIGNyZWF0ZURhdGEpKTtcblxuLy8gQ2FsbGVkIG9uIGNsb3NpbmcgYSBjaGFyYWN0ZXIgc2hlZXQgdG8gbG9jayBpdCBvbiBnZXR0aW5nIGl0IHRvIGRpc3BsYXkgdmFsdWVzXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXG5Ib29rcy5vbigncmVuZGVyQ29DN0NyZWF0dXJlU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q3JlYXR1cmVTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNvQzdOUENTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuLy8gSG9va3Mub24oJ3VwZGF0ZUFjdG9yJywgKGFjdG9yLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpKTtcbi8vIEhvb2tzLm9uKCd1cGRhdGVUb2tlbicsIChzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpKTtcblxuSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgQ29DN1V0aWxpdGllcy5QYXJzZUNoYXRFbnRyeSlcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbihcInJlbmRlckNoYXRMb2dcIiwgKGFwcCwgaHRtbCwgZGF0YSkgPT4gQ29DN0l0ZW0uY2hhdExpc3RlbmVycyhodG1sKSk7XG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XG4gIC8vIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICBsZXQgZ3JvdXAgPSBjb250cm9scy5maW5kKGIgPT4gYi5uYW1lID09ICd0b2tlbicpO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gIC8vICB9KTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhcyBmYS11c2VyLWVkaXQnLFxuICAvLyAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbigpXG4gIC8vICB9KTtcbiAgLy8gfVxufSlcblxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVOYXZpZ2F0aW9uJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVySm91cm5hbFNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbi8vIENoYXQgY29tbWFuZCBwcm9jZXNzaW5nXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQ2hhdE1lc3NhZ2UnLCBDb0M3UGFyc2VyLlBhcnNlTWVzc2FnZSk7XG4vLyBIb29rcy5vbignY3JlYXRlQ2hhdE1lc3NhZ2UnLCBDb0M3Q2hhdC5jcmVhdGVDaGF0TWVzc2FnZUhvb2spO1xuSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICBDb0M3Q2hhdC5yZW5kZXJDaGF0TWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuICBDb0M3UGFyc2VyLlBhcnNlTWVzc2FnZShhcHAsIGh0bWwsIGRhdGEpXG59KVxuLy8gU2hlZXQgVjIgY3NzIG9wdGlvbnNcbi8vIEhvb2tzLm9uKCdyZW5kZXJDb0M3Q2hhcmFjdGVyU2hlZXRWMicsIENvQzdDaGFyYWN0ZXJTaGVldFYyLnJlbmRlclNoZWV0KTtcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0VjIucmVuZGVyU2hlZXQpIC8vIFRPRE8gOiBjaGFuZ2UgZnJvbSBDb0M3Q2hhcmFjdGVyU2hlZXRWMlxuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldFYyLnJlbmRlclNoZWV0KSAvLyBUT0RPIDogY2hhbmdlIGZyb20gQ29DN0NoYXJhY3RlclNoZWV0VjJcblxuLy8gSG9va3Mub24oJ2Ryb3BDYW52YXNEYXRhJywgQ29DN1BhcnNlci5vbkRyb3BTb21ldGhpbmcpO1xuSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCBDb0M3TWVudS5yZW5kZXJNZW51KVxuXG5Ib29rcy5vbignZHJvcENhbnZhc0RhdGEnLCBDb0M3Q2FudmFzLm9uRHJvcFNvbWV0aGluZylcblxudGlueU1DRS5QbHVnaW5NYW5hZ2VyLmFkZCgnQ29DN19FZGl0b3JfT25Ecm9wJywgZnVuY3Rpb24gKGVkaXRvcikge1xuICBlZGl0b3Iub24oJ2Ryb3AnLCBldmVudCA9PiBDb0M3UGFyc2VyLm9uRWRpdG9yRHJvcChldmVudCwgZWRpdG9yKSlcbn0pXG5cbkNPTkZJRy5UaW55TUNFLnBsdWdpbnMgPSBgQ29DN19FZGl0b3JfT25Ecm9wICR7Q09ORklHLlRpbnlNQ0UucGx1Z2luc31gXG5cbmZ1bmN0aW9uIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIgKCkge1xuICBjb25zdCBib2R5ID0gJCgnYm9keScpXG4gIGJvZHkub24oJ2NsaWNrJywgJ2EuY29jNy1pbmxpbmUtY2hlY2snLCBDb0M3Q2hlY2suX29uQ2xpY2tJbmxpbmVSb2xsKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfb25MZWZ0Q2xpY2spXG59XG5cbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5XG59XG5cbkhvb2tzLm9uKCd0YXJnZXRUb2tlbicsIGZ1bmN0aW9uICh1c2VyLCB0b2tlbiwgdGFyZ2V0ZWQpIHtcbiAgaWYgKHRhcmdldGVkKSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRhcmdldGVkIHRva2VuIGlzIGEgcGxheWVyIGNvbnRyb2xsZWQgdG9rZW4gYnV0IG5vIHVzZXIgY29udHJvbHMgaXRcbiAgICBsZXQgZ21vbmx5ID0gdHJ1ZVxuICAgIGlmIChcbiAgICAgIHRva2VuLmFjdG9yLmRhdGEucGVybWlzc2lvbi5kZWZhdWx0ID09PSBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMuT1dORVJcbiAgICApIHtcbiAgICAgIGdtb25seSA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGdtcyA9IGdhbWUudXNlcnMuZmlsdGVyKGEgPT4gYS5pc0dNKS5tYXAoYSA9PiBhLmlkKVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModG9rZW4uYWN0b3IuZGF0YS5wZXJtaXNzaW9uKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgayAhPT0gJ2RlZmF1bHQnICYmXG4gICAgICAgICAgdiA9PT0gQ09OU1QuRU5USVRZX1BFUk1JU1NJT05TLk9XTkVSICYmXG4gICAgICAgICAgIWdtcy5pbmNsdWRlcyhrKVxuICAgICAgICApIHtcbiAgICAgICAgICBnbW9ubHkgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZ21vbmx5KSB7XG4gICAgICBjb25zdCBjb250cm9sbGVkID0gZ2FtZS51c2Vycy5maWx0ZXIoXG4gICAgICAgIGEgPT4gIWEuaXNHTSAmJiBhLmRhdGEuY2hhcmFjdGVyID09PSB0b2tlbi5hY3Rvci5pZFxuICAgICAgKVxuICAgICAgaWYgKGNvbnRyb2xsZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlU2VsZWN0ZWRUYXJnZXRJc05vdENvbnRyb2xsZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0b2tlbi5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuQ09ORklHLnVpLmNvbXBlbmRpdW0gPSBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCBIb29rcywgUm9sbCwgdWkgKi9cblxuLyoqXG4gKkNhbGxvZkN0aHVsaHUoN3RoRWQuKSBEZWZpbmUgeW91ciBvd24gY29tbWFuZHNcbiAqSGVyZSwgd2UgcmVjZWl2ZSB0aGUgY2hhdCBNZXNzYWdlcyBhbmQgZGV0ZXJtaW5lIGVhY2ggY29tbWFuZC5cbiAqWy9DQ11EZWZpbmUgYSBjb21tYW5kIHRvIGp1ZGdlIGEgbm9ybWFsIGRpY2UuXG4gKlsvQ0JSXSBDb21tYW5kIHRvIGRlZmluZSB0aGUgZGVjaXNpb24gb24gY29tYmluYXRpb24gcm9sbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY2hhdE1lc3NhZ2UnLCAoaHRtbCwgY29udGVudCkgPT4ge1xuICAgIC8vIEknbSBjdXJyZW50bHkgdXNpbmcgaXQgZm9yIHRlc3RpbmcgYm9udXMgZGljZS5cbiAgICBpZiAoY29udGVudC5tYXRjaCgvXlxcLyhjYnJ8Y2MpL2kpKSB7XG4gICAgICAvLyBFeHRyYWN0aW5nIG51bWJlcnMgZnJvbSBjb21iaW5hdGlvbiByb2xsc1xuICAgICAgY29uc3QgY29tbWFuZHMgPSBjb250ZW50Lm1hdGNoKC8oXFxkKykvZylcbiAgICAgIGlmIChjb21tYW5kcykge1xuICAgICAgICBuZXcgUm9sbCgnMWQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkudGhlbihyID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gci5yZXN1bHRcbiAgICAgICAgICBjb25zdCByZXMgPSBjb21tYW5kc1xuICAgICAgICAgICAgLm1hcChtID0+IHtcbiAgICAgICAgICAgICAgbGV0IHJlcyA9ICcnXG4gICAgICAgICAgICAgIGlmIChzIDw9IDEpIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDEwMCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPD0gbSAvIDUpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSAvIDIpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSA5Nikge1xuICAgICAgICAgICAgICAgIGlmIChtIDwgNTApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICAgIGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICB9IGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGZpcnN0IHJlc3VsdHMuXG4gICAgICAgICAgICAgIHJlcyArPSAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsdWUnKSArICcgJyArIG1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcgLyAnKVxuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogcmVzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0luY29ycmVjdCB1c2FnZSBvZiBjb21tYW5kJylcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiB0byBhdm9pZCBlcnJvcnMgaW4gdGhlIGNvbW1hbmQuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0pXG59XG4iXSwibmFtZXMiOlsiQ29DN0RpY2UiLCJtb2RpZiIsInJvbGxNb2RlIiwiaGlkZURpY2UiLCJhbHRlcm5hdGl2ZURpY2UiLCJnYW1lIiwibW9kdWxlcyIsImdldCIsImFjdGl2ZSIsInNldHRpbmdzIiwicm9sbCIsIlJvbGwiLCJyZXBlYXQiLCJNYXRoIiwiYWJzIiwiYXN5bmMiLCJyZXN1bHQiLCJ1bml0IiwidG90YWwiLCJyZXN1bHRzIiwidGVucyIsImRpY2UiLCJmb3JFYWNoIiwiZCIsIkNPTkZJRyIsIkRpY2UiLCJ0ZXJtcyIsInQiLCJwdXNoIiwibWF4IiwibWluIiwic3luY0RpY2UiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJjcmVhdGVJbmxpbmVSb2xsIiwiZGF0YSIsImNscyIsImRhdGFzZXQiLCJ0aXRsZSIsImZvcm11bGEiLCJlc2NhcGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJ2IiwiT2JqZWN0IiwiZW50cmllcyIsImlubmVySFRNTCIsImlzQ3RybEtleSIsImV2ZW50IiwibWV0YUtleSIsImN0cmxLZXkiLCJrZXlDb2RlIiwiY2hhdEhlbHBlciIsInN0cmluZyIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsIm1lc3NhZ2UiLCJvcHRpb25zIiwibWVzc2FnZURhdGEiLCJmbGF2b3IiLCJzcGVha2VyIiwiQ2hhdE1lc3NhZ2UiLCJnZXRTcGVha2VyIiwid2hpc3BlciIsInR5cGUiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImlkIiwiY29udGVudCIsImNyZWF0ZSIsInRoZW4iLCJtc2ciLCJ0b0xvd2VyQ2FzZSIsImtleSIsImluY2x1ZGVzIiwic2NlbmVJZCIsInRva2VuSWQiLCJzcGxpdCIsImFjdG9ycyIsInRva2VucyIsImdldFRva2VuRnJvbUtleSIsImFjdG9yIiwiYWN0b3JLZXkiLCJnZXRBY3RvckZyb21LZXkiLCJ0b2tlbiIsInNjZW5lIiwibmFtZSIsImFsaWFzIiwib2JqZWN0IiwiZWxlbWVudCIsIm9iamVjdE5hbWUiLCJrZXlzIiwicHJvcCIsInN0YXJ0c1dpdGgiLCJhdHRhY2hPYmplY3RUb0VsZW1lbnQiLCJkZXNlcmlhbGl6ZSIsIm9iaiIsInZhbHVlIiwicyIsInNsaWNlIiwib2JqUHJvcCIsImluZGV4T2YiLCJvYmpOYW1lIiwic3Vic3RyaW5nIiwiTnVtYmVyIiwidG9TdHJpbmciLCJ0b2tlbkRvYyIsInNjZW5lcyIsInRva2VuRGF0YSIsImdldEVtYmVkZGVkRG9jdW1lbnQiLCJUb2tlbiIsImR1cGxpY2F0ZSIsImdldEFjdG9yVG9rZW4iLCJpbWciLCJzdGFydFRva2VuIiwiZW5kVG9rZW4iLCJkaXN0YW5jZSIsImdyaWRVbml0IiwiY2FudmFzIiwiZ3JpZFVuaXRzIiwiY2VudGVyIiwicmF5IiwiUmF5Iiwic2VnbWVudCIsImdyaWQiLCJtZWFzdXJlRGlzdGFuY2VzIiwiZ3JpZFNwYWNlcyIsIkNvQzdSb2xsIiwiY2FyZCIsInJvbGxEaXYiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0T2JqZWN0RnJvbUVsZW1lbnQiLCJ0aGlzIiwic3VjY2Vzc0xldmVsIiwicGFyc2VJbnQiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiaTE4biIsImZvcm1hdCIsImhhcmQiLCJleHRyZW1lIiwiY3JpdGljYWwiLCJmdW1ibGUiLCJmYWlsdXJlIiwiaXRlbUlkIiwiaXRlbXMiLCJza2lsbElkIiwic2hvd0RpY2VSb2xsIiwiZGljZVJlc3VsdHMiLCJkaWNlcyIsImRpZVJlc3VsdCIsImRpY2VEYXRhIiwibGVuZ3RoIiwiYmxpbmQiLCJzaG93IiwiaGFzQm9udXMiLCJkaWNlTW9kaWZpZXIiLCJib251cyIsImJvbnVzVHlwZSIsInRlbkRpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGllIiwic2VsZWN0ZWQiLCJpc01heCIsImlzTWluIiwidW5pdERpZSIsImluY3JlYXNlU3VjY2VzcyIsImlzbCIsIm5ld1N1Y2Nlc0xldmVsIiwibHVja05lZWRlZCIsImx1Y2tOZWVkZWRUeHQiLCJsdWNrTmVlZGVkVmFsdWUiLCJjaGVjayIsInJvbGxUeXBlIiwic2lkZSIsImFjdGlvbiIsInJlZk1lc3NhZ2VJZCIsInJlZmVyZW5jZU1lc3NhZ2VJZCIsImRpZmZpY3VsdHkiLCJza2lsbCIsIml0ZW0iLCJkaWNlTW9kIiwicmF3VmFsdWUiLCJpc0Z1bWJsZSIsImlzQ3JpdGljYWwiLCJjaGFyYWN0ZXJpc3RpYyIsInRva2VuS2V5IiwiaXNUb2tlbiIsImFjdG9ySWQiLCJodG1sRWxlbWVudCIsImdldEZyb21DaGVjayIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJkYW1hZ2VTdHJpbmciLCJkYW1hZ2UiLCJyb2xscyIsInIiLCJDb0M3VXRpbGl0aWVzIiwieCIsImlzTmFOIiwidmFsaWRhdGUiLCJodG1sIiwibWF0Y2giLCJzZXRUaW1lb3V0IiwiX0V4ZWNDb21tYW5kIiwiam9pbiIsInRocmVzaG9sZCIsImZsYXREaWNlTW9kaWZpZXIiLCJmbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJlc2NhcGVkIiwiZGlmZmljdWx0eUxldmVsIiwiYXNrIiwidGhyZXNob2xkU3RyIiwiZGlmZmljdWx0eVN0ciIsImNvbnZlcnREaWZmaWN1bHR5IiwiZGlhbG9nT3B0aW9ucyIsIm1vZGlmaWVyIiwiYXNrVmFsdWUiLCJ1c2FnZSIsIlJvbGxEaWFsb2ciLCJ1bmRlZmluZWQiLCJ0b01lc3NhZ2UiLCJ1aSIsIm5vdGlmaWNhdGlvbnMiLCJpbmZvcyIsImNyZWF0dXJlIiwiY3JlYXR1cmVEYXRhIiwiY29uc3RydWN0b3IiLCJnZXRBY3RvckZyb21TdHJpbmciLCJzcGVjaWUiLCJzYW5Mb3NzTWF4IiwiYWN0b3JTdHJpbmciLCJ2YWx1ZXMiLCJmaW5kIiwiY2hhciIsImNoYXJLZXkiLCJzaG9ydCIsImxvY2FsaXplIiwibGFiZWwiLCJzeXN0ZW0iLCJ0ZW1wbGF0ZSIsIkFjdG9yIiwidGVtcGxhdGVzIiwiY2hhcmFjdGVyaXN0aWNzIiwiU3RyaW5nIiwidW5rbm93biIsInByZXZlbnREZWZhdWx0Iiwic2tpbGxDaGVjayIsInNoaWZ0S2V5Iiwid2FybiIsIndlYXBvbiIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJ0b0pTT04iLCJwYXJlbnQiLCJ3ZWFwb25DaGVjayIsInJvbGxEaWNlIiwiYmFyIiwic2xvdCIsIm9yaWdpbiIsImNvbW1hbmQiLCJwYWNrTmFtZSIsInBhY2siLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJDb0M3SXRlbSIsImlzQW55U3BlYyIsIm1hY3JvIiwibWFjcm9zIiwiY29udGVudHMiLCJtIiwiTWFjcm8iLCJhc3NpZ25Ib3RiYXJNYWNybyIsImlzRGV2RW5hYmxlZCIsInNldCIsIkNvQzciLCJtZW51cyIsImNvbnRyb2xzIiwiYiIsInRvb2xzIiwiaW5mbyIsInJlbmRlciIsInNvY2tldCIsImVtaXQiLCJ1cGRhdGVDaGFyU2hlZXRzIiwiaXNDaGFyQ3JlYXRpb24iLCJmaWx0ZXIiLCJoYXNQbGF5ZXJPd25lciIsImNoYXRDb250ZW50IiwicXVpY2tIZWFsZXIiLCJpc0NyaXRpY2FsV291bmRzIiwic3RhdHVzIiwiY3JpdGljYWxXb3VuZHMiLCJkYWlseVNhbml0eUxvc3MiLCJhdHRyaWJzIiwic2FuIiwiZGFpbHlMb3NzIiwiaHBWYWx1ZSIsImhwIiwiaHBNYXgiLCJvbmVGaWZ0aFNhbml0eSIsImZsb29yIiwibXBWYWx1ZSIsIm1wIiwibXBNYXgiLCJudW1iZXIiLCJ1cGRhdGUiLCJjaGF0RGF0YSIsIk9USEVSIiwiaXNYUEVuYWJsZWQiLCJmYXN0Rm9yd2FyZCIsImlzR00iLCJjb250cm9sbGVkIiwiY2hhcmFjdGVyIiwidGsiLCJzaGVldCIsInJlbmRlcmVkIiwiaXNPd25lciIsImVudGl0eVR5cGUiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YUxpc3QiLCJwYXJzZSIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJkb2N1bWVudE5hbWUiLCJmb2xkZXIiLCJmb2xkZXJzIiwidGV4dCIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndpbmRvdyIsImlzU2VjdXJlQ29udGV4dCIsIndyaXRlVGV4dCIsInRleHRBcmVhIiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJmb2N1cyIsInNlbGVjdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXhlY0NvbW1hbmQiLCJFcnJvciIsInJlbW92ZSIsImNhdGNoIiwiZXJyb3IiLCJDaGF0Q2FyZEFjdG9yIiwiX2lzQmxpbmQiLCJfcm9sbE1vZGUiLCJ0YXJnZXRzIiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsIl90YXJnZXRUb2tlbiIsIl90YXJnZXRLZXkiLCJ0YXJnZXRlZFRva2VucyIsInBvcCIsIl90YXJnZXRBY3RvciIsImdldFdlYXBvblNraWxscyIsImdldEFjdG9ySW1nRnJvbUtleSIsInRhcmdldEtleSIsInRhcmdldCIsInNwZWFrZXJEYXRhIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJyZXBsYWNlciIsIkpTT05Sb2xsRGF0YSIsIlNhbkNoZWNrQ2FyZCIsInNhbkRhdGEiLCJzdXBlciIsIkJvb2xlYW4iLCJzYW5Nb2RpZmllciIsInNhbkRpZmZpY3VsdHkiLCJzdGF0ZSIsImlzQmxpbmQiLCJjcmVhdHVyZUtleSIsIl9fY3JlYXR1cmUiLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsImlzRmFpbHVyZSIsInNhbk1heCIsImZhaWxlZCIsInNhbk1pbiIsInBhc3NlZCIsInNhbkxvc3MiLCJzYW5Mb3N0VG9DcmVhdHVyZSIsIm1heFBvc3NpYmxlU2FuTG9zc1RvQ3JlYXR1cmUiLCJtYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmUiLCJldmFsdWF0ZSIsIm1heGltaXplIiwiY3JlYXR1cmVFbmNvdW50ZXJlZCIsImNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQiLCJteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkIiwiZ2V0Q3JlYXR1cmVTYW5EYXRhIiwiaXNJbkFCb3V0T2ZNYWRuZXNzIiwic2FuTG9zc0Zvcm11bGEiLCJpbW11bmVUb0NyZWF0dXJlIiwiYm91dER1cmF0aW9uIiwiYm91dFJlYWxUaW1lIiwiYm91dFN1bW1hcnkiLCJzYW5pdHkiLCJ1bmRlcmx5aW5nIiwiaW5kZWZpbnRpZSIsImR1cmF0aW9uVGV4dCIsIm15dGhvc0dhaW4iLCJrZWVwQ3JlYXR1cmVTYW5EYXRhIiwiaXNBY3Rvckxvb3NpbmdTYW4iLCJmaW5pc2giLCJhcHBseVNhbkxvc3MiLCJib3V0UmVzdWx0IiwiZW50ZXJCb3V0T2ZNYWRuZXNzIiwiYm91dE9mTWFkbmVzc1Jlc29sdmVkIiwiYm91dE9mTWFkbmVzc092ZXIiLCJ0cmlnZ2VySW5zYW5pdHkiLCJleGl0Qm91dE9mTWFkbmVzcyIsImN0aHVsaHVNeXRob3NBd2FyZGVkIiwiYW1vdW50R2FpbmVkIiwiZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkiLCJjdGh1bGh1TXl0aG9zU2tpbGwiLCJvbGRWYWx1ZSIsImFkanVzdG1lbnRzIiwiZXhwZXJpZW5jZSIsImlzQnlwYXNzZWQiLCJhdHRyaWJ1dGUiLCJfcGVyZm9ybSIsImludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkIiwic2FuTG9zc1JvbGxlZCIsImlnbm9yZVNhbkNoZWNrIiwibGltaXRlZExvc3NUb0NyZWF0dXJlIiwibWF4U2FuTG9zcyIsIm1pbmltaXplIiwiaW1tdW5lQWxyZWFkeUluQm91dCIsInNhbkxvc3NBcHBsaWVkIiwiaW50Um9sbGVkIiwiaW5zYW5pdHkiLCJzYW5Mb3NzUm9sbCIsInNob3dSb2xsRGljZTNkIiwibG9vc2VTYW5Ub0NyZWF0dXJlIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImlzSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsImRhaWx5U2FuTG9zcyIsInRlbXBvcmFyeUluc2FuZSIsImluZGVmaW5pdGVseUluc2FuZSIsIm1lbW9yeVJlcHJlc3NlZCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsImVudGVySW5zYW5pdHkiLCJpbnNhbml0eUR1cmF0aW9uUm9sbCIsImluc2FuaXR5RHVyYXRpb24iLCJkdXJhdGlvbiIsInJlc2V0Q3JlYXR1cmUiLCJyZXNldFNwZWNpZSIsIl9faW5saW5lU2FuQ2hlY2siLCJpbmxpbmVDaGVjayIsIm91dGVySFRNTCIsIl9faW5saW5lU2FuTG9zc1JvbGwiLCJfX2lubGluZUludENoZWNrIiwicmVuZGVyVGVtcGxhdGUiLCJodG1sQ2FyZEVsZW1lbnQiLCIkIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJtZXNzYWdlcyIsIm1lc3NhZ2VJZCIsImNoYXQiLCJ1cGRhdGVNZXNzYWdlIiwiYXJncyIsImNoYXRDYXJkIiwic2F5IiwiaHRtbENhcmQiLCJnZXRGcm9tQ2FyZCIsInNhbkNoZWNrQ2FyZERhdGEiLCJ1bmVzY2FwZSIsInNhbkNoZWNrQ2FyZCIsImFzc2lnbiIsImNsb3Nlc3QiLCJmcm9tRGF0YSIsIkNPQzciLCJudmN0IiwiZHJrYSIsImRkdHMiLCJnbGl0IiwicHVscCIsIm1kcm4iLCJzdHIiLCJjb24iLCJzaXoiLCJkZXgiLCJhcHAiLCJpbnQiLCJwb3ciLCJlZHUiLCJub2FkanVzdG1lbnRzIiwibm94cGdhaW4iLCJzcGVjaWFsIiwicmFyaXR5IiwiY29tYmF0IiwiZmlnaHRpbmciLCJmaXJlYXJtIiwibWVsZWUiLCJybmdkIiwibW52ciIsInRocm93biIsInNob3RndW4iLCJkYnJsIiwiaW1wbCIsImJyc3QiLCJhdXRvIiwiYWhkYiIsImFkZGIiLCJzbG50Iiwic3BjbCIsIm1vbnQiLCJibHN0Iiwic3R1biIsInJhcmUiLCJidXJuIiwiY2FsbCIsImRpc21pc3MiLCJjb250YWN0Iiwic3VtbW9uIiwiYmluZCIsImVuY2hhbnRtZW50IiwiZ2F0ZSIsIm15dGhvcyIsIm9jY3VsdCIsIm90aGVyIiwicGh5c2ljYWwiLCJtZW50YWwiLCJtaXNjZWxsYW5lb3VzIiwiYmFzaWMiLCJpbnNhbmUiLCJtYW5pYSIsInBob2JpYSIsImNsYXNzaWMiLCJsb3ZlY3JhZnRpYW4iLCJtb2Rlcm4iLCJhY3RvcnNoZWV0IiwidGVtcG9JbnNhbmUiLCJpbmRlZkluc2FuZSIsInVuY29uc2Npb3VzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdTa2lsbE5hbWUiLCJuZXdJdGVtTmFtZSIsIm5ld1dlYXBvbk5hbWUiLCJjcmVhdHVyZUZpZ2h0aW5nU2tpbGwiLCJkb2RnZVNraWxsTmFtZSIsImNyZWRpdFJhdGluZ1NraWxsTmFtZSIsIkN0aHVsaHVNeXRob3NOYW1lIiwiZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUiLCJmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lIiwiY29tYmF0Q2FyZHMiLCJmaWdodEJhY2siLCJkb2RnZSIsIm1hbmV1dmVyIiwiQ29DN0NvbkNoZWNrIiwiZGVueVB1c2giLCJfYWN0b3JJZCIsImlzU3VjY2VzcyIsImNvbkNoZWNrIiwiaHRtbENoZWNrIiwiZ2V0RnJvbUVsZW1lbnQiLCJyb2xsQ29uIiwicmVwbGFjZVdpdGgiLCJnZXRDaGVja0VsZW1lbnQiLCJoaWRlRGljZVJlc3VsdCIsInN0YXlBbGl2ZSIsImZhbGxEZWFkIiwiZmFsbFVuY29uc2Npb3VzIiwiYXBwbGllZCIsImlzUm9sbGVkIiwiU2tpbGxTZWxlY3REaWFsb2ciLCJEaWFsb2ciLCJhY3RpdmF0ZUxpc3RlbmVycyIsImNsaWNrIiwiX29uU2VsZWN0U2tpbGxDbGlja2VkIiwibGkiLCJjdXJyZW50VGFyZ2V0Iiwic2tpbGxzIiwiaW5kZXgiLCJkaXNwbGF5IiwiYWRkZWQiLCJpbm5lclRleHQiLCJvcHRpb25zQ291bnQiLCJjbG9zZSIsImJ1dHRvbnMiLCJjbGFzc2VzIiwiUG9pbnRTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbkNsaWNrZWQiLCJvcHRpb25hbCIsInRvZ2dsZUNsYXNzIiwibXVsdGlwbGllciIsInJlc29sdmVkIiwiY29udGFpbnMiLCJDaGFyYWNTZWxlY3REaWFsb2ciLCJDaGFyYWNSb2xsRGlhbG9nIiwicm9sbGVkIiwib24iLCJfb25DaGFuZ2VJbnB1dCIsIl9vblN1Ym1pdCIsIl9vblJvbGxDaGFyYWN0ZXJpc3RpYyIsIl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbiIsImNoYXJhY0tleSIsInJvbGxDaGFyYWN0ZXJpc3RpYyIsImluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJkZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwicmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoZWNrVG90YWwiLCJpbnB1dCIsIl9lbGVtZW50IiwibGlzdCIsInBvaW50cyIsInZhbGlkYXRpb24iLCJlbmFibGVkIiwiZWwiLCJwb2ludHNXYXJuaW5nIiwiU2tpbGxTcGVjU2VsZWN0RGlhbG9nIiwic3BlY2lhbGl6YXRpb25OYW1lIiwiYmFzZVZhbHVlIiwiaGFzU2tpbGxzIiwiYmFzZSIsImZvcm1EYXRhIiwic3BlY2lhbGl6YXRpb24iLCJjYWxsYmFjayIsIkZvcm1EYXRhIiwiZGVmYXVsdCIsIkNvQzdNZWxlZVJlc29sdGlvbiIsImluaXRpYXRvck1lc3NhZ2UiLCJ0YXJnZXRNZXNzYWdlIiwiQ29DN01lbGVlVGFyZ2V0IiwiZ2V0RnJvbU1lc3NhZ2VJZCIsIkNvQzdNZWxlZUluaXRpYXRvciIsImluaXRpYXRvciIsInJlc3VsdFN0cmluZyIsIndpbm5lciIsInJvbGxEYW1hZ2UiLCJ3aW5uZXJJbWciLCJ3aW5uZXJUaXRsZSIsImxvb3NlciIsImNyaXRpY2FsRGFtYWdlIiwiZG9jdW1tZW50IiwicGFyZW50TWVzc2FnZUlkIiwiaW5pdGlhdG9yS2V5Iiwib3V0bnVtYmVyZWQiLCJzdXJwcmlzZWQiLCJhdXRvU3VjY2VzcyIsImFkdmFudGFnZSIsImRpc2FkdmFudGFnZSIsImRvZGdpbmciLCJmaWdodGluZ0JhY2siLCJtYW5ldXZlcmluZyIsIl9pbml0aWF0b3JLZXkiLCJfaW5pdGlhdG9yIiwicHVibGlzaFVwZGF0ZSIsImZsYWciLCJjYW1lbEZsYWciLCJoeXBoZW5Ub0NhbWVsQ2FzZSIsInRvZ2dsZUZsYWciLCJ1cGRhdGVDaGF0Q2FyZCIsInRvZ2dsZSIsImZsYWdOYW1lIiwib3duZXJzIiwiZ21zIiwidXNlcnMiLCJtYXAiLCJwZXJtaXNzaW9uIiwiRU5USVRZX1BFUk1JU1NJT05TIiwiT1dORVIiLCJwcm9tcHQiLCJ3ZWFwb25JZCIsInB1Ymxpc2giLCJpc1Vua29ud24iLCJyb2xsSWNvbnMiLCJyb2xsQ29sb3IiLCJyb2xsVGl0bGUiLCJzdWNjZXNzIiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInByZUNyZWF0ZU1lc3NhZ2UiLCJ1cGdyYWRlUm9sbCIsImx1Y2tBbW91bnQiLCJuZXdTdWNjZXNzTGV2ZWwiLCJvbGRDYXJkIiwic3BlbmRMdWNrIiwibHVja1NwZW50IiwicHJvY2Vzc2VkIiwiZGljZVJvbGxzIiwicmVzdWxEZXRhaWxzIiwiZGljZVRvdGFsIiwiQ29DN0NoYXQiLCJDb0M3UmFuZ2VJbml0aWF0b3IiLCJjb3ZlciIsInRhcmdldENhcmQiLCJzaW5nbGVTaG90IiwibXVsdGlwbGVTaG90cyIsImJ1cnN0IiwiZnVsbEF1dG8iLCJhaW1lZCIsInRvdGFsQnVsbGV0c0ZpcmVkIiwiX3RhcmdldHMiLCJDb0M3UmFuZ2VUYXJnZXQiLCJwcm9wZXJ0aWVzIiwiZ2V0RGlzdGFuY2UiLCJyb3VuZGVkRGlzdGFuY2UiLCJyb3VuZCIsImRpc3RhbmNlVW5pdCIsImRpc3RJbllkIiwidG9ZYXJkcyIsInBvaW50QmxhbmtSYW5nZSIsImJhc2VSYW5nZSIsImxvbmdSYW5nZSIsImV4dHJlbWVSYW5nZSIsIm91dE9mUmFuZ2UiLCJtYWluIiwiYWx0ZXJuYXRpdiIsIm1haW5XZWFwb25Ta2lsbCIsIl9haW1pbmciLCJnZXRBY3RvckZsYWciLCJfc2hvdHMiLCJzaG90cyIsInNob3REaWZmaWN1bHR5IiwiYW55SGl0IiwiaGl0cyIsImhpdCIsInNob3QiLCJnZXRCdWxsZXRMZWZ0IiwidXNlc1BlclJvdW5kIiwiaWdub3JlQW1tbyIsImlnbm9yZVVzZXNQZXJSb3VuZCIsIm1heFNob3RzIiwiX3ZvbGxleVNpemUiLCJzaXplIiwiYXV0b1dlYXBvblNraWxsIiwidm9sbGV5U2l6ZSIsImdldFRhcmdldEZyb21LZXkiLCJjYWxjVGFyZ2V0c0RpZmZpY3VsdHkiLCJhY3RpdmVUYXJnZXQiLCJyYW5nZSIsIm5vcm1hbCIsImxvbmciLCJkaWZmaWN1bHR5TmFtZSIsImFpbWluZyIsImN1cnJlbnRTaG90UmFuayIsInJlbG9hZCIsImltcG9zc2libGUiLCJsZXZlbCIsImFkZFNob3RBdEN1cnJlbnRUYXJnZXQiLCJhY3Rvck5hbWUiLCJidWxsZXRzU2hvdCIsInRyYW5zaXRCdWxsZXRzIiwiYnVsbGV0c1Nob3RUcmFuc2l0IiwidHJhbnNpdCIsImJ1bGxldExlZnQiLCJ0b3RhbEFtbW8iLCJwcmV2aW91c1Nob3QiLCJtdWx0aVRhcmdldCIsIndlYXBvbk1hbGZ1bmN0aW9uIiwic2hvb3RBdFRhcmdldCIsInNob290QnVsbGV0cyIsImhhc01hbGZ1bmN0aW9uIiwiYnVsbGV0RmlyZWQiLCJhdXRvRmlyZSIsImRldGFpbHMiLCJjaGFuZ2VWb2xsZXlTaXplIiwicGFzc1JvbGwiLCJyb2xsSW5kZXgiLCJ1cGdyYWRlaW5kZXgiLCJpbmNyZWFzZWRTdWNjZXNzIiwicmFuZ2VJbml0aWF0b3IiLCJjYXJkU2hvdHMiLCJkciIsImRhbWFnZVJvbGwiLCJzdWNjZXNzZnVsSGl0cyIsImkiLCJoIiwiZGFtYWdlUm9sbHMiLCJkYW1hZ2VGb3JtdWxhIiwiZGFtYWdlRGllIiwiZ2V0TWFpbkRpZSIsIm1heERhbWFnZSIsImNyaXRpY2FsRGFtYWdlRm9ybXVsYSIsImltcGFsZSIsImNyaXRpY2FsRGFtYWdlRGllIiwiaW1wYWxpbmdTaG90cyIsInN1Y2Nlc3NmdWxTaG90cyIsInRhcmdldE5hbWUiLCJkZWFsdCIsImRhbWFnZVJvbGxlZCIsImRJbmRleCIsInRvdGFsVGFrZW4iLCJ0b3RhbEFic29yYmVkIiwickluZGV4IiwiZGVhbHRBbW91bnQiLCJkZWFsRGFtYWdlIiwidGFrZW4iLCJhYnNvcmJlZCIsImFybW9yIiwiZGFtYWdlRGVhbHQiLCJpbk1lbGVlIiwiX2JpZyIsImJ1aWxkIiwiX3NtYWxsIiwiYmlnIiwic21hbGwiLCJtb3YiLCJfZmFzdCIsIl9hY3RvciIsIl90b2tlbiIsImZhc3QiLCJpc0Zhc3QiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJtZXJnZU9iamVjdCIsImRlZmF1bHRPcHRpb25zIiwib3B0aW9ubmFsQ2hhdERhdGEiLCJkYXRhU3RyaW5nIiwiY2FyZENsYXNzIiwiY3NzQ2xhc3NlcyIsImNvbXB1dGUiLCJjbG9zZWQiLCJzZXRGbGFnIiwiX29uVG9nZ2xlIiwiX29uS2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNhcmRzIiwiZnJvbUhUTUxDYXJkRWxlbWVudCIsInR5cGVkQ2FyZCIsImFzc2lnbk9iamVjdCIsIl91cGRhdGUiLCJmb3JtcyIsInVwZGF0ZXMiLCJmb3JtIiwiRm9ybURhdGFFeHRlbmRlZCIsInRvT2JqZWN0IiwiZGlmZk9iamVjdCIsImV4cGFuZE9iamVjdCIsIl9tZXNzYWdlIiwiX21lc3NhZ2VJZCIsImV4Y2x1ZGUiLCJleGNsdWRlU3RhcnRXaXRoIiwiZnJvbU1lc3NhZ2UiLCJjYXJkRWxlbWVudCIsImNhcmREYXRhIiwidW5zZXRGbGFnIiwiRGFtYWdlQ2FyZCIsImNvbmNhdCIsIl9pbXBhbGUiLCJpc0RhbWFnZU51bWJlciIsImlnbm9yZUFybW9yIiwiaGFyZHJvbGxlZCIsImRhbWFnZUluZmxpY3RlZCIsIm5vRGFtYWdlIiwiX2h0bWxJbmxpbmVSb2xsIiwiX2h0bWxSb2xsIiwiaXNBcm1vckZvcnVsYSIsInJvbGxBcm1vciIsInRvdGFsRGFtYWdlU3RyaW5nIiwic2VsZWN0ZWRQbGF5ZXJzIiwib25lIiwiaWNvbiIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJpbmNsdWVzIiwiZGIiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiUm9sbENhcmQiLCJnZXRIdG1sUm9sbCIsInNwYW4iLCJmcm9tTWVzc2FnZUlkIiwiY29sbGVjdGlvbiIsImRlZmF1bHRDb25maWciLCJnZXRGbGFnIiwidGltZXN0YW1wIiwiRGF0ZSIsInByb2Nlc3MiLCJjb25maWciLCJmbGFncyIsInVwZGF0ZVJvbGwiLCJmcm9tR00iLCJyYW5rIiwiYWRkUm9sbERhdGEiLCJhZGRSb2xsIiwicmVtb3ZlUm9sbCIsInNwbGljZSIsIndpbm5lcnMiLCJsb29zZXJzIiwiT3Bwb3NlZENoZWNrQ2FyZCIsIl9vbkNsaWNrIiwiYXR0YWNrZXIiLCJkZWZlbmRlciIsImRlZmVuZGVyUm9sbCIsImRvZGdlU2tpbGwiLCJfYWEiLCJkZWZlbmRlcklzRG9kZ2luZyIsImhhc1dpbm5lciIsIl9hZCIsIndpbm5lckNvdW50IiwiYXR0YWNrZXJSb2xsIiwiY291bnQiLCJjbG9zZUNhcmQiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJhbHRlciIsInNvcnQiLCJ0aWUiLCJhZHZhbnRhZ2VBdHRhY2tlciIsIm1vZGlmaWVkUmVzdWx0Iiwid2luQ291bnQiLCJDb21iaW5lZENoZWNrQ2FyZCIsInN1Y2Nlc3NDb3VudCIsImFueSIsImFsbCIsIl9yb2xsIiwic2lsZW50IiwiaGlkZVN1Y2Nlc3MiLCJhc3NpZ25Sb2xsIiwiZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciIsImRpc2FibGVGbGF0RGljZU1vZGlmaWVyIiwiQXVkaW9IZWxwZXIiLCJwbGF5Iiwic3JjIiwic291bmRzIiwiQ0hBVF9DT0M3X01FU1NBR0UiLCJwbGF5ZXJzIiwiR01TZWxmUm9sbCIsInJlbW92ZVdpc3BlclRhcmdldHMiLCJmYWtlUm9sbCIsIl9vbkNoYXRDYXJkQWN0aW9uIiwiX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IiwiX29uQ2hhdENhcmRSYWRpb1N3aXRjaCIsIl9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIiwiX29uQ2hhdENhcmRWb2xsZXlTaXplIiwiX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQiLCJfb25Ub2dnbGVTZWxlY3RlZCIsIl9vblRhcmdldFNlbGVjdCIsIl9vbk9wZW5BY3RvciIsIkNvQzdQYXJzZXIiLCJfb25DaGVjayIsIl9vbkRyYWdDb0M3TGluayIsIl9vbklubGluZSIsImJpbmRMaXN0ZXJuZXJzIiwic2Nyb2xsQm90dG9tIiwiY2hlY2tSZXZlYWxlZCIsInJldmVhbENoZWNrIiwibWVsZWVJbml0aWF0b3IiLCJiaW5kTGlzdGVuZXJzIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJwYXJlbnRFbGVtZW50Iiwib3duZXJPbmx5IiwiZ21TZWxlY3RPbmx5IiwidGFyZ2V0c1NlbGVjdG9yIiwiYm9yZGVyIiwidGFyZ2V0VG9EaXNwbGF5IiwidXBkYXRlU2VsZWN0ZWQiLCJkcm9wRG93bkJveGVzIiwiZHBkbkJveCIsInNlbGVjdGVkQm94IiwiYnV0dG9uIiwiYWN0aW9uVHlwZSIsImRlZmVuZGVyQ2hvaWNlIiwic2tpbGxWYWx1ZSIsInNraWxsTmFtZSIsIml0ZW1OYW1lIiwid2VhcG9uTmFtZSIsIl9jb2xsYXBzZUlubGluZVJlc3VsdCIsIl9leHBhbmRJbmxpbmVSZXN1bHQiLCJvcHRpb25MaXN0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInByb3BlcnR5IiwicmFuZ2VDYXJkIiwidXBkYXRlQ2FyZFN3aXRjaCIsIm93bm5lciIsImdldFRva2VuIiwibWVzc0lkIiwib3JpZ2luTWVzc2FnZSIsIm1lbGVlQ2FyZCIsInJvbGxSZXN1bHQiLCJ1cGdyYWRlSW5kZXgiLCJmb3JjZVBhc3MiLCJ1cGdyYWRlQ2hlY2siLCJkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyIiwibmV3Q2FyZCIsImNsb25lTm9kZSIsInB1c2hlZFJvbGwiLCJkZWZlbmRlcktleSIsImdldEFjdG9yRnJvbVRva2VuIiwicmVzcG9uc2VUeXBlIiwicGVyZm9ybVNraWxsQ2hlY2siLCJwdWJsaXNoQ2hlY2tSZXN1bHQiLCJkZWFsZXIiLCJyZXNvbHZlQ2FyZCIsImFtb3VudCIsImFwcGVuZCIsImZvcmNlRmFpbCIsImluY3JlYXNlU3VjY2Vzc0xldmVsIiwiZGVjcmVhc2VTdWNjZXNzTGV2ZWwiLCJjb21wdXRlQ2hlY2siLCJtYWtlUHVibGljIiwic3RhbmRieSIsImZvcmNlUm9sbCIsImZsYWdGb3JEZXZlbG9wZW1lbnQiLCJyZXNldENyZWF0dXJlU2FuRGF0YSIsInJlc2V0U3BlY2llU2FuRGF0YSIsInJvbGxTYW4iLCJhZHZhbmNlU3RhdGUiLCJyb2xsU2FuTG9zcyIsInJvbGxJbnQiLCJoYXNUYXJnZXQiLCJtZWxlZVRhcmdldCIsImNyZWF0ZUNoYXRDYXJkIiwicm9sbERhbWFnZUJ1dHRvbiIsIkNvQ0FjdG9yIiwiaW5pdGlhbGl6ZSIsImNyZWF0dXJlSW5pdCIsInZpc2lvbiIsImRpbVNpZ2h0IiwiYnJpZ2h0U2lnaHQiLCJhY3RvckxpbmsiLCJkaXNwb3NpdGlvbiIsIm92ZXJ3cml0ZSIsImNoZWNrVW5kZWZpbmVkQXV0byIsInJldHVybkRhdGEiLCJzaG9ydE5hbWUiLCJjcmVhdGVEYXRhIiwiZWZmZWN0cyIsImUiLCJib3V0T2ZNYWRuZXNzIiwiZGlzYWJsZWQiLCJyZWFsVGltZSIsInJvdW5kcyIsInNlY29uZHMiLCJpbmRlZmluaXRlSW5zdGFuaXR5IiwiaW5kZWZpbml0ZSIsImluc2FuZUR1cmF0aW9uIiwiYm91dER1cmF0aW9uVGV4dCIsImluc2FuaXR5RHVyYXRpb25UZXh0Iiwic3VtbWFyeSIsImhpbnQiLCJib3V0T2ZNYWRuZXNzVGFibGVJZCIsImRlc2NyaXB0aW9uIiwiYm91dE9mTWFkbmVzc1RhYmxlIiwidGFibGVzIiwidGFibGVSb2xsIiwiVEFCTEVfUkVTVUxUX1RZUEVTIiwiRU5USVRZIiwicmVzdWx0SWQiLCJUZXh0RWRpdG9yIiwiZW5yaWNoSFRNTCIsIl9pZCIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiVEVYVCIsInR1cm5zIiwidXVpZCIsIm1hZG5lc3MiLCJkZWxldGUiLCJzaG93U2hlZXQiLCJyZW5kZXJTaGVldCIsImZpcmVhcm1zIiwic2tpbGxEYXRhIiwicGVyc29uYWwiLCJvY2N1cGF0aW9uIiwiYXJjaGV0eXBlIiwiZ2V0U2tpbGxzQnlOYW1lIiwiYXR0YWNrIiwid3BuVHlwZSIsImNyZWF0ZWRBdHRhY2siLCJjb25zb2xlIiwic2V0QWN0b3JGbGFnIiwicXVhbnRpdHkiLCJnZXRJdGVtSWRCeU5hbWUiLCJjcmVhdGVTa2lsbCIsImNyZWF0ZUl0ZW0iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwiYmlvIiwiYmlvZ3JhcGh5IiwiYXJlYU5hbWUiLCJlbWJlZGRlZE5hbWUiLCJkYXRhQXJyYXkiLCJvdXRwdXQiLCJwYXJzZUNoYXJhY3RlcmlzdGljcyIsInNraWxsTGlzdCIsImV4aXN0aW5nSXRlbSIsInNldEl0ZW1GbGFnIiwiZ2V0TmFtZVdpdGhvdXRTcGVjIiwibWFpblNraWxsIiwiY3JlYXRlV2VhcG9uU2tpbGwiLCJzZWNvbmRTa2lsbCIsImVuYWJsZUNoYXJhY3RlcmlzaXRpY3MiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImx1Y2siLCJ1cGRhdGVEYXRhIiwiaXQiLCJvdGhlcnNJdGVtcyIsImFkZFVuaXF1ZUl0ZW1zIiwiYWRkSXRlbXMiLCJiYWNrc3RvcnkiLCJzZWN0aW9uTmFtZSIsImJpb1NlY3Rpb25zIiwiY3JlYXRlQmlvU2VjdGlvbiIsInJlc2V0QXJjaGV0eXBlIiwiY29uZmlybSIsInllcyIsImRlZmF1bHRZZXMiLCJjb3JlQ2hhcmFjIiwiY2hhcmFjIiwiY29yZUNoYXJhY3RlcmlzdGljcyIsImVudHJ5IiwiY2hhckRpYWxvZ0RhdGEiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYSIsIm5ld0FyY2hldHlwZSIsImFyY2hldHlwZVBvaW50cyIsInJlc2V0T2NjdXBhdGlvbiIsInBvaW50c0RpYWxvZ0RhdGEiLCJvY2N1cGF0aW9uU2tpbGxQb2ludHMiLCJvcHRpb25hbENoYXIiLCJncm91cHMiLCJkaWFsb2dEYXRhIiwiZGlzcGxheU5hbWUiLCJza2lsbENvdW50IiwibWVyZ2VkIiwibWVyZ2VPcHRpb25hbFNraWxscyIsImNyZWRpdFJhdGluZ1NraWxsIiwiY3JlZGl0UmF0aW5nIiwibmV3T2NjdXBhdGlvbiIsIm9jY3VwYXRpb25Qb2ludHMiLCJwZXJzb25hbFBvaW50cyIsImdldEl0ZW1zQnlOYW1lIiwiaXRlbUxpc3QiLCJwYXJzZUZvcm11bGEiLCJwYXJzZWRGb3JtdWxhIiwicGFyc2VkIiwiZ2V0UHJvcGVydHkiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJlcmFzZU9sZCIsIm9jY3VwYXRpb25Ta2lsbCIsImdldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImFyY2hldHlwZVNraWxsIiwic2V0THVjayIsImN1cnJlbnQiLCJtYXhIUCIsImVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YSIsImVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4IiwiZW5jb3VudGVyZWRDcmVhdHVyZXMiLCJmaW5kSW5kZXgiLCJjZCIsInRvTG9jYWxlTG93ZXJDYXNlIiwidG90YWxMb3NzIiwiY3JlYXR1cmVTYW5EYXRhIiwic3BlY2llRW5jb3VudGVyZWQiLCJjaGFuZ2VzIiwiZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0IiwiX3VwZGF0ZUFsbE9mU2FtZVNwZWNpZSIsInNwZWNpZVNhbkRhdGEiLCJkZWx0YSIsIl9yZW1vdmVTcGVjaWUiLCJwcmV2aW91c1NwZWNpZUxvc3QiLCJpbmRleFNhbkRhdGEiLCJleGFjdFNhbkxvc3MiLCJpbmRleFNwZWNpZXNTYW5EYXRhIiwib2xkU2FuRGF0YSIsIm5ld1NhbkRhdGEiLCJzZXRTYW4iLCJjaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJjaGVja0ZhaWxsZWQiLCJjdGh1bGh1TXl0aG9zIiwiYm9udXNQb2ludHMiLCJleHBlcmllbmNlUG9pbnRzIiwiZGV2ZWxvcGVtZW50IiwibG9zcyIsInNldFN0YXR1cyIsImF0dHJpYiIsInVwZGF0ZWRLZXkiLCJzZXRBdHRyaWJBdXRvIiwic3VtIiwiTU9WIiwiYWdlIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwicm9sbEF0dHJpYnV0ZSIsImNoYXJhY3RlcmlzdGljTmFtZSIsImdldEVudGl0eSIsIl9yYXdWYWx1ZSIsInVwZGF0ZVZhbHVlIiwid2VhcG9uRGF0YSIsIndlYXBvbnMiLCJoYXNHdW4iLCJkZW55THVjayIsImRlbnlCbGluZFRhbXBlcmluZyIsInVzZXNBbHRlcm5hdGl2ZVNraWxsIiwibWF0Y2hlcyIsImV4ZWMiLCJzTmFtZSIsImF0dHJpYktleSIsImF0dHIiLCJyZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSIsImF2ZXJhZ2UiLCJjaGFyVmFsdWUiLCJkZXZlbG9wZW1lbnRGbGFnIiwiRGllIiwiZmFjZXMiLCJhdWdtZW50Iiwic2tpbGxNYXN0ZXJpbmdNZXNzYWdlIiwiYXVnbWVudERpZSIsImF1Z21lbnRTQU5EaWUiLCJzYW5HYWluZWQiLCJzYW5HYWluZWRNZXNzYWdlIiwiZGVidWciLCJzY29yZSIsImluY3JlYXNlRXhwZXJpZW5jZSIsInVuZmxhZ0ZvckRldmVsb3BlbWVudCIsImNyZWF0ZU1lc3NhZ2UiLCJhdWdtZW50Um9sbCIsImNvcnJlY3RlZFZhbHVlIiwic3RhdHVzTmFtZSIsImVmZmVjdEVmZmVjdCIsInN0YXR1c1ZhbHVlIiwidW5zZXRTdGF0dXMiLCJoYXNBY3RpdmVFZmZlY3QiLCJlZmZlY3QiLCJmYWxsRHlpbmciLCJmYWxsUHJvbmUiLCJjdXJlTWFqb3JXb3VuZCIsImluZmxpY3RNYWpvcldvdW5kIiwiZWZmZWN0TGFiZWwiLCJlZmZlY3ROYW1lIiwiZ2V0U3RhdHVzIiwiY291bnRlciIsImxvY2FsZUNvbXBhcmUiLCJ3ZWFwb25MaXN0IiwiQ00iLCJDUiIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJoZWFsdGhCZWZvcmUiLCJkZWZhdWx0VmFsdWUiLCJoZWFsdGhBZnRlciIsImRhbWFnZVRha2VuIiwic2V0SHAiLCJhcm1vclZhbHVlIiwiaXNGb3JtdWxhIiwibWFqb3JXb3VuZCIsImNyaXRpY2FsV291bmRzRWZmZWN0IiwiZHlpbmdFZmZlY3QiLCJDb0M3TGluayIsIl9saW5rRGF0YSIsIkxJTktfVFlQRSIsIkNIRUNLIiwiQ0hFQ0tfVFlQRSIsIlNLSUxMIiwibGlua0RhdGEiLCJsaW5rIiwic2V0RGF0YSIsIlNBTkxPU1MiLCJJVEVNIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJpc0NoZWNrIiwiaXMiLCJpc1Nhbmxvc3MiLCJzYW5sb3NzIiwiaXNJdGVtIiwidmFsaWRJdGVtIiwiZnJvbUNvbXBlbmRpdW0iLCJmcm9tRGlyZWN0b3J5IiwiX2l0ZW0iLCJmZXRjaEl0ZW0iLCJjaGFyYWN0ZXJpc3RpY0tleSIsImF0dHJpYnV0ZUtleSIsImZvcmNlTW9kaWZpZXJzIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwiQ0hBUkFDX0tFWVdPUkQiLCJBVFRSSUJfS0VZV09SRCIsIlNLSUxMX0tFWVdPUkQiLCJjaGVja1R5cGUiLCJDb0M3TGlua0NyZWF0aW9uRGlhbG9nIiwiRm9ybUFwcGxpY2F0aW9uIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJjbG9zZU9uU3VibWl0Iiwic3VibWl0T25DbG9zZSIsInN1Ym1pdE9uQ2hhbmdlIiwid2lkdGgiLCJoZWlnaHQiLCJjaG9pY2VzIiwiYWxsb3dDdXN0b20iLCJtaW5pbXVtIiwibWF4aW11bSIsImZyb21HYW1lIiwiYXNrSWQiLCJhc2tQYWNrIiwiaXNTZXRGcm9tR2FtZSIsInNlbGVjdGVkRGlmZmljdWx0eSIsImxpbmtUeXBlIiwic2VsZWN0ZWRDaGVja1R5cGUiLCJnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24iLCJhdHRyaWJ1dGVzIiwiX29uQ2xpY2tTdWJtaXQiLCJDb0M3VHlwZSIsInVwZGF0ZUZyb21MaW5rIiwiY29weVRvQ2xpcGJvYXJkIiwib3B0aW9uIiwiZ3JvdXAiLCJncm91cE5hbWUiLCJmb3JtRGF0YUV4IiwiZGlmZkRhdGEiLCJlZGl0b3IiLCJzdG9wUHJvcGFnYXRpb24iLCJjcmVhdGVDb0M3TGluayIsImluc2VydENvbnRlbnQiLCJpc0NvbnRlbnRWaXNpYmxlIiwicGFyc2VkQ29udGVudCIsIndhbGsiLCJjcmVhdGVUcmVlV2Fsa2VyIiwiTm9kZUZpbHRlciIsIlNIT1dfVEVYVCIsIm5leHROb2RlIiwiY3VycmVudE5vZGUiLCJfZ2V0VGV4dE5vZGVzIiwicmd4IiwiUmVnRXhwIiwiX3JlcGxhY2VUZXh0Q29udGVudCIsIl9jcmVhdGVMaW5rIiwibGlua0ljb24iLCJ0YWciLCJtYXRjaEFsbCIsIkFycmF5IiwiZnJvbSIsImRpZmZpY3VsdHlTdHJpbmciLCJodW1hbk5hbWUiLCJnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIiwiZHJhZ2dhYmxlIiwiY2hhcmFjdGVyaXN0aWNDaGVjayIsImF0dHJpYnV0ZUNoZWNrIiwiZ2V0U3BlYWtlckFjdG9yIiwiSXRlbSIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsIm1hbGZ1bmN0aW9uIiwicHJvcGVydHlJZCIsIm92ZXJyaWRlIiwiY2hlY2tlZFByb3BzIiwibWVsZWVXZWFwb24iLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImhhc1Byb3BlcnR5IiwiaXNJbmNsdWRlZEluU2V0IiwiaXNPd25lZCIsInNwZWNOYW1lUmVnZXgiLCJmaWx0ZXJlZE5hbWUiLCJ0cmltIiwiZXJhc2VBZGp1c3RtZW50IiwibXVsdGlTaG90IiwibWF4VXNlc1BlclJvdW5kIiwic2tpbGxQcm9wZXJ0aWVzIiwiX2Jhc2UiLCJleHAiLCJhbW1vIiwic2V0QnVsbGV0cyIsIm1heEJ1bGxldCIsImJ1bGxldHMiLCJtYXhCdWxsZXRzIiwicmVkdWNlIiwibmV3QXJyYXkiLCJsY2EiLCJsY2IiLCJnZXRDaGF0RGF0YSIsImh0bWxPcHRpb25zIiwibGFiZWxzIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJza2lsbExhYmVsIiwiZm91bmQiLCJ1c2VzUGVyUm91bmRTdHJpbmciLCJjYW5CZVB1c2hlZCIsInB1c2hpbmciLCJpc1Vua25vd24iLCJfdXVpZCIsImZvdW5kcnkiLCJ1dGlscyIsInJhbmRvbUlEIiwiY2FyZFR5cGUiLCJleHRyZW1lVGhyZXNob2xkIiwiaGFyZFRocmVzaG9sZCIsInJlZ3VsYXJUaHJlc2hvbGQiLCJjcml0aWNhbFRocmVzaG9sZCIsIl9tb2RpZmllZFJlc3VsdCIsIm1vZGlmaWVkIiwiaXNTaW1wbGVSb2xsIiwiZnVtYmxlVGhyZXNob2xkIiwic3VjY2VzVGhyZXNob2xkIiwiX2RpY2VNb2RpZmllciIsIl9kaWZmaWN1bHR5Iiwib2xkQ2hlY2siLCJ1bmtub3duRGlmZmljdWx0eSIsImljb25zIiwic3VjY2Vzc0hpbnQiLCJjc3NDbGFzcyIsImZhaWx1cmVIaW50IiwiZ21EaWZmaWN1bHR5Q3JpdGljYWwiLCJnbURpZmZpY3VsdHlFeHRyZW1lIiwiZ21EaWZmaWN1bHR5SGFyZCIsImdtRGlmZmljdWx0eVJlZ3VsYXIiLCJfc2tpbGwiLCJfZ2V0SXRlbUZyb21JZCIsImlzRHVtbXkiLCJwb3J0cmFpdCIsIndlYXBvbkFsdFNraWxsIiwiZGlzcGxheVJlc3VsdFR5cGUiLCJkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwiLCJnZXRMaW5rRWxlbWVudCIsImltYWdlIiwidmFsIiwidGVuUmVzdWx0IiwidGVuT25seU9uZURpZSIsImlzVmFsdWUiLCJpc0NoYXJhY3RpcmlzdGljIiwiaXNTa2lsbCIsImlzQXR0cmlidXRlIiwicmVzdWx0VHlwZSIsInN1Y2Nlc3NSZXF1aXJlZCIsIm1hbGZ1bmN0aW9uVHh0IiwidG9nZ2xlSXRlbUZsYWciLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwibHVja1RvU3BlbmQiLCJjYW5JbmNyZWFzZVN1Y2Nlc3MiLCJjYW5Bd2FyZEV4cGVyaWVuY2UiLCJmb3JjZWQiLCJmcm9tVXVpZCIsIkpTT05Sb2xsU3RyaW5nIiwiZm9yY2VkU3VjY2VzcyIsImZvcmNlZEZhaWx1cmUiLCJ0b3RhbEx1Y2tTcGVudCIsInNoaWZ0IiwicmVtb3ZlVXBncmFkZXMiLCJmb3JjZVN1Y2Nlc3NMZXZlbCIsIl9mb3JjZUNoZWNrIiwiaGlnaCIsImxvdyIsInJhbmRvbSIsInVuaXRUb3RhbCIsInRlblRvdGFsIiwiaGFzRW5vdWdoIiwidGVuIiwiaGFzUGVuYWx0eSIsImZsYWdnZWRGb3JEZXZlbG9wbWVudCIsIl9mbGF2b3IiLCJfY29udGV4dCIsInBhcmVudFV1aWQiLCJyYXdWYWx1ZVN0cmluZyIsInJhd3ZhbHVlIiwib3JpZ2luYWxTcGVha2VyIiwiYXBwbHlSb2xsTW9kZSIsIm5ld0NvbnRlbnQiLCJodG1sTWVzc2FnZSIsInJvbGxSZXN1bHRFbGVtZW50IiwiY3NzQ2xhc3NMaXN0IiwidG9vbHRpcEhlYWRlciIsInBhcnRzIiwiYyIsInN1Y2Nlc3NMZXZlbEljb25zIiwiY2xhc3MiLCJmYWNlIiwidG9vbHRpcCIsInRpcCIsInJvbGxUb29sVGlwIiwiY2hpbGRyZW4iLCJwYSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInB0IiwiaW5uZXJXaWR0aCIsInkiLCJpbm5lckhlaWdodCIsInppIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInpJbmRleCIsImlzTnVtZXJpYyIsInVua25vd25EaWZmaWN1bHR5RGVmYXVsdCIsImFsbG93RmxhdERpY2VNb2RpZmllciIsImFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiQ29DN0FjdG9yU2hlZXQiLCJBY3RvclNoZWV0IiwiYWN0b3JEYXRhIiwiZWRpdGFibGUiLCJpc0VkaXRhYmxlIiwiaXRlbXNCeVR5cGUiLCJjb21iYXRTa2lsbHMiLCJyYW5nZVdwbiIsIm1lbGVlV3BuIiwiYWN0b3JGbGFncyIsInBlcm1pc3Npb25MaW1pdGVkIiwiTElNSVRFRCIsImFsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscENoYXJhY3RlciIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJhc3luY0Jhc2UiLCJ1cGRhdGVkRXhwIiwidXBkYXRlRW1iZWRkZWRFbnRpdHkiLCJpdGVtVHlwZSIsIm5vcm1hbGl6ZSIsIm1lbGVlU2tpbGxzIiwicmFuZ2VTa2lsbHMiLCJjYnRTa2lsbHMiLCJ1c2VzQWx0ZXJuYXRlU2tpbGwiLCJza2lsbFNldCIsIl9wcm9wZXJ0aWVzIiwiaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIiwiY29tcGVuZGl1bSIsImlzRmlyc3QiLCJpc0xhc3QiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsImhhc0ludmVudG9yeSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5Iiwib25DbG9zZVNoZWV0IiwiX29uRHJhZ0NoYXJhY3RlcmlzdGljIiwiX29uRHJhZ0F0dHJpYnV0ZSIsIl9vbkRyYWdTYW5DaGVjayIsImNvbnRleHRtZW51IiwiX29uT3Bwb3NlZFJvbGwiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QiLCJfb25Sb2xsU2tpbGxUZXN0IiwiX29uUm9sbEF0dHJpYlRlc3QiLCJfb25Mb2NrQ2xpY2tlZCIsIl9vbkZsYWdDbGlja2VkIiwiX29uRm9ybXVsYUNsaWNrZWQiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXV0b1RvZ2dsZSIsIl9vblJlc2V0Q291bnRlciIsIl9vblN0YXR1c1RvZ2dsZSIsImhlYWwiLCJyZXZpdmUiLCJjaGVja0ZvckRlYXRoIiwiX29uSXRlbVJvbGwiLCJfb25XZWFwb25Sb2xsIiwiX29uV2VhcG9uU2tpbGxSb2xsIiwiX29uUmVsb2FkV2VhcG9uIiwiX29uQWRkQW1vIiwiZGJsY2xpY2siLCJfdG9nZ2xlUmVhZE9ubHkiLCJfb25XZWFwb25EYW1hZ2UiLCJfb25JbnZlbnRvcnlIZWFkZXIiLCJfb25TZWN0aW9uSGVhZGVyIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwicGFzc2l2ZSIsIl9vbkl0ZW1TdW1tYXJ5IiwiX29uSXRlbVBvcHVwIiwiZXYiLCJwYXJlbnRzIiwiaXRlbVRvRGVsZXRlIiwic3RyaWN0Iiwic2xpZGVVcCIsImNyZWF0ZUVtcHR5U2tpbGwiLCJjcmVhdGVFbXB0eUl0ZW0iLCJjcmVhdGVFbXB0eVdlYXBvbiIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJkZXRhaWwiLCJkZXZlbG9wTHVjayIsImRpc3BhdGNoIiwiYm94IiwiX29uRHJvcCIsInRvZ2dsZVN0YXR1cyIsInRvZ2dsZUVmZmVjdCIsInNldE9uZUZpZnRoU2FuaXR5IiwicmVzZXRDb3VudGVyIiwidG9nZ2xlQXR0cmliQXV0byIsInRvZ2dsZVByb3BlcnR5Iiwicm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlIiwiYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlIiwiaXNMb2NrZWQiLCJ0b2dnbGVBY3RvckZsYWciLCJkZWx0YVkiLCJzZXRNcCIsInJlYWRPbmx5Iiwic2VjcmV0cyIsImhhc0NsYXNzIiwiZGl2Iiwic3BlY2lhbERpdiIsImhpZGUiLCJiaW5kRXZlbnRzSGFuZGxlciIsInNsaWRlRG93biIsInNlY3Rpb24iLCJwYW5uZWxDbGFzcyIsInBhbm5lbCIsInBvcHVwU2tpbGwiLCJlbnJpY2hlZFZhbHVlIiwic2Nyb2xsWSIsImZyb21MaW5rRGF0YSIsImRsZyIsInByb2NlZWRXaXRob3V0VGFyZ2V0IiwiY2FuY2VsIiwicHJvY2VlZCIsImFkZEJ1bGxldCIsImFsdEtleSIsInRlc3QiLCJyb2xsRm9ybXVsYSIsInByb21wdExhYmVsIiwiY3JlZGl0VmFsdWUiLCJ1cGRhdGVUZXh0QXJlYSIsInVwZGF0ZUJpb1ZhbHVlIiwidXBkYXRlQmlvVGl0bGUiLCJzZWxlY3RlZEluZGV4IiwiQ29DN05QQ1NoZWV0IiwiYWxsb3dGb3JtdWxhIiwiZGlzcGxheUZvcm11bGEiLCJoYXNTYW4iLCJoYXNNcCIsImhhc0x1Y2siLCJjaGFuZ2UiLCJzZXRIZWFsdGhTdGF0dXNNYW51YWxseSIsInVuc2V0QWN0b3JGbGFnIiwicmVzaXphYmxlIiwiY2VsbCIsInNldFBvc2l0aW9uIiwiZm9yY2VBdXRvIiwiQ29DN0NyZWF0dXJlU2hlZXQiLCJfb25TYW5DaGVjayIsImNoZWNrVGFyZ2V0cyIsIl91cGRhdGVPYmplY3QiLCJzZXRDaGFyYWN0ZXJpc3RpYyIsIkNvQzdDaGFyYWN0ZXJTaGVldCIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJvY2N1cGF0aW9uUG9pbnRzU3BlbnQiLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiYXJjaGV0eXBlUG9pbnRzU3BlbnQiLCJpbnZhbGlkQXJjaGV0eXBlUG9pbnRzIiwidG90YWxQZXJzb25hbCIsInBlcnNvbmFsUG9pbnRzU3BlbnQiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiaGFzU2tpbGxGbGFnZ2VkRm9yRXhwIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJmYWN0b3IiLCJtb25leVN5bWJvbCIsInNwZW5kaW5nTGV2ZWwiLCJhc3NldHMiLCJjYXNoIiwib25lQmxvY2tCYWNrU3RvcnkiLCJfb25Ta2lsbERldiIsIl9vbkl0ZW1EZXRhaWxzIiwiZGV2ZWxvcFNraWxsIiwidGFicyIsIm5hdlNlbGVjdG9yIiwiY29udGVudFNlbGVjdG9yIiwiaW5pdGlhbCIsIkNvQzdDaGFyYWN0ZXJTaGVldFYyIiwicHJldmlvdXNTcGVjIiwiaXNTcGVjaWFsaXphdGlvbiIsImRpc3BsYXlQbGF5ZXJOYW1lIiwiY2hhcmFjdGVyVXNlciIsImNzcyIsInN0eWxlU2hlZXQiLCJjc3NSdWxlSW5kZXgiLCJzdHlsZVNoZWV0cyIsImhyZWYiLCJlbmRzV2l0aCIsInJ1bGVzIiwic2VsZWN0b3JUZXh0IiwiQ1NTU3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiRm9udEZhY2UiLCJsb2FkIiwibG9hZGVkRmFjZSIsImZvbnRzIiwid2VpZ2h0IiwiQ29DN0NvbWJhdCIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiZWFjaCIsImNvbWJJZCIsImNvbWJhdGFudENvbnRyb2xzRGl2IiwiY29tYmF0YW50IiwiY29tYmF0YW50cyIsInByZXBlbmQiLCJpbml0aWF0aXZlIiwidG9rZW5Jbml0aWF0aXZlIiwiaW5pdGlhdGl2ZVRlc3QiLCJoNCIsImZvbnRXZWlnaHQiLCJ0ZXh0U2hhZG93IiwiY29sb3IiLCJiYWNrZ3JvdW5kIiwiX29uVG9nZ2xlR3VuIiwiY29tYmF0YW50SWQiLCJuZXdJbml0Iiwicm9sbEluaXRpYXRpdmUiLCJzZXRJbml0aWF0aXZlIiwiaWRzIiwiY3VycmVudElkIiwidXBkYXRlRW1iZWRkZWREb2N1bWVudHMiLCJ1cGRhdGVUdXJuIiwidHVybiIsIlVwZGF0ZXIiLCJzeXN0ZW1VcGRhdGVWZXJzaW9uIiwiaXNOZXdlclZlcnNpb24iLCJ2ZXJzaW9uIiwic2tpcCIsIk9LIiwibWlncmF0ZUFjdG9yRGF0YSIsImlzT2JqZWN0RW1wdHkiLCJsb2ciLCJlbmZvcmNlVHlwZXMiLCJtaWdyYXRlSXRlbURhdGEiLCJ0YWJsZSIsIm1pZ3JhdGVUYWJsZURhdGEiLCJtaWdyYXRlTWFjcm9EYXRhIiwicGFja2FnZSIsIm1pZ3JhdGVDb21wZW5kaXVtRGF0YSIsIl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkiLCJfbWlncmF0ZUFjdG9yQXJ0d29yayIsImFyciIsIml0ZW1EYXRhIiwiZG9jdW1lbnRDbGFzcyIsIml0ZW1VcGRhdGUiLCJ3YXNMb2NrZWQiLCJjb25maWd1cmUiLCJtaWdyYXRlIiwiZG9jdW1lbnRzIiwiZ2V0RG9jdW1lbnRzIiwiZG9jIiwiX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSIsIl9taWdyYXRlSXRlbUFydHdvcmsiLCJfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIiwiX21pZ3JhdGVNYWNyb0FydHdvcmsiLCJfbWlncmF0ZVRhYmxlQXJ0d29yayIsInJlZ0V4IiwibyIsImciLCJzcGVsbHMiLCJ1bmlkZW50aWZpZWQiLCJhdXRob3IiLCJkYXRlIiwibGFuZ3VhZ2UiLCJteXRob3NSYXRpbmciLCJub3RlcyIsImdhaW4iLCJDTUkiLCJDTUYiLCJuZWNlc3NhcnkiLCJ3ZWVrc1N0dWR5VGltZSIsInByb2dyZXNzIiwiY2VpbCIsImFjY2VudGVkQ2hhcmFjdGVycyIsImxlbiIsInFTdHJpbmciLCJjaGFyQXQiLCJjaGFyQ29kZUF0IiwiaiIsInJlZ2V4cXVvdGUiLCJlbmdsaXNoUmVnRXhwIiwibmFtZVJlZ0V4cCIsImFnZVJlZ0V4cCIsInN0clJlZ0V4cCIsImNvblJlZ0V4cCIsInNpelJlZ0V4cCIsImludFJlZ0V4cCIsInBvd1JlZ0V4cCIsImRleFJlZ0V4cCIsImFwcFJlZ0V4cCIsImVkdVJlZ0V4cCIsInNhblJlZ0V4cCIsImhwUmVnRXhwIiwibXBSZWdFeHAiLCJkYlJlZ0V4cCIsImF0dGFja3NSZWdFeHAiLCJidWlsZFJlZ0V4cCIsImFybW9yUmVnRXhwIiwibW92ZVJlZ0V4cCIsImx1Y2tSZWdFeHAiLCJzcGVsbHNSZWdFeHAiLCJza2lsbHNSZWdFeHAiLCJkb2RnZVJlZ0V4cCIsImxhbmd1YWdlc1JlZ0V4cCIsInNraWxsUmVnRXhwIiwiYXR0YWNrc1BlclJvdW5kUmVnRXhwIiwic2FuTG9zc1JlZ0V4cCIsIndlYXBvblJlZ0V4cCIsInN0b3BXb3JkcyIsImhhbmRndW5SZWdFeHAiLCJyaWZsZVJlZ0V4cCIsInNtYlJlZ0V4cCIsIm1hY2hpbmVHdW5SZWdFeHAiLCJsYXVuY2hlZFdlYXBvbnMiLCJmcmVuY2hSZWdFeHAiLCJzcGFuaXNoUmVnRXhwIiwiQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAiLCJSRSIsImdldFJlZ3VsYXJFeHByZXNzaW9ucyIsImxhbmciLCJkZWZhdWx0V2VhcG9uU2tpbGxBZGp1c3RtZW50cyIsIkNvQzdBY3RvckltcG9ydGVyIiwiZXh0cmFjdGVkRGF0YSIsInByb2Nlc3NOYW1lIiwiZXh0cmFjdFZhbHVlIiwiYXR0YWNrc1BlclJvdW5kIiwiYXR0YWNrcyIsInByb2Nlc3NBdHRhY2tzIiwicHJvY2Vzc1NwZWxscyIsInByb2Nlc3NTa2lsbHMiLCJjbGVhblN0cmluZyIsInBlcmNlbnRhZ2UiLCJsYW5ndWFnZXMiLCJuYW1lRm91bmQiLCJjbGVhbldlYXBvbiIsImRvZXNEYW1hZ2VCb251cyIsImlzUmFuZ2VkIiwiYmFzaWNXZWFwb25Ta2lsbERhdGEiLCJza2lsbHNBcnIiLCJwYXJzZWRTa2lsbCIsInJlIiwiZW50aXR5VHlwZVN0cmluZyIsInBjIiwiaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyIiwiY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzIiwibnBjIiwiYWRkVGhlU2tpbGxzIiwiYWRkVGhlTGFuZ3VhZ2VzIiwiYWRkVGhlU3BlbGxzIiwiaGFuZGxlVGhlQXR0YWNrcyIsInVwZGF0ZUFjdG9yRGF0YSIsIkZvbGRlciIsIm1haW5BdHRhY2tTa2lsbCIsImlzQXJyYXkiLCJjcmVhdGVkQXR0YWNrcyIsIm5ld1NraWxscyIsInNldE1haW5BdHRhY2tTa2lsbCIsIndlYXBvblNraWxsIiwic2tpbGxDbG9uZSIsImNsb25lIiwibmV3U2tpbGwiLCJjcmVhdGVkIiwic3BlbGwiLCJleGlzdGluZ1NraWxsIiwiY2xvbmVkU2tpbGwiLCJuZWVkc0NvbnZlcnNpb24iLCJuZWVkc0NvbnZlcnNpb25SZXN1bHQiLCJpbnB1dHMiLCJvcHRpb25MYW5nUmVnRXhwIiwicGFyc2VDaGFyYWN0ZXIiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwiY3JlYXRlRW50aXR5IiwiQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2ciLCJnZXRJbnB1dHMiLCJjcmVhdGVkQWN0b3IiLCJjcmVhdGVBY3RvciIsImltcG9ydCIsImltcG9ydEFjdG9yIiwibm8iLCJDb0M3TWVudSIsIl9nZXRDb250cm9scyIsIm1lbnUiLCJjb2M3QnV0dG9uIiwiX29uQ2xpY2tNZW51IiwiX29uQ2xpY2tUb29sIiwiYWN0aXZlQ29udHJvbCIsIl9jbGVhckFjdGl2ZSIsImN1c3RvbU1lbnVBY3RpdmUiLCJjb250cm9sTmFtZSIsImNvbnRyb2wiLCJyZWFkeSIsInRvb2xOYW1lIiwidG9vbCIsIm9uQ2xpY2siLCJGdW5jdGlvbiIsImFjdGl2ZVRvb2wiLCJpc0FjdGl2ZSIsInZpc2libGUiLCJ0b2dnbGVEZXZQaGFzZSIsInRvZ2dsZUNoYXJDcmVhdGlvbiIsInRvZ2dsZVhQR2FpbiIsImZha2VSb2xsTWVzc2FnZSIsInN0YXJ0UmVzdCIsIkNvQzdDYW52YXMiLCJDT0M3X1RZUEVTX1NVUFBPUlRFRCIsImdyaWRTaXplIiwiZHJvcFRhcmdldFRva2VucyIsInBsYWNlYWJsZXMiLCJiZXR3ZWVuIiwiQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkiLCJDb21wZW5kaXVtRGlyZWN0b3J5IiwidHJhbnNsYXRlZCIsImJhYmVsZSIsIkNvQzdCb29rIiwiYm9vayIsIm1vZGUiLCJpbml0aWFsUmVhZGluZyIsInN0dWR5IiwiZnVsbFN0dWR5IiwiY29tcGxldGVGdWxsU3R1ZHkiLCJjaGVja0V4aGF1c3Rpb24iLCJncmFudEZ1bGxTdHVkeSIsImFjdG9yTXl0aG9zVmFsdWUiLCJkZXZlbG9wbWVudHMiLCJteXRob3NGaW5hbCIsImdhaW5zIiwiZmluYWwiLCJncmFudFNraWxsRGV2ZWxvcG1lbnQiLCJyb2xsU2FuaXR5TG9zcyIsImZ1bGxTdHVkaWVzIiwib3RoZXJzIiwicGF0dGVybiIsInNhbml0eUxvc3MiLCJzaG93RGV2ZWxvcG1lbnRzVGFibGUiLCJnZXRIVE1MIiwic2FuaXR5Q2hlY2siLCJieXBhc3NSb2xsU2FuIiwiZnJvbVJvbGxTdHJpbmciLCJncmFudEluaXRpYWxSZWFkaW5nIiwiZ3JhbnRTcGVsbExlYXJuaW5nIiwiQ29DN0RlY2FkZXJEaWUiLCJEaWNlVGVybSIsInRlcm1EYXRhIiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsImNvbGxlY3Rpb25OYW1lIiwiZ2V0RGF0YUZyb21Ecm9wRXZlbnQiLCJpdGVtSW5kZXgiLCJyZW1vdmVJdGVtIiwiX29uRHJhZ1N0YXJ0IiwiZHJhZ0RhdGEiLCJjaGFyYWNOYW1lIiwic2tpbGxMaXN0RW1wdHkiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nIiwib3JTdHJpbmciLCJpdGVtUHJvcGVydGllcyIsIkNvQzdCb29rU2hlZXQiLCJpc0tlZXBlciIsInNwZWxsc0xlYXJuZWQiLCJleGhhdXN0ZWQiLCJzdHVkeUNvbXBsZXRlZCIsImxlYXJuZWQiLCJhdHRlbXB0SW5pdGlhbFJlYWRpbmciLCJfb25EZWxldGUiLCJhdHRlbXB0U3BlbGxMZWFybmluZyIsImNoYW5nZVByb2dyZXNzIiwibW9kaWZ5T3RoZXJzR2FpbnMiLCJyZWRvRnVsbFN0dWR5IiwibW9kaWZ5VHlwZSIsImFkZFNwZWxscyIsInByZXYiLCJ0cmlnZ2VyIiwiQ29DN0NoYXNlU2hlZXQiLCJwYXJ0aWNpcGFudHMiLCJfcGFydGljaXBhbnQiLCJwcmV5cyIsImNoYXNlciIsImNoYXNlcnMiLCJfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCIsIl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IiwiX29uQ2hhbmdlU2lkZSIsIl9vbkRlbGV0ZVBhcnRpY2lwYW50IiwiX29uUmVzZXRSb2xsIiwiX29uRGVsZXRlRHJpdmVyIiwiX29uQWRkUGFydGljaXBhbnQiLCJfb25Sb2xsUGFydGljaXBhbnQiLCJEcmFnRHJvcCIsImNhbGxiYWNrcyIsImRyb3AiLCJfb25Ecm9wUGFydGljaXBhbnQiLCJfZ2V0U3VibWl0RGF0YSIsImVkaXRvcnMiLCJvcmlnaW5hbCIsImNsZWFuZWQiLCJjbGVhbiIsImZsYXR0ZW5PYmplY3QiLCJzSW5kZXgiLCJzdWJUeXBlIiwic3BlZWRDaGVjayIsImFsdGVyUGFydGljaXBhbnQiLCJhZGRQYXJ0aWNpcGFudCIsInBhcnRpY2lwYW50IiwicmVmU2V0Iiwicm9sbFV1aWQiLCJwbGF5ZXIiLCJzdGFuZGJ5VGV4dCIsInN0YW5kYnlSaWdodEljb24iLCJpc0NoYXJhY3RlcmlzdGljIiwicmVmIiwicm9sbERhdGFTdHJpbmciLCJyb2xsRGF0YSIsImhhc0FjdG9yIiwidmVoaWNsZUtleSIsIm9sZFBhcnRpY2lwYW50IiwibWV0aG9kIiwidHAiLCJnZXRUeXBlIiwiaGFzVmVoaWNsZSIsInZlaGljbGUiLCJpc0FjdG9yIiwiX2RyaXZlciIsIl92ZWhpY2xlIiwiaGFzVmFsaWRNb3YiLCJoYXNEcml2ZXIiLCJkcml2ZXIiLCJoYXNWYWxpZERleCIsIm1vdkFkanVzdG1lbnQiLCJoYXNCb251c01vdiIsImhhc01hbHVzTW92IiwiaGFzQ2FyZCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImhhc01vZGlmaWVyIiwiY2hhcmFjdGVyaXNpdGMiLCJkcml2ZVNraWxscyIsInBpbG90U2tpbGxzIiwiaGFzT3B0aW9ucyIsImdhbWVJdGVtIiwiQ29DN0l0ZW1TaGVldFYyIiwiX3NoZWV0VGFiIiwiaGFzT3duZXIiLCJpc0VuYWJsZWQiLCJfZXJhcyIsImVyYXMiLCJlcmEiLCJpc1NwZWNpYWxpemVkIiwiY2FuTW9kaWZ5U3BlYyIsIl9vbkNsaWNrVG9nZ2xlIiwiQ29DN0l0ZW1TaGVldCIsIkNvQzdPY2N1cGF0aW9uU2hlZXQiLCJfb25Hcm91cEl0ZW1EZWxldGUiLCJfb25Hcm91cENvbnRyb2wiLCJvcHRpb25hbFNraWxsIiwib2wiLCJvcHRpb25uYWwiLCJtYW5kYXRvcnkiLCJjYXJhYyIsImNhcmFjTmFtZSIsImlzRW1wdHkiLCJvY2N1cGF0aW9uUG9pbnRzU3RyaW5nIiwib2NjdXBhdGlvblByb3BlcnRpZXMiLCJDb0M3U2V0dXBTaGVldCIsIl9vbkFkZEJpbyIsIl9vblJlbW92ZVNlY3Rpb24iLCJnZXRJdGVtIiwib3RoZXJJdGVtcyIsImludGVybmFsTmFtZSIsImNoZWNrZWQiLCJDb0M3U2tpbGxTaGVldCIsIkNvQzdTcGVsbFNoZWV0IiwiY2FzdGluZ0Nvc3QiLCJjb3N0Iiwic3BlbGxQcm9wZXJ0aWVzIiwiQ29DN1N0YXR1c1NoZWV0Iiwic3RhdHVzVHlwZSIsIkNvQzdUYWxlbnRTaGVldCIsInRhbGVudFR5cGUiLCJDb0M3VmVoaWNsZVNoZWV0IiwiYXJtZWQiLCJleHBhbmRlZCIsIl9vbkFkZEFybW9yIiwiX29uUmVtb3ZlQXJtb3IiLCJfb25Ub2dnbGVFeHBhbmQiLCJvbGRTaXplIiwibG9jYXRpb25zIiwibG9jYWxpemVkIiwiQ29DN1dlYXBvblNoZWV0IiwiZHR5cGVzIiwiY29tYmF0U2tpbGwiLCJmaXJlYXJtU2tpbGxzIiwiZmlnaHRpbmdTa2lsbHMiLCJwcmljZSIsIl9vblByb3BlcnR5Q2xpY2siLCJlbGVtZW50TmFtZSIsImNoZWNrYm94Q29udHJvbCIsImVsZW1lbnRzIiwibmFtZWRJdGVtIiwibGlzdGVuIiwiSG9va3MiLCJvbmNlIiwibG9hZFRlbXBsYXRlcyIsInByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIiwicmVnaXN0ZXIiLCJzY29wZSIsIm9uQ2hhbmdlIiwicnVsZSIsIl9zZXRJbml0aWF0aXZlT3B0aW9ucyIsIm5vYm9keSIsImV2ZXJ5b25lIiwiYWx3YXlzIiwiY3JlYXRpb24iLCJuZXZlciIsImNvbnRhaW4iLCJkZWNpbWFscyIsIkNvbWJhdCIsImhvb2tzIiwicmVnaXN0ZXJTZXR0aW5ncyIsIkFjdG9ycyIsInVucmVnaXN0ZXJTaGVldCIsInJlZ2lzdGVyU2hlZXQiLCJ0eXBlcyIsIm1ha2VEZWZhdWx0IiwiSXRlbXMiLCJDb0M3SG9va3MiLCJkaWFsb2ciLCJlbnRpdHlDcmVhdGVTZWxlY3RUYWciLCJlbnRpdHlTb3J0ZWRMaXN0IiwiZW50aXR5T3B0aW9uIiwidGV4dENvbnRlbnQiLCJjYXBpdGFsaXplIiwiaGFzIiwiZW1wdHkiLCJmaXJzdCIsInNlY29uZCIsIl9vbkxlZnRDbGljayIsInN5c3RlbVRhYiIsImJlZm9yZSIsImFkZERpY2VQcmVzZXQiLCJmb250U2NhbGUiLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiY2hlY2tNYWNybyIsInJlbmRlckNvbWJhdFRyYWNrZXIiLCJjb21tYW5kcyIsInJlcyIsInRvTG9jYWxpemUiLCJlZmZlY3RJbmRleCIsInN0YXR1c0VmZmVjdHMiLCJ1bnNoaWZ0IiwiY3JlYXRlTWFjcm8iLCJjaGF0TGlzdGVuZXJzIiwicmVuZGVyTWVzc2FnZUhvb2siLCJkaWZmIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwidGFibGVDaG9pY2UiLCJub25lIiwiYm91dE9mTWFkbmVzc19TdW1tYXJ5IiwiYm91dE9mTWFkbmVzc19SZWFsVGltZSIsImNoYXJhY3RlclNoZWV0IiwiUGFyc2VDaGF0RW50cnkiLCJQYXJzZVNoZWV0Q29udGVudCIsInJlbmRlckNoYXRNZXNzYWdlSG9vayIsIlBhcnNlTWVzc2FnZSIsInJlbmRlck1lbnUiLCJvbkRyb3BTb21ldGhpbmciLCJ0aW55TUNFIiwiUGx1Z2luTWFuYWdlciIsIm9uRWRpdG9yRHJvcCIsIlRpbnlNQ0UiLCJwbHVnaW5zIiwidGFyZ2V0ZWQiLCJnbW9ubHkiXSwic291cmNlUm9vdCI6IiJ9