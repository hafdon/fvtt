const _0x22e0=['\x22\x20did\x20not\x20match\x20an\x20expected\x20modifier/proficiency\x20amount!\x20A\x20fallback\x20value\x20(\x22','pGetSpellcastingImage','40299eBkvUH','getDataSkills','23IdpbOV','filter','push','12CrmJYM','toLowerCase','\x22\x20=\x20\x22','lower','source','getParsedActionEntryData','pact','ABIL_ABVS','replace','spell','override','\x22\x20(','startsWith','/media/icon/mighty-force.svg','497741edbIzt','/media/icon/mailed-fist.svg','1623CNpMhy','_getFeatureSrdAliases','assumedPb','pGetTraitReactionLegendaryImage','1uKadXr','1424342uTJKMt','/media/icon/eyestalk.svg','_foundryFlags','forEach',')\x20skill\x20\x22','name','proficient','_pGetParsedAction_getImg','76546nyaftB','str','pGetIconImage','/media/icon/spell-book.svg','value','max','1077725cuPhsL','foundryData','length','getAbilityModNumber','/media/icon/dragon-breath.svg','isAttack','spellcasting','expert','pGetActorItemCompendiumImage','some','monsterFeature','getDataSpells','814xDnGuU','_getFeatureImage','bind','getAttackActionType','_foundryData','isLegendary','trim','skill','3088044Qreeax','slots','\x20Attack','exec','damageTuples','pGetCompendiumImage','1xyZrPs','intToBonus','modules/','Creature\x20\x22','spell0','entries','breath\x20weapons','getDamageTuples','getAttackRange','skillToAbilityAbv','abs','spells','pGetLairActionImage','MODULE_NAME','\x22\x20bonus\x20\x22'];const _0x20e7=function(_0x37aa50,_0x1f3c8e){_0x37aa50=_0x37aa50-0x91;let _0x22e052=_0x22e0[_0x37aa50];return _0x22e052;};const _0x15d903=_0x20e7;(function(_0x124c4d,_0x714ba1){const _0x480f90=_0x20e7;while(!![]){try{const _0x183730=-parseInt(_0x480f90(0xc2))+-parseInt(_0x480f90(0xb4))*-parseInt(_0x480f90(0xdc))+parseInt(_0x480f90(0xad))*parseInt(_0x480f90(0xb3))+parseInt(_0x480f90(0x9f))*-parseInt(_0x480f90(0xbc))+parseInt(_0x480f90(0x9a))*-parseInt(_0x480f90(0x9c))+parseInt(_0x480f90(0xce))*-parseInt(_0x480f90(0xaf))+parseInt(_0x480f90(0xd6));if(_0x183730===_0x714ba1)break;else _0x124c4d['push'](_0x124c4d['shift']());}catch(_0x37e9f4){_0x124c4d['push'](_0x124c4d['shift']());}}}(_0x22e0,0xbaf9b));import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';class DataConverterCreature{static async['pGetParsedAction'](_0x49fe47,_0x447431,_0x4a577c){const _0xe057c1=_0x20e7,{damageTuples:_0x527bdf,offensiveAbility:_0x2680d1,isAttack:_0xf06515,rangeShort:_0x33c6fa,rangeLong:_0x5705da,actionType:_0x34f384,isProficient:_0x206db0,attackBonus:_0x3221b0}=this[_0xe057c1(0xa4)](_0x49fe47,_0x447431,_0x4a577c),_0x210fe3=await this[_0xe057c1(0xbb)](_0x49fe47,_0x447431,_0x4a577c,{'isAttack':_0xf06515});return{'damageTuples':_0x527bdf,'offensiveAbility':_0x2680d1,'isAttack':_0xf06515,'rangeShort':_0x33c6fa,'rangeLong':_0x5705da,'actionType':_0x34f384,'isProficient':_0x206db0,'attackBonus':_0x3221b0,'_foundryData':_0x447431[_0xe057c1(0xd2)],'foundryData':_0x447431[_0xe057c1(0xc3)],'_foundryFlags':_0x447431[_0xe057c1(0xb6)],'foundryFlags':_0x447431['foundryFlags'],'img':_0x210fe3};}static['getParsedActionEntryData'](_0x2d063a,_0x544eb8,_0x444235){const _0x3d68aa=_0x20e7;if(!(_0x544eb8[_0x3d68aa(0xe1)]&&_0x544eb8['entries'][0x0]&&typeof _0x544eb8['entries'][0x0]==='string'))return;let _0x538e26=!![];const _0x34193a=[];let _0x5dd557=_0x3d68aa(0xbd),_0x25fe46=0x0;const _0x1a069c=_0x544eb8[_0x3d68aa(0xe1)][0x0];_0x34193a['push'](...DataConverter[_0x3d68aa(0xe3)](_0x1a069c)[_0x3d68aa(0xda)]);const {rangeShort:_0x512571,rangeLong:_0x30debb}=DataConverter[_0x3d68aa(0x91)](_0x1a069c),_0x2632a6=/{@hit ([^}]+)}/gi[_0x3d68aa(0xd9)](_0x1a069c);if(_0x2632a6){const _0x1ad0ba=Number(_0x2632a6[0x1]);if(!isNaN(_0x1ad0ba)){const _0xaa53e1=/\+(\d)/[_0x3d68aa(0xd9)](_0x544eb8[_0x3d68aa(0xb9)]||''),_0xe406f3=_0xaa53e1?Number(_0xaa53e1[0x0]):0x0,_0x5f5549=_0x1ad0ba-_0xe406f3-_0x444235[_0x3d68aa(0xb1)],_0x1766b3=_0x34193a[_0x3d68aa(0xc4)]?_0x34193a[0x0][0x0]||'':'',_0x504864=/\d+\s*([-+]\s*\d+)$/[_0x3d68aa(0xd9)](_0x1766b3[_0x3d68aa(0xd4)]());let _0x189fcd;if(_0x504864)_0x189fcd=Number(_0x504864[0x1][_0x3d68aa(0xa7)](/\s+/g,''))-_0xe406f3;let _0x59b716=_0x5f5549;if(_0x189fcd!=null&&_0x5f5549!==_0x189fcd){_0x59b716=_0x189fcd;if(_0x5f5549<_0x189fcd)_0x538e26=![];else{const _0xb5fb60=_0x5f5549-_0x189fcd;_0x444235['pb']===0x0?_0x444235['assumedPb']=_0x444235['assumedPb']||_0xb5fb60:_0x25fe46=_0xb5fb60;}}let _0x5c0505=![];for(const _0x5eadde of Parser[_0x3d68aa(0xa6)]){const _0x2cf239=Parser['getAbilityModNumber'](_0x2d063a[_0x5eadde]);if(_0x2cf239===_0x59b716){_0x5dd557=_0x5eadde,_0x5c0505=!![];break;}}if(!_0x5c0505&&_0x444235['assumedPb']){const _0x535290=_0x444235[_0x3d68aa(0xb1)]+Parser['getAbilityModNumber'](_0x2d063a[_0x5dd557])+_0x25fe46;if(_0x535290!==_0x1ad0ba){const _0x1ec153=_0x1ad0ba-_0x535290;_0x25fe46+=_0x1ec153;}}}}const {isAttack:_0x1e0c9d,actionType:_0x1e156d}=DataConverter[_0x3d68aa(0xd1)](_0x1a069c);return{'damageTuples':_0x34193a,'offensiveAbility':_0x5dd557,'isAttack':_0x1e0c9d,'rangeShort':_0x512571,'rangeLong':_0x30debb,'actionType':_0x1e156d,'isProficient':_0x538e26,'attackBonus':_0x25fe46};}static async[_0x15d903(0xbb)](_0x432e97,_0x5d6639,_0x2bda3b,_0x168e2d){const _0x468ded=_0x15d903;_0x168e2d=_0x168e2d||{};const _0x444ed0=await this[_0x468ded(0xcf)](_0x432e97,_0x5d6639,_0x2bda3b,_0x168e2d);if(_0x444ed0)return _0x444ed0;if(_0x5d6639['name']){if(_0x5d6639[_0x468ded(0xb9)][_0x468ded(0xa0)]()[_0x468ded(0xab)](_0x468ded(0xe2)))return _0x468ded(0xde)+SharedConsts[_0x468ded(0x96)]+_0x468ded(0xc6);if(/^eye ray/i['test'](_0x5d6639[_0x468ded(0xb9)]))return _0x468ded(0xde)+SharedConsts[_0x468ded(0x96)]+_0x468ded(0xb5);}return _0x468ded(0xde)+SharedConsts[_0x468ded(0x96)]+_0x468ded(0xae);}static async[_0x15d903(0xcf)](_0x4914e9,_0x4def0b,_0x6b24bf,_0x122d0c){const _0x1e6fe1=_0x15d903;_0x122d0c=_0x122d0c||{};const _0x13d8b2=await DataConverter[_0x1e6fe1(0xbe)](_0x1e6fe1(0xcc),_0x4def0b);if(_0x13d8b2)return _0x13d8b2;const _0x321c49=await DataConverter[_0x1e6fe1(0xdb)](_0x1e6fe1(0xcc),_0x4def0b,{'fnGetAliases':this[_0x1e6fe1(0xb0)][_0x1e6fe1(0xd0)](this,{'isAttack':_0x122d0c[_0x1e6fe1(0xc7)],'isLegendary':_0x122d0c[_0x1e6fe1(0xd3)]}),'isIgnoreSrd':!![]});if(_0x321c49)return _0x321c49;const _0x323def=await DataConverter[_0x1e6fe1(0xca)](_0x1e6fe1(0xcc),_0x4def0b,{'fnGetAliases':this[_0x1e6fe1(0xb0)]['bind'](this,{'isAttack':_0x122d0c[_0x1e6fe1(0xc7)],'isLegendary':_0x122d0c['isLegendary']})});if(_0x323def)return _0x323def;return null;}static async[_0x15d903(0xb2)](_0x3f4224,_0x5f0842,_0x48f625,_0x4aec8f){const _0x2f038e=_0x15d903;_0x4aec8f=_0x4aec8f||{};const _0x55cdc8=await this[_0x2f038e(0xcf)](_0x3f4224,_0x5f0842,_0x48f625,_0x4aec8f);if(_0x55cdc8)return _0x55cdc8;return _0x2f038e(0xde)+SharedConsts[_0x2f038e(0x96)]+_0x2f038e(0xac);}static async[_0x15d903(0x95)](_0x3b326a,_0x370249,_0x3b484b){const _0x1868f6=_0x15d903,_0x5a417b=await this['_getFeatureImage'](_0x3b326a,_0x370249,_0x3b484b);if(_0x5a417b)return _0x5a417b;return'modules/'+SharedConsts[_0x1868f6(0x96)]+'/media/icon/mountain-cave.svg';}static async[_0x15d903(0x99)](_0x19e4ec,_0x19623e,_0x5a591c){const _0x1463b5=_0x15d903,_0x331c37=await this['_getFeatureImage'](_0x19e4ec,_0x19623e,_0x5a591c);if(_0x331c37)return _0x331c37;return _0x1463b5(0xde)+SharedConsts[_0x1463b5(0x96)]+_0x1463b5(0xbf);}static[_0x15d903(0xb0)](_0x4ad87d,_0x28665a){const _0x4f870b=_0x15d903;if(!_0x28665a[_0x4f870b(0xb9)])return[];const _0xcbfef3=[],_0x45799f=_0x28665a[_0x4f870b(0xb9)][_0x4f870b(0xa7)](/\([^)]+\)/g,'')[_0x4f870b(0xa7)](/\s+/g,'\x20')[_0x4f870b(0xd4)]();if(_0x45799f!==_0x28665a['name'])_0xcbfef3['push'](_0x45799f);const _0x21e8c7=_0x28665a[_0x4f870b(0xb9)][_0x4f870b(0xa7)](/{@[^}]+}/g,'')[_0x4f870b(0xa7)](/\s+/g,'\x20')['trim']();if(_0x21e8c7!==_0x28665a['name'])_0xcbfef3[_0x4f870b(0x9e)](_0x21e8c7);if(_0x4ad87d[_0x4f870b(0xd3)])_0xcbfef3['push'](_0x28665a['name']+'\x20(Legendary)');if(_0x4ad87d[_0x4f870b(0xc7)])_0xcbfef3[_0x4f870b(0x9e)](_0x28665a[_0x4f870b(0xb9)]+_0x4f870b(0xd8));return _0xcbfef3;}static[_0x15d903(0x9b)](_0x5588a8,_0xa7d4bc,_0x51cb72){const _0x3d2d18=_0x15d903,_0x2edf59={};return Object[_0x3d2d18(0xe1)](UtilActors['SKILL_ABV_TO_FULL'])[_0x3d2d18(0xb7)](([_0x4a198a,_0x601b35])=>{const _0x390d44=_0x3d2d18,_0x21e6a2=Parser[_0x390d44(0x92)](_0x601b35);let _0x2f92a7=0x0,_0x377456=Parser[_0x390d44(0xc5)](_0x5588a8[_0x21e6a2]),_0x313b84=0x0;if(_0x5588a8[_0x390d44(0xd5)]&&_0x5588a8[_0x390d44(0xd5)][_0x601b35]){const _0x462d5a=Number(_0x5588a8[_0x390d44(0xd5)][_0x601b35]);if(!isNaN(_0x462d5a)){const _0x3875cc=Parser[_0x390d44(0xc5)](_0x5588a8[_0x21e6a2]),_0x46b32e=_0x3875cc+_0x51cb72[_0x390d44(0xb1)],_0xdf5f62=_0x3875cc+0x2*_0x51cb72[_0x390d44(0xb1)];if(_0x46b32e===_0x462d5a)_0x2f92a7=0x1;else{if(_0xdf5f62===_0x462d5a)_0x2f92a7=0x2;else{const _0x34cc3d=Math['abs'](_0x462d5a-_0x46b32e),_0x4cb226=Math[_0x390d44(0x93)](_0x462d5a-_0xdf5f62);if(_0x34cc3d<_0x4cb226)_0x2f92a7=0x1;else _0x2f92a7=0x2;const _0x2247a=_0x2f92a7===0x2?_0xdf5f62:_0x46b32e;console['warn'](...LGT,_0x390d44(0xdf)+_0x5588a8['name']+_0x390d44(0xaa)+_0x5588a8[_0x390d44(0xa3)]+_0x390d44(0xb8)+_0x601b35+_0x390d44(0x97)+_0x5588a8[_0x390d44(0xd5)][_0x601b35]+_0x390d44(0x98)+(_0x2f92a7===0x2?_0x390d44(0xc9):_0x390d44(0xba))+_0x390d44(0xa1)+UiUtil[_0x390d44(0xdd)](_0x2247a)+'\x22)\x20will\x20be\x20used.');}}}}_0x2edf59[_0x4a198a]={'value':_0x2f92a7,'ability':_0x21e6a2,'mod':_0x377456,'bonus':_0x313b84,'passive':0xa+_0x377456};}),_0x2edf59;}static[_0x15d903(0xcd)](_0x5e3ba2,_0x46b4df,_0x2653db){const _0x5aad26=_0x15d903,_0x21645e={};_0x21645e[_0x5aad26(0xe0)]={'value':0x0,'max':0x0};if(_0x5e3ba2[_0x5aad26(0xc8)]&&_0x5e3ba2[_0x5aad26(0xc8)][_0x5aad26(0xcb)](_0x14964d=>_0x14964d[_0x5aad26(0x94)]))for(let _0x57f7ab=0x1;_0x57f7ab<0xa;++_0x57f7ab){const _0x168c45=_0x5aad26(0xa8)+_0x57f7ab;_0x21645e[_0x168c45]=_0x21645e[_0x168c45]||{'value':0x0,'max':0x0},_0x5e3ba2['spellcasting'][_0x5aad26(0x9d)](_0x1491fa=>_0x1491fa[_0x5aad26(0x94)]&&_0x1491fa[_0x5aad26(0x94)][_0x57f7ab]&&_0x1491fa[_0x5aad26(0x94)][_0x57f7ab][_0x5aad26(0xd7)])[_0x5aad26(0xb7)](_0x42611a=>{const _0xf0243d=_0x5aad26,_0x3257ae=_0x42611a[_0xf0243d(0x94)][_0x57f7ab];if(_0x3257ae[_0xf0243d(0xa2)]){_0x21645e['pact']=_0x21645e[_0xf0243d(0xa5)]||{'value':0x0,'max':0x0,'level':_0x2653db['spellLevel'],'override':0x0},_0x21645e['pact'][_0xf0243d(0xc0)]+=_0x3257ae['slots'],_0x21645e[_0xf0243d(0xa5)][_0xf0243d(0xc1)]+=_0x3257ae[_0xf0243d(0xd7)],_0x21645e[_0xf0243d(0xa5)][_0xf0243d(0xa9)]+=_0x3257ae[_0xf0243d(0xd7)];return;}_0x21645e[_0x168c45][_0xf0243d(0xc0)]+=_0x3257ae[_0xf0243d(0xd7)],_0x21645e[_0x168c45][_0xf0243d(0xc1)]+=_0x3257ae[_0xf0243d(0xd7)];});}else for(let _0xd59a35=0x1;_0xd59a35<0xa;++_0xd59a35){_0x21645e['spell'+_0xd59a35]={'value':0x0,'max':0x0};}return _0x21645e;}}export{DataConverterCreature};