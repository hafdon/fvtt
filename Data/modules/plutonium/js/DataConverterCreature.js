const _0x4fa5=['pGetActorItemCompendiumImage','override','foundryData','intToBonus','pGetSpellcastingImage','getDamageTupleMetas','getDataSpells','exec','slots','1556769KOItyO','breath\x20weapons','pGetLairActionImage','\x20Attack','max','startsWith','ABIL_ABVS','_getFeatureSrdAliases','3xzHGnQ','259146nhwwCP','replace','952042YzgSfG','spellLevel','29oPAraw','modules/','1128136iQSkYr','abs','filter','getAttackActionType','/media/icon/eyestalk.svg','foundryFlags','/media/icon/spell-book.svg','/media/icon/mighty-force.svg','str','getAbilityModNumber','_foundryData','750335krvKkG','MODULE_NAME','monsterFeature','entries','forEach','length','skill','_getFeatureImage','name','spellcasting','toLowerCase','getAttackRange','test','skillToAbilityAbv','getParsedActionEntryData','isAttack','trim','bind',')\x20skill\x20\x22','spells','isLegendary','some','string','2hjVdLq','\x22\x20bonus\x20\x22','assumedPb','_foundryFlags','getDataSkills','53591BslOUg','\x22)\x20will\x20be\x20used.','893881aQhMxT','value','SKILL_ABV_TO_FULL','pact','proficient','push','\x22\x20(','1Mctxib','\x22\x20did\x20not\x20match\x20an\x20expected\x20modifier/proficiency\x20amount!\x20A\x20fallback\x20value\x20(\x22','_pGetParsedAction_getImg','source','getDamagePartsAndOtherFormula','/media/icon/dragon-breath.svg'];const _0x4d35=function(_0xcc5504,_0x64fdf3){_0xcc5504=_0xcc5504-0x1df;let _0x4fa5e7=_0x4fa5[_0xcc5504];return _0x4fa5e7;};const _0x4e44be=_0x4d35;(function(_0x58d8b2,_0x5b105d){const _0x47633d=_0x4d35;while(!![]){try{const _0x1d05cf=parseInt(_0x47633d(0x221))*parseInt(_0x47633d(0x1fc))+-parseInt(_0x47633d(0x1f1))+-parseInt(_0x47633d(0x218))*parseInt(_0x47633d(0x1ef))+-parseInt(_0x47633d(0x1e2))+-parseInt(_0x47633d(0x1eb))+parseInt(_0x47633d(0x213))*parseInt(_0x47633d(0x21a))+-parseInt(_0x47633d(0x1ea))*-parseInt(_0x47633d(0x1ed));if(_0x1d05cf===_0x5b105d)break;else _0x58d8b2['push'](_0x58d8b2['shift']());}catch(_0x30904c){_0x58d8b2['push'](_0x58d8b2['shift']());}}}(_0x4fa5,0xdac21));import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';class DataConverterCreature{static async['pGetParsedAction'](_0x249965,_0x39218c,_0x872ea0){const _0x413f2a=_0x4d35,{damageTuples:_0x2b79e4,formula:_0x38a957,offensiveAbility:_0x23db7c,isAttack:_0x6026c7,rangeShort:_0x28d104,rangeLong:_0x9dc2d6,actionType:_0x174da7,isProficient:_0xd1466f,attackBonus:_0xf9d280}=this[_0x413f2a(0x20a)](_0x249965,_0x39218c,_0x872ea0),_0x5e0467=await this[_0x413f2a(0x223)](_0x249965,_0x39218c,_0x872ea0,{'isAttack':_0x6026c7});return{'damageTuples':_0x2b79e4,'formula':_0x38a957,'offensiveAbility':_0x23db7c,'isAttack':_0x6026c7,'rangeShort':_0x28d104,'rangeLong':_0x9dc2d6,'actionType':_0x174da7,'isProficient':_0xd1466f,'attackBonus':_0xf9d280,'_foundryData':_0x39218c[_0x413f2a(0x1fb)],'foundryData':_0x39218c[_0x413f2a(0x229)],'_foundryFlags':_0x39218c[_0x413f2a(0x216)],'foundryFlags':_0x39218c[_0x413f2a(0x1f6)],'img':_0x5e0467};}static[_0x4e44be(0x20a)](_0x3a8933,_0x3ddde0,_0x3b8cbf){const _0x59e8a0=_0x4e44be;if(!(_0x3ddde0[_0x59e8a0(0x1ff)]&&_0x3ddde0['entries'][0x0]&&typeof _0x3ddde0['entries'][0x0]===_0x59e8a0(0x212)))return;let _0x44923c=!![];const _0x462d78=[];let _0x225f6d=_0x59e8a0(0x1f9),_0xe27d53=0x0;const _0x3c326a=_0x3ddde0['entries'][0x0],{damageTupleMetas:_0x41cec3}=DataConverter[_0x59e8a0(0x22c)](_0x3c326a),{damageParts:_0x23a1b8,formula:_0xdb186a}=DataConverter[_0x59e8a0(0x225)](_0x41cec3);_0x462d78[_0x59e8a0(0x21f)](..._0x23a1b8);const {rangeShort:_0x513f43,rangeLong:_0x55fd8a}=DataConverter[_0x59e8a0(0x207)](_0x3c326a),_0xfef5b8=/{@hit ([^}]+)}/gi[_0x59e8a0(0x1e0)](_0x3c326a);if(_0xfef5b8){const _0x15f597=Number(_0xfef5b8[0x1]);if(!isNaN(_0x15f597)){const _0x175676=/\+(\d)/[_0x59e8a0(0x1e0)](_0x3ddde0[_0x59e8a0(0x204)]||''),_0x3c65fc=_0x175676?Number(_0x175676[0x0]):0x0,_0xce5b7a=_0x15f597-_0x3c65fc-_0x3b8cbf[_0x59e8a0(0x215)],_0x5d5df1=_0x462d78[_0x59e8a0(0x201)]?_0x462d78[0x0][0x0]||'':'',_0x29b3f2=/\d+\s*([-+]\s*\d+)$/[_0x59e8a0(0x1e0)](_0x5d5df1[_0x59e8a0(0x20c)]());let _0x427b8e;if(_0x29b3f2)_0x427b8e=Number(_0x29b3f2[0x1][_0x59e8a0(0x1ec)](/\s+/g,''))-_0x3c65fc;let _0x584fad=_0xce5b7a;if(_0x427b8e!=null&&_0xce5b7a!==_0x427b8e){_0x584fad=_0x427b8e;if(_0xce5b7a<_0x427b8e)_0x44923c=![];else{const _0x2f2936=_0xce5b7a-_0x427b8e;_0x3b8cbf['pb']===0x0?_0x3b8cbf['assumedPb']=_0x3b8cbf[_0x59e8a0(0x215)]||_0x2f2936:_0xe27d53=_0x2f2936;}}let _0x21bab7=![];for(const _0xad6b20 of Parser[_0x59e8a0(0x1e8)]){const _0x2a8629=Parser[_0x59e8a0(0x1fa)](_0x3a8933[_0xad6b20]);if(_0x2a8629===_0x584fad){_0x225f6d=_0xad6b20,_0x21bab7=!![];break;}}if(!_0x21bab7&&_0x3b8cbf['assumedPb']){const _0x1338e4=_0x3b8cbf[_0x59e8a0(0x215)]+Parser['getAbilityModNumber'](_0x3a8933[_0x225f6d])+_0xe27d53;if(_0x1338e4!==_0x15f597){const _0x453c48=_0x15f597-_0x1338e4;_0xe27d53+=_0x453c48;}}}}const {isAttack:_0x4db05b,actionType:_0x29073e}=DataConverter[_0x59e8a0(0x1f4)](_0x3c326a);return{'damageTuples':_0x462d78,'formula':_0xdb186a,'offensiveAbility':_0x225f6d,'isAttack':_0x4db05b,'rangeShort':_0x513f43,'rangeLong':_0x55fd8a,'actionType':_0x29073e,'isProficient':_0x44923c,'attackBonus':_0xe27d53};}static async['_pGetParsedAction_getImg'](_0x498a43,_0x237495,_0x31c05f,_0x2e47a6){const _0x6aeb07=_0x4e44be;_0x2e47a6=_0x2e47a6||{};const _0xf1b6c8=await this[_0x6aeb07(0x203)](_0x498a43,_0x237495,_0x31c05f,_0x2e47a6);if(_0xf1b6c8)return _0xf1b6c8;if(_0x237495['name']){if(_0x237495[_0x6aeb07(0x204)][_0x6aeb07(0x206)]()[_0x6aeb07(0x1e7)](_0x6aeb07(0x1e3)))return _0x6aeb07(0x1f0)+SharedConsts[_0x6aeb07(0x1fd)]+_0x6aeb07(0x226);if(/^eye ray/i[_0x6aeb07(0x208)](_0x237495[_0x6aeb07(0x204)]))return'modules/'+SharedConsts[_0x6aeb07(0x1fd)]+_0x6aeb07(0x1f5);}return _0x6aeb07(0x1f0)+SharedConsts[_0x6aeb07(0x1fd)]+'/media/icon/mailed-fist.svg';}static async[_0x4e44be(0x203)](_0x1834b0,_0x4a8403,_0x28a0e5,_0x31ce7e){const _0x4c7baa=_0x4e44be;_0x31ce7e=_0x31ce7e||{};const _0x452f29=await DataConverter['pGetIconImage'](_0x4c7baa(0x1fe),_0x4a8403);if(_0x452f29)return _0x452f29;const _0x4e41b1=await DataConverter['pGetCompendiumImage'](_0x4c7baa(0x1fe),_0x4a8403,{'fnGetAliases':this['_getFeatureSrdAliases'][_0x4c7baa(0x20d)](this,{'isAttack':_0x31ce7e[_0x4c7baa(0x20b)],'isLegendary':_0x31ce7e[_0x4c7baa(0x210)]}),'isIgnoreSrd':!![]});if(_0x4e41b1)return _0x4e41b1;const _0x505a87=await DataConverter[_0x4c7baa(0x227)](_0x4c7baa(0x1fe),_0x4a8403,{'fnGetAliases':this[_0x4c7baa(0x1e9)][_0x4c7baa(0x20d)](this,{'isAttack':_0x31ce7e[_0x4c7baa(0x20b)],'isLegendary':_0x31ce7e['isLegendary']})});if(_0x505a87)return _0x505a87;return null;}static async['pGetTraitReactionLegendaryImage'](_0x53ab85,_0x1b2222,_0x560412,_0x5b1ed3){const _0x18b894=_0x4e44be;_0x5b1ed3=_0x5b1ed3||{};const _0x3a65d2=await this[_0x18b894(0x203)](_0x53ab85,_0x1b2222,_0x560412,_0x5b1ed3);if(_0x3a65d2)return _0x3a65d2;return _0x18b894(0x1f0)+SharedConsts[_0x18b894(0x1fd)]+_0x18b894(0x1f8);}static async[_0x4e44be(0x1e4)](_0x2ba4de,_0x40a0a0,_0x559206){const _0x47899d=_0x4e44be,_0x4923aa=await this[_0x47899d(0x203)](_0x2ba4de,_0x40a0a0,_0x559206);if(_0x4923aa)return _0x4923aa;return'modules/'+SharedConsts['MODULE_NAME']+'/media/icon/mountain-cave.svg';}static async[_0x4e44be(0x22b)](_0x3345f3,_0x2b9d88,_0xdb58b3){const _0x152c1f=_0x4e44be,_0x43476b=await this[_0x152c1f(0x203)](_0x3345f3,_0x2b9d88,_0xdb58b3);if(_0x43476b)return _0x43476b;return _0x152c1f(0x1f0)+SharedConsts[_0x152c1f(0x1fd)]+_0x152c1f(0x1f7);}static['_getFeatureSrdAliases'](_0x22d8fe,_0x1df0a7){const _0x4f178e=_0x4e44be;if(!_0x1df0a7['name'])return[];const _0x4e44c3=[],_0xcd99a0=_0x1df0a7[_0x4f178e(0x204)][_0x4f178e(0x1ec)](/\([^)]+\)/g,'')['replace'](/\s+/g,'\x20')[_0x4f178e(0x20c)]();if(_0xcd99a0!==_0x1df0a7['name'])_0x4e44c3['push'](_0xcd99a0);const _0x3ab419=_0x1df0a7[_0x4f178e(0x204)][_0x4f178e(0x1ec)](/{@[^}]+}/g,'')[_0x4f178e(0x1ec)](/\s+/g,'\x20')[_0x4f178e(0x20c)]();if(_0x3ab419!==_0x1df0a7[_0x4f178e(0x204)])_0x4e44c3[_0x4f178e(0x21f)](_0x3ab419);if(_0x22d8fe['isLegendary'])_0x4e44c3[_0x4f178e(0x21f)](_0x1df0a7[_0x4f178e(0x204)]+'\x20(Legendary)');if(_0x22d8fe[_0x4f178e(0x20b)])_0x4e44c3[_0x4f178e(0x21f)](_0x1df0a7[_0x4f178e(0x204)]+_0x4f178e(0x1e5));const _0x5096c0=_0x1df0a7[_0x4f178e(0x204)]['replace'](/ Attack$/,'');if(_0x5096c0!==_0x1df0a7[_0x4f178e(0x204)])_0x4e44c3[_0x4f178e(0x21f)](_0x5096c0);return _0x4e44c3;}static[_0x4e44be(0x217)](_0x40d37b,_0x3a1060,_0x8afad0){const _0x55c732=_0x4e44be,_0x48a9c6={};return Object[_0x55c732(0x1ff)](UtilActors[_0x55c732(0x21c)])[_0x55c732(0x200)](([_0x1d1c5c,_0x3593d9])=>{const _0x4636e8=_0x55c732,_0x4c54ee=Parser[_0x4636e8(0x209)](_0x3593d9);let _0x405cfc=0x0,_0x5b7b2b=Parser['getAbilityModNumber'](_0x40d37b[_0x4c54ee]),_0x5cd493=0x0;if(_0x40d37b[_0x4636e8(0x202)]&&_0x40d37b[_0x4636e8(0x202)][_0x3593d9]){const _0x1ce517=Number(_0x40d37b[_0x4636e8(0x202)][_0x3593d9]);if(!isNaN(_0x1ce517)){const _0x54bc40=Parser[_0x4636e8(0x1fa)](_0x40d37b[_0x4c54ee]),_0x50f3d9=_0x54bc40+_0x8afad0['assumedPb'],_0x1202ba=_0x54bc40+0x2*_0x8afad0[_0x4636e8(0x215)];if(_0x50f3d9===_0x1ce517)_0x405cfc=0x1;else{if(_0x1202ba===_0x1ce517)_0x405cfc=0x2;else{const _0x165883=Math[_0x4636e8(0x1f2)](_0x1ce517-_0x50f3d9),_0x37c783=Math[_0x4636e8(0x1f2)](_0x1ce517-_0x1202ba);if(_0x165883<_0x37c783)_0x405cfc=0x1;else _0x405cfc=0x2;const _0x3f616b=_0x405cfc===0x2?_0x1202ba:_0x50f3d9;console['warn'](...LGT,'Creature\x20\x22'+_0x40d37b[_0x4636e8(0x204)]+_0x4636e8(0x220)+_0x40d37b[_0x4636e8(0x224)]+_0x4636e8(0x20e)+_0x3593d9+_0x4636e8(0x214)+_0x40d37b[_0x4636e8(0x202)][_0x3593d9]+_0x4636e8(0x222)+(_0x405cfc===0x2?'expert':_0x4636e8(0x21e))+'\x22\x20=\x20\x22'+UiUtil[_0x4636e8(0x22a)](_0x3f616b)+_0x4636e8(0x219));}}}}_0x48a9c6[_0x1d1c5c]={'value':_0x405cfc,'ability':_0x4c54ee,'mod':_0x5b7b2b,'bonus':_0x5cd493,'passive':0xa+_0x5b7b2b};}),_0x48a9c6;}static[_0x4e44be(0x1df)](_0x32f8a3,_0x42940a,_0x71d2b4){const _0xa3135e=_0x4e44be,_0x518ca2={};_0x518ca2['spell0']={'value':0x0,'max':0x0};if(_0x32f8a3[_0xa3135e(0x205)]&&_0x32f8a3['spellcasting'][_0xa3135e(0x211)](_0x3d8141=>_0x3d8141[_0xa3135e(0x20f)]))for(let _0x54ca1d=0x1;_0x54ca1d<0xa;++_0x54ca1d){const _0x5acec4='spell'+_0x54ca1d;_0x518ca2[_0x5acec4]=_0x518ca2[_0x5acec4]||{'value':0x0,'max':0x0},_0x32f8a3[_0xa3135e(0x205)][_0xa3135e(0x1f3)](_0x1876fb=>_0x1876fb[_0xa3135e(0x20f)]&&_0x1876fb[_0xa3135e(0x20f)][_0x54ca1d]&&_0x1876fb[_0xa3135e(0x20f)][_0x54ca1d][_0xa3135e(0x1e1)])[_0xa3135e(0x200)](_0x452d5b=>{const _0x32041f=_0xa3135e,_0x5a7fe9=_0x452d5b['spells'][_0x54ca1d];if(_0x5a7fe9['lower']){_0x518ca2[_0x32041f(0x21d)]=_0x518ca2[_0x32041f(0x21d)]||{'value':0x0,'max':0x0,'level':_0x71d2b4[_0x32041f(0x1ee)],'override':0x0},_0x518ca2['pact'][_0x32041f(0x21b)]+=_0x5a7fe9[_0x32041f(0x1e1)],_0x518ca2[_0x32041f(0x21d)][_0x32041f(0x1e6)]+=_0x5a7fe9[_0x32041f(0x1e1)],_0x518ca2[_0x32041f(0x21d)][_0x32041f(0x228)]+=_0x5a7fe9['slots'];return;}_0x518ca2[_0x5acec4][_0x32041f(0x21b)]+=_0x5a7fe9['slots'],_0x518ca2[_0x5acec4][_0x32041f(0x1e6)]+=_0x5a7fe9[_0x32041f(0x1e1)];});}else for(let _0x2cf6c0=0x1;_0x2cf6c0<0xa;++_0x2cf6c0){_0x518ca2['spell'+_0x2cf6c0]={'value':0x0,'max':0x0};}return _0x518ca2;}}export{DataConverterCreature};