'use strict';const _0x5d99=['plutonium.configUpdate','books.json','warn','pSet','data/optionalfeatures.json','pGetWithCache','importAdventure','published','$getHoverContent_statsCode','entries','HOMEBREW_CUSTOM_REPO_URL','_getTokenUrl','adventure','content','33389JkDqtH','80ZzaypG','getImageUrlFromFluff','monster','init','getRollableEntryDice','map','pSetClient','pGetClassSubclassFeatureAdditionalData','17921dRUNHl','import','pGetHomebrewSources','hasSourceJson','baseMediaUrls','476326YJCyAy','/data/','addToHomebrewSourceLookup','pGetItemFluff','source','pGetCreatureFluffIndex','adventures.json','pGetRollableTables','2189pSvMfU','data/fluff-items.json','https://5e.tools/','isNonstandardSource','data/spells/','1CGFlHn','string','external','HOMEBREW_INDEX','pGetCreatureIndex','sourceJsonToSource','loadJSON','replace','pGetIconLookup','notifications','url','pGetAllSpells','warning','pGetOptionalFeatureAdditionalData','images','parse','data/races.json','_PATCHED_GET_ROLLABLE_ENTRY_DICE','get','filter','HOMEBREW_COLLECTION_INDEX','toRoll','foundrySubclassFeature','data/vehicles.json','pDoPreload','RUN_TIME','path','47BYJBHf','values','[[/r\x20','DATA_URL_CONDITIONSDISEASES','pGetClasses','abbreviation','img','options','foundrySpell','sort','data','_BASE_SITE_URL','split','getAdventureUrl','data/spells/foundry.json','STR_SEE_CONSOLE','_getAdventureBookUrl','_pubDate','HOMEBREW_META_SOURCES','doMonkeyPatch','_CACHED_GET_ROLLABLE_ENTRY_DICE','data/','pGetBookIndex','json','data/bestiary/index.json','DATA_URL_VEHICLES','danger','Loaded\x20homebrew\x20index.','hasToken','flat','trim','all','style=\x22color:\x20#','pGetItems','has','_PAGE','$getHoverContent_generic','pLoadImporterSourceSpecial','Z_INDEX_MAX_FOUNDRY','pGetPackageIndex','getContent','withUnpatchedDiceRendering','item','DATA_URL_VARIANTRULES','getSpellUrl','data/backgrounds.json','MODULE_NAME','BESTIARY_FLUFF_INDEX','_STORABLE','12776UHvJfC','1970-01-01','CACHE_REQUESTS_IN_FLIGHT','pAddToHomebrew','data/conditionsdiseases.json','icon-','SOURCE_JSON_TO_ABV','pGetAllCreatures','pLoadPropIndex','homebrewMeta','sourceJsonToFull','$getHoverContent_stats','BASE_SITE_URL','pGet','getTokenUrl','__prop','bind','forEach','hover','href','pGetSpellAdditionalData','prompt','9qLAZnW','cacheKey','setBaseMediaUrl','error','vehicle','table','NO_PAGE','pDoHandleBrewJson','2PIJVpR','foundryClassFeature','toMessage','copy','pGetChangelog','data/variantrules.json','book','getJsonSources','_pGetAdventureBookIndex','getCreatureUrl','25791XQrNqi','keys','link','getInternalImageUrl','BESTIARY_TOKEN_LOOKUP','setBaseUrl','tokenUrl','startsWith','legacyDiceToString','join','MIN_Z_INDEX','info','CACHED_REQUESTS','PG_MANAGE_BREW','class','type','40165fOxMbE','isNoLocalData','indexUrl','color','pRollEntry','pGetSpellIndex','race','data/psionics.json','_pGetHomebrewIndex','pLoadAll','_meta','sources','internal','modules/','name','pGetAdventureIndex','31TqBwSc','length','doToast','toLowerCase','.json','Failed\x20to\x20load\x20homebrew\x20index!\x20','data/foundry-optionalfeatures.json','baseSiteUrl','data/spells/index.json','data/class/foundry.json','getFileUrl','special','baseUrl','?t=','img/','img/blank.png'];const _0xb15e=function(_0x3bc7e3,_0x1b69a1){_0x3bc7e3=_0x3bc7e3-0x152;let _0x5d99dc=_0x5d99[_0x3bc7e3];return _0x5d99dc;};const _0x22c4fc=_0xb15e;(function(_0x31c4ea,_0x78401b){const _0xa9c941=_0xb15e;while(!![]){try{const _0x5ddbb4=-parseInt(_0xa9c941(0x1f2))*parseInt(_0xa9c941(0x207))+parseInt(_0xa9c941(0x1f1))*-parseInt(_0xa9c941(0x1a1))+parseInt(_0xa9c941(0x1fa))*parseInt(_0xa9c941(0x1d3))+parseInt(_0xa9c941(0x1c3))+-parseInt(_0xa9c941(0x15a))*parseInt(_0xa9c941(0x18b))+-parseInt(_0xa9c941(0x1a9))*-parseInt(_0xa9c941(0x1ff))+parseInt(_0xa9c941(0x1b3))*parseInt(_0xa9c941(0x20c));if(_0x5ddbb4===_0x78401b)break;else _0x31c4ea['push'](_0x31c4ea['shift']());}catch(_0x517f5b){_0x31c4ea['push'](_0x31c4ea['shift']());}}}(_0x5d99,0x79992));import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{JqueryExtension}from'./JqueryExtension.js';import{Config}from'./Config.js';import{GameStorage}from'./GameStorage.js';import{LGT}from'./Util.js';class NotAxios{static async[_0x22c4fc(0x21e)](_0x1247f2){return{'data':await(await fetch(_0x1247f2))['json']()};}}class Vetools{static async[_0x22c4fc(0x157)](){const _0x214073=_0x22c4fc;await Promise['all']([Vetools['BESTIARY_FLUFF_INDEX']=await Vetools['pGetCreatureFluffIndex'](),DataUtil[_0x214073(0x1f4)]['pPreloadMeta']()]),Vetools['_pGetHomebrewIndex']()['then'](_0xeee102=>{const _0x2e908b=_0x214073;Vetools[_0x2e908b(0x20f)]=_0xeee102,console['log'](...LGT,_0x2e908b(0x175));})['catch'](_0x26507c=>{const _0x2ab8a1=_0x214073;Vetools[_0x2ab8a1(0x20f)]={},ui[_0x2ab8a1(0x215)]['error'](_0x2ab8a1(0x1d8)+VeCt['STR_SEE_CONSOLE']),setTimeout(()=>{throw _0x26507c;});});}static[_0x22c4fc(0x183)](_0x5d45e0){const _0x58d760=_0x22c4fc;Renderer[_0x58d760(0x1f6)]=Vetools[_0x58d760(0x16e)];const _0x3d6a90=_0x5d45e0();return Renderer[_0x58d760(0x1f6)]=Vetools[_0x58d760(0x21d)],_0x3d6a90;}static[_0x22c4fc(0x16d)](){const _0x5888f3=_0x22c4fc;JqueryExtension[_0x5888f3(0x1f5)](),StorageUtil[_0x5888f3(0x1e6)]=GameStorage[_0x5888f3(0x1f8)][_0x5888f3(0x19b)](GameStorage),StorageUtil[_0x5888f3(0x198)]=GameStorage['pGetClient'][_0x5888f3(0x19b)](GameStorage),Renderer[_0x5888f3(0x21e)]()[_0x5888f3(0x1b8)](Vetools[_0x5888f3(0x197)]);if(Config[_0x5888f3(0x21e)](_0x5888f3(0x1fb),'isUseLocalImages'))Renderer[_0x5888f3(0x21e)]()[_0x5888f3(0x1a3)](_0x5888f3(0x160),_0x5888f3(0x1d0)+SharedConsts[_0x5888f3(0x188)]+'/');Hooks['on'](_0x5888f3(0x1e3),()=>Renderer['get']()[_0x5888f3(0x1b8)](Vetools[_0x5888f3(0x197)])),Renderer[_0x5888f3(0x19d)][_0x5888f3(0x1bd)]=Consts[_0x5888f3(0x180)]+0x1,Renderer[_0x5888f3(0x19d)]['_MAX_Z_INDEX']=Renderer[_0x5888f3(0x19d)][_0x5888f3(0x1bd)]+0xa,BrewUtil['homebrew']={},BrewUtil[_0x5888f3(0x194)]={'sources':[]},Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE']=Renderer[_0x5888f3(0x1f6)],Vetools[_0x5888f3(0x21d)]=(_0x3fd01f,_0x4576cd,_0x50ab87=!![],_0xf46d07)=>{const _0x39a25a=_0x5888f3,_0x39e283=MiscUtil[_0x39a25a(0x1ac)](_0x3fd01f);typeof _0x39e283[_0x39a25a(0x154)]!==_0x39a25a(0x20d)&&(_0x39e283['toRoll']=Renderer[_0x39a25a(0x1bb)](_0x39e283[_0x39a25a(0x154)]));if(_0x39e283[_0x39a25a(0x1a0)]){const _0x13e8d3=Math['min'](...Object[_0x39a25a(0x1b4)](_0x39e283['prompt'][_0x39a25a(0x161)])['map'](_0xa59981=>Number(_0xa59981))[_0x39a25a(0x152)](_0x49e4dc=>_0x39e283['prompt'][_0x39a25a(0x161)][_0x49e4dc]));_0x39e283['toRoll']=_0x39e283[_0x39a25a(0x1a0)][_0x39a25a(0x161)][_0x13e8d3];}const _0x43c546=_0x39e283[_0x39a25a(0x154)][_0x39a25a(0x213)](/#\$.*?\$#/g,'0');return _0x39a25a(0x15c)+_0x43c546+']]'+(_0x43c546['toLowerCase']()[_0x39a25a(0x178)]()!==_0xf46d07[_0x39a25a(0x1d6)]()['trim']()?'\x20('+_0xf46d07+')':'');},Renderer['getRollableEntryDice']=Vetools[_0x5888f3(0x21d)];const _0x18dd6c={},_0x5c77d8=[_0x5888f3(0x196),'$getHoverContent_fluff',_0x5888f3(0x1eb),'$getHoverContent_miscCode',_0x5888f3(0x17e)];_0x5c77d8[_0x5888f3(0x19c)](_0x15e126=>{const _0x591d3f=_0x5888f3;_0x18dd6c[_0x15e126]=Renderer[_0x591d3f(0x19d)][_0x15e126],Renderer[_0x591d3f(0x19d)][_0x15e126]=(..._0x3770a1)=>{const _0x4b16f2=_0x591d3f;Renderer['getRollableEntryDice']=Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE'];const _0xd2d5a0=_0x18dd6c[_0x15e126](..._0x3770a1);return Renderer[_0x4b16f2(0x1f6)]=Vetools[_0x4b16f2(0x21d)],_0xd2d5a0;};}),Renderer['dice']['rollerClick']=(_0x3796ba,_0xd20c03,_0x3a3967,_0x2ed81f)=>{const _0x46269e=_0x5888f3,_0x13df2d=JSON[_0x46269e(0x21b)](_0x3a3967);if(_0x13df2d[_0x46269e(0x154)])new Roll(_0x13df2d[_0x46269e(0x154)])[_0x46269e(0x1ab)]();},Renderer['dice'][_0x5888f3(0x1c7)]=(_0x168c4f,_0x490427,_0x579aee)=>{const _0x52ffbb=_0x5888f3;if(_0x168c4f[_0x52ffbb(0x154)])new Roll(_0x168c4f[_0x52ffbb(0x154)])[_0x52ffbb(0x1ab)]();},JqueryUtil[_0x5888f3(0x1d5)]=_0x5891c0=>{const _0x2b37b5=_0x5888f3;typeof _0x5891c0===_0x2b37b5(0x20d)&&(_0x5891c0={'content':_0x5891c0,'type':_0x2b37b5(0x1be)});_0x5891c0[_0x2b37b5(0x1c2)]=_0x5891c0[_0x2b37b5(0x1c2)]||_0x2b37b5(0x1be);switch(_0x5891c0[_0x2b37b5(0x1c2)]){case _0x2b37b5(0x218):return ui[_0x2b37b5(0x215)][_0x2b37b5(0x1e5)](_0x5891c0[_0x2b37b5(0x1f0)]);case _0x2b37b5(0x174):return ui['notifications'][_0x2b37b5(0x1a4)](_0x5891c0[_0x2b37b5(0x1f0)]);default:return ui[_0x2b37b5(0x215)][_0x2b37b5(0x1be)](_0x5891c0['content']);}},DataUtil[_0x5888f3(0x212)]=async _0x2525b7=>Vetools[_0x5888f3(0x1e8)](_0x2525b7),BrewUtil[_0x5888f3(0x1fd)]=_0x3c586a=>!!Vetools[_0x5888f3(0x16c)][(_0x3c586a||'')[_0x5888f3(0x1d6)]()],BrewUtil['sourceJsonToAbv']=_0x1708a5=>(Vetools[_0x5888f3(0x16c)][(_0x1708a5||'')['toLowerCase']()]||{})[_0x5888f3(0x15f)]||_0x1708a5,BrewUtil[_0x5888f3(0x195)]=_0x442aa8=>(Vetools[_0x5888f3(0x16c)][(_0x442aa8||'')[_0x5888f3(0x1d6)]()]||{})['full']||_0x442aa8,BrewUtil[_0x5888f3(0x211)]=_0x455ca9=>Vetools['HOMEBREW_META_SOURCES'][(_0x455ca9||'')['toLowerCase']()],BrewUtil['sourceJsonToStyle']=_0x1e70f0=>{const _0x2bfe65=_0x5888f3,_0x36129d=(_0x1e70f0||'')[_0x2bfe65(0x1d6)]();if(Vetools['HOMEBREW_META_SOURCES'][_0x36129d]&&Vetools[_0x2bfe65(0x16c)][_0x36129d][_0x2bfe65(0x1c6)]){const _0x4baefe=BrewUtil['getValidColor'](Vetools['HOMEBREW_META_SOURCES'][_0x36129d]['color']);if(_0x4baefe[_0x2bfe65(0x1d4)])return _0x2bfe65(0x17a)+_0x4baefe+';\x22';return'';}else return'';},BrewUtil[_0x5888f3(0x1b0)]=()=>Object[_0x5888f3(0x15b)](Vetools[_0x5888f3(0x16c)]),BrewUtil[_0x5888f3(0x18a)]=[...BrewUtil[_0x5888f3(0x18a)],_0x5888f3(0x162),_0x5888f3(0x1aa),_0x5888f3(0x155),'foundryOptionalfeature'],BrewUtil[_0x5888f3(0x17d)]=UrlUtil[_0x5888f3(0x1c0)],BrewUtil['_pCleanSaveBrew']=()=>{};}static[_0x22c4fc(0x201)](_0x118d64){const _0x45c3c7=_0x22c4fc;_0x118d64[_0x45c3c7(0x1cd)]&&_0x118d64[_0x45c3c7(0x1cd)]['sources']&&_0x118d64[_0x45c3c7(0x1cd)][_0x45c3c7(0x1ce)][_0x45c3c7(0x19c)](_0x6feae9=>Vetools[_0x45c3c7(0x16c)][(_0x6feae9['json']||'')['toLowerCase']()]=MiscUtil['copy'](_0x6feae9));}static async['pAddToHomebrew'](_0x4b0138){const _0x25b0a5=_0x22c4fc,_0x5ed9dc=MiscUtil[_0x25b0a5(0x21e)](_0x4b0138,_0x25b0a5(0x1cd),_0x25b0a5(0x1ce));if(!_0x5ed9dc||!(_0x5ed9dc instanceof Array)||!_0x5ed9dc['every'](_0x19eb32=>!Parser[_0x25b0a5(0x191)][_0x19eb32[_0x25b0a5(0x171)]]))return;await BrewUtil[_0x25b0a5(0x1a8)](_0x4b0138,_0x25b0a5(0x1a7));}static async[_0x22c4fc(0x1e8)](_0x5f2db5){const _0x5d1334=_0x22c4fc;if(!_0x5f2db5['includes']('?'))_0x5f2db5=_0x5f2db5+_0x5d1334(0x1e0)+Consts[_0x5d1334(0x158)];const _0x1bf153=_0x5f2db5[_0x5d1334(0x166)](/(^https?:\/\/)/)[_0x5d1334(0x152)](Boolean);_0x1bf153[_0x1bf153[_0x5d1334(0x1d4)]-0x1]=_0x1bf153['last']()[_0x5d1334(0x213)](/\/+/g,'/'),_0x5f2db5=_0x1bf153['join']('');const _0x253660=_0x5f2db5['split']('?')[0x0];if(Vetools['CACHE_REQUESTS_IN_FLIGHT'][_0x253660])return await Vetools['CACHE_REQUESTS_IN_FLIGHT'][_0x253660],Vetools[_0x5d1334(0x1bf)][_0x253660];return Vetools[_0x5d1334(0x18d)][_0x253660]=(async()=>{const _0x140b4f=_0x5d1334;let _0x17f2eb;if(!Config[_0x140b4f(0x21e)](_0x140b4f(0x1fb),_0x140b4f(0x1c4))&&_0x5f2db5[_0x140b4f(0x1ba)](Vetools[_0x140b4f(0x197)]+'data/')){const _0x63fea8=_0x5f2db5[_0x140b4f(0x166)](Vetools[_0x140b4f(0x197)])['slice'](0x1)[_0x140b4f(0x1bc)](Vetools['BASE_SITE_URL']),_0x372c00=_0x140b4f(0x1d0)+SharedConsts[_0x140b4f(0x188)]+'/'+_0x63fea8;_0x17f2eb=(await NotAxios['get'](_0x372c00))[_0x140b4f(0x164)];}else _0x17f2eb=(await NotAxios[_0x140b4f(0x21e)](_0x5f2db5))[_0x140b4f(0x164)];return Vetools[_0x140b4f(0x201)](_0x17f2eb),await Vetools[_0x140b4f(0x18e)](_0x17f2eb),await DataUtil['pDoMetaMerge'](_0x253660,_0x17f2eb),Vetools['CACHED_REQUESTS'][_0x253660]=_0x17f2eb;})(),await Vetools[_0x5d1334(0x18d)][_0x253660],Vetools[_0x5d1334(0x1bf)][_0x253660];}static async[_0x22c4fc(0x17f)](_0x35a407){const _0x222f9e=_0x22c4fc;let _0x4d4750;if(_0x35a407[_0x222f9e(0x1de)][_0x222f9e(0x1a2)])_0x4d4750=Vetools[_0x222f9e(0x1bf)][_0x35a407[_0x222f9e(0x1de)]['cacheKey']]||(Vetools[_0x222f9e(0x1bf)][_0x35a407[_0x222f9e(0x1de)][_0x222f9e(0x1a2)]]=await _0x35a407[_0x222f9e(0x1de)][_0x222f9e(0x198)]());else _0x4d4750=await _0x35a407['special'][_0x222f9e(0x198)]();return _0x4d4750;}static async[_0x22c4fc(0x1ad)](){const _0xe53085=_0x22c4fc;return Vetools[_0xe53085(0x1e8)](Vetools['BASE_SITE_URL']+'data/changelog.json');}static async[_0x22c4fc(0x181)](){const _0x1e5c6d=_0x22c4fc;return Vetools[_0x1e5c6d(0x1e8)](Config[_0x1e5c6d(0x21e)](_0x1e5c6d(0x1e9),_0x1e5c6d(0x1c5)));}static async['pGetSpellIndex'](){const _0x38750f=_0x22c4fc;return Vetools['pGetWithCache'](Vetools[_0x38750f(0x197)]+_0x38750f(0x1db));}static[_0x22c4fc(0x186)](_0x1c7dde){const _0x257e42=_0x22c4fc;return Vetools[_0x257e42(0x197)]+_0x257e42(0x20b)+_0x1c7dde;}static async[_0x22c4fc(0x210)](){const _0x158aff=_0x22c4fc;return Vetools[_0x158aff(0x1e8)](Vetools['BASE_SITE_URL']+_0x158aff(0x172));}static[_0x22c4fc(0x1b2)](_0x46d9d9){const _0x3d461c=_0x22c4fc;return Vetools[_0x3d461c(0x197)]+'data/bestiary/'+_0x46d9d9;}static async[_0x22c4fc(0x204)](){const _0x4eec43=_0x22c4fc;return Vetools[_0x4eec43(0x1e8)](Vetools[_0x4eec43(0x197)]+'data/bestiary/fluff-index.json');}static async[_0x22c4fc(0x17b)](_0x4e72f6){const _0x5b18f5=_0x22c4fc;return{'item':await Renderer[_0x5b18f5(0x184)]['pBuildList']({'isAddGroups':!!_0x4e72f6})};}static async[_0x22c4fc(0x202)](){const _0x3b399f=_0x22c4fc,_0x5623a9=Vetools['BASE_SITE_URL']+_0x3b399f(0x208);return Vetools[_0x3b399f(0x1e8)](_0x5623a9);}static async['pGetRaces'](_0x55e627){const _0x2aea4b=_0x22c4fc;_0x55e627=_0x55e627||{};const _0x53a3bf=Vetools[_0x2aea4b(0x197)]+_0x2aea4b(0x21c),_0x103185=await Vetools['pGetWithCache'](_0x53a3bf),_0x374de0=Renderer[_0x2aea4b(0x1c9)]['mergeSubraces'](_0x103185[_0x2aea4b(0x1c9)],_0x55e627);return{'race':_0x374de0};}static async[_0x22c4fc(0x15e)](){const _0xf4e337=_0x22c4fc;return DataUtil[_0xf4e337(0x1c1)]['loadRawJSON']();}static async[_0x22c4fc(0x206)](){const _0x422aaa=_0x22c4fc;return DataUtil[_0x422aaa(0x1a6)][_0x422aaa(0x1cc)]();}static async[_0x22c4fc(0x1b1)](_0x596498,_0x4ea733){const _0x46882a=_0x22c4fc,_0x4b7b44=Vetools[_0x46882a(0x197)]+_0x46882a(0x16f)+_0x596498,_0x2e8077=await Vetools[_0x46882a(0x1e8)](_0x4b7b44);return _0x2e8077[_0x4ea733][_0x46882a(0x19c)](_0x20f533=>_0x20f533[_0x46882a(0x16b)]=new Date(_0x20f533[_0x46882a(0x1ea)]||_0x46882a(0x18c))),_0x2e8077;}static async[_0x22c4fc(0x1d2)](){const _0x1d8592=_0x22c4fc;return this[_0x1d8592(0x1b1)](_0x1d8592(0x205),'adventure');}static async[_0x22c4fc(0x170)](){const _0xa7b369=_0x22c4fc;return this[_0xa7b369(0x1b1)](_0xa7b369(0x1e4),'book');}static['_getAdventureBookUrl'](_0x3fd538,_0x11a6a8){const _0x3a9a8e=_0x22c4fc;return Vetools[_0x3a9a8e(0x197)]+_0x3a9a8e(0x16f)+_0x3fd538+'/'+_0x3fd538+'-'+_0x11a6a8['toLowerCase']()+_0x3a9a8e(0x1d7);}static[_0x22c4fc(0x167)](_0x5a2fc1){const _0x77a5f7=_0x22c4fc;return this['_getAdventureBookUrl'](_0x77a5f7(0x1ef),_0x5a2fc1);}static['getBookUrl'](_0x4f1cc4){const _0xb27065=_0x22c4fc;return this[_0xb27065(0x16a)](_0xb27065(0x1af),_0x4f1cc4);}static[_0x22c4fc(0x1f3)](_0x10d8fb){const _0x421d38=_0x22c4fc;if(_0x10d8fb&&_0x10d8fb[_0x421d38(0x21a)]&&_0x10d8fb[_0x421d38(0x21a)][0x0]){const _0x3ee38e=_0x10d8fb[_0x421d38(0x21a)][0x0];if(_0x3ee38e[_0x421d38(0x19e)]){if(_0x3ee38e[_0x421d38(0x19e)]['type']===_0x421d38(0x1cf))return _0x3ee38e[_0x421d38(0x19e)]['path']?''+Vetools[_0x421d38(0x1b6)](_0x3ee38e[_0x421d38(0x19e)][_0x421d38(0x159)]):'';else{if(_0x3ee38e[_0x421d38(0x19e)][_0x421d38(0x1c2)]===_0x421d38(0x20e))return _0x3ee38e[_0x421d38(0x19e)][_0x421d38(0x216)]||'';}}}}static['hasTokenUrl'](_0x1f412e,_0x4bcbb4){const _0x1aa023=_0x22c4fc;return Vetools[_0x1aa023(0x1ee)](_0x1f412e,_0x4bcbb4)['hasToken'];}static['getTokenUrl'](_0x20d704,_0x1d1b5c){const _0x416a1=_0x22c4fc;return Vetools[_0x416a1(0x1ee)](_0x20d704,_0x1d1b5c)[_0x416a1(0x216)];}static[_0x22c4fc(0x1ee)](_0x1bdba3,_0x19eb64){const _0x555cc2=_0x22c4fc;if(_0x19eb64[_0x555cc2(0x1b9)])return{'url':_0x19eb64[_0x555cc2(0x1b9)],'hasToken':!![]};const _0x1b307a={'url':UrlUtil[_0x555cc2(0x1b5)]((Renderer[_0x555cc2(0x21e)]()[_0x555cc2(0x1fe)][_0x555cc2(0x160)]||Renderer[_0x555cc2(0x21e)]()['baseUrl'])+_0x555cc2(0x1e2)),'hasToken':![]};switch(_0x1bdba3){case _0x555cc2(0x1f4):{if(_0x19eb64[_0x555cc2(0x176)])return{'url':Renderer[_0x555cc2(0x1f4)][_0x555cc2(0x199)](_0x19eb64),'hasToken':!![]};return _0x1b307a;}case'vehicle':{if(_0x19eb64['hasToken'])return{'url':Renderer[_0x555cc2(0x1a5)][_0x555cc2(0x199)](_0x19eb64),'hasToken':!![]};return _0x1b307a;}default:throw new Error('Unhandled\x20entity\x20type\x20\x22'+_0x1bdba3+'\x22');}}static[_0x22c4fc(0x1b6)](_0x55cb5d){const _0x8f5065=_0x22c4fc;return((Renderer['get']()['baseMediaUrls']['img']||Renderer['get']()[_0x8f5065(0x1df)])+_0x8f5065(0x1e1)+encodeURIComponent(_0x55cb5d))[_0x8f5065(0x213)](/'/g,'%27');}static async[_0x22c4fc(0x217)](_0x47d45e=![]){const _0x565270=_0x22c4fc,_0x41cbbb=await Vetools[_0x565270(0x1c8)](),_0x428828=await Promise[_0x565270(0x179)](Object[_0x565270(0x1ec)](_0x41cbbb)[_0x565270(0x152)](([_0x275710])=>!_0x47d45e||!SourceUtil[_0x565270(0x20a)](_0x275710))[_0x565270(0x1f7)](([_0x184977,_0x42c57e])=>Vetools[_0x565270(0x1e8)](Vetools[_0x565270(0x186)](_0x42c57e))));return{'spell':_0x428828['map'](_0x357f5e=>MiscUtil[_0x565270(0x1ac)](_0x357f5e['spell']))[_0x565270(0x177)]()};}static async[_0x22c4fc(0x192)](_0x5ce918=![]){const _0x234449=_0x22c4fc,_0x5db70b=await Vetools[_0x234449(0x210)](),_0x3a6d40=await Promise[_0x234449(0x179)](Object[_0x234449(0x1ec)](_0x5db70b)[_0x234449(0x152)](([_0x16fd76])=>!_0x5ce918||!SourceUtil[_0x234449(0x20a)](_0x16fd76))['map'](async([_0xcc4b63,_0x1698bd])=>({'source':_0xcc4b63,'json':await Vetools[_0x234449(0x1e8)](Vetools[_0x234449(0x1b2)](_0x1698bd))})));return{'monster':_0x3a6d40[_0x234449(0x1f7)](_0x2e1d37=>MiscUtil[_0x234449(0x1ac)](_0x2e1d37[_0x234449(0x171)][_0x234449(0x1f4)][_0x234449(0x152)](_0x4a3f00=>_0x4a3f00[_0x234449(0x203)]===_0x2e1d37[_0x234449(0x203)])))[_0x234449(0x177)]()};}static async[_0x22c4fc(0x1cb)](){const _0x43efa0=_0x22c4fc;let _0x2a76bc={};try{_0x2a76bc=await DataUtil['brew'][_0x43efa0(0x193)]();}catch(_0xd02cda){ui[_0x43efa0(0x215)]['error'](_0x43efa0(0x1d8)+VeCt[_0x43efa0(0x169)]),setTimeout(()=>{throw _0xd02cda;});}return _0x2a76bc;}static async[_0x22c4fc(0x1fc)](..._0xd5aade){const _0xbcc124=_0x22c4fc,_0x242c32=await StorageUtil[_0xbcc124(0x198)](_0xbcc124(0x1ed)),_0x28228b=new Set();return _0xd5aade['map'](_0x55c87a=>{const _0x5d83bd=_0xbcc124;return Object[_0x5d83bd(0x1b4)](Vetools[_0x5d83bd(0x20f)][BrewUtil['dirToProp'](_0x55c87a)]||{})[_0x5d83bd(0x1f7)](_0x4b3eb2=>{const _0x8cc338=_0x5d83bd;if(_0x28228b[_0x8cc338(0x17c)](_0x4b3eb2))return null;return _0x28228b['add'](_0x4b3eb2),{'url':DataUtil['brew'][_0x8cc338(0x1dd)](_0x4b3eb2,_0x242c32),'name':_0x4b3eb2['split']('/')['slice'](0x1)[_0x8cc338(0x1bc)]('/')[_0x8cc338(0x213)](/\.json$/i,'')};});})[_0xbcc124(0x177)]()[_0xbcc124(0x152)](Boolean)[_0xbcc124(0x163)]((_0x191c5b,_0x11e73b)=>SortUtil['ascSortLower'](_0x191c5b[_0xbcc124(0x1d1)],_0x11e73b[_0xbcc124(0x1d1)]));}static[_0x22c4fc(0x182)](_0x216c59,_0x5b5223){const _0x1da5c7=_0x22c4fc;if(!_0x5b5223)return _0x216c59;return _0x5b5223[_0x1da5c7(0x1f7)](_0x2a2f4d=>{const _0x221aaf=_0x1da5c7;return _0x216c59[_0x2a2f4d]=_0x216c59[_0x2a2f4d]||[],_0x216c59[_0x2a2f4d][_0x221aaf(0x19c)](_0x458596=>_0x458596[_0x221aaf(0x19a)]=_0x2a2f4d),_0x216c59[_0x2a2f4d];})[_0x1da5c7(0x177)]();}static async[_0x22c4fc(0x19f)](){const _0x47587b=_0x22c4fc,_0x32499a=Vetools['BASE_SITE_URL']+_0x47587b(0x168);return Vetools[_0x47587b(0x1e8)](_0x32499a);}static async[_0x22c4fc(0x219)](){const _0x30b0b3=_0x22c4fc,_0x3e8c96=Vetools[_0x30b0b3(0x197)]+_0x30b0b3(0x1d9);return Vetools[_0x30b0b3(0x1e8)](_0x3e8c96);}static async[_0x22c4fc(0x1f9)](){const _0x5f19e0=_0x22c4fc,_0x154049=Vetools['BASE_SITE_URL']+_0x5f19e0(0x1dc);return Vetools[_0x5f19e0(0x1e8)](_0x154049);}static async[_0x22c4fc(0x214)](_0x225fa9){const _0xadfc95=_0x22c4fc,_0x383a38=_0xadfc95(0x190)+_0x225fa9+'s.json',_0x16d744=_0xadfc95(0x1d0)+SharedConsts[_0xadfc95(0x188)]+_0xadfc95(0x200)+_0x383a38;return Vetools[_0xadfc95(0x1e8)](_0x16d744);}static get[_0x22c4fc(0x197)](){const _0x5e65c0=_0x22c4fc;let _0x11a071=Config[_0x5e65c0(0x21e)](_0x5e65c0(0x1fb),_0x5e65c0(0x1da));if(_0x11a071&&_0x11a071[_0x5e65c0(0x178)]())return _0x11a071=_0x11a071[_0x5e65c0(0x213)](/^(.*?)([\\/]+)$/,'$1/'),_0x11a071;return Vetools[_0x5e65c0(0x165)];}static get['DATA_URL_FEATS'](){return Vetools['BASE_SITE_URL']+'data/feats.json';}static get['DATA_URL_BACKGROUNDS'](){const _0x30b3d6=_0x22c4fc;return Vetools['BASE_SITE_URL']+_0x30b3d6(0x187);}static get[_0x22c4fc(0x185)](){const _0x25e6cc=_0x22c4fc;return Vetools[_0x25e6cc(0x197)]+_0x25e6cc(0x1ae);}static get['DATA_URL_PSIONICS'](){const _0x5509cd=_0x22c4fc;return Vetools['BASE_SITE_URL']+_0x5509cd(0x1ca);}static get['DATA_URL_OPTIONALFEATURES'](){const _0x46fab9=_0x22c4fc;return Vetools[_0x46fab9(0x197)]+_0x46fab9(0x1e7);}static get[_0x22c4fc(0x15d)](){const _0x23b654=_0x22c4fc;return Vetools[_0x23b654(0x197)]+_0x23b654(0x18f);}static get[_0x22c4fc(0x173)](){const _0x33683f=_0x22c4fc;return Vetools[_0x33683f(0x197)]+_0x33683f(0x156);}}Vetools[_0x22c4fc(0x1bf)]={},Vetools[_0x22c4fc(0x18d)]={},Vetools['_BASE_SITE_URL']=_0x22c4fc(0x209),Vetools[_0x22c4fc(0x189)]=null,Vetools[_0x22c4fc(0x1b7)]=null,Vetools[_0x22c4fc(0x153)]={},Vetools[_0x22c4fc(0x16c)]={},Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE']=null,Vetools[_0x22c4fc(0x21d)]=null;export{Vetools};