'use strict';const _0x5cdc=['pGetPackageIndex','toLowerCase','icon-','pGetItemFluff','data/backgrounds.json','DATA_URL_CONDITIONSDISEASES','catch','sourceJsonToSource','trim','toMessage','isNoLocalData','class','hover','parse','internal','1zIqQnV','link','pGetAllSpells','_pGetHomebrewIndex','url','filter','abbreviation','vehicle','doMonkeyPatch','pGetWithCache','DATA_URL_FEATS','cacheKey','HOMEBREW_CUSTOM_REPO_URL','importAdventure','init','CACHED_REQUESTS','MIN_Z_INDEX','_getAdventureBookUrl','img/','data/foundry-races.json','HOMEBREW_META_SOURCES','_BASE_SITE_URL','options','MODULE_NAME','$getHoverContent_fluff','getBookUrl','pSetClient','books.json','getInternalImageUrl','getCreatureUrl','setBaseMediaUrl','437mNRivn','pLoadPropIndex','all','pGetSpellIndex','data/spells/index.json','DATA_URL_BACKGROUNDS','pBuildList','pGetClasses','indexUrl','sources','sort','NO_PAGE','_PAGE','sourceJsonToFull','getJsonSources','__prop','monster','$1/','$getHoverContent_stats','toRoll','addToHomebrewSourceLookup','setBaseUrl','hasToken','tokenUrl','keys','color','flat','homebrew','item','then','_MAX_Z_INDEX','warning','_pCleanSaveBrew','pGetClassSubclassFeatureAdditionalData','pGetItems','homebrewMeta','BESTIARY_FLUFF_INDEX','forEach','legacyDiceToString','pGetSpellAdditionalData','pGetCreatureIndex','data/bestiary/fluff-index.json','pGetCreatureFluffIndex','last','img/blank.png','DATA_URL_VARIANTRULES','foundryClassFeature','1nQHviX','_CACHED_GET_ROLLABLE_ENTRY_DICE','path','copy','img','join','1067022bzntCB','%27','length','https://5e.tools/','getRollableEntryDice','CACHE_REQUESTS_IN_FLIGHT','pDoMetaMerge','adventures.json','name','data/spells/foundry.json','_pGetAdventureBookIndex','string','_getTokenUrl','images','209530qbpJSn','pGetBookIndex','_meta','dirToProp','STR_SEE_CONSOLE','.json','slice','pGetAllCreatures','_STORABLE','DATA_URL_VEHICLES','pGetAdventureIndex','DATA_URL_PSIONICS','error','entries','warn','bind','180223ldpdGl','replace','adventure','data/spells/','spell','isUseLocalImages','Unhandled\x20entity\x20type\x20\x22','data/foundry-optionalfeatures.json','style=\x22color:\x20#','book','pAddToHomebrew','published','modules/','hasTokenUrl','info','pGet','2063QfqWYx','getContent','getFileUrl','1038896ITqqnm','Loaded\x20homebrew\x20index.','PG_MANAGE_BREW','rollerClick','add','Failed\x20to\x20load\x20homebrew\x20index!\x20','659914utQgyS','sourceJsonToAbv','1970-01-01','full','pGetRaces','pGetOptionalFeatureAdditionalData','isNonstandardSource','pGetChangelog','foundrySpell','prompt','special','pSet','brew','data/bestiary/','import','getValidColor','json','split','map','plutonium.configUpdate','danger','dice','_PATCHED_GET_ROLLABLE_ENTRY_DICE','data','notifications','pDoPreload','HOMEBREW_INDEX','type','SOURCE_JSON_TO_ABV','loadRawJSON','log','data/fluff-items.json','getSpellUrl','data/feats.json','startsWith','pGetClient','DATA_URL_OPTIONALFEATURES','543926SArsXe','BASE_SITE_URL','$getHoverContent_statsCode','pGetHomebrewSources','data/optionalfeatures.json','get','href','table','loadJSON','HOMEBREW_COLLECTION_INDEX','Z_INDEX_MAX_FOUNDRY','content','race','every','data/'];const _0x2f4c=function(_0x29817f,_0x15754e){_0x29817f=_0x29817f-0xa0;let _0x5cdc5a=_0x5cdc[_0x29817f];return _0x5cdc5a;};const _0x2792a3=_0x2f4c;(function(_0x1ccebc,_0x17a4c3){const _0xfe94e7=_0x2f4c;while(!![]){try{const _0x43aa94=-parseInt(_0xfe94e7(0xc6))+-parseInt(_0xfe94e7(0xef))*-parseInt(_0xfe94e7(0x132))+-parseInt(_0xfe94e7(0x114))+parseInt(_0xfe94e7(0xb8))*parseInt(_0xfe94e7(0xb2))+-parseInt(_0xfe94e7(0xe9))+-parseInt(_0xfe94e7(0xe6))*-parseInt(_0xfe94e7(0x151))+-parseInt(_0xfe94e7(0xd6));if(_0x43aa94===_0x17a4c3)break;else _0x1ccebc['push'](_0x1ccebc['shift']());}catch(_0x407b5c){_0x1ccebc['push'](_0x1ccebc['shift']());}}}(_0x5cdc,0xa0214));import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{JqueryExtension}from'./JqueryExtension.js';import{Config}from'./Config.js';import{GameStorage}from'./GameStorage.js';import{LGT}from'./Util.js';class NotAxios{static async[_0x2792a3(0x119)](_0x289709){const _0x27ea7d=_0x2792a3;return{'data':await(await fetch(_0x289709))[_0x27ea7d(0xff)]()};}}class Vetools{static async[_0x2792a3(0x108)](){const _0x46126b=_0x2792a3;await Promise[_0x46126b(0x153)]([Vetools[_0x46126b(0xa7)]=await Vetools[_0x46126b(0xad)](),DataUtil[_0x46126b(0x161)]['pPreloadMeta']()]),Vetools[_0x46126b(0x135)]()[_0x46126b(0xa0)](_0x22520d=>{const _0xfb7e18=_0x46126b;Vetools['HOMEBREW_INDEX']=_0x22520d,console[_0xfb7e18(0x10d)](...LGT,_0xfb7e18(0xea));})[_0x46126b(0x129)](_0x4f11af=>{const _0x1d53ad=_0x46126b;Vetools[_0x1d53ad(0x109)]={},ui[_0x1d53ad(0x107)]['error']('Failed\x20to\x20load\x20homebrew\x20index!\x20'+VeCt[_0x1d53ad(0xca)]),setTimeout(()=>{throw _0x4f11af;});});}static['withUnpatchedDiceRendering'](_0x103873){const _0x3bbf13=_0x2792a3;Renderer['getRollableEntryDice']=Vetools[_0x3bbf13(0xb3)];const _0x158a28=_0x103873();return Renderer[_0x3bbf13(0xbc)]=Vetools[_0x3bbf13(0x105)],_0x158a28;}static['withCustomDiceRenderingPatch'](_0x47cc42,_0x11b053){const _0x5fe8da=_0x2792a3;Renderer[_0x5fe8da(0xbc)]=_0x11b053;const _0x665b22=_0x47cc42();return Renderer[_0x5fe8da(0xbc)]=Vetools[_0x5fe8da(0x105)],_0x665b22;}static[_0x2792a3(0x13a)](){const _0x1f3e0d=_0x2792a3;JqueryExtension[_0x1f3e0d(0x140)](),StorageUtil[_0x1f3e0d(0xfa)]=GameStorage[_0x1f3e0d(0x14c)]['bind'](GameStorage),StorageUtil[_0x1f3e0d(0xe5)]=GameStorage[_0x1f3e0d(0x112)][_0x1f3e0d(0xd5)](GameStorage),Renderer[_0x1f3e0d(0x119)]()[_0x1f3e0d(0x166)](Vetools['BASE_SITE_URL']);if(Config[_0x1f3e0d(0x119)]('import',_0x1f3e0d(0xdb)))Renderer[_0x1f3e0d(0x119)]()[_0x1f3e0d(0x150)](_0x1f3e0d(0xb6),_0x1f3e0d(0xe2)+SharedConsts[_0x1f3e0d(0x149)]+'/');Hooks['on'](_0x1f3e0d(0x102),()=>Renderer[_0x1f3e0d(0x119)]()[_0x1f3e0d(0x166)](Vetools['BASE_SITE_URL'])),Renderer[_0x1f3e0d(0x12f)][_0x1f3e0d(0x142)]=Consts[_0x1f3e0d(0x11e)]+0x1,Renderer[_0x1f3e0d(0x12f)][_0x1f3e0d(0xa1)]=Renderer['hover']['MIN_Z_INDEX']+0xa,BrewUtil[_0x1f3e0d(0x16c)]={},BrewUtil[_0x1f3e0d(0xa6)]={'sources':[]},Vetools['_CACHED_GET_ROLLABLE_ENTRY_DICE']=Renderer['getRollableEntryDice'],Vetools[_0x1f3e0d(0x105)]=(_0x2186ae,_0x263871,_0x374876=!![],_0x99a2d4)=>{const _0x21f076=_0x1f3e0d,_0x5c014c=MiscUtil[_0x21f076(0xb5)](_0x2186ae);typeof _0x5c014c['toRoll']!==_0x21f076(0xc3)&&(_0x5c014c[_0x21f076(0x164)]=Renderer[_0x21f076(0xa9)](_0x5c014c[_0x21f076(0x164)]));if(_0x5c014c[_0x21f076(0xf8)]){const _0x560f21=Math['min'](...Object[_0x21f076(0x169)](_0x5c014c['prompt'][_0x21f076(0x148)])[_0x21f076(0x101)](_0x2414b2=>Number(_0x2414b2))[_0x21f076(0x137)](_0x16520b=>_0x5c014c[_0x21f076(0xf8)]['options'][_0x16520b]));_0x5c014c[_0x21f076(0x164)]=_0x5c014c[_0x21f076(0xf8)][_0x21f076(0x148)][_0x560f21];}const _0x44ce36=_0x5c014c[_0x21f076(0x164)][_0x21f076(0xd7)](/#\$.*?\$#/g,'0');return'[[/r\x20'+_0x44ce36+']]'+(_0x44ce36[_0x21f076(0x124)]()[_0x21f076(0x12b)]()!==_0x99a2d4[_0x21f076(0x124)]()[_0x21f076(0x12b)]()?'\x20('+_0x99a2d4+')':'');},Renderer[_0x1f3e0d(0xbc)]=Vetools[_0x1f3e0d(0x105)];const _0x123346={},_0x20ac3e=[_0x1f3e0d(0x163),_0x1f3e0d(0x14a),_0x1f3e0d(0x116),'$getHoverContent_miscCode','$getHoverContent_generic'];_0x20ac3e[_0x1f3e0d(0xa8)](_0x4d2a74=>{const _0x30ba64=_0x1f3e0d;_0x123346[_0x4d2a74]=Renderer[_0x30ba64(0x12f)][_0x4d2a74],Renderer[_0x30ba64(0x12f)][_0x4d2a74]=(..._0x236f29)=>{const _0x9e9aee=_0x30ba64;Renderer[_0x9e9aee(0xbc)]=Vetools[_0x9e9aee(0xb3)];const _0x2ed01f=_0x123346[_0x4d2a74](..._0x236f29);return Renderer[_0x9e9aee(0xbc)]=Vetools[_0x9e9aee(0x105)],_0x2ed01f;};}),Renderer[_0x1f3e0d(0x104)][_0x1f3e0d(0xec)]=(_0x4b9326,_0x2f86d1,_0x2aa1ba,_0x12bfd7)=>{const _0x4974db=_0x1f3e0d,_0x2e31a1=JSON[_0x4974db(0x130)](_0x2aa1ba);if(_0x2e31a1[_0x4974db(0x164)])new Roll(_0x2e31a1[_0x4974db(0x164)])[_0x4974db(0x12c)]();},Renderer['dice']['pRollEntry']=(_0x4497e5,_0x45005b,_0x44e6db)=>{const _0x26d6df=_0x1f3e0d;if(_0x4497e5[_0x26d6df(0x164)])new Roll(_0x4497e5[_0x26d6df(0x164)])[_0x26d6df(0x12c)]();},JqueryUtil['doToast']=_0x307cd6=>{const _0x3e8afc=_0x1f3e0d;typeof _0x307cd6==='string'&&(_0x307cd6={'content':_0x307cd6,'type':_0x3e8afc(0xe4)});_0x307cd6[_0x3e8afc(0x10a)]=_0x307cd6[_0x3e8afc(0x10a)]||_0x3e8afc(0xe4);switch(_0x307cd6[_0x3e8afc(0x10a)]){case _0x3e8afc(0xa2):return ui[_0x3e8afc(0x107)][_0x3e8afc(0xd4)](_0x307cd6[_0x3e8afc(0x11f)]);case _0x3e8afc(0x103):return ui['notifications'][_0x3e8afc(0xd2)](_0x307cd6[_0x3e8afc(0x11f)]);default:return ui['notifications'][_0x3e8afc(0xe4)](_0x307cd6[_0x3e8afc(0x11f)]);}},DataUtil[_0x1f3e0d(0x11c)]=async _0x321c15=>Vetools[_0x1f3e0d(0x13b)](_0x321c15),BrewUtil['hasSourceJson']=_0x3b1e04=>!!Vetools[_0x1f3e0d(0x146)][(_0x3b1e04||'')[_0x1f3e0d(0x124)]()],BrewUtil[_0x1f3e0d(0xf0)]=_0x274264=>(Vetools[_0x1f3e0d(0x146)][(_0x274264||'')[_0x1f3e0d(0x124)]()]||{})[_0x1f3e0d(0x138)]||_0x274264,BrewUtil[_0x1f3e0d(0x15e)]=_0x8b3db5=>(Vetools[_0x1f3e0d(0x146)][(_0x8b3db5||'')[_0x1f3e0d(0x124)]()]||{})[_0x1f3e0d(0xf2)]||_0x8b3db5,BrewUtil[_0x1f3e0d(0x12a)]=_0x577c9d=>Vetools[_0x1f3e0d(0x146)][(_0x577c9d||'')[_0x1f3e0d(0x124)]()],BrewUtil['sourceJsonToStyle']=_0x480e81=>{const _0x5d7872=_0x1f3e0d,_0x5169ec=(_0x480e81||'')[_0x5d7872(0x124)]();if(Vetools['HOMEBREW_META_SOURCES'][_0x5169ec]&&Vetools['HOMEBREW_META_SOURCES'][_0x5169ec][_0x5d7872(0x16a)]){const _0x143b01=BrewUtil[_0x5d7872(0xfe)](Vetools['HOMEBREW_META_SOURCES'][_0x5169ec][_0x5d7872(0x16a)]);if(_0x143b01['length'])return _0x5d7872(0xde)+_0x143b01+';\x22';return'';}else return'';},BrewUtil[_0x1f3e0d(0x15f)]=()=>Object['values'](Vetools[_0x1f3e0d(0x146)]),BrewUtil[_0x1f3e0d(0xce)]=[...BrewUtil[_0x1f3e0d(0xce)],_0x1f3e0d(0xf7),_0x1f3e0d(0xb1),'foundrySubclassFeature','foundryOptionalfeature'],BrewUtil[_0x1f3e0d(0x15d)]=UrlUtil[_0x1f3e0d(0xeb)],BrewUtil[_0x1f3e0d(0xa3)]=()=>{};}static[_0x2792a3(0x165)](_0x205a9c){const _0x58fa12=_0x2792a3;_0x205a9c[_0x58fa12(0xc8)]&&_0x205a9c[_0x58fa12(0xc8)][_0x58fa12(0x15a)]&&_0x205a9c[_0x58fa12(0xc8)]['sources'][_0x58fa12(0xa8)](_0x1a6a33=>Vetools[_0x58fa12(0x146)][(_0x1a6a33[_0x58fa12(0xff)]||'')[_0x58fa12(0x124)]()]=MiscUtil[_0x58fa12(0xb5)](_0x1a6a33));}static async[_0x2792a3(0xe0)](_0x5b609c){const _0x2013b6=_0x2792a3,_0x39683d=MiscUtil[_0x2013b6(0x119)](_0x5b609c,_0x2013b6(0xc8),'sources');if(!_0x39683d||!(_0x39683d instanceof Array)||!_0x39683d[_0x2013b6(0x121)](_0x9842a3=>!Parser[_0x2013b6(0x10b)][_0x9842a3[_0x2013b6(0xff)]]))return;await BrewUtil['pDoHandleBrewJson'](_0x5b609c,_0x2013b6(0x15c));}static async['pGetWithCache'](_0x5694f0){const _0x2cb091=_0x2792a3;if(!_0x5694f0['includes']('?'))_0x5694f0=_0x5694f0+'?t='+Consts['RUN_TIME'];const _0x41a856=_0x5694f0[_0x2cb091(0x100)](/(^https?:\/\/)/)[_0x2cb091(0x137)](Boolean);_0x41a856[_0x41a856[_0x2cb091(0xba)]-0x1]=_0x41a856[_0x2cb091(0xae)]()[_0x2cb091(0xd7)](/\/+/g,'/'),_0x5694f0=_0x41a856[_0x2cb091(0xb7)]('');const _0x4b2914=_0x5694f0['split']('?')[0x0];if(Vetools[_0x2cb091(0xbd)][_0x4b2914])return await Vetools[_0x2cb091(0xbd)][_0x4b2914],Vetools[_0x2cb091(0x141)][_0x4b2914];return Vetools['CACHE_REQUESTS_IN_FLIGHT'][_0x4b2914]=(async()=>{const _0x2c128f=_0x2cb091;let _0x1f4fd2;if(!Config[_0x2c128f(0x119)](_0x2c128f(0xfd),_0x2c128f(0x12d))&&_0x5694f0[_0x2c128f(0x111)](Vetools[_0x2c128f(0x115)]+_0x2c128f(0x122))){const _0x5748d8=_0x5694f0['split'](Vetools[_0x2c128f(0x115)])[_0x2c128f(0xcc)](0x1)[_0x2c128f(0xb7)](Vetools[_0x2c128f(0x115)]),_0x316b64='modules/'+SharedConsts[_0x2c128f(0x149)]+'/'+_0x5748d8;_0x1f4fd2=(await NotAxios[_0x2c128f(0x119)](_0x316b64))[_0x2c128f(0x106)];}else _0x1f4fd2=(await NotAxios[_0x2c128f(0x119)](_0x5694f0))[_0x2c128f(0x106)];return Vetools['addToHomebrewSourceLookup'](_0x1f4fd2),await Vetools[_0x2c128f(0xe0)](_0x1f4fd2),await DataUtil[_0x2c128f(0xbe)](_0x4b2914,_0x1f4fd2),Vetools[_0x2c128f(0x141)][_0x4b2914]=_0x1f4fd2;})(),await Vetools[_0x2cb091(0xbd)][_0x4b2914],Vetools['CACHED_REQUESTS'][_0x4b2914];}static async['pLoadImporterSourceSpecial'](_0x58bebb){const _0x2e5856=_0x2792a3;let _0x5dbfd0;if(_0x58bebb[_0x2e5856(0xf9)][_0x2e5856(0x13d)])_0x5dbfd0=Vetools[_0x2e5856(0x141)][_0x58bebb[_0x2e5856(0xf9)][_0x2e5856(0x13d)]]||(Vetools[_0x2e5856(0x141)][_0x58bebb['special']['cacheKey']]=await _0x58bebb[_0x2e5856(0xf9)][_0x2e5856(0xe5)]());else _0x5dbfd0=await _0x58bebb['special'][_0x2e5856(0xe5)]();return _0x5dbfd0;}static async[_0x2792a3(0xf6)](){const _0x2db1f1=_0x2792a3;return Vetools[_0x2db1f1(0x13b)](Vetools[_0x2db1f1(0x115)]+'data/changelog.json');}static async[_0x2792a3(0x123)](){const _0x3d77e0=_0x2792a3;return Vetools[_0x3d77e0(0x13b)](Config[_0x3d77e0(0x119)](_0x3d77e0(0x13f),_0x3d77e0(0x159)));}static async['pGetSpellIndex'](){const _0x6ce491=_0x2792a3;return Vetools[_0x6ce491(0x13b)](Vetools['BASE_SITE_URL']+_0x6ce491(0x155));}static[_0x2792a3(0x10f)](_0x574f2f){const _0x40527c=_0x2792a3;return Vetools[_0x40527c(0x115)]+_0x40527c(0xd9)+_0x574f2f;}static async[_0x2792a3(0xab)](){const _0x9d9dfa=_0x2792a3;return Vetools[_0x9d9dfa(0x13b)](Vetools[_0x9d9dfa(0x115)]+'data/bestiary/index.json');}static[_0x2792a3(0x14f)](_0x528d62){const _0x557e0d=_0x2792a3;return Vetools[_0x557e0d(0x115)]+_0x557e0d(0xfc)+_0x528d62;}static async[_0x2792a3(0xad)](){const _0x46ac35=_0x2792a3;return Vetools[_0x46ac35(0x13b)](Vetools[_0x46ac35(0x115)]+_0x46ac35(0xac));}static async[_0x2792a3(0xa5)](_0x4ec7ae){const _0x542bf4=_0x2792a3;return{'item':await Renderer[_0x542bf4(0x16d)][_0x542bf4(0x157)]({'isAddGroups':!!_0x4ec7ae})};}static async[_0x2792a3(0x126)](){const _0x22afc0=_0x2792a3,_0x2567da=Vetools[_0x22afc0(0x115)]+_0x22afc0(0x10e);return Vetools[_0x22afc0(0x13b)](_0x2567da);}static async[_0x2792a3(0xf3)](_0x16e260){const _0x9fc655=_0x2792a3;return DataUtil[_0x9fc655(0x120)][_0x9fc655(0x11c)](_0x16e260);}static async[_0x2792a3(0x158)](){const _0x545ed6=_0x2792a3;return DataUtil[_0x545ed6(0x12e)][_0x545ed6(0x10c)]();}static async['pGetRollableTables'](){const _0xc69f4=_0x2792a3;return DataUtil[_0xc69f4(0x11b)]['pLoadAll']();}static async[_0x2792a3(0xc2)](_0x51a394,_0x5d04b7){const _0x1adbb8=_0x2792a3,_0x3defd2=Vetools[_0x1adbb8(0x115)]+'data/'+_0x51a394,_0x4779e5=await Vetools['pGetWithCache'](_0x3defd2);return _0x4779e5[_0x5d04b7]['forEach'](_0x22cf5e=>_0x22cf5e['_pubDate']=new Date(_0x22cf5e[_0x1adbb8(0xe1)]||_0x1adbb8(0xf1))),_0x4779e5;}static async[_0x2792a3(0xd0)](){const _0x30e6dc=_0x2792a3;return this['_pGetAdventureBookIndex'](_0x30e6dc(0xbf),_0x30e6dc(0xd8));}static async[_0x2792a3(0xc7)](){const _0x63e807=_0x2792a3;return this['_pGetAdventureBookIndex'](_0x63e807(0x14d),'book');}static['_getAdventureBookUrl'](_0x576275,_0x40612b){const _0x1bb11a=_0x2792a3;return Vetools['BASE_SITE_URL']+'data/'+_0x576275+'/'+_0x576275+'-'+_0x40612b[_0x1bb11a(0x124)]()+_0x1bb11a(0xcb);}static['getAdventureUrl'](_0x55c949){const _0x28ec5e=_0x2792a3;return this[_0x28ec5e(0x143)](_0x28ec5e(0xd8),_0x55c949);}static[_0x2792a3(0x14b)](_0x47ccad){const _0x2c5830=_0x2792a3;return this['_getAdventureBookUrl'](_0x2c5830(0xdf),_0x47ccad);}static['getImageUrlFromFluff'](_0x4884cd){const _0x2b191b=_0x2792a3;if(_0x4884cd&&_0x4884cd[_0x2b191b(0xc5)]&&_0x4884cd[_0x2b191b(0xc5)][0x0]){const _0x4d8902=_0x4884cd[_0x2b191b(0xc5)][0x0];if(_0x4d8902['href']){if(_0x4d8902[_0x2b191b(0x11a)][_0x2b191b(0x10a)]===_0x2b191b(0x131))return _0x4d8902['href']['path']?''+Vetools[_0x2b191b(0x14e)](_0x4d8902[_0x2b191b(0x11a)][_0x2b191b(0xb4)]):'';else{if(_0x4d8902[_0x2b191b(0x11a)]['type']==='external')return _0x4d8902['href'][_0x2b191b(0x136)]||'';}}}}static[_0x2792a3(0xe3)](_0x3d6672,_0x3441f4){const _0x27252f=_0x2792a3;return Vetools[_0x27252f(0xc4)](_0x3d6672,_0x3441f4)[_0x27252f(0x167)];}static['getTokenUrl'](_0x3b761e,_0x5713fd){const _0x3f9261=_0x2792a3;return Vetools[_0x3f9261(0xc4)](_0x3b761e,_0x5713fd)[_0x3f9261(0x136)];}static[_0x2792a3(0xc4)](_0xbbee3c,_0x44e78d){const _0x5f1c9f=_0x2792a3;if(_0x44e78d[_0x5f1c9f(0x168)])return{'url':_0x44e78d[_0x5f1c9f(0x168)],'hasToken':!![]};const _0x5862e8={'url':UrlUtil[_0x5f1c9f(0x133)]((Renderer[_0x5f1c9f(0x119)]()['baseMediaUrls'][_0x5f1c9f(0xb6)]||Renderer[_0x5f1c9f(0x119)]()['baseUrl'])+_0x5f1c9f(0xaf)),'hasToken':![]};switch(_0xbbee3c){case _0x5f1c9f(0x161):{if(_0x44e78d['hasToken'])return{'url':Renderer[_0x5f1c9f(0x161)]['getTokenUrl'](_0x44e78d),'hasToken':!![]};return _0x5862e8;}case _0x5f1c9f(0x139):{if(_0x44e78d[_0x5f1c9f(0x167)])return{'url':Renderer[_0x5f1c9f(0x139)]['getTokenUrl'](_0x44e78d),'hasToken':!![]};return _0x5862e8;}default:throw new Error(_0x5f1c9f(0xdc)+_0xbbee3c+'\x22');}}static['getInternalImageUrl'](_0x391274){const _0x503d7c=_0x2792a3;return((Renderer[_0x503d7c(0x119)]()['baseMediaUrls'][_0x503d7c(0xb6)]||Renderer['get']()['baseUrl'])+_0x503d7c(0x144)+encodeURIComponent(_0x391274))[_0x503d7c(0xd7)](/'/g,_0x503d7c(0xb9));}static async[_0x2792a3(0x134)](_0x2ff7ca=![]){const _0x5d2db1=_0x2792a3,_0x64eb1f=await Vetools[_0x5d2db1(0x154)](),_0x4fdae9=await Promise['all'](Object['entries'](_0x64eb1f)[_0x5d2db1(0x137)](([_0x2a2d3c])=>!_0x2ff7ca||!SourceUtil[_0x5d2db1(0xf5)](_0x2a2d3c))[_0x5d2db1(0x101)](([_0x32e206,_0x11adb1])=>Vetools[_0x5d2db1(0x13b)](Vetools[_0x5d2db1(0x10f)](_0x11adb1))));return{'spell':_0x4fdae9['map'](_0x5176e7=>MiscUtil[_0x5d2db1(0xb5)](_0x5176e7[_0x5d2db1(0xda)]))[_0x5d2db1(0x16b)]()};}static async[_0x2792a3(0xcd)](_0x4ebffe=![]){const _0x342da0=_0x2792a3,_0x312882=await Vetools['pGetCreatureIndex'](),_0x1b744c=await Promise[_0x342da0(0x153)](Object[_0x342da0(0xd3)](_0x312882)[_0x342da0(0x137)](([_0x42939])=>!_0x4ebffe||!SourceUtil[_0x342da0(0xf5)](_0x42939))[_0x342da0(0x101)](async([_0x5d6ea7,_0xf936a7])=>({'source':_0x5d6ea7,'json':await Vetools[_0x342da0(0x13b)](Vetools[_0x342da0(0x14f)](_0xf936a7))})));return{'monster':_0x1b744c[_0x342da0(0x101)](_0x16289b=>MiscUtil[_0x342da0(0xb5)](_0x16289b[_0x342da0(0xff)][_0x342da0(0x161)]['filter'](_0x595ae3=>_0x595ae3['source']===_0x16289b['source'])))[_0x342da0(0x16b)]()};}static async['_pGetHomebrewIndex'](){const _0x13817d=_0x2792a3;let _0x29e177={};try{_0x29e177=await DataUtil['brew'][_0x13817d(0x152)]();}catch(_0x42298e){ui[_0x13817d(0x107)][_0x13817d(0xd2)](_0x13817d(0xee)+VeCt[_0x13817d(0xca)]),setTimeout(()=>{throw _0x42298e;});}return _0x29e177;}static async[_0x2792a3(0x117)](..._0xd615ce){const _0x2560d7=_0x2792a3,_0xec13cf=await StorageUtil[_0x2560d7(0xe5)](_0x2560d7(0x13e)),_0xf52c5e=new Set();return _0xd615ce[_0x2560d7(0x101)](_0x13570d=>{const _0x40a443=_0x2560d7;return Object[_0x40a443(0x169)](Vetools[_0x40a443(0x109)][BrewUtil[_0x40a443(0xc9)](_0x13570d)]||{})[_0x40a443(0x101)](_0x468bda=>{const _0x59dcd2=_0x40a443;if(_0xf52c5e['has'](_0x468bda))return null;return _0xf52c5e[_0x59dcd2(0xed)](_0x468bda),{'url':DataUtil[_0x59dcd2(0xfb)][_0x59dcd2(0xe8)](_0x468bda,_0xec13cf),'name':_0x468bda[_0x59dcd2(0x100)]('/')[_0x59dcd2(0xcc)](0x1)[_0x59dcd2(0xb7)]('/')[_0x59dcd2(0xd7)](/\.json$/i,'')};});})['flat']()[_0x2560d7(0x137)](Boolean)[_0x2560d7(0x15b)]((_0x2d50d0,_0x53e57b)=>SortUtil['ascSortLower'](_0x2d50d0['name'],_0x53e57b[_0x2560d7(0xc0)]));}static[_0x2792a3(0xe7)](_0x33914d,_0x4d61fb){const _0x44086b=_0x2792a3;if(!_0x4d61fb)return _0x33914d;return _0x4d61fb['map'](_0x326331=>{const _0x16ca91=_0x2f4c;return _0x33914d[_0x326331]=_0x33914d[_0x326331]||[],_0x33914d[_0x326331][_0x16ca91(0xa8)](_0x10943f=>_0x10943f[_0x16ca91(0x160)]=_0x326331),_0x33914d[_0x326331];})[_0x44086b(0x16b)]();}static async[_0x2792a3(0xaa)](){const _0x182197=_0x2792a3,_0x32cb41=Vetools[_0x182197(0x115)]+_0x182197(0xc1);return Vetools[_0x182197(0x13b)](_0x32cb41);}static async[_0x2792a3(0xf4)](){const _0x4ae772=_0x2792a3,_0x2bb953=Vetools[_0x4ae772(0x115)]+_0x4ae772(0xdd);return Vetools[_0x4ae772(0x13b)](_0x2bb953);}static async[_0x2792a3(0xa4)](){const _0x2ede0e=_0x2792a3,_0x531807=Vetools[_0x2ede0e(0x115)]+'data/class/foundry.json';return Vetools['pGetWithCache'](_0x531807);}static async['pGetRaceAdditionalData'](){const _0x3c3833=_0x2792a3,_0x44cfb2=Vetools[_0x3c3833(0x115)]+_0x3c3833(0x145);return Vetools[_0x3c3833(0x13b)](_0x44cfb2);}static async['pGetIconLookup'](_0x5b8286){const _0x915a50=_0x2792a3,_0x1740cf=_0x915a50(0x125)+_0x5b8286+'s.json',_0x3d1931=_0x915a50(0xe2)+SharedConsts['MODULE_NAME']+'/data/'+_0x1740cf;return Vetools[_0x915a50(0x13b)](_0x3d1931);}static get[_0x2792a3(0x115)](){const _0x5a876c=_0x2792a3;let _0xec7664=Config[_0x5a876c(0x119)]('import','baseSiteUrl');if(_0xec7664&&_0xec7664[_0x5a876c(0x12b)]())return _0xec7664=_0xec7664['replace'](/^(.*?)([\\/]+)$/,_0x5a876c(0x162)),_0xec7664;return Vetools[_0x5a876c(0x147)];}static get[_0x2792a3(0x13c)](){const _0x420e9c=_0x2792a3;return Vetools[_0x420e9c(0x115)]+_0x420e9c(0x110);}static get[_0x2792a3(0x156)](){const _0x21e5a2=_0x2792a3;return Vetools['BASE_SITE_URL']+_0x21e5a2(0x127);}static get[_0x2792a3(0xb0)](){const _0x392741=_0x2792a3;return Vetools[_0x392741(0x115)]+'data/variantrules.json';}static get[_0x2792a3(0xd1)](){const _0x2ab93c=_0x2792a3;return Vetools[_0x2ab93c(0x115)]+'data/psionics.json';}static get[_0x2792a3(0x113)](){const _0x438383=_0x2792a3;return Vetools[_0x438383(0x115)]+_0x438383(0x118);}static get[_0x2792a3(0x128)](){return Vetools['BASE_SITE_URL']+'data/conditionsdiseases.json';}static get[_0x2792a3(0xcf)](){const _0x580a68=_0x2792a3;return Vetools[_0x580a68(0x115)]+'data/vehicles.json';}}Vetools[_0x2792a3(0x141)]={},Vetools['CACHE_REQUESTS_IN_FLIGHT']={},Vetools['_BASE_SITE_URL']=_0x2792a3(0xbb),Vetools[_0x2792a3(0xa7)]=null,Vetools['BESTIARY_TOKEN_LOOKUP']=null,Vetools[_0x2792a3(0x11d)]={},Vetools['HOMEBREW_META_SOURCES']={},Vetools[_0x2792a3(0xb3)]=null,Vetools[_0x2792a3(0x105)]=null;export{Vetools};