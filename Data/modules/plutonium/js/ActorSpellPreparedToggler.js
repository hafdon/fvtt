const _0xb8d5=['_list','actor','MODULE_LOCATION','material','components','cbSel','Somatic','type','find','pInitFilterBox','tool-actor-spell-prepared-toggler','map','prepared','_$btnReset','sortSpells','filter','name','[name=btn-toggle-summary]','Spell\x20Prepared\x20Toggler','_filterBox','[name=\x22btn-run\x22]','Components\x20&\x20Miscellaneous','toggleClass','input','Concentration','get','_actor','[name=btn-filter]','setNextState','getMaxWindowHeight','.fltr__mini-view','preparation','_activateListeners_initBtnRun','[name=\x22btn-reset\x22]','_miscFilter','AppFilter','.search','click','_activateListeners_pInitListAndFilters','close','_levelFilter','[data-name=\x22wrp-btns-sort\x22]','Material','push','initBtnSortHandlers','_rows','activateListeners','Verbal','change','ele','concentration','_pageFilter','doAbsorbItems','.veapp__list','toDisplay','getData','prop','mode','pHandleButtonClick','_fMisc','data','val','_handleFilterChange','ve-hidden','pCommitState','level','vocal','render','.act-sp-prep__disp-modified','_$iptSearch','Ritual','resetNextState','_activateListeners_initBtnReset','handleSelectClick','checked','forEach','_actorItems','spell','items','filterBox','then'];(function(_0x222865,_0xb8d5a){const _0x580cc7=function(_0x573c74){while(--_0x573c74){_0x222865['push'](_0x222865['shift']());}};_0x580cc7(++_0xb8d5a);}(_0xb8d5,0xf3));const _0x580c=function(_0x222865,_0xb8d5a){_0x222865=_0x222865-0x0;let _0x580cc7=_0xb8d5[_0x222865];return _0x580cc7;};'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';class ActorSpellPreparedToggler extends Application{static[_0x580c('0x3a')](_0x11d51d,_0x4b8833,_0x412df0,_0x192aa1){const _0x4b7ebb=new ActorSpellPreparedToggler(_0x4b8833[_0x580c('0x1')]);_0x4b7ebb[_0x580c('0x43')](!![]);}constructor(_0x2db6bf){super({'title':_0x580c('0x12'),'template':SharedConsts[_0x580c('0x2')]+'/template/ActorSpellPreparedToggler.handlebars','width':0x1e0,'height':Util[_0x580c('0x1d')](),'resizable':!![]}),this['_actor']=_0x2db6bf,this[_0x580c('0x4c')]=this[_0x580c('0x1a')][_0x580c('0x4e')][_0x580c('0xf')](_0x512bfc=>_0x512bfc[_0x580c('0x7')]===_0x580c('0x4d')&&_0x512bfc['data'][_0x580c('0x3c')]['level']!==0x0&&_0x512bfc[_0x580c('0x3c')][_0x580c('0x3c')][_0x580c('0x1f')]&&_0x512bfc[_0x580c('0x3c')]['data'][_0x580c('0x1f')][_0x580c('0x39')]===_0x580c('0xc')),this[_0x580c('0x33')]=new ActorSpellPreparedToggler[(_0x580c('0x23'))](),this[_0x580c('0x0')]=null,this['_$btnReset']=null,this['_$iptSearch']=null;}[_0x580c('0x3e')](){const _0x3677e0=this['_pageFilter'][_0x580c('0x4f')]['getValues']();this['_list'][_0x580c('0xf')](_0x3a9798=>this[_0x580c('0x33')]['toDisplay'](_0x3677e0,this[_0x580c('0x2d')][_0x3a9798['ix']]));}[_0x580c('0x2e')](_0x21b9e8){super[_0x580c('0x2e')](_0x21b9e8),this[_0x580c('0x20')](_0x21b9e8),this[_0x580c('0x48')](_0x21b9e8),this[_0x580c('0x26')](_0x21b9e8);}[_0x580c('0x20')](_0x501b4a){_0x501b4a['find'](_0x580c('0x14'))[_0x580c('0x25')](async()=>{for(const _0xec655c of this[_0x580c('0x0')][_0x580c('0x4e')]){await _0xec655c[_0x580c('0x3c')][_0x580c('0x40')]();}});}[_0x580c('0x48')](_0x44626f){this[_0x580c('0xd')]=_0x44626f[_0x580c('0x8')](_0x580c('0x21'))[_0x580c('0x25')](()=>{_0x44626f[_0x580c('0x8')](_0x580c('0x24'))[_0x580c('0x3d')]('');if(!this[_0x580c('0x0')])return;this[_0x580c('0x0')]['reset'](),this['_list'][_0x580c('0x4e')][_0x580c('0x4b')](_0x17af65=>_0x17af65['data']['resetNextState']());});}[_0x580c('0x26')](_0x257303){this[_0x580c('0x45')]=_0x257303[_0x580c('0x8')](_0x580c('0x24')),this['_list']=new List({'$iptSearch':this[_0x580c('0x45')],'$wrpList':_0x257303[_0x580c('0x8')](_0x580c('0x35')),'isUseJquery':!![],'fnSort':PageFilterSpells[_0x580c('0xe')]}),SortUtil[_0x580c('0x2c')](_0x257303[_0x580c('0x8')](_0x580c('0x29')),this[_0x580c('0x0')]);const _0xb4a19=_0x257303['find']('[name=\x22cb-select-all\x22]')[_0x580c('0x30')](()=>{const _0x2749ac=_0xb4a19[_0x580c('0x38')](_0x580c('0x4a'));this[_0x580c('0x0')]['visibleItems'][_0x580c('0x4b')](_0x1715b9=>_0x1715b9[_0x580c('0x3c')][_0x580c('0x1c')](_0x2749ac));});return this[_0x580c('0x33')][_0x580c('0x9')]({'$iptSearch':this[_0x580c('0x45')],'$btnReset':this[_0x580c('0xd')],'$btnOpen':_0x257303[_0x580c('0x8')](_0x580c('0x1b')),'$btnToggleSummaryHidden':_0x257303[_0x580c('0x8')](_0x580c('0x11')),'$wrpMiniPills':_0x257303[_0x580c('0x8')](_0x580c('0x1e')),'namespace':_0x580c('0xa')})[_0x580c('0x50')](()=>{this[_0x580c('0x2d')][_0x580c('0x4b')](_0x1890fb=>this[_0x580c('0x33')]['addToFilters'](_0x1890fb)),this[_0x580c('0x0')][_0x580c('0x34')](this[_0x580c('0x4c')],{'fnGetName':_0x4e3b67=>_0x4e3b67[_0x580c('0x10')],'fnGetValues':_0x17fb20=>({'level':MiscUtil['get'](_0x17fb20,_0x580c('0x3c'),'data','level')||-0x1}),'fnGetData':_0x284807=>{const _0x3f152e=$(_0x284807[_0x580c('0x31')]);return{'cbSel':_0x3f152e[_0x580c('0x8')](_0x580c('0x17'))[0x0],'$dispModified':_0x3f152e['find'](_0x580c('0x44'))};},'fnBindListeners':(_0x121c38,_0x504452)=>{const _0x5b61a0={'prepared':_0x504452[_0x580c('0x3c')][_0x580c('0x3c')]['preparation'][_0x580c('0xc')]},_0x5e3c67=()=>{_0x121c38[_0x580c('0x3c')][_0x580c('0x5')][_0x580c('0x4a')]=_0x5b61a0[_0x580c('0xc')],_0x121c38['data']['$dispModified'][_0x580c('0x16')](_0x580c('0x3f'),_0x504452[_0x580c('0x3c')][_0x580c('0x3c')][_0x580c('0x1f')][_0x580c('0xc')]===_0x5b61a0[_0x580c('0xc')]);},_0x4a4e4f=_0x278ee4=>{_0x5b61a0[_0x580c('0xc')]=_0x278ee4,_0x5e3c67();},_0x335265=()=>{_0x5b61a0['prepared']=_0x504452[_0x580c('0x3c')][_0x580c('0x3c')][_0x580c('0x1f')]['prepared'],_0x5e3c67();},_0x52bce7=async()=>{await _0x504452['update']({'data':{'preparation':{'prepared':_0x5b61a0['prepared']}}}),_0x5e3c67();};_0x121c38[_0x580c('0x3c')][_0x580c('0x1c')]=_0x4a4e4f,_0x121c38['data'][_0x580c('0x47')]=_0x335265,_0x121c38['data'][_0x580c('0x40')]=_0x52bce7,_0x121c38[_0x580c('0x31')]['addEventListener'](_0x580c('0x25'),_0x569769=>{ModalFilter[_0x580c('0x49')](this['_list'],_0x121c38,_0x569769,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x391234,_0x415444)=>_0x391234[_0x580c('0x3c')][_0x580c('0x1c')](_0x415444)});});}}),this[_0x580c('0x0')]['init'](),this['_pageFilter'][_0x580c('0x4f')][_0x580c('0x43')](),$(this[_0x580c('0x33')][_0x580c('0x4f')])['on'](FilterBox['EVNT_VALCHANGE'],this[_0x580c('0x3e')]['bind'](this)),this[_0x580c('0x3e')]();});}[_0x580c('0x37')](){return this[_0x580c('0x2d')]=this[_0x580c('0x4c')][_0x580c('0xb')]((_0x4ba104,_0x4e1ec8)=>({'name':_0x4ba104['name'],'isPrepared':_0x4ba104[_0x580c('0x3c')][_0x580c('0x3c')][_0x580c('0x1f')]['prepared'],'level':MiscUtil[_0x580c('0x19')](_0x4ba104,_0x580c('0x3c'),_0x580c('0x3c'),_0x580c('0x41'))||-0x1,'concentration':!!MiscUtil[_0x580c('0x19')](_0x4ba104,_0x580c('0x3c'),'data','components',_0x580c('0x32')),'v':!!MiscUtil[_0x580c('0x19')](_0x4ba104,_0x580c('0x3c'),_0x580c('0x3c'),'components',_0x580c('0x42')),'s':!!MiscUtil[_0x580c('0x19')](_0x4ba104,_0x580c('0x3c'),_0x580c('0x3c'),_0x580c('0x4'),'somatic'),'m':!!MiscUtil['get'](_0x4ba104,_0x580c('0x3c'),_0x580c('0x3c'),_0x580c('0x4'),_0x580c('0x3')),'ritual':!!MiscUtil[_0x580c('0x19')](_0x4ba104,_0x580c('0x3c'),'data','components','ritual'),'ix':_0x4e1ec8})),{...super[_0x580c('0x37')](),'rows':this['_rows']};}['close'](..._0x437cb6){super[_0x580c('0x27')](..._0x437cb6),this['_pageFilter']['teardown']();}}ActorSpellPreparedToggler[_0x580c('0x23')]=class extends AppFilter{constructor(){super(),this[_0x580c('0x28')]=new Filter({'header':'Level','items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0x5da3e9=>~_0x5da3e9?PageFilterSpells['getFltrSpellLevelStr'](_0x5da3e9):'Unknown'}),this[_0x580c('0x22')]=new Filter({'header':_0x580c('0x15'),'items':[_0x580c('0x18'),_0x580c('0x2f'),_0x580c('0x6'),_0x580c('0x2a'),_0x580c('0x46')],'itemSortFn':PageFilterSpells['sortMetaFilter']});}['addToFilters'](_0x120386,_0x27b421){if(_0x27b421)return;this[_0x580c('0x28')]['addItem'](_0x120386[_0x580c('0x41')]),_0x120386[_0x580c('0x3b')]=[];if(_0x120386[_0x580c('0x32')])_0x120386[_0x580c('0x3b')][_0x580c('0x2b')](_0x580c('0x18'));if(_0x120386['v'])_0x120386[_0x580c('0x3b')][_0x580c('0x2b')](_0x580c('0x2f'));if(_0x120386['s'])_0x120386[_0x580c('0x3b')]['push']('Somatic');if(_0x120386['m'])_0x120386[_0x580c('0x3b')]['push'](_0x580c('0x2a'));if(_0x120386['ritual'])_0x120386[_0x580c('0x3b')][_0x580c('0x2b')]('Ritual');}async['_pPopulateBoxOptions'](_0x428c0e){_0x428c0e['filters']=[this['_levelFilter'],this[_0x580c('0x22')]];}[_0x580c('0x36')](_0xcf200e,_0x56cd83){return this[_0x580c('0x13')][_0x580c('0x36')](_0xcf200e,_0x56cd83[_0x580c('0x41')],_0x56cd83[_0x580c('0x3b')]);}};export{ActorSpellPreparedToggler};