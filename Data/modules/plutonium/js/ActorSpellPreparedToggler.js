'use strict';const _0x5dc5=['getFltrSpellLevelStr','prepared','_fMisc','preparation','ele','_filterBox','MODULE_LOCATION','EVNT_VALCHANGE','_activateListeners_initBtnRun','render','233BhcnVd','_handleFilterChange','Unknown','569067LhPXDL','[data-name=\x22wrp-btns-sort\x22]','visibleItems','update','[name=\x22cb-select-all\x22]','close','map','1857mqSNUI','filterBox','_actorItems','ve-hidden','AppFilter','.fltr__mini-view','pCommitState','resetNextState','Verbal','level','_actor','.veapp__list','tool-actor-spell-prepared-toggler','addToFilters','teardown','[name=btn-toggle-summary]','_$btnReset','setNextState','items','448876KELkGM','then','[name=btn-filter]','data','674bPFLQK','get','_$iptSearch','7mPDHcB','getData','mode','.search','51BTCwPn','toDisplay','forEach','/template/ActorSpellPreparedToggler.handlebars','actor','sortMetaFilter','concentration','reset','material','name','initBtnSortHandlers','_list','filters','components','_pageFilter','_miscFilter','_pPopulateBoxOptions','find','push','ritual','Level','cbSel','.act-sp-prep__disp-modified','Concentration','_levelFilter','Somatic','addItem','sortSpells','getMaxWindowHeight','Ritual','click','[name=\x22btn-run\x22]','checked','pHandleButtonClick','filter','Material','170336VBsEIb','handleSelectClick','103PJgkQE','_activateListeners_initBtnReset','9949gFmyWv','activateListeners','12289StmbtC','somatic','_rows','change','toggleClass'];const _0x78e6=function(_0x401555,_0x5e704c){_0x401555=_0x401555-0x16e;let _0x5dc55d=_0x5dc5[_0x401555];return _0x5dc55d;};const _0x4571fc=_0x78e6;(function(_0x8f7104,_0x80e2c7){const _0xec5df0=_0x78e6;while(!![]){try{const _0x3cc480=-parseInt(_0xec5df0(0x189))*-parseInt(_0xec5df0(0x1c0))+parseInt(_0xec5df0(0x1a2))*-parseInt(_0xec5df0(0x198))+-parseInt(_0xec5df0(0x19b))+parseInt(_0xec5df0(0x1b9))*parseInt(_0xec5df0(0x185))+-parseInt(_0xec5df0(0x1bc))*-parseInt(_0xec5df0(0x187))+parseInt(_0xec5df0(0x1b5))+parseInt(_0xec5df0(0x183));if(_0x3cc480===_0x80e2c7)break;else _0x8f7104['push'](_0x8f7104['shift']());}catch(_0x150c2e){_0x8f7104['push'](_0x8f7104['shift']());}}}(_0x5dc5,0x5d924));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';class ActorSpellPreparedToggler extends Application{static[_0x4571fc(0x180)](_0x530a14,_0x44505a,_0x5b4c6f,_0x4787a4){const _0x19dc9a=_0x4571fc,_0x2fe324=new ActorSpellPreparedToggler(_0x44505a[_0x19dc9a(0x1c4)]);_0x2fe324['render'](!![]);}constructor(_0xb5178c){const _0x29f80f=_0x4571fc;super({'title':'Spell\x20Prepared\x20Toggler','template':SharedConsts[_0x29f80f(0x194)]+_0x29f80f(0x1c3),'width':0x1e0,'height':Util[_0x29f80f(0x17b)](),'resizable':!![]}),this[_0x29f80f(0x1ac)]=_0xb5178c,this[_0x29f80f(0x1a4)]=this['_actor']['items']['filter'](_0x1acddc=>_0x1acddc['type']==='spell'&&_0x1acddc[_0x29f80f(0x1b8)][_0x29f80f(0x1b8)]['level']!==0x0&&_0x1acddc[_0x29f80f(0x1b8)][_0x29f80f(0x1b8)]['preparation']&&_0x1acddc[_0x29f80f(0x1b8)][_0x29f80f(0x1b8)][_0x29f80f(0x191)][_0x29f80f(0x1be)]===_0x29f80f(0x18f)),this[_0x29f80f(0x1ce)]=new ActorSpellPreparedToggler[(_0x29f80f(0x1a6))](),this[_0x29f80f(0x1cb)]=null,this[_0x29f80f(0x1b2)]=null,this[_0x29f80f(0x1bb)]=null;}[_0x4571fc(0x199)](){const _0x4e0041=_0x4571fc,_0x1af60a=this['_pageFilter'][_0x4e0041(0x1a3)]['getValues']();this[_0x4e0041(0x1cb)][_0x4e0041(0x181)](_0x11129f=>this[_0x4e0041(0x1ce)][_0x4e0041(0x1c1)](_0x1af60a,this[_0x4e0041(0x18b)][_0x11129f['ix']]));}[_0x4571fc(0x188)](_0x10f708){const _0x553360=_0x4571fc;super[_0x553360(0x188)](_0x10f708),this[_0x553360(0x196)](_0x10f708),this['_activateListeners_initBtnReset'](_0x10f708),this['_activateListeners_pInitListAndFilters'](_0x10f708);}['_activateListeners_initBtnRun'](_0x59b4aa){const _0x402dfc=_0x4571fc;_0x59b4aa['find'](_0x402dfc(0x17e))[_0x402dfc(0x17d)](async()=>{const _0x589123=_0x402dfc;for(const _0x508efe of this['_list'][_0x589123(0x1b4)]){await _0x508efe[_0x589123(0x1b8)][_0x589123(0x1a8)]();}});}[_0x4571fc(0x186)](_0x55a4dc){const _0x3fa6ad=_0x4571fc;this[_0x3fa6ad(0x1b2)]=_0x55a4dc['find']('[name=\x22btn-reset\x22]')[_0x3fa6ad(0x17d)](()=>{const _0x5f20e4=_0x3fa6ad;_0x55a4dc[_0x5f20e4(0x170)](_0x5f20e4(0x1bf))['val']('');if(!this[_0x5f20e4(0x1cb)])return;this['_list'][_0x5f20e4(0x1c7)](),this['_list'][_0x5f20e4(0x1b4)]['forEach'](_0x32428e=>_0x32428e[_0x5f20e4(0x1b8)][_0x5f20e4(0x1a9)]());});}['_activateListeners_pInitListAndFilters'](_0xe6e4e6){const _0x3a4a5b=_0x4571fc;this['_$iptSearch']=_0xe6e4e6[_0x3a4a5b(0x170)](_0x3a4a5b(0x1bf)),this[_0x3a4a5b(0x1cb)]=new List({'$iptSearch':this[_0x3a4a5b(0x1bb)],'$wrpList':_0xe6e4e6['find'](_0x3a4a5b(0x1ad)),'isUseJquery':!![],'fnSort':PageFilterSpells[_0x3a4a5b(0x17a)]}),SortUtil[_0x3a4a5b(0x1ca)](_0xe6e4e6['find'](_0x3a4a5b(0x19c)),this['_list']);const _0x2b16af=_0xe6e4e6['find'](_0x3a4a5b(0x19f))[_0x3a4a5b(0x18c)](()=>{const _0x2d912b=_0x3a4a5b,_0x3dd227=_0x2b16af['prop'](_0x2d912b(0x17f));this['_list'][_0x2d912b(0x19d)]['forEach'](_0x5680b4=>_0x5680b4[_0x2d912b(0x1b8)][_0x2d912b(0x1b3)](_0x3dd227));});return this[_0x3a4a5b(0x1ce)]['pInitFilterBox']({'$iptSearch':this[_0x3a4a5b(0x1bb)],'$btnReset':this[_0x3a4a5b(0x1b2)],'$btnOpen':_0xe6e4e6[_0x3a4a5b(0x170)](_0x3a4a5b(0x1b7)),'$btnToggleSummaryHidden':_0xe6e4e6[_0x3a4a5b(0x170)](_0x3a4a5b(0x1b1)),'$wrpMiniPills':_0xe6e4e6['find'](_0x3a4a5b(0x1a7)),'namespace':_0x3a4a5b(0x1ae)})[_0x3a4a5b(0x1b6)](()=>{const _0x15ac40=_0x3a4a5b;this['_rows'][_0x15ac40(0x1c2)](_0x15e566=>this[_0x15ac40(0x1ce)][_0x15ac40(0x1af)](_0x15e566)),this[_0x15ac40(0x1cb)]['doAbsorbItems'](this[_0x15ac40(0x1a4)],{'fnGetName':_0x58e2c5=>_0x58e2c5[_0x15ac40(0x1c9)],'fnGetValues':_0x39b42f=>({'level':MiscUtil[_0x15ac40(0x1ba)](_0x39b42f,_0x15ac40(0x1b8),'data',_0x15ac40(0x1ab))||-0x1}),'fnGetData':_0xdcbc9c=>{const _0x3735a9=_0x15ac40,_0x301276=$(_0xdcbc9c[_0x3735a9(0x192)]);return{'cbSel':_0x301276[_0x3735a9(0x170)]('input')[0x0],'$dispModified':_0x301276['find'](_0x3735a9(0x175))};},'fnBindListeners':(_0x3d9978,_0x4fe1f6)=>{const _0x26f8bd=_0x15ac40,_0x5b93b4={'prepared':_0x4fe1f6[_0x26f8bd(0x1b8)][_0x26f8bd(0x1b8)][_0x26f8bd(0x191)]['prepared']},_0x4a5fcf=()=>{const _0xf4f482=_0x26f8bd;_0x3d9978[_0xf4f482(0x1b8)][_0xf4f482(0x174)][_0xf4f482(0x17f)]=_0x5b93b4[_0xf4f482(0x18f)],_0x3d9978[_0xf4f482(0x1b8)]['$dispModified'][_0xf4f482(0x18d)](_0xf4f482(0x1a5),_0x4fe1f6['data']['data'][_0xf4f482(0x191)][_0xf4f482(0x18f)]===_0x5b93b4['prepared']);},_0x638a0a=_0x28c776=>{const _0x3df846=_0x26f8bd;_0x5b93b4[_0x3df846(0x18f)]=_0x28c776,_0x4a5fcf();},_0x216b07=()=>{const _0x16f303=_0x26f8bd;_0x5b93b4[_0x16f303(0x18f)]=_0x4fe1f6['data']['data']['preparation']['prepared'],_0x4a5fcf();},_0x2ab9b0=async()=>{const _0x3d29ad=_0x26f8bd;await _0x4fe1f6[_0x3d29ad(0x19e)]({'data':{'preparation':{'prepared':_0x5b93b4[_0x3d29ad(0x18f)]}}}),_0x4a5fcf();};_0x3d9978[_0x26f8bd(0x1b8)][_0x26f8bd(0x1b3)]=_0x638a0a,_0x3d9978[_0x26f8bd(0x1b8)][_0x26f8bd(0x1a9)]=_0x216b07,_0x3d9978[_0x26f8bd(0x1b8)][_0x26f8bd(0x1a8)]=_0x2ab9b0,_0x3d9978['ele']['addEventListener']('click',_0x210676=>{const _0x19ae56=_0x26f8bd;ListUiUtil[_0x19ae56(0x184)](this['_list'],_0x3d9978,_0x210676,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x15c605,_0x3fdad8)=>_0x15c605[_0x19ae56(0x1b8)]['setNextState'](_0x3fdad8)});});}}),this[_0x15ac40(0x1cb)]['init'](),this[_0x15ac40(0x1ce)][_0x15ac40(0x1a3)][_0x15ac40(0x197)](),this[_0x15ac40(0x1ce)][_0x15ac40(0x1a3)]['on'](FilterBox[_0x15ac40(0x195)],this[_0x15ac40(0x199)]['bind'](this)),this[_0x15ac40(0x199)]();});}['getData'](){const _0x7a8f5e=_0x4571fc;return this[_0x7a8f5e(0x18b)]=this[_0x7a8f5e(0x1a4)][_0x7a8f5e(0x1a1)]((_0x415aca,_0x433d12)=>({'name':_0x415aca[_0x7a8f5e(0x1c9)],'isPrepared':_0x415aca[_0x7a8f5e(0x1b8)][_0x7a8f5e(0x1b8)][_0x7a8f5e(0x191)][_0x7a8f5e(0x18f)],'level':MiscUtil[_0x7a8f5e(0x1ba)](_0x415aca,_0x7a8f5e(0x1b8),_0x7a8f5e(0x1b8),_0x7a8f5e(0x1ab))||-0x1,'concentration':!!MiscUtil['get'](_0x415aca,_0x7a8f5e(0x1b8),_0x7a8f5e(0x1b8),'components',_0x7a8f5e(0x1c6)),'v':!!MiscUtil[_0x7a8f5e(0x1ba)](_0x415aca,_0x7a8f5e(0x1b8),_0x7a8f5e(0x1b8),_0x7a8f5e(0x1cd),'vocal'),'s':!!MiscUtil[_0x7a8f5e(0x1ba)](_0x415aca,_0x7a8f5e(0x1b8),'data',_0x7a8f5e(0x1cd),_0x7a8f5e(0x18a)),'m':!!MiscUtil[_0x7a8f5e(0x1ba)](_0x415aca,_0x7a8f5e(0x1b8),'data',_0x7a8f5e(0x1cd),_0x7a8f5e(0x1c8)),'ritual':!!MiscUtil['get'](_0x415aca,_0x7a8f5e(0x1b8),'data','components',_0x7a8f5e(0x172)),'ix':_0x433d12})),{...super[_0x7a8f5e(0x1bd)](),'rows':this[_0x7a8f5e(0x18b)]};}[_0x4571fc(0x1a0)](..._0x1e2588){const _0x4be239=_0x4571fc;return this[_0x4be239(0x1ce)][_0x4be239(0x1b0)](),super[_0x4be239(0x1a0)](..._0x1e2588);}}ActorSpellPreparedToggler['AppFilter']=class extends AppFilter{constructor(){const _0x501031=_0x4571fc;super(),this[_0x501031(0x177)]=new Filter({'header':_0x501031(0x173),'items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0x3998e0=>~_0x3998e0?PageFilterSpells[_0x501031(0x18e)](_0x3998e0):_0x501031(0x19a)}),this['_miscFilter']=new Filter({'header':'Components\x20&\x20Miscellaneous','items':[_0x501031(0x176),'Verbal',_0x501031(0x178),_0x501031(0x182),_0x501031(0x17c)],'itemSortFn':PageFilterSpells[_0x501031(0x1c5)]});}[_0x4571fc(0x1af)](_0x29990a,_0x2ba075){const _0x1d0d0d=_0x4571fc;if(_0x2ba075)return;this['_levelFilter'][_0x1d0d0d(0x179)](_0x29990a[_0x1d0d0d(0x1ab)]),_0x29990a[_0x1d0d0d(0x190)]=[];if(_0x29990a[_0x1d0d0d(0x1c6)])_0x29990a[_0x1d0d0d(0x190)][_0x1d0d0d(0x171)](_0x1d0d0d(0x176));if(_0x29990a['v'])_0x29990a[_0x1d0d0d(0x190)][_0x1d0d0d(0x171)](_0x1d0d0d(0x1aa));if(_0x29990a['s'])_0x29990a[_0x1d0d0d(0x190)]['push'](_0x1d0d0d(0x178));if(_0x29990a['m'])_0x29990a[_0x1d0d0d(0x190)][_0x1d0d0d(0x171)](_0x1d0d0d(0x182));if(_0x29990a[_0x1d0d0d(0x172)])_0x29990a[_0x1d0d0d(0x190)][_0x1d0d0d(0x171)]('Ritual');}async[_0x4571fc(0x16f)](_0x54a1ad){const _0x3bec75=_0x4571fc;_0x54a1ad[_0x3bec75(0x1cc)]=[this['_levelFilter'],this[_0x3bec75(0x16e)]];}['toDisplay'](_0x165e54,_0x22e833){const _0x52952e=_0x4571fc;return this[_0x52952e(0x193)][_0x52952e(0x1c1)](_0x165e54,_0x22e833['level'],_0x22e833[_0x52952e(0x190)]);}};export{ActorSpellPreparedToggler};