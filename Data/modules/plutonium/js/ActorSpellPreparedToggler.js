const _0x28b2=['somatic','toDisplay','teardown','name','find','prop','_activateListeners_initBtnRun','render','resetNextState','components','[data-name=\x22wrp-btns-sort\x22]','reset','Spell\x20Prepared\x20Toggler','getFltrSpellLevelStr','setNextState','[name=btn-filter]','_actor','_pageFilter','map','Concentration','material','_$iptSearch','checked','then','data','activateListeners','Components\x20&\x20Miscellaneous','Unknown','sortSpells','getData','tool-actor-spell-prepared-toggler','doAbsorbItems','concentration','ritual','.act-sp-prep__disp-modified','init','filters','Material','[name=\x22btn-run\x22]','getValues','click','Ritual','_handleFilterChange','EVNT_VALCHANGE','val','sortMetaFilter','preparation','change','_pPopulateBoxOptions','filterBox','_$btnReset','MODULE_LOCATION','_activateListeners_initBtnReset','visibleItems','_fMisc','update','filter','forEach','_list','bind','[name=btn-toggle-summary]','[name=\x22cb-select-all\x22]','handleSelectClick','level','spell','Somatic','push','_levelFilter','prepared','vocal','pHandleButtonClick','_activateListeners_pInitListAndFilters','_miscFilter','pCommitState','_filterBox','items','get','[name=\x22btn-reset\x22]','AppFilter','ve-hidden','_actorItems','addToFilters','Verbal','.search','_rows','type'];(function(_0x1a27d0,_0x28b2a3){const _0x354e07=function(_0x51dab8){while(--_0x51dab8){_0x1a27d0['push'](_0x1a27d0['shift']());}};_0x354e07(++_0x28b2a3);}(_0x28b2,0x1e0));const _0x354e=function(_0x1a27d0,_0x28b2a3){_0x1a27d0=_0x1a27d0-0x0;let _0x354e07=_0x28b2[_0x1a27d0];return _0x354e07;};const _0x2195f7=_0x354e;'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';class ActorSpellPreparedToggler extends Application{static[_0x2195f7('0x14')](_0x51dab8,_0x115b22,_0x184627,_0x21dcb7){const _0x49658b=_0x2195f7,_0x508d10=new ActorSpellPreparedToggler(_0x115b22['actor']);_0x508d10[_0x49658b('0x2b')](!![]);}constructor(_0x488f9e){const _0x4127fd=_0x2195f7;super({'title':_0x4127fd('0x30'),'template':SharedConsts[_0x4127fd('0x1')]+'/template/ActorSpellPreparedToggler.handlebars','width':0x1e0,'height':Util['getMaxWindowHeight'](),'resizable':!![]}),this[_0x4127fd('0x34')]=_0x488f9e,this['_actorItems']=this[_0x4127fd('0x34')]['items'][_0x4127fd('0x6')](_0x59c4f9=>_0x59c4f9[_0x4127fd('0x23')]===_0x4127fd('0xe')&&_0x59c4f9['data'][_0x4127fd('0x3c')][_0x4127fd('0xd')]!==0x0&&_0x59c4f9[_0x4127fd('0x3c')][_0x4127fd('0x3c')][_0x4127fd('0x52')]&&_0x59c4f9[_0x4127fd('0x3c')]['data'][_0x4127fd('0x52')]['mode']===_0x4127fd('0x12')),this[_0x4127fd('0x35')]=new ActorSpellPreparedToggler[(_0x4127fd('0x1c'))](),this[_0x4127fd('0x8')]=null,this[_0x4127fd('0x0')]=null,this[_0x4127fd('0x39')]=null;}[_0x2195f7('0x4e')](){const _0x38ecad=_0x2195f7,_0x3531af=this['_pageFilter'][_0x38ecad('0x55')][_0x38ecad('0x4b')]();this[_0x38ecad('0x8')][_0x38ecad('0x6')](_0x57b819=>this[_0x38ecad('0x35')][_0x38ecad('0x25')](_0x3531af,this[_0x38ecad('0x22')][_0x57b819['ix']]));}[_0x2195f7('0x3d')](_0x4be290){const _0x30135b=_0x2195f7;super['activateListeners'](_0x4be290),this[_0x30135b('0x2a')](_0x4be290),this[_0x30135b('0x2')](_0x4be290),this[_0x30135b('0x15')](_0x4be290);}[_0x2195f7('0x2a')](_0x37bf80){const _0x2e4a04=_0x2195f7;_0x37bf80[_0x2e4a04('0x28')](_0x2e4a04('0x4a'))[_0x2e4a04('0x4c')](async()=>{const _0x3cdee5=_0x2e4a04;for(const _0x8bd467 of this['_list'][_0x3cdee5('0x19')]){await _0x8bd467[_0x3cdee5('0x3c')][_0x3cdee5('0x17')]();}});}[_0x2195f7('0x2')](_0x215a19){const _0x190e9c=_0x2195f7;this[_0x190e9c('0x0')]=_0x215a19['find'](_0x190e9c('0x1b'))[_0x190e9c('0x4c')](()=>{const _0x5c6ea9=_0x190e9c;_0x215a19[_0x5c6ea9('0x28')](_0x5c6ea9('0x21'))[_0x5c6ea9('0x50')]('');if(!this[_0x5c6ea9('0x8')])return;this[_0x5c6ea9('0x8')][_0x5c6ea9('0x2f')](),this[_0x5c6ea9('0x8')][_0x5c6ea9('0x19')][_0x5c6ea9('0x7')](_0xba8ffd=>_0xba8ffd[_0x5c6ea9('0x3c')][_0x5c6ea9('0x2c')]());});}['_activateListeners_pInitListAndFilters'](_0x278d40){const _0x56c16a=_0x2195f7;this[_0x56c16a('0x39')]=_0x278d40['find'](_0x56c16a('0x21')),this['_list']=new List({'$iptSearch':this[_0x56c16a('0x39')],'$wrpList':_0x278d40[_0x56c16a('0x28')]('.veapp__list'),'isUseJquery':!![],'fnSort':PageFilterSpells[_0x56c16a('0x40')]}),SortUtil['initBtnSortHandlers'](_0x278d40[_0x56c16a('0x28')](_0x56c16a('0x2e')),this[_0x56c16a('0x8')]);const _0x3cbcae=_0x278d40[_0x56c16a('0x28')](_0x56c16a('0xb'))[_0x56c16a('0x53')](()=>{const _0x5cdf7f=_0x56c16a,_0x2e011d=_0x3cbcae[_0x5cdf7f('0x29')](_0x5cdf7f('0x3a'));this[_0x5cdf7f('0x8')][_0x5cdf7f('0x3')][_0x5cdf7f('0x7')](_0x5dea3f=>_0x5dea3f['data']['setNextState'](_0x2e011d));});return this[_0x56c16a('0x35')]['pInitFilterBox']({'$iptSearch':this[_0x56c16a('0x39')],'$btnReset':this[_0x56c16a('0x0')],'$btnOpen':_0x278d40[_0x56c16a('0x28')](_0x56c16a('0x33')),'$btnToggleSummaryHidden':_0x278d40[_0x56c16a('0x28')](_0x56c16a('0xa')),'$wrpMiniPills':_0x278d40[_0x56c16a('0x28')]('.fltr__mini-view'),'namespace':_0x56c16a('0x42')})[_0x56c16a('0x3b')](()=>{const _0x2c6a91=_0x56c16a;this[_0x2c6a91('0x22')]['forEach'](_0x330bf4=>this[_0x2c6a91('0x35')][_0x2c6a91('0x1f')](_0x330bf4)),this['_list'][_0x2c6a91('0x43')](this['_actorItems'],{'fnGetName':_0x1ae432=>_0x1ae432[_0x2c6a91('0x27')],'fnGetValues':_0x15ad89=>({'level':MiscUtil[_0x2c6a91('0x1a')](_0x15ad89,_0x2c6a91('0x3c'),_0x2c6a91('0x3c'),_0x2c6a91('0xd'))||-0x1}),'fnGetData':_0x4cfbdf=>{const _0x2cbdd1=_0x2c6a91,_0x3276b1=$(_0x4cfbdf['ele']);return{'cbSel':_0x3276b1[_0x2cbdd1('0x28')]('input')[0x0],'$dispModified':_0x3276b1['find'](_0x2cbdd1('0x46'))};},'fnBindListeners':(_0x46d93a,_0x43334e)=>{const _0x245f87=_0x2c6a91,_0x3668d3={'prepared':_0x43334e[_0x245f87('0x3c')][_0x245f87('0x3c')]['preparation'][_0x245f87('0x12')]},_0x4986b8=()=>{const _0x397b0a=_0x245f87;_0x46d93a[_0x397b0a('0x3c')]['cbSel'][_0x397b0a('0x3a')]=_0x3668d3[_0x397b0a('0x12')],_0x46d93a['data']['$dispModified']['toggleClass'](_0x397b0a('0x1d'),_0x43334e[_0x397b0a('0x3c')][_0x397b0a('0x3c')][_0x397b0a('0x52')][_0x397b0a('0x12')]===_0x3668d3[_0x397b0a('0x12')]);},_0x4d60fa=_0x35d983=>{const _0x1f938f=_0x245f87;_0x3668d3[_0x1f938f('0x12')]=_0x35d983,_0x4986b8();},_0x4d047f=()=>{const _0x384364=_0x245f87;_0x3668d3[_0x384364('0x12')]=_0x43334e[_0x384364('0x3c')][_0x384364('0x3c')][_0x384364('0x52')]['prepared'],_0x4986b8();},_0x2aa317=async()=>{const _0x87414b=_0x245f87;await _0x43334e[_0x87414b('0x5')]({'data':{'preparation':{'prepared':_0x3668d3['prepared']}}}),_0x4986b8();};_0x46d93a[_0x245f87('0x3c')][_0x245f87('0x32')]=_0x4d60fa,_0x46d93a[_0x245f87('0x3c')][_0x245f87('0x2c')]=_0x4d047f,_0x46d93a[_0x245f87('0x3c')][_0x245f87('0x17')]=_0x2aa317,_0x46d93a['ele']['addEventListener'](_0x245f87('0x4c'),_0x59d238=>{const _0x1ce51e=_0x245f87;ListUiUtil[_0x1ce51e('0xc')](this[_0x1ce51e('0x8')],_0x46d93a,_0x59d238,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x3897bb,_0x4c023e)=>_0x3897bb['data'][_0x1ce51e('0x32')](_0x4c023e)});});}}),this[_0x2c6a91('0x8')][_0x2c6a91('0x47')](),this['_pageFilter']['filterBox'][_0x2c6a91('0x2b')](),$(this[_0x2c6a91('0x35')][_0x2c6a91('0x55')])['on'](FilterBox[_0x2c6a91('0x4f')],this['_handleFilterChange'][_0x2c6a91('0x9')](this)),this['_handleFilterChange']();});}['getData'](){const _0x467891=_0x2195f7;return this[_0x467891('0x22')]=this[_0x467891('0x1e')][_0x467891('0x36')]((_0x23b1ce,_0x4402da)=>({'name':_0x23b1ce[_0x467891('0x27')],'isPrepared':_0x23b1ce[_0x467891('0x3c')][_0x467891('0x3c')][_0x467891('0x52')][_0x467891('0x12')],'level':MiscUtil[_0x467891('0x1a')](_0x23b1ce,'data','data',_0x467891('0xd'))||-0x1,'concentration':!!MiscUtil['get'](_0x23b1ce,'data',_0x467891('0x3c'),'components',_0x467891('0x44')),'v':!!MiscUtil[_0x467891('0x1a')](_0x23b1ce,_0x467891('0x3c'),_0x467891('0x3c'),_0x467891('0x2d'),_0x467891('0x13')),'s':!!MiscUtil['get'](_0x23b1ce,_0x467891('0x3c'),_0x467891('0x3c'),_0x467891('0x2d'),_0x467891('0x24')),'m':!!MiscUtil[_0x467891('0x1a')](_0x23b1ce,_0x467891('0x3c'),_0x467891('0x3c'),_0x467891('0x2d'),_0x467891('0x38')),'ritual':!!MiscUtil[_0x467891('0x1a')](_0x23b1ce,'data','data',_0x467891('0x2d'),_0x467891('0x45')),'ix':_0x4402da})),{...super[_0x467891('0x41')](),'rows':this[_0x467891('0x22')]};}['close'](..._0x3c714f){const _0x41964b=_0x2195f7;super['close'](..._0x3c714f),this[_0x41964b('0x35')][_0x41964b('0x26')]();}}ActorSpellPreparedToggler[_0x2195f7('0x1c')]=class extends AppFilter{constructor(){const _0x3fead9=_0x2195f7;super(),this['_levelFilter']=new Filter({'header':'Level','items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0xf18c9f=>~_0xf18c9f?PageFilterSpells[_0x3fead9('0x31')](_0xf18c9f):_0x3fead9('0x3f')}),this[_0x3fead9('0x16')]=new Filter({'header':_0x3fead9('0x3e'),'items':[_0x3fead9('0x37'),_0x3fead9('0x20'),_0x3fead9('0xf'),_0x3fead9('0x49'),_0x3fead9('0x4d')],'itemSortFn':PageFilterSpells[_0x3fead9('0x51')]});}[_0x2195f7('0x1f')](_0x114cf3,_0x38744f){const _0x20ff6b=_0x2195f7;if(_0x38744f)return;this[_0x20ff6b('0x11')]['addItem'](_0x114cf3[_0x20ff6b('0xd')]),_0x114cf3['_fMisc']=[];if(_0x114cf3[_0x20ff6b('0x44')])_0x114cf3['_fMisc']['push'](_0x20ff6b('0x37'));if(_0x114cf3['v'])_0x114cf3['_fMisc']['push'](_0x20ff6b('0x20'));if(_0x114cf3['s'])_0x114cf3[_0x20ff6b('0x4')][_0x20ff6b('0x10')](_0x20ff6b('0xf'));if(_0x114cf3['m'])_0x114cf3[_0x20ff6b('0x4')][_0x20ff6b('0x10')]('Material');if(_0x114cf3[_0x20ff6b('0x45')])_0x114cf3['_fMisc'][_0x20ff6b('0x10')](_0x20ff6b('0x4d'));}async[_0x2195f7('0x54')](_0x37173f){const _0x3edd67=_0x2195f7;_0x37173f[_0x3edd67('0x48')]=[this['_levelFilter'],this[_0x3edd67('0x16')]];}[_0x2195f7('0x25')](_0x297438,_0x160e34){const _0x3ac22c=_0x2195f7;return this[_0x3ac22c('0x18')][_0x3ac22c('0x25')](_0x297438,_0x160e34[_0x3ac22c('0xd')],_0x160e34[_0x3ac22c('0x4')]);}};export{ActorSpellPreparedToggler};