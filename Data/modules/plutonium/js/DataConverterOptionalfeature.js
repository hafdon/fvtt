const _0x147a=['find','entries','requirements','<p><i>Prerequisite:\x20','importOptionalFeature','homebrew','foundryOptionalfeature','getCleanEntityName','optionalfeature','_pGetSideData','pGetOptionalFeatureItem','</i></p>','_pIsInSrd','pMutActorUpdate','_pGetOptionalFeatureItem_fromSrd','setFirstSection','_pGetImagePath','_pGetAdditionalData','getNameWithSourcePart','permissions','type','\x0a\x09\x09</div>','/media/icon/skills.svg','modules/','_getDescriptionValue','utils','<div>\x0a\x09\x09\x09','getSourceWithPagePart','MODULE_NAME','render','name','source','_pGetOptionalFeatureItem_other','isAddPermission','pGetOptionalFeatureAdditionalData','getSrdCompendiumEntity','get','data','permission','isCancelled'];(function(_0x10d181,_0x147ae7){const _0x58a1e9=function(_0x55d55b){while(--_0x55d55b){_0x10d181['push'](_0x10d181['shift']());}};_0x58a1e9(++_0x147ae7);}(_0x147a,0xaa));const _0x58a1=function(_0x10d181,_0x147ae7){_0x10d181=_0x10d181-0x0;let _0x58a1e9=_0x147a[_0x10d181];return _0x58a1e9;};import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';class DataConverterOptionalfeature{static async[_0x58a1('0x0')](_0x3c0b4b,_0x33c409){_0x33c409=_0x33c409||{};let _0x2edcf0;return await this[_0x58a1('0x2')](_0x3c0b4b,_0x33c409)?_0x2edcf0=this[_0x58a1('0x4')](_0x3c0b4b,_0x33c409):_0x2edcf0=this[_0x58a1('0x16')](_0x3c0b4b,_0x33c409),_0x2edcf0;}static async[_0x58a1('0x2')](_0x9e87e1){const _0x2dd859=await DataConverter[_0x58a1('0x19')](_0x58a1('0x26'),_0x9e87e1);return!!_0x2dd859;}static async[_0x58a1('0x4')](_0x3997f0,_0x27f42e){const _0x3bed0c=await DataConverter[_0x58a1('0x19')](_0x58a1('0x26'),_0x3997f0),_0x53a158=this[_0x58a1('0xe')](_0x3997f0),_0x2d7fc1=await this['_pGetAdditionalData'](_0x3997f0),_0x28a22b={'name':UtilApplications['getCleanEntityName'](DataConverter[_0x58a1('0x8')](_0x3997f0)),'type':_0x3bed0c[_0x58a1('0xa')],'data':{..._0x3bed0c['data'],'source':DataConverter[_0x58a1('0x11')](_0x3997f0),'description':{'value':_0x53a158,'chat':'','unidentified':''},..._0x2d7fc1},'permission':{'default':0x0},'img':await this[_0x58a1('0x6')](_0x3997f0)};if(_0x27f42e[_0x58a1('0x17')])_0x28a22b[_0x58a1('0x1c')]={'default':Config[_0x58a1('0x1a')]('importOptionalFeature',_0x58a1('0x9'))};return _0x28a22b;}static async[_0x58a1('0x16')](_0x192299,_0x28aae4){const _0x506165=this[_0x58a1('0xe')](_0x192299),_0x15a916=_0x192299['_foundryData']||{},_0x475dc9=await this['_pGetAdditionalData'](_0x192299),_0x32d297={'name':UtilApplications[_0x58a1('0x25')](DataConverter['getNameWithSourcePart'](_0x192299)),'data':{'source':DataConverter[_0x58a1('0x11')](_0x192299),'description':{'value':_0x506165,'chat':'','unidentified':''},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'range':{'value':0x0,'long':0x0,'units':null},'uses':{'value':0x0,'max':0x0,'per':''},'ability':'','actionType':'','attackBonus':0x0,'chatFlavor':'','critical':null,'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'requirements':_0x15a916[_0x58a1('0x20')]||'','recharge':{'value':0x0,'charged':!![]},..._0x475dc9},'permission':{'default':0x0},'type':'feat','img':await this[_0x58a1('0x6')](_0x192299)};if(_0x28aae4[_0x58a1('0x17')])_0x32d297[_0x58a1('0x1c')]={'default':Config[_0x58a1('0x1a')](_0x58a1('0x22'),'permissions')};return _0x32d297;}static[_0x58a1('0xe')](_0x30b640){const _0x60ab0c=Renderer[_0x58a1('0xf')]['getPrerequisiteText'](_0x30b640['prerequisite']);return _0x58a1('0x10')+(_0x60ab0c?_0x58a1('0x21')+_0x60ab0c+_0x58a1('0x1'):'')+'\x0a\x09\x09\x09'+Renderer[_0x58a1('0x1a')]()[_0x58a1('0x5')](!![])[_0x58a1('0x13')]({'entries':_0x30b640[_0x58a1('0x1f')]},0x2)+_0x58a1('0xb');}static async['pMutActorUpdateOptionalFeature'](_0x35226a,_0x4e5e5c,_0x323506,_0x4bc118){const _0x4ba3e4=await this[_0x58a1('0x27')](_0x323506),_0x209272={'sideData':_0x4ba3e4,'isCancelled':![]};await DataConverter[_0x58a1('0x3')](_0x35226a,_0x4e5e5c,_0x323506,_0x209272);if(_0x209272['isCancelled'])_0x4bc118[_0x58a1('0x1d')]=!![];}static async[_0x58a1('0x6')](_0x178d07){const _0x4f5787=await DataConverter['pGetCompendiumImage'](_0x58a1('0x26'),_0x178d07);if(_0x4f5787)return _0x4f5787;return _0x58a1('0xd')+SharedConsts[_0x58a1('0x12')]+_0x58a1('0xc');}static async[_0x58a1('0x27')](_0xae0660){let _0x2d6437=(MiscUtil[_0x58a1('0x1a')](BrewUtil,_0x58a1('0x23'),_0x58a1('0x24'))||[])[_0x58a1('0x1e')](_0x5eb080=>_0x5eb080['name']===_0xae0660['name']&&_0x5eb080['source']===_0xae0660['source']);if(!_0x2d6437){const _0x22110f=await Vetools[_0x58a1('0x18')]();_0x2d6437=_0x22110f['optionalfeature'][_0x58a1('0x1e')](_0x55d227=>_0x55d227[_0x58a1('0x14')]===_0xae0660[_0x58a1('0x14')]&&_0x55d227['source']===_0xae0660[_0x58a1('0x15')]);}return _0x2d6437;}static async[_0x58a1('0x7')](_0x155916){const _0x285655=await this[_0x58a1('0x27')](_0x155916);if(!_0x285655)return null;return _0x285655[_0x58a1('0x1b')];}}export{DataConverterOptionalfeature};