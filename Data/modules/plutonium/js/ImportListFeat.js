const _0x25fb=['Feats','URL_TO_HASH_BUILDER','sourceShort','with','Name','Ability','SOURCE_TYP_BREW','Select\x20Feat','additionalSpells','DATA_URL_FEATS','pApplyFormDataToActor','init','PG_FEATS','DataSourceUrl','feat','prerequisite','sheet','isTemp','377039SLSCCy','ability','pGetHomebrewSources','CHAR_MAX_LEVEL','Observant','isToken','absorbFnBindListenersRadio','_content','sourceClassName','isStreamerMode','Item','689063HsForf','572202zXwbge','pGetUserInput','67qQrxdN','_isRadio','mix','absorbFnGetData','_pImportEntry_pImportToActor_fillFlags','Feat','_titleSearch','1483qMZKYY','Importing\x20feat\x20\x22','202274iWlzuI','source','_page','items','ascSort','bind','_pImportEntry_pFillItems','push','get','length','isCancelled','sourceJsonToColor','ele','map','absorbFnBindListeners','sourceLong','entries','TASK_EXIT_COMPLETE_DATA_ONLY','pGetSources','data','removeHook','flags','getData','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','sourceJsonToAbv','Elven\x20Accuracy','292823Fujuqx','_pImportEntry_pImportToActor','_actor','5etools','Prerequisite','Upload\x20File','TASK_EXIT_CANCELLED','constructor','_isPreviewable','feats','pFillActorAbilityData','SOURCE_TYP_CUSTOM','526579mlbFgw','getTotalClassLevels','_list','render','doHookSpellLinkRender','_slPrereq','SYM_UI_SKIP','name','keys','observantFeat','_slAbility','SOURCE_TYP_OFFICIAL_ALL','pImportEntry','pGetFeatItem','_pImportEntry_pHandleAdditionalSpells','abilityScoreIncrease','sourceJsonToFull','_titleButtonRun','link','update','_pImportEntry_pFillAbilities','isDataOnly','_pImportEntry_pImportToDirectoryGeneric','Custom\x20URL'];const _0x2bad=function(_0x399e89,_0x54c4c3){_0x399e89=_0x399e89-0x9b;let _0x25fb77=_0x25fb[_0x399e89];return _0x25fb77;};const _0x8742bb=_0x2bad;(function(_0x53336a,_0x5eca0e){const _0x45753f=_0x2bad;while(!![]){try{const _0x2f52af=parseInt(_0x45753f(0xad))+-parseInt(_0x45753f(0xc2))*parseInt(_0x45753f(0xbb))+-parseInt(_0x45753f(0xde))+-parseInt(_0x45753f(0xb9))+-parseInt(_0x45753f(0xc4))+parseInt(_0x45753f(0xea))+parseInt(_0x45753f(0xb8));if(_0x2f52af===_0x5eca0e)break;else _0x53336a['push'](_0x53336a['shift']());}catch(_0x88701d){_0x53336a['push'](_0x53336a['shift']());}}}(_0x25fb,0x68025));import{ImportList,MixinUserChooseImporter}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterFeat}from'./DataConverterFeat.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{Charactermancer_AbilityScoreSelect}from'./UtilCharactermancer.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{Consts}from'./Consts.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListFeat extends ImportList{static[_0x8742bb(0xa6)](){const _0x28b232=_0x8742bb;this['_initCreateSheetItemHook']({'prop':'feat','importerName':_0x28b232(0xc0)});}constructor(_0x4b3482,_0x21640f,_0x34d0a9){const _0xfeebaa=_0x8742bb;_0x21640f=_0x21640f||{},_0x34d0a9=_0x34d0a9||{},super({'title':'Import\x20Feats',..._0x21640f},_0x4b3482,{'props':[_0xfeebaa(0xa9)],'titleSearch':_0xfeebaa(0xe7),'sidebarTab':_0xfeebaa(0xc7),'gameProp':'items','defaultFolderPath':[_0xfeebaa(0x9b)],'folderType':_0xfeebaa(0xb7),'pageFilter':new PageFilterFeats(),'page':UrlUtil[_0xfeebaa(0xa7)],'isPreviewable':!![],'isDedupable':!![],..._0x34d0a9});}async[_0x8742bb(0xd6)](){const _0x599227=_0x8742bb;return[new UtilDataSource[(_0x599227(0xa8))](Config[_0x599227(0xcc)]('ui',_0x599227(0xb6))?'SRD':_0x599227(0xe1),Vetools[_0x599227(0xa4)],{'filterTypes':[UtilDataSource[_0x599227(0xf5)]],'isDefault':!![]}),new UtilDataSource[(_0x599227(0xa8))](_0x599227(0x101),'',{'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),new UtilDataSource['DataSourceFile'](_0x599227(0xe3),{'filterTypes':[UtilDataSource[_0x599227(0xe9)]]}),...(await Vetools[_0x599227(0xaf)](_0x599227(0xa9)))[_0x599227(0xd1)](({name:_0x348386,url:_0x381c30})=>new UtilDataSource[(_0x599227(0xa8))](_0x348386,_0x381c30,{'filterTypes':[UtilDataSource[_0x599227(0xa1)]]}))];}[_0x8742bb(0xda)](){const _0x4b7618=_0x8742bb;return{'isRadio':this['_isRadio'],'isPreviewable':this[_0x4b7618(0xe6)],'titleButtonRun':this[_0x4b7618(0xfb)],'titleSearch':this[_0x4b7618(0xc1)],'cols':[{'name':_0x4b7618(0x9f),'width':0x4,'field':_0x4b7618(0xf1)},{'name':_0x4b7618(0xa0),'width':0x3,'field':_0x4b7618(0xae)},{'name':_0x4b7618(0xe2),'width':0x3,'field':_0x4b7618(0xaa)},{'name':'Source','width':0x1,'field':'source','titleProp':_0x4b7618(0xd3),'displayProp':_0x4b7618(0x9d),'classNameProp':_0x4b7618(0xb5),'rowClassName':'text-center'}],'rows':this[_0x4b7618(0xb4)][_0x4b7618(0xd1)]((_0x4e049f,_0x31358a)=>{const _0x2bcd41=_0x4b7618;return this['_pageFilter'][_0x2bcd41(0xe5)]['mutateForFilters'](_0x4e049f),{'name':_0x4e049f['name'],'ability':_0x4e049f[_0x2bcd41(0xf4)],'prerequisite':_0x4e049f[_0x2bcd41(0xef)],'source':_0x4e049f['source'],'sourceShort':Parser[_0x2bcd41(0xdc)](_0x4e049f['source']),'sourceLong':Parser[_0x2bcd41(0xfa)](_0x4e049f[_0x2bcd41(0xc5)]),'sourceClassName':Parser[_0x2bcd41(0xcf)](_0x4e049f['source']),'ix':_0x31358a};})};}['_activateListeners_absorbListItems'](){const _0x2c9a01=_0x8742bb;this[_0x2c9a01(0xec)]['doAbsorbItems'](this[_0x2c9a01(0xb4)],{'fnGetName':_0x2877db=>_0x2877db['name'],'fnGetValues':_0x5455d4=>({'source':_0x5455d4[_0x2c9a01(0xc5)],'ability':_0x5455d4[_0x2c9a01(0xf4)],'prerequisite':_0x5455d4[_0x2c9a01(0xef)],'hash':UrlUtil[_0x2c9a01(0x9c)][this[_0x2c9a01(0xc6)]](_0x5455d4)}),'fnGetData':UtilList2[_0x2c9a01(0xbe)],'fnBindListeners':_0x2de453=>this[_0x2c9a01(0xbc)]?UtilList2[_0x2c9a01(0xb3)](this[_0x2c9a01(0xec)],_0x2de453):UtilList2[_0x2c9a01(0xd2)](this[_0x2c9a01(0xec)],_0x2de453)});}async[_0x8742bb(0xf6)](_0x9116a1,_0xff654c){const _0x1a415d=_0x8742bb;_0xff654c=_0xff654c||{},console['log'](...LGT,_0x1a415d(0xc3)+_0x9116a1[_0x1a415d(0xf1)]+'\x22\x20(from\x20\x22'+Parser[_0x1a415d(0xdc)](_0x9116a1[_0x1a415d(0xc5)])+'\x22)');if(_0xff654c[_0x1a415d(0xff)])return{'imported':DataConverterFeat[_0x1a415d(0xf7)](_0x9116a1),'status':UtilApplications[_0x1a415d(0xd5)]};if(_0xff654c[_0x1a415d(0xac)])return this[_0x1a415d(0x100)](_0x9116a1,_0xff654c);else{if(this[_0x1a415d(0xe0)])return this[_0x1a415d(0xdf)](_0x9116a1,_0xff654c);else return this[_0x1a415d(0x100)](_0x9116a1,_0xff654c);}}async[_0x8742bb(0xdf)](_0x44637d,_0x182436){const _0x4f87b8=_0x8742bb,_0xb673d4={},_0x175a25={'isCancelled':![],'abilityScoreIncrease':null};await this['_pImportEntry_pImportToActor_fillFlags'](_0x44637d,_0x182436),await this[_0x4f87b8(0xfe)](_0x44637d,_0xb673d4,_0x175a25);if(_0x175a25[_0x4f87b8(0xce)])return{'status':UtilApplications[_0x4f87b8(0xe4)]};await this['_pImportEntry_pFillItems'](_0x44637d,_0xb673d4,_0x175a25);if(_0x175a25['isCancelled'])return{'status':UtilApplications[_0x4f87b8(0xe4)]};if(Object[_0x4f87b8(0xf2)](_0xb673d4)[_0x4f87b8(0xcd)])await this[_0x4f87b8(0xe0)][_0x4f87b8(0xfd)](_0xb673d4);if(this[_0x4f87b8(0xe0)][_0x4f87b8(0xb2)])this['_actor'][_0x4f87b8(0xab)][_0x4f87b8(0xed)]();return{'imported':{'name':_0x44637d[_0x4f87b8(0xf1)],'actor':this['_actor']},'status':UtilApplications['TASK_EXIT_COMPLETE']};}[_0x8742bb(0xbf)](_0x279406,_0x32a13b,_0x242408){const _0x155482=_0x8742bb,_0x13460c={},_0x3afa11={};if(_0x279406[_0x155482(0xf1)]===_0x155482(0xb1)&&_0x279406[_0x155482(0xc5)]===SRC_PHB)_0x3afa11[_0x155482(0xf3)]=!![];if(_0x279406[_0x155482(0xf1)]==='Alert'&&_0x279406[_0x155482(0xc5)]===SRC_PHB)_0x3afa11['initiativeAlert']=!![];if(_0x279406[_0x155482(0xf1)]===_0x155482(0xdd)&&_0x279406[_0x155482(0xc5)]===SRC_XGE)_0x3afa11['elvenAccuracy']=!![];if(Object['keys'](_0x3afa11)[_0x155482(0xcd)])_0x13460c['dnd5e']=_0x3afa11;if(Object['keys'](_0x13460c)[_0x155482(0xcd)])_0x32a13b[_0x155482(0xd9)]=_0x13460c;}async[_0x8742bb(0xfe)](_0x51316e,_0x4450fe,_0x4b8134){const _0x69731a=_0x8742bb,_0x356817=await Charactermancer_AbilityScoreSelect[_0x69731a(0xe8)](this[_0x69731a(0xe0)],_0x51316e[_0x69731a(0xae)],_0x4450fe,_0x4b8134);if(_0x4b8134[_0x69731a(0xce)])return;if(_0x356817==null)return;_0x4b8134[_0x69731a(0xf9)]=_0x356817[_0x69731a(0xd7)];}async[_0x8742bb(0xca)](_0x4988eb,_0x5e319c,_0x249aa2){const _0x2efdb2=_0x8742bb;_0x249aa2[_0x2efdb2(0xc7)]=_0x249aa2['items']||[];const _0x5f1c69={};await this[_0x2efdb2(0xf8)](_0x4988eb,_0x5e319c,_0x249aa2,_0x5f1c69);if(_0x249aa2['isCancelled'])return;const _0xc93f5b=DataConverterSpell[_0x2efdb2(0xee)][_0x2efdb2(0xc9)](null,this['_actor']['id'],_0x5f1c69);Renderer[_0x2efdb2(0xcc)]()['addHook'](_0x2efdb2(0xfc),_0x2efdb2(0xd0),_0xc93f5b),_0x249aa2[_0x2efdb2(0xc7)][_0x2efdb2(0xcb)](await DataConverterFeat['pGetFeatItem'](_0x4988eb)),Renderer[_0x2efdb2(0xcc)]()[_0x2efdb2(0xd8)](_0x2efdb2(0xfc),_0x2efdb2(0xd0),_0xc93f5b);if(_0x249aa2[_0x2efdb2(0xc7)][_0x2efdb2(0xcd)])await UtilActors['pAddActorItems'](this[_0x2efdb2(0xe0)],_0x249aa2[_0x2efdb2(0xc7)]);}async[_0x8742bb(0xf8)](_0x20c22e,_0x566810,_0x242839,_0x26fefc){const _0x5ebf92=_0x8742bb,_0xa6fe9c=Object[_0x5ebf92(0xd4)](_0x242839[_0x5ebf92(0xf9)]||{})['sort'](([,_0x109607],[,_0x4f8ced])=>SortUtil[_0x5ebf92(0xc8)](_0x4f8ced,_0x109607)),_0x4b39b5=_0xa6fe9c?.[0x0]?.[0x0]||null,_0x48888a=await Charactermancer_AdditionalSpellsSelect[_0x5ebf92(0xba)]({'additionalSpells':_0x20c22e[_0x5ebf92(0xa3)],'sourceHintText':_0x20c22e[_0x5ebf92(0xf1)],'currentLevel':0x0,'targetLevel':Consts[_0x5ebf92(0xb0)],'spellLevelLow':0x0,'spellLevelHigh':0x9});if(_0x48888a==null)return _0x242839[_0x5ebf92(0xce)]=!![];if(_0x48888a===VeCt[_0x5ebf92(0xf0)])return;const _0x5c2073=UtilActors[_0x5ebf92(0xeb)](this[_0x5ebf92(0xe0)]);await Charactermancer_AdditionalSpellsSelect[_0x5ebf92(0xa5)](this['_actor'],_0x48888a,{'casterLevel':_0x5c2073,'parentAbilityAbv':_0x4b39b5,'hashToIdMap':_0x26fefc});}[_0x8742bb(0xdb)](_0x3ab424,_0x282ff4){return DataConverterFeat['pGetFeatItem'](_0x3ab424,_0x282ff4);}}ImportListFeat['UserChoose']=class extends MiscUtil[_0x8742bb(0xbd)](ImportListFeat)[_0x8742bb(0x9e)](MixinUserChooseImporter){constructor(_0x5c9dfb){const _0x1effeb=_0x8742bb;super(_0x5c9dfb,{'title':_0x1effeb(0xa2)},{'titleButtonRun':'Select'});}};export{ImportListFeat};