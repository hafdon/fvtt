'use strict';const _0x1f3f=['getTotalClassLevels','_titleSearch','additionalSpells','\x22\x20(from\x20\x22','keys','addHook','get','sourceJsonToAbv','TASK_EXIT_COMPLETE','Import\x20Feats','1rBHkHb','172546HKaQCg','UserChoose','_isRadio','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','with','_pImportEntry_pImportToActor','12365hckfUQ','sourceClassName','ascSort','_pImportEntry_pFillItems','SRD','source','_slPrereq','Ability','ele','Observant','init','isStreamerMode','absorbFnBindListenersRadio','TASK_EXIT_COMPLETE_DATA_ONLY','PG_FEATS','link','pGetUserInput','text-center','mix','constructor','map','SOURCE_TYP_OFFICIAL_ALL','SOURCE_TYP_BREW','Select','641487rODuaM','pGetFeatItem','1117788kcfukC','length','sourceJsonToColor','Prerequisite','dnd5e','74gQOzck','isCancelled','297139CtkgeE','removeHook','initiativeAlert','sourceLong','ability','Custom\x20URL','_activateListeners_absorbListItems','5etools','_actor','TASK_EXIT_CANCELLED','items','doHookSpellLinkRender','_content','Elven\x20Accuracy','pImportEntry','observantFeat','doAbsorbItems','entries','sourceShort','_initCreateSheetItemHook','_list','absorbFnGetData','bind','Item','mutateForFilters','DataSourceUrl','Feat','_pImportEntry_pImportToDirectoryGeneric','Upload\x20File','getData','data','2qncWAh','log','1113419OqEuXm','feat','_pImportEntry_pImportToActor_fillFlags','sort','_slAbility','_pImportEntry_pHandleAdditionalSpells','isToken','pGetSources','DATA_URL_FEATS','update','pApplyFormDataToActor','URL_TO_HASH_BUILDER','125221asNakY','sourceJsonToFull','pFillActorAbilityData','name','isTemp','SOURCE_TYP_CUSTOM','7oXIYdI','feats','_pageFilter','elvenAccuracy'];const _0x5d78=function(_0x217ca1,_0x4f97ec){_0x217ca1=_0x217ca1-0x19c;let _0x1f3f33=_0x1f3f[_0x217ca1];return _0x1f3f33;};const _0x406e77=_0x5d78;(function(_0x346a35,_0x1a2c91){const _0x33dc6c=_0x5d78;while(!![]){try{const _0x153fc5=parseInt(_0x33dc6c(0x1e9))+-parseInt(_0x33dc6c(0x1f2))+parseInt(_0x33dc6c(0x1a8))*parseInt(_0x33dc6c(0x1cb))+parseInt(_0x33dc6c(0x1aa))*-parseInt(_0x33dc6c(0x1ca))+parseInt(_0x33dc6c(0x1eb))+-parseInt(_0x33dc6c(0x1b6))*-parseInt(_0x33dc6c(0x1bc))+parseInt(_0x33dc6c(0x1f0))*-parseInt(_0x33dc6c(0x1d1));if(_0x153fc5===_0x1a2c91)break;else _0x346a35['push'](_0x346a35['shift']());}catch(_0x354d6f){_0x346a35['push'](_0x346a35['shift']());}}}(_0x1f3f,0x9fff2));import{ImportList,MixinUserChooseImporter}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterFeat}from'./DataConverterFeat.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{Charactermancer_AbilityScoreSelect}from'./UtilCharactermancer.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';class ImportListFeat extends ImportList{static[_0x406e77(0x1db)](){const _0x2162cb=_0x406e77;this[_0x2162cb(0x19c)]({'prop':'feat','importerName':_0x2162cb(0x1a3)});}constructor(_0x1ba377,_0x21b819,_0x3f9b8f){const _0x571c16=_0x406e77;_0x21b819=_0x21b819||{},_0x3f9b8f=_0x3f9b8f||{},super({'title':_0x571c16(0x1c9),..._0x21b819},_0x1ba377,{'props':['feat'],'titleSearch':_0x571c16(0x1bd),'sidebarTab':_0x571c16(0x1fc),'gameProp':'items','defaultFolderPath':['Feats'],'folderType':_0x571c16(0x1a0),'pageFilter':new PageFilterFeats(),'page':UrlUtil[_0x571c16(0x1df)],'isPreviewable':!![],'isDedupable':!![],..._0x3f9b8f});}async[_0x406e77(0x1b1)](){const _0x5093da=_0x406e77;return[new ImportList[(_0x5093da(0x1a2))](Config[_0x5093da(0x1c6)]('ui',_0x5093da(0x1dc))?_0x5093da(0x1d5):_0x5093da(0x1f9),Vetools[_0x5093da(0x1b2)],{'filterTypes':[ImportList[_0x5093da(0x1e6)]],'isDefault':!![]}),new ImportList[(_0x5093da(0x1a2))](_0x5093da(0x1f7),'',{'filterTypes':[ImportList[_0x5093da(0x1bb)]]}),new ImportList['DataSourceFile'](_0x5093da(0x1a5),{'filterTypes':[ImportList[_0x5093da(0x1bb)]]}),...(await Vetools['pGetHomebrewSources'](_0x5093da(0x1ab)))[_0x5093da(0x1e5)](({name:_0x36957f,url:_0x56db58})=>new ImportList[(_0x5093da(0x1a2))](_0x36957f,_0x56db58,{'filterTypes':[ImportList[_0x5093da(0x1e7)]]}))];}[_0x406e77(0x1a6)](){const _0x4498bf=_0x406e77;return{'isRadio':this[_0x4498bf(0x1cd)],'isPreviewable':this['_isPreviewable'],'titleButtonRun':this['_titleButtonRun'],'titleSearch':this[_0x4498bf(0x1c1)],'cols':[{'name':'Name','width':0x4,'field':_0x4498bf(0x1b9)},{'name':_0x4498bf(0x1d8),'width':0x3,'field':'ability'},{'name':_0x4498bf(0x1ee),'width':0x3,'field':'prerequisite'},{'name':'Source','width':0x1,'field':_0x4498bf(0x1d6),'titleProp':_0x4498bf(0x1f5),'displayProp':_0x4498bf(0x204),'classNameProp':_0x4498bf(0x1d2),'rowClassName':_0x4498bf(0x1e2)}],'rows':this[_0x4498bf(0x1fe)][_0x4498bf(0x1e5)]((_0x51a865,_0x7861c3)=>{const _0x138aaf=_0x4498bf;return this[_0x138aaf(0x1be)][_0x138aaf(0x1e4)][_0x138aaf(0x1a1)](_0x51a865),{'name':_0x51a865[_0x138aaf(0x1b9)],'ability':_0x51a865[_0x138aaf(0x1ae)],'prerequisite':_0x51a865[_0x138aaf(0x1d7)],'source':_0x51a865[_0x138aaf(0x1d6)],'sourceShort':Parser[_0x138aaf(0x1c7)](_0x51a865['source']),'sourceLong':Parser[_0x138aaf(0x1b7)](_0x51a865[_0x138aaf(0x1d6)]),'sourceClassName':Parser[_0x138aaf(0x1ed)](_0x51a865['source']),'ix':_0x7861c3};})};}[_0x406e77(0x1f8)](){const _0x1a201f=_0x406e77;this['_list'][_0x1a201f(0x202)](this[_0x1a201f(0x1fe)],{'fnGetName':_0x6290c8=>_0x6290c8[_0x1a201f(0x1b9)],'fnGetValues':_0xae0742=>({'source':_0xae0742[_0x1a201f(0x1d6)],'ability':_0xae0742[_0x1a201f(0x1ae)],'prerequisite':_0xae0742[_0x1a201f(0x1d7)],'hash':UrlUtil[_0x1a201f(0x1b5)][this['_page']](_0xae0742)}),'fnGetData':UtilList2[_0x1a201f(0x19e)],'fnBindListeners':_0x592b52=>this[_0x1a201f(0x1cd)]?UtilList2[_0x1a201f(0x1dd)](this[_0x1a201f(0x19d)],_0x592b52):UtilList2['absorbFnBindListeners'](this['_list'],_0x592b52)});}async[_0x406e77(0x200)](_0x4312f2,_0x2bbc28){const _0x24b0a4=_0x406e77;_0x2bbc28=_0x2bbc28||{},console[_0x24b0a4(0x1a9)](...LGT,'Importing\x20feat\x20\x22'+_0x4312f2['name']+_0x24b0a4(0x1c3)+Parser['sourceJsonToAbv'](_0x4312f2[_0x24b0a4(0x1d6)])+'\x22)');if(_0x2bbc28['isDataOnly'])return{'imported':DataConverterFeat[_0x24b0a4(0x1ea)](_0x4312f2),'status':UtilApplications[_0x24b0a4(0x1de)]};if(_0x2bbc28[_0x24b0a4(0x1ba)])return this[_0x24b0a4(0x1a4)](_0x4312f2,_0x2bbc28);else{if(this[_0x24b0a4(0x1fa)])return this[_0x24b0a4(0x1d0)](_0x4312f2,_0x2bbc28);else return this[_0x24b0a4(0x1a4)](_0x4312f2,_0x2bbc28);}}async['_pImportEntry_pImportToActor'](_0x4c141b,_0x4aa7ff){const _0x595970=_0x406e77,_0x548596={},_0x4e7ebc={'isCancelled':![],'abilityScoreIncrease':null};await this[_0x595970(0x1ac)](_0x4c141b,_0x4aa7ff),await this['_pImportEntry_pFillAbilities'](_0x4c141b,_0x548596,_0x4e7ebc);if(_0x4e7ebc[_0x595970(0x1f1)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this['_pImportEntry_pFillItems'](_0x4c141b,_0x548596,_0x4e7ebc);if(_0x4e7ebc['isCancelled'])return{'status':UtilApplications[_0x595970(0x1fb)]};if(Object[_0x595970(0x1c4)](_0x548596)['length'])await this['_actor'][_0x595970(0x1b3)](_0x548596);if(this[_0x595970(0x1fa)][_0x595970(0x1b0)])this[_0x595970(0x1fa)]['sheet']['render']();return{'imported':{'name':_0x4c141b['name'],'actor':this[_0x595970(0x1fa)]},'status':UtilApplications[_0x595970(0x1c8)]};}['_pImportEntry_pImportToActor_fillFlags'](_0x10f481,_0x8651a7,_0xcc57d2){const _0xbc0b99=_0x406e77,_0x4597b3={},_0x1b695d={};if(_0x10f481[_0xbc0b99(0x1b9)]===_0xbc0b99(0x1da)&&_0x10f481['source']===SRC_PHB)_0x1b695d[_0xbc0b99(0x201)]=!![];if(_0x10f481[_0xbc0b99(0x1b9)]==='Alert'&&_0x10f481[_0xbc0b99(0x1d6)]===SRC_PHB)_0x1b695d[_0xbc0b99(0x1f4)]=!![];if(_0x10f481['name']===_0xbc0b99(0x1ff)&&_0x10f481['source']===SRC_XGE)_0x1b695d[_0xbc0b99(0x1bf)]=!![];if(Object['keys'](_0x1b695d)[_0xbc0b99(0x1ec)])_0x4597b3[_0xbc0b99(0x1ef)]=_0x1b695d;if(Object[_0xbc0b99(0x1c4)](_0x4597b3)[_0xbc0b99(0x1ec)])_0x8651a7['flags']=_0x4597b3;}async['_pImportEntry_pFillAbilities'](_0x36b054,_0x2676d1,_0xd1564d){const _0xb4a9bb=_0x406e77,_0x3384c6=await Charactermancer_AbilityScoreSelect[_0xb4a9bb(0x1b8)](this[_0xb4a9bb(0x1fa)],_0x36b054[_0xb4a9bb(0x1f6)],_0x2676d1,_0xd1564d);if(_0xd1564d[_0xb4a9bb(0x1f1)])return;if(_0x3384c6==null)return;_0xd1564d['abilityScoreIncrease']=_0x3384c6[_0xb4a9bb(0x1a7)];}async[_0x406e77(0x1d4)](_0x39260b,_0x5edbd7,_0x492512){const _0xdf9761=_0x406e77;_0x492512[_0xdf9761(0x1fc)]=_0x492512[_0xdf9761(0x1fc)]||[];const _0x11a7db={};await this[_0xdf9761(0x1af)](_0x39260b,_0x5edbd7,_0x492512,_0x11a7db);if(_0x492512[_0xdf9761(0x1f1)])return;const _0xff608d=DataConverterSpell[_0xdf9761(0x1fd)][_0xdf9761(0x19f)](null,this['_actor']['id'],_0x11a7db);Renderer[_0xdf9761(0x1c6)]()[_0xdf9761(0x1c5)](_0xdf9761(0x1e0),_0xdf9761(0x1d9),_0xff608d),_0x492512[_0xdf9761(0x1fc)]['push'](await DataConverterFeat[_0xdf9761(0x1ea)](_0x39260b)),Renderer[_0xdf9761(0x1c6)]()[_0xdf9761(0x1f3)](_0xdf9761(0x1e0),'ele',_0xff608d);if(_0x492512[_0xdf9761(0x1fc)][_0xdf9761(0x1ec)])await UtilActors['pAddActorItems'](this['_actor'],_0x492512[_0xdf9761(0x1fc)]);}async[_0x406e77(0x1af)](_0x443fa4,_0x31cd2d,_0x3e8f11,_0x223ed1){const _0x8129b7=_0x406e77,_0x4ed5fd=Object[_0x8129b7(0x203)](_0x3e8f11['abilityScoreIncrease']||{})[_0x8129b7(0x1ad)](([,_0x420c44],[,_0x3820c3])=>SortUtil[_0x8129b7(0x1d3)](_0x3820c3,_0x420c44)),_0x9a958e=_0x4ed5fd?.[0x0]?.[0x0]||null,_0x1adde7=await Charactermancer_AdditionalSpellsSelect[_0x8129b7(0x1e1)]({'additionalSpells':_0x443fa4[_0x8129b7(0x1c2)],'sourceHintText':_0x443fa4[_0x8129b7(0x1b9)],'currentLevel':0x0,'targetLevel':0x14,'spellLevelLow':0x0,'spellLevelHigh':0x9});if(_0x1adde7==null)return _0x3e8f11[_0x8129b7(0x1f1)]=!![];if(_0x1adde7===VeCt['SYM_UI_SKIP'])return;const _0xa38d17=UtilActors[_0x8129b7(0x1c0)](this[_0x8129b7(0x1fa)]);await Charactermancer_AdditionalSpellsSelect[_0x8129b7(0x1b4)](this['_actor'],_0x1adde7,{'casterLevel':_0xa38d17,'parentAbilityAbv':_0x9a958e,'hashToIdMap':_0x223ed1});}[_0x406e77(0x1ce)](_0x1727bd,_0x3e5253){const _0x6793c1=_0x406e77;return DataConverterFeat[_0x6793c1(0x1ea)](_0x1727bd,_0x3e5253);}}ImportListFeat[_0x406e77(0x1cc)]=class extends MiscUtil[_0x406e77(0x1e3)](ImportListFeat)[_0x406e77(0x1cf)](MixinUserChooseImporter){constructor(_0x5c2858){const _0x8f8b1e=_0x406e77;super(_0x5c2858,{'title':'Select\x20Feat'},{'titleButtonRun':_0x8f8b1e(0x1e8)});}};export{ImportListFeat};