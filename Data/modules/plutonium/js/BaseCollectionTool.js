'use strict';const _0x4144=['activateTab','_sidebarTab','absorbFnBindListeners','_getSelectedIds','RollTable','pRunTasks','_$iptSearch','<h3>Are\x20you\x20sure?</h3><p>','add','_folderType','<h3>Are\x20you\x20sure?</h3><p>Any\x20empty\x20folders\x20will\x20be\x20permanently\x20deleted.</p>','tool-folderizer_','data','addToFilters','toDisplay','bind','173375skaykQ','sidebar','\x20and\x20','their','[name=btn-filter]','type','Deleting\x20','pGetConfirmation','.search','_collection','_mapEntitiesToRows','tables','warn','Delete\x20Folders','click','_sortNamePathRows','get','.veapp__list','values','bindSelectAllCheckbox','content','sort','journal','items','doAbsorbItems','delete','171019LqovVY','_gameProp','filterBox','Delete\x20Complete','absorbFnGetData','input','15VcDVnd','_activateListeners_doBindSelectAll','EVNT_VALCHANGE','_pDeleteItem','getValues','675346cltJMe','initBtnSortHandlers','getFolderPath','_pDoPruneFolders','\x20data\x20will\x20be\x20permanently\x20deleted.</p>','Delete','58340eigqYA','_$btnReset','_pDoDelete','entities','_collectionName','map','1378156LdFkZj','_list','_pageFilter','Deleted\x20','[name=\x22cb-select-all\x22]','STR_SEE_CONSOLE','Failed\x20to\x20delete\x20','reset','[name=\x22btn-reset\x22]','init','has','fa-trash','_rows','forEach','find','collection','item','ele','JournalEntry','close','Task','path','_listSortNamePathRows','.fltr__mini-view','prop','unknown','checked','1LiQyIs','Deleting...','Actor','[name=\x22btn-prune\x22]','_handleFilterChange','1645572pEUBmH','Item','377005NyuHSz','actors','length','name','info','filter','children','render','_activateListeners_listAbsorbGetData','notifications','ascSortLower','rolltable'];const _0x1918=function(_0x18001a,_0x11c68f){_0x18001a=_0x18001a-0x18c;let _0x4144a7=_0x4144[_0x18001a];return _0x4144a7;};const _0x5ef9fd=_0x1918;(function(_0x357678,_0x483f52){const _0x126ed4=_0x1918;while(!![]){try{const _0xdd2ec4=parseInt(_0x126ed4(0x1f4))*parseInt(_0x126ed4(0x190))+-parseInt(_0x126ed4(0x1f9))+-parseInt(_0x126ed4(0x1ee))*-parseInt(_0x126ed4(0x1b1))+parseInt(_0x126ed4(0x1b8))+-parseInt(_0x126ed4(0x1d4))+parseInt(_0x126ed4(0x1b6))+-parseInt(_0x126ed4(0x196));if(_0xdd2ec4===_0x483f52)break;else _0x357678['push'](_0x357678['shift']());}catch(_0xcc5df2){_0x357678['push'](_0x357678['shift']());}}}(_0x4144,0xcd85b));import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';class BaseCollectionTool extends Application{static[_0x5ef9fd(0x1e3)](_0x544aae,_0x5663d9){const _0x200bae=_0x5ef9fd;if(_0x544aae[_0x200bae(0x1ab)]==null&&_0x5663d9[_0x200bae(0x1ab)]==null)return SortUtil[_0x200bae(0x1c2)](_0x544aae[_0x200bae(0x1bb)],_0x5663d9['name']);if(_0x544aae[_0x200bae(0x1ab)]!=null&&_0x5663d9[_0x200bae(0x1ab)]==null)return-0x1;if(_0x544aae[_0x200bae(0x1ab)]==null&&_0x5663d9[_0x200bae(0x1ab)]!=null)return 0x1;return SortUtil[_0x200bae(0x1c2)](_0x544aae[_0x200bae(0x1ab)],_0x5663d9[_0x200bae(0x1ab)])||SortUtil[_0x200bae(0x1c2)](_0x544aae['name'],_0x5663d9['name']);}static[_0x5ef9fd(0x1ac)](_0x489117,_0x30d329,_0x3311c3){const _0x466585=_0x5ef9fd,_0x4ae010={'name':_0x489117[_0x466585(0x1bb)],'path':_0x489117['values'][_0x466585(0x1ab)]},_0x2e2698={'name':_0x30d329[_0x466585(0x1bb)],'path':_0x30d329[_0x466585(0x1e6)][_0x466585(0x1ab)]};return BaseCollectionTool[_0x466585(0x1e3)](_0x4ae010,_0x2e2698);}constructor(_0x46f97f,_0xcafe69){const _0x56cc79=_0x5ef9fd;super(_0x46f97f),this[_0x56cc79(0x194)]=_0xcafe69,this['_collection']=null,this[_0x56cc79(0x1c5)]=null,this[_0x56cc79(0x1ef)]=null,this[_0x56cc79(0x1cd)]=null;switch(_0xcafe69){case _0x56cc79(0x1a6):{this[_0x56cc79(0x1dd)]=Item[_0x56cc79(0x1a5)],this[_0x56cc79(0x1c5)]=_0x56cc79(0x1eb),this[_0x56cc79(0x1ef)]='items',this[_0x56cc79(0x1cd)]=_0x56cc79(0x1b7);break;}case'actor':{this[_0x56cc79(0x1dd)]=Actor['collection'],this[_0x56cc79(0x1c5)]=_0x56cc79(0x1b9),this['_gameProp']=_0x56cc79(0x1b9),this[_0x56cc79(0x1cd)]=_0x56cc79(0x1b3);break;}case _0x56cc79(0x1ea):{this['_collection']=JournalEntry[_0x56cc79(0x1a5)],this[_0x56cc79(0x1c5)]=_0x56cc79(0x1ea),this[_0x56cc79(0x1ef)]=_0x56cc79(0x1ea),this[_0x56cc79(0x1cd)]=_0x56cc79(0x1a8);break;}case _0x56cc79(0x1c3):{this[_0x56cc79(0x1dd)]=RollTable[_0x56cc79(0x1a5)],this['_sidebarTab']='tables',this[_0x56cc79(0x1ef)]=_0x56cc79(0x1df),this[_0x56cc79(0x1cd)]=_0x56cc79(0x1c8);break;}default:throw new Error('Unknown\x20collection\x20\x22'+_0xcafe69+'\x22');}}[_0x5ef9fd(0x1de)](){const _0x226ff6=_0x5ef9fd;return this[_0x226ff6(0x1dd)][_0x226ff6(0x193)][_0x226ff6(0x195)]((_0x381375,_0x3dd2b2)=>{const _0x31dcd4=_0x226ff6,_0x37760f=UtilApplications[_0x31dcd4(0x18c)](_0x381375,{'isAddTrailingSlash':!![]});return{'path':_0x37760f,'name':_0x381375[_0x31dcd4(0x1bb)],'displayName':''+(_0x37760f||'')+_0x381375[_0x31dcd4(0x1bb)],'id':_0x381375['id'],'type':MiscUtil[_0x31dcd4(0x1e4)](_0x381375,'data',_0x31dcd4(0x1d9))||_0x31dcd4(0x1af),'ix':_0x3dd2b2};})[_0x226ff6(0x1e9)](BaseCollectionTool['_sortNamePathRows']);}[_0x5ef9fd(0x1b5)](){const _0x248549=_0x5ef9fd,_0xf77685=this[_0x248549(0x198)][_0x248549(0x1f0)][_0x248549(0x1f8)]();this[_0x248549(0x197)][_0x248549(0x1bd)](_0x5a88e=>this[_0x248549(0x198)][_0x248549(0x1d2)](_0xf77685,this['_rows'][_0x5a88e['ix']]));}['_activateListeners_initBtnReset'](_0xb89a45){const _0x237ecd=_0x5ef9fd;this[_0x237ecd(0x191)]=_0xb89a45['find'](_0x237ecd(0x19e))[_0x237ecd(0x1e2)](()=>{const _0x3e3ce3=_0x237ecd;_0xb89a45[_0x3e3ce3(0x1a4)](_0x3e3ce3(0x1dc))['val']('');if(this[_0x3e3ce3(0x197)])this[_0x3e3ce3(0x197)][_0x3e3ce3(0x19d)]();});}[_0x5ef9fd(0x1c0)](_0x5ce5ee){const _0x3cd7fc=_0x5ef9fd;return UtilList2[_0x3cd7fc(0x1f2)](_0x5ce5ee);}[_0x5ef9fd(0x1f5)](_0x5ae2e8){const _0xfa26c0=_0x5ef9fd;ListUiUtil[_0xfa26c0(0x1e7)](_0x5ae2e8,this[_0xfa26c0(0x197)]);}['_activateListeners_pInitListAndFilters'](_0x2178c6){const _0x1accd5=_0x5ef9fd;return this[_0x1accd5(0x1ca)]=_0x2178c6[_0x1accd5(0x1a4)](_0x1accd5(0x1dc)),this[_0x1accd5(0x197)]=new List({'$iptSearch':this['_$iptSearch'],'$wrpList':_0x2178c6[_0x1accd5(0x1a4)](_0x1accd5(0x1e5)),'fnSort':BaseCollectionTool[_0x1accd5(0x1ac)]}),SortUtil[_0x1accd5(0x1fa)](_0x2178c6[_0x1accd5(0x1a4)]('[data-name=\x22wrp-btns-sort\x22]'),this['_list']),this['_activateListeners_doBindSelectAll'](_0x2178c6[_0x1accd5(0x1a4)](_0x1accd5(0x19a))),this['_pageFilter']['pInitFilterBox']({'$iptSearch':this[_0x1accd5(0x1ca)],'$btnReset':this['_$btnReset'],'$btnOpen':_0x2178c6[_0x1accd5(0x1a4)](_0x1accd5(0x1d8)),'$btnToggleSummaryHidden':_0x2178c6[_0x1accd5(0x1a4)]('[name=btn-toggle-summary]'),'$wrpMiniPills':_0x2178c6['find'](_0x1accd5(0x1ad)),'namespace':_0x1accd5(0x1cf)+this[_0x1accd5(0x194)]})['then'](()=>{const _0x4ed58a=_0x1accd5;this[_0x4ed58a(0x1a2)]['forEach'](_0x2b3936=>this[_0x4ed58a(0x198)][_0x4ed58a(0x1d1)](_0x2b3936)),this[_0x4ed58a(0x197)][_0x4ed58a(0x1ec)](this[_0x4ed58a(0x1a2)],{'fnGetName':_0x239eed=>_0x239eed['name'],'fnGetValues':_0x279265=>({'id':_0x279265['id'],'path':_0x279265[_0x4ed58a(0x1ab)]}),'fnGetData':this['_activateListeners_listAbsorbGetData'][_0x4ed58a(0x1d3)](this),'fnBindListeners':_0x53b033=>UtilList2[_0x4ed58a(0x1c6)](this[_0x4ed58a(0x197)],_0x53b033)}),this[_0x4ed58a(0x197)][_0x4ed58a(0x19f)](),this['_pageFilter'][_0x4ed58a(0x1f0)][_0x4ed58a(0x1bf)](),this['_pageFilter'][_0x4ed58a(0x1f0)]['on'](FilterBox[_0x4ed58a(0x1f6)],this[_0x4ed58a(0x1b5)]['bind'](this)),this[_0x4ed58a(0x1b5)]();});}[_0x5ef9fd(0x1c7)](){const _0x5a8098=_0x5ef9fd;return this['_list'][_0x5a8098(0x1eb)][_0x5a8098(0x1bd)](_0x4a1da0=>$(_0x4a1da0[_0x5a8098(0x1a7)])[_0x5a8098(0x1a4)](_0x5a8098(0x1f3))[_0x5a8098(0x1ae)](_0x5a8098(0x1b0)))[_0x5a8098(0x195)](_0x1335d0=>({'name':_0x1335d0[_0x5a8098(0x1bb)],'id':_0x1335d0[_0x5a8098(0x1e6)]['id']}));}['_activateListeners_initBtnPrune'](_0x41e6e3){const _0x1e87a2=_0x5ef9fd;_0x41e6e3['find'](_0x1e87a2(0x1b4))['click'](async()=>{const _0x2268e7=_0x1e87a2,_0x4fe6fd=await UtilApplications['pGetConfirmation']({'title':_0x2268e7(0x1e1),'content':_0x2268e7(0x1ce),'confirmText':_0x2268e7(0x18f),'faIcon':_0x2268e7(0x1a1)});if(!_0x4fe6fd)return;await this[_0x2268e7(0x18d)]();});}async[_0x5ef9fd(0x192)](_0xa479a3){const _0x1548e3=_0x5ef9fd;if(!this['_list'])return;let _0x515404=this[_0x1548e3(0x1c7)]();if(!_0x515404[_0x1548e3(0x1ba)])return ui[_0x1548e3(0x1c1)][_0x1548e3(0x1e0)]('Please\x20select\x20something\x20to\x20delete!');const _0x24a2f3=this[_0x1548e3(0x194)]['uppercaseFirst'](),_0x3e88e1=_0x515404[_0x1548e3(0x1ba)]!==0x1?'s':'',_0x4717be=await UtilApplications[_0x1548e3(0x1db)]({'title':'Delete\x20'+_0x24a2f3+_0x3e88e1,'content':_0x1548e3(0x1cb)+_0x515404['length']+'\x20'+_0x24a2f3+_0x3e88e1+_0x1548e3(0x1d6)+(_0x3e88e1?_0x1548e3(0x1d7):'its')+_0x1548e3(0x18e),'confirmText':_0x1548e3(0x18f),'faIcon':'fa-trash'});if(!_0x4717be)return;this[_0x1548e3(0x1a9)](),ui[_0x1548e3(0x1d5)][_0x1548e3(0x1c4)](this[_0x1548e3(0x1c5)]);if(_0xa479a3['prop'](_0x1548e3(0x1b0))){const _0xa3c967=await this[_0x1548e3(0x18d)](_0x515404[_0x1548e3(0x195)](({id:_0x434d8a})=>_0x434d8a));_0x515404=_0x515404[_0x1548e3(0x1bd)](({id:_0x39f627})=>!_0xa3c967['has'](_0x39f627));}const _0x3eba13=_0x515404[_0x1548e3(0x195)](({id:_0x1c1712,name:_0x1952c6})=>new Util[(_0x1548e3(0x1aa))](_0x1952c6,()=>this[_0x1548e3(0x1f7)](_0x1c1712)));await UtilApplications[_0x1548e3(0x1c9)](_0x3eba13,{'titleInitial':_0x1548e3(0x1b2),'titleComplete':_0x1548e3(0x1f1),'fnGetRowRunningText':_0x56b159=>_0x1548e3(0x1da)+_0x56b159+'...','fnGetRowSuccessText':_0x45ae74=>'Deleted\x20'+_0x45ae74+'.','fnGetRowErrorText':_0xc29e5b=>_0x1548e3(0x19c)+_0xc29e5b+'!\x20'+VeCt[_0x1548e3(0x19b)]});if(_0xa479a3['prop'](_0x1548e3(0x1b0)))await this[_0x1548e3(0x18d)]();game[this[_0x1548e3(0x1ef)]][_0x1548e3(0x1bf)]();}async[_0x5ef9fd(0x1f7)](_0x4348b8){const _0x419a2f=_0x5ef9fd;await this[_0x419a2f(0x1dd)][_0x419a2f(0x1e4)](_0x4348b8)[_0x419a2f(0x1ed)]();}async[_0x5ef9fd(0x18d)](_0x5dd11a){const _0x3e19ff=_0x5ef9fd,_0x56ca78=()=>Folder[_0x3e19ff(0x1a5)][_0x3e19ff(0x193)][_0x3e19ff(0x1bd)](_0x3788c8=>_0x3788c8[_0x3e19ff(0x1d0)][_0x3e19ff(0x1d9)]===this[_0x3e19ff(0x1cd)]),_0x4b0a68=_0x5dd11a?new Set(_0x5dd11a):null,_0x36f95c=new Set();let _0x3e7f3d=0x0,_0x36ac82=null,_0xebd879=_0x56ca78()[_0x3e19ff(0x1ba)];do{let _0x2156f0;_0x4b0a68?_0x2156f0=_0x56ca78()['filter'](_0x5ed786=>{const _0x4be239=_0x3e19ff;if(!_0x5ed786[_0x4be239(0x1be)]||!_0x5ed786[_0x4be239(0x1be)][_0x4be239(0x1ba)]){if(!_0x5ed786[_0x4be239(0x1e8)]['length'])return!![];const _0x46a632=_0x5ed786[_0x4be239(0x1e8)][_0x4be239(0x195)](_0x466ec6=>_0x466ec6['id'])[_0x4be239(0x1bd)](_0x361e76=>_0x4b0a68[_0x4be239(0x1a0)](_0x361e76));if(_0x46a632[_0x4be239(0x1ba)]===_0x5ed786[_0x4be239(0x1e8)][_0x4be239(0x1ba)])return _0x46a632[_0x4be239(0x1a3)](_0x3da1b3=>_0x36f95c[_0x4be239(0x1cc)](_0x3da1b3)),!![];}return![];}):_0x2156f0=_0x56ca78()[_0x3e19ff(0x1bd)](_0x37e9f1=>!_0x37e9f1[_0x3e19ff(0x1e8)][_0x3e19ff(0x1ba)]&&(!_0x37e9f1[_0x3e19ff(0x1be)]||!_0x37e9f1['children'][_0x3e19ff(0x1ba)]));for(const _0x2da5e4 of _0x2156f0){await _0x2da5e4[_0x3e19ff(0x1ed)]({'deleteSubfolders':!![],'deleteContents':!![]}),_0x3e7f3d++;}_0x36ac82=_0xebd879,_0xebd879=_0x56ca78()[_0x3e19ff(0x1ba)];}while(_0xebd879!==_0x36ac82);if(_0x3e7f3d)ui[_0x3e19ff(0x1c1)][_0x3e19ff(0x1bc)](_0x3e19ff(0x199)+_0x3e7f3d+'\x20folder'+(_0x3e7f3d===0x1?'':'s')+'.');return _0x36f95c;}}export{BaseCollectionTool};