const _0x1a41=['addToFilters','Module\x20\x22','filterBox','filters','click','length','STR_SEE_CONSOLE','_fType','copy','_typeFilter','_list','World','pGetPackageIndex','activateListeners','_activateListeners_pInitListAndFilters','.\x20Would\x20you\x20like\x20to\x20install\x20them?','ele','[data-name=\x22wrp-btns-sort\x22]','filter','world','[name=\x22btn-reset\x22]','_activateListeners_pInstallDependencies','findIndex','\x20module\x20dependenc','\x22\x20has\x20','init','remove','_ACTIVE_INSTALLATION','.veapp__list','Failed\x20to\x20install\x20module!\x20','_onLoadProgress','toDisplay','addItem','list-multi-selected','join','ies','_fAuthor','.fltr__mini-view','getData','\x20module','bind','pGetUserBoolean','_pageFilter','getValues','pImportManifesturlWorld','_getBaseManifestUrl','manifesturl','_patchInstallPackage','World\x20\x22','name','forEach','[name=\x22btn-run--world\x22]','ImportSpecialPackages','manifesturlWorld','EVNT_VALCHANGE','slice','shutDown','_activateListeners_initBtnRun','notifications','Author','getMaxWindowHeight','_activateListeners_pGetManifestData','getMergedPackageIndex','_activateListeners_getSelectedRow','pInit','checked','source','modules','find','setup','constructor','entries','doAbsorbItems','module','info','Please\x20select\x20a\x20package\x20which\x20includes\x20a\x20module!','\x22\x20installed\x20successfully.','_handleFilterChange','author','trim','push','pInitFilterBox','split','items','_rows','initBtnSortHandlers','\x20installed.','pGetWithCache','splice','_activateListeners_initBtnReset','Installing,\x20please\x20wait...\x20(check\x20the\x20server\x20logs\x20to\x20view\x20progress)','_authorFilter','data','Module','classList','_$iptSearch','manifesturlModule','Type','dependencies','.search','MODULE_LOCATION','manifest','error','reset','render','\x20error','_packageIndex','_$btnReset','Package\x20Importer','PageFilter','Please\x20wait\x20until\x20the\x20currently\x20running\x20installation\x20completes!','cbSel','warn','mutateForFilters','installPackage'];(function(_0x3bb9cb,_0x1a4153){const _0x4f24b3=function(_0x55fb01){while(--_0x55fb01){_0x3bb9cb['push'](_0x3bb9cb['shift']());}};_0x4f24b3(++_0x1a4153);}(_0x1a41,0x136));const _0x4f24=function(_0x3bb9cb,_0x1a4153){_0x3bb9cb=_0x3bb9cb-0x0;let _0x4f24b3=_0x1a41[_0x3bb9cb];return _0x4f24b3;};const _0x10e0ec=_0x4f24;import{Vetools}from'./Vetools.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{UtilList2}from'./UtilList2.js';class ImportSpecialPackages extends Application{constructor(){const _0xca3efb=_0x4f24;super({'title':_0xca3efb('0x1c'),'template':SharedConsts[_0xca3efb('0x14')]+'/template/ImportSpecialPackages.handlebars','height':Util[_0xca3efb('0x5f')](),'width':0x320,'resizable':!![]}),this[_0xca3efb('0x1a')]=null,this[_0xca3efb('0x4d')]=null,this[_0xca3efb('0x4')]=null;}async[_0x10e0ec('0x63')](){const _0x289f75=_0x10e0ec;this['_packageIndex']=await this[_0x289f75('0x69')]['getMergedPackageIndex'](),this[_0x289f75('0x4d')]=new ImportSpecialPackages['PageFilter']();}static async[_0x10e0ec('0x61')](){const _0x1f99cf=_0x10e0ec,_0x55fb01=MiscUtil[_0x1f99cf('0x2b')](await Vetools[_0x1f99cf('0x2f')]()),_0x1b74af=[];return(_0x55fb01[_0x1f99cf('0x6c')]||[])[_0x1f99cf('0x55')](_0x58d3e7=>{const _0x4deaef=_0x1f99cf;_0x1b74af[_0x4deaef('0x0')](_0x58d3e7),_0x58d3e7['manifesturlModule']=_0x58d3e7[_0x4deaef('0x51')],delete _0x58d3e7[_0x4deaef('0x51')];const _0x930a4c=(_0x58d3e7[_0x4deaef('0x10')]||'')[_0x4deaef('0x2')]('/')[_0x4deaef('0x5a')](0x0,-0x1)[_0x4deaef('0x45')]('/'),_0xd863e5=_0x55fb01[_0x4deaef('0x36')][_0x4deaef('0x39')](_0x20829b=>{const _0x11fab7=_0x4deaef;if(_0x20829b['source']!==_0x58d3e7[_0x11fab7('0x65')])return![];const _0x5c6d24=this[_0x11fab7('0x50')](_0x20829b[_0x11fab7('0x51')]);return _0x5c6d24===_0x930a4c;});if(!~_0xd863e5)return;const [_0x1ff07f]=_0x55fb01[_0x4deaef('0x36')][_0x4deaef('0x8')](_0xd863e5,0x1);_0x1ff07f[_0x4deaef('0x58')]=_0x1ff07f[_0x4deaef('0x51')],delete _0x1ff07f[_0x4deaef('0x51')],Object[_0x4deaef('0x6a')](_0x1ff07f)[_0x4deaef('0x55')](([_0x4f9c85,_0x3b129c])=>{if(_0x58d3e7[_0x4f9c85])return;_0x58d3e7[_0x4f9c85]=_0x3b129c;});}),(_0x55fb01['world']||[])['forEach'](_0x5070a1=>{const _0x451a84=_0x1f99cf;_0x5070a1[_0x451a84('0x58')]=_0x5070a1['manifesturl'],delete _0x5070a1['manifesturl'],_0x1b74af['push'](_0x5070a1);}),_0x1b74af['forEach'](_0x13b135=>{const _0x570128=_0x1f99cf;_0x13b135[_0x570128('0x71')]=[_0x13b135[_0x570128('0x71')]||'']['flat']()['map'](_0x306d6c=>_0x306d6c[_0x570128('0x72')]())['filter'](Boolean);}),_0x1b74af;}[_0x10e0ec('0x49')](){const _0x86d1fe=_0x10e0ec;return this[_0x86d1fe('0x4')]=this[_0x86d1fe('0x1a')],{'packages':this['_rows']};}[_0x10e0ec('0x30')](_0x25796a){const _0x3c3e50=_0x10e0ec;super[_0x3c3e50('0x30')](_0x25796a),this['_activateListeners_initBtnRun'](_0x25796a),this['_activateListeners_initBtnReset'](_0x25796a),this[_0x3c3e50('0x31')](_0x25796a);}[_0x10e0ec('0x62')](){const _0x19fe0b=_0x10e0ec,_0x3e2562=this[_0x19fe0b('0x2d')][_0x19fe0b('0x3')][_0x19fe0b('0x67')](_0x353ba4=>_0x353ba4[_0x19fe0b('0xc')][_0x19fe0b('0x1f')][_0x19fe0b('0x64')]);if(!_0x3e2562)return ui['notifications'][_0x19fe0b('0x20')]('Please\x20select\x20something\x20to\x20import!'),null;return _0x3e2562[_0x19fe0b('0x33')][_0x19fe0b('0xe')][_0x19fe0b('0x3d')](_0x19fe0b('0x44')),_0x3e2562['data'][_0x19fe0b('0x1f')][_0x19fe0b('0x64')]=![],this['_rows'][_0x3e2562['ix']];}static async[_0x10e0ec('0x60')](_0x1b4911){const _0x145172=_0x10e0ec;let _0x30abee;try{_0x30abee=await Vetools[_0x145172('0x7')](_0x1b4911);}catch(_0x207b5e){ui[_0x145172('0x5d')]['error']('Failed\x20to\x20load\x20manifest\x20file!\x20'+VeCt[_0x145172('0x29')]);throw _0x207b5e;}return _0x30abee;}static async[_0x10e0ec('0x38')](_0x23dc91,_0x2d2ca6){const _0x36de2c=_0x10e0ec;if(!_0x2d2ca6[_0x36de2c('0x12')])return;const _0x35925c=(_0x2d2ca6['dependencies']||[])[_0x36de2c('0x35')](_0x51800b=>!game[_0x36de2c('0xc')][_0x36de2c('0x66')]['some'](_0x169abe=>_0x169abe['id']===_0x51800b[_0x36de2c('0x54')]));if(!_0x35925c[_0x36de2c('0x28')])return;const _0x16447c=await InputUiUtil[_0x36de2c('0x4c')]({'title':_0x23dc91+'\x20\x22'+_0x2d2ca6[_0x36de2c('0x54')]+_0x36de2c('0x3b')+_0x35925c[_0x36de2c('0x28')]+_0x36de2c('0x3a')+(_0x35925c['length']===0x1?'y':_0x36de2c('0x46'))+_0x36de2c('0x32')});if(!_0x16447c)return;let _0x519e0f=0x0;SceneNavigation[_0x36de2c('0x41')]('Installing',0x0);for(let _0x70aacb=0x0;_0x70aacb<_0x35925c[_0x36de2c('0x28')];++_0x70aacb){try{this[_0x36de2c('0x52')](),await SetupConfiguration[_0x36de2c('0x22')]({'manifest':_0x35925c[_0x70aacb][_0x36de2c('0x15')]});}catch(_0x88b0a9){_0x519e0f++,console[_0x36de2c('0x16')](_0x88b0a9);}SceneNavigation['_onLoadProgress']('Installing',(_0x70aacb+0x1)/miss[_0x36de2c('0x28')]*0x64);}const _0x42c8bb=_0x35925c['length']-_0x519e0f;ui[_0x36de2c('0x5d')][_0x519e0f?_0x36de2c('0x16'):'info'](_0x42c8bb+_0x36de2c('0x4a')+(_0x42c8bb===0x1?'':'s')+_0x36de2c('0x6')+(_0x519e0f?'\x20'+_0x519e0f+_0x36de2c('0x19')+(_0x519e0f===0x1?'':'s')+'.\x20'+VeCt[_0x36de2c('0x29')]:''));if(!_0x519e0f&&_0x42c8bb)game[_0x36de2c('0x5b')]();}static async['pImportManifesturlModule'](_0xc87df2){const _0x28b9f3=_0x10e0ec,_0x4348b5=await this['_activateListeners_pGetManifestData'](_0xc87df2);if(!_0x4348b5)return;if(ImportSpecialPackages[_0x28b9f3('0x3e')])return ui['notifications'][_0x28b9f3('0x20')](_0x28b9f3('0x1e'));ImportSpecialPackages[_0x28b9f3('0x3e')]=!![];try{ui[_0x28b9f3('0x5d')][_0x28b9f3('0x6d')](_0x28b9f3('0xa')),this[_0x28b9f3('0x52')](),await SetupConfiguration['installPackage']({'type':_0x28b9f3('0x6c'),'name':_0x4348b5['name'],'manifest':_0xc87df2});}catch(_0x1f3772){ui[_0x28b9f3('0x5d')][_0x28b9f3('0x16')](_0x28b9f3('0x40')+VeCt[_0x28b9f3('0x29')]);throw _0x1f3772;}finally{ImportSpecialPackages[_0x28b9f3('0x3e')]=![];}await this['_activateListeners_pInstallDependencies']('Module',_0x4348b5),ui[_0x28b9f3('0x5d')][_0x28b9f3('0x6d')](_0x28b9f3('0x24')+_0x4348b5['name']+_0x28b9f3('0x6f'));}static async[_0x10e0ec('0x4f')](_0x300dbb){const _0x25b9d2=_0x10e0ec,_0x181177=await this['_activateListeners_pGetManifestData'](_0x300dbb);if(!_0x181177)return;if(ImportSpecialPackages[_0x25b9d2('0x3e')])return ui[_0x25b9d2('0x5d')][_0x25b9d2('0x20')](_0x25b9d2('0x1e'));ImportSpecialPackages[_0x25b9d2('0x3e')]=!![];try{ui[_0x25b9d2('0x5d')][_0x25b9d2('0x6d')]('Installing,\x20please\x20wait...\x20(check\x20the\x20server\x20logs\x20to\x20view\x20progress)'),this[_0x25b9d2('0x52')](),await SetupConfiguration[_0x25b9d2('0x22')]({'type':_0x25b9d2('0x36'),'name':_0x181177[_0x25b9d2('0x54')],'manifest':_0x300dbb});}catch(_0x29a471){ui['notifications'][_0x25b9d2('0x16')]('Failed\x20to\x20install\x20world!\x20'+VeCt['STR_SEE_CONSOLE']);throw _0x29a471;}finally{ImportSpecialPackages[_0x25b9d2('0x3e')]=![];}ui[_0x25b9d2('0x5d')]['info'](_0x25b9d2('0x53')+_0x181177[_0x25b9d2('0x54')]+_0x25b9d2('0x6f'));}[_0x10e0ec('0x5c')](_0x48f541){const _0x5a7313=_0x10e0ec;_0x48f541[_0x5a7313('0x67')]('[name=\x22btn-run--module\x22]')[_0x5a7313('0x27')](async()=>{const _0x5c971b=_0x5a7313;if(!this['_list'])return;const _0x4d8130=this[_0x5c971b('0x62')]();if(!_0x4d8130)return;if(!_0x4d8130[_0x5c971b('0x10')])return ui[_0x5c971b('0x5d')][_0x5c971b('0x20')](_0x5c971b('0x6e'));await this[_0x5c971b('0x69')]['pImportManifesturlModule'](_0x4d8130['manifesturlModule']);}),_0x48f541['find'](_0x5a7313('0x56'))[_0x5a7313('0x27')](async()=>{const _0x8d1d5=_0x5a7313;if(!this[_0x8d1d5('0x2d')])return;const _0xbaa7bb=this[_0x8d1d5('0x62')]();if(!_0xbaa7bb)return;if(!_0xbaa7bb[_0x8d1d5('0x58')])return ui['notifications'][_0x8d1d5('0x20')](_0x8d1d5('0x6e'));await this['constructor']['pImportManifesturlWorld'](_0xbaa7bb[_0x8d1d5('0x58')]);});}[_0x10e0ec('0x9')](_0x5e5bcf){const _0x1d8dc1=_0x10e0ec;this[_0x1d8dc1('0x1b')]=_0x5e5bcf[_0x1d8dc1('0x67')](_0x1d8dc1('0x37'))[_0x1d8dc1('0x27')](()=>{const _0x2bc22a=_0x1d8dc1;_0x5e5bcf[_0x2bc22a('0x67')](_0x2bc22a('0x13'))['val']('');if(this[_0x2bc22a('0x2d')])this[_0x2bc22a('0x2d')][_0x2bc22a('0x17')]();});}[_0x10e0ec('0x31')](_0x53bc24){const _0x37ef7a=_0x10e0ec;return this['_$iptSearch']=_0x53bc24[_0x37ef7a('0x67')](_0x37ef7a('0x13')),this[_0x37ef7a('0x2d')]=new List({'$iptSearch':this['_$iptSearch'],'$wrpList':_0x53bc24[_0x37ef7a('0x67')](_0x37ef7a('0x3f'))}),SortUtil[_0x37ef7a('0x5')](_0x53bc24['find'](_0x37ef7a('0x34')),this['_list']),this[_0x37ef7a('0x4d')][_0x37ef7a('0x1')]({'$iptSearch':this[_0x37ef7a('0xf')],'$btnReset':this[_0x37ef7a('0x1b')],'$btnOpen':_0x53bc24[_0x37ef7a('0x67')]('[name=btn-filter]'),'$btnToggleSummaryHidden':_0x53bc24[_0x37ef7a('0x67')]('[name=btn-toggle-summary]'),'$wrpMiniPills':_0x53bc24[_0x37ef7a('0x67')](_0x37ef7a('0x48')),'namespace':_0x37ef7a('0x57')})['then'](()=>{const _0x26867b=_0x37ef7a;this[_0x26867b('0x4')][_0x26867b('0x55')](_0x4ebcce=>this[_0x26867b('0x4d')][_0x26867b('0x23')](_0x4ebcce)),this['_list'][_0x26867b('0x6b')](this['_rows'],{'fnGetName':_0x121c9c=>_0x121c9c[_0x26867b('0x54')],'fnGetValues':_0x2a4910=>({'name':_0x2a4910[_0x26867b('0x54')],'author':_0x2a4910[_0x26867b('0x71')],'module':!!_0x2a4910[_0x26867b('0x10')],'world':!!_0x2a4910[_0x26867b('0x58')]}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x43a472=>UtilList2['absorbFnBindListenersRadio'](this[_0x26867b('0x2d')],_0x43a472)}),this[_0x26867b('0x2d')][_0x26867b('0x3c')](),this[_0x26867b('0x4d')]['filterBox'][_0x26867b('0x18')](),$(this[_0x26867b('0x4d')]['filterBox'])['on'](FilterBox[_0x26867b('0x59')],this[_0x26867b('0x70')][_0x26867b('0x4b')](this)),this[_0x26867b('0x70')]();});}[_0x10e0ec('0x70')](){const _0x2f5617=_0x10e0ec,_0x3f65c9=this[_0x2f5617('0x4d')][_0x2f5617('0x25')][_0x2f5617('0x4e')]();this[_0x2f5617('0x2d')][_0x2f5617('0x35')](_0x46f380=>this[_0x2f5617('0x4d')][_0x2f5617('0x42')](_0x3f65c9,this['_rows'][_0x46f380['ix']]));}static[_0x10e0ec('0x50')](_0x38d500){const _0x5332a9=_0x10e0ec;return(_0x38d500||'')[_0x5332a9('0x2')]('/')[_0x5332a9('0x5a')](0x0,-0x1)[_0x5332a9('0x45')]('/');}static[_0x10e0ec('0x52')](){const _0xa59b4c=_0x10e0ec;ui[_0xa59b4c('0x68')]=ui[_0xa59b4c('0x68')]||{'reload':()=>{}};}}ImportSpecialPackages[_0x10e0ec('0x3e')]=null,ImportSpecialPackages[_0x10e0ec('0x1d')]=class extends PageFilter{constructor(){const _0x569ac6=_0x10e0ec;super(),this[_0x569ac6('0x2c')]=new Filter({'header':_0x569ac6('0x11')}),this[_0x569ac6('0xb')]=new Filter({'header':_0x569ac6('0x5e')});}[_0x10e0ec('0x21')](_0x2588fd){const _0x6032a2=_0x10e0ec;_0x2588fd[_0x6032a2('0x2a')]=[];if(_0x2588fd[_0x6032a2('0x10')])_0x2588fd[_0x6032a2('0x2a')]['push'](_0x6032a2('0xd'));if(_0x2588fd[_0x6032a2('0x58')])_0x2588fd['_fType'][_0x6032a2('0x0')](_0x6032a2('0x2e'));_0x2588fd['_fAuthor']=_0x2588fd[_0x6032a2('0x71')]||'Unknown';}[_0x10e0ec('0x23')](_0x25cb19,_0x4f5f3c){const _0x3b558c=_0x10e0ec;if(_0x4f5f3c)return;this[_0x3b558c('0x2c')][_0x3b558c('0x43')](_0x25cb19['_fType']),this[_0x3b558c('0xb')][_0x3b558c('0x43')](_0x25cb19[_0x3b558c('0x47')]);}async['_pPopulateBoxOptions'](_0x100ec4){const _0x3307b0=_0x10e0ec;_0x100ec4[_0x3307b0('0x26')]=[this[_0x3307b0('0x2c')],this['_authorFilter']];}['toDisplay'](_0x314247,_0x29a207){const _0x50aefa=_0x10e0ec;return this['_filterBox'][_0x50aefa('0x42')](_0x314247,_0x29a207[_0x50aefa('0x2a')],_0x29a207['_fAuthor']);}};export{ImportSpecialPackages};