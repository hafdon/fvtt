const _0x2483=['_LAST_CONFIG_STATE','chatmsg__trim-top','17219bdkqLE','collection','addClass','each','6kCwAlN','header.message-header','classList','_doHandleExistingMessage','95049YEhbDf','1bmjJJR','_EVENT_NAMESPACE','hasClass','deleteChatMessage','timestamp','init','2Qpnozo','98zlfeNg','user','mouseleave.','length','_getMessageMeta','MODULE_NAME','renderChatMessage','next','_isMetaMatch','2433379Udmqlr','_$getExistingRender','637095xFGCGi','17406LHXcvJ','blind','_handleDeleteChatMessage','handleConfigUpdate','.message[data-message-id=\x22','shiftKey','chat','ChatMessage','color','element','removeClass','$ele','_doRemoveFromExistingMessages','isCompactChat','_handleRenderChatMessage','whisper','chatmsg__trim-top--inspecting','_LAST_MESSAGE_META','author','deepEquals','_SPEAKER_TIMEOUT_MSEC','off','get','mousemove.','messageId','remove','chatmsg__trim-bottom','mouseover.','643936CewZRP','105rijtaL','data','646259hzoaWn','_doBindTrimmedTopEventHandlers','prev','find','instance','_doAddToExistingMessages'];const _0x5ea5=function(_0x4bdc0d,_0x2ddb6e){_0x4bdc0d=_0x4bdc0d-0x1c9;let _0x24833b=_0x2483[_0x4bdc0d];return _0x24833b;};const _0xf01856=_0x5ea5;(function(_0x14e6c3,_0x22e228){const _0x31d568=_0x5ea5;while(!![]){try{const _0xd52195=-parseInt(_0x31d568(0x1ed))*parseInt(_0x31d568(0x20a))+-parseInt(_0x31d568(0x1d5))*parseInt(_0x31d568(0x1d9))+parseInt(_0x31d568(0x1c9))*parseInt(_0x31d568(0x1e0))+parseInt(_0x31d568(0x1e1))*-parseInt(_0x31d568(0x1d1))+parseInt(_0x31d568(0x1ec))+parseInt(_0x31d568(0x209))+parseInt(_0x31d568(0x1ea))*parseInt(_0x31d568(0x1da));if(_0xd52195===_0x22e228)break;else _0x14e6c3['push'](_0x14e6c3['shift']());}catch(_0x5524ee){_0x14e6c3['push'](_0x14e6c3['shift']());}}}(_0x2483,0xe0fc6));import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';class Patcher_ChatMessage{static[_0xf01856(0x1f0)](){const _0x3c83ee=_0xf01856;if(Patcher_ChatMessage[_0x3c83ee(0x1cf)]==null||Patcher_ChatMessage[_0x3c83ee(0x1cf)]!==Config[_0x3c83ee(0x203)]('ui','isCompactChat')){Patcher_ChatMessage[_0x3c83ee(0x1cf)]=Config[_0x3c83ee(0x203)]('ui',_0x3c83ee(0x1fa));if(Patcher_ChatMessage[_0x3c83ee(0x1cf)])this[_0x3c83ee(0x1ce)]();else this[_0x3c83ee(0x1f9)]();}}static[_0xf01856(0x1ce)](){const _0x25b4d8=_0xf01856,_0x3151a1=ui[_0x25b4d8(0x1f3)][_0x25b4d8(0x1f6)][_0x25b4d8(0x1cc)]('.message');_0x3151a1[_0x25b4d8(0x1d4)]((_0x3f8cfe,_0x175303)=>{const _0x10b4ce=_0x25b4d8,_0x1f8ceb=$(_0x175303),_0x4f9c2c=CONFIG[_0x10b4ce(0x1f4)][_0x10b4ce(0x1d2)][_0x10b4ce(0x1cd)][_0x10b4ce(0x203)](_0x175303['dataset'][_0x10b4ce(0x205)]);this['_handleRenderChatMessage'](_0x4f9c2c,_0x1f8ceb,!![]);});}static[_0xf01856(0x1f9)](){const _0x4dec0f=_0xf01856,_0x473a2c=ui[_0x4dec0f(0x1f3)][_0x4dec0f(0x1f6)][_0x4dec0f(0x1cc)]('.message');_0x473a2c[_0x4dec0f(0x1d4)]((_0x2ab1dd,_0x4bcef4)=>{const _0x21431a=_0x4dec0f;_0x4bcef4[_0x21431a(0x1d7)][_0x21431a(0x206)]('chatmsg__trim-top'),_0x4bcef4[_0x21431a(0x1d7)][_0x21431a(0x206)](_0x21431a(0x207)),$(_0x4bcef4)['off'](_0x21431a(0x204)+Patcher_ChatMessage[_0x21431a(0x1db)])[_0x21431a(0x202)](_0x21431a(0x208)+Patcher_ChatMessage['_EVENT_NAMESPACE'])[_0x21431a(0x202)](_0x21431a(0x1e3)+Patcher_ChatMessage['_EVENT_NAMESPACE']);});}static[_0xf01856(0x1df)](){const _0x24c2d3=_0xf01856;Hooks['on'](_0x24c2d3(0x1e7),(_0x5e63a7,_0x16cc47)=>{const _0x890ce=_0x24c2d3;if(!Config[_0x890ce(0x203)]('ui','isCompactChat'))return;this[_0x890ce(0x1fb)](_0x5e63a7,_0x16cc47);}),Hooks['on'](_0x24c2d3(0x1dd),(..._0x26d9a4)=>{const _0x10ca6c=_0x24c2d3;if(!Config[_0x10ca6c(0x203)]('ui',_0x10ca6c(0x1fa)))return;this['_handleDeleteChatMessage'](..._0x26d9a4);});}static[_0xf01856(0x1fb)](_0x387d9b,_0x44b0f4,_0x4c736b){const _0x1abbd6=_0xf01856;if(!_0x4c736b){const _0x6dc7df=this[_0x1abbd6(0x1eb)](_0x387d9b);if(_0x6dc7df&&_0x6dc7df[_0x1abbd6(0x1e4)])return this[_0x1abbd6(0x1d8)](_0x387d9b,_0x44b0f4,_0x6dc7df);}if(!this[_0x1abbd6(0x1e9)](_0x387d9b)){Patcher_ChatMessage[_0x1abbd6(0x1fe)]=this[_0x1abbd6(0x1e5)](_0x387d9b,_0x44b0f4);return;}Patcher_ChatMessage['_LAST_MESSAGE_META'][_0x1abbd6(0x1f8)]['addClass']('chatmsg__trim-bottom');const _0x4ffc84=this[_0x1abbd6(0x1e5)](_0x387d9b,_0x44b0f4);_0x4ffc84[_0x1abbd6(0x1f8)][_0x1abbd6(0x1d3)](_0x1abbd6(0x1d0)),this[_0x1abbd6(0x1ca)](_0x4ffc84[_0x1abbd6(0x1f8)]),Patcher_ChatMessage[_0x1abbd6(0x1fe)]=_0x4ffc84;}static[_0xf01856(0x1e5)](_0x22a35e,_0x4ed4e1){const _0x5e74ec=_0xf01856,_0x98cecd=_0x4ed4e1[_0x5e74ec(0x1cc)](_0x5e74ec(0x1d6));return{'$ele':_0x4ed4e1,'$header':_0x98cecd,'chatMessage':_0x22a35e};}static[_0xf01856(0x1eb)](_0x472fd4){const _0x1f81ba=_0xf01856;return ui[_0x1f81ba(0x1f3)][_0x1f81ba(0x1f6)][_0x1f81ba(0x1cc)](_0x1f81ba(0x1f1)+_0x472fd4['id']+'\x22]');}static[_0xf01856(0x1d8)](_0x340881,_0x11be9d,_0x36e727){const _0x3636b7=_0xf01856;if(_0x36e727['hasClass'](_0x3636b7(0x207)))_0x11be9d['addClass'](_0x3636b7(0x207));_0x36e727['hasClass'](_0x3636b7(0x1d0))&&(_0x11be9d[_0x3636b7(0x1d3)]('chatmsg__trim-top'),this[_0x3636b7(0x1ca)](_0x11be9d));}static[_0xf01856(0x1e9)](_0x50989c){const _0x1a05a7=_0xf01856;if(!Patcher_ChatMessage[_0x1a05a7(0x1fe)])return![];const {chatMessage:_0x1918d1}=Patcher_ChatMessage[_0x1a05a7(0x1fe)];if(_0x1918d1[_0x1a05a7(0x20b)]['timestamp']<_0x50989c[_0x1a05a7(0x20b)][_0x1a05a7(0x1de)]-Patcher_ChatMessage[_0x1a05a7(0x201)])return![];if(_0x1918d1[_0x1a05a7(0x1e2)]?.['id']!==_0x50989c[_0x1a05a7(0x1e2)]?.['id'])return![];if(_0x1918d1[_0x1a05a7(0x1e2)]?.[_0x1a05a7(0x1f5)]!==_0x50989c[_0x1a05a7(0x1e2)]?.['color'])return![];if(_0x1918d1[_0x1a05a7(0x1ff)]?.['id']!==_0x50989c['author']?.['id'])return![];if(_0x1918d1['alias']!==_0x50989c['alias'])return![];if(!CollectionUtil[_0x1a05a7(0x200)](_0x1918d1[_0x1a05a7(0x20b)]?.[_0x1a05a7(0x1fc)],_0x50989c[_0x1a05a7(0x20b)]?.[_0x1a05a7(0x1fc)]))return![];if(_0x1918d1[_0x1a05a7(0x20b)]?.[_0x1a05a7(0x1ee)]!==_0x50989c[_0x1a05a7(0x20b)]?.[_0x1a05a7(0x1ee)])return![];return!![];}static[_0xf01856(0x1ef)](_0x4da27b){const _0x3678be=_0xf01856,_0x3697af=ui[_0x3678be(0x1f3)][_0x3678be(0x1f6)][_0x3678be(0x1cc)](_0x3678be(0x1f1)+_0x4da27b['id']+'\x22]'),_0x4470a5=_0x3697af[_0x3678be(0x1cb)](),_0x3419fd=_0x3697af[_0x3678be(0x1e8)]();_0x3419fd[_0x3678be(0x1e4)]&&(!_0x3697af[_0x3678be(0x1dc)]('chatmsg__trim-top')&&_0x3697af[_0x3678be(0x1dc)](_0x3678be(0x207))&&_0x3419fd[_0x3678be(0x1f7)]('chatmsg__trim-top'));_0x4470a5[_0x3678be(0x1e4)]&&(_0x3697af[_0x3678be(0x1dc)](_0x3678be(0x1d0))&&!_0x3697af[_0x3678be(0x1dc)](_0x3678be(0x207))&&_0x4470a5[_0x3678be(0x1f7)]('chatmsg__trim-bottom'));if(Patcher_ChatMessage[_0x3678be(0x1fe)]){const {chatMessage:_0x10bf44}=Patcher_ChatMessage[_0x3678be(0x1fe)];if(_0x10bf44===_0x4da27b)Patcher_ChatMessage[_0x3678be(0x1fe)]=null;}}static['_doBindTrimmedTopEventHandlers'](_0x58bd3f){const _0x383174=_0xf01856;_0x58bd3f['on']('mousemove.'+Patcher_ChatMessage[_0x383174(0x1db)],_0x219da4=>{const _0x573050=_0x383174;if(!_0x219da4[_0x573050(0x1f2)])return;_0x58bd3f['addClass']('chatmsg__trim-top--inspecting');})['on'](_0x383174(0x208)+Patcher_ChatMessage[_0x383174(0x1db)],_0x165043=>{const _0x2530b0=_0x383174;if(!_0x165043[_0x2530b0(0x1f2)])return;_0x58bd3f[_0x2530b0(0x1d3)](_0x2530b0(0x1fd));})['on']('mouseleave.'+Patcher_ChatMessage['_EVENT_NAMESPACE'],()=>{_0x58bd3f['removeClass']('chatmsg__trim-top--inspecting');});}}Patcher_ChatMessage['_LAST_CONFIG_STATE']=null,Patcher_ChatMessage['_SPEAKER_TIMEOUT_MSEC']=0x7530,Patcher_ChatMessage[_0xf01856(0x1fe)]=null,Patcher_ChatMessage[_0xf01856(0x1db)]=SharedConsts[_0xf01856(0x1e6)]+'-chat';export{Patcher_ChatMessage};