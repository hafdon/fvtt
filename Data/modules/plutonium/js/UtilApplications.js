'use strict';const _0x1c11=['warn','depth','taskExitSkippedDuplicate','740245gfONIn','isForceClose','removeClass','_setTitleText','4iUKrJe','_fnGetRowSuccessText','[data-name=\x22disp-progress\x22]','getFolderList','_tasks','Failed\x20to\x20import\x20\x22','data','<i\x20class=\x22fas\x20','_isCancelled','folder','5972ZtCTWr','getFolderPath','fnGetRowCancelText','_element','title','TASK_EXIT_CANCELLED','403796hqWyAM','/template/TaskRunner.handlebars','position','parent','activateListeners','_fnGetRowRunningText','Critical\x20failure!\x20','48627BWxVGR','_getHeaderButtons','<i\x20class=\x22fas\x20fa-times\x22></i>','Importing\x20','ascSort','_getRowMeta','_fnGetRowOverwriteDuplicateText','\x20folder\x20\x22','pDelay','TASK_EXIT_COMPLETE','\x22!\x20','name','imported','556470KyrKyA','23UBZBfc','render','focus','round','dismissText','push','actor','\x22></i>','...','STR_SEE_CONSOLE','\x22\x20cancelled.','_titleCompelte','_$prevMsg','addClass','text','prependTo','max','$pGetAddAppLoadingOverlay','Failed\x20to\x20import\x20','close','Imported\x20','info','setProgress','pRunTasks','keys','\x22\x20failed','6zGxYjU','click','TASK_EXIT_SKIPPED_DUPLICATE','getCleanEntityName','<div\x20class=\x22italic\x22>','setApplicationTitle','6202lOjnbp','css','find','MODULE_LOCATION','fnGetRowErrorText','taskExitCompleteDataOnly','sort','entities','\x22\x20to\x20actor\x20\x22','pGetConfirmation','join','TaskRunner','content','status','splice','pRun','Import\x20of\x20\x22','type','entity','Cancel','yes','pInit','Import\x20of\x20','.window-title','Task\x20\x22','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','.window-header\x20.window-title','filter','\x20to\x20','TASK_EXIT_FAILED','_$btnCancel','notifications','_$wrpConsole','_$dispProgress','fnGetRowSuccessText','\x20was\x20skipped\x20(duplicate\x20found).','_doSwitchToCloseButton','taskExitCancelled','min','map','Could\x20not\x20display\x20import\x20notificationsâ€”import\x20status\x20was\x20not\x20defined.\x20This\x20is\x20a\x20bug!','_setBarProgress','veapp__msg-error\x20bold','(Unnamed\x20Entity)','fnGetRowRunningText','_fnGetRowErrorText','_fnGetRowSkippedDuplicateText','titleInitial','_prevProgress','error','TaskRunner\x20died!','11oOaAyD','taskExitCompleteFailed','_fnGetRowCancelText','length','TASK_EXIT_COMPLETE_DATA_ONLY','appendTo','italic','120738KIqeuF','faIcon','off','reverse','_isForceClose'];const _0x4489=function(_0x48a938,_0x4934c6){_0x48a938=_0x48a938-0xf2;let _0x1c1119=_0x1c11[_0x48a938];return _0x1c1119;};const _0x4e42ff=_0x4489;(function(_0x5f2534,_0x1735cf){const _0x39d2b1=_0x4489;while(!![]){try{const _0x5c6a1e=-parseInt(_0x39d2b1(0x15c))+parseInt(_0x39d2b1(0x142))*-parseInt(_0x39d2b1(0x15d))+-parseInt(_0x39d2b1(0x14f))*-parseInt(_0x39d2b1(0x177))+-parseInt(_0x39d2b1(0x12c))+-parseInt(_0x39d2b1(0x134))+parseInt(_0x39d2b1(0x125))*parseInt(_0x39d2b1(0xf2))+-parseInt(_0x39d2b1(0x148))*-parseInt(_0x39d2b1(0x138));if(_0x5c6a1e===_0x1735cf)break;else _0x5f2534['push'](_0x5f2534['shift']());}catch(_0x1c3514){_0x5f2534['push'](_0x5f2534['shift']());}}}(_0x1c11,0x66a07));import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async[_0x4e42ff(0x16e)](_0x4917ff){const _0x53e3fb=_0x4e42ff;_0x4917ff[_0x53e3fb(0xf3)](_0x53e3fb(0x14a),'relative');const _0x128d6f=$('<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>')[_0x53e3fb(0x15f)]()[_0x53e3fb(0x12a)](_0x4917ff);return await MiscUtil['pDelay'](0x5),_0x128d6f;}static[_0x4e42ff(0xfb)](_0x55bd56){return _0x55bd56=_0x55bd56||{},new Promise(_0x55b5d9=>{const _0x2f23a4=_0x4489;new Dialog({'title':_0x55bd56[_0x2f23a4(0x146)],'content':_0x55bd56[_0x2f23a4(0xfe)],'buttons':{'yes':{'icon':_0x2f23a4(0x13f)+_0x55bd56[_0x2f23a4(0x12d)]+_0x2f23a4(0x164),'label':_0x55bd56['confirmText'],'callback':()=>_0x55b5d9(!![])},'no':{'icon':_0x2f23a4(0x151),'label':_0x55bd56[_0x2f23a4(0x161)]||_0x2f23a4(0x105),'callback':()=>_0x55b5d9(![])}},'default':_0x2f23a4(0x106)})[_0x2f23a4(0x15e)](!![]);});}static[_0x4e42ff(0x17a)](_0x1bde50){return _0x1bde50||'\x20';}static[_0x4e42ff(0x143)](_0x143ebb,_0x120a8d){const _0x3e108f=_0x4e42ff;_0x120a8d=_0x120a8d||{};if(!_0x143ebb)return null;const _0x4bd5b4=[];if(_0x143ebb[_0x3e108f(0x141)]){_0x4bd5b4[_0x3e108f(0x162)](_0x143ebb[_0x3e108f(0x141)][_0x3e108f(0x13e)]['name']);let _0x249c92=_0x143ebb[_0x3e108f(0x141)][_0x3e108f(0x14b)];while(_0x249c92&&_0x249c92['id']){_0x4bd5b4['push'](_0x249c92[_0x3e108f(0x13e)]['name']),_0x249c92=_0x249c92[_0x3e108f(0x14b)];}}const _0x3e7e99=_0x4bd5b4['reverse']()[_0x3e108f(0xfc)]('/');if(_0x3e7e99)return _0x120a8d['isAddTrailingSlash']?_0x3e7e99+'/':_0x3e7e99;return null;}static[_0x4e42ff(0x11b)](_0xcf9010,_0x38d52c){const _0xde9e51=_0x4e42ff;_0x38d52c=Math['max'](0x0,Math[_0xde9e51(0x118)](_0x38d52c,0x1)),_0xcf9010[_0xde9e51(0xf3)]({'width':Math[_0xde9e51(0x160)](_0x38d52c*0x64)+'%'});}static async[_0x4e42ff(0x174)](_0x49afa1,_0x1bb88f){const _0x3d626e=_0x4e42ff;_0x1bb88f=_0x1bb88f||[];const _0x48ebc7=new UtilApplications[(_0x3d626e(0xfd))](_0x49afa1,_0x1bb88f);await _0x48ebc7[_0x3d626e(0x101)]();}static[_0x4e42ff(0x13b)](_0x314c30){const _0xc1e6be=_0x4e42ff,_0x521d85=(_0x3629d5,_0x5e3ed5)=>SortUtil[_0xc1e6be(0x153)](_0x3629d5['data'][_0xc1e6be(0xf8)],_0x5e3ed5['data']['sort']),_0x2eff91=Folder['collection'][_0xc1e6be(0xf9)][_0xc1e6be(0x10d)](_0x4d73c8=>_0x4d73c8[_0xc1e6be(0x13e)][_0xc1e6be(0x103)]===_0x314c30)['sort'](_0x521d85);if(!_0x2eff91[_0xc1e6be(0x128)])return _0x2eff91;const _0x596ee1=Math[_0xc1e6be(0x16d)](..._0x2eff91[_0xc1e6be(0x119)](_0x3352a8=>_0x3352a8[_0xc1e6be(0x132)])),_0x229659=_0x2eff91[_0xc1e6be(0x10d)](_0x4154e2=>_0x4154e2[_0xc1e6be(0x132)]===0x1);if(_0x229659[_0xc1e6be(0x128)]===_0x2eff91['length'])return _0x229659;for(let _0xb00421=0x2;_0xb00421<_0x596ee1+0x1;++_0xb00421){const _0x1f3f4b=_0x2eff91[_0xc1e6be(0x10d)](_0x537968=>_0x537968[_0xc1e6be(0x132)]===_0xb00421)['sort'](_0x521d85)[_0xc1e6be(0x12f)]();_0x1f3f4b['forEach'](_0x1b6156=>{const _0x497e5e=_0xc1e6be,_0x1c6ff0=_0x229659['findIndex'](_0x593752=>_0x593752['id']===_0x1b6156[_0x497e5e(0x14b)]['id']);if(~_0x1c6ff0)_0x229659[_0x497e5e(0x100)](_0x1c6ff0+0x1,0x0,_0x1b6156);});}return _0x229659;}static['bringToFront'](_0xf8840e){const _0x189056=_0x4e42ff;if(!_0xf8840e['_element'])return;if(typeof _maxZ==='undefined')window['_maxZ']=0x64;if(Object[_0x189056(0x175)](ui['windows'])[_0x189056(0x128)]===0x0)_maxZ=0x64;_0xf8840e[_0x189056(0x145)][_0x189056(0xf3)]({'zIndex':Math[_0x189056(0x118)](++_maxZ,Consts['Z_INDEX_MAX_FOUNDRY'])});}static['doShowImportedNotification'](_0x5c9ac9){const _0x4c41c2=_0x4e42ff;if(!_0x5c9ac9)return;if(!_0x5c9ac9[_0x4c41c2(0xff)]){_0x5c9ac9[_0x4c41c2(0xff)]=UtilApplications[_0x4c41c2(0x158)];const _0x3c49a7=_0x4c41c2(0x11a);ui[_0x4c41c2(0x111)][_0x4c41c2(0x123)](_0x3c49a7),console[_0x4c41c2(0x123)](new Error(_0x3c49a7));}const _0x40ba2f=_0x5c9ac9[_0x4c41c2(0x15a)]||_0x5c9ac9[_0x4c41c2(0x104)]?.[_0x4c41c2(0x15a)]||_0x5c9ac9[_0x4c41c2(0x15b)]?.[_0x4c41c2(0x15a)]||_0x5c9ac9[_0x4c41c2(0x15b)]?.[_0x4c41c2(0x13e)]?.[_0x4c41c2(0x15a)]||_0x4c41c2(0x11d);if(_0x5c9ac9['status']===UtilApplications[_0x4c41c2(0x147)])return ui[_0x4c41c2(0x111)][_0x4c41c2(0x131)](_0x4c41c2(0x102)+_0x40ba2f+_0x4c41c2(0x167));else{if(_0x5c9ac9[_0x4c41c2(0xff)]===UtilApplications[_0x4c41c2(0x179)])return ui[_0x4c41c2(0x111)][_0x4c41c2(0x131)]('Import\x20of\x20\x22'+_0x40ba2f+'\x22\x20was\x20skipped\x20(duplicate\x20found).');else{if(_0x5c9ac9[_0x4c41c2(0xff)]===UtilApplications[_0x4c41c2(0x10f)])return ui[_0x4c41c2(0x111)][_0x4c41c2(0x123)](_0x4c41c2(0x13d)+_0x40ba2f+_0x4c41c2(0x159)+VeCt[_0x4c41c2(0x166)]);}}if(_0x5c9ac9[_0x4c41c2(0x15b)][_0x4c41c2(0x163)])ui[_0x4c41c2(0x111)][_0x4c41c2(0x172)]('Imported\x20\x22'+_0x40ba2f+_0x4c41c2(0xfa)+_0x5c9ac9['imported'][_0x4c41c2(0x163)][_0x4c41c2(0x15a)]+'\x22.');else{const _0x21d662=_0x5c9ac9?.[_0x4c41c2(0x15b)]?.['folder']?_0x5c9ac9[_0x4c41c2(0x15b)][_0x4c41c2(0x141)][_0x4c41c2(0x13e)][_0x4c41c2(0x103)]:null,_0x20f3a0=UtilApplications[_0x4c41c2(0x143)](_0x5c9ac9[_0x4c41c2(0x15b)]);ui['notifications'][_0x4c41c2(0x172)]('Imported\x20\x22'+_0x40ba2f+'\x22'+(_0x21d662&&_0x20f3a0?_0x4c41c2(0x10e)+_0x21d662+_0x4c41c2(0x156)+_0x20f3a0+'\x22.':''));}}static[_0x4e42ff(0x17c)](_0x2ef275,_0x5cb43d){const _0x490a83=_0x4e42ff;_0x2ef275['options'][_0x490a83(0x146)]=_0x5cb43d,_0x2ef275['element']['find'](_0x490a83(0x109))[_0x490a83(0x16b)](_0x2ef275[_0x490a83(0x146)]);}}UtilApplications['TASK_EXIT_COMPLETE']=Symbol('taskExitComplete'),UtilApplications['TASK_EXIT_CANCELLED']=Symbol(_0x4e42ff(0x117)),UtilApplications[_0x4e42ff(0x179)]=Symbol(_0x4e42ff(0x133)),UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']=Symbol('taskExitCompleteOverwrite'),UtilApplications[_0x4e42ff(0x10f)]=Symbol(_0x4e42ff(0x126)),UtilApplications[_0x4e42ff(0x129)]=Symbol(_0x4e42ff(0xf7)),UtilApplications['TaskRunner']=class extends Application{constructor(_0xc871b3,_0x115890){const _0x457845=_0x4e42ff;_0x115890=_0x115890||{},super({'title':_0x115890[_0x457845(0x121)]||'Importing...','width':0x1e0,'template':SharedConsts[_0x457845(0xf5)]+_0x457845(0x149),'height':0x140,'resizable':!![]}),this['_tasks']=_0xc871b3,this['_titleCompelte']=_0x115890['titleComplete']||'Import\x20Complete',this[_0x457845(0x14d)]=_0x115890[_0x457845(0x11e)]||(_0x1e8b26=>_0x457845(0x152)+_0x1e8b26+_0x457845(0x165)),this[_0x457845(0x139)]=_0x115890[_0x457845(0x114)]||(_0x51ab62=>_0x457845(0x171)+_0x51ab62+'.'),this[_0x457845(0x11f)]=_0x115890[_0x457845(0xf6)]||(_0x2fcd21=>_0x457845(0x16f)+_0x2fcd21+'!\x20'+VeCt[_0x457845(0x166)]),this[_0x457845(0x127)]=_0x115890[_0x457845(0x144)]||(_0xa06dec=>'Import\x20of\x20'+_0xa06dec+'\x20was\x20cancelled.'),this[_0x457845(0x120)]=_0x115890['fnGetRowSkippedDuplicateText']||(_0x2cef4a=>_0x457845(0x108)+_0x2cef4a+_0x457845(0x115)),this[_0x457845(0x155)]=_0x115890['fnGetRowOverwriteDuplicateText']||(_0x5c482f=>'Imported\x20'+_0x5c482f+',\x20overwriting\x20existing\x20(duplicate\x20found).'),this['_isForceClose']=!!_0x115890[_0x457845(0x135)],this[_0x457845(0x140)]=![],this[_0x457845(0x113)]=null,this[_0x457845(0x112)]=null,this[_0x457845(0x110)]=null,this[_0x457845(0x122)]=null,this[_0x457845(0x169)]=null;}get['isCancelled'](){const _0x2697a8=_0x4e42ff;return this[_0x2697a8(0x140)];}['activateListeners'](_0x18867a){const _0x47ca9e=_0x4e42ff;super[_0x47ca9e(0x14c)](_0x18867a),this[_0x47ca9e(0x113)]=_0x18867a['find'](_0x47ca9e(0x13a)),this[_0x47ca9e(0x112)]=_0x18867a[_0x47ca9e(0xf4)]('[data-name=\x22wrp-console\x22]'),this[_0x47ca9e(0x110)]=_0x18867a[_0x47ca9e(0xf4)]('[name=\x22btn-cancel\x22]')[_0x47ca9e(0x178)](()=>this[_0x47ca9e(0x140)]=!![]);}async[_0x4e42ff(0x107)](){const _0x8cdc2f=_0x4e42ff;await this[_0x8cdc2f(0x15e)](!![]);while(this[_0x8cdc2f(0x110)]==null)await MiscUtil[_0x8cdc2f(0x157)](0x19);}async[_0x4e42ff(0x101)](){const _0x34caaf=_0x4e42ff;await this['pInit']();try{const _0x25fbb0=this[_0x34caaf(0x13c)][_0x34caaf(0x128)];for(let _0x51a094=0x0;_0x51a094<_0x25fbb0;++_0x51a094){const _0x5ba087=this[_0x34caaf(0x13c)][_0x51a094];if(this[_0x34caaf(0x140)])break;const {$msg:_0x47bdc4,$row:_0x21a4e6}=this[_0x34caaf(0x154)](this[_0x34caaf(0x14d)](_0x5ba087[_0x34caaf(0x15a)]),_0x51a094+0x1,_0x25fbb0);_0x21a4e6[_0x34caaf(0x16c)](this['_$wrpConsole']);try{const _0x582e3d=await _0x5ba087['fnGetPromise']();switch(_0x582e3d?.[_0x34caaf(0xff)]||UtilApplications['TASK_EXIT_COMPLETE']){case UtilApplications[_0x34caaf(0x147)]:_0x47bdc4[_0x34caaf(0x16b)](this[_0x34caaf(0x127)](_0x5ba087['name']));break;case UtilApplications[_0x34caaf(0x179)]:_0x47bdc4[_0x34caaf(0x16b)](this[_0x34caaf(0x120)](_0x5ba087['name']));break;case UtilApplications[_0x34caaf(0x10b)]:_0x47bdc4[_0x34caaf(0x16b)](this[_0x34caaf(0x155)](_0x5ba087[_0x34caaf(0x15a)]));break;case UtilApplications[_0x34caaf(0x10f)]:_0x47bdc4[_0x34caaf(0x16a)](_0x34caaf(0x11c))[_0x34caaf(0x136)]('italic')[_0x34caaf(0x16b)](this[_0x34caaf(0x11f)](_0x5ba087[_0x34caaf(0x15a)]));break;case UtilApplications[_0x34caaf(0x158)]:default:_0x47bdc4[_0x34caaf(0x16b)](this[_0x34caaf(0x139)](_0x5ba087['name']));break;}}catch(_0x34a764){_0x47bdc4[_0x34caaf(0x16a)](_0x34caaf(0x11c))[_0x34caaf(0x136)](_0x34caaf(0x12b))[_0x34caaf(0x16b)](this[_0x34caaf(0x11f)](_0x5ba087['name'])),console['error'](...LGT,_0x34caaf(0x10a)+_0x5ba087[_0x34caaf(0x15a)]+_0x34caaf(0x176),_0x34a764);}UtilApplications[_0x34caaf(0x11b)](this[_0x34caaf(0x113)],(_0x51a094+0x1)/_0x25fbb0);}UtilApplications[_0x34caaf(0x11b)](this['_$dispProgress'],0x1);if(this[_0x34caaf(0x130)])this[_0x34caaf(0x170)]();else this[_0x34caaf(0x137)](this[_0x34caaf(0x168)]);}catch(_0x22d5f6){console[_0x34caaf(0x123)](...LGT,_0x34caaf(0x124),_0x22d5f6),ui[_0x34caaf(0x111)]['error'](_0x34caaf(0x14e)+VeCt['STR_SEE_CONSOLE']);}this['_doSwitchToCloseButton']();}['_getRowMeta'](_0xb3ddd2,_0x548736,_0x5e3fa7){const _0x2858ef=_0x4e42ff,_0x20b414=$(_0x2858ef(0x17b)+_0xb3ddd2+'</div>'),_0x6d10e5=$$`<div class="mx-1 w-100 split imp__task-row flex-v-center">${_0x20b414}<div>(${_0x548736}/${_0x5e3fa7})</div></div>`;return{'$msg':_0x20b414,'$row':_0x6d10e5};}[_0x4e42ff(0x116)](){const _0x52b1aa=_0x4e42ff;this[_0x52b1aa(0x110)][_0x52b1aa(0x12e)](_0x52b1aa(0x178))[_0x52b1aa(0x16b)]('Close')[_0x52b1aa(0x178)](()=>this[_0x52b1aa(0x170)]());}[_0x4e42ff(0x137)](_0x241f2a){const _0x3a4e60=_0x4e42ff;this['element']['find'](_0x3a4e60(0x10c))[_0x3a4e60(0x16b)](_0x241f2a);}[_0x4e42ff(0x173)](_0x229ef0,_0x1eb187,_0x53cb00,_0x24a790){const _0x3c9f85=_0x4e42ff;_0x1eb187=Math[_0x3c9f85(0x16d)](0x0,_0x1eb187);if(_0x53cb00===0x0)_0x53cb00=0x1;const _0x2c0553=_0x1eb187/_0x53cb00;if(this[_0x3c9f85(0x122)]===_0x2c0553){this[_0x3c9f85(0x169)][_0x3c9f85(0x16b)](_0x229ef0);if(_0x24a790)this['_$prevMsg']['addClass'](_0x3c9f85(0x11c))[_0x3c9f85(0x136)](_0x3c9f85(0x12b));this[_0x3c9f85(0x116)]();return;}this[_0x3c9f85(0x122)]=_0x2c0553;const {$msg:_0x55ef16,$row:_0x20bba7}=this[_0x3c9f85(0x154)](_0x229ef0,_0x1eb187,_0x53cb00);this[_0x3c9f85(0x169)]=_0x55ef16,_0x20bba7[_0x3c9f85(0x16c)](this[_0x3c9f85(0x112)]);if(_0x24a790)_0x55ef16['addClass'](_0x3c9f85(0x11c))[_0x3c9f85(0x136)](_0x3c9f85(0x12b));UtilApplications[_0x3c9f85(0x11b)](this[_0x3c9f85(0x113)],_0x1eb187===_0x53cb00?0x1:_0x2c0553);if(_0x1eb187===_0x53cb00){if(this['_isForceClose'])this['close']();else this[_0x3c9f85(0x137)](this['_titleCompelte']),this[_0x3c9f85(0x116)]();}}[_0x4e42ff(0x150)](){return[];}};export{UtilApplications};