const _0x3f9d=['isForceClose','Import\x20of\x20\x22','Close','_doSwitchToCloseButton','keys','290623eqvnCe','max','STR_SEE_CONSOLE','render','undefined','1uycEDo','_fnGetRowCancelText','_setBarProgress','$getHoverContent_stats','close','taskExitComplete','yes','_fnGetRowSuccessText','_fnGetRowRunningText','addEventListener','dismissText','depth','sort','windows','setApplicationTitle','<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>','appendTo','fnGetRowOverwriteDuplicateText','folder','8609NAOjAj','2VlCHBe','titleInitial','\x22></i>','\x22\x20failed','data','HTML_GLYPHICON_EXPAND','TASK_EXIT_CANCELLED','name','_fnGetRowSkippedDuplicateText','length','.window-title','TASK_EXIT_SKIPPED_DUPLICATE','5tpPJCX','bringToFront','round','faIcon','trim','isCancelled','pRun','Imported\x20','notifications','splice','_prevProgress','getFolderList',',\x20overwriting\x20existing\x20(duplicate\x20found).','click','\x20folder\x20\x22','<span\x20class=\x22glyphicon\x20glyphicon-expand\x22></span>','\x20was\x20cancelled.','hover','getFolderPath','entities','handleClickBtnShowHideListPreview','italic','veapp__msg-error\x20bold','(Unnamed\x20Entity)','fnGetRowRunningText','TaskRunner','innerHTML','push','_isForceClose','_tasks','taskExitCompleteFailed','_fnGetRowErrorText','<span\x20class=\x22glyphicon\x20glyphicon-collapse-down\x22></span>','_fnGetRowOverwriteDuplicateText','623234xAOPeh','Importing\x20','min','text','info','pDelay','TaskRunner\x20died!','taskExitCompleteDataOnly','title','filter','43QqKNJV','</div>','imported','pInit','.window-header\x20.window-title','Cancel','focus','join','<div\x20class=\x22italic\x22>','275410plQoIp','fnGetRowCancelText','Could\x20not\x20display\x20import\x20notificationsâ€”import\x20status\x20was\x20not\x20defined.\x20This\x20is\x20a\x20bug!','ascSort','confirmText','pGetConfirmation','Importing...','find','warn','\x22\x20cancelled.','pRunTasks','HTML_GLYPHICON_CONTRACT','_maxZ','_$dispProgress','6631dXIAaX','5765kDqOKR','entity','status','Imported\x20\x22','stopPropagation','reverse','error','actor','activateListeners','_$wrpConsole','findIndex','Import\x20of\x20','Critical\x20failure!\x20','getCleanEntityName','_$btnCancel','type','_$prevMsg','taskExitSkippedDuplicate','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','...','isAddTrailingSlash','forEach','content','[data-name=\x22disp-progress\x22]','setProgress','Task\x20\x22','removeClass','prependTo','15030cyVrTo','element','parent','addClass','TASK_EXIT_FAILED','TASK_EXIT_COMPLETE','_getRowMeta','_isCancelled','css','_element','\x22\x20to\x20actor\x20\x22','_titleCompelte','_getHeaderButtons'];const _0x1aca=function(_0x1c16da,_0x5c6296){_0x1c16da=_0x1c16da-0x187;let _0x3f9d0d=_0x3f9d[_0x1c16da];return _0x3f9d0d;};const _0x13563f=_0x1aca;(function(_0x4d15d6,_0x484ac4){const _0xde9d67=_0x1aca;while(!![]){try{const _0x259c4d=parseInt(_0xde9d67(0x1ea))*-parseInt(_0xde9d67(0x1a8))+-parseInt(_0xde9d67(0x1e5))+parseInt(_0xde9d67(0x1d3))+parseInt(_0xde9d67(0x195))+parseInt(_0xde9d67(0x19f))*parseInt(_0xde9d67(0x1b6))+-parseInt(_0xde9d67(0x1fd))*-parseInt(_0xde9d67(0x1fe))+parseInt(_0xde9d67(0x20a))*-parseInt(_0xde9d67(0x1b7));if(_0x259c4d===_0x484ac4)break;else _0x4d15d6['push'](_0x4d15d6['shift']());}catch(_0x15043a){_0x4d15d6['push'](_0x4d15d6['shift']());}}}(_0x3f9d,0x5469d));import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async['$pGetAddAppLoadingOverlay'](_0x285d22){const _0x47da66=_0x1aca;_0x285d22[_0x47da66(0x1db)]('position','relative');const _0x495f0c=$(_0x47da66(0x1f9))[_0x47da66(0x1a5)]()[_0x47da66(0x1fa)](_0x285d22);return await MiscUtil[_0x47da66(0x19a)](0x5),_0x495f0c;}static[_0x13563f(0x1ad)](_0x4b8b72){return _0x4b8b72=_0x4b8b72||{},new Promise(_0x1dbac3=>{const _0x40d603=_0x1aca;new Dialog({'title':_0x4b8b72[_0x40d603(0x19d)],'content':_0x4b8b72[_0x40d603(0x1cd)],'buttons':{'yes':{'icon':'<i\x20class=\x22fas\x20'+_0x4b8b72[_0x40d603(0x20d)]+_0x40d603(0x200),'label':_0x4b8b72[_0x40d603(0x1ac)],'callback':()=>_0x1dbac3(!![])},'no':{'icon':'<i\x20class=\x22fas\x20fa-times\x22></i>','label':_0x4b8b72[_0x40d603(0x1f4)]||_0x40d603(0x1a4),'callback':()=>_0x1dbac3(![])}},'default':_0x40d603(0x1f0)})[_0x40d603(0x1e8)](!![]);});}static[_0x13563f(0x1c4)](_0x176f59){return _0x176f59||'\x20';}static[_0x13563f(0x21c)](_0x90994c,_0x39ece5){const _0x694b75=_0x13563f;_0x39ece5=_0x39ece5||{};if(!_0x90994c)return null;const _0x2f3460=[];if(_0x90994c[_0x694b75(0x1fc)]){_0x2f3460[_0x694b75(0x18e)](_0x90994c[_0x694b75(0x1fc)][_0x694b75(0x202)][_0x694b75(0x205)]);let _0x5e4713=_0x90994c['folder'][_0x694b75(0x1d5)];while(_0x5e4713&&_0x5e4713['id']){_0x2f3460['push'](_0x5e4713[_0x694b75(0x202)][_0x694b75(0x205)]),_0x5e4713=_0x5e4713[_0x694b75(0x1d5)];}}const _0x8c5e13=_0x2f3460[_0x694b75(0x1bc)]()[_0x694b75(0x1a6)]('/');if(_0x8c5e13)return _0x39ece5[_0x694b75(0x1cb)]?_0x8c5e13+'/':_0x8c5e13;return null;}static[_0x13563f(0x1ec)](_0x3fd22c,_0x15f6c7){const _0x2df38c=_0x13563f;_0x15f6c7=Math[_0x2df38c(0x1e6)](0x0,Math[_0x2df38c(0x197)](_0x15f6c7,0x1)),_0x3fd22c[_0x2df38c(0x1db)]({'width':Math[_0x2df38c(0x20c)](_0x15f6c7*0x64)+'%'});}static async[_0x13563f(0x1b2)](_0x17d6ef,_0x34b597){const _0x38098c=_0x13563f;_0x34b597=_0x34b597||[];const _0x39ddba=new UtilApplications[(_0x38098c(0x18c))](_0x17d6ef,_0x34b597);await _0x39ddba['pRun']();}static[_0x13563f(0x215)](_0x2c3fe6){const _0x48e010=_0x13563f,_0x186393=(_0x24d344,_0x5b56a7)=>SortUtil[_0x48e010(0x1ab)](_0x24d344[_0x48e010(0x202)][_0x48e010(0x1f6)],_0x5b56a7['data'][_0x48e010(0x1f6)]),_0x4d1be9=Folder['collection'][_0x48e010(0x21d)][_0x48e010(0x19e)](_0x51e1d9=>_0x51e1d9[_0x48e010(0x202)][_0x48e010(0x1c6)]===_0x2c3fe6)[_0x48e010(0x1f6)](_0x186393);if(!_0x4d1be9[_0x48e010(0x207)])return _0x4d1be9;const _0x487603=Math[_0x48e010(0x1e6)](..._0x4d1be9['map'](_0x4f7e0e=>_0x4f7e0e[_0x48e010(0x1f5)])),_0x23119e=_0x4d1be9[_0x48e010(0x19e)](_0x2655ce=>_0x2655ce[_0x48e010(0x1f5)]===0x1);if(_0x23119e[_0x48e010(0x207)]===_0x4d1be9[_0x48e010(0x207)])return _0x23119e;for(let _0x56d69c=0x2;_0x56d69c<_0x487603+0x1;++_0x56d69c){const _0x461d20=_0x4d1be9[_0x48e010(0x19e)](_0xe05f27=>_0xe05f27['depth']===_0x56d69c)[_0x48e010(0x1f6)](_0x186393)[_0x48e010(0x1bc)]();_0x461d20[_0x48e010(0x1cc)](_0x4a3346=>{const _0x4d8154=_0x48e010,_0x238f53=_0x23119e[_0x4d8154(0x1c1)](_0x5c5304=>_0x5c5304['id']===_0x4a3346[_0x4d8154(0x1d5)]['id']);if(~_0x238f53)_0x23119e[_0x4d8154(0x213)](_0x238f53+0x1,0x0,_0x4a3346);});}return _0x23119e;}static[_0x13563f(0x20b)](_0x1de76f){const _0x43d305=_0x13563f;if(!_0x1de76f['_element'])return;if(typeof _maxZ===_0x43d305(0x1e9))window[_0x43d305(0x1b4)]=0x64;if(Object[_0x43d305(0x1e4)](ui[_0x43d305(0x1f7)])[_0x43d305(0x207)]===0x0)_maxZ=0x64;_0x1de76f[_0x43d305(0x1dc)][_0x43d305(0x1db)]({'zIndex':Math[_0x43d305(0x197)](++_maxZ,Consts['Z_INDEX_MAX_FOUNDRY'])});}static['doShowImportedNotification'](_0x3ee49f){const _0x171645=_0x13563f;if(!_0x3ee49f)return;if(!_0x3ee49f[_0x171645(0x1b9)]){_0x3ee49f[_0x171645(0x1b9)]=UtilApplications[_0x171645(0x1d8)];const _0x3493c4=_0x171645(0x1aa);ui['notifications']['error'](_0x3493c4),console[_0x171645(0x1bd)](new Error(_0x3493c4));}const _0x56afbb=_0x3ee49f[_0x171645(0x205)]||_0x3ee49f[_0x171645(0x1b8)]?.[_0x171645(0x205)]||_0x3ee49f[_0x171645(0x1a1)]?.[_0x171645(0x205)]||_0x3ee49f[_0x171645(0x1a1)]?.[_0x171645(0x202)]?.[_0x171645(0x205)]||_0x171645(0x18a);if(_0x3ee49f[_0x171645(0x1b9)]===UtilApplications['TASK_EXIT_CANCELLED'])return ui['notifications']['warn'](_0x171645(0x1e1)+_0x56afbb+_0x171645(0x1b1));else{if(_0x3ee49f[_0x171645(0x1b9)]===UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE'])return ui['notifications'][_0x171645(0x1b0)](_0x171645(0x1e1)+_0x56afbb+'\x22\x20was\x20skipped\x20(duplicate\x20found).');else{if(_0x3ee49f[_0x171645(0x1b9)]===UtilApplications[_0x171645(0x1d7)])return ui['notifications'][_0x171645(0x1bd)]('Failed\x20to\x20import\x20\x22'+_0x56afbb+'\x22!\x20'+VeCt[_0x171645(0x1e7)]);}}if(_0x3ee49f[_0x171645(0x1a1)][_0x171645(0x1be)])ui[_0x171645(0x212)][_0x171645(0x199)](_0x171645(0x1ba)+_0x56afbb+_0x171645(0x1dd)+_0x3ee49f[_0x171645(0x1a1)][_0x171645(0x1be)]['name']+'\x22.');else{const _0x49118f=_0x3ee49f?.['imported']?.['folder']?_0x3ee49f[_0x171645(0x1a1)][_0x171645(0x1fc)]['data'][_0x171645(0x1c6)]:null,_0x58a776=UtilApplications[_0x171645(0x21c)](_0x3ee49f['imported']);ui[_0x171645(0x212)]['info'](_0x171645(0x1ba)+_0x56afbb+'\x22'+(_0x49118f&&_0x58a776?'\x20to\x20'+_0x49118f+_0x171645(0x218)+_0x58a776+'\x22.':''));}}static[_0x13563f(0x1f8)](_0x3a1e3f,_0x43d4ce){const _0x2a3668=_0x13563f;_0x3a1e3f['options'][_0x2a3668(0x19d)]=_0x43d4ce,_0x3a1e3f[_0x2a3668(0x1d4)][_0x2a3668(0x1af)](_0x2a3668(0x208))[_0x2a3668(0x198)](_0x3a1e3f[_0x2a3668(0x19d)]);}static[_0x13563f(0x187)](_0x44e318,_0x57aa33,_0x3e6b16,_0x145548,_0x281a8a){const _0x180641=_0x13563f;_0x44e318[_0x180641(0x1bb)]();const _0x1a92cd=_0x145548['innerHTML'][_0x180641(0x20e)]()===UtilApplications['HTML_GLYPHICON_EXPAND']?UtilApplications[_0x180641(0x1b3)]:UtilApplications[_0x180641(0x203)];_0x281a8a['classList']['toggle']('ve-hidden',_0x1a92cd===UtilApplications[_0x180641(0x203)]),_0x145548['innerHTML']=_0x1a92cd;const _0x5b31d0=_0x281a8a['lastElementChild'];if(_0x5b31d0[_0x180641(0x18d)])return;_0x5b31d0[_0x180641(0x1f3)](_0x180641(0x217),_0x4de03f=>{const _0x12d42a=_0x180641;_0x4de03f[_0x12d42a(0x1bb)]();}),$(_0x5b31d0)['empty'](),Renderer[_0x180641(0x21b)][_0x180641(0x1ed)](_0x57aa33,_0x3e6b16)[_0x180641(0x1fa)](_0x5b31d0);}}UtilApplications['TASK_EXIT_COMPLETE']=Symbol(_0x13563f(0x1ef)),UtilApplications[_0x13563f(0x204)]=Symbol('taskExitCancelled'),UtilApplications[_0x13563f(0x209)]=Symbol(_0x13563f(0x1c8)),UtilApplications[_0x13563f(0x1c9)]=Symbol('taskExitCompleteOverwrite'),UtilApplications[_0x13563f(0x1d7)]=Symbol(_0x13563f(0x191)),UtilApplications['TASK_EXIT_COMPLETE_DATA_ONLY']=Symbol(_0x13563f(0x19c)),UtilApplications['HTML_GLYPHICON_EXPAND']=_0x13563f(0x219),UtilApplications[_0x13563f(0x1b3)]=_0x13563f(0x193),UtilApplications[_0x13563f(0x18c)]=class extends Application{constructor(_0x50b596,_0x1af30b){const _0x1a68f0=_0x13563f;_0x1af30b=_0x1af30b||{},super({'title':_0x1af30b[_0x1a68f0(0x1ff)]||_0x1a68f0(0x1ae),'width':0x1e0,'template':SharedConsts['MODULE_LOCATION']+'/template/TaskRunner.handlebars','height':0x140,'resizable':!![]}),this[_0x1a68f0(0x190)]=_0x50b596,this[_0x1a68f0(0x1de)]=_0x1af30b['titleComplete']||'Import\x20Complete',this['_fnGetRowRunningText']=_0x1af30b[_0x1a68f0(0x18b)]||(_0xd4ccec=>_0x1a68f0(0x196)+_0xd4ccec+_0x1a68f0(0x1ca)),this[_0x1a68f0(0x1f1)]=_0x1af30b['fnGetRowSuccessText']||(_0x5a8715=>_0x1a68f0(0x211)+_0x5a8715+'.'),this['_fnGetRowErrorText']=_0x1af30b['fnGetRowErrorText']||(_0x51e5bc=>'Failed\x20to\x20import\x20'+_0x51e5bc+'!\x20'+VeCt['STR_SEE_CONSOLE']),this[_0x1a68f0(0x1eb)]=_0x1af30b[_0x1a68f0(0x1a9)]||(_0x942275=>_0x1a68f0(0x1c2)+_0x942275+_0x1a68f0(0x21a)),this[_0x1a68f0(0x206)]=_0x1af30b['fnGetRowSkippedDuplicateText']||(_0xd5b24=>_0x1a68f0(0x1c2)+_0xd5b24+'\x20was\x20skipped\x20(duplicate\x20found).'),this['_fnGetRowOverwriteDuplicateText']=_0x1af30b[_0x1a68f0(0x1fb)]||(_0x12412b=>_0x1a68f0(0x211)+_0x12412b+_0x1a68f0(0x216)),this['_isForceClose']=!!_0x1af30b[_0x1a68f0(0x1e0)],this[_0x1a68f0(0x1da)]=![],this[_0x1a68f0(0x1b5)]=null,this[_0x1a68f0(0x1c0)]=null,this['_$btnCancel']=null,this[_0x1a68f0(0x214)]=null,this[_0x1a68f0(0x1c7)]=null;}get[_0x13563f(0x20f)](){const _0x3cfdb0=_0x13563f;return this[_0x3cfdb0(0x1da)];}[_0x13563f(0x1bf)](_0x457cd9){const _0x33d02a=_0x13563f;super[_0x33d02a(0x1bf)](_0x457cd9),this[_0x33d02a(0x1b5)]=_0x457cd9[_0x33d02a(0x1af)](_0x33d02a(0x1ce)),this[_0x33d02a(0x1c0)]=_0x457cd9['find']('[data-name=\x22wrp-console\x22]'),this[_0x33d02a(0x1c5)]=_0x457cd9[_0x33d02a(0x1af)]('[name=\x22btn-cancel\x22]')[_0x33d02a(0x217)](()=>this['_isCancelled']=!![]);}async[_0x13563f(0x1a2)](){const _0x35a493=_0x13563f;await this['render'](!![]);while(this['_$btnCancel']==null)await MiscUtil[_0x35a493(0x19a)](0x19);}async[_0x13563f(0x210)](){const _0x4a59a1=_0x13563f;await this[_0x4a59a1(0x1a2)]();try{const _0x116001=this[_0x4a59a1(0x190)][_0x4a59a1(0x207)];for(let _0x53c4fe=0x0;_0x53c4fe<_0x116001;++_0x53c4fe){const _0x1cefe6=this[_0x4a59a1(0x190)][_0x53c4fe];if(this['_isCancelled'])break;const {$msg:_0x16d3cb,$row:_0xccd036}=this['_getRowMeta'](this[_0x4a59a1(0x1f2)](_0x1cefe6[_0x4a59a1(0x205)]),_0x53c4fe+0x1,_0x116001);_0xccd036[_0x4a59a1(0x1d2)](this['_$wrpConsole']);try{const _0x5b4084=await _0x1cefe6['fnGetPromise']();switch(_0x5b4084?.[_0x4a59a1(0x1b9)]||UtilApplications[_0x4a59a1(0x1d8)]){case UtilApplications['TASK_EXIT_CANCELLED']:_0x16d3cb[_0x4a59a1(0x198)](this[_0x4a59a1(0x1eb)](_0x1cefe6[_0x4a59a1(0x205)]));break;case UtilApplications[_0x4a59a1(0x209)]:_0x16d3cb[_0x4a59a1(0x198)](this['_fnGetRowSkippedDuplicateText'](_0x1cefe6['name']));break;case UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']:_0x16d3cb[_0x4a59a1(0x198)](this[_0x4a59a1(0x194)](_0x1cefe6[_0x4a59a1(0x205)]));break;case UtilApplications[_0x4a59a1(0x1d7)]:_0x16d3cb[_0x4a59a1(0x1d6)]('veapp__msg-error\x20bold')[_0x4a59a1(0x1d1)](_0x4a59a1(0x188))[_0x4a59a1(0x198)](this[_0x4a59a1(0x192)](_0x1cefe6['name']));break;case UtilApplications[_0x4a59a1(0x1d8)]:default:_0x16d3cb['text'](this[_0x4a59a1(0x1f1)](_0x1cefe6['name']));break;}}catch(_0x5d47a1){_0x16d3cb[_0x4a59a1(0x1d6)](_0x4a59a1(0x189))[_0x4a59a1(0x1d1)](_0x4a59a1(0x188))[_0x4a59a1(0x198)](this[_0x4a59a1(0x192)](_0x1cefe6['name'])),console[_0x4a59a1(0x1bd)](...LGT,_0x4a59a1(0x1d0)+_0x1cefe6[_0x4a59a1(0x205)]+_0x4a59a1(0x201),_0x5d47a1);}UtilApplications[_0x4a59a1(0x1ec)](this[_0x4a59a1(0x1b5)],(_0x53c4fe+0x1)/_0x116001);}UtilApplications[_0x4a59a1(0x1ec)](this[_0x4a59a1(0x1b5)],0x1);if(this[_0x4a59a1(0x18f)])this[_0x4a59a1(0x1ee)]();else this['_setTitleText'](this[_0x4a59a1(0x1de)]);}catch(_0x1ed344){console[_0x4a59a1(0x1bd)](...LGT,_0x4a59a1(0x19b),_0x1ed344),ui[_0x4a59a1(0x212)][_0x4a59a1(0x1bd)](_0x4a59a1(0x1c3)+VeCt[_0x4a59a1(0x1e7)]);}this['_doSwitchToCloseButton']();}[_0x13563f(0x1d9)](_0x22be79,_0x4ff38c,_0x4f7ad6){const _0x110671=_0x13563f,_0x55cda7=$(_0x110671(0x1a7)+_0x22be79+_0x110671(0x1a0)),_0x4928c6=$$`<div class="mx-1 w-100 split imp__task-row flex-v-center">${_0x55cda7}<div>(${_0x4ff38c}/${_0x4f7ad6})</div></div>`;return{'$msg':_0x55cda7,'$row':_0x4928c6};}[_0x13563f(0x1e3)](){const _0x185a7a=_0x13563f;this[_0x185a7a(0x1c5)]['off'](_0x185a7a(0x217))['text'](_0x185a7a(0x1e2))[_0x185a7a(0x217)](()=>this[_0x185a7a(0x1ee)]());}['_setTitleText'](_0x4e9b23){const _0x171c78=_0x13563f;this[_0x171c78(0x1d4)]['find'](_0x171c78(0x1a3))[_0x171c78(0x198)](_0x4e9b23);}[_0x13563f(0x1cf)](_0x1d4213,_0x3d3589,_0x59b49c,_0x22555c){const _0x35543a=_0x13563f;_0x3d3589=Math['max'](0x0,_0x3d3589);if(_0x59b49c===0x0)_0x59b49c=0x1;const _0x50e352=_0x3d3589/_0x59b49c;if(this[_0x35543a(0x214)]===_0x50e352){this['_$prevMsg'][_0x35543a(0x198)](_0x1d4213);if(_0x22555c)this[_0x35543a(0x1c7)]['addClass']('veapp__msg-error\x20bold')[_0x35543a(0x1d1)](_0x35543a(0x188));this[_0x35543a(0x1e3)]();return;}this[_0x35543a(0x214)]=_0x50e352;const {$msg:_0x4833b7,$row:_0x7b270a}=this['_getRowMeta'](_0x1d4213,_0x3d3589,_0x59b49c);this['_$prevMsg']=_0x4833b7,_0x7b270a[_0x35543a(0x1d2)](this[_0x35543a(0x1c0)]);if(_0x22555c)_0x4833b7[_0x35543a(0x1d6)]('veapp__msg-error\x20bold')[_0x35543a(0x1d1)](_0x35543a(0x188));UtilApplications[_0x35543a(0x1ec)](this[_0x35543a(0x1b5)],_0x3d3589===_0x59b49c?0x1:_0x50e352);if(_0x3d3589===_0x59b49c){if(this['_isForceClose'])this[_0x35543a(0x1ee)]();else this['_setTitleText'](this[_0x35543a(0x1de)]),this[_0x35543a(0x1e3)]();}}[_0x13563f(0x1df)](){return[];}};export{UtilApplications};