const _0x5be4=['_element','TaskRunner','<i\x20class=\x22fas\x20fa-times\x22></i>','sort','<i\x20class=\x22fas\x20','TaskRunner\x20died!','length','Could\x20not\x20display\x20import\x20notificationsâ€”import\x20status\x20was\x20not\x20defined.\x20This\x20is\x20a\x20bug!','\x22></i>','filter','\x22\x20to\x20actor\x20\x22','fnGetRowErrorText','depth','doShowImportedNotification','entity','content','[data-name=\x22wrp-console\x22]','_fnGetRowSkippedDuplicateText','Import\x20of\x20','[name=\x22btn-cancel\x22]','$setBarProgress','<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>','fnGetRowSuccessText','prependTo','imported','TASK_EXIT_FAILED','position','keys','_getHeaderButtons','addClass','<div\x20class=\x22italic\x22>','\x20was\x20cancelled.','Importing\x20','_fnGetRowCancelText','join','Z_INDEX_MAX_FOUNDRY','min','pGetConfirmation','warn','_fnGetRowErrorText','isForceClose','_titleCompelte','click','Close','status','/template/TaskRunner.handlebars','</div>','actor','notifications','name','italic','pDelay','TASK_EXIT_CANCELLED','undefined','round','_maxZ','$pGetAddAppLoadingOverlay','yes','Critical\x20failure!\x20','titleComplete','taskExitCompleteFailed','entities','.window-header\x20.window-title','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','[data-name=\x22disp-progress\x22]','map','fnGetPromise','folder','render','_tasks','taskExitCancelled','ascSort','css','_fnGetRowRunningText','_isCancelled','_$btnCancel','removeClass','find','isAddTrailingSlash','windows','appendTo','reverse','_fnGetRowOverwriteDuplicateText','max','STR_SEE_CONSOLE','text','splice','parent','Import\x20of\x20\x22','TASK_EXIT_COMPLETE','Importing...','_isForceClose','\x22\x20was\x20skipped\x20(duplicate\x20found).','push','Imported\x20','\x22\x20cancelled.','Failed\x20to\x20import\x20','getFolderPath','data','TASK_EXIT_SKIPPED_DUPLICATE','_$dispProgress','Imported\x20\x22','error','fnGetRowSkippedDuplicateText','fnGetRowOverwriteDuplicateText','info','activateListeners','Task\x20\x22','type','\x20folder\x20\x22','_fnGetRowSuccessText','_$wrpConsole','dismissText','collection','taskExitComplete','title','veapp__msg-error\x20bold','pRunTasks','faIcon'];(function(_0x433ec0,_0x5be4ed){const _0x1b1192=function(_0x3b1bab){while(--_0x3b1bab){_0x433ec0['push'](_0x433ec0['shift']());}};_0x1b1192(++_0x5be4ed);}(_0x5be4,0x11c));const _0x1b11=function(_0x433ec0,_0x5be4ed){_0x433ec0=_0x433ec0-0x0;let _0x1b1192=_0x5be4[_0x433ec0];return _0x1b1192;};const _0x590067=_0x1b11;'use strict';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async[_0x590067('0xa')](_0x3b1bab){const _0x1555c6=_0x590067;_0x3b1bab['css'](_0x1555c6('0x63'),'relative');const _0x5b7770=$(_0x1555c6('0x5e'))['focus']()[_0x1555c6('0x22')](_0x3b1bab);return await MiscUtil[_0x1555c6('0x5')](0x5),_0x5b7770;}static[_0x590067('0x6e')](_0x318d72){return _0x318d72=_0x318d72||{},new Promise(_0x207259=>{const _0xa5e668=_0x1b11;new Dialog({'title':_0x318d72[_0xa5e668('0x45')],'content':_0x318d72[_0xa5e668('0x58')],'buttons':{'yes':{'icon':_0xa5e668('0x4d')+_0x318d72[_0xa5e668('0x48')]+_0xa5e668('0x51'),'label':_0x318d72['confirmText'],'callback':()=>_0x207259(!![])},'no':{'icon':_0xa5e668('0x4b'),'label':_0x318d72[_0xa5e668('0x42')]||'Cancel','callback':()=>_0x207259(![])}},'default':_0xa5e668('0xb')})[_0xa5e668('0x16')](!![]);});}static['getCleanEntityName'](_0x3dae8a){return _0x3dae8a||'\x20';}static[_0x590067('0x33')](_0x13b4de,_0x5443c8){const _0x5276d0=_0x590067;_0x5443c8=_0x5443c8||{};if(!_0x13b4de)return null;const _0x58f517=[];if(_0x13b4de[_0x5276d0('0x15')]){_0x58f517['push'](_0x13b4de['folder'][_0x5276d0('0x34')]['name']);let _0x4cf729=_0x13b4de['folder'][_0x5276d0('0x29')];while(_0x4cf729&&_0x4cf729['id']){_0x58f517[_0x5276d0('0x2f')](_0x4cf729[_0x5276d0('0x34')]['name']),_0x4cf729=_0x4cf729[_0x5276d0('0x29')];}}const _0x374d60=_0x58f517['reverse']()[_0x5276d0('0x6b')]('/');if(_0x374d60)return _0x5443c8[_0x5276d0('0x20')]?_0x374d60+'/':_0x374d60;return null;}static[_0x590067('0x5d')](_0x246992,_0x3ccc42){const _0x5eaab9=_0x590067;_0x3ccc42=Math['max'](0x0,Math[_0x5eaab9('0x6d')](_0x3ccc42,0x1)),_0x246992['css']({'width':Math[_0x5eaab9('0x8')](_0x3ccc42*0x64)+'%'});}static async[_0x590067('0x47')](_0x2627f3,_0x41037f){const _0x525599=_0x590067;_0x41037f=_0x41037f||[];const _0x4370ad=new UtilApplications[(_0x525599('0x4a'))](_0x2627f3,_0x41037f);_0x4370ad[_0x525599('0x16')](!![]),await _0x4370ad['pRun']();}static['getFolderList'](_0x380ffe){const _0x679d09=_0x590067,_0x2695bc=(_0x275586,_0x15edea)=>SortUtil[_0x679d09('0x19')](_0x275586[_0x679d09('0x34')][_0x679d09('0x4c')],_0x15edea[_0x679d09('0x34')][_0x679d09('0x4c')]),_0x194b44=Folder[_0x679d09('0x43')][_0x679d09('0xf')]['filter'](_0x487256=>_0x487256['data'][_0x679d09('0x3e')]===_0x380ffe)[_0x679d09('0x4c')](_0x2695bc);if(!_0x194b44[_0x679d09('0x4f')])return _0x194b44;const _0x4dedff=Math[_0x679d09('0x25')](..._0x194b44[_0x679d09('0x13')](_0x1a7c72=>_0x1a7c72['depth'])),_0x594a0a=_0x194b44['filter'](_0x97658c=>_0x97658c['depth']===0x1);if(_0x594a0a['length']===_0x194b44[_0x679d09('0x4f')])return _0x594a0a;for(let _0x40674b=0x2;_0x40674b<_0x4dedff+0x1;++_0x40674b){const _0x4001f1=_0x194b44[_0x679d09('0x52')](_0xab9e72=>_0xab9e72[_0x679d09('0x55')]===_0x40674b)[_0x679d09('0x4c')](_0x2695bc)[_0x679d09('0x23')]();_0x4001f1['forEach'](_0x426316=>{const _0x196aab=_0x679d09,_0x36a856=_0x594a0a['findIndex'](_0x5f2902=>_0x5f2902['id']===_0x426316[_0x196aab('0x29')]['id']);if(~_0x36a856)_0x594a0a[_0x196aab('0x28')](_0x36a856+0x1,0x0,_0x426316);});}return _0x594a0a;}static['bringToFront'](_0x289cb8){const _0x4ec291=_0x590067;if(!_0x289cb8[_0x4ec291('0x49')])return;if(typeof _maxZ===_0x4ec291('0x7'))window[_0x4ec291('0x9')]=0x64;if(Object[_0x4ec291('0x64')](ui[_0x4ec291('0x21')])['length']===0x0)_maxZ=0x64;_0x289cb8[_0x4ec291('0x49')][_0x4ec291('0x1a')]({'zIndex':Math[_0x4ec291('0x6d')](++_maxZ,Consts[_0x4ec291('0x6c')])});}static[_0x590067('0x56')](_0x3e2378){const _0x3f0944=_0x590067;if(!_0x3e2378)return;if(!_0x3e2378[_0x3f0944('0x75')]){_0x3e2378['status']=UtilApplications[_0x3f0944('0x2b')];const _0x1b967c=_0x3f0944('0x50');ui[_0x3f0944('0x2')]['error'](_0x1b967c),console[_0x3f0944('0x38')](new Error(_0x1b967c));}const _0x38a290=_0x3e2378['name']||_0x3e2378[_0x3f0944('0x57')]?.['name']||_0x3e2378[_0x3f0944('0x61')]?.['name']||_0x3e2378[_0x3f0944('0x61')]?.[_0x3f0944('0x34')]?.['name']||'(Unnamed\x20Entity)';if(_0x3e2378[_0x3f0944('0x75')]===UtilApplications['TASK_EXIT_CANCELLED'])return ui[_0x3f0944('0x2')][_0x3f0944('0x6f')](_0x3f0944('0x2a')+_0x38a290+_0x3f0944('0x31'));else{if(_0x3e2378[_0x3f0944('0x75')]===UtilApplications[_0x3f0944('0x35')])return ui[_0x3f0944('0x2')][_0x3f0944('0x6f')]('Import\x20of\x20\x22'+_0x38a290+_0x3f0944('0x2e'));else{if(_0x3e2378[_0x3f0944('0x75')]===UtilApplications[_0x3f0944('0x62')])return ui['notifications'][_0x3f0944('0x38')]('Failed\x20to\x20import\x20\x22'+_0x38a290+'\x22!\x20'+VeCt[_0x3f0944('0x26')]);}}if(_0x3e2378[_0x3f0944('0x61')][_0x3f0944('0x1')])ui[_0x3f0944('0x2')][_0x3f0944('0x3b')](_0x3f0944('0x37')+_0x38a290+_0x3f0944('0x53')+_0x3e2378[_0x3f0944('0x61')][_0x3f0944('0x1')][_0x3f0944('0x3')]+'\x22.');else{const _0x2e8500=_0x3e2378?.[_0x3f0944('0x61')]?.[_0x3f0944('0x15')]?_0x3e2378[_0x3f0944('0x61')]['folder'][_0x3f0944('0x34')][_0x3f0944('0x3e')]:null,_0x3fe492=UtilApplications[_0x3f0944('0x33')](_0x3e2378['imported']);ui[_0x3f0944('0x2')]['info'](_0x3f0944('0x37')+_0x38a290+'\x22'+(_0x2e8500&&_0x3fe492?'\x20to\x20'+_0x2e8500+_0x3f0944('0x3f')+_0x3fe492+'\x22.':''));}}}UtilApplications[_0x590067('0x2b')]=Symbol(_0x590067('0x44')),UtilApplications[_0x590067('0x6')]=Symbol(_0x590067('0x18')),UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE']=Symbol('taskExitSkippedDuplicate'),UtilApplications[_0x590067('0x11')]=Symbol('taskExitCompleteOverwrite'),UtilApplications[_0x590067('0x62')]=Symbol(_0x590067('0xe')),UtilApplications[_0x590067('0x4a')]=class extends Application{constructor(_0x112e71,_0x507d37){const _0x56b660=_0x590067;_0x507d37=_0x507d37||{},super({'title':_0x507d37['titleInitial']||_0x56b660('0x2c'),'width':0x1e0,'template':SharedConsts['MODULE_LOCATION']+_0x56b660('0x76'),'height':0x140,'resizable':!![]}),this[_0x56b660('0x17')]=_0x112e71,this[_0x56b660('0x72')]=_0x507d37[_0x56b660('0xd')]||'Import\x20Complete',this[_0x56b660('0x1b')]=_0x507d37['fnGetRowRunningText']||(_0xbb203=>_0x56b660('0x69')+_0xbb203+'...'),this[_0x56b660('0x40')]=_0x507d37[_0x56b660('0x5f')]||(_0x30239d=>_0x56b660('0x30')+_0x30239d+'.'),this['_fnGetRowErrorText']=_0x507d37[_0x56b660('0x54')]||(_0xc5c02b=>_0x56b660('0x32')+_0xc5c02b+'!\x20'+VeCt[_0x56b660('0x26')]),this[_0x56b660('0x6a')]=_0x507d37['fnGetRowCancelText']||(_0x3e5347=>_0x56b660('0x5b')+_0x3e5347+_0x56b660('0x68')),this[_0x56b660('0x5a')]=_0x507d37[_0x56b660('0x39')]||(_0x1a46fb=>_0x56b660('0x5b')+_0x1a46fb+'\x20was\x20skipped\x20(duplicate\x20found).'),this[_0x56b660('0x24')]=_0x507d37[_0x56b660('0x3a')]||(_0x3e0d19=>_0x56b660('0x30')+_0x3e0d19+',\x20overwriting\x20existing\x20(duplicate\x20found).'),this[_0x56b660('0x2d')]=!!_0x507d37[_0x56b660('0x71')],this[_0x56b660('0x1c')]=![],this['_$dispProgress']=null,this['_$wrpConsole']=null,this[_0x56b660('0x1d')]=null;}[_0x590067('0x3c')](_0x1b2266){const _0x110b4e=_0x590067;super[_0x110b4e('0x3c')](_0x1b2266),this[_0x110b4e('0x36')]=_0x1b2266['find'](_0x110b4e('0x12')),this[_0x110b4e('0x41')]=_0x1b2266[_0x110b4e('0x1f')](_0x110b4e('0x59')),this['_$btnCancel']=_0x1b2266[_0x110b4e('0x1f')](_0x110b4e('0x5c'))[_0x110b4e('0x73')](()=>this[_0x110b4e('0x1c')]=!![]);}async['pRun'](){const _0x5bd0c8=_0x590067;while(this[_0x5bd0c8('0x1d')]==null)await MiscUtil['pDelay'](0x19);try{const _0x817d44=this[_0x5bd0c8('0x17')]['length'];for(let _0xb3014=0x0;_0xb3014<_0x817d44;++_0xb3014){const _0x57c6ba=this[_0x5bd0c8('0x17')][_0xb3014];if(this[_0x5bd0c8('0x1c')])break;const _0xe73651=$(_0x5bd0c8('0x67')+this[_0x5bd0c8('0x1b')](_0x57c6ba[_0x5bd0c8('0x3')])+_0x5bd0c8('0x0'));$$`<div class="mx-1 row split imp__task-row flex-v-center">${_0xe73651}<div>(${_0xb3014+0x1}/${_0x817d44})</div></div>`[_0x5bd0c8('0x60')](this[_0x5bd0c8('0x41')]);try{const _0x4968fa=await _0x57c6ba[_0x5bd0c8('0x14')]();switch(_0x4968fa?.[_0x5bd0c8('0x75')]||UtilApplications[_0x5bd0c8('0x2b')]){case UtilApplications['TASK_EXIT_CANCELLED']:_0xe73651['text'](this[_0x5bd0c8('0x6a')](_0x57c6ba['name']));break;case UtilApplications[_0x5bd0c8('0x35')]:_0xe73651[_0x5bd0c8('0x27')](this[_0x5bd0c8('0x5a')](_0x57c6ba[_0x5bd0c8('0x3')]));break;case UtilApplications[_0x5bd0c8('0x11')]:_0xe73651[_0x5bd0c8('0x27')](this[_0x5bd0c8('0x24')](_0x57c6ba[_0x5bd0c8('0x3')]));break;case UtilApplications['TASK_EXIT_FAILED']:_0xe73651[_0x5bd0c8('0x66')](_0x5bd0c8('0x46'))[_0x5bd0c8('0x1e')](_0x5bd0c8('0x4'))[_0x5bd0c8('0x27')](this[_0x5bd0c8('0x70')](_0x57c6ba[_0x5bd0c8('0x3')]));break;case UtilApplications[_0x5bd0c8('0x2b')]:default:_0xe73651[_0x5bd0c8('0x27')](this['_fnGetRowSuccessText'](_0x57c6ba[_0x5bd0c8('0x3')]));break;}}catch(_0x48406a){_0xe73651['addClass'](_0x5bd0c8('0x46'))[_0x5bd0c8('0x1e')](_0x5bd0c8('0x4'))[_0x5bd0c8('0x27')](this[_0x5bd0c8('0x70')](_0x57c6ba[_0x5bd0c8('0x3')])),console['error'](...LGT,_0x5bd0c8('0x3d')+_0x57c6ba[_0x5bd0c8('0x3')]+'\x22\x20failed',_0x48406a);}UtilApplications[_0x5bd0c8('0x5d')](this[_0x5bd0c8('0x36')],(_0xb3014+0x1)/_0x817d44);}UtilApplications[_0x5bd0c8('0x5d')](this[_0x5bd0c8('0x36')],0x1);if(this[_0x5bd0c8('0x2d')])this['close']();else this['element'][_0x5bd0c8('0x1f')](_0x5bd0c8('0x10'))[_0x5bd0c8('0x27')](this[_0x5bd0c8('0x72')]);}catch(_0x5d220d){console[_0x5bd0c8('0x38')](...LGT,_0x5bd0c8('0x4e'),_0x5d220d),ui['notifications'][_0x5bd0c8('0x38')](_0x5bd0c8('0xc')+VeCt[_0x5bd0c8('0x26')]);}this['_$btnCancel']['off'](_0x5bd0c8('0x73'))[_0x5bd0c8('0x27')](_0x5bd0c8('0x74'))[_0x5bd0c8('0x73')](()=>this['close']());}[_0x590067('0x65')](){return[];}};export{UtilApplications};