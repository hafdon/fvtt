const _0x23c8=['push','.window-header\x20.window-title','prependTo','<i\x20class=\x22fas\x20','\x22!\x20','fnGetRowSuccessText','_fnGetRowSuccessText','doShowImportedNotificationFailure','imp__msg-error','entity','...','windows','activateListeners','titleComplete','_isForceClose','\x20to\x20','position','Z_INDEX_MAX_FOUNDRY','length','isAddTrailingSlash','_getHeaderButtons','_isCancelled','info','join','Critical\x20failure!\x20','Close','text','notifications','STR_SEE_CONSOLE','sort','(Unnamed\x20entity)','[data-name=\x22wrp-console\x22]','\x22></i>','_titleCompelte','faIcon','addClass','get','close','getCleanEntityName','_fnGetRowErrorText','data','off','max','$setBarProgress','Cancel','<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>','TaskRunner','</div>','find','pGetConfirmation','name','_element','removeClass','filter','fnGetRowRunningText','Importing...','relative','depth','Failed\x20to\x20import\x20','italic','<i\x20class=\x22fas\x20fa-times\x22></i>','dismissText','doShowImportedNotificationSuccess','element','error','undefined','Import\x20Complete','css','/template/TaskRunner.handlebars','MODULE_LOCATION','getFolderList','fnGetPromise','fnGetRowErrorText','Task\x20\x22','content','getFolderPath','parent','_$dispProgress','pRunTasks','_$wrpConsole','click','_tasks','_$btnCancel','\x22\x20to\x20actor\x20\x22','reverse','ascSort','pRun','isForceClose','type','Failed\x20to\x20import\x20\x22','_fnGetRowRunningText','folder','Imported\x20\x22','focus','[name=\x22btn-cancel\x22]','actor','splice'];(function(_0x2874fa,_0x23c8fa){const _0x1617c2=function(_0x432d1a){while(--_0x432d1a){_0x2874fa['push'](_0x2874fa['shift']());}};_0x1617c2(++_0x23c8fa);}(_0x23c8,0x10e));const _0x1617=function(_0x2874fa,_0x23c8fa){_0x2874fa=_0x2874fa-0x0;let _0x1617c2=_0x23c8[_0x2874fa];return _0x1617c2;};'use strict';import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async['$pGetAddAppLoadingOverlay'](_0x4dc3cf){_0x4dc3cf[_0x1617('0x58')](_0x1617('0x25'),_0x1617('0x4d'));const _0x3a03b4=$(_0x1617('0x42'))[_0x1617('0x11')]()['appendTo'](_0x4dc3cf);return await MiscUtil['pDelay'](0x5),_0x3a03b4;}static[_0x1617('0x46')](_0x5e917b){return _0x5e917b=_0x5e917b||{},new Promise(_0x1f8cae=>{new Dialog({'title':_0x5e917b['title'],'content':_0x5e917b[_0x1617('0x5f')],'buttons':{'yes':{'icon':_0x1617('0x18')+_0x5e917b[_0x1617('0x37')]+_0x1617('0x35'),'label':_0x5e917b['confirmText'],'callback':()=>_0x1f8cae(!![])},'no':{'icon':_0x1617('0x51'),'label':_0x5e917b[_0x1617('0x52')]||_0x1617('0x41'),'callback':()=>_0x1f8cae(![])}},'default':'yes'})['render'](!![]);});}static[_0x1617('0x3b')](_0x8ea199){return _0x8ea199||'\x20';}static[_0x1617('0x60')](_0x47709c,_0x52d3b7){_0x52d3b7=_0x52d3b7||{};const _0x1fdaa1=[];if(_0x47709c['folder']){_0x1fdaa1[_0x1617('0x15')](_0x47709c[_0x1617('0xf')][_0x1617('0x3d')][_0x1617('0x47')]);let _0x22de37=_0x47709c[_0x1617('0xf')][_0x1617('0x0')];while(_0x22de37&&_0x22de37['id']){_0x1fdaa1[_0x1617('0x15')](_0x22de37[_0x1617('0x3d')][_0x1617('0x47')]),_0x22de37=_0x22de37[_0x1617('0x0')];}}const _0x529518=_0x1fdaa1[_0x1617('0x8')]()[_0x1617('0x2c')]('/');if(_0x529518)return _0x52d3b7[_0x1617('0x28')]?_0x529518+'/':_0x529518;return null;}static[_0x1617('0x40')](_0x3374f0,_0x4863bb){_0x4863bb=Math[_0x1617('0x3f')](0x0,Math['min'](_0x4863bb,0x1)),_0x3374f0['css']({'width':Math['round'](_0x4863bb*0x64)+'%'});}static async[_0x1617('0x2')](_0x4ccdbc,_0xf1f8d4){_0xf1f8d4=_0xf1f8d4||[];const _0x591aca=new UtilApplications['TaskRunner'](_0x4ccdbc,_0xf1f8d4);_0x591aca['render'](!![]),await _0x591aca['pRun']();}static[_0x1617('0x5b')](_0x415a72){const _0x560bab=(_0x1deb1a,_0x1602d7)=>SortUtil[_0x1617('0x9')](_0x1deb1a[_0x1617('0x3d')][_0x1617('0x32')],_0x1602d7['data'][_0x1617('0x32')]),_0x4e06c2=Folder['collection']['entities']['filter'](_0x204a17=>_0x204a17[_0x1617('0x3d')][_0x1617('0xc')]===_0x415a72)[_0x1617('0x32')](_0x560bab);if(!_0x4e06c2[_0x1617('0x27')])return _0x4e06c2;const _0x4eb2e1=Math['max'](..._0x4e06c2['map'](_0x59718b=>_0x59718b[_0x1617('0x4e')])),_0x31c417=_0x4e06c2[_0x1617('0x4a')](_0x147509=>_0x147509[_0x1617('0x4e')]===0x1);if(_0x31c417[_0x1617('0x27')]===_0x4e06c2[_0x1617('0x27')])return _0x31c417;for(let _0xe8bc42=0x2;_0xe8bc42<_0x4eb2e1+0x1;++_0xe8bc42){const _0x227234=_0x4e06c2[_0x1617('0x4a')](_0x13584b=>_0x13584b[_0x1617('0x4e')]===_0xe8bc42)[_0x1617('0x32')](_0x560bab)['reverse']();_0x227234['forEach'](_0xa89254=>{const _0x256451=_0x31c417['findIndex'](_0xa07a5e=>_0xa07a5e['id']===_0xa89254[_0x1617('0x0')]['id']);if(~_0x256451)_0x31c417[_0x1617('0x14')](_0x256451+0x1,0x0,_0xa89254);});}return _0x31c417;}static['bringToFront'](_0x4518d4){if(!_0x4518d4['_element'])return;if(typeof _maxZ===_0x1617('0x56'))window['_maxZ']=0x64;if(Object['keys'](ui[_0x1617('0x20')])[_0x1617('0x27')]===0x0)_maxZ=0x64;_0x4518d4[_0x1617('0x48')]['css']({'zIndex':Math['min'](++_maxZ,Consts[_0x1617('0x26')])});}static[_0x1617('0x53')](_0x4e6997){if(_0x4e6997[_0x1617('0x13')])ui[_0x1617('0x30')][_0x1617('0x2b')](_0x1617('0x10')+(_0x4e6997[_0x1617('0x47')]||_0x1617('0x33'))+_0x1617('0x7')+_0x4e6997['actor'][_0x1617('0x47')]+'\x22.');else{const _0x29d4ad=_0x4e6997[_0x1617('0xf')]?_0x4e6997[_0x1617('0xf')][_0x1617('0x3d')]['type']:null,_0x1b90a3=UtilApplications['getFolderPath'](_0x4e6997);ui[_0x1617('0x30')][_0x1617('0x2b')](_0x1617('0x10')+(_0x4e6997[_0x1617('0x47')]||_0x4e6997[_0x1617('0x3d')][_0x1617('0x47')]||'(Unnamed\x20entity)')+'\x22'+(_0x29d4ad&&_0x1b90a3?_0x1617('0x24')+_0x29d4ad+'\x20folder\x20\x22'+_0x1b90a3+'\x22.':''));}}static[_0x1617('0x1c')](_0xf69043){const _0x1f3ebb=MiscUtil[_0x1617('0x39')](_0xf69043,_0x1617('0x1e'),_0x1617('0x47'))||MiscUtil[_0x1617('0x39')](_0xf69043,_0x1617('0x47'))||_0x1617('0x33');ui[_0x1617('0x30')][_0x1617('0x55')](_0x1617('0xd')+_0x1f3ebb+_0x1617('0x19')+VeCt['STR_SEE_CONSOLE']);}}UtilApplications[_0x1617('0x43')]=class extends Application{constructor(_0x2d2897,_0x1e80ac){_0x1e80ac=_0x1e80ac||{},super({'title':_0x1e80ac['titleInitial']||_0x1617('0x4c'),'width':0x1e0,'template':SharedConsts[_0x1617('0x5a')]+_0x1617('0x59'),'height':0x140,'resizable':!![]}),this[_0x1617('0x5')]=_0x2d2897,this['_titleCompelte']=_0x1e80ac[_0x1617('0x22')]||_0x1617('0x57'),this[_0x1617('0xe')]=_0x1e80ac[_0x1617('0x4b')]||(_0x3d3be0=>'Importing\x20'+_0x3d3be0+_0x1617('0x1f')),this['_fnGetRowSuccessText']=_0x1e80ac[_0x1617('0x1a')]||(_0x59eb31=>'Imported\x20'+_0x59eb31+'.'),this[_0x1617('0x3c')]=_0x1e80ac[_0x1617('0x5d')]||(_0x40febe=>_0x1617('0x4f')+_0x40febe+'!\x20'+VeCt['STR_SEE_CONSOLE']),this[_0x1617('0x23')]=!!_0x1e80ac[_0x1617('0xb')],this[_0x1617('0x2a')]=![],this[_0x1617('0x1')]=null,this['_$wrpConsole']=null,this[_0x1617('0x6')]=null;}['activateListeners'](_0x357d42){super[_0x1617('0x21')](_0x357d42),this['_$dispProgress']=_0x357d42[_0x1617('0x45')]('[data-name=\x22disp-progress\x22]'),this[_0x1617('0x3')]=_0x357d42[_0x1617('0x45')](_0x1617('0x34')),this[_0x1617('0x6')]=_0x357d42[_0x1617('0x45')](_0x1617('0x12'))['click'](()=>this[_0x1617('0x2a')]=!![]);}async[_0x1617('0xa')](){while(this[_0x1617('0x6')]==null)await MiscUtil['pDelay'](0x19);try{const _0x4aae9a=this['_tasks'][_0x1617('0x27')];for(let _0x2cbcfe=0x0;_0x2cbcfe<_0x4aae9a;++_0x2cbcfe){const _0x510448=this[_0x1617('0x5')][_0x2cbcfe];if(this[_0x1617('0x2a')])break;const _0x3eafb2=$('<div\x20class=\x22italic\x22>'+this[_0x1617('0xe')](_0x510448['name'])+_0x1617('0x44'));$$`<div class="mx-1 row split imp__task-row flex-v-center">${_0x3eafb2}<div>(${_0x2cbcfe+0x1}/${_0x4aae9a})</div></div>`[_0x1617('0x17')](this[_0x1617('0x3')]);try{await _0x510448[_0x1617('0x5c')](),_0x3eafb2[_0x1617('0x2f')](this[_0x1617('0x1b')](_0x510448['name']));}catch(_0x4a8603){_0x3eafb2[_0x1617('0x38')](_0x1617('0x1d'))[_0x1617('0x38')]('bold')[_0x1617('0x49')](_0x1617('0x50'))[_0x1617('0x2f')](this['_fnGetRowErrorText'](_0x510448[_0x1617('0x47')])),console[_0x1617('0x55')](...LGT,_0x1617('0x5e')+_0x510448[_0x1617('0x47')]+'\x22\x20failed',_0x4a8603);}UtilApplications[_0x1617('0x40')](this[_0x1617('0x1')],(_0x2cbcfe+0x1)/_0x4aae9a);}UtilApplications['$setBarProgress'](this['_$dispProgress'],0x1);if(this[_0x1617('0x23')])this[_0x1617('0x3a')]();else this[_0x1617('0x54')][_0x1617('0x45')](_0x1617('0x16'))['text'](this[_0x1617('0x36')]);}catch(_0x44421a){console[_0x1617('0x55')](...LGT,'TaskRunner\x20died!',_0x44421a),ui[_0x1617('0x30')]['error'](_0x1617('0x2d')+VeCt[_0x1617('0x31')]);}this['_$btnCancel'][_0x1617('0x3e')](_0x1617('0x4'))[_0x1617('0x2f')](_0x1617('0x2e'))[_0x1617('0x4')](()=>this[_0x1617('0x3a')]());}[_0x1617('0x29')](){return[];}};export{UtilApplications};