'use strict';const _0x14ae=['pMutActorUpdate','/media/icon/laurels.svg','56imOMqe','pGetClassSubclassFeatureItem','permissions','subclass','_FEATURE_SRD_ASLIAS_WITH_CLASSNAME','importClass','_getCntSkills','getDataHitDice','_getFeatureSrdAliases','skills','casterProgression','permission','getSrdCompendiumEntity','_pGetClassSubclassFeatureItem_other','isCancelled','source','find','foundrySubclassFeature','homebrew','getItemActorPassive','pGetClassItem','getCleanEntityName','className','subclassShortName','faces','classFeature','70963ROYmwB','subclassSource','pGetSideData','mystic\x20arcanum','pGetClassSubclassFeatureAdditionalData','_pGetClassSubclassFeatureItem_fromSrd','toLowerCase','th-Level\x20Spell)','pGetCompendiumImage','getCleanOriginalData','pPreloadSideData','{@note\x20Note:\x20importing\x20a\x20class\x20as\x20an\x20item\x20is\x20provided\x20for\x20display\x20purposes\x20only.\x20If\x20you\x20wish\x20to\x20import\x20a\x20class\x20to\x20a\x20character\x20sheet,\x20please\x20use\x20the\x20importer\x20on\x20the\x20sheet\x20instead.}','<p>','channel\x20divinity:','MODULE_NAME','_getDoNotUseNote','pMutActorUpdateClassSubclassFeatureItem','</p>','startsWith','<div>','subclassFeature','39zwoqTV','1498553QEGaMf','8shmwxx','section','trim','name','expertise','getNameWithSourcePart','getSourceWithPagePart','isAddPermission','class','flat','type','pGetDereferencedSubclassData','push','38428NUAZUQ','feat','480928YQNrzt','1760787oMdbPW','replace','timeless\x20body','URL_TO_HASH_BUILDER','pGetSubclassItem','render','reduce','channel\x20divinity','startingProficiencies','map','copy','_SIDE_DATA','filterValues','1gHEEGH','Cleric','Unhandled\x20type\x20\x22','_pGetClassSubclassFeatureItem_pGetImagePath','/media/icon/mighty-force.svg','getMappedCasterType','level','383939RpvKUS','get','classSource','14746EdBlxH','modules/','</div>','land\x27s\x20stride','setFirstSection','pGetDereferencedClassData','subclassFeatures'];const _0x477d=function(_0x861a80,_0xa92612){_0x861a80=_0x861a80-0xb9;let _0x14ae0b=_0x14ae[_0x861a80];return _0x14ae0b;};const _0xf33e65=_0x477d;(function(_0x579bf5,_0x2244fd){const _0x258485=_0x477d;while(!![]){try{const _0x48053e=-parseInt(_0x258485(0x119))+-parseInt(_0x258485(0xd0))*parseInt(_0x258485(0xd9))+parseInt(_0x258485(0x108))*parseInt(_0x258485(0x117))+parseInt(_0x258485(0xcd))+parseInt(_0x258485(0xb9))*-parseInt(_0x258485(0xc6))+parseInt(_0x258485(0x109))+-parseInt(_0x258485(0xf3))*-parseInt(_0x258485(0x10a));if(_0x48053e===_0x2244fd)break;else _0x579bf5['push'](_0x579bf5['shift']());}catch(_0x1cb0e6){_0x579bf5['push'](_0x579bf5['shift']());}}}(_0x14ae,0xd72f5));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';class DataConverterClass{static[_0xf33e65(0x102)](){const _0x53fae0=_0xf33e65;return _0x53fae0(0xff)+Renderer['get']()[_0x53fae0(0xbe)](_0x53fae0(0xfe))+_0x53fae0(0x104);}static[_0xf33e65(0xdf)](_0x598f26){const _0x3cbf02=_0xf33e65;return(MiscUtil[_0x3cbf02(0xce)](_0x598f26,_0x3cbf02(0xc1),_0x3cbf02(0xe2))||[])[_0x3cbf02(0xc2)](_0x2bfd26=>MiscUtil['get'](_0x2bfd26['choose'],'count')||0x0)[_0x3cbf02(0xbf)]((_0x4f9a32,_0x4f5b8f)=>_0x4f9a32+_0x4f5b8f,0x0);}static[_0xf33e65(0xe0)](_0x241ff5){const _0x306d0d=_0xf33e65;return'd'+((_0x241ff5['hd']||{})[_0x306d0d(0xf1)]||0x6);}static async[_0xf33e65(0xed)](_0x1d467b,_0x2ca177){const _0x48b91c=_0xf33e65;_0x2ca177=_0x2ca177||{};const _0x365da9=DataConverter['getCleanOriginalData'](_0x1d467b);_0x1d467b=MiscUtil[_0x48b91c(0xc3)](_0x1d467b),_0x1d467b=await DataUtil['class'][_0x48b91c(0xd5)](_0x1d467b);const _0x267739=Renderer[_0x48b91c(0xce)]()[_0x48b91c(0xd4)](!![])[_0x48b91c(0xbe)]({'type':'section','entries':_0x1d467b['classFeatures'][_0x48b91c(0x113)]()}),_0x211024=await DataConverter[_0x48b91c(0xfb)](_0x48b91c(0x112),_0x1d467b)||_0x48b91c(0xd1)+SharedConsts['MODULE_NAME']+_0x48b91c(0xd8),_0x3a33c4={'name':UtilApplications[_0x48b91c(0xee)](DataConverter[_0x48b91c(0x10f)](_0x1d467b)),'type':_0x48b91c(0x112),'data':{'description':{'value':Config['get'](_0x48b91c(0xde),'isImportDescription')?_0x48b91c(0x106)+this['_getDoNotUseNote']()+_0x267739+_0x48b91c(0xd2):'','chat':'','unidentified':''},'source':DataConverter[_0x48b91c(0x110)](_0x1d467b),'levels':0x14,'subclass':'','damage':{'parts':[]},'hitDice':DataConverterClass['getDataHitDice'](_0x1d467b),'hitDiceUsed':0x0,'skills':{'number':this[_0x48b91c(0xdf)](_0x1d467b)},'spellcasting':UtilActors['getMappedCasterType'](_0x1d467b['casterProgression'])},'flags':{[SharedConsts[_0x48b91c(0x101)]]:{'page':UrlUtil['PG_CLASSES'],'source':_0x1d467b[_0x48b91c(0xe8)],'hash':UrlUtil[_0x48b91c(0xbc)][UrlUtil['PG_CLASSES']](_0x1d467b),'data':{'class':_0x365da9},'filterValues':_0x2ca177[_0x48b91c(0xc5)]}},'effects':[],'img':_0x211024};if(_0x2ca177['isAddPermission'])_0x3a33c4['permission']={'default':Config[_0x48b91c(0xce)](_0x48b91c(0xde),'permissions')};return _0x3a33c4;}static async[_0xf33e65(0xbd)](_0x14c9ed,_0x48f2da,_0x23ab3a){const _0x5d2e5f=_0xf33e65;_0x23ab3a=_0x23ab3a||{};const _0x32cd68=DataConverter[_0x5d2e5f(0xfc)](_0x14c9ed),_0x5c3410=DataConverter[_0x5d2e5f(0xfc)](_0x48f2da);_0x48f2da=MiscUtil['copy'](_0x48f2da),_0x48f2da=await DataUtil[_0x5d2e5f(0x112)][_0x5d2e5f(0x115)](_0x48f2da);const _0x38aeb5=Renderer['get']()[_0x5d2e5f(0xd4)](!![])['render']({'type':_0x5d2e5f(0x10b),'entries':_0x48f2da[_0x5d2e5f(0xd6)]['flat']()}),_0x5c5a46=await DataConverter[_0x5d2e5f(0xfb)](_0x5d2e5f(0x112),_0x14c9ed)||_0x5d2e5f(0xd1)+SharedConsts[_0x5d2e5f(0x101)]+_0x5d2e5f(0xd8);_0x48f2da[_0x5d2e5f(0xe8)]=_0x48f2da['source']||_0x14c9ed[_0x5d2e5f(0xe8)];const _0x505877={'name':UtilApplications[_0x5d2e5f(0xee)](DataConverter[_0x5d2e5f(0x10f)](_0x14c9ed,_0x48f2da['name']+'\x20'+_0x14c9ed[_0x5d2e5f(0x10d)])),'type':_0x5d2e5f(0x112),'data':{'description':{'value':Config[_0x5d2e5f(0xce)](_0x5d2e5f(0xde),'isImportDescription')?_0x5d2e5f(0x106)+this[_0x5d2e5f(0x102)]()+_0x38aeb5+_0x5d2e5f(0xd2):'','chat':'','unidentified':''},'source':DataConverter[_0x5d2e5f(0x110)](_0x48f2da),'levels':0x14,'subclass':_0x48f2da['name'],'damage':{'parts':[]},'hitDice':DataConverterClass[_0x5d2e5f(0xe0)](_0x14c9ed),'hitDiceUsed':0x0,'skills':{'number':this[_0x5d2e5f(0xdf)](_0x14c9ed)},'spellcasting':UtilActors[_0x5d2e5f(0xcb)](_0x14c9ed[_0x5d2e5f(0xe3)])},'flags':{[SharedConsts[_0x5d2e5f(0x101)]]:{'page':'subclass','source':_0x48f2da[_0x5d2e5f(0xe8)],'hash':UrlUtil[_0x5d2e5f(0xbc)][_0x5d2e5f(0xdc)](_0x48f2da),'data':{'class':_0x32cd68,'subclass':_0x5c3410},'filterValues':_0x23ab3a['filterValues']}},'effects':[],'img':_0x5c5a46};if(_0x23ab3a[_0x5d2e5f(0x111)])_0x505877[_0x5d2e5f(0xe4)]={'default':Config[_0x5d2e5f(0xce)](_0x5d2e5f(0xde),_0x5d2e5f(0xdb))};return _0x505877;}static async[_0xf33e65(0xda)](_0x41b261,_0x5a1260){const {entity:_0x234942,type:_0x192205}=_0x41b261;let _0x402275;return await this['_pIsInSrd'](_0x234942,_0x192205)?_0x402275=this['_pGetClassSubclassFeatureItem_fromSrd'](_0x234942,_0x192205):_0x402275=this['_pGetClassSubclassFeatureItem_other'](_0x234942,_0x192205,_0x5a1260),_0x402275;}static async['_pIsInSrd'](_0x384cc0,_0x200e41){const _0x4b2b12=_0xf33e65,_0x49950b=await DataConverter[_0x4b2b12(0xe5)](_0x200e41,_0x384cc0,{'fnGetAliases':this[_0x4b2b12(0xe1)]});return!!_0x49950b;}static async[_0xf33e65(0xf8)](_0x462606,_0x403c1d){const _0x446256=_0xf33e65,_0x89cf4b=await DataConverter[_0x446256(0xe5)](_0x403c1d,_0x462606,{'fnGetAliases':this[_0x446256(0xe1)]});return{'name':UtilApplications[_0x446256(0xee)](DataConverter[_0x446256(0x10f)](_0x462606)),'type':_0x89cf4b[_0x446256(0x114)],'data':{..._0x89cf4b['data'],'source':DataConverter['getSourceWithPagePart'](_0x462606),'description':{'value':DataConverter['getEntryDescription'](_0x462606),'chat':'','unidentified':''},..._0x462606['foundryAdditionalData']||{}},'img':await this['_pGetClassSubclassFeatureItem_pGetImagePath'](_0x462606,_0x403c1d)};}static async[_0xf33e65(0xe6)](_0x39592b,_0x1ede17,_0x8a2431){const _0x2939bc=_0xf33e65;return DataConverter[_0x2939bc(0xec)](_0x39592b,{'mode':'player','modeOptions':{'isChannelDivinity':_0x39592b[_0x2939bc(0xef)]===_0x2939bc(0xc7)&&_0x39592b[_0x2939bc(0x10d)][_0x2939bc(0xf9)]()[_0x2939bc(0x105)](_0x2939bc(0x100))},'renderDepth':0x0,'fvttType':_0x2939bc(0x118),'img':await this[_0x2939bc(0xc9)](_0x39592b,_0x1ede17),'source':DataConverter['getSourceWithPagePart'](_0x39592b),'requirements':_0x39592b['className']+'\x20'+_0x39592b[_0x2939bc(0xcc)]+(_0x39592b[_0x2939bc(0xf0)]?'\x20('+_0x39592b[_0x2939bc(0xf0)]+')':''),'additionalData':_0x39592b['foundryAdditionalData'],'actor':_0x8a2431});}static async[_0xf33e65(0x103)](_0x4d5d1f,_0x1781a7,_0x70f19,_0x3a553d){const _0x3f9823=_0xf33e65,{entity:_0x4e4c39,type:_0x157387}=_0x70f19,_0x3a754d=await this['pGetSideData'](_0x4e4c39,_0x157387),_0x243da9={'sideData':_0x3a754d,'isCancelled':![]};await DataConverter[_0x3f9823(0xd7)](_0x4d5d1f,_0x1781a7,_0x70f19['entity'],_0x243da9);if(_0x243da9['isCancelled'])_0x3a553d[_0x3f9823(0xe7)]=!![];}static async[_0xf33e65(0xfd)](){const _0x2e9155=_0xf33e65;DataConverterClass['_SIDE_DATA']=await Vetools[_0x2e9155(0xf7)]();}static async[_0xf33e65(0xf5)](_0x546b1f,_0x5532fd){const _0x1af241=_0xf33e65;switch(_0x5532fd){case'classFeature':{let _0x544c9e=(MiscUtil[_0x1af241(0xce)](BrewUtil,_0x1af241(0xeb),'foundryClassFeature')||[])[_0x1af241(0xe9)](_0x39f5fb=>_0x39f5fb[_0x1af241(0x10d)]===_0x546b1f[_0x1af241(0x10d)]&&_0x39f5fb['source']===_0x546b1f[_0x1af241(0xe8)]&&_0x39f5fb['className']===_0x546b1f[_0x1af241(0xef)]&&_0x39f5fb[_0x1af241(0xcf)]===_0x546b1f[_0x1af241(0xcf)]&&_0x39f5fb[_0x1af241(0xcc)]===_0x546b1f['level']);if(!_0x544c9e){const _0x1ea798=DataConverterClass[_0x1af241(0xc4)]||await Vetools[_0x1af241(0xf7)]();_0x544c9e=_0x1ea798[_0x1af241(0xf2)]['find'](_0x45d551=>_0x45d551[_0x1af241(0x10d)]===_0x546b1f[_0x1af241(0x10d)]&&_0x45d551[_0x1af241(0xe8)]===_0x546b1f[_0x1af241(0xe8)]&&_0x45d551[_0x1af241(0xef)]===_0x546b1f[_0x1af241(0xef)]&&_0x45d551[_0x1af241(0xcf)]===_0x546b1f[_0x1af241(0xcf)]&&_0x45d551['level']===_0x546b1f[_0x1af241(0xcc)]);}if(!_0x544c9e)return null;return _0x544c9e;}case _0x1af241(0x107):{let _0x4d68bf=(MiscUtil[_0x1af241(0xce)](BrewUtil,_0x1af241(0xeb),_0x1af241(0xea))||[])[_0x1af241(0xe9)](_0x436129=>_0x436129[_0x1af241(0x10d)]===_0x546b1f['name']&&_0x436129['source']===_0x546b1f[_0x1af241(0xe8)]&&_0x436129['className']===_0x546b1f['className']&&_0x436129['classSource']===_0x546b1f[_0x1af241(0xcf)]&&_0x436129[_0x1af241(0xf0)]===_0x546b1f['subclassShortName']&&_0x436129[_0x1af241(0xf4)]===_0x546b1f['subclassSource']&&_0x436129[_0x1af241(0xcc)]===_0x546b1f[_0x1af241(0xcc)]);if(!_0x4d68bf){const _0x441687=DataConverterClass[_0x1af241(0xc4)]||await Vetools[_0x1af241(0xf7)]();_0x4d68bf=_0x441687['subclassFeature']['find'](_0x229ca0=>_0x229ca0[_0x1af241(0x10d)]===_0x546b1f['name']&&_0x229ca0[_0x1af241(0xe8)]===_0x546b1f['source']&&_0x229ca0[_0x1af241(0xef)]===_0x546b1f[_0x1af241(0xef)]&&_0x229ca0[_0x1af241(0xcf)]===_0x546b1f[_0x1af241(0xcf)]&&_0x229ca0[_0x1af241(0xf0)]===_0x546b1f['subclassShortName']&&_0x229ca0[_0x1af241(0xf4)]===_0x546b1f['subclassSource']&&_0x229ca0[_0x1af241(0xcc)]===_0x546b1f[_0x1af241(0xcc)]);}if(!_0x4d68bf)return null;return _0x4d68bf;}default:throw new Error(_0x1af241(0xc8)+_0x5532fd+'\x22');}}static['_getFeatureSrdAliases'](_0x30d078){const _0x4c8c9e=_0xf33e65;if(!_0x30d078['name'])return[];const _0x430ea4=[],_0x15c98f=_0x30d078['name'][_0x4c8c9e(0xba)](/\([^)]+\)/g,'')[_0x4c8c9e(0xba)](/\s+/g,'\x20')['trim']();if(_0x15c98f!==_0x30d078['name'])_0x430ea4[_0x4c8c9e(0x116)](_0x15c98f);const _0x3ac8b3=_0x30d078[_0x4c8c9e(0x10d)][_0x4c8c9e(0xf9)]()[_0x4c8c9e(0x10c)]();return DataConverterClass[_0x4c8c9e(0xdd)]['has'](_0x3ac8b3)&&_0x430ea4[_0x4c8c9e(0x116)](_0x30d078[_0x4c8c9e(0x10d)]+'\x20('+_0x30d078[_0x4c8c9e(0xef)]+')'),_0x3ac8b3['startsWith'](_0x4c8c9e(0xf6))&&_0x430ea4[_0x4c8c9e(0x116)](_0x15c98f+'\x20('+((_0x30d078[_0x4c8c9e(0xcc)]-0x9)/0x2+0x5)+_0x4c8c9e(0xfa)),_0x430ea4;}static async['_pGetClassSubclassFeatureItem_pGetImagePath'](_0x53082d,_0x55dfdf){const _0x455938=_0xf33e65,_0x5649f9=await DataConverter[_0x455938(0xfb)](_0x55dfdf,_0x53082d,{'fnGetAliases':this[_0x455938(0xe1)]});if(_0x5649f9)return _0x5649f9;return _0x455938(0xd1)+SharedConsts[_0x455938(0x101)]+_0x455938(0xca);}}DataConverterClass[_0xf33e65(0xc4)]=null,DataConverterClass['_FEATURE_SRD_ASLIAS_WITH_CLASSNAME']=new Set(['unarmored\x20defense',_0xf33e65(0xc0),_0xf33e65(0x10e),_0xf33e65(0xd3),_0xf33e65(0xbb)]);export{DataConverterClass};