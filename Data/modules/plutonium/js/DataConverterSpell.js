const _0x4ec3=['1AKGepX','components','page','data','pGetSpellAdditionalData','importSpell','1862791tquCXN','name','some','round','spell','createEmbeddedEntity','spec','PG_SPELLS','/media/icon/scroll-unfurled.svg','isIgnoreExisting','timed','4651difkSs','turn','doHookSpellLinkRender','save','getActorSpell','_id','isExpanded','getNameWithSourcePart','pGetSpellHashToItemPosMapAndFillSpellsFromTagIds','range','328421aTWhvn','hash','143XSFQrd','source','mode','getSrdCompendiumEntity','copy','distance','usesMax','540cSXQMw','preparationMode','substring','\x20+\x20@mod','_pGetAdditionalData','usesPer','VET_SPELL_SCHOOL_TO_ABV','753596XnNelm','3IAtoqF','381pxuUES','damageInflict','sphere','990289YCgHBs','parts','getMetricNumber','exec','preparation','stripTags','get','map','set','ritual','amount','touch','LINK_DATA_SHEET_ITEM','_pFillSpellPromises_pAddSpellItem','_getDescription','foundryData','encodeForHash','rsak','href','value','self','hashToIdMap','scalingLevelDice','replace','day','consume','find','pGetSpellItem','181290khiEYh','@mod','includes','level','target.value','durationUnit','getSourceWithPagePart','error','join','miscTags','pCacheAndGet','damage','isPrepared','durationAmount','getActorSpellItemOpts','items','MODULE_NAME','meta','Failed\x20to\x20import\x20spell\x20with\x20hash\x20\x22','entries','perm','homebrew','2FDDHEU','prepared','modules/','getItemSource','_pFillSpellPromises_pUpdateSpellItem','scaling','length','minute','abilityAbv','label','miles','target','text','pGetIconImage','time','uses','VALID_DAMAGE_TYPES','filter','concentration','toLowerCase','permanent','getEntryDescription','assign','cantrip','min','year','updateEmbeddedEntity','savingThrow','OwnedItem','uid','cost','special','stringify','URL_TO_HASH_BUILDER','type','duration','optsGetSpellItem','hashPreEncoded','hover','permissions','push','entriesHigherLevel','isImportDescription','usesCurrent','msak','units'];const _0x5091=function(_0x37473,_0x6e03a6){_0x37473=_0x37473-0x165;let _0x4ec337=_0x4ec3[_0x37473];return _0x4ec337;};const _0xea3b32=_0x5091;(function(_0x2674de,_0x3b0c5b){const _0x47ba01=_0x5091;while(!![]){try{const _0x34eee5=-parseInt(_0x47ba01(0x174))*-parseInt(_0x47ba01(0x168))+parseInt(_0x47ba01(0x184))*parseInt(_0x47ba01(0x17b))+-parseInt(_0x47ba01(0x182))+parseInt(_0x47ba01(0x172))*-parseInt(_0x47ba01(0x1b9))+-parseInt(_0x47ba01(0x187))*parseInt(_0x47ba01(0x1e7))+-parseInt(_0x47ba01(0x1a3))*-parseInt(_0x47ba01(0x183))+parseInt(_0x47ba01(0x1ed));if(_0x34eee5===_0x3b0c5b)break;else _0x2674de['push'](_0x2674de['shift']());}catch(_0x51663e){_0x2674de['push'](_0x2674de['shift']());}}}(_0x4ec3,0xd60df));import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{LGT}from'./Util.js';import{UtilEvents}from'./UtilEvents.js';import{DataConverter}from'./DataConverter.js';class DataConverterSpell{static async[_0xea3b32(0x1a2)](_0x215d8d,_0x37f6d0){const _0x1f4e62=_0xea3b32;_0x37f6d0=_0x37f6d0||{};const _0x1cbad2=this[_0x1f4e62(0x195)](_0x215d8d),_0x56a3f1=JSON[_0x1f4e62(0x1d9)](_0x215d8d[_0x1f4e62(0x1b6)]);let _0x37a9ab='';if(_0x215d8d[_0x1f4e62(0x1ac)]&&_0x215d8d[_0x1f4e62(0x1ac)][_0x1f4e62(0x1a5)]('HL'))_0x37a9ab='heal';if(_0x215d8d[_0x1f4e62(0x1d4)]&&_0x215d8d['savingThrow'][_0x1f4e62(0x1bf)])_0x37a9ab=_0x1f4e62(0x16b);if(_0x56a3f1[_0x1f4e62(0x1cc)]()[_0x1f4e62(0x1a5)]('melee\x20spell\x20attack'))_0x37a9ab=_0x1f4e62(0x1e5);if(_0x56a3f1['toLowerCase']()['includes']('ranged\x20spell\x20attack'))_0x37a9ab=_0x1f4e62(0x198);_0x37a9ab=_0x37a9ab||'util';const _0xbefdd8=UtilActors[_0x1f4e62(0x181)][_0x215d8d['school']]||'',_0xf2050f=_0x215d8d['components']&&_0x215d8d[_0x1f4e62(0x1e8)]['m']?_0x215d8d[_0x1f4e62(0x1e8)]['m']!==!![]?''+(_0x215d8d['components']['m'][_0x1f4e62(0x1c5)]||_0x215d8d[_0x1f4e62(0x1e8)]['m']):'':'';let _0x2dd7a6=0x0,_0x39b08e='';const _0x108e25=_0x215d8d[_0x1f4e62(0x1dc)][0x0];switch(_0x108e25[_0x1f4e62(0x1db)]){case'instant':_0x39b08e='inst';break;case _0x1f4e62(0x167):{switch(_0x108e25[_0x1f4e62(0x1dc)][_0x1f4e62(0x1db)]){case _0x1f4e62(0x169):_0x39b08e='turn',_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)]['amount'];break;case'round':_0x39b08e=_0x1f4e62(0x1f0),_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)]['amount'];break;case'minute':_0x39b08e=_0x1f4e62(0x1c0),_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)][_0x1f4e62(0x191)];break;case'hour':_0x39b08e='hour',_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)][_0x1f4e62(0x191)];break;case _0x1f4e62(0x19f):_0x39b08e='day',_0x2dd7a6=_0x108e25['duration'][_0x1f4e62(0x191)];break;case'week':_0x39b08e='day',_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)][_0x1f4e62(0x191)]*0x7;break;case'year':_0x39b08e=_0x1f4e62(0x1d2),_0x2dd7a6=_0x108e25[_0x1f4e62(0x1dc)][_0x1f4e62(0x191)];break;}break;}case _0x1f4e62(0x1cd):_0x39b08e=_0x1f4e62(0x1b7);break;case _0x1f4e62(0x1d8):_0x39b08e='spec';break;}let _0x807365=0x0,_0x48ac2a='',_0x5a7aed=0x0,_0x32c98a='',_0x51ee00='';switch(_0x215d8d['range']['type']){case RNG_SPECIAL:_0x48ac2a=_0x1f4e62(0x1f3);break;case RNG_POINT:{const _0x57faef=_0x215d8d['range'][_0x1f4e62(0x179)];switch(_0x57faef[_0x1f4e62(0x1db)]){case RNG_SELF:{_0x32c98a='self',_0x51ee00=_0x1f4e62(0x19b),_0x48ac2a=_0x1f4e62(0x19b);break;}case RNG_UNLIMITED:case RNG_UNLIMITED_SAME_PLANE:case RNG_SIGHT:case RNG_SPECIAL:{_0x32c98a=_0x1f4e62(0x1f3),_0x48ac2a='spec';break;}case RNG_TOUCH:{_0x32c98a=_0x1f4e62(0x192),_0x48ac2a=_0x1f4e62(0x192);break;}case UNT_MILES:{_0x807365=Config[_0x1f4e62(0x189)](_0x1f4e62(0x1ec),_0x57faef[_0x1f4e62(0x191)],UNT_MILES),_0x48ac2a='mi';break;}case UNT_FEET:default:{_0x807365=Config['getMetricNumber'](_0x1f4e62(0x1ec),_0x57faef[_0x1f4e62(0x191)],UNT_FEET),_0x48ac2a='ft';break;}}break;}case RNG_LINE:case RNG_CUBE:case RNG_CONE:case RNG_RADIUS:case RNG_SPHERE:case RNG_HEMISPHERE:case RNG_CYLINDER:{_0x5a7aed=Config[_0x1f4e62(0x189)](_0x1f4e62(0x1ec),_0x215d8d[_0x1f4e62(0x171)][_0x1f4e62(0x179)][_0x1f4e62(0x191)],_0x215d8d['range'][_0x1f4e62(0x179)][_0x1f4e62(0x1db)]);if(_0x215d8d['range'][_0x1f4e62(0x179)]['type']===_0x1f4e62(0x1c3))_0x32c98a='mi';else _0x32c98a='ft';if(_0x215d8d[_0x1f4e62(0x171)]['type']===RNG_HEMISPHERE)_0x51ee00=_0x1f4e62(0x186);else _0x51ee00=_0x215d8d[_0x1f4e62(0x171)][_0x1f4e62(0x1db)];}}let _0x444a3=[],_0x325759=null,_0x537af7=null;if(_0x215d8d[_0x1f4e62(0x19d)]){const _0x329d21=[_0x215d8d[_0x1f4e62(0x19d)]]['flat'](),_0x28c64b=_0x291ea8=>Math[_0x1f4e62(0x1d1)](...Object['keys'](_0x291ea8)['map'](_0x9ef9d3=>Number(_0x9ef9d3))),_0x4f1a57=new RegExp('('+UtilActors[_0x1f4e62(0x1c9)][_0x1f4e62(0x1ab)]('|')+')','i');_0x444a3[_0x1f4e62(0x1e1)](..._0x329d21[_0x1f4e62(0x18e)](_0x3434ea=>{const _0x207fae=_0x1f4e62,_0x5323c2=_0x28c64b(_0x3434ea[_0x207fae(0x1be)]),_0x34e808=_0x3434ea[_0x207fae(0x1be)][_0x5323c2],_0x104573=_0x4f1a57[_0x207fae(0x18a)](_0x3434ea[_0x207fae(0x1c2)]||'');return[(_0x34e808||'')[_0x207fae(0x19e)](/{{spellcasting_mod}}/g,_0x207fae(0x1a4)),_0x104573?_0x104573[0x1]['toLowerCase']():null];}));const _0x22d72f=_0x329d21[0x0],_0x43f121=_0x28c64b(_0x22d72f[_0x1f4e62(0x1be)]);_0x325759=_0x22d72f[_0x1f4e62(0x1be)][_0x43f121];}else{const _0xec250f=[];if(_0x215d8d[_0x1f4e62(0x185)]&&_0x215d8d[_0x1f4e62(0x185)]['length']){if(_0x56a3f1[_0x1f4e62(0x1cc)]()['includes']('when\x20you\x20reach\x205th\x20level')){const _0x1c23f5=[];_0x56a3f1['replace'](/\({@damage ([^}]+)}\)/g,(..._0x49fe54)=>_0x1c23f5['push'](_0x49fe54[0x1]));if(_0x1c23f5[_0x1f4e62(0x1bf)]===0x3){const _0x2405f7=/(?:^|[^(]){@damage ([^}]+)}(?:[^)]|$)/[_0x1f4e62(0x18a)](_0x56a3f1);if(_0x2405f7)_0x325759=_0x2405f7[0x1];else _0x325759=_0x1c23f5[0x0];}}_0x56a3f1['replace'](/{@damage ([^}]+)} ([^ ]+)(, [^ ]+)*(,? or [^ ]+)? damage/ig,(..._0x4ed0ef)=>{const _0x124ae1=_0x1f4e62;_0xec250f[_0x124ae1(0x1e1)]([_0x4ed0ef[0x1],_0x4ed0ef[0x2]]);});}if(_0x215d8d['miscTags']&&_0x215d8d[_0x1f4e62(0x1ac)][_0x1f4e62(0x1ef)](_0x5c2af4=>_0x5c2af4==='HL')){const _0x13029b=['','healing'];_0x56a3f1[_0x1f4e62(0x19e)](/{@dice ([^}]+)}(\s*\+\s*your\s+spellcasting\s+ability\s+modifier)/i,(..._0x29489b)=>{const _0x47e432=_0x1f4e62;_0x13029b[0x0]=_0x29489b[0x1],_0x29489b[0x1]&&(_0x13029b[0x0]=_0x13029b[0x0]+_0x47e432(0x17e));}),_0xec250f[_0x1f4e62(0x1e1)](_0x13029b);}_0x215d8d[_0x1f4e62(0x1e2)]&&JSON[_0x1f4e62(0x1d9)](_0x215d8d['entriesHigherLevel'])[_0x1f4e62(0x19e)](/{@(?:scaledice|scaledamage) ([^}]+)}/i,(..._0x402c06)=>{const [_0x5c51b6,_0x2cf870,_0x2fb37]=_0x402c06[0x1]['split']('|');_0x537af7=_0x2fb37;}),_0x444a3[_0x1f4e62(0x1e1)](..._0xec250f);}_0x444a3=_0x444a3[_0x1f4e62(0x1ca)](Boolean);let _0x31ebba='';if(_0x215d8d[_0x1f4e62(0x1d4)]&&_0x215d8d['savingThrow']['length'])_0x31ebba=_0x215d8d[_0x1f4e62(0x1d4)][0x0][_0x1f4e62(0x17d)](0x0,0x3)[_0x1f4e62(0x1cc)]();const _0x440d99=await DataConverter[_0x1f4e62(0x1c6)]('spell',_0x215d8d)||await DataConverter['pGetCompendiumImage'](_0x1f4e62(0x1f1),_0x215d8d)||_0x1f4e62(0x1bb)+SharedConsts[_0x1f4e62(0x1b3)]+_0x1f4e62(0x165),_0x2584f9=await DataConverter[_0x1f4e62(0x177)]('spell',_0x215d8d);_0x2584f9&&(_0x5a7aed=MiscUtil[_0x1f4e62(0x18d)](_0x2584f9,'data',_0x1f4e62(0x1c4),_0x1f4e62(0x19a))||_0x5a7aed,_0x32c98a=MiscUtil[_0x1f4e62(0x18d)](_0x2584f9,_0x1f4e62(0x1ea),_0x1f4e62(0x1c4),_0x1f4e62(0x1e6))||_0x32c98a,_0x51ee00=MiscUtil[_0x1f4e62(0x18d)](_0x2584f9,'data',_0x1f4e62(0x1c4),_0x1f4e62(0x1db))||_0x51ee00,_0x444a3=MiscUtil['get'](_0x2584f9,_0x1f4e62(0x1ea),_0x1f4e62(0x1ae),_0x1f4e62(0x188))||_0x444a3);const _0x10e959=await this[_0x1f4e62(0x17f)](_0x215d8d,_0x32c98a);if(_0x37f6d0['durationAmount']!==undefined)_0x2dd7a6=_0x37f6d0[_0x1f4e62(0x1b0)];if(_0x37f6d0[_0x1f4e62(0x1a8)]!==undefined)_0x39b08e=_0x37f6d0[_0x1f4e62(0x1a8)];const _0x9eadc4={'name':UtilApplications['getCleanEntityName'](DataConverter[_0x1f4e62(0x16f)](_0x215d8d)),'type':_0x1f4e62(0x1f1),'data':{'source':DataConverter[_0x1f4e62(0x1a9)](_0x215d8d),'description':{'value':_0x1cbad2,'chat':'','unidentified':''},'actionType':_0x37a9ab,'level':_0x215d8d[_0x1f4e62(0x1a6)],'school':_0xbefdd8,'components':{'value':'','vocal':_0x215d8d['components']&&_0x215d8d[_0x1f4e62(0x1e8)]['v'],'somatic':_0x215d8d[_0x1f4e62(0x1e8)]&&_0x215d8d['components']['s'],'material':!!(_0x215d8d[_0x1f4e62(0x1e8)]&&_0x215d8d[_0x1f4e62(0x1e8)]['m']),'ritual':_0x215d8d[_0x1f4e62(0x1b4)]&&_0x215d8d[_0x1f4e62(0x1b4)][_0x1f4e62(0x190)],'concentration':!!MiscUtil[_0x1f4e62(0x18d)](_0x215d8d,_0x1f4e62(0x1dc),'0',_0x1f4e62(0x1cb))},'materials':{'value':_0xf2050f,'consumed':!!MiscUtil['get'](_0x215d8d,_0x1f4e62(0x1e8),'m',_0x1f4e62(0x1a0)),'cost':Math[_0x1f4e62(0x1f0)]((MiscUtil[_0x1f4e62(0x18d)](_0x215d8d,'components','m',_0x1f4e62(0x1d7))||0x0)/0x64),'supply':0x0},'target':{'value':_0x5a7aed,'units':_0x32c98a,'type':_0x51ee00},'range':{'value':_0x807365,'units':_0x48ac2a,'long':0x0},'activation':{'type':_0x215d8d[_0x1f4e62(0x1c7)][0x0]['unit'],'cost':_0x215d8d[_0x1f4e62(0x1c7)][0x0]['number'],'condition':Renderer[_0x1f4e62(0x18c)](_0x215d8d[_0x1f4e62(0x1c7)][0x0]['condition']||'')},'duration':{'value':_0x2dd7a6,'units':_0x39b08e},'damage':{'parts':_0x444a3,'versatile':''},'scaling':{'mode':_0x325759?_0x1f4e62(0x1d0):_0x537af7?_0x1f4e62(0x1a6):'none','formula':_0x325759||_0x537af7||''},'save':{'ability':_0x31ebba,'dc':null},'ability':_0x37f6d0[_0x1f4e62(0x1c1)]||'','uses':{'value':_0x37f6d0[_0x1f4e62(0x1e4)]||0x0,'max':_0x37f6d0[_0x1f4e62(0x17a)]||0x0,'per':_0x37f6d0[_0x1f4e62(0x180)]||''},'attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','preparation':{'mode':_0x215d8d[_0x1f4e62(0x1a6)]===0x0?'always':_0x37f6d0[_0x1f4e62(0x17c)]||_0x1f4e62(0x1ba),'prepared':_0x215d8d[_0x1f4e62(0x1a6)]===0x0?!![]:!!_0x37f6d0[_0x1f4e62(0x1af)]},'consume':{'type':'','target':null,'amount':null},..._0x10e959||{}},'img':_0x440d99,'flags':{},'effects':[]};if(_0x37f6d0['isAddPermission'])_0x9eadc4['permission']={'default':Config[_0x1f4e62(0x18d)](_0x1f4e62(0x1ec),_0x1f4e62(0x1e0))};return _0x9eadc4;}static[_0xea3b32(0x195)](_0x5dadfa){const _0x484f74=_0xea3b32;if(!Config[_0x484f74(0x18d)]('importSpell',_0x484f74(0x1e3)))return'';const _0x4fd5ab=DataConverter[_0x484f74(0x1ce)](_0x5dadfa),_0x4b106d=_0x5dadfa[_0x484f74(0x1e2)]?DataConverter['getEntryDescription'](_0x5dadfa,{'prop':'entriesHigherLevel'}):'';return[_0x4fd5ab,_0x4b106d][_0x484f74(0x1ca)](Boolean)[_0x484f74(0x1ab)]('');}static async[_0xea3b32(0x17f)](_0x44618f,_0x414f9e){const _0x1f97ff=_0xea3b32;let _0x5446ed=(MiscUtil['get'](BrewUtil,_0x1f97ff(0x1b8),'foundrySpell')||[])['find'](_0x24895b=>_0x24895b[_0x1f97ff(0x1ee)]===_0x44618f[_0x1f97ff(0x1ee)]&&_0x24895b[_0x1f97ff(0x175)]===_0x44618f[_0x1f97ff(0x175)]);if(!_0x5446ed){const _0x131d0b=await Vetools[_0x1f97ff(0x1eb)]();_0x5446ed=_0x131d0b[_0x1f97ff(0x1f1)]['find'](_0x5bc907=>_0x5bc907['name']===_0x44618f[_0x1f97ff(0x1ee)]&&_0x5bc907[_0x1f97ff(0x175)]===_0x44618f[_0x1f97ff(0x175)]);}const _0x101ee4=_0x44618f[_0x1f97ff(0x196)];if(!_0x5446ed&&!_0x101ee4)return null;const _0x44a6f3=MiscUtil[_0x1f97ff(0x178)](_0x5446ed?_0x5446ed[_0x1f97ff(0x1ea)]:_0x101ee4);if(_0x5446ed&&_0x101ee4)Object[_0x1f97ff(0x1cf)](_0x44a6f3,MiscUtil[_0x1f97ff(0x178)](_0x101ee4));if(_0x44a6f3[_0x1f97ff(0x1a7)])_0x44a6f3[_0x1f97ff(0x1a7)]=Config[_0x1f97ff(0x189)](_0x1f97ff(0x1ec),_0x44a6f3[_0x1f97ff(0x1a7)],_0x414f9e);return _0x44a6f3;}static async[_0xea3b32(0x170)](_0x3cf901,_0x5a7b7a,_0x2e9300){const _0x3c62de=_0xea3b32;_0x2e9300=_0x2e9300||{};const _0x3855d5=_0x2e9300[_0x3c62de(0x19c)]||{};for(const _0x3c0ec3 of _0x5a7b7a){const _0x4f8365=_0x3c0ec3[_0x3c62de(0x1d6)]||_0x3c0ec3,_0x1f909a=_0x3c0ec3[_0x3c62de(0x1d6)]?_0x3c0ec3:null;if(_0x1f909a?.[_0x3c62de(0x16e)])continue;let [_0xc8cb1e,_0x1ac0f1]=_0x4f8365['split']('|');if(!_0x1ac0f1)_0x1ac0f1=SRC_PHB;const _0x2914b3=UrlUtil[_0x3c62de(0x1da)][UrlUtil['PG_SPELLS']]({'name':_0xc8cb1e,'source':_0x1ac0f1});if(_0x3855d5[_0x2914b3]!=null&&!_0x1f909a){await this[_0x3c62de(0x1bd)](_0x3cf901,_0x3855d5[_0x2914b3],_0x1ac0f1,_0x2914b3,_0x2e9300);continue;}_0x1f909a&&(_0x2e9300={..._0x2e9300},_0x2e9300[_0x3c62de(0x1dd)]=MiscUtil['copy'](_0x2e9300[_0x3c62de(0x1dd)]||{}),_0x2e9300[_0x3c62de(0x1dd)][_0x3c62de(0x1e4)]=_0x1f909a[_0x3c62de(0x1c8)],_0x2e9300[_0x3c62de(0x1dd)]['usesMax']=_0x1f909a[_0x3c62de(0x1c8)],_0x2e9300[_0x3c62de(0x1dd)][_0x3c62de(0x180)]=_0x1f909a[_0x3c62de(0x180)],_0x2e9300[_0x3c62de(0x1dd)][_0x3c62de(0x1af)]=_0x1f909a[_0x3c62de(0x1af)]!=null?_0x1f909a[_0x3c62de(0x1af)]:_0x2e9300[_0x3c62de(0x1dd)][_0x3c62de(0x1af)],_0x2e9300[_0x3c62de(0x1dd)][_0x3c62de(0x17c)]=_0x1f909a[_0x3c62de(0x17c)]!=null?_0x1f909a['preparationMode']:_0x2e9300[_0x3c62de(0x1dd)]['preparationMode'],_0x2e9300[_0x3c62de(0x166)]=!![]);const _0x430912=await DataConverterSpell['_pFillSpellPromises_pAddSpellItem'](_0x3cf901,_0x1ac0f1,_0x2914b3,_0x2e9300);if(_0x430912==null||_0x1f909a)continue;_0x3855d5[_0x2914b3]=_0x430912;}return _0x3855d5;}static async[_0xea3b32(0x1bd)](_0x10ba0d,_0x42d604,_0x17984d,_0x545e57,_0x1f4145){const _0x266445=_0xea3b32,_0x4d7da5=_0x10ba0d[_0x266445(0x1b2)][_0x266445(0x1a1)](_0x52b3f7=>_0x52b3f7[_0x266445(0x16d)]===_0x42d604||_0x52b3f7['id']===_0x42d604);if(!_0x4d7da5)return;const _0xf52e3c=_0x4d7da5['data'];_0x1f4145=_0x1f4145||{};let _0x136bfb;try{_0x136bfb=await Renderer[_0x266445(0x1df)][_0x266445(0x1ad)](UrlUtil['PG_SPELLS'],_0x17984d,_0x545e57);}catch(_0x4753e){console[_0x266445(0x1aa)](...LGT,'Failed\x20to\x20import\x20spell\x20with\x20hash\x20\x22'+_0x545e57+'\x22!',_0x4753e);return;}if(!_0x136bfb)return;const _0x3aefb8=await DataConverterSpell[_0x266445(0x1a2)](_0x136bfb,{...UtilActors[_0x266445(0x1b1)](_0x10ba0d),..._0x1f4145['optsGetSpellItem']||{}}),_0x38fb8c={'_id':_0x4d7da5[_0x266445(0x16d)],'data':{}};let _0x535086=![];MiscUtil[_0x266445(0x18d)](_0xf52e3c['data'],'preparation',_0x266445(0x176))===_0x266445(0x1ba)&&MiscUtil[_0x266445(0x18d)](_0x3aefb8['data'],'preparation',_0x266445(0x176))==='always'&&(_0x535086=!![],MiscUtil['set'](_0x38fb8c['data'],_0x266445(0x18b),'mode','always')),MiscUtil['get'](_0xf52e3c['data'],_0x266445(0x18b),_0x266445(0x1ba))!==!![]&&MiscUtil[_0x266445(0x18d)](_0x3aefb8[_0x266445(0x1ea)],'preparation',_0x266445(0x1ba))===!![]&&(_0x535086=!![],MiscUtil[_0x266445(0x18f)](_0x38fb8c[_0x266445(0x1ea)],'preparation','prepared',!![])),_0x535086&&await _0x10ba0d[_0x266445(0x1d3)](_0x266445(0x1d5),_0x38fb8c);}static async['pGetSpellHashToItemPosMapAndFillSpells'](_0x49b8cd,_0x31e369,_0x185678){const _0x183d49=_0xea3b32;_0x185678=_0x185678||{};const _0x4e559f=[],_0x6f82a4=/{@spell ([^}]+)}/gi;let _0x28687b;while(_0x28687b=_0x6f82a4[_0x183d49(0x18a)](_0x31e369)){_0x4e559f[_0x183d49(0x1e1)](_0x28687b[0x1]);}return this[_0x183d49(0x170)](_0x49b8cd,_0x4e559f,_0x185678);}static async[_0xea3b32(0x194)](_0x94be82,_0x2b2f30,_0xcef978,_0x222a4d){const _0x1ba81d=_0xea3b32;_0x222a4d=_0x222a4d||{};let _0x41e17a;try{_0x41e17a=await Renderer['hover']['pCacheAndGet'](UrlUtil[_0x1ba81d(0x1f4)],_0x2b2f30,_0xcef978);}catch(_0x358fb0){return console[_0x1ba81d(0x1aa)](...LGT,_0x1ba81d(0x1b5)+_0xcef978+'\x22!',_0x358fb0),null;}if(!_0x41e17a)return null;if(!_0x222a4d['isIgnoreExisting']){const _0x9d4b68=DataConverterSpell['getActorSpell'](_0x94be82,_0x41e17a[_0x1ba81d(0x1ee)],_0x41e17a[_0x1ba81d(0x175)]);if(_0x9d4b68)return _0x9d4b68[_0x1ba81d(0x16d)]||_0x9d4b68[_0x1ba81d(0x1ea)]['_id'];}const _0x568b2a=await DataConverterSpell['pGetSpellItem'](_0x41e17a,{...UtilActors[_0x1ba81d(0x1b1)](_0x94be82),..._0x222a4d[_0x1ba81d(0x1dd)]||{}});if(_0x222a4d['isTemporary']){const _0x30164c=await Item['create'](_0x568b2a,{'temporary':!![]});(_0x94be82[_0x1ba81d(0x1ea)][_0x1ba81d(0x1b2)]=_0x94be82[_0x1ba81d(0x1ea)]['items']||[])[_0x1ba81d(0x1e1)](_0x30164c);}else{const _0xba599c=await _0x94be82[_0x1ba81d(0x1f2)](_0x1ba81d(0x1d5),_0x568b2a,{});return _0xba599c['_id']||_0xba599c[_0x1ba81d(0x1ea)][_0x1ba81d(0x16d)];}}static[_0xea3b32(0x16c)](_0xf3da3,_0x1e7bd9,_0x22fdd4){const _0x93c682=_0xea3b32;if(!_0x1e7bd9||!_0x22fdd4)return null;return _0xf3da3[_0x93c682(0x1b2)]&&_0xf3da3[_0x93c682(0x1b2)]['find'](_0xc18f2e=>(_0xc18f2e['name']||'')[_0x93c682(0x1cc)]()===_0x1e7bd9['toLowerCase']()&&(!Config[_0x93c682(0x18d)]('import','isStrictMatching')||(DataConverter[_0x93c682(0x1bc)](_0xc18f2e)||'')[_0x93c682(0x1cc)]()===_0x22fdd4[_0x93c682(0x1cc)]()));}static[_0xea3b32(0x16a)](_0x1b087e,_0x47ea61,_0x2abc22){const _0x218758=_0xea3b32;if(_0x2abc22['href']&&_0x2abc22['href'][_0x218758(0x1df)]){if(_0x2abc22[_0x218758(0x199)][_0x218758(0x1df)][_0x218758(0x1e9)]===UrlUtil[_0x218758(0x1f4)]){const _0x84c99e=_0x2abc22[_0x218758(0x199)][_0x218758(0x1de)]?_0x2abc22[_0x218758(0x199)][_0x218758(0x173)]:UrlUtil[_0x218758(0x197)](_0x2abc22[_0x218758(0x199)]['hash']),_0x276949=_0x47ea61[_0x84c99e];if(_0x276949!=null){const _0x57505b=JSON[_0x218758(0x1d9)]({'actorId':_0x1b087e,'itemId':_0x276949})['escapeQuotes']();return{'isDisableEvents':!![],'string':UtilEvents[_0x218758(0x193)]+'=\x22'+_0x57505b+'\x22'};}}}return null;}}export{DataConverterSpell};