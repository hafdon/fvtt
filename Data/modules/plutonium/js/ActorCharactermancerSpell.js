const _0x3c97=['_spell_renderFeatSections','feat_ixMaxAbility','_spell_getApproximateCantripProgression','_filterBoxSpells','innate','feat','getFormData','_state','<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>','addHookPulseFixedLearnedProgression','str_mod','getTotals','2uPWAak','compsSpellAdditionalSpellClass','_spell_getExistingCasterMeta','spellsKnownProgressionFixedByLevel','some',')</div>','curLevel','split','_compRace','spellsExpanded','compClass','replace','_spell_getLocks','floor','[‒]','con','_spell_getMaxLearnedCantrips','187610rZckHm','expandedSpellsSubclass','val','_hk_onChangeAbilityScores','getCasterProgressionMeta','race_ixRace','_hk_onChangeClass','str','mode','spellsKnownProgressionFixedAllowLowerLevel','classSpells','_hk_onChangeSubclass','fixedLearnedProgressionDefault','click','_spell_getFixedLearnedProgression','isIncludeUaEtcSpellLists','spellcastingAbility','<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>','entries','copy','expandedSpellsRace','int','includes','_compsSpellSpells','pRender','casterProgression','findIndex','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','class','subSubclassSpells','_spell_getApproximateNumberCol','subclassTableGroups','bind','cantripProgression','feat_getActiveFeatIxProps','maxLearnedCantrips','_spell_getMaxPreparedSpells','wis_mod','max','render','45rCzNHY','_spell_pRenderFilterBox','_tabSpells','_spell_getApproximateSpellsKnownProgression','1CbDMAr','hideVe','pPreloadHidden','compRace','_hk_onChangeLevel','maxPrepared','_compsSpellAdditionalSpellFeat','compAbility','level','_spell_isCasterClassAtLevel_additionalSpells','feat_ixMaxRace','showVe','map','handleSearch','known','data','toLowerCase','ability_readonly_cntFeats','_filterValuesSpellsCache','1516073hmrBWV','state','spellLevelHigh','getCleanSearchTerm','class_getProps','_hk_onChangeSubclass_pRenderSpellTable_','classTableGroups','spellLevelLow','Could\x20not\x20evaluate\x20expression\x20\x22','getRenderedClassTableFromDereferenced','_spell_getApproximatePreparedFormula','ability','spells_isIncludeUaEtcSpellLists','_mod$>','spells','hasSourceJson','_spell_isCasterClassAtLevel_additionalSpellsBlock','existingClassMetas','_hk_onChangeSubclass_pRenderSpellTable','expandedSpellsClass','getAbilityModNumber','html','prepared','keys','1327ihZwJt','getExistingClassTotalLevels_','getCurrentAbilityScores','_actor','_pageFilterSpells','_compsSpellSpellSlotLevelSelect','bindTypingEnd','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','actor','mutateAndAddToFilters','[+]','class_getMinMaxSpellLevel','class_ixMax','spell','append','fixedLearnedProgression','addHookBase','_hk_shared_doRenderClassSubclass','_pLock','constructor','_hk_shared_doInitClassSubclass','source','$getBtnBool','_spell_getMaxPreparedSpells_getAbilityScore','\x22)\x20as\x20a\x20number!','addHookExpandedSpells','compSpellAdditionalSpellRace','671020FREHUx','compsSpellAdditionalSpellSubclass','550840SaeChL','flat','getValues','_spell_handleFilterChange','class_pulseChange','ActorCharactermancer.spells_page','compsSpellSpells','_data','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','additionalSpells','custom','_addHookBase','totals','_spell_isClassCaster','_spell_renderFeatSection','filter','every','class_totalLevels','spellsKnownProgressionFixed','spellsKnownProgression','237537KOXBGh','empty','compFeat','alwaysPreparedSpellsSubclass','addHookAlwaysPreparedSpells','_lastSearchTermSpells','<$level$>\x20','expanded','_compSpellAdditionalSpellRace','feat_getProps','pact','CASTER_TYPE_TO_PROGRESSION','_compsSpellAdditionalSpellSubclass','$wrpTab','handleFilterChange','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','503806QJFtSJ','toggleVe','colLabels','notifications','\x22\x20(originally\x20\x22','compsSpellAdditionalSpellFeat','getMaxCasterProgression','appendTo','_compsSpellAdditionalSpellClass','wis','getClass_','spell_','name','getSubclass_','pInitFilterBox','race','<div\x20class=\x22bold\x20mb-2\x22>Class\x20Spells\x20(','_changeSubclassTable','cha','isAnyData','_spell_renderClassSection','warn','_spell_isCasterClassAtLevel','getDefaultFormData','int_mod','_parent','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20mr-1\x22\x20title=\x22Save\x20a\x20copy\x20of\x20the\x20current\x20filters,\x20to\x20use\x20when\x20filtering\x20spell\x20lists\x20during\x20import\x20of\x20&quot;prepared\x20spell&quot;\x20casters.\x20For\x20example,\x20if\x20you\x20want\x20your\x20Cleric\x27s\x20spell\x20list\x20to\x20include\x20only\x20PHB\x20spells,\x20you\x20would\x20filter\x20(using\x20the\x20interface\x20above)\x20for\x20PHB\x20spells,\x20then\x20click\x20this\x20button.\x20Note\x20that\x20all\x20the\x20spells\x20that\x20you\x20have\x20selected\x20as\x20learned\x20or\x20that\x20you\x20have\x20selected\x20as\x20prepared\x20will\x20be\x20imported\x20regardless.\x22>Set\x20Prepared\x20Spell\x20Filter</button>','targetLevel','Unknown\x20variable\x20\x22','forEach','Set!','rows','_hk_shared_doCleanupClassSubclass','spellsAlwaysPrepared','fastSetHtml','_spell_renderRaceSection','cha_mod','keyup','_modalFilterSpells','addHookAbilityScores','text','ActorCharactermancer.spells','_getDefaultState'];const _0x27ad=function(_0x3aa0d4,_0x5b1212){_0x3aa0d4=_0x3aa0d4-0x162;let _0x3c9735=_0x3c97[_0x3aa0d4];return _0x3c9735;};const _0x72d7a2=_0x27ad;(function(_0x1c594d,_0x123bef){const _0x365ce2=_0x27ad;while(!![]){try{const _0x134d40=-parseInt(_0x365ce2(0x187))*parseInt(_0x365ce2(0x1b6))+-parseInt(_0x365ce2(0x1d1))+-parseInt(_0x365ce2(0x1e7))*-parseInt(_0x365ce2(0x22e))+-parseInt(_0x365ce2(0x1d3))+parseInt(_0x365ce2(0x23f))+-parseInt(_0x365ce2(0x18b))*parseInt(_0x365ce2(0x1f7))+parseInt(_0x365ce2(0x19e));if(_0x134d40===_0x123bef)break;else _0x1c594d['push'](_0x1c594d['shift']());}catch(_0x71781f){_0x1c594d['push'](_0x1c594d['shift']());}}}(_0x3c97,0x600a0));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';import{Charactermancer_Spell_SlotLevelSelect}from'./UtilCharactermancerSpellSlotLevelSelect.js';import{DataConverterClass}from'./DataConverterClass.js';import{ModalFilterSpellsFvtt}from'./UtilModalFilter.js';import{Charactermancer_Util}from'./UtilCharactermancer.js';class ActorCharactermancerSpell extends ActorCharactermancerBaseComponent{constructor(_0x4d33cd){const _0x2978d3=_0x27ad;_0x4d33cd=_0x4d33cd||{},super(),this[_0x2978d3(0x1b9)]=_0x4d33cd[_0x2978d3(0x1be)],this['_data']=_0x4d33cd[_0x2978d3(0x19a)],this[_0x2978d3(0x210)]=_0x4d33cd['parent'],this[_0x2978d3(0x189)]=_0x4d33cd['tabSpells'],this[_0x2978d3(0x1ba)]=new PageFilterSpells(),this[_0x2978d3(0x21d)]=new ModalFilterSpellsFvtt({'namespace':_0x2978d3(0x220),'isRadio':!![],'allData':this[_0x2978d3(0x1da)][_0x2978d3(0x1c3)]}),this[_0x2978d3(0x19d)]=null,this[_0x2978d3(0x225)]=null,this[_0x2978d3(0x1ec)]='',this['_compsSpellSpells']=[],this[_0x2978d3(0x1bb)]=[],this['_compSpellAdditionalSpellRace']=null,this[_0x2978d3(0x1ff)]=[],this[_0x2978d3(0x1f3)]=[],this['_compsSpellAdditionalSpellFeat']={'ability':[],'race':[],'custom':[]};}get['modalFilterSpells'](){const _0x435a1a=_0x27ad;return this[_0x435a1a(0x21d)];}get['filterValuesSpellsCache'](){const _0x14ea39=_0x27ad;return this[_0x14ea39(0x19d)];}get['filterBoxSpells'](){const _0x6ceb2d=_0x27ad;return this[_0x6ceb2d(0x225)];}get[_0x72d7a2(0x1d9)](){return this['_compsSpellSpells'];}get[_0x72d7a2(0x1d0)](){const _0x5f02be=_0x72d7a2;return this[_0x5f02be(0x1ef)];}get[_0x72d7a2(0x22f)](){return this['_compsSpellAdditionalSpellClass'];}get[_0x72d7a2(0x1d2)](){return this['_compsSpellAdditionalSpellSubclass'];}get[_0x72d7a2(0x1fc)](){const _0x5b88b3=_0x72d7a2;return this[_0x5b88b3(0x191)];}async['pLoad'](){const _0x2421f1=_0x72d7a2;await this['_modalFilterSpells'][_0x2421f1(0x18d)]();}async[_0x72d7a2(0x177)](){const _0x317589=_0x72d7a2,_0x1544b2=this[_0x317589(0x189)]?.[_0x317589(0x1f4)];if(!_0x1544b2)return;const _0x10e89f=$$`<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll"></div>`,_0xf403ae=$$`<div class="flex-col w-100"></div>`,_0x43c1c9=$$`<div class="flex-col w-100 h-100"></div>`;await this[_0x317589(0x188)](_0x10e89f);for(let _0x525227=0x0;_0x525227<this[_0x317589(0x210)]['compClass']['state'][_0x317589(0x1c2)]+0x1;++_0x525227)this[_0x317589(0x20b)](_0x10e89f,_0xf403ae,_0x43c1c9,_0x525227);const _0x539eff=()=>{const _0x4342ae=_0x317589;this[_0x4342ae(0x20b)](_0x10e89f,_0xf403ae,_0x43c1c9,this['_parent']['compClass']['state']['class_ixMax']);};this['_parent']['compClass'][_0x317589(0x1c6)](_0x317589(0x1c2),_0x539eff),this[_0x317589(0x21a)](_0x10e89f),this[_0x317589(0x222)](_0x10e89f,_0x43c1c9,_0x317589(0x223),_0x317589(0x1a9)),this[_0x317589(0x222)](_0x10e89f,_0x43c1c9,_0x317589(0x195),_0x317589(0x206)),this['_spell_renderFeatSections'](_0x10e89f,_0x43c1c9,'feat_ixMaxCustom',_0x317589(0x1dd)),this['_spell_handleFilterChange'](),$$`<div class="flex w-100 h-100">
			${_0x10e89f}

			<div class="vr-1"></div>

			<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll">
				${_0xf403ae}
				${_0x43c1c9}
			</div>
		</div>`[_0x317589(0x1fe)](_0x1544b2);}['_spell_renderFeatSections'](_0x3a760e,_0x44e331,_0x403fc2,_0x1325ec){const _0x5e8f89=_0x72d7a2;let _0x590667=this[_0x5e8f89(0x210)][_0x5e8f89(0x1e9)]['state'][_0x403fc2]+0x1;const _0x5a55ce=()=>{const _0x38a14f=_0x5e8f89;for(let _0x255650=_0x590667;_0x255650<this[_0x38a14f(0x210)][_0x38a14f(0x1e9)][_0x38a14f(0x19f)][_0x403fc2]+0x1;++_0x255650)this['_spell_renderFeatSection'](_0x3a760e,_0x44e331,_0x255650,_0x1325ec);_0x590667=this[_0x38a14f(0x210)][_0x38a14f(0x1e9)][_0x38a14f(0x19f)][_0x403fc2]+0x1;};this['_parent'][_0x5e8f89(0x1e9)]['addHookBase'](_0x403fc2,_0x5a55ce),_0x5a55ce();}[_0x72d7a2(0x1e1)](_0x33dccb,_0x5a9a5a,_0x4e9fef,_0x1fc350){const _0x7019ef=_0x72d7a2,{propIxFeat:_0x318bc8}=ActorCharactermancerBaseComponent[_0x7019ef(0x1f0)](_0x4e9fef,_0x1fc350),_0x45dc2b=$$`<div class="flex-col"></div>`[_0x7019ef(0x18c)](),_0x34742a=()=>{const _0x29bb70=_0x7019ef,_0x192f8f=this[_0x29bb70(0x210)]['compClass'][_0x29bb70(0x1b7)](),_0x3f91e0=this[_0x29bb70(0x210)]['compClass'][_0x29bb70(0x19f)][_0x29bb70(0x1e4)],_0x5908b1=this[_0x29bb70(0x191)][_0x1fc350][_0x4e9fef];if(_0x5908b1){_0x5908b1[_0x29bb70(0x234)]=_0x192f8f,_0x5908b1['targetLevel']=Math['max'](0x1,_0x3f91e0);const {min:_0x396612,max:_0x5de9c3}=this[_0x29bb70(0x210)][_0x29bb70(0x238)][_0x29bb70(0x1c1)]();_0x5908b1[_0x29bb70(0x1a5)]=_0x396612,_0x5908b1[_0x29bb70(0x1a0)]=_0x5de9c3;}};this[_0x7019ef(0x210)][_0x7019ef(0x238)]['addHookBase'](_0x7019ef(0x1e4),_0x34742a);const _0xc2d894=()=>{const _0x37dedc=_0x7019ef,_0x855bed=this[_0x37dedc(0x210)][_0x37dedc(0x1e9)][_0x37dedc(0x181)]()[_0x37dedc(0x175)](_0x318bc8),_0x51f0c8=_0x855bed?this[_0x37dedc(0x1da)][_0x37dedc(0x227)][this[_0x37dedc(0x210)][_0x37dedc(0x1e9)][_0x37dedc(0x19f)][_0x318bc8]]:null;let _0x531a83=![];if(_0x855bed){if(_0x51f0c8&&_0x51f0c8[_0x37dedc(0x1dc)])_0x531a83=!![];}_0x4b04fa[_0x37dedc(0x1f8)](_0x531a83);};if(_0x1fc350===_0x7019ef(0x1a9))this[_0x7019ef(0x210)][_0x7019ef(0x192)]['addHookBase'](_0x7019ef(0x19c),_0xc2d894);if(_0x1fc350===_0x7019ef(0x206))this['_parent'][_0x7019ef(0x18e)][_0x7019ef(0x1c6)]('race_cntFeats',_0xc2d894);if(_0x1fc350==='custom')this[_0x7019ef(0x210)][_0x7019ef(0x1e9)]['addHookBase']('feat_cntFeatsCustom',_0xc2d894);const _0x50a604=()=>{const _0x25affd=_0x7019ef;_0x45dc2b[_0x25affd(0x1e8)]();const _0x27a440=(_0x1fc350===_0x25affd(0x1a9)||_0x1fc350==='race')&&!this['_parent'][_0x25affd(0x1e9)][_0x25affd(0x181)]()[_0x25affd(0x175)](_0x318bc8),_0x1846d6=_0x27a440?null:this[_0x25affd(0x1da)]['feat'][this[_0x25affd(0x210)][_0x25affd(0x1e9)][_0x25affd(0x19f)][_0x318bc8]];let _0x2d8cac=![];_0x1846d6&&_0x1846d6[_0x25affd(0x1dc)]?(_0x2d8cac=!![],_0x45dc2b[_0x25affd(0x196)](),this['_compsSpellAdditionalSpellFeat'][_0x1fc350][_0x4e9fef]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x25affd(0x1da)][_0x25affd(0x1c3)],'additionalSpells':_0x1846d6[_0x25affd(0x1dc)],'modalFilterSpells':this[_0x25affd(0x21d)]}),this['_compsSpellAdditionalSpellFeat'][_0x1fc350][_0x4e9fef][_0x25affd(0x186)](_0x45dc2b)):(_0x45dc2b[_0x25affd(0x18c)](),this[_0x25affd(0x191)][_0x1fc350][_0x4e9fef]=null),_0x2d8cac?(_0x4b04fa['showVe'](),_0xdc85e5[_0x25affd(0x21f)](_0x1846d6['name'])):_0x4b04fa['hideVe'](),_0x34742a(),_0xc2d894();};this[_0x7019ef(0x210)][_0x7019ef(0x1e9)][_0x7019ef(0x1c6)](_0x318bc8,_0x50a604);const _0xdc85e5=$(_0x7019ef(0x170)),_0x75c8fb=$(_0x7019ef(0x1f6))[_0x7019ef(0x16c)](()=>{const _0x3a0c31=_0x7019ef;_0x75c8fb[_0x3a0c31(0x21f)](_0x75c8fb[_0x3a0c31(0x21f)]()===_0x3a0c31(0x1c0)?_0x3a0c31(0x23c):'[+]'),_0x18674a[_0x3a0c31(0x1f8)]();}),_0x18674a=$$`<div class="flex-col w-100">
			${_0x45dc2b}
		</div>`,_0x4b04fa=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0xdc85e5}
				${_0x75c8fb}
			</div>

			${_0x18674a}
		</div>`[_0x7019ef(0x18c)]()[_0x7019ef(0x1fe)](_0x33dccb);_0x50a604();}async[_0x72d7a2(0x188)](_0x3ba533){const _0x470afa=_0x72d7a2,_0xa29252=$(_0x470afa(0x22a)),_0x5e3657=$(_0x470afa(0x17a)),_0x8578=$('<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>'),_0x290952=$(_0x470afa(0x1db))[_0x470afa(0x16c)](()=>_0x8578[_0x470afa(0x241)]('')[_0x470afa(0x21c)]()),_0x214f15=$(_0x470afa(0x1bd)),_0x466348=$(_0x470afa(0x211))['click'](()=>{const _0x152ec0=_0x470afa;this[_0x152ec0(0x19d)]=this[_0x152ec0(0x225)][_0x152ec0(0x1d5)](),ui[_0x152ec0(0x1fa)]['info'](_0x152ec0(0x215));}),_0x3346c0=ComponentUiUtil[_0x470afa(0x1cc)](this,'spells_isIncludeUaEtcSpellLists',{'$ele':$('<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Include\x20spell\x20lists\x20defined\x20in\x20Unearthed\x20Arcana,\x20Plane\x20Shift,\x20and\x20other\x20semi-official\x20products\x20when\x20generating\x20the\x20list\x20of\x20spells\x20which\x20can\x20be\x20learned/prepared.\x22>Include\x20UA/etc.\x20Spell\x20Lists</button>')}),_0x222e70=()=>this[_0x470afa(0x176)][_0x470afa(0x1e2)](Boolean)[_0x470afa(0x214)](_0x128ceb=>_0x128ceb['isIncludeUaEtcSpellLists']=this[_0x470afa(0x229)][_0x470afa(0x1aa)]);this[_0x470afa(0x1de)](_0x470afa(0x1aa),_0x222e70),_0x222e70(),$$(_0x3ba533)`
			<div class="flex-v-stretch input-group input-group--top no-shrink">
				${_0xa29252}
				${_0x5e3657}
				${_0x8578}
				${_0x290952}
			</div>
			${_0x214f15}
			<div class="flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>

			<div class="mb-1 flex-v-center">${_0x466348}${_0x3346c0}</div>
		`,this[_0x470afa(0x225)]=await this['_pageFilterSpells'][_0x470afa(0x205)]({'$iptSearch':_0x8578,'$btnReset':_0x290952,'$btnOpen':_0xa29252,'$btnToggleSummaryHidden':_0x5e3657,'$wrpMiniPills':_0x214f15,'namespace':_0x470afa(0x1d8)}),this[_0x470afa(0x1da)]['spell'][_0x470afa(0x214)](_0x25f57d=>this[_0x470afa(0x1ba)][_0x470afa(0x1bf)](_0x25f57d)),this[_0x470afa(0x225)][_0x470afa(0x186)](),this[_0x470afa(0x19d)]=this[_0x470afa(0x225)][_0x470afa(0x1d5)](),UiUtil[_0x470afa(0x1bc)]({'$ipt':_0x8578,'fnKeyup':()=>{const _0x38c89d=_0x470afa,_0x330297=List[_0x38c89d(0x1a1)](_0x8578[_0x38c89d(0x241)]());if(this[_0x38c89d(0x1ec)]===_0x330297)return;this[_0x38c89d(0x1ec)]=_0x330297,this[_0x38c89d(0x176)][_0x38c89d(0x1e2)](Boolean)['forEach'](_0x20efcb=>_0x20efcb[_0x38c89d(0x198)](_0x330297));}}),this[_0x470afa(0x225)]['on'](FilterBox['EVNT_VALCHANGE'],this[_0x470afa(0x1d6)][_0x470afa(0x17f)](this));}[_0x72d7a2(0x1d6)](){const _0xb8d322=_0x72d7a2,_0x187534=this[_0xb8d322(0x225)][_0xb8d322(0x1d5)]();this[_0xb8d322(0x176)][_0xb8d322(0x1e2)](Boolean)[_0xb8d322(0x214)](_0x2a185a=>_0x2a185a[_0xb8d322(0x1f5)](_0x187534));}[_0x72d7a2(0x23e)](_0x239341,_0x5557dd,_0x169662){const _0x4d3a63=_0x72d7a2;if(!_0x239341||_0x169662==null)return null;let _0x4884ff=_0x239341[_0x4d3a63(0x180)]||_0x5557dd?.[_0x4d3a63(0x180)];if(BrewUtil[_0x4d3a63(0x1ad)](_0x239341[_0x4d3a63(0x1cb)])||_0x5557dd&&BrewUtil[_0x4d3a63(0x1ad)](_0x5557dd[_0x4d3a63(0x1cb)]))_0x4884ff=_0x4884ff||this['constructor']['_spell_getApproximateCantripProgression'](_0x239341,_0x5557dd);if(!_0x4884ff)return null;return _0x4884ff[_0x169662-0x1];}static[_0x72d7a2(0x224)](_0x4d5d92,_0x270c6a){const _0x5cee1a=_0x72d7a2;return this[_0x5cee1a(0x17d)](_0x4d5d92,_0x270c6a,'cantrips\x20known');}static[_0x72d7a2(0x18a)](_0x34bcbb,_0xebc2f5){const _0x3ade30=_0x72d7a2;return this[_0x3ade30(0x17d)](_0x34bcbb,_0xebc2f5,'spells\x20known');}static[_0x72d7a2(0x17d)](_0x3dc38c,_0x4f0ee9,_0x566c92){const _0x1a0027=_0x72d7a2,_0x34f313=(BrewUtil[_0x1a0027(0x1ad)](_0x3dc38c['source'])?_0x3dc38c[_0x1a0027(0x1a4)]:null)||(_0x4f0ee9&&BrewUtil[_0x1a0027(0x1ad)](_0x4f0ee9['source'])?_0x4f0ee9?.[_0x1a0027(0x17e)]:null);if(!_0x34f313)return;for(const _0x2eb5f5 of _0x34f313){const _0x3f23dd=(_0x2eb5f5['colLabels']||[])[_0x1a0027(0x179)](_0x231b09=>(''+_0x231b09)[_0x1a0027(0x19b)]()[_0x1a0027(0x175)](_0x566c92));if(!~_0x3f23dd)continue;const _0x4c988a=(_0x2eb5f5[_0x1a0027(0x216)]||[])['map'](_0x45f365=>_0x45f365['filter']((_0x2d3239,_0x266709)=>_0x266709===_0x3f23dd))[_0x1a0027(0x1d4)]();if(_0x4c988a[_0x1a0027(0x1e3)](_0x19e9eb=>!isNaN(_0x19e9eb)))return _0x4c988a['map'](_0x5cfd3e=>Number(_0x5cfd3e));}}[_0x72d7a2(0x16d)](_0x4ff00a,_0x4960b3,_0x4e965b,_0x9d0c38,{isExistingClass:_0x3cbbd4,isDefault:isDefault=![]}={}){const _0x433448=_0x72d7a2;if(_0x9d0c38==null)return null;const _0x34a3ed=DataConverterClass[_0x433448(0x1fd)](_0x4960b3[_0x433448(0x178)],_0x4e965b?.[_0x433448(0x178)]);if(!_0x34a3ed||!UtilActors[_0x433448(0x1f2)][_0x34a3ed])return null;const _0x5061b8=[...new Array(0x9)][_0x433448(0x197)](()=>0x0);let _0x48ff93=![];const _0x148f84=_0x3cbbd4||isDefault?Charactermancer_Spell_SlotLevelSelect[_0x433448(0x20e)]({'targetLevel':_0x9d0c38,'casterProgression':_0x34a3ed,'spellsKnownProgression':_0x4960b3?.[_0x433448(0x1e6)]||_0x4e965b?.[_0x433448(0x1e6)],'spellsKnownProgressionFixed':_0x4960b3?.[_0x433448(0x1e5)]||_0x4e965b?.[_0x433448(0x1e5)]}):this[_0x433448(0x1bb)][_0x4ff00a]?this[_0x433448(0x1bb)][_0x4ff00a][_0x433448(0x228)]():null;if(_0x148f84){_0x48ff93=_0x48ff93||_0x148f84?.[_0x433448(0x20a)];if(_0x148f84?.[_0x433448(0x19a)])_0x148f84['data'][_0x433448(0x214)]((_0x1e6e50,_0x56bbae)=>_0x5061b8[_0x56bbae]+=_0x1e6e50);}_0x4960b3[_0x433448(0x231)]&&(_0x48ff93=!![],Object[_0x433448(0x171)](_0x4960b3[_0x433448(0x231)])[_0x433448(0x214)](([_0x5a77f0,_0x3646d3])=>{const _0x8798ec=_0x433448;if(Number(_0x5a77f0)>_0x9d0c38)return;Object[_0x8798ec(0x171)](_0x3646d3)[_0x8798ec(0x214)](([_0x3058c9,_0x59ba71])=>{_0x3058c9=Number(_0x3058c9),_0x5061b8[_0x3058c9-0x1]+=_0x59ba71;});}));if(!_0x48ff93)return null;return _0x5061b8;}[_0x72d7a2(0x183)](_0x436af5,_0x17b5ff,_0x2fc408,{existingAbilityScores:_0x48ea01}={}){const _0x1887d7=_0x72d7a2;if(!_0x436af5||_0x2fc408==null)return null;const _0x2cb7b3=DataConverterClass['getMaxCasterProgression'](_0x436af5[_0x1887d7(0x178)],_0x17b5ff?.['casterProgression']);if(!_0x2cb7b3||!UtilActors[_0x1887d7(0x1f2)][_0x2cb7b3])return null;const _0x285446=UtilActors[_0x1887d7(0x1f2)][_0x2cb7b3][_0x2fc408-0x1];if(!_0x285446)return null;if(!_0x285446['some'](Boolean))return null;let _0x56e9f8=_0x436af5['preparedSpells'];BrewUtil['hasSourceJson'](_0x436af5[_0x1887d7(0x1cb)])&&(_0x56e9f8=_0x56e9f8||this[_0x1887d7(0x1c9)][_0x1887d7(0x1a8)](_0x436af5,_0x17b5ff));if(!_0x56e9f8)return null;const _0x37dfa1=this[_0x1887d7(0x210)][_0x1887d7(0x192)][_0x1887d7(0x22d)](),_0x423419=_0x56e9f8[_0x1887d7(0x239)](/<\$([^$]+)\$>/g,(..._0x5c6b39)=>{const _0x1451b6=_0x1887d7;switch(_0x5c6b39[0x1]){case'level':return _0x2fc408;case _0x1451b6(0x22c):return this[_0x1451b6(0x1c9)]['_spell_getMaxPreparedSpells_getAbilityScore']({'ability':_0x1451b6(0x166),'totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});case'dex_mod':return this[_0x1451b6(0x1c9)][_0x1451b6(0x1cd)]({'ability':'dex','totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});case'con_mod':return this[_0x1451b6(0x1c9)][_0x1451b6(0x1cd)]({'ability':_0x1451b6(0x23d),'totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});case _0x1451b6(0x20f):return this['constructor'][_0x1451b6(0x1cd)]({'ability':_0x1451b6(0x174),'totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});case _0x1451b6(0x184):return this[_0x1451b6(0x1c9)]['_spell_getMaxPreparedSpells_getAbilityScore']({'ability':_0x1451b6(0x200),'totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});case _0x1451b6(0x21b):return this['constructor'][_0x1451b6(0x1cd)]({'ability':_0x1451b6(0x209),'totalsAsi':_0x37dfa1,'existingAbilityScores':_0x48ea01});default:throw new Error(_0x1451b6(0x213)+_0x5c6b39[0x1]+'\x22');}}),_0x1e3687=eval(_0x423419);if(isNaN(_0x1e3687))return console[_0x1887d7(0x20c)](...LGT,_0x1887d7(0x1a6)+_0x423419+_0x1887d7(0x1fb)+_0x56e9f8+_0x1887d7(0x1ce)),null;return Math[_0x1887d7(0x185)](0x1,Math[_0x1887d7(0x23b)](_0x1e3687));}static[_0x72d7a2(0x1cd)]({totalsAsi:_0x148173,existingAbilityScores:_0x442d6c,ability:_0x3e11f0}){const _0x43956e=_0x72d7a2;if(_0x442d6c)return _0x442d6c[_0x3e11f0]||0x0;return Parser[_0x43956e(0x1b2)](_0x148173?.[_0x43956e(0x1df)]?.[_0x148173[_0x43956e(0x167)]]?.[_0x3e11f0]||0x0);}static[_0x72d7a2(0x1a8)](_0xbce0ea,_0x179dfe){const _0x1cfd75=_0x72d7a2;if(!_0xbce0ea)return null;const _0x4f10d7=DataConverterClass[_0x1cfd75(0x1fd)](_0xbce0ea['casterProgression'],_0x179dfe?.[_0x1cfd75(0x178)]);if(!_0x4f10d7||!_0xbce0ea[_0x1cfd75(0x1a4)]&&!_0x179dfe?.['subclassTableGroups']||_0x4f10d7===_0x1cfd75(0x1f1))return null;const _0x2ffb68=[_0xbce0ea[_0x1cfd75(0x1a4)],_0x179dfe?.[_0x1cfd75(0x17e)]]['filter'](Boolean)['some'](_0xce55b3=>{const _0x23f102=_0x1cfd75;_0xce55b3[_0x23f102(0x197)](_0x6df583=>_0x6df583[_0x23f102(0x1f9)]||[])['flat']()[_0x23f102(0x197)](_0xae1329=>Renderer['stripTags']((''+_0xae1329)['trim']()))['some'](_0x32cf06=>{const _0x502303=_0x23f102,_0x3aef04=_0x32cf06[_0x502303(0x19b)]()[_0x502303(0x235)](/[^a-z0-9]/g)[_0x502303(0x197)](_0x1b05ed=>_0x1b05ed['trim']())[_0x502303(0x1e2)](Boolean);return _0x3aef04[_0x502303(0x232)](_0x1b1327=>_0x1b1327===_0x502303(0x1c3)||_0x1b1327===_0x502303(0x1ac))&&_0x3aef04[_0x502303(0x232)](_0x371cb0=>_0x371cb0===_0x502303(0x199));});});if(_0x2ffb68)return null;return _0x1cfd75(0x1ed)+(_0x4f10d7!=='full'?'/\x202\x20':'')+'+\x20'+(_0xbce0ea[_0x1cfd75(0x16f)]?'<$'+_0xbce0ea['spellcastingAbility']+_0x1cfd75(0x1ab):'5');}[_0x72d7a2(0x20b)](_0x3525f1,_0x58054f,_0x5b2f6a,_0x4ba605){const _0xc49c4b=_0x72d7a2,{propIxClass:_0x289e71,propIxSubclass:_0x4f9958,propTargetLevel:_0x18d903}=ActorCharactermancerBaseComponent[_0xc49c4b(0x1a2)](_0x4ba605),_0x1ea9c1=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x48e82b=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared flex-v-center"></div>`,_0x358e37=$$`<div class="mb-1 flex-col"></div>`,_0x3603a4=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x186722=$$`<div class="flex-col"></div>`,_0x2fe3e7=$$`<div class="flex-col"></div>`[_0xc49c4b(0x18c)](),_0x3c0667=$$`<div class="flex-col"></div>`[_0xc49c4b(0x18c)](),_0x5ca911=$$`<div class="flex-col"></div>`,_0x5d434f=$(_0xc49c4b(0x1f6))[_0xc49c4b(0x16c)](()=>{const _0x2daf93=_0xc49c4b;_0x5d434f[_0x2daf93(0x21f)](_0x5d434f['text']()===_0x2daf93(0x1c0)?'[‒]':_0x2daf93(0x1c0)),_0x358e37[_0x2daf93(0x1f8)](),_0x399ff0['toggleVe']();}),_0x399ff0=$$`<div class="flex-col w-100">
			${_0x186722}
			${_0x2fe3e7}
			${_0x3c0667}
		</div>`,_0x137cf7=$$`<div class="flex-col mb-2">
			<div class="split-v-center">
				${_0x1ea9c1}
				${_0x5d434f}
			</div>
			${_0x48e82b}
			${_0x358e37}

			${_0x399ff0}
		</div>`['appendTo'](_0x3525f1),_0xed031a=$(_0xc49c4b(0x1f6))[_0xc49c4b(0x16c)](()=>{const _0x5b50e4=_0xc49c4b;_0xed031a[_0x5b50e4(0x21f)](_0xed031a[_0x5b50e4(0x21f)]()==='[+]'?_0x5b50e4(0x23c):_0x5b50e4(0x1c0)),_0xaf6856[_0x5b50e4(0x1f8)]();}),_0xaf6856=$$`<div class="flex-col w-100">
			${_0x5ca911}
		</div>`,_0xfffd50=$$`<div class="flex-col w-100">
			<div class="split-v-center">
				${_0x3603a4}
				${_0xed031a}
			</div>

			${_0xaf6856}

			<hr class="hr-2">
		</div>`[_0xc49c4b(0x1fe)](_0x58054f),_0x4e0079=this[_0xc49c4b(0x165)][_0xc49c4b(0x17f)](this,_0x4ba605,{'$dispClassNameLeft':_0x1ea9c1,'$dispClassNameRight':_0x3603a4,'$stgClassAdditionalSpells':_0x2fe3e7,'$stgSubclassAdditionalSpells':_0x3c0667,'$wrpLeftInner':_0x137cf7,'$wrpRightInner':_0xfffd50,'$stgClassSpells':_0x186722,'$stgSpellsTable':_0x5ca911,'$dispSpell':_0x5b2f6a,'$wrpSlotLevelSelect':_0x358e37,'$wrpPreparedLearned':_0x48e82b}),_0x35254b=this[_0xc49c4b(0x16a)]['bind'](this,_0x4ba605,{'$dispClassNameLeft':_0x1ea9c1,'$dispClassNameRight':_0x3603a4,'$stgSubclassAdditionalSpells':_0x3c0667,'$wrpLeftInner':_0x137cf7,'$wrpRightInner':_0xfffd50,'$stgClassSpells':_0x186722,'$stgSpellsTable':_0x5ca911,'$dispSpell':_0x5b2f6a,'$wrpSlotLevelSelect':_0x358e37,'$wrpPreparedLearned':_0x48e82b}),_0x2c3082=this[_0xc49c4b(0x18f)][_0xc49c4b(0x17f)](this,_0x4ba605,{'$wrpLeftInner':_0x137cf7,'$wrpRightInner':_0xfffd50}),_0x4828ae=this['_hk_onChangeAbilityScores'][_0xc49c4b(0x17f)](this,_0x4ba605);this[_0xc49c4b(0x210)][_0xc49c4b(0x238)][_0xc49c4b(0x1c6)](_0x289e71,_0x4e0079),this[_0xc49c4b(0x210)]['compClass']['addHookBase'](_0x4f9958,_0x35254b),this[_0xc49c4b(0x210)][_0xc49c4b(0x238)][_0xc49c4b(0x1c6)](_0x18d903,_0x2c3082),this[_0xc49c4b(0x210)][_0xc49c4b(0x192)][_0xc49c4b(0x21e)](_0x4828ae),_0x4e0079();}[_0x72d7a2(0x21a)](_0x2094eb){const _0x1d2f78=_0x72d7a2,_0x5c8a98=$$`<div class="flex-col"></div>`[_0x1d2f78(0x18c)](),_0x5a4238=()=>{const _0x3bf9c6=_0x1d2f78,_0x18f2f0=this[_0x3bf9c6(0x210)][_0x3bf9c6(0x238)]['getExistingClassTotalLevels_'](),_0x2dd85d=this['_parent'][_0x3bf9c6(0x238)][_0x3bf9c6(0x19f)][_0x3bf9c6(0x1e4)];if(this[_0x3bf9c6(0x1ef)]){this[_0x3bf9c6(0x1ef)][_0x3bf9c6(0x234)]=_0x18f2f0,this['_compSpellAdditionalSpellRace'][_0x3bf9c6(0x212)]=Math[_0x3bf9c6(0x185)](0x1,_0x2dd85d);const {min:_0x58593e,max:_0x2676d5}=this[_0x3bf9c6(0x210)][_0x3bf9c6(0x238)][_0x3bf9c6(0x1c1)]();this[_0x3bf9c6(0x1ef)][_0x3bf9c6(0x1a5)]=_0x58593e,this[_0x3bf9c6(0x1ef)]['spellLevelHigh']=_0x2676d5;}};this[_0x1d2f78(0x210)][_0x1d2f78(0x238)][_0x1d2f78(0x1c6)]('class_totalLevels',_0x5a4238),this[_0x1d2f78(0x210)]['compClass'][_0x1d2f78(0x1c6)](_0x1d2f78(0x1d7),_0x5a4238);const _0x2e4935=()=>{const _0x408920=_0x1d2f78;_0x5c8a98['empty']();const _0x776b38=this['_parent'][_0x408920(0x236)]['getRace_']();let _0x260f4b=![];if(_0x776b38&&_0x776b38[_0x408920(0x1dc)]){_0x260f4b=!![],_0x5c8a98[_0x408920(0x196)](),this[_0x408920(0x1ef)]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x408920(0x1da)][_0x408920(0x1c3)],'additionalSpells':_0x776b38[_0x408920(0x1dc)],'modalFilterSpells':this[_0x408920(0x21d)]}),this[_0x408920(0x1ef)][_0x408920(0x186)](_0x5c8a98);const _0x3b67c1=()=>this[_0x408920(0x176)][_0x408920(0x1e2)](Boolean)[_0x408920(0x214)](_0x9ebe96=>_0x9ebe96['alwaysPreparedSpellsRace']=MiscUtil[_0x408920(0x172)](this[_0x408920(0x1ef)][_0x408920(0x218)]));this[_0x408920(0x1ef)][_0x408920(0x1eb)](_0x3b67c1),_0x3b67c1();const _0x2800a4=()=>this[_0x408920(0x176)]['filter'](Boolean)[_0x408920(0x214)](_0x3f0932=>_0x3f0932[_0x408920(0x173)]=MiscUtil[_0x408920(0x172)](this[_0x408920(0x1ef)]['spellsExpanded']));this['_compSpellAdditionalSpellRace'][_0x408920(0x1cf)](_0x2800a4),_0x2800a4();}else _0x5c8a98[_0x408920(0x18c)](),this[_0x408920(0x1ef)]=null,this[_0x408920(0x176)][_0x408920(0x1e2)](Boolean)['forEach'](_0x1ae4cb=>_0x1ae4cb[_0x408920(0x173)]=[]);_0x776b38&&_0x260f4b?(_0x3d8dd8[_0x408920(0x196)](),_0x1a00ec[_0x408920(0x21f)](_0x776b38[_0x408920(0x203)])):_0x3d8dd8[_0x408920(0x18c)](),_0x5a4238();};this[_0x1d2f78(0x210)][_0x1d2f78(0x18e)][_0x1d2f78(0x1c6)](_0x1d2f78(0x164),_0x2e4935);const _0x1a00ec=$(_0x1d2f78(0x170)),_0x1ae861=$('<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>')[_0x1d2f78(0x16c)](()=>{const _0x173ae3=_0x1d2f78;_0x1ae861[_0x173ae3(0x21f)](_0x1ae861[_0x173ae3(0x21f)]()===_0x173ae3(0x1c0)?_0x173ae3(0x23c):'[+]'),_0x3d89fc[_0x173ae3(0x1f8)]();}),_0x3d89fc=$$`<div class="flex-col w-100">
			${_0x5c8a98}
		</div>`,_0x3d8dd8=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x1a00ec}
				${_0x1ae861}
			</div>

			${_0x3d89fc}
		</div>`[_0x1d2f78(0x18c)]()[_0x1d2f78(0x1fe)](_0x2094eb);_0x2e4935();}[_0x72d7a2(0x165)](_0x59b73f,{$stgClassSpells:_0x3b6e53,$stgSpellsTable:_0x5a6a91,$dispClassNameLeft:_0x2a3f77,$dispClassNameRight:_0x267bef,$stgClassAdditionalSpells:_0x500fc2,$stgSubclassAdditionalSpells:_0x170969,$wrpLeftInner:_0xd87dc,$wrpRightInner:_0x557c28,$dispSpell:_0x52804b,$wrpSlotLevelSelect:_0x1b5d68,$wrpPreparedLearned:_0x52b8be}){const _0x1a2e03=_0x72d7a2,{propIxClass:_0x2e0918,propIxSubclass:_0x294c42,propTargetLevel:_0x42a9bc}=ActorCharactermancerBaseComponent[_0x1a2e03(0x1a2)](_0x59b73f),_0x10565a=this[_0x1a2e03(0x210)][_0x1a2e03(0x238)][_0x1a2e03(0x201)]({'propIxClass':_0x2e0918}),_0x201d18=this[_0x1a2e03(0x210)][_0x1a2e03(0x238)][_0x1a2e03(0x204)]({'cls':_0x10565a,'propIxSubclass':_0x294c42});if(!_0x10565a||!this[_0x1a2e03(0x1c9)]['_spell_isClassCaster'](_0x10565a,_0x201d18)){this[_0x1a2e03(0x217)]({'$stgClassSpells':_0x3b6e53,'$stgSpellsTable':_0x5a6a91,'$wrpLeftInner':_0xd87dc,'$wrpRightInner':_0x557c28,'ix':_0x59b73f});return;}_0x3b6e53['empty'](),_0x5a6a91[_0x1a2e03(0x1e8)](),this[_0x1a2e03(0x1ca)]({'ix':_0x59b73f,'cls':_0x10565a,'sc':_0x201d18,'$wrpPreparedLearned':_0x52b8be,'propTargetLevel':_0x42a9bc}),_0x500fc2[_0x1a2e03(0x1e8)]();if(_0x10565a&&_0x10565a[_0x1a2e03(0x1dc)]){_0x500fc2['showVe']()[_0x1a2e03(0x1c4)](_0x1a2e03(0x207)+_0x10565a['name']+_0x1a2e03(0x233)),this[_0x1a2e03(0x1ff)][_0x59b73f]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x1a2e03(0x1da)][_0x1a2e03(0x1c3)],'additionalSpells':_0x10565a[_0x1a2e03(0x1dc)],'modalFilterSpells':this[_0x1a2e03(0x21d)]}),this[_0x1a2e03(0x1ff)][_0x59b73f][_0x1a2e03(0x186)](_0x500fc2);const _0xa94814=()=>{const _0x524031=_0x1a2e03;if(this[_0x524031(0x176)][_0x59b73f])this['_compsSpellSpells'][_0x59b73f][_0x524031(0x1ea)]=MiscUtil['copy'](this[_0x524031(0x1ff)][_0x59b73f][_0x524031(0x218)]);};this[_0x1a2e03(0x1ff)][_0x59b73f]['addHookAlwaysPreparedSpells'](_0xa94814);const _0x5215e4=()=>{const _0x1dcf65=_0x1a2e03;if(this[_0x1dcf65(0x176)][_0x59b73f])this[_0x1dcf65(0x176)][_0x59b73f][_0x1dcf65(0x240)]=MiscUtil[_0x1dcf65(0x172)](this[_0x1dcf65(0x1ff)][_0x59b73f]['spellsExpanded']);};this[_0x1a2e03(0x1ff)][_0x59b73f][_0x1a2e03(0x1cf)](_0x5215e4);}else _0x500fc2['hideVe'](),this[_0x1a2e03(0x1ff)][_0x59b73f]=null;this[_0x1a2e03(0x16a)](_0x59b73f,{'$dispClassNameLeft':_0x2a3f77,'$dispClassNameRight':_0x267bef,'$stgClassSpells':_0x3b6e53,'$stgSpellsTable':_0x5a6a91,'$stgSubclassAdditionalSpells':_0x170969,'$wrpLeftInner':_0xd87dc,'$wrpRightInner':_0x557c28});if(this[_0x1a2e03(0x176)][_0x59b73f]&&this[_0x1a2e03(0x1ff)][_0x59b73f])this[_0x1a2e03(0x176)][_0x59b73f][_0x1a2e03(0x1b1)]=MiscUtil[_0x1a2e03(0x172)](this['_compsSpellAdditionalSpellClass'][_0x59b73f][_0x1a2e03(0x237)]);else{if(this[_0x1a2e03(0x176)][_0x59b73f])this[_0x1a2e03(0x176)][_0x59b73f][_0x1a2e03(0x1b1)]=[];}this['_hk_shared_doRenderClassSubclass']({'ix':_0x59b73f,'$stgClassSpells':_0x3b6e53,'$stgSpellsTable':_0x5a6a91,'$dispSpell':_0x52804b,'$wrpSlotLevelSelect':_0x1b5d68});}[_0x72d7a2(0x217)]({$stgClassSpells:_0x12bb48,$stgSpellsTable:_0x551fc7,$wrpLeftInner:_0xe5ade3,$wrpRightInner:_0x2ca8f4,ix:_0x91fad1}){const _0xaffd28=_0x72d7a2;_0x12bb48[_0xaffd28(0x1e8)](),_0x551fc7[_0xaffd28(0x1e8)](),_0xe5ade3[_0xaffd28(0x18c)](),_0x2ca8f4[_0xaffd28(0x18c)](),this['_compsSpellSpells'][_0x91fad1]=null,this[_0xaffd28(0x1bb)][_0x91fad1]=null;}[_0x72d7a2(0x1ca)]({ix:_0x4c9218,cls:_0x43e079,sc:_0x1a3a1b,$wrpPreparedLearned:_0xd736dd,propTargetLevel:_0x9a337c}){const _0x3452a2=_0x72d7a2,_0x48a075=this[_0x3452a2(0x210)][_0x3452a2(0x238)][_0x3452a2(0x1af)][_0x4c9218];this['_compsSpellSpells'][_0x4c9218]=new Charactermancer_Spell({'actor':this['_actor'],'existingClass':_0x48a075?this[_0x3452a2(0x1da)][_0x3452a2(0x17b)][_0x48a075['ixClass']]:null,'existingCasterMeta':this['_spell_getExistingCasterMeta']({'ix':_0x4c9218,'cls':_0x43e079,'sc':_0x1a3a1b,'existingClassMeta':_0x48a075}),'spellDatas':this[_0x3452a2(0x1da)][_0x3452a2(0x1c3)],'className':_0x43e079[_0x3452a2(0x203)],'classSource':_0x43e079['source'],'brewClassSpells':_0x43e079[_0x3452a2(0x169)],'subclassName':_0x1a3a1b?.[_0x3452a2(0x203)],'subclassSource':_0x1a3a1b?.[_0x3452a2(0x1cb)],'brewSubclassSpells':_0x1a3a1b?.['subclassSpells'],'brewSubSubclassSpells':_0x1a3a1b?.[_0x3452a2(0x17c)],'pageFilter':this[_0x3452a2(0x1ba)],'$wrpPreparedLearned':_0xd736dd}),this['_compsSpellSpellSlotLevelSelect'][_0x4c9218]=new Charactermancer_Spell_SlotLevelSelect(_0x43e079[_0x3452a2(0x203)]);const _0x471014=()=>{const _0x25f03b=_0x3452a2,_0x12e562=this[_0x25f03b(0x210)][_0x25f03b(0x238)][_0x25f03b(0x19f)][_0x9a337c];this[_0x25f03b(0x176)][_0x4c9218]&&(this[_0x25f03b(0x176)][_0x4c9218]['fixedLearnedProgression']=this[_0x25f03b(0x16d)](_0x4c9218,_0x43e079,_0x1a3a1b,_0x12e562),this[_0x25f03b(0x176)][_0x4c9218][_0x25f03b(0x16b)]=this[_0x25f03b(0x16d)](_0x4c9218,_0x43e079,_0x1a3a1b,_0x12e562,{'isDefault':!![]}));};this[_0x3452a2(0x1bb)][_0x4c9218][_0x3452a2(0x22b)](_0x471014),_0x471014();}['_hk_shared_doRenderClassSubclass']({ix:_0xffa0a0,$stgClassSpells:_0x390971,$stgSpellsTable:_0x197bb1,$dispSpell:_0x567f81,$wrpSlotLevelSelect:_0x3aa0d0}){const _0x271cfb=_0x72d7a2;this[_0x271cfb(0x176)][_0xffa0a0][_0x271cfb(0x186)](_0x390971,_0x567f81),this[_0x271cfb(0x1bb)][_0xffa0a0][_0x271cfb(0x186)](_0x3aa0d0);const _0x4600f8=this[_0x271cfb(0x225)][_0x271cfb(0x1d5)]();this[_0x271cfb(0x176)][_0xffa0a0][_0x271cfb(0x1f5)](_0x4600f8);if(this[_0x271cfb(0x1ef)])this['_compsSpellSpells'][_0xffa0a0][_0x271cfb(0x173)]=MiscUtil[_0x271cfb(0x172)](this[_0x271cfb(0x1ef)][_0x271cfb(0x237)]);}['_hk_onChangeAbilityScores'](_0x622e17){const _0x146abd=_0x72d7a2,{propIxClass:_0x11821d,propTargetLevel:_0x45c94e,propIxSubclass:_0x55d5cb}=ActorCharactermancerBaseComponent[_0x146abd(0x1a2)](_0x622e17),_0x289776=this[_0x146abd(0x210)][_0x146abd(0x238)][_0x146abd(0x201)]({'propIxClass':_0x11821d}),_0x200802=this[_0x146abd(0x210)][_0x146abd(0x238)][_0x146abd(0x204)]({'cls':_0x289776,'propIxSubclass':_0x55d5cb}),_0x48173e=this[_0x146abd(0x210)][_0x146abd(0x238)][_0x146abd(0x19f)][_0x45c94e];if(this[_0x146abd(0x176)][_0x622e17])this['_compsSpellSpells'][_0x622e17][_0x146abd(0x190)]=this['_spell_getMaxPreparedSpells'](_0x289776,_0x200802,_0x48173e);}[_0x72d7a2(0x16a)](_0xca07fe,{$stgClassSpells:_0xda12b7,$stgSpellsTable:_0x3fefdd,$dispClassNameLeft:_0x1652b0,$dispClassNameRight:_0x423cf1,$stgSubclassAdditionalSpells:_0x1ab05b,$wrpLeftInner:_0x354fd6,$wrpRightInner:_0x1ee358,$wrpPreparedLearned:_0xdeebfd,$dispSpell:_0x4f5946,$wrpSlotLevelSelect:_0x4ea0ca}){const _0x565d64=_0x72d7a2,{propIxClass:_0x3c003a,propIxSubclass:_0x227699,propTargetLevel:_0xa23b1f}=ActorCharactermancerBaseComponent['class_getProps'](_0xca07fe),_0x828e9c=this['_parent'][_0x565d64(0x238)]['getClass_']({'propIxClass':_0x3c003a}),_0x3a7475=this['_parent'][_0x565d64(0x238)][_0x565d64(0x204)]({'cls':_0x828e9c,'propIxSubclass':_0x227699}),_0x1887de=_0x828e9c?''+_0x828e9c[_0x565d64(0x203)]+(_0x3a7475?'\x20('+_0x3a7475[_0x565d64(0x203)]+')':''):'';_0x1652b0[_0x565d64(0x21f)](_0x1887de),_0x423cf1[_0x565d64(0x21f)](_0x1887de),this[_0x565d64(0x1b0)](_0xca07fe,{'cls':_0x828e9c,'sc':_0x3a7475,'$stgSpellsTable':_0x3fefdd});const _0x3b9d6d=this[_0x565d64(0x1c9)]['_spell_isClassCaster'](_0x828e9c,_0x3a7475),_0x1145ab=_0x3b9d6d&&!this[_0x565d64(0x176)][_0xca07fe];if(!_0x3b9d6d&&this[_0x565d64(0x176)][_0xca07fe]){this['_hk_shared_doCleanupClassSubclass']({'$stgClassSpells':_0xda12b7,'$stgSpellsTable':_0x3fefdd,'$wrpLeftInner':_0x354fd6,'$wrpRightInner':_0x1ee358,'ix':_0xca07fe});return;}else _0x1145ab&&this[_0x565d64(0x1ca)]({'ix':_0xca07fe,'cls':_0x828e9c,'sc':_0x3a7475,'$wrpPreparedLearned':_0xdeebfd,'propTargetLevel':_0xa23b1f});_0x1ab05b[_0x565d64(0x1e8)]();if(_0x3a7475&&_0x3a7475[_0x565d64(0x1dc)]){_0x1ab05b['showVe']()[_0x565d64(0x1c4)]('<div\x20class=\x22bold\x20mb-2\x22>Subclass\x20Spells\x20('+_0x3a7475[_0x565d64(0x203)]+_0x565d64(0x233)),this[_0x565d64(0x1f3)][_0xca07fe]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x565d64(0x1da)][_0x565d64(0x1c3)],'additionalSpells':_0x3a7475[_0x565d64(0x1dc)],'modalFilterSpells':this['_modalFilterSpells']}),this[_0x565d64(0x1f3)][_0xca07fe][_0x565d64(0x186)](_0x1ab05b);const _0x543bdd=()=>{const _0x56680e=_0x565d64;if(this['_compsSpellSpells'][_0xca07fe])this[_0x56680e(0x176)][_0xca07fe]['alwaysPreparedSpellsSubclass']=MiscUtil[_0x56680e(0x172)](this['_compsSpellAdditionalSpellSubclass'][_0xca07fe][_0x56680e(0x218)]);};this['_compsSpellAdditionalSpellSubclass'][_0xca07fe][_0x565d64(0x1eb)](_0x543bdd);const _0x485be5=()=>{const _0x3ff4db=_0x565d64;if(this[_0x3ff4db(0x176)][_0xca07fe])this[_0x3ff4db(0x176)][_0xca07fe][_0x3ff4db(0x240)]=MiscUtil['copy'](this[_0x3ff4db(0x1f3)][_0xca07fe][_0x3ff4db(0x237)]);};this[_0x565d64(0x1f3)][_0xca07fe][_0x565d64(0x1cf)](_0x485be5);}else _0x1ab05b[_0x565d64(0x18c)](),this[_0x565d64(0x1f3)][_0xca07fe]=null;this['_hk_onChangeLevel'](_0xca07fe,{'$wrpLeftInner':_0x354fd6,'$wrpRightInner':_0x1ee358});const _0x2acd9c=DataConverterClass[_0x565d64(0x1fd)](_0x828e9c?.[_0x565d64(0x178)],_0x3a7475?.[_0x565d64(0x178)]);if(this[_0x565d64(0x176)][_0xca07fe])this[_0x565d64(0x176)][_0xca07fe][_0x565d64(0x178)]=_0x2acd9c;if(this[_0x565d64(0x1bb)][_0xca07fe])this['_compsSpellSpellSlotLevelSelect'][_0xca07fe][_0x565d64(0x178)]=_0x2acd9c;if(this['_compsSpellSpells'][_0xca07fe]&&this[_0x565d64(0x1f3)][_0xca07fe])this[_0x565d64(0x176)][_0xca07fe][_0x565d64(0x240)]=MiscUtil['copy'](this[_0x565d64(0x1f3)][_0xca07fe][_0x565d64(0x237)]);else{if(this[_0x565d64(0x176)][_0xca07fe])this[_0x565d64(0x176)][_0xca07fe][_0x565d64(0x240)]=[];}if(_0x1145ab)this[_0x565d64(0x1c7)]({'ix':_0xca07fe,'$stgClassSpells':_0xda12b7,'$dispSpell':_0x4f5946,'$wrpSlotLevelSelect':_0x4ea0ca});}async[_0x72d7a2(0x1b0)](_0x1358f6,{cls:_0x4e3c18,sc:_0x34bf0f,$stgSpellsTable:_0x3568c3}){const _0x5bc4de=_0x72d7a2,{lockChangeSubclassTable:_0x1a56c1}=this['constructor'][_0x5bc4de(0x23a)](_0x1358f6);try{await this[_0x5bc4de(0x1c8)](_0x1a56c1),await this[_0x5bc4de(0x1a3)](_0x1358f6,{'cls':_0x4e3c18,'sc':_0x34bf0f,'$stgSpellsTable':_0x3568c3});}finally{this['_unlock'](_0x1a56c1);}}async['_hk_onChangeSubclass_pRenderSpellTable_'](_0x437ce0,{cls:_0x121d6e,sc:_0x823510,$stgSpellsTable:_0x192bd7}){const _0x52e5de=_0x72d7a2,_0x2da509=_0x121d6e?await DataUtil[_0x52e5de(0x17b)]['pGetDereferencedClassData'](_0x121d6e):null,_0x225668=_0x823510?await DataUtil['class']['pGetDereferencedSubclassData'](_0x823510):null,_0x2b035f=DataConverterClass[_0x52e5de(0x1a7)](_0x2da509,_0x225668,{'isSpellsOnly':!![]});_0x192bd7[_0x52e5de(0x1b3)]('')[_0x52e5de(0x219)](_0x2b035f);}static[_0x72d7a2(0x23a)](_0x3de6c9){const _0x14f80d=_0x72d7a2;return{'lockChangeSubclassTable':_0x14f80d(0x202)+_0x3de6c9+_0x14f80d(0x208)};}[_0x72d7a2(0x18f)](_0x51398a,{$wrpLeftInner:_0x1c820f,$wrpRightInner:_0x42fbb3}){const _0x1ce89f=_0x72d7a2,{propIxClass:_0x371f76,propIxSubclass:_0x1d2d48,propCurLevel:_0x144a4a,propTargetLevel:_0x25340b}=ActorCharactermancerBaseComponent[_0x1ce89f(0x1a2)](_0x51398a),_0x2ef8d1=this[_0x1ce89f(0x210)][_0x1ce89f(0x238)][_0x1ce89f(0x201)]({'propIxClass':_0x371f76}),_0x2c6817=this[_0x1ce89f(0x210)][_0x1ce89f(0x238)][_0x1ce89f(0x204)]({'cls':_0x2ef8d1,'propIxSubclass':_0x1d2d48}),_0x2ec47c=this[_0x1ce89f(0x210)][_0x1ce89f(0x238)]['state'][_0x144a4a]??0x0,_0x2bdfb4=this[_0x1ce89f(0x210)][_0x1ce89f(0x238)][_0x1ce89f(0x19f)][_0x25340b],_0x3370e2=DataConverterClass[_0x1ce89f(0x1fd)](_0x2ef8d1?.['casterProgression'],_0x2c6817?.[_0x1ce89f(0x178)]),_0x23375c=Charactermancer_Util[_0x1ce89f(0x163)]({'casterProgression':_0x3370e2,'curLevel':_0x2ec47c,'targetLevel':_0x2bdfb4});if(this[_0x1ce89f(0x176)][_0x51398a]){if(_0x23375c){const {spellLevelLow:_0x5508a8,spellLevelHigh:_0x2f2419}=_0x23375c;this[_0x1ce89f(0x176)][_0x51398a][_0x1ce89f(0x1a5)]=_0x5508a8,this[_0x1ce89f(0x176)][_0x51398a][_0x1ce89f(0x1a0)]=_0x2f2419;}else this[_0x1ce89f(0x176)][_0x51398a][_0x1ce89f(0x1a5)]=null,this['_compsSpellSpells'][_0x51398a][_0x1ce89f(0x1a0)]=null;this['_compsSpellSpells'][_0x51398a][_0x1ce89f(0x182)]=this[_0x1ce89f(0x23e)](_0x2ef8d1,_0x2c6817,_0x2bdfb4),this[_0x1ce89f(0x176)][_0x51398a][_0x1ce89f(0x1c5)]=this[_0x1ce89f(0x16d)](_0x51398a,_0x2ef8d1,_0x2c6817,_0x2bdfb4),this[_0x1ce89f(0x176)][_0x51398a][_0x1ce89f(0x16b)]=this['_spell_getFixedLearnedProgression'](_0x51398a,_0x2ef8d1,_0x2c6817,_0x2bdfb4,{'isDefault':!![]}),this['_compsSpellSpells'][_0x51398a][_0x1ce89f(0x16e)]=this['_state']['spells_isIncludeUaEtcSpellLists'];}this[_0x1ce89f(0x162)](_0x51398a);this[_0x1ce89f(0x1bb)][_0x51398a]&&(this[_0x1ce89f(0x1bb)][_0x51398a]['curLevel']=_0x2ec47c,this[_0x1ce89f(0x1bb)][_0x51398a][_0x1ce89f(0x212)]=_0x2bdfb4,this['_compsSpellSpellSlotLevelSelect'][_0x51398a][_0x1ce89f(0x1e6)]=_0x2ef8d1?.[_0x1ce89f(0x1e6)]||_0x2c6817?.[_0x1ce89f(0x1e6)],this['_compsSpellSpellSlotLevelSelect'][_0x51398a][_0x1ce89f(0x178)]=_0x3370e2,this['_compsSpellSpellSlotLevelSelect'][_0x51398a][_0x1ce89f(0x1e5)]=_0x2ef8d1?.[_0x1ce89f(0x1e5)]||_0x2c6817?.[_0x1ce89f(0x1e5)],this[_0x1ce89f(0x1bb)][_0x51398a][_0x1ce89f(0x168)]=_0x2ef8d1?.[_0x1ce89f(0x168)]||_0x2c6817?.[_0x1ce89f(0x168)]);if(this['_compsSpellAdditionalSpellClass'][_0x51398a]){this['_compsSpellAdditionalSpellClass'][_0x51398a][_0x1ce89f(0x234)]=_0x2ec47c,this[_0x1ce89f(0x1ff)][_0x51398a][_0x1ce89f(0x212)]=_0x2bdfb4;if(_0x23375c){const {spellLevelLow:_0x7a86db,spellLevelHigh:_0x4c8dbe}=_0x23375c;this['_compsSpellAdditionalSpellClass'][_0x51398a][_0x1ce89f(0x1a5)]=_0x7a86db,this[_0x1ce89f(0x1ff)][_0x51398a][_0x1ce89f(0x1a0)]=_0x4c8dbe;}else this[_0x1ce89f(0x1ff)][_0x51398a][_0x1ce89f(0x1a5)]=null,this[_0x1ce89f(0x1ff)][_0x51398a][_0x1ce89f(0x1a0)]=null;}if(this[_0x1ce89f(0x1f3)][_0x51398a]){this[_0x1ce89f(0x1f3)][_0x51398a]['curLevel']=_0x2ec47c,this['_compsSpellAdditionalSpellSubclass'][_0x51398a][_0x1ce89f(0x212)]=_0x2bdfb4;if(_0x23375c){const {spellLevelLow:_0x177386,spellLevelHigh:_0x3c5887}=_0x23375c;this[_0x1ce89f(0x1f3)][_0x51398a][_0x1ce89f(0x1a5)]=_0x177386,this[_0x1ce89f(0x1f3)][_0x51398a][_0x1ce89f(0x1a0)]=_0x3c5887;}else this[_0x1ce89f(0x1f3)][_0x51398a][_0x1ce89f(0x1a5)]=null,this[_0x1ce89f(0x1f3)][_0x51398a][_0x1ce89f(0x1a0)]=null;}if(_0x2ef8d1){const _0x2d2b42=this[_0x1ce89f(0x1c9)][_0x1ce89f(0x20d)](_0x2ef8d1,_0x2c6817,_0x2bdfb4);_0x1c820f[_0x1ce89f(0x1f8)](_0x2d2b42);const _0x4d37c2=this[_0x1ce89f(0x1c9)][_0x1ce89f(0x1e0)](_0x2ef8d1,_0x2c6817);_0x42fbb3[_0x1ce89f(0x1f8)](_0x4d37c2);}}static[_0x72d7a2(0x1e0)](_0x442735,_0x4c6aba){const _0x5b37db=_0x72d7a2;return _0x442735?.[_0x5b37db(0x178)]||_0x4c6aba?.[_0x5b37db(0x178)]||_0x442735?.[_0x5b37db(0x1dc)]||_0x4c6aba?.[_0x5b37db(0x1dc)];}static[_0x72d7a2(0x20d)](_0x133c1d,_0x186e92,_0xcbe568){const _0x32c5fb=_0x72d7a2;if(!this[_0x32c5fb(0x1e0)](_0x133c1d,_0x186e92))return![];if(_0xcbe568==null)return![];const {casterProgression:_0x3c0285}=Charactermancer_Class_Util['getCasterProgression'](_0x133c1d,_0x186e92,{'targetLevel':_0xcbe568}),_0x24d2a2=UtilActors['CASTER_TYPE_TO_PROGRESSION'][_0x3c0285];if((_0x24d2a2?.[_0xcbe568-0x1]||[])[_0x32c5fb(0x232)](Boolean))return!![];if(this[_0x32c5fb(0x194)](_0x133c1d?.[_0x32c5fb(0x1dc)],_0xcbe568))return!![];if(this[_0x32c5fb(0x194)](_0x186e92?.[_0x32c5fb(0x1dc)],_0xcbe568))return!![];return![];}static[_0x72d7a2(0x194)](_0x12d20f,_0x114769){const _0x75c2e0=_0x72d7a2;if(!_0x12d20f)return![];if(_0x114769==null)return![];return _0x12d20f[_0x75c2e0(0x232)](_0x15a44c=>this[_0x75c2e0(0x1ae)](_0x15a44c,_0x114769));}static[_0x72d7a2(0x1ae)](_0x28e085,_0x23e910){const _0x136a03=_0x72d7a2,_0x45d67a=Object[_0x136a03(0x1b5)](_0x28e085);for(const _0x44df8d of _0x45d67a){switch(_0x44df8d){case _0x136a03(0x226):case _0x136a03(0x1b4):case _0x136a03(0x1ee):{const _0x5747c1=Object[_0x136a03(0x1b5)](_0x28e085[_0x44df8d]||{})[_0x136a03(0x232)](_0x2c1bbc=>{const _0x1bd457=/^s(\d+)$/i['exec'](_0x2c1bbc);if(_0x1bd457)return![];if(isNaN(_0x2c1bbc))return![];return Number(_0x2c1bbc)<=_0x23e910;});if(_0x5747c1)return!![];}}}return![];}[_0x72d7a2(0x230)]({ix:_0x1b949f,cls:_0x5d92a8,sc:_0x428c20,existingClassMeta:_0x40a072}){const _0x1d657d=_0x72d7a2;if(!_0x40a072?.['level'])return null;const _0x4b5917=DataConverterClass[_0x1d657d(0x1fd)](_0x5d92a8?.[_0x1d657d(0x178)],_0x428c20?.['casterProgression']),_0xf18593=Charactermancer_Util[_0x1d657d(0x163)]({'casterProgression':_0x4b5917,'curLevel':0x0,'targetLevel':_0x40a072[_0x1d657d(0x193)]});return{'maxLearnedCantrips':this[_0x1d657d(0x23e)](_0x5d92a8,_0x428c20,_0x40a072['level']),'fixedLearnedProgression':this['_spell_getFixedLearnedProgression'](_0x1b949f,_0x5d92a8,_0x428c20,_0x40a072[_0x1d657d(0x193)],{'isExistingClass':!![]}),'maxPreparedSpells':this['_spell_getMaxPreparedSpells'](_0x5d92a8,_0x428c20,_0x40a072['level'],{'existingAbilityScores':Charactermancer_Util[_0x1d657d(0x1b8)](this[_0x1d657d(0x1b9)])}),'spellLevelLow':_0xf18593?.[_0x1d657d(0x1a5)],'spellLevelLowHigh':_0xf18593?.[_0x1d657d(0x1a0)]};}[_0x72d7a2(0x221)](){return{'spells_isIncludeUaEtcSpellLists':![]};}}export{ActorCharactermancerSpell};