const _0x959b=['findIndex','dex_mod','getCasterProgressionMeta','name','[+]','flat','filter','text','maxLearnedCantrips','Unknown\x20variable\x20\x22','_CUR_SPELL_LEVEL','_data','feat_getActiveFeatIxProps','spellsKnownProgressionFixed','_spell_renderFeatSection','_filterValuesSpellsCache','_spell_renderClassSection','_spell_getApproximateNumberCol','classTableGroups','ActorCharactermancer.spells','click','_spell_renderRaceSection','colLabels','514983TsQXzj','compAbility','expandedSpellsSubclass','wis','Could\x20not\x20evaluate\x20expression\x20\x22','wis_mod','<$level$>\x20','source','additionalSpells','exec','_lastSearchTermSpells','_actor','casterProgression','_filterBoxSpells','custom','33dirTOt','class_totalLevels','every','spellLevelLow','class_pulseChange','getTotals','prepared','_compsSpellAdditionalSpellFeat','addHookAbilityScores','_spell_getApproximatePreparedFormula','toLowerCase','subclasses','info','getAbilityModNumber','spellsKnownProgression','race_ixRace','_spell_isCasterClassAtLevel_additionalSpells','notifications','_addHookBase','some','spellsKnownProgressionFixedByLevel','includes','feat_ixMaxCustom','spellLevelHigh','compsSpellSpells','_parent','subclassTableGroups','expandedSpellsRace','appendTo','cantripProgression','pact','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','_spell_renderFeatSections','actor','pLoad','648464fcRzfF','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','spell','_spell_handleFilterChange','rows','_spell_getApproximateCantripProgression','spellsExpanded','floor','copy','spellcastingAbility','\x22)\x20as\x20a\x20number!','_spell_isClassCaster','_spell_getMaxLearnedCantrips','ability','cantrips\x20known','expanded','23446sZswlF','trim','cha','addHookExpandedSpells','feat','_mod$>','<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','290213wbiGND','getValues','showVe','compsSpellAdditionalSpellFeat','keys','_compsSpellSpells','fixedLearnedProgression','_spell_isCasterClassAtLevel','hasSourceJson','getCasterProgression','class_getMaxSpellLevel','handleSearch','spells','warn','innate','map','race','hideVe','findLastIndex','41235wYryIp','state','compClass',')</div>','maxLearnedSpells','_spell_getFixedLearnedProgression','max','/\x202\x20','stripTags','con','render','str','class','targetLevel','empty','mutateAndAddToFilters','full','_CUR_LEVEL','_spell_getApproximateSpellsKnownProgression','bind','filterValuesSpellsCache','[‒]','ability_cntFeats','cha_mod','getCleanSearchTerm','race_cntFeats','<div\x20class=\x22bold\x20mb-2\x22>Subclass\x20Spells\x20(','pRender','handleFilterChange','maxPrepared','ActorCharactermancer.spells_page','compRace','<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>','class_ixMax','192667PeIhuk','776708mwLOQa','2puBfFn','CASTER_TYPE_TO_PROGRESSION','forEach','str_mod','filterBoxSpells','mode','dex','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Save\x20a\x20copy\x20of\x20the\x20current\x20filters,\x20to\x20use\x20when\x20filtering\x20spell\x20lists\x20during\x20import\x20of\x20&quot;prepared\x20spell&quot;\x20casters.\x20For\x20example,\x20if\x20you\x20want\x20your\x20Cleric\x27s\x20spell\x20list\x20to\x20include\x20only\x20PHB\x20spells,\x20you\x20would\x20filter\x20(using\x20the\x20interface\x20above)\x20for\x20PHB\x20spells,\x20then\x20click\x20this\x20button.\x20Note\x20that\x20all\x20the\x20spells\x20that\x20you\x20have\x20selected\x20as\x20learned\x20or\x20that\x20you\x20have\x20selected\x20as\x20prepared\x20will\x20be\x20imported\x20regardless.\x22>Set\x20Prepared\x20Spell\x20Filter</button>','spells\x20known','pPreloadHidden','parent','entries','slice','compFeat','addHookBase','_spell_getMaxLearnedSpells','_spell_isCasterClassAtLevel_additionalSpellsBlock','_pageFilterSpells','preparedSpells','compSpellAdditionalSpellRace','replace','_spell_pRenderFilterBox','int_mod','feat_cntFeatsCustom','_compSpellAdditionalSpellRace','currentLevel','EVNT_VALCHANGE','_compsSpellAdditionalSpellSubclass','toggleVe','totals','split','_modalFilterSpells','constructor'];const _0x4650=function(_0x2e72ff,_0xceb533){_0x2e72ff=_0x2e72ff-0x16a;let _0x959b1b=_0x959b[_0x2e72ff];return _0x959b1b;};const _0x73fc93=_0x4650;(function(_0x5bfcca,_0x5dffce){const _0x506a06=_0x4650;while(!![]){try{const _0x2a4334=-parseInt(_0x506a06(0x16a))+-parseInt(_0x506a06(0x1d9))+parseInt(_0x506a06(0x1a0))+-parseInt(_0x506a06(0x20c))+-parseInt(_0x506a06(0x17d))+-parseInt(_0x506a06(0x1e8))*-parseInt(_0x506a06(0x21c))+-parseInt(_0x506a06(0x19f))*-parseInt(_0x506a06(0x1a1));if(_0x2a4334===_0x5dffce)break;else _0x5bfcca['push'](_0x5bfcca['shift']());}catch(_0x4a3d82){_0x5bfcca['push'](_0x5bfcca['shift']());}}}(_0x959b,0x6ba21));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';class ActorCharactermancerSpell extends ActorCharactermancerBaseComponent{constructor(_0x426ee7){const _0x139cfa=_0x4650;_0x426ee7=_0x426ee7||{},super(),this[_0x139cfa(0x1e4)]=_0x426ee7[_0x139cfa(0x20a)],this[_0x139cfa(0x1cd)]=_0x426ee7['data'],this['_parent']=_0x426ee7[_0x139cfa(0x1ab)],this[_0x139cfa(0x1b2)]=new PageFilterSpells(),this['_modalFilterSpells']=new ModalFilterSpells({'namespace':_0x139cfa(0x1d5),'isRadio':!![],'allData':this['_data'][_0x139cfa(0x20e)]}),this[_0x139cfa(0x1d1)]=null,this['_filterBoxSpells']=null,this[_0x139cfa(0x1e3)]='',this['_compsSpellSpells']=[],this[_0x139cfa(0x1b9)]=null,this[_0x139cfa(0x1bc)]=[],this[_0x139cfa(0x1ef)]={'ability':[],'race':[],'custom':[]};}get[_0x73fc93(0x191)](){const _0x515cde=_0x73fc93;return this[_0x515cde(0x1d1)];}get[_0x73fc93(0x1a5)](){const _0x7f7657=_0x73fc93;return this[_0x7f7657(0x1e6)];}get[_0x73fc93(0x200)](){const _0x354d63=_0x73fc93;return this[_0x354d63(0x16f)];}get[_0x73fc93(0x1b4)](){return this['_compSpellAdditionalSpellRace'];}get['compsSpellAdditionalSpellSubclass'](){return this['_compsSpellAdditionalSpellSubclass'];}get[_0x73fc93(0x16d)](){const _0x78b6e7=_0x73fc93;return this[_0x78b6e7(0x1ef)];}async[_0x73fc93(0x20b)](){const _0x3c6110=_0x73fc93;await this[_0x3c6110(0x1c0)][_0x3c6110(0x1aa)]();}async[_0x73fc93(0x198)](_0x332652){const _0x39fcd3=_0x73fc93,_0x4ba33c=$$`<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll"></div>`,_0x1a1e31=$$`<div class="flex-col w-100 h-100"></div>`;await this[_0x39fcd3(0x1b6)](_0x4ba33c);for(let _0xd8fb72=0x0;_0xd8fb72<this['_parent'][_0x39fcd3(0x17f)]['state'][_0x39fcd3(0x19e)]+0x1;++_0xd8fb72)this[_0x39fcd3(0x1d2)](_0x4ba33c,_0x1a1e31,_0xd8fb72);const _0x461038=()=>{const _0x6a7b24=_0x39fcd3;this[_0x6a7b24(0x1d2)](_0x4ba33c,_0x1a1e31,this['_parent']['compClass'][_0x6a7b24(0x17e)][_0x6a7b24(0x19e)]);};this[_0x39fcd3(0x201)]['compClass'][_0x39fcd3(0x1af)](_0x39fcd3(0x19e),_0x461038),this[_0x39fcd3(0x1d7)](_0x4ba33c),this['_spell_renderFeatSections'](_0x4ba33c,_0x1a1e31,'feat_ixMaxAbility',_0x39fcd3(0x219)),this[_0x39fcd3(0x209)](_0x4ba33c,_0x1a1e31,'feat_ixMaxRace',_0x39fcd3(0x17a)),this['_spell_renderFeatSections'](_0x4ba33c,_0x1a1e31,_0x39fcd3(0x1fe),_0x39fcd3(0x1e7)),this[_0x39fcd3(0x20f)](),$$`<div class="flex w-100 h-100">
			${_0x4ba33c}

			<div class="vr-1"></div>

			<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry">
				${_0x1a1e31}
			</div>
		</div>`[_0x39fcd3(0x204)](_0x332652);}['_spell_renderFeatSections'](_0x45c0a4,_0x2bbc26,_0x4e8156,_0x10ad5e){const _0x55aa4e=_0x73fc93;let _0x440629=this[_0x55aa4e(0x201)][_0x55aa4e(0x1ae)][_0x55aa4e(0x17e)][_0x4e8156]+0x1;const _0x351117=()=>{const _0x584798=_0x55aa4e;for(let _0x2c34e5=_0x440629;_0x2c34e5<this[_0x584798(0x201)][_0x584798(0x1ae)][_0x584798(0x17e)][_0x4e8156]+0x1;++_0x2c34e5)this[_0x584798(0x1d0)](_0x45c0a4,_0x2bbc26,_0x2c34e5,_0x10ad5e);_0x440629=this[_0x584798(0x201)][_0x584798(0x1ae)][_0x584798(0x17e)][_0x4e8156]+0x1;};this[_0x55aa4e(0x1fa)](_0x4e8156,_0x351117),_0x351117();}['_spell_renderFeatSection'](_0xfcad05,_0x3f418f,_0x19244,_0x5749f0){const _0x117f8a=_0x73fc93,{propIxFeat:_0x2d2bb5}=ActorCharactermancerBaseComponent['feat_getProps'](_0x19244,_0x5749f0),_0x2403c2=$$`<div class="flex-col"></div>`[_0x117f8a(0x17b)](),_0x259fe6=()=>{const _0x284a33=_0x117f8a,_0x38fb33=ActorCharactermancerBaseComponent['_CUR_LEVEL'],_0x549325=this[_0x284a33(0x201)]['compClass']['state']['class_totalLevels'],_0x4590d6=this['_compsSpellAdditionalSpellFeat'][_0x5749f0][_0x19244];_0x4590d6&&(_0x4590d6[_0x284a33(0x1ba)]=_0x38fb33,_0x4590d6[_0x284a33(0x18a)]=Math[_0x284a33(0x183)](0x1,_0x549325),_0x4590d6[_0x284a33(0x1eb)]=ActorCharactermancerBaseComponent[_0x284a33(0x1cc)],_0x4590d6[_0x284a33(0x1ff)]=this[_0x284a33(0x201)]['compClass'][_0x284a33(0x174)]());};this[_0x117f8a(0x201)]['compClass'][_0x117f8a(0x1af)]('class_totalLevels',_0x259fe6);const _0x25abce=()=>{const _0x517cf6=_0x117f8a,_0x1ab790=this[_0x517cf6(0x201)][_0x517cf6(0x1ae)][_0x517cf6(0x1ce)]()['includes'](_0x2d2bb5),_0x306011=_0x1ab790?this[_0x517cf6(0x1cd)][_0x517cf6(0x220)][this[_0x517cf6(0x201)][_0x517cf6(0x1ae)]['state'][_0x2d2bb5]]:null;let _0x25eb0f=![];if(_0x1ab790){if(_0x306011&&_0x306011['additionalSpells'])_0x25eb0f=!![];}_0x2a1eeb[_0x517cf6(0x1bd)](_0x25eb0f);};if(_0x5749f0==='ability')this['_parent'][_0x117f8a(0x1da)]['addHookBase'](_0x117f8a(0x193),_0x25abce);if(_0x5749f0===_0x117f8a(0x17a))this[_0x117f8a(0x201)][_0x117f8a(0x19c)][_0x117f8a(0x1af)](_0x117f8a(0x196),_0x25abce);if(_0x5749f0===_0x117f8a(0x1e7))this[_0x117f8a(0x201)][_0x117f8a(0x1ae)]['addHookBase'](_0x117f8a(0x1b8),_0x25abce);const _0x2cad5d=()=>{const _0xa11e9b=_0x117f8a;_0x2403c2['empty']();const _0xa0f79=(_0x5749f0===_0xa11e9b(0x219)||_0x5749f0===_0xa11e9b(0x17a))&&!this[_0xa11e9b(0x201)]['compFeat'][_0xa11e9b(0x1ce)]()[_0xa11e9b(0x1fd)](_0x2d2bb5),_0x45be80=_0xa0f79?null:this[_0xa11e9b(0x1cd)][_0xa11e9b(0x220)][this[_0xa11e9b(0x201)][_0xa11e9b(0x1ae)][_0xa11e9b(0x17e)][_0x2d2bb5]];let _0x346c15=![];_0x45be80&&_0x45be80['additionalSpells']?(_0x346c15=!![],_0x2403c2[_0xa11e9b(0x16c)](),this[_0xa11e9b(0x1ef)][_0x5749f0][_0x19244]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0xa11e9b(0x1cd)]['spell'],'additionalSpells':_0x45be80[_0xa11e9b(0x1e1)],'modalFilterSpells':this[_0xa11e9b(0x1c0)]}),this['_compsSpellAdditionalSpellFeat'][_0x5749f0][_0x19244]['render'](_0x2403c2)):(_0x2403c2['hideVe'](),this[_0xa11e9b(0x1ef)][_0x5749f0][_0x19244]=null),_0x346c15?(_0x2a1eeb[_0xa11e9b(0x16c)](),_0x4ff968['text'](_0x45be80[_0xa11e9b(0x1c5)])):_0x2a1eeb['hideVe'](),_0x259fe6(),_0x25abce();};this[_0x117f8a(0x201)][_0x117f8a(0x1ae)][_0x117f8a(0x1af)](_0x2d2bb5,_0x2cad5d);const _0x4ff968=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x261fc2=$(_0x117f8a(0x20d))['click'](()=>{const _0x5b5c0c=_0x117f8a;_0x261fc2['text'](_0x261fc2[_0x5b5c0c(0x1c9)]()===_0x5b5c0c(0x1c6)?_0x5b5c0c(0x192):_0x5b5c0c(0x1c6)),_0x57394c[_0x5b5c0c(0x1bd)]();}),_0x57394c=$$`<div class="flex-col w-100">
			${_0x2403c2}
		</div>`,_0x2a1eeb=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x4ff968}
				${_0x261fc2}
			</div>

			${_0x57394c}
		</div>`[_0x117f8a(0x17b)]()[_0x117f8a(0x204)](_0xfcad05);_0x2cad5d();}async[_0x73fc93(0x1b6)](_0xb3c306){const _0x21d6f7=_0x73fc93,_0x6f1f53=$(_0x21d6f7(0x222)),_0x397753=$(_0x21d6f7(0x208)),_0x5250c7=$('<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>'),_0x121387=$(_0x21d6f7(0x223))['click'](()=>_0x5250c7['val']('')['keyup']()),_0x1c8f31=$(_0x21d6f7(0x207)),_0x5a75a2=$(_0x21d6f7(0x1a8))['click'](()=>{const _0x164a6a=_0x21d6f7;this[_0x164a6a(0x1d1)]=this[_0x164a6a(0x1e6)]['getValues'](),ui[_0x164a6a(0x1f9)][_0x164a6a(0x1f4)]('Set!');});$$(_0xb3c306)`
			<div class="flex-v-stretch input-group input-group--top no-shrink">
				${_0x6f1f53}
				${_0x397753}
				${_0x5250c7}
				${_0x121387}
			</div>
			${_0x1c8f31}
			<div class="flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>

			<div class="mb-1">${_0x5a75a2}</div>
		`,this['_filterBoxSpells']=await this['_pageFilterSpells']['pInitFilterBox']({'$iptSearch':_0x5250c7,'$btnReset':_0x121387,'$btnOpen':_0x6f1f53,'$btnToggleSummaryHidden':_0x397753,'$wrpMiniPills':_0x1c8f31,'namespace':_0x21d6f7(0x19b)}),this[_0x21d6f7(0x1cd)]['spell'][_0x21d6f7(0x1a3)](_0x5369a9=>this[_0x21d6f7(0x1b2)][_0x21d6f7(0x18c)](_0x5369a9)),this[_0x21d6f7(0x1e6)][_0x21d6f7(0x187)](),this['_filterValuesSpellsCache']=this['_filterBoxSpells']['getValues'](),UiUtil['bindTypingEnd']({'$ipt':_0x5250c7,'fnKeyup':()=>{const _0x4e811e=_0x21d6f7,_0x161333=List[_0x4e811e(0x195)](_0x5250c7['val']());if(this[_0x4e811e(0x1e3)]===_0x161333)return;this[_0x4e811e(0x1e3)]=_0x161333,this[_0x4e811e(0x16f)][_0x4e811e(0x1c8)](Boolean)[_0x4e811e(0x1a3)](_0x509b4b=>_0x509b4b[_0x4e811e(0x175)](_0x161333));}}),this['_filterBoxSpells']['on'](FilterBox[_0x21d6f7(0x1bb)],this[_0x21d6f7(0x20f)][_0x21d6f7(0x190)](this));}['_spell_handleFilterChange'](){const _0x1605eb=_0x73fc93,_0x413d4e=this[_0x1605eb(0x1e6)][_0x1605eb(0x16b)]();this['_compsSpellSpells']['filter'](Boolean)['forEach'](_0x1bb9b8=>_0x1bb9b8[_0x1605eb(0x199)](_0x413d4e));}[_0x73fc93(0x218)](_0x3ed218,_0x18406a){const _0x2924c5=_0x73fc93;if(_0x18406a==null)return null;let _0x1844ef=_0x3ed218[_0x2924c5(0x205)];if(BrewUtil['hasSourceJson'](_0x3ed218['source']))_0x1844ef=_0x1844ef||this[_0x2924c5(0x1c1)][_0x2924c5(0x211)](_0x3ed218);if(!_0x1844ef)return null;return _0x1844ef[_0x18406a-0x1];}[_0x73fc93(0x1b0)](_0x78fa14,_0x47f951){const _0x4fc82a=_0x73fc93;if(_0x47f951==null)return null;let _0x55d91a=_0x78fa14[_0x4fc82a(0x1f6)];if(BrewUtil['hasSourceJson'](_0x78fa14['source']))_0x55d91a=_0x55d91a||this[_0x4fc82a(0x1c1)][_0x4fc82a(0x18f)](_0x78fa14);if(!_0x55d91a)return null;return _0x55d91a[_0x47f951-0x1];}static[_0x73fc93(0x211)](_0x4c9eea){const _0x299f04=_0x73fc93;return this[_0x299f04(0x1d3)](_0x4c9eea,_0x299f04(0x21a));}static['_spell_getApproximateSpellsKnownProgression'](_0x26937f){const _0x3f61c9=_0x73fc93;return this[_0x3f61c9(0x1d3)](_0x26937f,_0x3f61c9(0x1a9));}static['_spell_getApproximateNumberCol'](_0x55472e,_0x498c63){const _0x525095=_0x73fc93,_0x43e455=_0x55472e[_0x525095(0x1d4)]||_0x55472e[_0x525095(0x202)];if(!_0x43e455)return;for(const _0x40b5a1 of _0x43e455){const _0x3174c8=(_0x40b5a1[_0x525095(0x1d8)]||[])[_0x525095(0x1c2)](_0x40d943=>(''+_0x40d943)[_0x525095(0x1f2)]()[_0x525095(0x1fd)](_0x498c63));if(!~_0x3174c8)continue;const _0x3c14e8=(_0x40b5a1[_0x525095(0x210)]||[])[_0x525095(0x179)](_0x207c69=>_0x207c69[_0x525095(0x1c8)]((_0x169679,_0x12862c)=>_0x12862c===_0x3174c8))[_0x525095(0x1c7)]();if(_0x3c14e8[_0x525095(0x1ea)](_0x523332=>!isNaN(_0x523332)))return _0x3c14e8[_0x525095(0x179)](_0x171611=>Number(_0x171611));}}[_0x73fc93(0x182)](_0x5d15e2,_0x1f386b){const _0x44b002=_0x73fc93;if(_0x1f386b==null)return null;if(!_0x5d15e2[_0x44b002(0x1e5)]||!UtilActors[_0x44b002(0x1a2)][_0x5d15e2['casterProgression']])return null;if(!_0x5d15e2[_0x44b002(0x1cf)]&&!_0x5d15e2[_0x44b002(0x1fc)])return null;const _0x4d8438=UtilActors[_0x44b002(0x1a2)][_0x5d15e2[_0x44b002(0x1e5)]],_0x26d900=[...new Array(0x9)]['map'](()=>0x0);return _0x5d15e2[_0x44b002(0x1cf)]&&_0x5d15e2[_0x44b002(0x1cf)][_0x44b002(0x1ad)](0x0,_0x1f386b)[_0x44b002(0x1a3)]((_0x20b192,_0x1d0884)=>{const _0x329b04=_0x44b002,_0x21e71a=_0x4d8438[_0x1d0884],_0x6f8fd6=_0x21e71a[_0x329b04(0x17c)](Boolean);if(!~_0x6f8fd6)return;_0x26d900[_0x6f8fd6]+=_0x20b192;}),_0x5d15e2['spellsKnownProgressionFixedByLevel']&&Object[_0x44b002(0x1ac)](_0x5d15e2[_0x44b002(0x1fc)])[_0x44b002(0x1a3)](([_0x4ede0d,_0x36867b])=>{if(Number(_0x4ede0d)>_0x1f386b)return;Object['entries'](_0x36867b)['forEach'](([_0x584017,_0x436816])=>{_0x584017=Number(_0x584017),_0x26d900[_0x584017-0x1]+=_0x436816;});}),_0x26d900;}['_spell_getMaxPreparedSpells'](_0x2f6c4e,_0x15ae47){const _0x2c0398=_0x73fc93;if(_0x15ae47==null)return null;if(!_0x2f6c4e[_0x2c0398(0x1e5)]||!UtilActors[_0x2c0398(0x1a2)][_0x2f6c4e[_0x2c0398(0x1e5)]])return null;const _0x2af853=UtilActors[_0x2c0398(0x1a2)][_0x2f6c4e[_0x2c0398(0x1e5)]][_0x15ae47-0x1];if(!_0x2af853)return null;if(!_0x2af853[_0x2c0398(0x1fb)](Boolean))return null;let _0xde415=_0x2f6c4e[_0x2c0398(0x1b3)];BrewUtil[_0x2c0398(0x172)](_0x2f6c4e[_0x2c0398(0x1e0)])&&(_0xde415=_0xde415||this[_0x2c0398(0x1c1)][_0x2c0398(0x1f1)](_0x2f6c4e));if(!_0xde415)return null;const _0x26ab31=this[_0x2c0398(0x201)][_0x2c0398(0x1da)][_0x2c0398(0x1ed)](),_0x54c0e4=_0xde415[_0x2c0398(0x1b5)](/<\$([^$]+)\$>/g,(..._0x21e3a8)=>{const _0x3e1e99=_0x2c0398;switch(_0x21e3a8[0x1]){case'level':return _0x15ae47;case _0x3e1e99(0x1a4):return Parser[_0x3e1e99(0x1f5)](_0x26ab31?.[_0x3e1e99(0x1be)]?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.[_0x3e1e99(0x188)]||0x0);case _0x3e1e99(0x1c3):return Parser['getAbilityModNumber'](_0x26ab31?.['totals']?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.[_0x3e1e99(0x1a7)]||0x0);case'con_mod':return Parser[_0x3e1e99(0x1f5)](_0x26ab31?.['totals']?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.[_0x3e1e99(0x186)]||0x0);case _0x3e1e99(0x1b7):return Parser[_0x3e1e99(0x1f5)](_0x26ab31?.[_0x3e1e99(0x1be)]?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.['int']||0x0);case _0x3e1e99(0x1de):return Parser['getAbilityModNumber'](_0x26ab31?.[_0x3e1e99(0x1be)]?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.[_0x3e1e99(0x1dc)]||0x0);case _0x3e1e99(0x194):return Parser[_0x3e1e99(0x1f5)](_0x26ab31?.[_0x3e1e99(0x1be)]?.[_0x26ab31[_0x3e1e99(0x1a6)]]?.[_0x3e1e99(0x21e)]||0x0);default:throw new Error(_0x3e1e99(0x1cb)+_0x21e3a8[0x1]+'\x22');}}),_0x592a0e=eval(_0x54c0e4);if(isNaN(_0x592a0e))return console[_0x2c0398(0x177)](...LGT,_0x2c0398(0x1dd)+_0x54c0e4+'\x22\x20(originally\x20\x22'+_0xde415+_0x2c0398(0x216)),null;return Math['max'](0x1,Math[_0x2c0398(0x213)](_0x592a0e));}static[_0x73fc93(0x1f1)](_0x30038e){const _0x24232b=_0x73fc93;if(!_0x30038e[_0x24232b(0x1e5)]||!_0x30038e[_0x24232b(0x1d4)]||_0x30038e[_0x24232b(0x1e5)]===_0x24232b(0x206))return null;const _0x42be4b=_0x30038e[_0x24232b(0x1d4)][_0x24232b(0x179)](_0x1a8af1=>_0x1a8af1[_0x24232b(0x1d8)]||[])[_0x24232b(0x1c7)]()['map'](_0x5b9ee4=>Renderer[_0x24232b(0x185)]((''+_0x5b9ee4)[_0x24232b(0x21d)]()))['some'](_0x297cb0=>{const _0x453ff6=_0x24232b,_0x4c7159=_0x297cb0['toLowerCase']()[_0x453ff6(0x1bf)](/[^a-z0-9]/g)[_0x453ff6(0x179)](_0x46a654=>_0x46a654[_0x453ff6(0x21d)]())[_0x453ff6(0x1c8)](Boolean);return _0x4c7159['some'](_0x5aa58c=>_0x5aa58c===_0x453ff6(0x20e)||_0x5aa58c===_0x453ff6(0x176))&&_0x4c7159[_0x453ff6(0x1fb)](_0x1f4f1c=>_0x1f4f1c==='known');});if(_0x42be4b)return null;return _0x24232b(0x1df)+(_0x30038e[_0x24232b(0x1e5)]!==_0x24232b(0x18d)?_0x24232b(0x184):'')+'+\x20'+(_0x30038e[_0x24232b(0x215)]?'<$'+_0x30038e['spellcastingAbility']+_0x24232b(0x221):'5');}[_0x73fc93(0x1d2)](_0x626f4,_0x5b4ecd,_0x25db92){const _0x193f91=_0x73fc93,{propIxClass:_0x1555b6,propIxSubclass:_0x31bc09,propTargetLevel:_0x56305e}=ActorCharactermancerBaseComponent['class_getProps'](_0x25db92),_0x165bf8=()=>{const _0x528225=_0x4650,_0x355380=this[_0x528225(0x1cd)]['class'][this[_0x528225(0x201)][_0x528225(0x17f)]['state'][_0x1555b6]],_0x532bd9=this[_0x528225(0x201)][_0x528225(0x17f)][_0x528225(0x17e)][_0x56305e];if(this['_compsSpellSpells'][_0x25db92])this[_0x528225(0x16f)][_0x25db92][_0x528225(0x19a)]=this['_spell_getMaxPreparedSpells'](_0x355380,_0x532bd9);};this['_parent'][_0x193f91(0x1da)][_0x193f91(0x1f0)](_0x165bf8);const _0x545799=()=>{const _0x599f7b=_0x193f91,_0x30d589=this[_0x599f7b(0x1cd)][_0x599f7b(0x189)][this[_0x599f7b(0x201)][_0x599f7b(0x17f)][_0x599f7b(0x17e)][_0x1555b6]],_0x57e9eb=_0x30d589?.[_0x599f7b(0x1f3)]?.[this[_0x599f7b(0x201)][_0x599f7b(0x17f)]['state'][_0x31bc09]],_0x201d9a=ActorCharactermancerBaseComponent[_0x599f7b(0x18e)],_0x4157a8=this[_0x599f7b(0x201)][_0x599f7b(0x17f)][_0x599f7b(0x17e)][_0x56305e],_0x570693=Charactermancer_Class_Util[_0x599f7b(0x1c4)]({'casterProgression':_0x30d589?.['casterProgression'],'curLevel':_0x201d9a,'targetLevel':_0x4157a8}),_0x4413e6=Charactermancer_Class_Util[_0x599f7b(0x1c4)]({'casterProgression':_0x57e9eb?.[_0x599f7b(0x1e5)]||_0x30d589?.['casterProgression'],'curLevel':_0x201d9a,'targetLevel':_0x4157a8});if(this[_0x599f7b(0x16f)][_0x25db92]){if(_0x570693){const {spellLevelLow:_0x5805e6,spellLevelHigh:_0x17f09c}=_0x570693;this[_0x599f7b(0x16f)][_0x25db92]['spellLevelLow']=_0x5805e6,this[_0x599f7b(0x16f)][_0x25db92][_0x599f7b(0x1ff)]=_0x17f09c;}else this[_0x599f7b(0x16f)][_0x25db92]['spellLevelLow']=null,this[_0x599f7b(0x16f)][_0x25db92][_0x599f7b(0x1ff)]=null;this[_0x599f7b(0x16f)][_0x25db92][_0x599f7b(0x1ca)]=this[_0x599f7b(0x218)](_0x30d589,_0x4157a8),this[_0x599f7b(0x16f)][_0x25db92][_0x599f7b(0x181)]=this[_0x599f7b(0x1b0)](_0x30d589,_0x4157a8),this[_0x599f7b(0x16f)][_0x25db92][_0x599f7b(0x170)]=this['_spell_getFixedLearnedProgression'](_0x30d589,_0x4157a8),_0x165bf8();}if(this[_0x599f7b(0x1bc)][_0x25db92]){this['_compsSpellAdditionalSpellSubclass'][_0x25db92]['currentLevel']=_0x201d9a,this['_compsSpellAdditionalSpellSubclass'][_0x25db92][_0x599f7b(0x18a)]=_0x4157a8;if(_0x4413e6){const {spellLevelLow:_0x530056,spellLevelHigh:_0x5f1720}=_0x4413e6;this['_compsSpellAdditionalSpellSubclass'][_0x25db92]['spellLevelLow']=_0x530056,this[_0x599f7b(0x1bc)][_0x25db92]['spellLevelHigh']=_0x5f1720;}else this['_compsSpellAdditionalSpellSubclass'][_0x25db92][_0x599f7b(0x1eb)]=null,this[_0x599f7b(0x1bc)][_0x25db92][_0x599f7b(0x1ff)]=null;}if(_0x30d589){const _0x132d46=this[_0x599f7b(0x1c1)][_0x599f7b(0x171)](_0x30d589,_0x57e9eb,_0x4157a8);_0x4af90c[_0x599f7b(0x1bd)](_0x132d46);}};this[_0x193f91(0x201)][_0x193f91(0x17f)][_0x193f91(0x1af)](_0x56305e,_0x545799);const _0x18454f=()=>{const _0x19c4b0=_0x193f91,_0x23784e=this[_0x19c4b0(0x1cd)][_0x19c4b0(0x189)][this[_0x19c4b0(0x201)][_0x19c4b0(0x17f)]['state'][_0x1555b6]],_0x3979aa=_0x23784e?.['subclasses']?.[this[_0x19c4b0(0x201)]['compClass']['state'][_0x31bc09]];_0x1597bf[_0x19c4b0(0x18b)]();if(!_0x23784e||!this[_0x19c4b0(0x1c1)][_0x19c4b0(0x217)](_0x23784e,_0x3979aa)){_0x4af90c[_0x19c4b0(0x17b)](),this[_0x19c4b0(0x16f)][_0x25db92]=null;return;}this[_0x19c4b0(0x16f)][_0x25db92]=new Charactermancer_Spell({'spellDatas':this['_data'][_0x19c4b0(0x20e)],'className':_0x23784e['name'],'classSource':_0x23784e['source'],'pageFilter':this[_0x19c4b0(0x1b2)],'$wrpPreparedLearned':_0x201bff}),_0x6c3cb3(),this[_0x19c4b0(0x16f)][_0x25db92]['render'](_0x1597bf,_0x5b4ecd);const _0xd26a81=this[_0x19c4b0(0x1e6)]['getValues']();this[_0x19c4b0(0x16f)][_0x25db92][_0x19c4b0(0x199)](_0xd26a81);if(this['_compSpellAdditionalSpellRace'])this['_compsSpellSpells'][_0x25db92]['expandedSpellsRace']=MiscUtil[_0x19c4b0(0x214)](this[_0x19c4b0(0x1b9)]['spellsExpanded']);};this[_0x193f91(0x201)]['compClass'][_0x193f91(0x1af)](_0x1555b6,_0x18454f);const _0x6c3cb3=()=>{const _0x328e5e=_0x193f91,_0x12837a=this['_data'][_0x328e5e(0x189)][this[_0x328e5e(0x201)][_0x328e5e(0x17f)]['state'][_0x1555b6]],_0x44f9eb=_0x12837a?.[_0x328e5e(0x1f3)]?.[this[_0x328e5e(0x201)][_0x328e5e(0x17f)][_0x328e5e(0x17e)][_0x31bc09]];_0x17ccef[_0x328e5e(0x1c9)](_0x12837a?''+_0x12837a['name']+(_0x44f9eb?'\x20('+_0x44f9eb['name']+')':''):''),_0x1c3976[_0x328e5e(0x18b)]();if(_0x44f9eb&&_0x44f9eb[_0x328e5e(0x1e1)]){_0x1c3976[_0x328e5e(0x16c)]()['append'](_0x328e5e(0x197)+_0x44f9eb[_0x328e5e(0x1c5)]+_0x328e5e(0x180)),this['_compsSpellAdditionalSpellSubclass'][_0x25db92]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x328e5e(0x1cd)]['spell'],'additionalSpells':_0x44f9eb[_0x328e5e(0x1e1)],'modalFilterSpells':this[_0x328e5e(0x1c0)]}),this['_compsSpellAdditionalSpellSubclass'][_0x25db92][_0x328e5e(0x187)](_0x1c3976);const _0xd41678=()=>{const _0x574598=_0x328e5e;if(this['_compsSpellSpells'][_0x25db92])this['_compsSpellSpells'][_0x25db92][_0x574598(0x1db)]=MiscUtil[_0x574598(0x214)](this['_compsSpellAdditionalSpellSubclass'][_0x25db92]['spellsExpanded']);};this[_0x328e5e(0x1bc)][_0x25db92]['addHookExpandedSpells'](_0xd41678);}else _0x1c3976[_0x328e5e(0x17b)](),this['_compsSpellAdditionalSpellSubclass'][_0x25db92]=null;_0x545799();if(this['_compsSpellSpells'][_0x25db92])this['_compsSpellSpells'][_0x25db92][_0x328e5e(0x1e5)]=_0x44f9eb?.[_0x328e5e(0x1e5)]||_0x12837a?.['casterProgression'];if(this[_0x328e5e(0x16f)][_0x25db92]&&this[_0x328e5e(0x1bc)][_0x25db92])this[_0x328e5e(0x16f)][_0x25db92][_0x328e5e(0x1db)]=MiscUtil[_0x328e5e(0x214)](this[_0x328e5e(0x1bc)][_0x25db92][_0x328e5e(0x212)]);else{if(this[_0x328e5e(0x16f)][_0x25db92])this[_0x328e5e(0x16f)][_0x25db92][_0x328e5e(0x1db)]=[];}};this[_0x193f91(0x201)][_0x193f91(0x17f)][_0x193f91(0x1af)](_0x31bc09,_0x6c3cb3);const _0x1dd476=()=>{const _0x4d4dd3=_0x193f91;if(!this[_0x4d4dd3(0x16f)][_0x25db92])return;const _0x1806dd=this[_0x4d4dd3(0x1cd)][_0x4d4dd3(0x189)][this[_0x4d4dd3(0x201)][_0x4d4dd3(0x17f)][_0x4d4dd3(0x17e)][_0x1555b6]];if(!_0x1806dd)return;const _0x274be2=this['_parent'][_0x4d4dd3(0x17f)][_0x4d4dd3(0x17e)][_0x56305e];this[_0x4d4dd3(0x16f)][_0x25db92]['maxLearnedCantrips']=this['_spell_getMaxLearnedCantrips'](_0x1806dd,_0x274be2),this['_compsSpellSpells'][_0x25db92][_0x4d4dd3(0x181)]=this[_0x4d4dd3(0x1b0)](_0x1806dd,_0x274be2),this[_0x4d4dd3(0x16f)][_0x25db92][_0x4d4dd3(0x170)]=this[_0x4d4dd3(0x182)](_0x1806dd,_0x274be2),_0x165bf8();};this['_parent']['compClass'][_0x193f91(0x1af)](_0x1555b6,_0x1dd476),this[_0x193f91(0x201)][_0x193f91(0x1af)](_0x56305e,_0x1dd476),_0x1dd476();const _0x17ccef=$(_0x193f91(0x19d)),_0x201bff=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared flex-v-center"></div>`,_0x1597bf=$$`<div class="flex-col"></div>`,_0x1c3976=$$`<div class="flex-col"></div>`['hideVe'](),_0x5a8539=$(_0x193f91(0x20d))[_0x193f91(0x1d6)](()=>{const _0x35320a=_0x193f91;_0x5a8539[_0x35320a(0x1c9)](_0x5a8539[_0x35320a(0x1c9)]()==='[+]'?_0x35320a(0x192):_0x35320a(0x1c6)),_0x5d123f[_0x35320a(0x1bd)]();}),_0x5d123f=$$`<div class="flex-col w-100">
			${_0x1597bf}
			${_0x1c3976}
		</div>`,_0x4af90c=$$`<div class="flex-col mb-2">
			<div class="split-v-center">
				${_0x17ccef}
				${_0x5a8539}
			</div>
			${_0x201bff}

			${_0x5d123f}
		</div>`[_0x193f91(0x204)](_0x626f4);_0x18454f(),_0x6c3cb3();}[_0x73fc93(0x1d7)](_0x4e1d2a){const _0x4c56f9=_0x73fc93,_0x5cc3ad=$$`<div class="flex-col"></div>`['hideVe'](),_0x575a74=()=>{const _0x39f27f=_0x4650,_0x186baa=ActorCharactermancerBaseComponent[_0x39f27f(0x18e)],_0x22d1ca=this[_0x39f27f(0x201)][_0x39f27f(0x17f)][_0x39f27f(0x17e)][_0x39f27f(0x1e9)];this[_0x39f27f(0x1b9)]&&(this['_compSpellAdditionalSpellRace'][_0x39f27f(0x1ba)]=_0x186baa,this[_0x39f27f(0x1b9)]['targetLevel']=Math[_0x39f27f(0x183)](0x1,_0x22d1ca),this[_0x39f27f(0x1b9)]['spellLevelLow']=ActorCharactermancerBaseComponent[_0x39f27f(0x1cc)],this[_0x39f27f(0x1b9)][_0x39f27f(0x1ff)]=this[_0x39f27f(0x201)][_0x39f27f(0x17f)][_0x39f27f(0x174)]());};this[_0x4c56f9(0x201)][_0x4c56f9(0x17f)]['addHookBase'](_0x4c56f9(0x1e9),_0x575a74),this[_0x4c56f9(0x201)][_0x4c56f9(0x17f)][_0x4c56f9(0x1af)](_0x4c56f9(0x1ec),_0x575a74);const _0x104165=()=>{const _0x2f1614=_0x4c56f9;_0x5cc3ad['empty']();const _0x356a51=this[_0x2f1614(0x1cd)][_0x2f1614(0x17a)][this[_0x2f1614(0x201)][_0x2f1614(0x19c)]['state'][_0x2f1614(0x1f7)]];let _0x3f323a=![];if(_0x356a51&&_0x356a51['additionalSpells']){_0x3f323a=!![],_0x5cc3ad['showVe'](),this[_0x2f1614(0x1b9)]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this['_data'][_0x2f1614(0x20e)],'additionalSpells':_0x356a51[_0x2f1614(0x1e1)],'modalFilterSpells':this[_0x2f1614(0x1c0)]}),this[_0x2f1614(0x1b9)][_0x2f1614(0x187)](_0x5cc3ad);const _0x223035=()=>{const _0x1d9ff2=_0x2f1614;this[_0x1d9ff2(0x16f)][_0x1d9ff2(0x1c8)](Boolean)[_0x1d9ff2(0x1a3)](_0x42600f=>_0x42600f[_0x1d9ff2(0x203)]=MiscUtil[_0x1d9ff2(0x214)](this['_compSpellAdditionalSpellRace'][_0x1d9ff2(0x212)]));};this[_0x2f1614(0x1b9)][_0x2f1614(0x21f)](_0x223035),_0x223035();}else _0x5cc3ad[_0x2f1614(0x17b)](),this['_compSpellAdditionalSpellRace']=null,this[_0x2f1614(0x16f)][_0x2f1614(0x1c8)](Boolean)['forEach'](_0x403620=>_0x403620[_0x2f1614(0x203)]=[]);_0x356a51&&_0x3f323a?(_0x38b0f7[_0x2f1614(0x16c)](),_0x26d108['text'](_0x356a51['name'])):_0x38b0f7[_0x2f1614(0x17b)](),_0x575a74();};this['_parent'][_0x4c56f9(0x19c)]['addHookBase'](_0x4c56f9(0x1f7),_0x104165);const _0x26d108=$(_0x4c56f9(0x19d)),_0x7fe814=$(_0x4c56f9(0x20d))[_0x4c56f9(0x1d6)](()=>{const _0x4d1576=_0x4c56f9;_0x7fe814[_0x4d1576(0x1c9)](_0x7fe814[_0x4d1576(0x1c9)]()===_0x4d1576(0x1c6)?_0x4d1576(0x192):'[+]'),_0x163259[_0x4d1576(0x1bd)]();}),_0x163259=$$`<div class="flex-col w-100">
			${_0x5cc3ad}
		</div>`,_0x38b0f7=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x26d108}
				${_0x7fe814}
			</div>

			${_0x163259}
		</div>`['hideVe']()[_0x4c56f9(0x204)](_0x4e1d2a);_0x104165();}static[_0x73fc93(0x217)](_0x1b19f7,_0x109092){const _0x316c8f=_0x73fc93;return _0x1b19f7?.[_0x316c8f(0x1e5)]||_0x109092?.[_0x316c8f(0x1e5)]||_0x1b19f7?.[_0x316c8f(0x1e1)]||_0x109092?.[_0x316c8f(0x1e1)];}static[_0x73fc93(0x171)](_0x950f,_0x2cd540,_0x1004ef){const _0x2aff5b=_0x73fc93;if(!this[_0x2aff5b(0x217)](_0x950f,_0x2cd540))return![];if(_0x1004ef==null)return![];const {spellProgression:_0x557d8a}=Charactermancer_Class_Util[_0x2aff5b(0x173)](_0x950f,_0x2cd540,{'targetLevel':_0x1004ef}),_0xb1cc31=UtilActors['CASTER_TYPE_TO_PROGRESSION'][_0x557d8a];if((_0xb1cc31?.[_0x1004ef-0x1]||[])['some'](Boolean))return!![];if(this['_spell_isCasterClassAtLevel_additionalSpells'](_0x950f?.[_0x2aff5b(0x1e1)],_0x1004ef))return!![];if(this[_0x2aff5b(0x1f8)](_0x2cd540?.['additionalSpells'],_0x1004ef))return!![];return![];}static[_0x73fc93(0x1f8)](_0x304ced,_0x4c7dec){const _0xf9b8b9=_0x73fc93;if(!_0x304ced)return![];if(_0x4c7dec==null)return![];return _0x304ced[_0xf9b8b9(0x1fb)](_0x279e7c=>this[_0xf9b8b9(0x1b1)](_0x279e7c,_0x4c7dec));}static[_0x73fc93(0x1b1)](_0x5be9a9,_0xc4f38){const _0x2f1bc1=_0x73fc93,_0x43666c=Object[_0x2f1bc1(0x16e)](_0x5be9a9);for(const _0x4315be of _0x43666c){switch(_0x4315be){case _0x2f1bc1(0x178):case _0x2f1bc1(0x1ee):case _0x2f1bc1(0x21b):{const _0x3d889c=Object[_0x2f1bc1(0x16e)](_0x5be9a9[_0x4315be]||{})[_0x2f1bc1(0x1fb)](_0x3ff591=>{const _0x1269af=_0x2f1bc1,_0x2973c6=/^s(\d+)$/i[_0x1269af(0x1e2)](_0x3ff591);if(_0x2973c6)return![];if(isNaN(_0x3ff591))return![];return Number(_0x3ff591)<=_0xc4f38;});if(_0x3d889c)return!![];}}}return![];}}export{ActorCharactermancerSpell};