const _0x21f8=['log','toTitleCase','necklace\x20of','_category','natural','_pGetItemItem_tool','_ITEM_PROP_MAP','stringify','requires\x20attunement','breastplate','type','checked-shield','pocket-bow','_pGetItemItem_equipment','range','bonusWeaponAttack','getImageUrlFromFluff','crossed-swords','stealth','dmg1','consume','_getWeaponProperties','feet','uppercaseFirst','eyes\x20of','fluff','loot','Pre-caching\x20complete.','/media/icon/sword-brandish.svg','isStrictMatching','name','amulet\x20of','ring','dex','ver','replace','bonusWeapon','consumable','wand','getSrdCompendiumEntity','dmg2','bonusWeaponDamage','weight','amm','permissions','join','some','isNonstandardSource','_pGetItemItem_getAttunedAndIdentified','push','_ITEM_NAME_TO_DEFAULT_ABILITY','_baseName','</i></div>\x0a\x09\x09\x09<div\x20class=\x22row\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22col-4\x22>','fairy-wand','ability','_baseSrd','_getSrdAliases','toLowerCase','unlit-bomb','galleon','guitar','potion','getDamageAndPropertiesText','_ITEM_TYPE_TO_ARMOR_TYPE','itemValueToFull','horse-head','ammoType','reqAttune','filter','assign','toolbox','two','tied-scroll','headband\x20of','_SIZE_TO_ITEM_WEIGHT_AND_VALUE_EXPONENT','_isItemGroup','_getItemItem_getItemUses','value','_pGetItemItem_container','importItem','brooch\x20of','getRenderedEntries','map','containerCapacity','<div>\x0a\x09\x09\x09<div><i>','_WEAPON_DETAIL_CACHE_INIT','leather-armor','pGetItems','action','importCreature','_pGetItemItem_weapon','exec','backpack','spc','orb-wand','_ITEM_TYPE_TO_CONSUMABLE_TYPE','(?:[\x20(]|^)','_fvttImage','heavy','_pGetActionWeaponDetails_initCaches','_SIZE_TO_ITEM_WEIGHT_MULT','rarity','size','getMetricNumber','bracer\x20of','isAddPermission','data','weaponType','trim','_pGetItemItem_getWeightAndPrice','_ITEM_TYPE_TO_ICON','getNameWithSourcePart','includes','weightless','charges','ft.','pLock','entries','_WEAPON_DETAIL_CACHE_LOCK','bracers\x20of','property','floor','helm\x20of','gauntlets\x20of','wondrous','+@mod','_pGetCompendiumImage','getCleanEntityName','unlock','length','test','_getWeaponTypeAndAbility','slippers\x20of','mwak','thr','pGetItemItem','clothes\x20of','max','wis','import','\x20of\x20','forEach','item','getSourceWithPagePart','dmgType','badge\x20of','dmgTypeToFull','sheetItemsAmmo','itemWeightToFull','_SIZE_TO_ITEM_VALUE_MULT','MODULE_NAME','modules/','quiver','scale-mail','.svg','band\x20of','Unknown','scroll','amount','</div>\x0a\x09\x09\x09</div>\x0a\x09\x09</div>\x0a\x09\x09<hr>\x0a\x09\x09','bonusAc','/media/icon/','_pGetItemItem_getAmmoConsumeDetails','int','rings\x20of','_pGetItemItem_pGetImagePath','tool','str','_pGetItemItem_consumable','simple','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22col-8\x20text-right\x22>','_WEAPON_DETAIL_CACHE','rolling-dices','_pGetItemItem_loot','_pIsInSrd','_getItemItem_getItemDescription','ammo','barrel','crystal-wand','reduce','_ITEM_EQUIPMENT_NAME_RES','_id','lgt','quantity','get','copy','bracelet\x20of','cape\x20of','robe\x20of','rod','source','basic','circlet\x20of'];(function(_0x58dabc,_0x21f8b3){const _0x4e20a2=function(_0x48f922){while(--_0x48f922){_0x58dabc['push'](_0x58dabc['shift']());}};_0x4e20a2(++_0x21f8b3);}(_0x21f8,0x1d9));const _0x4e20=function(_0x58dabc,_0x21f8b3){_0x58dabc=_0x58dabc-0x0;let _0x4e20a2=_0x21f8[_0x58dabc];return _0x4e20a2;};'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';class DataConverterItem{static async['pGetActionWeaponDetails'](_0xccd925,_0xe93d9b){await this[_0x4e20('0xc')]();let _0x2f7c51='',_0x509d98=0x0,_0x3cd264=null,_0x37ca50=_0x4e20('0x40')+SharedConsts[_0x4e20('0x3f')]+_0x4e20('0x86'),_0x393b9b='',_0x439700=_0x4e20('0x6e'),_0x29de81={},_0x5dc982=![],_0x79bb0d=![];const _0x20f2d0=(_0xe93d9b[_0x4e20('0x88')]||'')[_0x4e20('0x8d')](/\(.*\)$/,'')['toLowerCase'](),_0xe2a153=DataConverterItem[_0x4e20('0x54')][_0x20f2d0]?MiscUtil[_0x4e20('0x62')](DataConverterItem[_0x4e20('0x54')][_0x20f2d0]):null;if(_0xe2a153){const {weight:_0x21ad97,price:_0x786672}=DataConverterItem[_0x4e20('0x16')](_0xe2a153,_0xccd925);_0x509d98=_0x21ad97,_0x3cd264=_0x786672,_0x393b9b=(_0xe2a153[_0x4e20('0xe')]||'Unknown')[_0x4e20('0x6b')]();const _0x87a016=this[_0x4e20('0x2c')](_0xe2a153);_0x439700=_0x87a016[_0x4e20('0x14')],_0x29de81=this['_getWeaponProperties'](_0xe2a153);const {isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0xe2a153);_0x5dc982=_0x5dc982||isAttuned,_0x79bb0d=_0x79bb0d||isIdentified,_0x37ca50=_0xe2a153[_0x4e20('0xa')]||_0x37ca50;}return{'damageVersatile':_0x2f7c51,'weight':_0x509d98,'price':_0x3cd264,'img':_0x37ca50,'rarity':_0x393b9b,'weaponType':_0x439700,'itemProperties':_0x29de81,'attuned':_0x5dc982,'identified':_0x79bb0d};}static async[_0x4e20('0xc')](){if(DataConverterItem[_0x4e20('0xbf')])return;await DataConverterItem[_0x4e20('0x1f')][_0x4e20('0x1d')]();try{if(DataConverterItem[_0x4e20('0xbf')])return;console['log'](...LGT,'Pre-caching\x20item\x20lookup...');const {item:_0x328d53}=await Vetools[_0x4e20('0x0')]();for(const _0x39b356 of _0x328d53){if(_0x39b356[_0x4e20('0x74')]==='GV')continue;const _0x31f81f=_0x39b356[_0x4e20('0x88')][_0x4e20('0xa3')](),_0x352d2f=_0x31f81f[_0x4e20('0x8d')](/^(.*?)( \+\d+$)/,(..._0x3e725d)=>_0x3e725d[0x2][_0x4e20('0x15')]()+'\x20'+_0x3e725d[0x1][_0x4e20('0x15')]()),_0x1cf93d=[_0x31f81f,_0x352d2f===_0x31f81f?null:_0x352d2f][_0x4e20('0xae')](Boolean),_0x3e357a=MiscUtil[_0x4e20('0x62')](_0x39b356),_0x3a879a=await Renderer[_0x4e20('0x37')]['pGetFluff'](_0x3e357a);_0x3e357a[_0x4e20('0xa')]=await DataConverterItem['_pGetItemItem_pGetImagePath'](_0x3e357a,_0x3a879a),_0x1cf93d[_0x4e20('0x36')](_0x8f1104=>{if(!DataConverterItem['_WEAPON_DETAIL_CACHE'][_0x8f1104]){DataConverterItem[_0x4e20('0x54')][_0x8f1104]=_0x3e357a;return;}const _0x501e22=DataConverterItem['_WEAPON_DETAIL_CACHE'][_0x8f1104];!(_0x501e22['source']===SRC_DMG||_0x501e22[_0x4e20('0x67')]===SRC_PHB)&&SourceUtil[_0x4e20('0x99')](_0x501e22[_0x4e20('0x67')])&&(DataConverterItem['_WEAPON_DETAIL_CACHE'][_0x8f1104]=_0x3e357a);});}console[_0x4e20('0x6a')](...LGT,_0x4e20('0x85')),DataConverterItem['_WEAPON_DETAIL_CACHE_INIT']=!![];}finally{DataConverterItem[_0x4e20('0x1f')][_0x4e20('0x29')]();}}static async[_0x4e20('0x30')](_0x31a614,_0x1fabbd){_0x1fabbd=_0x1fabbd||{};const _0x354701=_0x31a614[_0x4e20('0x1e')]?JSON[_0x4e20('0x71')](_0x31a614[_0x4e20('0x1e')]):'';if(_0x31a614[_0x4e20('0xb5')])return this['_pGetItemItem_loot'](_0x31a614,_0x1fabbd,_0x354701);let _0x3cf72f;if(await this[_0x4e20('0x57')](_0x31a614))_0x3cf72f=this['_pGetItemItem_fromSrd'](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614[_0x4e20('0x7d')])_0x3cf72f=this[_0x4e20('0x3')](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614[_0x4e20('0x74')]==='AT'||_0x31a614[_0x4e20('0x74')]==='T')_0x3cf72f=this[_0x4e20('0x6f')](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614[_0x4e20('0x74')]==='P'||_0x31a614[_0x4e20('0x74')]==='SC'||_0x31a614[_0x4e20('0x74')]==='WD'&&_0x31a614['charges']||_0x31a614[_0x4e20('0x74')]==='RD'&&_0x31a614['charges']||_0x31a614['poison']||_0x31a614[_0x4e20('0x74')]==='A'||_0x31a614[_0x4e20('0x74')]==='AF')_0x3cf72f=this[_0x4e20('0x51')](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614[_0x4e20('0x74')]==='HA'||_0x31a614['type']==='MA'||_0x31a614[_0x4e20('0x74')]==='LA'||_0x31a614[_0x4e20('0x74')]==='S')_0x3cf72f=this[_0x4e20('0x77')](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614['containerCapacity'])_0x3cf72f=DataConverterItem[_0x4e20('0xb8')](_0x31a614,_0x1fabbd,_0x354701);else{if(_0x31a614[_0x4e20('0x49')]||_0x31a614[_0x4e20('0xa0')]||_0x31a614[_0x4e20('0x25')])_0x3cf72f=this[_0x4e20('0x77')](_0x31a614,_0x1fabbd,_0x354701);else{if(this[_0x4e20('0x5d')][_0x4e20('0x98')](_0x1c2551=>_0x1c2551[_0x4e20('0x2b')](_0x31a614[_0x4e20('0x88')])))_0x3cf72f=this[_0x4e20('0x77')](_0x31a614,_0x1fabbd,_0x354701);else _0x3cf72f=this[_0x4e20('0x56')](_0x31a614,_0x1fabbd,_0x354701);}}}}}}}const _0x52e662=await _0x3cf72f;if(_0x1fabbd[_0x4e20('0x12')])_0x52e662['permission']={'default':Config[_0x4e20('0x61')](_0x4e20('0xb9'),_0x4e20('0x96'))};return _0x52e662;}static async[_0x4e20('0x57')](_0x49ecee){const _0x57a998=await DataConverter[_0x4e20('0x91')]('item',_0x49ecee,{'fnGetAliases':this[_0x4e20('0xa2')]});return!!_0x57a998;}static[_0x4e20('0xa2')](_0x1d32c0){if(!_0x1d32c0[_0x4e20('0x88')])return[];const _0x505103=[];_0x505103[_0x4e20('0x9b')](_0x1d32c0[_0x4e20('0x88')]+'s');if(_0x1d32c0[_0x4e20('0x88')][_0x4e20('0xa3')]()[_0x4e20('0x19')](_0x4e20('0x80')))_0x505103[_0x4e20('0x9b')](_0x1d32c0[_0x4e20('0x88')][_0x4e20('0x8d')](/feet/g,_0x4e20('0x1c')));if(_0x1d32c0[_0x4e20('0x88')][_0x4e20('0x19')](',\x20'))_0x505103[_0x4e20('0x9b')](_0x1d32c0[_0x4e20('0x88')][_0x4e20('0x8d')](/, /g,'\x20'));const _0x39ab9f=/^([^(]+) \(([^)]+)\)$/['exec'](_0x1d32c0['name']['trim']());if(_0x39ab9f)_0x505103['push'](_0x39ab9f[0x2]+_0x4e20('0x35')+_0x39ab9f[0x1]);if(_0x39ab9f)_0x505103[_0x4e20('0x9b')](_0x39ab9f[0x1]);return _0x505103;}static async['_pGetItemItem_fromSrd'](_0x32f445,_0x33e4f9,_0x1b9462){const {weight,price}=this['_pGetItemItem_getWeightAndPrice'](_0x32f445,_0x33e4f9[_0x4e20('0xf')]),{isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0x32f445),{consumeType,consumeTarget,consumeAmount}=this['_pGetItemItem_getAmmoConsumeDetails'](_0x32f445,_0x33e4f9),_0x48131a=await DataConverter[_0x4e20('0x91')]('item',_0x32f445,{'fnGetAliases':this[_0x4e20('0xa2')]}),_0x1ece92={..._0x48131a[_0x4e20('0x13')][_0x4e20('0x7e')]||{}};return _0x1ece92[_0x4e20('0x74')]=_0x1ece92[_0x4e20('0x74')]||consumeType,_0x1ece92['target']=_0x1ece92['target']||consumeTarget,_0x1ece92[_0x4e20('0x47')]=_0x1ece92[_0x4e20('0x47')]||consumeAmount,{'name':UtilApplications[_0x4e20('0x28')](DataConverter['getNameWithSourcePart'](_0x32f445)),'type':_0x48131a[_0x4e20('0x74')],'data':{..._0x48131a[_0x4e20('0x13')],'source':DataConverter[_0x4e20('0x38')](_0x32f445),'description':{'value':DataConverterItem[_0x4e20('0x58')](_0x32f445),'chat':'','unidentified':''},'proficient':!![],'quantity':_0x33e4f9[_0x4e20('0x60')]||_0x32f445[_0x4e20('0x60')]||0x1,'weight':weight,'price':price,'attuned':isAttuned,'identified':isIdentified,'equipped':!![],'rarity':(_0x32f445[_0x4e20('0xe')]||'Unknown')[_0x4e20('0x6b')](),'consume':_0x1ece92,'attunement':_0x32f445[_0x4e20('0xad')]===!![]?'requires\x20attunement':_0x32f445[_0x4e20('0xad')]||''},'img':await DataConverterItem['_pGetItemItem_pGetImagePath'](_0x32f445,_0x33e4f9['fluff'])};}static[_0x4e20('0x16')](_0x58a757,_0x54cd7a){let _0x2375cf=null,_0xec1db5=null,_0x4db09e=null;if(_0x54cd7a==null)return{'weight':Config[_0x4e20('0x10')](_0x4e20('0xb9'),_0x58a757[_0x4e20('0x94')]||0x0,'lb'),'price':!isNaN(_0x58a757[_0x4e20('0xb7')])?_0x58a757[_0x4e20('0xb7')]/0x64:null};const _0x510804=Config[_0x4e20('0x61')](_0x4e20('0x2'),'itemWeightAndValueSizeScaling');switch(_0x510804){case 0x1:{_0x2375cf=_0x58a757[_0x4e20('0x94')]||0x0;break;}case 0x2:{const _0x276192=DataConverterItem['_SIZE_TO_ITEM_WEIGHT_MULT'][_0x54cd7a]||0x1,_0x21f87e=DataConverterItem[_0x4e20('0x3e')][_0x54cd7a]||0x1;_0x58a757[_0x4e20('0x94')]&&!isNaN(_0x58a757[_0x4e20('0x94')])&&(_0x2375cf=Number(_0x58a757[_0x4e20('0x94')])*_0x276192);_0x58a757['value']&&!isNaN(_0x58a757[_0x4e20('0xb7')])&&(_0x4db09e=_0x58a757[_0x4e20('0xb7')]*_0x21f87e);break;}case 0x3:{const _0x198297=DataConverterItem['_SIZE_TO_ITEM_WEIGHT_AND_VALUE_EXPONENT'][_0x54cd7a]||0x1;_0x58a757[_0x4e20('0x94')]&&!isNaN(_0x58a757['weight'])&&(_0x2375cf=Math[_0x4e20('0x22')](Math['pow'](_0x58a757['weight'],_0x198297)));if(_0x58a757[_0x4e20('0xb7')]&&!isNaN(_0x58a757[_0x4e20('0xb7')])){const _0x208019=_0x58a757['value']<0xa?0x1:_0x58a757[_0x4e20('0xb7')]<0x64?0xa:0x64;_0x4db09e=_0x58a757[_0x4e20('0xb7')]/_0x208019,_0x4db09e=Math[_0x4e20('0x22')](Math['pow'](_0x4db09e,_0x198297)),_0x4db09e*=_0x208019;}break;}}if(_0x4db09e)_0xec1db5=_0x4db09e/0x64;return{'weight':Config[_0x4e20('0x10')]('importItem',_0x2375cf||0x0,'lb'),'price':_0xec1db5};}static[_0x4e20('0x9a')](_0x5b2995){const _0x54b2fc=_0x5b2995['rarity']==='none'||_0x5b2995[_0x4e20('0xe')]==='unknown'||_0x5b2995[_0x4e20('0x6d')]===_0x4e20('0x68'),_0xa182f1=!_0x54b2fc&&!!_0x5b2995[_0x4e20('0xad')];return{'isAttuned':_0xa182f1,'isIdentified':!_0x54b2fc};}static[_0x4e20('0x58')](_0x51105d){const [_0x342a45,_0x423ba5,_0x4028c1]=Renderer[_0x4e20('0x37')][_0x4e20('0xa8')](_0x51105d);return _0x4e20('0xbe')+Renderer[_0x4e20('0x37')]['getTypeRarityAndAttunementText'](_0x51105d)[_0x4e20('0x81')]()+_0x4e20('0x9e')+[Parser[_0x4e20('0xaa')](_0x51105d),Parser[_0x4e20('0x3d')](_0x51105d)][_0x4e20('0xae')](Boolean)[_0x4e20('0x97')](',\x20')['uppercaseFirst']()+_0x4e20('0x53')+_0x342a45+'\x20'+_0x423ba5+'\x20'+_0x4028c1+_0x4e20('0x48')+Renderer['item'][_0x4e20('0xbb')](_0x51105d,!![]);}static[_0x4e20('0xb6')](_0x2f1d86){let _0x5bc315=0x0;if(_0x2f1d86[_0x4e20('0x1b')]){if(isNaN(_0x2f1d86[_0x4e20('0x1b')])){const _0xa4e489=/{@dice (\d)+d(\d+)\s*(?:[-+]\s*\d+)?}/i[_0x4e20('0x4')](_0x2f1d86['charges']);_0xa4e489&&(_0x5bc315=Number(_0xa4e489[0x1])*Number(_0xa4e489[0x2])+(_0xa4e489[0x3]?Number(_0xa4e489[0x3][_0x4e20('0x8d')](/\s*/g,'')):0x0));}else _0x5bc315=_0x2f1d86[_0x4e20('0x1b')];}return _0x5bc315;}static[_0x4e20('0x2c')](_0x406a73){let _0x481c39='',_0x482b62=_0x4e20('0x50');if(_0x406a73[_0x4e20('0x74')]==='A'||_0x406a73[_0x4e20('0x74')]==='AF')_0x481c39=_0x4e20('0x59'),_0x482b62=_0x4e20('0x8b');else{if(_0x406a73[_0x4e20('0x74')]==='M'||_0x406a73[_0x4e20('0x74')]==='R'){if((_0x406a73['weaponCategory']||'')[_0x4e20('0xa3')]()==='martial')_0x481c39='martial'+_0x406a73[_0x4e20('0x74')];else{if((_0x406a73['weaponCategory']||'')[_0x4e20('0xa3')]()===_0x4e20('0x52'))_0x481c39='simple'+_0x406a73[_0x4e20('0x74')];}}}if(_0x406a73[_0x4e20('0x74')]==='R')_0x482b62=_0x4e20('0x8b');else{if(_0x406a73[_0x4e20('0x21')]&&_0x406a73[_0x4e20('0x21')][_0x4e20('0x19')]('F'))_0x482b62='dex';}return{'weaponType':_0x481c39,'weaponAbility':_0x482b62};}static[_0x4e20('0x7f')](_0x5d1194){return _0x5d1194[_0x4e20('0x21')]?_0x5d1194[_0x4e20('0x21')][_0x4e20('0xbc')](_0x4abd1f=>DataConverterItem[_0x4e20('0x70')][_0x4abd1f])['filter'](Boolean)['map'](_0x31a13d=>({[_0x31a13d]:!![]}))[_0x4e20('0x5c')]((_0x5ee335,_0x29ccd8)=>Object[_0x4e20('0xaf')](_0x5ee335,_0x29ccd8),{}):{};}static async[_0x4e20('0x3')](_0x227d1c,_0x1fbc05,_0x37926d){const {weaponType,weaponAbility}=this['_getWeaponTypeAndAbility'](_0x227d1c),{weight,price}=this[_0x4e20('0x16')](_0x227d1c,_0x1fbc05['size']),{isAttuned,isIdentified}=this['_pGetItemItem_getAttunedAndIdentified'](_0x227d1c),{consumeType,consumeTarget,consumeAmount}=this[_0x4e20('0x4b')](_0x227d1c,_0x1fbc05),_0x3e9c0a=this[_0x4e20('0x7f')](_0x227d1c);let _0x3cf978='';if(_0x227d1c[_0x4e20('0x7d')]){_0x3cf978=_0x227d1c[_0x4e20('0x7d')];if(_0x227d1c[_0x4e20('0x8e')])_0x3cf978=''+_0x3cf978+_0x227d1c[_0x4e20('0x8e')];else{if(_0x227d1c[_0x4e20('0x93')])_0x3cf978=''+_0x3cf978+_0x227d1c[_0x4e20('0x93')];}_0x3cf978=_0x3cf978+_0x4e20('0x26');}let _0x19581d='';if(_0x227d1c[_0x4e20('0x92')]){_0x19581d=_0x227d1c[_0x4e20('0x92')];if(_0x227d1c[_0x4e20('0x8e')])_0x19581d=''+_0x19581d+_0x227d1c['bonusWeapon'];else{if(_0x227d1c['bonusWeaponDamage'])_0x19581d=''+_0x19581d+_0x227d1c['bonusWeaponDamage'];}_0x19581d=_0x19581d+_0x4e20('0x26');}let _0x3aa621=0x0,_0x2c25b8=0x0;if(_0x227d1c[_0x4e20('0x78')]){const _0x4dc026=(''+_0x227d1c[_0x4e20('0x78')])[_0x4e20('0x15')](),_0x40186b=/^(\d+)\/(\d+)$/i[_0x4e20('0x4')](_0x4dc026);_0x40186b&&(_0x3aa621=Number(_0x40186b[0x1]),_0x2c25b8=Number(_0x40186b[0x2]));const _0x319b11=/^(\d+)$/i['exec'](_0x4dc026);if(_0x319b11)_0x3aa621=Number(_0x319b11[0x1]);}const _0x1efd83=this[_0x4e20('0xb6')](_0x227d1c);return{'name':UtilApplications[_0x4e20('0x28')](DataConverter[_0x4e20('0x18')](_0x227d1c)),'type':'weapon','data':{'source':DataConverter[_0x4e20('0x38')](_0x227d1c),'description':{'value':DataConverterItem['_getItemItem_getItemDescription'](_0x227d1c),'chat':'','unidentified':''},'proficient':!![],'quantity':_0x1fbc05[_0x4e20('0x60')]||_0x227d1c[_0x4e20('0x60')]||0x1,'weight':weight,'price':price,'attuned':isAttuned,'identified':isIdentified,'equipped':!![],'rarity':(_0x227d1c[_0x4e20('0xe')]||_0x4e20('0x45'))[_0x4e20('0x6b')](),'damage':{'parts':[[_0x3cf978,_0x227d1c[_0x4e20('0x39')]?Parser[_0x4e20('0x3b')](_0x227d1c[_0x4e20('0x39')]):'']],'versatile':_0x19581d},'range':{'value':_0x3aa621,'long':_0x2c25b8,'units':'ft'},'weaponType':weaponType,'ability':weaponAbility,'properties':_0x3e9c0a,'attunement':_0x227d1c['reqAttune']===!![]?_0x4e20('0x72'):_0x227d1c[_0x4e20('0xad')]||'','activation':{'type':_0x4e20('0x1'),'cost':0x1,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'uses':{'value':_0x1efd83,'max':_0x1efd83,'per':''},'actionType':_0x227d1c[_0x4e20('0x74')]==='R'?'rwak':_0x4e20('0x2e'),'attackBonus':_0x227d1c['bonusWeapon']||_0x227d1c[_0x4e20('0x79')]||0x0,'chatFlavor':'','critical':null,'formula':'','save':{'ability':'','dc':0x0},'consume':{'type':consumeType,'target':consumeTarget,'amount':consumeAmount}},'img':await DataConverterItem[_0x4e20('0x4e')](_0x227d1c,_0x1fbc05[_0x4e20('0x83')])};}static async[_0x4e20('0x77')](_0x28c31c,_0xbc3303,_0x423a10){const {weight,price}=this['_pGetItemItem_getWeightAndPrice'](_0x28c31c,_0xbc3303[_0x4e20('0xf')]),{isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0x28c31c);let _0x30ca35=_0x28c31c['bonusAc']?Number(_0x28c31c['bonusAc']):0x0;if(isNaN(_0x30ca35))_0x30ca35=0x0;const _0x40d0df=_0x28c31c[_0x4e20('0x74')]==='HA'||_0x28c31c[_0x4e20('0x74')]==='MA'||_0x28c31c[_0x4e20('0x74')]==='LA'||_0x28c31c[_0x4e20('0x74')]==='S',_0x4f63f8=_0x40d0df?(_0x28c31c['ac']||0xa)+_0x30ca35:_0x28c31c['bonusAc']?_0x30ca35:null,_0x32ffd5=this['_getItemItem_getItemUses'](_0x28c31c);return{'name':UtilApplications['getCleanEntityName'](DataConverter[_0x4e20('0x18')](_0x28c31c)),'type':'equipment','data':{'source':DataConverter[_0x4e20('0x38')](_0x28c31c),'description':{'value':DataConverterItem[_0x4e20('0x58')](_0x28c31c),'chat':'','unidentified':''},'proficient':!![],'quantity':_0xbc3303[_0x4e20('0x60')]||_0x28c31c[_0x4e20('0x60')]||0x1,'weight':weight,'price':price,'attuned':isAttuned,'identified':isIdentified,'equipped':!![],'rarity':(_0x28c31c[_0x4e20('0xe')]||'Unknown')[_0x4e20('0x6b')](),'attunement':_0x28c31c[_0x4e20('0xad')]===!![]?_0x4e20('0x72'):_0x28c31c[_0x4e20('0xad')]||'','activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':_0x32ffd5,'max':_0x32ffd5,'per':null},'ability':'','actionType':'','attackBonus':0x0,'chatFlavor':'','critical':null,'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'armor':{'type':DataConverterItem[_0x4e20('0xa9')][_0x28c31c['type']]||'','value':_0x4f63f8,'dex':_0x28c31c['type']==='MA'?0x2:_0x28c31c['type']==='HA'?0x0:null},'strength':_0x28c31c['strength']||null,'stealth':!!_0x28c31c[_0x4e20('0x7c')]},'img':await DataConverterItem[_0x4e20('0x4e')](_0x28c31c,_0xbc3303[_0x4e20('0x83')])};}static async[_0x4e20('0xb8')](_0x22faa9,_0x5d40ac,_0x748c2a){const {weight,price}=this[_0x4e20('0x16')](_0x22faa9,_0x5d40ac[_0x4e20('0xf')]),{isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0x22faa9),_0x136f85=_0x22faa9[_0x4e20('0xbd')]['weight']?_0x22faa9[_0x4e20('0xbd')][_0x4e20('0x94')][_0x4e20('0x5c')]((_0x776e98,_0x2cdf4a)=>_0x776e98+_0x2cdf4a,0x0):Math[_0x4e20('0x32')](..._0x22faa9[_0x4e20('0xbd')][_0x4e20('0x37')]['map'](_0x60ce1d=>Math[_0x4e20('0x32')](...Object['values'](_0x60ce1d))));return{'name':UtilApplications[_0x4e20('0x28')](DataConverter['getNameWithSourcePart'](_0x22faa9)),'type':_0x4e20('0x5'),'data':{'source':DataConverter['getSourceWithPagePart'](_0x22faa9),'description':{'value':DataConverterItem[_0x4e20('0x58')](_0x22faa9),'chat':'','unidentified':''},'quantity':_0x5d40ac[_0x4e20('0x60')]||_0x22faa9[_0x4e20('0x60')]||0x1,'weight':weight,'price':price,'attuned':isAttuned,'equipped':!![],'identified':isIdentified,'rarity':(_0x22faa9['rarity']||_0x4e20('0x45'))[_0x4e20('0x6b')](),'capacity':{'type':_0x22faa9[_0x4e20('0xbd')]['weight']?_0x4e20('0x94'):'items','value':_0x136f85,'weightless':!!_0x22faa9[_0x4e20('0xbd')][_0x4e20('0x1a')]},'attunement':_0x22faa9[_0x4e20('0xad')]===!![]?_0x4e20('0x72'):_0x22faa9[_0x4e20('0xad')]||'','damage':{'parts':[]}},'img':await DataConverterItem[_0x4e20('0x4e')](_0x22faa9,_0x5d40ac['fluff'])};}static async[_0x4e20('0x51')](_0x4b45c5,_0x59901e,_0x22c74b){const {weight,price}=this[_0x4e20('0x16')](_0x4b45c5,_0x59901e[_0x4e20('0xf')]),{isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0x4b45c5),_0x549dc6=(_0x4b45c5['poison']?'poison':DataConverterItem[_0x4e20('0x8')][_0x4b45c5[_0x4e20('0x74')]])||'';let _0x15aecc='',_0x29b81c=![];_0x22c74b[_0x4e20('0x8d')](/if you expend[^.]+last charge[^.]+roll[^.]+{@dice ([^}]+)}(?:[^.]+)?\.(?:[^.]+)on a[^.]+\d+[^.]+destroyed/ig,(..._0x1385fe)=>{_0x15aecc=_0x1385fe[0x1],_0x29b81c=!![];});if(_0x4b45c5[_0x4e20('0x74')]==='SC'||_0x4b45c5[_0x4e20('0x74')]==='P')_0x29b81c=!![];const _0xe05f75=this['_getItemItem_getItemUses'](_0x4b45c5);return{'name':UtilApplications[_0x4e20('0x28')](DataConverter[_0x4e20('0x18')](_0x4b45c5)),'type':_0x4e20('0x8f'),'data':{'source':DataConverter[_0x4e20('0x38')](_0x4b45c5),'description':{'value':DataConverterItem[_0x4e20('0x58')](_0x4b45c5),'chat':'','unidentified':''},'quantity':_0x59901e['quantity']||_0x4b45c5['quantity']||0x1,'weight':weight,'price':price,'attuned':isAttuned,'equipped':!![],'identified':isIdentified,'rarity':(_0x4b45c5[_0x4e20('0xe')]||_0x4e20('0x45'))['toTitleCase'](),'consumableType':_0x549dc6,'attunement':_0x4b45c5[_0x4e20('0xad')]===!![]?_0x4e20('0x72'):_0x4b45c5[_0x4e20('0xad')]||'','activation':{'type':'action','cost':0x1,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':_0xe05f75,'max':_0xe05f75,'per':null,'autoUse':!![],'autoDestroy':_0x29b81c},'ability':'','actionType':null,'attackBonus':0x0,'chatFlavor':'','critical':null,'damage':{'parts':[],'versatile':''},'formula':_0x15aecc,'save':{'ability':'','dc':null}},'img':await DataConverterItem[_0x4e20('0x4e')](_0x4b45c5,_0x59901e[_0x4e20('0x83')])};}static async[_0x4e20('0x6f')](_0xa5a226,_0x5b7377,_0x1a6b92){const {weight,price}=this[_0x4e20('0x16')](_0xa5a226,_0x5b7377['size']),{isAttuned,isIdentified}=this['_pGetItemItem_getAttunedAndIdentified'](_0xa5a226);let _0x39c42c=DataConverterItem['_ITEM_NAME_TO_DEFAULT_ABILITY'][_0xa5a226['name']]||_0x4e20('0x4c');return{'name':UtilApplications[_0x4e20('0x28')](DataConverter[_0x4e20('0x18')](_0xa5a226)),'type':_0x4e20('0x4f'),'data':{'source':DataConverter[_0x4e20('0x38')](_0xa5a226),'description':{'value':DataConverterItem[_0x4e20('0x58')](_0xa5a226),'chat':'','unidentified':''},'quantity':_0x5b7377[_0x4e20('0x60')]||_0xa5a226['quantity']||0x1,'weight':weight,'price':price,'attuned':isAttuned,'equipped':!![],'identified':isIdentified,'rarity':(_0xa5a226[_0x4e20('0xe')]||_0x4e20('0x45'))[_0x4e20('0x6b')](),'proficient':0x1,'ability':_0x39c42c,'attunement':_0xa5a226[_0x4e20('0xad')]===!![]?'requires\x20attunement':_0xa5a226[_0x4e20('0xad')]||'','chatFlavor':'','damage':{'parts':[]}},'img':await DataConverterItem[_0x4e20('0x4e')](_0xa5a226,_0x5b7377[_0x4e20('0x83')])};}static async['_pGetItemItem_loot'](_0x4c6d10,_0x398fff,_0x536c8){const {weight,price}=this['_pGetItemItem_getWeightAndPrice'](_0x4c6d10,_0x398fff[_0x4e20('0xf')]),{isAttuned,isIdentified}=this[_0x4e20('0x9a')](_0x4c6d10);return{'name':UtilApplications['getCleanEntityName'](DataConverter[_0x4e20('0x18')](_0x4c6d10)),'type':_0x4e20('0x84'),'data':{'source':DataConverter[_0x4e20('0x38')](_0x4c6d10),'description':{'value':DataConverterItem['_getItemItem_getItemDescription'](_0x4c6d10),'chat':'','unidentified':''},'quantity':_0x398fff['quantity']||_0x4c6d10[_0x4e20('0x60')]||0x1,'weight':weight,'price':price,'attuned':isAttuned,'equipped':!![],'identified':isIdentified,'rarity':(_0x4c6d10[_0x4e20('0xe')]||'Unknown')[_0x4e20('0x6b')](),'attunement':_0x4c6d10[_0x4e20('0xad')]===!![]?'requires\x20attunement':_0x4c6d10['reqAttune']||'','damage':{'parts':[]}},'img':await DataConverterItem[_0x4e20('0x4e')](_0x4c6d10,_0x398fff[_0x4e20('0x83')])};}static async['_pGetItemItem_pGetImagePath'](_0x4aeb5a,_0x23586f){const _0x1580c9=Vetools[_0x4e20('0x7a')](_0x23586f);if(_0x1580c9)return _0x1580c9;const _0x395745=await this[_0x4e20('0x27')](_0x4aeb5a);if(_0x395745)return _0x395745;return _0x4e20('0x40')+SharedConsts[_0x4e20('0x3f')]+_0x4e20('0x4a')+(DataConverterItem[_0x4e20('0x17')][_0x4aeb5a[_0x4e20('0x74')]]||_0x4e20('0x7b'))+_0x4e20('0x43');}static['_pGetItemItem_getAmmoConsumeDetails'](_0x576f47,_0x54831a){let _0x41d308='',_0x7c8184='',_0x107953=null;if(_0x576f47[_0x4e20('0xac')]){_0x41d308=_0x4e20('0x59'),_0x107953=0x1;if(_0x54831a[_0x4e20('0x3c')]){const [_0x3de7c8,_0xc22c9e]=_0x576f47[_0x4e20('0xac')][_0x4e20('0xa3')]()['split']('|')[_0x4e20('0xbc')](_0x463943=>_0x463943[_0x4e20('0x15')]())[_0x4e20('0xae')](Boolean),_0x378d9e=(_0xc22c9e||SRC_DMG)[_0x4e20('0xa3')](),_0x382bc0=_0x3de7c8[_0x4e20('0x8d')](/s+$/g,''),_0x7add4=_0x54831a[_0x4e20('0x3c')][_0x4e20('0xae')](_0x2c713e=>{const _0x35835d=_0x2c713e['name'][_0x4e20('0xa3')]()[_0x4e20('0x15')]()[_0x4e20('0x8d')](/s+$/g,'');return _0x35835d===_0x382bc0&&(!Config['get'](_0x4e20('0x34'),_0x4e20('0x87'))||(DataConverter['getItemSource'](_0x2c713e)||'')[_0x4e20('0xa3')]()===_0x378d9e);});_0x7add4[_0x4e20('0x2a')]&&(_0x7c8184=_0x7add4[0x0][_0x4e20('0x5e')]);}}return{'consumeType':_0x41d308,'consumeTarget':_0x7c8184,'consumeAmount':_0x107953};}static async[_0x4e20('0x27')](_0x1b87ab){const _0x300b5c=await DataConverter['pGetCompendiumImage'](_0x4e20('0x37'),_0x1b87ab,{'fnGetAliases':this['_getSrdAliases']});if(_0x300b5c)return _0x300b5c;if(_0x1b87ab[_0x4e20('0x9d')])return DataConverter['pGetCompendiumImage'](_0x4e20('0x37'),{'name':_0x1b87ab[_0x4e20('0x9d')],'source':_0x1b87ab['_baseSource']||_0x1b87ab[_0x4e20('0x67')],'srd':_0x1b87ab[_0x4e20('0xa1')]},{'fnGetAliases':this[_0x4e20('0xa2')]});}}DataConverterItem[_0x4e20('0xbf')]=![],DataConverterItem['_WEAPON_DETAIL_CACHE']={},DataConverterItem[_0x4e20('0x1f')]=new VeLock(),DataConverterItem['_ITEM_TYPE_TO_ARMOR_TYPE']={'HA':_0x4e20('0xb'),'MA':'medium','LA':'light','S':'shield'},DataConverterItem[_0x4e20('0x8')]={'A':_0x4e20('0x59'),'AF':_0x4e20('0x59'),'P':_0x4e20('0xa7'),'SC':_0x4e20('0x46'),'WD':_0x4e20('0x90'),'RD':_0x4e20('0x66')},DataConverterItem[_0x4e20('0x9c')]={'Alchemist\x27s\x20Supplies':_0x4e20('0x4c'),'Brewer\x27s\x20Supplies':_0x4e20('0x4c'),'Calligrapher\x27s\x20Supplies':_0x4e20('0x4c'),'Carpenter\x27s\x20Tools':'int','Cartographer\x27s\x20Tools':_0x4e20('0x4c'),'Cobbler\x27s\x20Tools':_0x4e20('0x4c'),'Cook\x27s\x20Utensils':'wis','Disguise\x20Kit':'cha','Forgery\x20Kit':_0x4e20('0x4c'),'Glassblower\x27s\x20Tools':_0x4e20('0x4c'),'Herbalism\x20Kit':_0x4e20('0x33'),'Jeweler\x27s\x20Tools':_0x4e20('0x4c'),'Leatherworker\x27s\x20Tools':_0x4e20('0x4c'),'Mason\x27s\x20Tools':_0x4e20('0x4c'),'Navigator\x27s\x20Tools':_0x4e20('0x33'),'Painter\x27s\x20Supplies':_0x4e20('0x4c'),'Poisoner\x27s\x20Kit':_0x4e20('0x33'),'Potter\x27s\x20Tools':'int','Smith\x27s\x20Tools':_0x4e20('0x4c'),'Thieves\x27\x20Tools':_0x4e20('0x8b'),'Tinker\x27s\x20Tools':_0x4e20('0x4c'),'Weaver\x27s\x20Tools':'int','Woodcarver\x27s\x20Tools':_0x4e20('0x4c')},DataConverterItem[_0x4e20('0x17')]={'A':'quiver','AF':_0x4e20('0x41'),'AT':'toolbox','EM':'','EXP':_0x4e20('0xa4'),'G':_0x4e20('0x5'),'GS':_0x4e20('0x55'),'HA':_0x4e20('0x73'),'INS':_0x4e20('0xa6'),'LA':_0x4e20('0xc0'),'M':_0x4e20('0x7b'),'MA':_0x4e20('0x42'),'MNT':_0x4e20('0xab'),'GV':'','P':'potion-ball','R':_0x4e20('0x76'),'RD':_0x4e20('0x5b'),'RG':_0x4e20('0x8a'),'S':_0x4e20('0x75'),'SC':_0x4e20('0xb2'),'SCF':_0x4e20('0x7'),'OTH':'','T':_0x4e20('0xb0'),'TAH':'','TG':_0x4e20('0x5a'),'VEH':'old-wagon','SHP':_0x4e20('0xa5'),'AIR':'air-balloon','WD':_0x4e20('0x9f')},DataConverterItem[_0x4e20('0x70')]={'A':_0x4e20('0x95'),'AF':'amm','BF':'','F':'fin','H':'hvy','L':_0x4e20('0x5f'),'LD':'rel','R':'rch','RLD':'rel','S':_0x4e20('0x6'),'T':_0x4e20('0x2f'),'2H':_0x4e20('0xb1'),'V':_0x4e20('0x8c')},DataConverterItem['_ITEM_EQUIPMENT_NAME_RES']=[_0x4e20('0x89'),_0x4e20('0x3a'),_0x4e20('0x44'),'belt\x20of','boots\x20of',_0x4e20('0x63'),_0x4e20('0x11'),_0x4e20('0x20'),_0x4e20('0xba'),_0x4e20('0x64'),_0x4e20('0x69'),_0x4e20('0x31'),'crown\x20of',_0x4e20('0x82'),_0x4e20('0x24'),'gloves\x20of','goggles\x20of','hat\x20of',_0x4e20('0xb3'),_0x4e20('0x23'),'mantle\x20of','mask\x20of',_0x4e20('0x6c'),'periapt\x20of','ring\x20of',_0x4e20('0x4d'),_0x4e20('0x65'),_0x4e20('0x2d')][_0x4e20('0xbc')](_0x22f184=>new RegExp(_0x4e20('0x9')+_0x22f184,'i')),DataConverterItem[_0x4e20('0xd')]={[SZ_FINE]:0.5,[SZ_DIMINUTIVE]:0.5,[SZ_TINY]:0.5,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x2,[SZ_HUGE]:0x4,[SZ_GARGANTUAN]:0x8,[SZ_COLOSSAL]:0x10,[SZ_VARIES]:0x1},DataConverterItem[_0x4e20('0x3e')]={[SZ_FINE]:0.25,[SZ_DIMINUTIVE]:0.25,[SZ_TINY]:0.25,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x4,[SZ_HUGE]:0x10,[SZ_GARGANTUAN]:0x40,[SZ_COLOSSAL]:0x100,[SZ_VARIES]:0x1},DataConverterItem[_0x4e20('0xb4')]={[SZ_FINE]:0.5,[SZ_DIMINUTIVE]:0.5,[SZ_TINY]:0.5,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x2,[SZ_HUGE]:0x3,[SZ_GARGANTUAN]:0x4,[SZ_COLOSSAL]:0x5,[SZ_VARIES]:0x1};export{DataConverterItem};