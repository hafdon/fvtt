const _0x329d=['_pGetItemItem_tool','_getItemAcMeta','pGetActionWeaponDetails','409878aRTpgP','floor','galleon','weapon','_getItemItem_getItemDescription','map','_pGetItemEffects','ammo','permission','checked-shield','crossed-swords','Base','containerCapacity','amulet\x20of','lgt','filter','getDamageAndPropertiesText','strength','_getItemFlags','bonusSpellAttack','PG_ITEMS','_baseName','ring\x20of','_pGetItemItem_pGetImagePath','scale-mail','weaponCategory','_WEAPON_DETAIL_CACHE_INIT','bardingType','wondrous','getTypeRarityAndAttunementText','filterValues','_fvttImage','Unhandled\x20importer\x20type\x20\x22','source','_pGetActionWeaponDetails_initCaches','bonusWeaponAttack','toTitleCase','pLock','_getItemImporterType','modules/','_ITEM_TYPE_TO_ARMOR_TYPE','Saving\x20Throw\x20Bonus','pocket-bow','hvy','copy','splice','_ITEM_TYPE_TO_ICON','crown\x20of','27479aDdNbF','backpack','clothes\x20of','helm\x20of','necklace\x20of','mwak','_pGetItemItem_getAttunedIdentifiedEquipped','bracelet\x20of','_getItemAttunement','orb-wand','_pGetItemItem_fromSrd','attAbvToFull','getItemEffect','rwak','split','dmgType','value','replace','</div>\x0a\x09\x09\x09</div>\x0a\x09\x09</div>\x0a\x09\x09<hr>\x0a\x09\x09','MODULE_NAME','_pGetCompendiumImage','reduce','+@mod','shield','equipment','none','light','min','headband\x20of','isStrictMatching','scroll','data.abilities.','_ITEM_PROP_MAP','int','dmg1','heavy','name','ability','.value','dmg2','Bonus\x20','leather-armor','data.bonuses.spell.dc','basic','data.attributes.prof','rolling-dices','getCleanEntityName','quiver','items','_getWeaponProperties','bonusAc','isEquipped','fin','property','_pGetItemEffects_getGenericBonus','feet','mantle\x20of','/media/icon/','itemValueToFull','log','\x20+\x20{','rch','.svg',',\x20@abilities.dex.mod}kl','getSourceWithPagePart','_WEAPON_DETAIL_CACHE_LOCK','weight','199972VGDkmS','rel','trim','Base\x20','loot','_pIsInSrd','167386weTzmZ','(?:[\x20(]|^)','_pGetItemItem_getWeightAndPrice','bonusWeapon','slippers\x20of','rings\x20of','ammoType','band\x20of','_SIZE_TO_ITEM_VALUE_MULT','Unknown','_IMPORT_TYPE_CONTAINER','<div>\x0a\x09\x09\x09<div><i>','_pGetItemItem_consumable','URL_TO_HASH_BUILDER','_pGetItemItem_loot','\x20AC','air-balloon','ring','_IMPORT_TYPE_LOOT','pGetCompendiumImage','bracers\x20of','fluff','horse-head','toLowerCase','ver','5bqLBbJ','getCustomKey','belt\x20of','reqAttune','target','import','martial','some','exec','_IMPORT_TYPE_EQUIPMENT','_IMPORT_TYPE_CONSUMABLE','_getWeaponTypeAndAbility','simple','brooch\x20of','amm','sheetItemsAmmo','acValue','eyes\x20of','two','120528fHfYmd','wis','_pGetItemItem_container','static','medium','data.bonuses.abilities.save','toolbox','item','_ITEM_TYPE_TO_CONSUMABLE_TYPE','rarity','includes','charges','maxDexBonus','weightless','_IMPORT_TYPE_WEAPON','isUseExtendedActiveEffectsParser','test','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22col-8\x20text-right\x22>','\x20+\x20@abilities.dex.mod','281328LNXtWn','action','size','consumable','actor','data.attributes.ac.value','pGetItemItem','bonusSpellSaveDc','_baseSrd','str','ADD','amount','Pre-caching\x20complete.','push','ABIL_ABVS','get','quantity','Bonus','unlit-bomb','type','gauntlets\x20of','_IMPORT_TYPE_TOOL','stringify','_getSrdAliases','2ppEZub','cha','dex','pGetFluff','dexMod','data','_id','barrel','spc','225121gQqeVy','Proficiency\x20Bonus...\x20Bonus?','1HJSdsH','getNameWithSourcePart','getSrdCompendiumEntity','dmgTypeToFull','_ITEM_EQUIPMENT_NAME_RES','_SIZE_TO_ITEM_WEIGHT_AND_VALUE_EXPONENT','rod','assign','importItem','range','periapt\x20of','bonusSavingThrow','forEach','bonusWeaponDamage','Pre-caching\x20item\x20lookup...','_WEAPON_DETAIL_CACHE','crystal-wand','</i></div>\x0a\x09\x09\x09<div\x20class=\x22flex\x20w-100\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22col-4\x22>','entries','join','uppercaseFirst','unlock','bonusProficiencyBonus','getMetricNumber','length','isImportDescription','isBase','itemWeightAndValueSizeScaling','ACTIVE_EFFECT_MODES','_pGetItemItem_getAmmoConsumeDetails','potion','_baseSource','poison','consume','_ITEM_NAME_TO_DEFAULT_ABILITY','hat\x20of','getItemSource','_SIZE_TO_ITEM_WEIGHT_MULT'];const _0x2377=function(_0x1823df,_0x53a442){_0x1823df=_0x1823df-0xb0;let _0x329d6e=_0x329d[_0x1823df];return _0x329d6e;};const _0x30a95b=_0x2377;(function(_0x627ad3,_0x4665a1){const _0xd59e5f=_0x2377;while(!![]){try{const _0x2aac35=parseInt(_0xd59e5f(0xf8))+parseInt(_0xd59e5f(0x144))+-parseInt(_0xd59e5f(0x174))*-parseInt(_0xd59e5f(0xd2))+parseInt(_0xd59e5f(0xb9))+-parseInt(_0xd59e5f(0x11b))*parseInt(_0xd59e5f(0x119))+parseInt(_0xd59e5f(0x110))*-parseInt(_0xd59e5f(0xb3))+-parseInt(_0xd59e5f(0xe5));if(_0x2aac35===_0x4665a1)break;else _0x627ad3['push'](_0x627ad3['shift']());}catch(_0x52608d){_0x627ad3['push'](_0x627ad3['shift']());}}}(_0x329d,0x3d21a));import{SharedConsts}from'../shared/SharedConsts.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';class DataConverterItem{static async[_0x30a95b(0x143)](_0x3aff84,_0x2910c3,_0x1656e1){const _0x24f50c=_0x30a95b;await this[_0x24f50c(0x166)]();let _0x2a5a56='',_0xe30e75=0x0,_0x18a529=null,_0x51c0d5=null,_0x922231='',_0x13a05e='natural',_0x4493ef={},_0x25a2fe=![],_0x43f36e=![],_0xc3d809=0x0;const _0x5988c7=(_0x2910c3[_0x24f50c(0x198)]||'')['replace'](/\(.*\)$/,'')['toLowerCase'](),_0x594411=DataConverterItem[_0x24f50c(0x12a)][_0x5988c7]?MiscUtil[_0x24f50c(0x170)](DataConverterItem[_0x24f50c(0x12a)][_0x5988c7]):null;if(_0x594411){const {weight:_0xf5ed56,price:_0x4e7d21}=DataConverterItem['_pGetItemItem_getWeightAndPrice'](_0x594411,_0x3aff84);_0xe30e75=_0xf5ed56,_0x18a529=_0x4e7d21,_0x922231=(_0x594411['rarity']||_0x24f50c(0xc2))[_0x24f50c(0x168)]();const _0x67aa6d=this[_0x24f50c(0xdd)](_0x594411);_0x13a05e=_0x67aa6d['weaponType'],_0x4493ef=this[_0x24f50c(0x1a5)](_0x594411);const {isAttuned:_0x279d59,isIdentified:_0x4c7130}=this['_pGetItemItem_getAttunedIdentifiedEquipped'](_0x594411);_0x25a2fe=_0x25a2fe||_0x279d59,_0x43f36e=_0x43f36e||_0x4c7130,_0x51c0d5=_0x594411[_0x24f50c(0x163)]||_0x51c0d5;if(_0x594411['bonusWeapon']&&!isNaN(_0x594411['bonusWeapon']))_0xc3d809=Number(_0x594411[_0x24f50c(0xbc)]);if(_0x594411['bonusWeaponAttack']&&!isNaN(_0x594411[_0x24f50c(0x167)]))_0xc3d809=Number(_0x594411[_0x24f50c(0xbc)]);}if(_0x1656e1[_0x24f50c(0x133)]>0x1&&(_0x594411&&(_0x594411['property']||[])[_0x24f50c(0xef)]('V')||/ (?:two|both) hands/i[_0x24f50c(0xf5)](JSON[_0x24f50c(0x10e)](_0x2910c3['entries']||[])))){const _0x1a453e=_0x1656e1[0x0][0x1];if(_0x1a453e){const _0x45100a=_0x1656e1['slice'](0x1)['findIndex'](_0x2650cf=>_0x2650cf[0x1]===_0x1a453e);if(~_0x45100a){_0x1656e1=MiscUtil[_0x24f50c(0x170)](_0x1656e1);const [_0x2bdddd]=_0x1656e1[_0x24f50c(0x171)](_0x45100a+0x1,0x1);_0x2a5a56=_0x2bdddd[0x0];}}}return{'damageParts':_0x1656e1,'damageVersatile':_0x2a5a56,'weight':_0xe30e75,'price':_0x18a529,'img':_0x51c0d5,'rarity':_0x922231,'weaponType':_0x13a05e,'itemProperties':_0x4493ef,'attuned':_0x25a2fe,'identified':_0x43f36e,'attackBonus':_0xc3d809};}static async['_pGetActionWeaponDetails_initCaches'](){const _0x3d244b=_0x30a95b;if(DataConverterItem[_0x3d244b(0x15e)])return;await DataConverterItem['_WEAPON_DETAIL_CACHE_LOCK'][_0x3d244b(0x169)]();try{if(DataConverterItem['_WEAPON_DETAIL_CACHE_INIT'])return;console[_0x3d244b(0x1af)](...LGT,_0x3d244b(0x129));const {item:_0x5fd686}=await Vetools['pGetItems']();for(const _0x3bf3c9 of _0x5fd686){if(_0x3bf3c9[_0x3d244b(0x10b)]==='GV')continue;const _0xbed089=_0x3bf3c9[_0x3d244b(0x198)][_0x3d244b(0xd0)](),_0x1d7152=_0xbed089[_0x3d244b(0x185)](/^(.*?)( \+\d+$)/,(..._0xe12163)=>_0xe12163[0x2]['trim']()+'\x20'+_0xe12163[0x1][_0x3d244b(0xb5)]()),_0x449cd5=[_0xbed089,_0x1d7152===_0xbed089?null:_0x1d7152][_0x3d244b(0x153)](Boolean),_0x30c8f6=MiscUtil['copy'](_0x3bf3c9),_0x140070=await Renderer[_0x3d244b(0xec)][_0x3d244b(0x113)](_0x30c8f6);_0x30c8f6[_0x3d244b(0x163)]=await DataConverterItem['_pGetItemItem_pGetImagePath'](_0x30c8f6,_0x140070),_0x449cd5[_0x3d244b(0x127)](_0x5cee14=>{const _0x9b0123=_0x3d244b;if(!DataConverterItem[_0x9b0123(0x12a)][_0x5cee14]){DataConverterItem[_0x9b0123(0x12a)][_0x5cee14]=_0x30c8f6;return;}const _0x263a19=DataConverterItem['_WEAPON_DETAIL_CACHE'][_0x5cee14];!(_0x263a19[_0x9b0123(0x165)]===SRC_DMG||_0x263a19[_0x9b0123(0x165)]===SRC_PHB)&&SourceUtil['isNonstandardSource'](_0x263a19['source'])&&(DataConverterItem[_0x9b0123(0x12a)][_0x5cee14]=_0x30c8f6);});}console[_0x3d244b(0x1af)](...LGT,_0x3d244b(0x104)),DataConverterItem['_WEAPON_DETAIL_CACHE_INIT']=!![];}finally{DataConverterItem[_0x3d244b(0xb1)][_0x3d244b(0x130)]();}}static async[_0x30a95b(0xfe)](_0x4dfd93,_0x2f88e9){const _0x4bb96d=_0x30a95b;_0x2f88e9=_0x2f88e9||{};const _0x3940ec=_0x4dfd93[_0x4bb96d(0x12d)]?JSON[_0x4bb96d(0x10e)](_0x4dfd93['entries']):'';if(_0x4dfd93['_isItemGroup'])return this[_0x4bb96d(0xc7)](_0x4dfd93,_0x2f88e9,_0x3940ec);let _0x42ab14;if(await this[_0x4bb96d(0xb8)](_0x4dfd93))_0x42ab14=await this['_pGetItemItem_fromSrd'](_0x4dfd93,_0x2f88e9,_0x3940ec);else{const _0x1526c6=this[_0x4bb96d(0x16a)](_0x4dfd93);switch(_0x1526c6){case DataConverterItem[_0x4bb96d(0xf3)]:_0x42ab14=await this['_pGetItemItem_weapon'](_0x4dfd93,_0x2f88e9,_0x3940ec);break;case DataConverterItem[_0x4bb96d(0x10d)]:_0x42ab14=await this[_0x4bb96d(0x141)](_0x4dfd93,_0x2f88e9,_0x3940ec);break;case DataConverterItem[_0x4bb96d(0xdc)]:_0x42ab14=await this[_0x4bb96d(0xc5)](_0x4dfd93,_0x2f88e9,_0x3940ec);break;case DataConverterItem[_0x4bb96d(0xdb)]:_0x42ab14=await this['_pGetItemItem_equipment'](_0x4dfd93,_0x2f88e9,_0x3940ec);break;case DataConverterItem[_0x4bb96d(0xc3)]:_0x42ab14=await this[_0x4bb96d(0xe7)](_0x4dfd93,_0x2f88e9,_0x3940ec);break;case DataConverterItem[_0x4bb96d(0xcb)]:_0x42ab14=await this[_0x4bb96d(0xc7)](_0x4dfd93,_0x2f88e9,_0x3940ec);break;default:throw new Error('Unhandled\x20importer\x20type\x20\x22'+_0x1526c6+'\x22');}}if(_0x2f88e9['isAddPermission'])_0x42ab14[_0x4bb96d(0x14c)]={'default':Config[_0x4bb96d(0x107)](_0x4bb96d(0x123),'permissions')};return _0x42ab14;}static[_0x30a95b(0x16a)](_0xee8b5){const _0x2f0f62=_0x30a95b;if(_0xee8b5[_0x2f0f62(0x196)])return DataConverterItem['_IMPORT_TYPE_WEAPON'];if(_0xee8b5[_0x2f0f62(0x10b)]==='AT'||_0xee8b5[_0x2f0f62(0x10b)]==='T')return DataConverterItem[_0x2f0f62(0x10d)];if(_0xee8b5[_0x2f0f62(0x10b)]==='P'||_0xee8b5[_0x2f0f62(0x10b)]==='SC'||_0xee8b5[_0x2f0f62(0x10b)]==='WD'&&_0xee8b5[_0x2f0f62(0xf0)]||_0xee8b5['type']==='RD'&&_0xee8b5['charges']||_0xee8b5[_0x2f0f62(0x13b)]||_0xee8b5[_0x2f0f62(0x10b)]==='A'||_0xee8b5[_0x2f0f62(0x10b)]==='AF')return DataConverterItem[_0x2f0f62(0xdc)];if(_0xee8b5['type']==='HA'||_0xee8b5[_0x2f0f62(0x10b)]==='MA'||_0xee8b5['type']==='LA'||_0xee8b5[_0x2f0f62(0x10b)]==='S'||_0xee8b5['bardingType'])return DataConverterItem[_0x2f0f62(0xdb)];if(_0xee8b5['containerCapacity'])return DataConverterItem['_IMPORT_TYPE_CONTAINER'];if(_0xee8b5[_0x2f0f62(0x1a6)]||_0xee8b5[_0x2f0f62(0x199)]||_0xee8b5[_0x2f0f62(0x160)])return DataConverterItem[_0x2f0f62(0xdb)];if(this[_0x2f0f62(0x11f)][_0x2f0f62(0xd9)](_0x184ce8=>_0x184ce8[_0x2f0f62(0xf5)](_0xee8b5[_0x2f0f62(0x198)])))return DataConverterItem[_0x2f0f62(0xdb)];return DataConverterItem[_0x2f0f62(0xcb)];}static async[_0x30a95b(0xb8)](_0x38175d){const _0x3af618=_0x30a95b,_0x3314b7=await DataConverter[_0x3af618(0x11d)](_0x3af618(0xec),_0x38175d,{'fnGetAliases':this[_0x3af618(0x10f)]});return!!_0x3314b7;}static[_0x30a95b(0x10f)](_0x4e0666){const _0x1e1caf=_0x30a95b;if(!_0x4e0666[_0x1e1caf(0x198)])return[];const _0x43183f=[];_0x43183f['push'](_0x4e0666[_0x1e1caf(0x198)]+'s');if(_0x4e0666[_0x1e1caf(0x198)][_0x1e1caf(0xd0)]()['includes'](_0x1e1caf(0x1ab)))_0x43183f['push'](_0x4e0666[_0x1e1caf(0x198)][_0x1e1caf(0x185)](/feet/g,'ft.'));if(_0x4e0666[_0x1e1caf(0x198)]['includes'](',\x20'))_0x43183f['push'](_0x4e0666[_0x1e1caf(0x198)][_0x1e1caf(0x185)](/, /g,'\x20'));const _0x2afcf4=/^([^(]+) \(([^)]+)\)$/['exec'](_0x4e0666[_0x1e1caf(0x198)][_0x1e1caf(0xb5)]());if(_0x2afcf4)_0x43183f[_0x1e1caf(0x105)](_0x2afcf4[0x2]+'\x20of\x20'+_0x2afcf4[0x1]);if(_0x2afcf4)_0x43183f[_0x1e1caf(0x105)](_0x2afcf4[0x1]);return _0x43183f;}static[_0x30a95b(0x156)](_0x10a7f6,_0xfb261f){const _0x166774=_0x30a95b;_0xfb261f=_0xfb261f||{};const _0x3be09f={[SharedConsts['MODULE_NAME']]:{'page':UrlUtil['PG_ITEMS'],'source':_0x10a7f6[_0x166774(0x165)],'hash':UrlUtil[_0x166774(0xc6)][UrlUtil[_0x166774(0x158)]](_0x10a7f6)}};return _0xfb261f['isAddDataFlags']&&(_0x3be09f[SharedConsts[_0x166774(0x187)]][_0x166774(0x115)]={'item':MiscUtil[_0x166774(0x170)](_0x10a7f6)},_0x3be09f[SharedConsts['MODULE_NAME']][_0x166774(0x162)]=_0xfb261f[_0x166774(0x162)]),_0x3be09f;}static async[_0x30a95b(0x17e)](_0x20904a,_0xd4e4f8,_0x109969){const _0x2a1bcf=_0x30a95b,{weight:_0x50994c,price:_0x1fa6ba}=this['_pGetItemItem_getWeightAndPrice'](_0x20904a,_0xd4e4f8[_0x2a1bcf(0xfa)]),{isAttuned:_0x3b338b,isIdentified:_0x588c2d,isEquipped:_0x23e756}=this[_0x2a1bcf(0x17a)](_0x20904a),{consumeType:_0x4e9237,consumeTarget:_0x53812c,consumeAmount:_0x14d256}=this['_pGetItemItem_getAmmoConsumeDetails'](_0x20904a,_0xd4e4f8),_0x1929d2=await DataConverter[_0x2a1bcf(0x11d)](_0x2a1bcf(0xec),_0x20904a,{'fnGetAliases':this[_0x2a1bcf(0x10f)]}),_0x5b1542={..._0x1929d2[_0x2a1bcf(0x115)][_0x2a1bcf(0x13c)]||{}};_0x5b1542[_0x2a1bcf(0x10b)]=_0x5b1542[_0x2a1bcf(0x10b)]||_0x4e9237,_0x5b1542[_0x2a1bcf(0xd6)]=_0x5b1542[_0x2a1bcf(0xd6)]||_0x53812c,_0x5b1542['amount']=_0x5b1542[_0x2a1bcf(0x103)]||_0x14d256;const _0x306566=await DataConverterItem[_0x2a1bcf(0x15b)](_0x20904a,_0xd4e4f8[_0x2a1bcf(0xce)]);return{'name':UtilApplications[_0x2a1bcf(0x1a2)](DataConverter['getNameWithSourcePart'](_0x20904a)),'type':_0x1929d2[_0x2a1bcf(0x10b)],'data':{..._0x1929d2[_0x2a1bcf(0x115)],'source':DataConverter[_0x2a1bcf(0xb0)](_0x20904a),'description':{'value':DataConverterItem[_0x2a1bcf(0x148)](_0x20904a),'chat':'','unidentified':''},'proficient':!![],'quantity':_0xd4e4f8[_0x2a1bcf(0x108)]!=null?_0xd4e4f8[_0x2a1bcf(0x108)]:_0x20904a[_0x2a1bcf(0x108)]||0x1,'weight':_0x50994c,'price':_0x1fa6ba,'attuned':_0x3b338b,'identified':_0x588c2d,'equipped':_0xd4e4f8[_0x2a1bcf(0x1a7)]??_0x23e756,'rarity':(_0x20904a['rarity']||_0x2a1bcf(0xc2))[_0x2a1bcf(0x168)](),'consume':_0x5b1542,'attunement':this['_getItemAttunement'](_0x20904a)},'img':_0x306566,'flags':{...this[_0x2a1bcf(0x156)](_0x20904a,_0xd4e4f8)},'effects':await this[_0x2a1bcf(0x14a)](_0x20904a,_0x306566,_0xd4e4f8)};}static[_0x30a95b(0xbb)](_0x5904bb,_0x4d54c9){const _0x3d7260=_0x30a95b;let _0x1a043b=null,_0x1d0929=null,_0x3870b3=null;if(_0x4d54c9==null)return{'weight':Config['getMetricNumber'](_0x3d7260(0x123),_0x5904bb[_0x3d7260(0xb2)]||0x0,'lb'),'price':!isNaN(_0x5904bb['value'])?_0x5904bb[_0x3d7260(0x184)]/0x64:null};const _0x53c467=Config[_0x3d7260(0x107)]('importCreature',_0x3d7260(0x136));switch(_0x53c467){case 0x1:{_0x1a043b=_0x5904bb[_0x3d7260(0xb2)]||0x0;break;}case 0x2:{const _0x2b7876=DataConverterItem[_0x3d7260(0x140)][_0x4d54c9]||0x1,_0x4aa25e=DataConverterItem[_0x3d7260(0xc1)][_0x4d54c9]||0x1;_0x5904bb[_0x3d7260(0xb2)]&&!isNaN(_0x5904bb[_0x3d7260(0xb2)])&&(_0x1a043b=Number(_0x5904bb[_0x3d7260(0xb2)])*_0x2b7876);_0x5904bb[_0x3d7260(0x184)]&&!isNaN(_0x5904bb[_0x3d7260(0x184)])&&(_0x3870b3=_0x5904bb[_0x3d7260(0x184)]*_0x4aa25e);break;}case 0x3:{const _0xaad2ab=DataConverterItem[_0x3d7260(0x120)][_0x4d54c9]||0x1;_0x5904bb['weight']&&!isNaN(_0x5904bb[_0x3d7260(0xb2)])&&(_0x1a043b=Math[_0x3d7260(0x145)](_0x5904bb[_0x3d7260(0xb2)]**_0xaad2ab));if(_0x5904bb[_0x3d7260(0x184)]&&!isNaN(_0x5904bb['value'])){const _0x22a345=_0x5904bb[_0x3d7260(0x184)]<0xa?0x1:_0x5904bb[_0x3d7260(0x184)]<0x64?0xa:0x64;_0x3870b3=_0x5904bb[_0x3d7260(0x184)]/_0x22a345,_0x3870b3=Math[_0x3d7260(0x145)](_0x3870b3**_0xaad2ab),_0x3870b3*=_0x22a345;}break;}}if(_0x3870b3)_0x1d0929=_0x3870b3/0x64;return{'weight':Config[_0x3d7260(0x132)](_0x3d7260(0x123),_0x1a043b||0x0,'lb'),'price':_0x1d0929};}static[_0x30a95b(0x17a)](_0x562e88){const _0x2759f2=_0x30a95b,_0x3c08e5=_0x562e88[_0x2759f2(0xee)]===_0x2759f2(0x18d)||_0x562e88['rarity']==='unknown'||_0x562e88['_category']===_0x2759f2(0x19f),_0x239406=!_0x3c08e5&&!!_0x562e88[_0x2759f2(0xd5)];let _0x5ada93;const _0x1d89dc=this[_0x2759f2(0x16a)](_0x562e88);switch(_0x1d89dc){case DataConverterItem['_IMPORT_TYPE_WEAPON']:_0x5ada93=!![];break;case DataConverterItem['_IMPORT_TYPE_TOOL']:_0x5ada93=![];break;case DataConverterItem[_0x2759f2(0xdc)]:_0x5ada93=![];break;case DataConverterItem[_0x2759f2(0xdb)]:_0x5ada93=!![];break;case DataConverterItem[_0x2759f2(0xc3)]:_0x5ada93=![];break;case DataConverterItem[_0x2759f2(0xcb)]:_0x5ada93=![];break;default:throw new Error(_0x2759f2(0x164)+_0x1d89dc+'\x22');}return{'isAttuned':_0x239406,'isIdentified':!_0x3c08e5,'isEquipped':_0x5ada93};}static[_0x30a95b(0x148)](_0x211829){const _0x2ef96f=_0x30a95b;if(!Config['get'](_0x2ef96f(0x123),_0x2ef96f(0x134)))return'';const [_0x3229b4,_0x672333,_0x51f600]=Renderer['item'][_0x2ef96f(0x154)](_0x211829);return _0x2ef96f(0xc4)+Renderer[_0x2ef96f(0xec)][_0x2ef96f(0x161)](_0x211829)[_0x2ef96f(0x12f)]()+_0x2ef96f(0x12c)+[Parser[_0x2ef96f(0x1ae)](_0x211829),Parser['itemWeightToFull'](_0x211829)][_0x2ef96f(0x153)](Boolean)[_0x2ef96f(0x12e)](',\x20')['uppercaseFirst']()+_0x2ef96f(0xf6)+_0x3229b4+'\x20'+_0x672333+'\x20'+_0x51f600+_0x2ef96f(0x186)+Renderer['item']['getRenderedEntries'](_0x211829,!![]);}static['_getItemItem_getItemUses'](_0x5eecfe){const _0x38aefa=_0x30a95b;let _0x407c0f=0x0;if(_0x5eecfe[_0x38aefa(0xf0)]){if(isNaN(_0x5eecfe['charges'])){const _0x403139=/{@dice (\d)+d(\d+)\s*(?:[-+]\s*\d+)?}/i[_0x38aefa(0xda)](_0x5eecfe[_0x38aefa(0xf0)]);_0x403139&&(_0x407c0f=Number(_0x403139[0x1])*Number(_0x403139[0x2])+(_0x403139[0x3]?Number(_0x403139[0x3][_0x38aefa(0x185)](/\s*/g,'')):0x0));}else _0x407c0f=_0x5eecfe[_0x38aefa(0xf0)];}return _0x407c0f;}static['_getWeaponTypeAndAbility'](_0x25c688){const _0x2be618=_0x30a95b;let _0x4bc5f0='',_0x150c33=_0x2be618(0x101);if(_0x25c688[_0x2be618(0x10b)]==='A'||_0x25c688[_0x2be618(0x10b)]==='AF')_0x4bc5f0=_0x2be618(0x14b),_0x150c33=_0x2be618(0x112);else{if(_0x25c688[_0x2be618(0x10b)]==='M'||_0x25c688[_0x2be618(0x10b)]==='R'){if((_0x25c688['weaponCategory']||'')[_0x2be618(0xd0)]()==='martial')_0x4bc5f0=_0x2be618(0xd8)+_0x25c688['type'];else{if((_0x25c688[_0x2be618(0x15d)]||'')[_0x2be618(0xd0)]()===_0x2be618(0xde))_0x4bc5f0='simple'+_0x25c688[_0x2be618(0x10b)];}}}if(_0x25c688[_0x2be618(0x10b)]==='R')_0x150c33=_0x2be618(0x112);else{if(_0x25c688['property']&&_0x25c688[_0x2be618(0x1a9)][_0x2be618(0xef)]('F'))_0x150c33=_0x2be618(0x112);}return{'weaponType':_0x4bc5f0,'weaponAbility':_0x150c33};}static['_getWeaponProperties'](_0x13b796){const _0x56a8a5=_0x30a95b;return _0x13b796[_0x56a8a5(0x1a9)]?_0x13b796[_0x56a8a5(0x1a9)][_0x56a8a5(0x149)](_0xb16f3d=>DataConverterItem[_0x56a8a5(0x194)][_0xb16f3d])[_0x56a8a5(0x153)](Boolean)[_0x56a8a5(0x149)](_0x43949e=>({[_0x43949e]:!![]}))[_0x56a8a5(0x189)]((_0x559d31,_0x33bb89)=>Object[_0x56a8a5(0x122)](_0x559d31,_0x33bb89),{}):{};}static[_0x30a95b(0x17c)](_0x8932f3){return _0x8932f3['reqAttune']?0x1:0x0;}static async['_pGetItemItem_weapon'](_0x415557,_0x21bbfb,_0x5571ad){const _0x1044e1=_0x30a95b,{weaponType:_0x354223,weaponAbility:_0x4da134}=this['_getWeaponTypeAndAbility'](_0x415557),{weight:_0x103364,price:_0x11696}=this[_0x1044e1(0xbb)](_0x415557,_0x21bbfb[_0x1044e1(0xfa)]),{isAttuned:_0x5b1e08,isIdentified:_0x2d0c50,isEquipped:_0x56efc3}=this[_0x1044e1(0x17a)](_0x415557),{consumeType:_0x2f2438,consumeTarget:_0x370826,consumeAmount:_0x44dbe6}=this[_0x1044e1(0x138)](_0x415557,_0x21bbfb),_0x4f0c91=this['_getWeaponProperties'](_0x415557);let _0x1da390='';if(_0x415557['dmg1']){_0x1da390=_0x415557[_0x1044e1(0x196)];if(_0x415557['bonusWeapon'])_0x1da390=''+_0x1da390+_0x415557[_0x1044e1(0xbc)];else{if(_0x415557['bonusWeaponDamage'])_0x1da390=''+_0x1da390+_0x415557[_0x1044e1(0x128)];}_0x1da390=_0x1da390+_0x1044e1(0x18a);}let _0x1b2c12='';if(_0x415557[_0x1044e1(0x19b)]){_0x1b2c12=_0x415557[_0x1044e1(0x19b)];if(_0x415557['bonusWeapon'])_0x1b2c12=''+_0x1b2c12+_0x415557[_0x1044e1(0xbc)];else{if(_0x415557[_0x1044e1(0x128)])_0x1b2c12=''+_0x1b2c12+_0x415557[_0x1044e1(0x128)];}_0x1b2c12=_0x1b2c12+_0x1044e1(0x18a);}let _0x5d5789=0x0,_0x46fc48=0x0;if(_0x415557[_0x1044e1(0x124)]){const _0xc63cdb=(''+_0x415557[_0x1044e1(0x124)])[_0x1044e1(0xb5)](),_0x3e7ed3=/^(\d+)\/(\d+)$/i[_0x1044e1(0xda)](_0xc63cdb);_0x3e7ed3&&(_0x5d5789=Number(_0x3e7ed3[0x1]),_0x46fc48=Number(_0x3e7ed3[0x2]));const _0x5514bf=/^(\d+)$/i[_0x1044e1(0xda)](_0xc63cdb);if(_0x5514bf)_0x5d5789=Number(_0x5514bf[0x1]);}else _0x415557['property']&&_0x415557[_0x1044e1(0x1a9)][_0x1044e1(0xef)]('R')?_0x5d5789=0xa:_0x5d5789=0x5;const _0x1da7f1=this['_getItemItem_getItemUses'](_0x415557),_0xbb25c9=await DataConverterItem[_0x1044e1(0x15b)](_0x415557,_0x21bbfb[_0x1044e1(0xce)]);return{'name':UtilApplications['getCleanEntityName'](DataConverter[_0x1044e1(0x11c)](_0x415557)),'type':_0x1044e1(0x147),'data':{'source':DataConverter[_0x1044e1(0xb0)](_0x415557),'description':{'value':DataConverterItem['_getItemItem_getItemDescription'](_0x415557),'chat':'','unidentified':''},'proficient':!![],'quantity':_0x21bbfb['quantity']||_0x415557[_0x1044e1(0x108)]||0x1,'weight':_0x103364,'price':_0x11696,'attuned':_0x5b1e08,'identified':_0x2d0c50,'equipped':_0x21bbfb[_0x1044e1(0x1a7)]??_0x56efc3,'rarity':(_0x415557[_0x1044e1(0xee)]||_0x1044e1(0xc2))[_0x1044e1(0x168)](),'damage':{'parts':[[_0x1da390,_0x415557[_0x1044e1(0x183)]?Parser[_0x1044e1(0x11e)](_0x415557[_0x1044e1(0x183)]):'']],'versatile':_0x1b2c12},'range':{'value':_0x5d5789,'long':_0x46fc48,'units':'ft'},'weaponType':_0x354223,'ability':_0x4da134,'properties':_0x4f0c91,'attunement':this[_0x1044e1(0x17c)](_0x415557),'activation':{'type':_0x1044e1(0xf9),'cost':0x1,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'uses':{'value':_0x1da7f1,'max':_0x1da7f1,'per':''},'actionType':_0x415557[_0x1044e1(0x10b)]==='R'?_0x1044e1(0x181):_0x1044e1(0x179),'attackBonus':_0x415557[_0x1044e1(0xbc)]||_0x415557[_0x1044e1(0x167)]||0x0,'chatFlavor':'','critical':null,'formula':'','save':{'ability':'','dc':0x0},'consume':{'type':_0x2f2438,'target':_0x370826,'amount':_0x44dbe6}},'img':_0xbb25c9,'flags':{...this['_getItemFlags'](_0x415557,_0x21bbfb)},'effects':await this[_0x1044e1(0x14a)](_0x415557,_0xbb25c9,_0x21bbfb)};}static async['_pGetItemItem_equipment'](_0x4886df,_0x2f6564,_0x334573){const _0x2f1321=_0x30a95b,{weight:_0x15363e,price:_0x3d897d}=this[_0x2f1321(0xbb)](_0x4886df,_0x2f6564[_0x2f1321(0xfa)]),{isAttuned:_0x39e61d,isIdentified:_0x36e3c2,isEquipped:_0x473a61}=this[_0x2f1321(0x17a)](_0x4886df),{acValue:_0x455da6,maxDexBonus:_0x5c0e25}=this[_0x2f1321(0x142)](_0x4886df),_0x27e3ac=this['_getItemItem_getItemUses'](_0x4886df),_0x76d3c1=await DataConverterItem[_0x2f1321(0x15b)](_0x4886df,_0x2f6564[_0x2f1321(0xce)]);return{'name':UtilApplications[_0x2f1321(0x1a2)](DataConverter[_0x2f1321(0x11c)](_0x4886df)),'type':_0x2f1321(0x18c),'data':{'source':DataConverter[_0x2f1321(0xb0)](_0x4886df),'description':{'value':DataConverterItem[_0x2f1321(0x148)](_0x4886df),'chat':'','unidentified':''},'proficient':!![],'quantity':_0x2f6564[_0x2f1321(0x108)]||_0x4886df[_0x2f1321(0x108)]||0x1,'weight':_0x15363e,'price':_0x3d897d,'attuned':_0x39e61d,'identified':_0x36e3c2,'equipped':_0x2f6564[_0x2f1321(0x1a7)]??_0x473a61,'rarity':(_0x4886df[_0x2f1321(0xee)]||'Unknown')[_0x2f1321(0x168)](),'attunement':this[_0x2f1321(0x17c)](_0x4886df),'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':_0x27e3ac,'max':_0x27e3ac,'per':null},'ability':'','actionType':'','attackBonus':0x0,'chatFlavor':'','critical':null,'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'armor':{'type':DataConverterItem['_ITEM_TYPE_TO_ARMOR_TYPE'][_0x4886df[_0x2f1321(0x10b)]]||'','value':_0x455da6,'dex':_0x5c0e25},'strength':_0x4886df[_0x2f1321(0x155)]||null,'stealth':!!_0x4886df['stealth']},'img':_0x76d3c1,'flags':{...this[_0x2f1321(0x156)](_0x4886df,_0x2f6564)},'effects':await this[_0x2f1321(0x14a)](_0x4886df,_0x76d3c1,_0x2f6564)};}static async['_pGetItemItem_container'](_0x465a41,_0xcce672,_0x5f020a){const _0x25f279=_0x30a95b,{weight:_0x4d5c66,price:_0x5c93e4}=this[_0x25f279(0xbb)](_0x465a41,_0xcce672[_0x25f279(0xfa)]),{isAttuned:_0x181315,isIdentified:_0x3d6e71,isEquipped:_0x10b966}=this['_pGetItemItem_getAttunedIdentifiedEquipped'](_0x465a41),_0x2a15ad=_0x465a41[_0x25f279(0x150)][_0x25f279(0xb2)]?_0x465a41[_0x25f279(0x150)][_0x25f279(0xb2)]['reduce']((_0x382563,_0x29072b)=>_0x382563+_0x29072b,0x0):Math['max'](..._0x465a41[_0x25f279(0x150)][_0x25f279(0xec)][_0x25f279(0x149)](_0x762164=>Math['max'](...Object['values'](_0x762164)))),_0x201603=await DataConverterItem[_0x25f279(0x15b)](_0x465a41,_0xcce672['fluff']);return{'name':UtilApplications[_0x25f279(0x1a2)](DataConverter['getNameWithSourcePart'](_0x465a41)),'type':_0x25f279(0x175),'data':{'source':DataConverter[_0x25f279(0xb0)](_0x465a41),'description':{'value':DataConverterItem[_0x25f279(0x148)](_0x465a41),'chat':'','unidentified':''},'quantity':_0xcce672['quantity']||_0x465a41[_0x25f279(0x108)]||0x1,'weight':_0x4d5c66,'price':_0x5c93e4,'attuned':_0x181315,'equipped':_0xcce672[_0x25f279(0x1a7)]??_0x10b966,'identified':_0x3d6e71,'rarity':(_0x465a41['rarity']||_0x25f279(0xc2))[_0x25f279(0x168)](),'capacity':{'type':_0x465a41[_0x25f279(0x150)][_0x25f279(0xb2)]?'weight':_0x25f279(0x1a4),'value':_0x2a15ad,'weightless':!!_0x465a41[_0x25f279(0x150)][_0x25f279(0xf2)]},'attunement':this[_0x25f279(0x17c)](_0x465a41),'damage':{'parts':[]}},'img':_0x201603,'flags':{...this[_0x25f279(0x156)](_0x465a41,_0xcce672)},'effects':await this['_pGetItemEffects'](_0x465a41,_0x201603,_0xcce672)};}static async['_pGetItemItem_consumable'](_0x146cd8,_0x23621b,_0x46095b){const _0x4769dd=_0x30a95b,{weight:_0x196123,price:_0x47800d}=this[_0x4769dd(0xbb)](_0x146cd8,_0x23621b[_0x4769dd(0xfa)]),{isAttuned:_0x3b57ce,isIdentified:_0x38b6e6,isEquipped:_0x1d00d7}=this[_0x4769dd(0x17a)](_0x146cd8),_0x4017c9=(_0x146cd8[_0x4769dd(0x13b)]?'poison':DataConverterItem[_0x4769dd(0xed)][_0x146cd8[_0x4769dd(0x10b)]])||'';let _0x426e76='',_0x3b79e=![];_0x46095b[_0x4769dd(0x185)](/if you expend[^.]+last charge[^.]+roll[^.]+{@dice ([^}]+)}(?:[^.]+)?\.(?:[^.]+)on a[^.]+\d+[^.]+destroyed/ig,(..._0xef61f1)=>{_0x426e76=_0xef61f1[0x1],_0x3b79e=!![];});if(_0x146cd8[_0x4769dd(0x10b)]==='SC'||_0x146cd8[_0x4769dd(0x10b)]==='P')_0x3b79e=!![];const _0x2f0684=this['_getItemItem_getItemUses'](_0x146cd8),_0x3d09f6=await DataConverterItem[_0x4769dd(0x15b)](_0x146cd8,_0x23621b['fluff']);return{'name':UtilApplications['getCleanEntityName'](DataConverter[_0x4769dd(0x11c)](_0x146cd8)),'type':_0x4769dd(0xfb),'data':{'source':DataConverter['getSourceWithPagePart'](_0x146cd8),'description':{'value':DataConverterItem[_0x4769dd(0x148)](_0x146cd8),'chat':'','unidentified':''},'quantity':_0x23621b['quantity']||_0x146cd8[_0x4769dd(0x108)]||0x1,'weight':_0x196123,'price':_0x47800d,'attuned':_0x3b57ce,'equipped':_0x23621b['isEquipped']??_0x1d00d7,'identified':_0x38b6e6,'rarity':(_0x146cd8[_0x4769dd(0xee)]||_0x4769dd(0xc2))[_0x4769dd(0x168)](),'consumableType':_0x4017c9,'attunement':this['_getItemAttunement'](_0x146cd8),'activation':{'type':_0x4769dd(0xf9),'cost':0x1,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':_0x2f0684,'max':_0x2f0684,'per':null,'autoUse':!![],'autoDestroy':_0x3b79e},'ability':'','actionType':null,'attackBonus':0x0,'chatFlavor':'','critical':null,'damage':{'parts':[],'versatile':''},'formula':_0x426e76,'save':{'ability':'','dc':null}},'img':_0x3d09f6,'flags':{...this[_0x4769dd(0x156)](_0x146cd8,_0x23621b)},'effects':await this[_0x4769dd(0x14a)](_0x146cd8,_0x3d09f6,_0x23621b)};}static async[_0x30a95b(0x141)](_0x59bdd9,_0x3722e9,_0x3b98c2){const _0x40ae26=_0x30a95b,{weight:_0x5940b2,price:_0x555f4d}=this[_0x40ae26(0xbb)](_0x59bdd9,_0x3722e9[_0x40ae26(0xfa)]),{isAttuned:_0x17792b,isIdentified:_0x3672ae,isEquipped:_0x14cb94}=this['_pGetItemItem_getAttunedIdentifiedEquipped'](_0x59bdd9);let _0x5cfba8=DataConverterItem[_0x40ae26(0x13d)][_0x59bdd9[_0x40ae26(0x198)]]||_0x40ae26(0x195);const _0x55c6b0=await DataConverterItem['_pGetItemItem_pGetImagePath'](_0x59bdd9,_0x3722e9['fluff']);return{'name':UtilApplications[_0x40ae26(0x1a2)](DataConverter['getNameWithSourcePart'](_0x59bdd9)),'type':'tool','data':{'source':DataConverter[_0x40ae26(0xb0)](_0x59bdd9),'description':{'value':DataConverterItem[_0x40ae26(0x148)](_0x59bdd9),'chat':'','unidentified':''},'quantity':_0x3722e9['quantity']||_0x59bdd9[_0x40ae26(0x108)]||0x1,'weight':_0x5940b2,'price':_0x555f4d,'attuned':_0x17792b,'equipped':_0x3722e9[_0x40ae26(0x1a7)]??_0x14cb94,'identified':_0x3672ae,'rarity':(_0x59bdd9[_0x40ae26(0xee)]||'Unknown')[_0x40ae26(0x168)](),'proficient':0x1,'ability':_0x5cfba8,'attunement':this[_0x40ae26(0x17c)](_0x59bdd9),'chatFlavor':'','damage':{'parts':[]}},'img':_0x55c6b0,'flags':{...this['_getItemFlags'](_0x59bdd9,_0x3722e9)},'effects':await this['_pGetItemEffects'](_0x59bdd9,_0x55c6b0,_0x3722e9)};}static async['_pGetItemItem_loot'](_0xc8df8f,_0x31af8b,_0x106a00){const _0x5ac4fd=_0x30a95b,{weight:_0x52277a,price:_0x6c59ca}=this[_0x5ac4fd(0xbb)](_0xc8df8f,_0x31af8b[_0x5ac4fd(0xfa)]),{isAttuned:_0x286462,isIdentified:_0x4ccb57,isEquipped:_0x544b1e}=this['_pGetItemItem_getAttunedIdentifiedEquipped'](_0xc8df8f),_0x291061=await DataConverterItem[_0x5ac4fd(0x15b)](_0xc8df8f,_0x31af8b[_0x5ac4fd(0xce)]);return{'name':UtilApplications['getCleanEntityName'](DataConverter[_0x5ac4fd(0x11c)](_0xc8df8f)),'type':'loot','data':{'source':DataConverter[_0x5ac4fd(0xb0)](_0xc8df8f),'description':{'value':DataConverterItem['_getItemItem_getItemDescription'](_0xc8df8f),'chat':'','unidentified':''},'quantity':_0x31af8b[_0x5ac4fd(0x108)]||_0xc8df8f[_0x5ac4fd(0x108)]||0x1,'weight':_0x52277a,'price':_0x6c59ca,'attuned':_0x286462,'equipped':_0x31af8b[_0x5ac4fd(0x1a7)]??_0x544b1e,'identified':_0x4ccb57,'rarity':(_0xc8df8f['rarity']||_0x5ac4fd(0xc2))['toTitleCase'](),'attunement':this[_0x5ac4fd(0x17c)](_0xc8df8f),'damage':{'parts':[]}},'img':_0x291061,'flags':{...this['_getItemFlags'](_0xc8df8f,_0x31af8b)},'effects':await this['_pGetItemEffects'](_0xc8df8f,_0x291061,_0x31af8b)};}static async[_0x30a95b(0x15b)](_0x3b40d7,_0x230b37){const _0x5a0d11=_0x30a95b,_0x1b49ba=Vetools['getImageUrlFromFluff'](_0x230b37);if(_0x1b49ba)return _0x1b49ba;const _0x286c0a=await this['_pGetCompendiumImage'](_0x3b40d7);if(_0x286c0a)return _0x286c0a;return _0x5a0d11(0x16b)+SharedConsts['MODULE_NAME']+_0x5a0d11(0x1ad)+(DataConverterItem[_0x5a0d11(0x172)][_0x3b40d7['type']]||_0x5a0d11(0x14e))+_0x5a0d11(0x1b2);}static[_0x30a95b(0x138)](_0x9110a6,_0x2dc099){const _0x47d056=_0x30a95b;let _0x598bd2='',_0x3acbca='',_0x490479=null;if(_0x9110a6[_0x47d056(0xbf)]){_0x598bd2=_0x47d056(0x14b),_0x490479=0x1;if(_0x2dc099[_0x47d056(0xe1)]){const [_0x515bb3,_0x4646dc]=_0x9110a6['ammoType']['toLowerCase']()[_0x47d056(0x182)]('|')['map'](_0x2ac390=>_0x2ac390['trim']())[_0x47d056(0x153)](Boolean),_0x3b6277=(_0x4646dc||SRC_DMG)['toLowerCase'](),_0x2adfbf=_0x515bb3[_0x47d056(0x185)](/s+$/g,''),_0x2459ef=_0x2dc099[_0x47d056(0xe1)]['filter'](_0x2e9827=>{const _0x28375e=_0x47d056,_0x461845=_0x2e9827[_0x28375e(0x198)][_0x28375e(0xd0)]()[_0x28375e(0xb5)]()[_0x28375e(0x185)](/s+$/g,'');return _0x461845===_0x2adfbf&&(!Config['get'](_0x28375e(0xd7),_0x28375e(0x191))||(DataConverter[_0x28375e(0x13f)](_0x2e9827)||'')['toLowerCase']()===_0x3b6277);});_0x2459ef['length']&&(_0x3acbca=_0x2459ef[0x0][_0x47d056(0x116)]);}}return{'consumeType':_0x598bd2,'consumeTarget':_0x3acbca,'consumeAmount':_0x490479};}static async[_0x30a95b(0x188)](_0x3804f1){const _0x4510ed=_0x30a95b,_0x2607ab=await DataConverter[_0x4510ed(0xcc)](_0x4510ed(0xec),_0x3804f1,{'fnGetAliases':this['_getSrdAliases']});if(_0x2607ab)return _0x2607ab;if(_0x3804f1[_0x4510ed(0x159)])return DataConverter['pGetCompendiumImage'](_0x4510ed(0xec),{'name':_0x3804f1[_0x4510ed(0x159)],'source':_0x3804f1[_0x4510ed(0x13a)]||_0x3804f1[_0x4510ed(0x165)],'srd':_0x3804f1[_0x4510ed(0x100)]},{'fnGetAliases':this[_0x4510ed(0x10f)]});}static['_getItemAcMeta'](_0x82ca4){const _0xd328c5=_0x30a95b;let _0x5870=_0x82ca4[_0xd328c5(0x1a6)]?Number(_0x82ca4['bonusAc']):0x0;if(isNaN(_0x5870))_0x5870=0x0;const _0x56af63=_0x82ca4[_0xd328c5(0x15f)]||_0x82ca4[_0xd328c5(0x10b)],_0x3727b7=_0x56af63==='HA'||_0x56af63==='MA'||_0x56af63==='LA',_0x23b744=_0x3727b7||_0x82ca4[_0xd328c5(0x10b)]==='S';return{'acValue':_0x23b744?(_0x82ca4['ac']||0xa)+_0x5870:_0x5870||null,'maxDexBonus':_0x56af63==='MA'?0x2:_0x56af63==='HA'?0x0:null,'isBase':_0x3727b7};}static async[_0x30a95b(0x14a)](_0x29a405,_0x508ed1,_0xa50bf6){const _0x4c1358=_0x30a95b;_0xa50bf6=_0xa50bf6||{};if(!Config['get'](_0x4c1358(0x123),'isAddActiveEffects'))return;const _0x543032=Config[_0x4c1358(0x107)](_0x4c1358(0xfc),_0x4c1358(0xf4)),_0x5b3529=[],_0x4d8baa=this[_0x4c1358(0x142)](_0x29a405);if(_0x4d8baa['acValue']!=null){let _0x314817;if(_0x4d8baa[_0x4c1358(0x135)]){if(_0x543032){if(_0x4d8baa[_0x4c1358(0xf1)]===0x0)_0x314817=_0x4d8baa[_0x4c1358(0xe2)];else{if(_0x4d8baa[_0x4c1358(0xf1)])_0x314817=_0x4d8baa[_0x4c1358(0xe2)]+_0x4c1358(0x1b0)+_0x4d8baa[_0x4c1358(0xf1)]+_0x4c1358(0x1b3);else _0x314817=_0x4d8baa[_0x4c1358(0xe2)]+_0x4c1358(0xf7);}}else{if(_0x4d8baa[_0x4c1358(0xf1)]===0x0)_0x314817=_0x4d8baa['acValue'];else{if(_0x4d8baa[_0x4c1358(0xf1)])_0x314817=_0x4d8baa['acValue']+Math[_0x4c1358(0x18f)](0x2,_0xa50bf6[_0x4c1358(0x114)]||0x0);else _0x314817=_0x4d8baa[_0x4c1358(0xe2)]+(_0xa50bf6[_0x4c1358(0x114)]||0x0);}}}else _0x314817=_0x4d8baa[_0x4c1358(0xe2)];const _0x5e9f79=_0x4c1358(0xfd);_0x5b3529[_0x4c1358(0x105)](UtilActiveEffects[_0x4c1358(0x180)]({'key':_0x4d8baa['isBase']?_0x543032?UtilActiveEffects[_0x4c1358(0xd3)](_0x5e9f79):_0x5e9f79:_0x5e9f79,'value':_0x314817,'mode':_0x4d8baa[_0x4c1358(0x135)]?_0x543032?CONST[_0x4c1358(0x137)]['CUSTOM']:CONST[_0x4c1358(0x137)]['ADD']:CONST[_0x4c1358(0x137)][_0x4c1358(0x102)],'label':(_0x4d8baa['isBase']?_0x4c1358(0x14f):_0x4c1358(0x109))+_0x4c1358(0xc8),'icon':_0x508ed1,'disabled':!_0xa50bf6['isEquipped']}));}if(_0x29a405[_0x4c1358(0x126)]){const _0x1dc23c=this[_0x4c1358(0x1aa)]({'item':_0x29a405,'img':_0x508ed1,'label':_0x4c1358(0x16d),'key':_0x4c1358(0xea),'prop':_0x4c1358(0x126),'opts':_0xa50bf6});if(_0x1dc23c)_0x5b3529['push'](_0x1dc23c);}if(_0x29a405[_0x4c1358(0x157)]){const _0x5902ab=this[_0x4c1358(0x1aa)]({'item':_0x29a405,'img':_0x508ed1,'label':'Spell\x20Attack\x20Bonus','key':'data.bonuses.rsak.damage','prop':_0x4c1358(0x157),'opts':_0xa50bf6});if(_0x5902ab)_0x5b3529[_0x4c1358(0x105)](_0x5902ab);}if(_0x29a405['bonusSpellSaveDc']){const _0x531acb=this[_0x4c1358(0x1aa)]({'item':_0x29a405,'img':_0x508ed1,'label':'Spell\x20Save\x20DC\x20Bonus','key':_0x4c1358(0x19e),'prop':_0x4c1358(0xff),'opts':_0xa50bf6});if(_0x531acb)_0x5b3529[_0x4c1358(0x105)](_0x531acb);}if(_0x29a405['bonusProficiencyBonus']){const _0x5efe65=this[_0x4c1358(0x1aa)]({'item':_0x29a405,'img':_0x508ed1,'label':_0x4c1358(0x11a),'key':_0x4c1358(0x1a0),'prop':_0x4c1358(0x131),'opts':_0xa50bf6});if(_0x5efe65)_0x5b3529[_0x4c1358(0x105)](_0x5efe65);}return _0x29a405[_0x4c1358(0x199)]&&(_0x29a405[_0x4c1358(0x199)][_0x4c1358(0xe8)]&&Parser[_0x4c1358(0x106)][_0x4c1358(0x127)](_0x46df9c=>{const _0xa85ebf=_0x4c1358;if(_0x29a405['ability'][_0xa85ebf(0xe8)][_0x46df9c]==null)return;_0x5b3529[_0xa85ebf(0x105)](UtilActiveEffects['getItemEffect']({'key':_0xa85ebf(0x193)+_0x46df9c+_0xa85ebf(0x19a),'value':_0x29a405['ability'][_0xa85ebf(0xe8)][_0x46df9c],'mode':CONST[_0xa85ebf(0x137)]['UPGRADE'],'label':_0xa85ebf(0xb6)+Parser['attAbvToFull'](_0x46df9c),'icon':_0x508ed1,'disabled':!_0xa50bf6[_0xa85ebf(0x1a7)]}));}),Parser[_0x4c1358(0x106)]['forEach'](_0x53318b=>{const _0x2bd359=_0x4c1358;if(_0x29a405[_0x2bd359(0x199)][_0x53318b]==null)return;_0x5b3529[_0x2bd359(0x105)](UtilActiveEffects['getItemEffect']({'key':_0x2bd359(0x193)+_0x53318b+'.value','value':_0x29a405['ability'][_0x53318b],'mode':CONST[_0x2bd359(0x137)][_0x2bd359(0x102)],'label':_0x2bd359(0x19c)+Parser[_0x2bd359(0x17f)](_0x53318b),'icon':_0x508ed1,'disabled':!_0xa50bf6[_0x2bd359(0x1a7)]}));})),_0x5b3529;}static[_0x30a95b(0x1aa)]({item:_0x419c6a,img:_0x2447e4,label:_0x1ad843,key:_0x2f603c,prop:_0x6fa4b3,opts:_0x3cbd30}){const _0x54a793=_0x30a95b;_0x3cbd30=_0x3cbd30||{};const _0x57a4be=!isNaN(_0x419c6a[_0x6fa4b3])?Number(_0x419c6a[_0x6fa4b3]):0x0;if(!_0x57a4be)return null;return UtilActiveEffects[_0x54a793(0x180)]({'key':_0x2f603c,'value':_0x57a4be,'mode':CONST[_0x54a793(0x137)][_0x54a793(0x102)],'label':_0x1ad843,'icon':_0x2447e4,'disabled':!_0x3cbd30[_0x54a793(0x1a7)]});}}DataConverterItem[_0x30a95b(0x15e)]=![],DataConverterItem[_0x30a95b(0x12a)]={},DataConverterItem['_WEAPON_DETAIL_CACHE_LOCK']=new VeLock(),DataConverterItem[_0x30a95b(0xf3)]='weapon',DataConverterItem['_IMPORT_TYPE_TOOL']='tool',DataConverterItem[_0x30a95b(0xdc)]=_0x30a95b(0xfb),DataConverterItem['_IMPORT_TYPE_EQUIPMENT']='equipment',DataConverterItem['_IMPORT_TYPE_CONTAINER']='container',DataConverterItem['_IMPORT_TYPE_LOOT']=_0x30a95b(0xb7),DataConverterItem[_0x30a95b(0x16c)]={'HA':_0x30a95b(0x197),'MA':_0x30a95b(0xe9),'LA':_0x30a95b(0x18e),'S':_0x30a95b(0x18b)},DataConverterItem['_ITEM_TYPE_TO_CONSUMABLE_TYPE']={'A':_0x30a95b(0x14b),'AF':_0x30a95b(0x14b),'P':_0x30a95b(0x139),'SC':_0x30a95b(0x192),'WD':'wand','RD':_0x30a95b(0x121)},DataConverterItem['_ITEM_NAME_TO_DEFAULT_ABILITY']={'Alchemist\x27s\x20Supplies':_0x30a95b(0x195),'Brewer\x27s\x20Supplies':_0x30a95b(0x195),'Calligrapher\x27s\x20Supplies':_0x30a95b(0x195),'Carpenter\x27s\x20Tools':_0x30a95b(0x195),'Cartographer\x27s\x20Tools':_0x30a95b(0x195),'Cobbler\x27s\x20Tools':'int','Cook\x27s\x20Utensils':_0x30a95b(0xe6),'Disguise\x20Kit':_0x30a95b(0x111),'Forgery\x20Kit':'int','Glassblower\x27s\x20Tools':_0x30a95b(0x195),'Herbalism\x20Kit':_0x30a95b(0xe6),'Jeweler\x27s\x20Tools':_0x30a95b(0x195),'Leatherworker\x27s\x20Tools':_0x30a95b(0x195),'Mason\x27s\x20Tools':_0x30a95b(0x195),'Navigator\x27s\x20Tools':'wis','Painter\x27s\x20Supplies':_0x30a95b(0x195),'Poisoner\x27s\x20Kit':_0x30a95b(0xe6),'Potter\x27s\x20Tools':'int','Smith\x27s\x20Tools':_0x30a95b(0x195),'Thieves\x27\x20Tools':_0x30a95b(0x112),'Tinker\x27s\x20Tools':'int','Weaver\x27s\x20Tools':_0x30a95b(0x195),'Woodcarver\x27s\x20Tools':_0x30a95b(0x195)},DataConverterItem['_ITEM_TYPE_TO_ICON']={'A':_0x30a95b(0x1a3),'AF':_0x30a95b(0x1a3),'AT':_0x30a95b(0xeb),'EM':'','EXP':_0x30a95b(0x10a),'G':_0x30a95b(0x175),'GS':_0x30a95b(0x1a1),'HA':'breastplate','INS':'guitar','LA':_0x30a95b(0x19d),'M':'crossed-swords','MA':_0x30a95b(0x15c),'MNT':_0x30a95b(0xcf),'GV':'','P':'potion-ball','R':_0x30a95b(0x16e),'RD':_0x30a95b(0x12b),'RG':_0x30a95b(0xca),'S':_0x30a95b(0x14d),'SC':'tied-scroll','SCF':_0x30a95b(0x17d),'OTH':'','T':'toolbox','TAH':'','TG':_0x30a95b(0x117),'VEH':'old-wagon','SHP':_0x30a95b(0x146),'AIR':_0x30a95b(0xc9),'WD':'fairy-wand'},DataConverterItem[_0x30a95b(0x194)]={'A':'amm','AF':_0x30a95b(0xe0),'BF':'','F':_0x30a95b(0x1a8),'H':_0x30a95b(0x16f),'L':_0x30a95b(0x152),'LD':'rel','R':_0x30a95b(0x1b1),'RLD':_0x30a95b(0xb4),'S':_0x30a95b(0x118),'T':'thr','2H':_0x30a95b(0xe4),'V':_0x30a95b(0xd1)},DataConverterItem[_0x30a95b(0x11f)]=[_0x30a95b(0x151),'badge\x20of',_0x30a95b(0xc0),_0x30a95b(0xd4),'boots\x20of',_0x30a95b(0x17b),'bracer\x20of',_0x30a95b(0xcd),_0x30a95b(0xdf),'cape\x20of','circlet\x20of',_0x30a95b(0x176),_0x30a95b(0x173),_0x30a95b(0xe3),_0x30a95b(0x10c),'gloves\x20of','goggles\x20of',_0x30a95b(0x13e),_0x30a95b(0x190),_0x30a95b(0x177),_0x30a95b(0x1ac),'mask\x20of',_0x30a95b(0x178),_0x30a95b(0x125),_0x30a95b(0x15a),_0x30a95b(0xbe),'robe\x20of',_0x30a95b(0xbd)][_0x30a95b(0x149)](_0x1f9f95=>new RegExp(_0x30a95b(0xba)+_0x1f9f95,'i')),DataConverterItem[_0x30a95b(0x140)]={[SZ_FINE]:0.5,[SZ_DIMINUTIVE]:0.5,[SZ_TINY]:0.5,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x2,[SZ_HUGE]:0x4,[SZ_GARGANTUAN]:0x8,[SZ_COLOSSAL]:0x10,[SZ_VARIES]:0x1},DataConverterItem[_0x30a95b(0xc1)]={[SZ_FINE]:0.25,[SZ_DIMINUTIVE]:0.25,[SZ_TINY]:0.25,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x4,[SZ_HUGE]:0x10,[SZ_GARGANTUAN]:0x40,[SZ_COLOSSAL]:0x100,[SZ_VARIES]:0x1},DataConverterItem[_0x30a95b(0x120)]={[SZ_FINE]:0.5,[SZ_DIMINUTIVE]:0.5,[SZ_TINY]:0.5,[SZ_SMALL]:0x1,[SZ_MEDIUM]:0x1,[SZ_LARGE]:0x2,[SZ_HUGE]:0x3,[SZ_GARGANTUAN]:0x4,[SZ_COLOSSAL]:0x5,[SZ_VARIES]:0x1};export{DataConverterItem};