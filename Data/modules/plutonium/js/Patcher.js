const _0x4ad6=['</button>','_getEntryContextOptions','user','<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>','sheetClass','data','<div\x20class=\x22w-100\x20flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>','_handleExpandCollapse','handleToggleClick','options','element','fontSize','template','windows','data-plut-is-expanded','actors','hideVe','<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>','set','_onUpdate','isZeroSix','doRemovePatch','tokens','default','plutonium.configUpdate','<i\x20class=\x22fas\x20fa-hammer\x22></i>','dragResistance','removeChild','fill','content','title','_getBtnHtmlToggle','_handleConfigUpdate_displayDamageDealt','_CACHED_CLASS','</div>\x0a\x09\x09\x09\x09','_onUpdateTokenActor','getElementsByTagName','isAutoExpandContentEmbeds','_doPatchJournalContextMenuOptions','_LAST_IS_ENABLED','anchor','visible','entityClass','handleConfigUpdate','button[data-plut-is-expanded]','<iframe','_handleConfigUpdate','\x0a\x09\x09\x09\x09<div\x20class=\x22w-100\x20jemb__wrp-content\x20','object','getCoreVersion','MODULE_LOCATION','OWNER','isEnableUrlEmbeds','Enter\x20iframe\x20or\x20URL','_id','splice','BUTTON','prototype','canvasTextStyle','JournalSheet','forEach','rivet','html','doApplyPatch','<button\x20class=\x22btn\x20btn-xxs\x20btn-5et\x20btn-default\x20flex-vh-center\x20mx-1\x20jemb__btn-toggle\x22\x20data-plut-is-expanded=\x22','replace','render','constructor','_getEntityPermissions','_getEntityEmbed','Collapse','MODULE_NAME','journal','owner','findIndex','removeAttribute','FLAG_IFRAME_URL','classList','name','collection','isDisplayDamageDealt','enrichHTML','_handleConfigUpdate_displayDamageDealt_doRefreshTokens','restoreCachedMethod','actor','defaultOptions','parent','isFixDrawingFreehandMinDistance','getFlag','next','style','/mod-template/journal/sheet.handlebars','_doPatchActorContextMenuOptions','img','setFlag','get','bringToFront','init','_sheetMode','ve-hidden','_disableFields','each','_plutonium_xDispDamageDealt','Token','</div>\x0a\x09\x09\x09</div>','\x22\x20title=\x22','Expand','disabled','targetActorId','_handleConfigUpdate_displayDamageDealt_doUpdateDisplay','src','_replaceEntityLink','pGetUserString','maximize','info','Drawing','forceClose','close','</a>','floor','image','push','attributes','clone','TextEditor','\x22\x20class=\x22jemb__img\x22></a></div>\x0a\x09\x09\x09</div>','sheet','<div\x20class=\x22mb-1\x20bold\x20veapp__msg-error\x22>Warning:\x20too\x20many\x20recursive\x20embeds!\x20Have\x20you\x20made\x20an\x20infinite\x20loop?</div>','position','_HAS_PATCHED','_DID_PATCH','canvasReady','mouseInteractionManager','URL/iframe\x20\x22','toggleClass','values','Rivet\x20content\x20will\x20now\x20be\x20imported\x20to\x20Actor\x20\x22','_MAX_RECURSION_DEPTH','bind','sheetMode','isEnableContentEmbeds','entityId','warn','_doEnableToggleButtons','preventDefault','length','permission','JournalEntry','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)','<i\x20class=\x22fas\x20fa-link\x22></i>','showVe','notifications','journalEntries','ENTITY_PERMISSIONS','refresh','contains','.editor','_CACHED_MOUSE_INTERACTION_MANAGER_OPTIONS','_handleConfigUpdate_displayDamageDealt_doAddDisplay','_getEntity','isRemoveDisplays','Failed\x20to\x20refresh\x20token\x20\x22','<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','max','SIDEBAR.Permissions','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)\x22\x20onclick=\x22window.PlutPatcher.TextEditor.handleToggleClick(event)\x22\x20type=\x22button\x22>','startsWith','Set\x20Embed\x20URL','cacheMethod','_onUpdateBaseActor','\x20<i>(you\x20do\x20not\x20have\x20sufficient\x20permissions\x20to\x20view\x20this\x20journal\x20entry)</i></a>','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22flex-vh-center\x20jemb__wrp-content\x20','PERMISSION.Configure','attr','min'];(function(_0x54181f,_0x4ad611){const _0x58be1e=function(_0x24d885){while(--_0x24d885){_0x54181f['push'](_0x54181f['shift']());}};_0x58be1e(++_0x4ad611);}(_0x4ad6,0xe2));const _0x58be=function(_0x54181f,_0x4ad611){_0x54181f=_0x54181f-0x0;let _0x58be1e=_0x4ad6[_0x54181f];return _0x58be1e;};const _0x152c8a=_0x58be;import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';import{UtilApplications}from'./UtilApplications.js';import{Config}from'./Config.js';import{UtilPatch}from'./UtilPatch.js';import{LGT}from'./Util.js';class Patcher{static[_0x152c8a('0x2e')](){const _0x294464=_0x152c8a;this[_0x294464('0x29')](),this[_0x294464('0xa2')](),Hooks['on'](_0x294464('0x94'),()=>this[_0x294464('0xaa')]()),this[_0x294464('0xaa')](),Hooks['on'](_0x294464('0x50'),()=>{const _0x2ae2fb=_0x294464;Patcher[_0x2ae2fb('0x40')][_0x2ae2fb('0xa7')]();});}static[_0x152c8a('0xaa')](){const _0xe32478=_0x152c8a;Patcher['Token'][_0xe32478('0xa7')](),Patcher[_0xe32478('0x40')]['handleConfigUpdate'](),Patcher[_0xe32478('0x49')]['handleConfigUpdate'](),JournalSheet_Plutonium[_0xe32478('0xa7')]();}static[_0x152c8a('0x29')](){const _0x252c14=_0x152c8a,_0x24d885=ui[_0x252c14('0x8b')][_0x252c14('0x7d')][_0x252c14('0x57')](ui[_0x252c14('0x8b')]);ui[_0x252c14('0x8b')][_0x252c14('0x7d')]=()=>{const _0xab2bd3=_0x252c14,_0x4bdc12=_0x24d885();return _0x4bdc12[_0xab2bd3('0x46')]({'name':'Set\x20as\x20Rivet\x20Target','icon':_0xab2bd3('0x95'),'condition':_0x24fbdc=>{const _0x258a6d=_0xab2bd3,_0x45a6b0=ActorDirectory['collection']['get'](_0x24fbdc[_0x258a6d('0x81')](_0x258a6d('0x5a')));return _0x45a6b0[_0x258a6d('0x16')];},'callback':_0x4a7bfd=>{const _0x4f9a68=_0xab2bd3,_0x818e08=ActorDirectory[_0x4f9a68('0x1c')][_0x4f9a68('0x2c')](_0x4a7bfd[_0x4f9a68('0x81')](_0x4f9a68('0x5a')));Config[_0x4f9a68('0x8e')](_0x4f9a68('0xa'),_0x4f9a68('0x39'),_0x818e08['id']),ui[_0x4f9a68('0x64')][_0x4f9a68('0x3f')](_0x4f9a68('0x55')+_0x818e08['id']+'\x22.\x20This\x20can\x20be\x20changed\x20in\x20the\x20Config.');}}),_0x4bdc12;};}static[_0x152c8a('0xa2')](){const _0x28f21c=_0x152c8a,_0x15c728=ui['journal']['_getEntryContextOptions'][_0x28f21c('0x57')](ui[_0x28f21c('0x15')]);ui[_0x28f21c('0x15')]['_getEntryContextOptions']=()=>{const _0x4ad2b0=_0x28f21c,_0x41ceaf=_0x15c728(),_0x4f147a=Config[_0x4ad2b0('0xad')]()[_0x4ad2b0('0x90')]?_0x4ad2b0('0x71'):_0x4ad2b0('0x79'),_0xb4e022=_0x41ceaf[_0x4ad2b0('0x17')](_0x579e6f=>_0x579e6f[_0x4ad2b0('0x1b')]===_0x4f147a);if(!~_0xb4e022)return _0x41ceaf;return _0x41ceaf[_0x4ad2b0('0x4')](_0xb4e022+0x1,0x0,{'name':_0x4ad2b0('0x74'),'icon':_0x4ad2b0('0x62'),'condition':_0x532c5e=>{const _0x155983=_0x4ad2b0;if(!Config[_0x155983('0x2c')](_0x155983('0x65'),_0x155983('0x1')))return![];const _0x170b87=JournalDirectory[_0x155983('0x1c')][_0x155983('0x2c')](_0x532c5e[_0x155983('0x81')](_0x155983('0x5a')));return _0x170b87[_0x155983('0x16')];},'callback':async _0xed1600=>{const _0x124f4e=_0x4ad2b0,_0x1c7f2b=JournalDirectory['collection'][_0x124f4e('0x2c')](_0xed1600[_0x124f4e('0x81')](_0x124f4e('0x5a'))),_0x56f54d=await _0x1c7f2b['getFlag'](SharedConsts[_0x124f4e('0x14')],Consts[_0x124f4e('0x19')]);let _0x3746f6=await InputUiUtil[_0x124f4e('0x3d')]({'title':_0x124f4e('0x2'),'default':_0x56f54d||''});if(_0x3746f6==null)return;Object[_0x124f4e('0x54')](_0x1c7f2b['apps'])[_0x124f4e('0x9')](_0x5eb5a9=>{const _0x2b391f=_0x124f4e;_0x5eb5a9['forceClose']?_0x5eb5a9[_0x2b391f('0x41')]():_0x5eb5a9['close']();});if(!_0x3746f6)await _0x1c7f2b[_0x124f4e('0x2b')](SharedConsts[_0x124f4e('0x14')],Consts['FLAG_IFRAME_URL'],'');else{_0x3746f6=_0x3746f6['trim']();if(_0x3746f6[_0x124f4e('0x73')](_0x124f4e('0xa9')))_0x3746f6=$(_0x3746f6)['attr'](_0x124f4e('0x3b'));!_0x3746f6&&(ui[_0x124f4e('0x64')][_0x124f4e('0x5b')](_0x124f4e('0x52')+_0x3746f6+'\x22\x20was\x20not\x20valid!'),await _0x1c7f2b[_0x124f4e('0x2b')](SharedConsts[_0x124f4e('0x14')],Consts['FLAG_IFRAME_URL'],'')),await _0x1c7f2b[_0x124f4e('0x2b')](SharedConsts[_0x124f4e('0x14')],Consts['FLAG_IFRAME_URL'],_0x3746f6);}}}),_0x41ceaf;};}}Patcher[_0x152c8a('0x34')]=class{static[_0x152c8a('0xa7')](){const _0x125fce=_0x152c8a;this[_0x125fce('0x9c')]();}static[_0x152c8a('0x9c')](){const _0x2c72a6=_0x152c8a,_0x309b49=UtilPatch['cacheMethod'](Token[_0x2c72a6('0x6')],_0x2c72a6('0x67')),_0x469a85=UtilPatch[_0x2c72a6('0x75')](Token['prototype'],_0x2c72a6('0x8f')),_0x46f524=UtilPatch[_0x2c72a6('0x75')](Token[_0x2c72a6('0x6')],_0x2c72a6('0x9f')),_0x55a405=UtilPatch[_0x2c72a6('0x75')](Token[_0x2c72a6('0x6')],_0x2c72a6('0x76'));if(!Config['get']('tokens',_0x2c72a6('0x1d'))){UtilPatch[_0x2c72a6('0x20')](Token['prototype'],'refresh'),UtilPatch[_0x2c72a6('0x20')](Token[_0x2c72a6('0x6')],_0x2c72a6('0x8f')),UtilPatch[_0x2c72a6('0x20')](Token['prototype'],_0x2c72a6('0x9f')),UtilPatch[_0x2c72a6('0x20')](Token[_0x2c72a6('0x6')],_0x2c72a6('0x76')),this['_handleConfigUpdate_displayDamageDealt_doRefreshTokens']({'isRemoveDisplays':!![]});return;}Token[_0x2c72a6('0x6')][_0x2c72a6('0x67')]=function(..._0x52cc7e){const _0x3482ba=_0x2c72a6;Patcher['Token'][_0x3482ba('0x3a')](this),_0x309b49['bind'](this)(..._0x52cc7e);},Token[_0x2c72a6('0x6')]['_onUpdate']=function(..._0x135c5f){const _0x9809e4=_0x2c72a6;Patcher[_0x9809e4('0x34')][_0x9809e4('0x3a')](this),_0x469a85['bind'](this)(..._0x135c5f);},Token[_0x2c72a6('0x6')]['_onUpdateTokenActor']=function(..._0xf86fac){const _0x3f7c03=_0x2c72a6;Patcher[_0x3f7c03('0x34')]['_handleConfigUpdate_displayDamageDealt_doUpdateDisplay'](this),_0x46f524['bind'](this)(..._0xf86fac);},Token['prototype'][_0x2c72a6('0x76')]=function(..._0x380232){const _0x412141=_0x2c72a6;Patcher[_0x412141('0x34')][_0x412141('0x3a')](this),_0x55a405[_0x412141('0x57')](this)(..._0x380232);},this['_handleConfigUpdate_displayDamageDealt_doRefreshTokens']();}static[_0x152c8a('0x1f')](_0x18183f){const _0x34506d=_0x152c8a;_0x18183f=_0x18183f||{};const _0xe9ba62=MiscUtil[_0x34506d('0x2c')](canvas,_0x34506d('0x92'),'placeables')||[];for(const _0xa667cf of _0xe9ba62){try{_0x18183f[_0x34506d('0x6d')]&&_0xa667cf['_plutonium_xDispDamageDealt']&&(_0xa667cf[_0x34506d('0x97')](_0xa667cf['_plutonium_xDispDamageDealt']),_0xa667cf[_0x34506d('0x33')]=null),_0xa667cf[_0x34506d('0x67')]();}catch(_0x14ff8d){console['warn'](...LGT,_0x34506d('0x6e')+_0xa667cf['_id']+'\x22!',_0x14ff8d);}}}static[_0x152c8a('0x3a')](_0x152244){const _0x21e19b=_0x152c8a;this[_0x21e19b('0x6b')](_0x152244);const _0xf6038c=MiscUtil['get'](_0x152244[_0x21e19b('0x21')],_0x21e19b('0x81'),_0x21e19b('0x81'),'attributes','hp',_0x21e19b('0x70'))||0x0,_0x23ce25=MiscUtil[_0x21e19b('0x2c')](_0x152244[_0x21e19b('0x21')],_0x21e19b('0x81'),_0x21e19b('0x81'),_0x21e19b('0x47'),'hp','value')||0x0,_0x2599cf=Math[_0x21e19b('0x7b')](_0xf6038c,Math[_0x21e19b('0x70')](0x0,_0xf6038c-_0x23ce25));_0x152244[_0x21e19b('0x33')]['text']=''+_0x2599cf,_0x152244['_plutonium_xDispDamageDealt'][_0x21e19b('0xa5')]=!!_0x2599cf;if(_0x23ce25<=Math[_0x21e19b('0x44')](_0xf6038c/0x2))_0x152244[_0x21e19b('0x33')][_0x21e19b('0x27')]['fill']=0xff0000;else _0x152244[_0x21e19b('0x33')][_0x21e19b('0x27')][_0x21e19b('0x98')]=0xffffff;}static[_0x152c8a('0x6b')](_0x133434){const _0x18a10f=_0x152c8a;if(_0x133434[_0x18a10f('0x33')]&&_0x133434[_0x18a10f('0x33')]['parent'])return;_0x133434[_0x18a10f('0x33')]&&!_0x133434['_plutonium_xDispDamageDealt']['parent']&&(_0x133434[_0x18a10f('0x97')](_0x133434['_plutonium_xDispDamageDealt']),_0x133434[_0x18a10f('0x33')]=null),_0x133434[_0x18a10f('0x33')]=new PIXI['Text']('',CONFIG[_0x18a10f('0x7')][_0x18a10f('0x48')]()),_0x133434[_0x18a10f('0x33')][_0x18a10f('0x27')][_0x18a10f('0x87')]=0x18,_0x133434[_0x18a10f('0x33')][_0x18a10f('0xa4')][_0x18a10f('0x8e')](0x1,0x1),_0x133434[_0x18a10f('0x33')][_0x18a10f('0x4d')][_0x18a10f('0x8e')](_0x133434['w']-0x3,_0x133434['h']-0x1),_0x133434['addChild'](_0x133434['_plutonium_xDispDamageDealt']);}},Patcher['Drawing']=class{static['handleConfigUpdate'](){const _0x8303a6=_0x152c8a;if(!MiscUtil[_0x8303a6('0x2c')](canvas,_0x8303a6('0x51'),_0x8303a6('0x85')))return;if(Config[_0x8303a6('0x2c')]('ui',_0x8303a6('0x24'))){if(Patcher[_0x8303a6('0x40')][_0x8303a6('0x6a')]==null)Patcher[_0x8303a6('0x40')][_0x8303a6('0x6a')]=canvas[_0x8303a6('0x51')][_0x8303a6('0x85')];canvas[_0x8303a6('0x51')][_0x8303a6('0x85')][_0x8303a6('0x96')]=0x1;}else{if(Patcher[_0x8303a6('0x40')]['_CACHED_MOUSE_INTERACTION_MANAGER_OPTIONS']!=null)canvas['mouseInteractionManager']['options']=Patcher[_0x8303a6('0x40')][_0x8303a6('0x6a')];}}},Patcher[_0x152c8a('0x40')]['_CACHED_MOUSE_INTERACTION_MANAGER_OPTIONS']=null,Patcher['TextEditor']=class{static[_0x152c8a('0xa7')](){const _0x5e4ceb=_0x152c8a,_0x122821=UtilPatch[_0x5e4ceb('0x75')](TextEditor,_0x5e4ceb('0x1e'),{'isBind':!![]}),_0x2a4bdc=UtilPatch['cacheMethod'](JournalSheet[_0x5e4ceb('0x6')],_0x5e4ceb('0x31'));if(!Config['get']('journalEntries',_0x5e4ceb('0x59'))){UtilPatch[_0x5e4ceb('0x20')](TextEditor,_0x5e4ceb('0x1e')),UtilPatch[_0x5e4ceb('0x20')](JournalSheet[_0x5e4ceb('0x6')],_0x5e4ceb('0x31'));return;}TextEditor[_0x5e4ceb('0x1e')]=Patcher[_0x5e4ceb('0x49')][_0x5e4ceb('0x1e')][_0x5e4ceb('0x57')](this,_0x122821),JournalSheet[_0x5e4ceb('0x6')][_0x5e4ceb('0x31')]=function(..._0x29df34){const _0x3bb43b=_0x5e4ceb;_0x2a4bdc[_0x3bb43b('0x57')](this)(..._0x29df34),Patcher[_0x3bb43b('0x49')][_0x3bb43b('0x5c')](..._0x29df34);};}static[_0x152c8a('0x1e')](_0x112887,_0x52815e,{secrets:secrets=![],entities:entities=!![],links:links=!![],rolls:rolls=!![],rollData:rollData=null}={},_0x543f32=0x0){const _0x6ebb75=_0x152c8a,_0x5596e5={'secrets':secrets,'entities':entities,'links':links,'rolls':rolls,'rollData':rollData};_0x52815e=_0x112887(_0x52815e,_0x5596e5);if(!entities)return _0x52815e;return _0x52815e=_0x52815e[_0x6ebb75('0xe')](/@Embed(JournalEntry)\[([^\]]+)](?:{([^}]+)})?/g,(..._0x2fb602)=>this[_0x6ebb75('0x12')](_0x5596e5,_0x543f32,..._0x2fb602)),_0x52815e;}static[_0x152c8a('0x12')](_0x1af03d,_0x3168de,_0x463646,_0x374b70,_0x368f56,_0x1ce87a){const _0x371b67=_0x152c8a,_0x2880f2=CONFIG[_0x374b70],_0x3a21f7=_0x2880f2[_0x371b67('0xa6')][_0x371b67('0x1c')],_0x34c823=this[_0x371b67('0x6c')](_0x3a21f7,_0x368f56);if(!_0x34c823)return'<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20'+(_0x1ce87a||_0x368f56)+_0x371b67('0x43');if(this[_0x371b67('0x11')](_0x34c823)<CONST[_0x371b67('0x66')]['OBSERVER'])return _0x371b67('0x6f')+(_0x1ce87a||_0x368f56)+_0x371b67('0x77');const _0xcb00d7=TextEditor[_0x371b67('0x3c')](_0x463646,_0x374b70,_0x368f56,_0x1ce87a),_0x3f8229=Config[_0x371b67('0x2c')]('journalEntries',_0x371b67('0xa1'));if(_0x34c823[_0x371b67('0x4b')][_0x371b67('0x2f')]===_0x371b67('0x45')){const _0x1ecbc0=_0x34c823['data'][_0x371b67('0x2a')];return'<div\x20class=\x22w-100\x20flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>'+_0xcb00d7+this[_0x371b67('0x9b')](_0x3f8229)+_0x371b67('0x78')+(_0x3f8229?'':'ve-hidden')+'\x22><a\x20target=\x22_blank\x20w-100\x22\x20href=\x22'+_0x1ecbc0+'\x22><img\x20src=\x22'+_0x1ecbc0+_0x371b67('0x4a');}else{const _0x30fc41=_0x3168de===Patcher[_0x371b67('0x49')][_0x371b67('0x56')],_0xe67af8=_0x30fc41?_0x34c823['data'][_0x371b67('0x99')]:TextEditor['enrichHTML'](_0x34c823['data']['content'],_0x1af03d,_0x3168de+0x1);return _0x371b67('0x82')+_0xcb00d7+this[_0x371b67('0x9b')](_0x3f8229)+_0x371b67('0x9e')+(_0x30fc41?_0x371b67('0x4c'):'')+_0x371b67('0xab')+(_0x3f8229?'':_0x371b67('0x30'))+'\x22>'+_0xe67af8+_0x371b67('0x35');}}static[_0x152c8a('0x11')](_0x5b2342){const _0x2abee1=_0x152c8a;if(game[_0x2abee1('0x7e')]['isGM'])return CONST[_0x2abee1('0x66')][_0x2abee1('0x0')];return Math[_0x2abee1('0x70')](_0x5b2342[_0x2abee1('0x81')][_0x2abee1('0x5f')][game[_0x2abee1('0x7e')][_0x2abee1('0x3')]],_0x5b2342[_0x2abee1('0x81')][_0x2abee1('0x5f')][_0x2abee1('0x93')]);}static[_0x152c8a('0x6c')](_0x109310,_0x386eaa){const _0x162cc5=_0x152c8a;let _0x118ae0=null;if(/^[a-zA-Z0-9]{16}$/['test'](_0x386eaa))_0x118ae0=_0x109310['get'](_0x386eaa);if(!_0x118ae0)_0x118ae0=_0x109310['entities']['find'](_0x176473=>_0x176473[_0x162cc5('0x81')]['name']===_0x386eaa);return _0x118ae0;}static[_0x152c8a('0x84')](_0x5a543e){const _0x143ed8=_0x152c8a,_0x10cfe7=$(_0x5a543e['currentTarget']),_0x382b85=_0x10cfe7['attr'](_0x143ed8('0x8a'))==='1';if(_0x5a543e['shiftKey']){_0x5a543e[_0x143ed8('0x5d')]();const _0x2d40d8=_0x10cfe7['closest'](_0x143ed8('0x69'));_0x2d40d8['find'](_0x143ed8('0xa8'))[_0x143ed8('0x32')]((_0x5133f5,_0x115ed4)=>this['_handleExpandCollapse']($(_0x115ed4),_0x382b85));return;}this[_0x143ed8('0x83')](_0x10cfe7,_0x382b85);}static['_handleExpandCollapse'](_0x3b61a8,_0x5428b2){const _0x3e7b85=_0x152c8a,_0x2798dd=_0x3b61a8[_0x3e7b85('0x23')]()[_0x3e7b85('0x26')]();_0x2798dd[_0x3e7b85('0x53')](_0x3e7b85('0x30'),_0x5428b2),_0x3b61a8[_0x3e7b85('0x7a')]('data-plut-is-expanded',_0x5428b2?'0':'1')[_0x3e7b85('0xb')](_0x5428b2?_0x3e7b85('0x7f'):'<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>')[_0x3e7b85('0x9a')]((_0x5428b2?_0x3e7b85('0x37'):_0x3e7b85('0x13'))+_0x3e7b85('0x61'));}static['_getBtnHtmlToggle'](_0x208586){const _0x117442=_0x152c8a;return _0x117442('0xd')+(_0x208586?0x1:0x0)+_0x117442('0x36')+(_0x208586?_0x117442('0x13'):_0x117442('0x37'))+_0x117442('0x72')+(_0x208586?_0x117442('0x8d'):'<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>')+_0x117442('0x7c');}static[_0x152c8a('0x5c')](_0x5d2426){const _0x3cc032=_0x152c8a;for(let _0xb1756d of _0x5d2426[_0x3cc032('0xa0')](_0x3cc032('0x5'))){if(_0xb1756d[_0x3cc032('0x1a')][_0x3cc032('0x68')]('jemb__btn-toggle'))_0xb1756d[_0x3cc032('0x18')](_0x3cc032('0x38'));}}},Patcher[_0x152c8a('0x49')]['_MAX_RECURSION_DEPTH']=0x45;class JournalSheet_Plutonium extends JournalSheet{static[_0x152c8a('0xa7')](){const _0x4c05fb=_0x152c8a,_0x3401fb=Config[_0x4c05fb('0x2c')](_0x4c05fb('0x65'),'isEnableUrlEmbeds');if(JournalSheet_Plutonium[_0x4c05fb('0xa3')]===_0x3401fb)return;JournalSheet_Plutonium[_0x4c05fb('0xa3')]=_0x3401fb;if(_0x3401fb)JournalSheet_Plutonium['doApplyPatch']();else JournalSheet_Plutonium['doRemovePatch']();}static[_0x152c8a('0xc')](){const _0x2cd12c=_0x152c8a;JournalSheet_Plutonium[_0x2cd12c('0x4e')]=!![],JournalSheet=JournalSheet_Plutonium,CONFIG['JournalEntry'][_0x2cd12c('0x80')]=JournalSheet_Plutonium;}static[_0x152c8a('0x91')](){const _0x56e7d2=_0x152c8a;if(!JournalSheet_Plutonium[_0x56e7d2('0x4e')])return;JournalSheet=JournalSheet_Plutonium[_0x56e7d2('0x9d')],CONFIG[_0x56e7d2('0x60')]['sheetClass']=JournalSheet_Plutonium[_0x56e7d2('0x9d')],Object[_0x56e7d2('0x54')](ui[_0x56e7d2('0x89')])[_0x56e7d2('0x9')](_0x728ebd=>{const _0xb41eed=_0x56e7d2;_0x728ebd[_0xb41eed('0x10')]===JournalSheet_Plutonium&&_0x728ebd[_0xb41eed('0xac')][_0xb41eed('0x25')](SharedConsts[_0xb41eed('0x14')],Consts[_0xb41eed('0x19')])&&_0x728ebd[_0xb41eed('0x41')]();});}static get[_0x152c8a('0x1b')](){const _0x580bac=_0x152c8a;return _0x580bac('0x8');}static get['defaultOptions'](){const _0x53d065=_0x152c8a;return{...super[_0x53d065('0x22')],'template':SharedConsts['MODULE_LOCATION']+_0x53d065('0x28')};}get[_0x152c8a('0x88')](){const _0x49615e=_0x152c8a;if(this[_0x49615e('0x2f')]===_0x49615e('0x45'))return ImagePopout[_0x49615e('0x22')][_0x49615e('0x88')];return SharedConsts[_0x49615e('0xae')]+_0x49615e('0x28');}[_0x152c8a('0x42')](..._0x20776b){const _0x22cd25=_0x152c8a;if(this[_0x22cd25('0xac')]&&this[_0x22cd25('0xac')][_0x22cd25('0x25')](SharedConsts[_0x22cd25('0x14')],Consts['FLAG_IFRAME_URL'])){this[_0x22cd25('0x86')][_0x22cd25('0x8c')]();return;}return super[_0x22cd25('0x42')](..._0x20776b);}[_0x152c8a('0x41')](){const _0x18b24c=_0x152c8a;return super[_0x18b24c('0x42')]();}['render'](..._0x443fca){const _0x85d09a=_0x152c8a;if(_0x443fca[0x1]&&_0x443fca[0x1][_0x85d09a('0x58')]!==this[_0x85d09a('0x2f')])return super[_0x85d09a('0xf')](..._0x443fca);if(this[_0x85d09a('0x86')]&&this[_0x85d09a('0x86')][_0x85d09a('0x5e')]){this[_0x85d09a('0x86')][_0x85d09a('0x63')](),this[_0x85d09a('0x3e')](),UtilApplications[_0x85d09a('0x2d')](this);return;}return super[_0x85d09a('0xf')](..._0x443fca);}}JournalSheet_Plutonium[_0x152c8a('0x4f')]=![],JournalSheet_Plutonium['_CACHED_CLASS']=JournalSheet,JournalSheet_Plutonium[_0x152c8a('0xa3')]=null,window['PlutPatcher']=Patcher;export{Patcher};