'use strict';const _0x15c4=['_getExistingClassItems','_pImportEntry_pFillItemArrayFeatures','values','weaponProf','Import\x20Class?','pMutActorUpdateOptionalFeature','OwnedItem','min','_cntStartingSkillChoicesMutliclass','Ability\x20Score\x20Improvementâ€”Level\x20','_comp','fnGetData','thief','MODE_MULTICLASS','ele','getOrSet','pGetWithCache','Populate\x20Spellbook','SOURCE_TYP_OFFICIAL_ALL','_getDefaultState','5etools','split','_pImportEntry_pDoUpdateCharacter_pPopulateMulticlassProficiencies','isDataEntered','Monk','toolProf','pGetCompendiumImage','pAddActorItems','Select\x20Existing\x20Feature\x20to\x20Import\x20','strBonus','_titleSearch','mode','<input\x20type=\x22text\x22\x20class=\x22text-center\x22\x20placeholder=\x220\x22>','getCasterProgressionMeta','proficienciesGained','_pImportEntry_pGetFolderId','You\x20have\x20selected\x20a\x20single\x20level\x20to\x20import\x20(level\x20','toTitleCase','proficiencyImportMode','Task','reliableTalent','mutateForFilters','html','addImportFeature','pGetSpellItem','SOURCE_TYP_CUSTOM','absorbFnGetData','isIncludesLevelOne','ImportEntryOpts','_pAddLoadedFeature','_render_ability','additionalSpells','pSerialAwaitMap','importClass','isSkip','navigator\x27s\x20tools','\x20SOURCE\x20','reduce','getItemSource','desc','render','section','MODULE_NAME_FAKE','<div\x20class=\x22col-2\x20text-center\x22></div>','Import\x20Level\x20','subclasses','_pImportSubclass_pImportToItems','isStreamerMode','activateSidebarTab','pGetSources','_pImportEntry_pGetCurLevelFillClassData','(Create\x20New\x20Feature)','pPostLoad','entries','herb','pInit','MODULE_LOCATION','<div\x20class=\x22text-center\x22\x20title=\x22Remaining\x22></div>','_state','attributes','initBtnSortHandlers','sourceJsonToAbv','update','\x20Levels\x20To','_foundryAllFeatures','updateEmbeddedEntity','getImportableFeatures','pGetUserBoolean','hpIncreaseMode','$getHoverContent_stats','_$btnRun','spellcastingAbility','getActorSpellItemOpts','_activateListeners_pInitFilteredList','flags','optionalfeature','MODE_DO_NOT_INCREASE','cls','assign','forgery\x20kit','actorUpdate','_pImportEntry_pDoUpdateExistingPackEntity','Item','_pImportEntry_pDoUpdateExistingDirectoryEntity','_foundryIsSkipImportPreparedSpells','sourceJsonToFull','Import\x20Only\x20Subclass','pGetUserInput','faces','light','</h3>','classFeatures','con','custom','folder',').\x20Would\x20you\x20like\x20to\x20import\x20level','TASK_EXIT_CANCELLED','simple','_$wrpMiniPills','proficiency','postItemActorUpdate','full','hover','$iptBonus','fnBindListeners','getMaxWindowHeight','_gameProp','createEmbeddedEntity','Import\x20Class\x20and\x20Subclass','Bard','type','checked','\x20+\x20','_foundryStartingProficiencyMode','$row','sort','_pImportEntry_pHandleFeatures','Component','str','change','chosenProficiencies','isCancelled','Unknown\x20proficiency\x20import\x20mode\x20\x22','Failed\x20to\x20import\x20\x22','herbalism\x20kit','dnd5e','items','traits','map','remarkableAthlete','pGetUserChoice','disg','_getFilterNamespace','hash','sortDir','_$btnReset','form-control--error','roll','featData','name','Unhandled\x20HP\x20increase\x20mode\x20\x22','Configure\x20and\x20Open\x20List','startingEquipment','toMessage','classFeature','toDisplay','filterValues','pct','TASK_EXIT_SKIPPED_DUPLICATE','spells','Imported\x20\x22','LEVEL_XP_REQUIRED','click','getSourceWithPagePart','_addHookBase','getNameWithSourcePart','numLevelsPrev','tglSel','__state','CASTER_TYPE_TO_PROGRESSION','_resolve','length','includes','diamondSoul','<hr\x20class=\x22hr-1\x22>\x0a\x09\x09\x09\x09\x09\x09','value','notifications','fluff','list-multi-selected','classList','sheet','isTemp','_pImportPreparedCasterSpells','_reject','empty','(Unnamed\x20subclass)','spellcasting','_pImportEntry_setActorFlags','112937PAxCgG','addHook','hvy','getAbilityModifier','number','ExistingFeatureChecker','music','subclassName','multiclassing','dexBonus','filterBox','prof','int','folderId','thieves\x27\x20tools','martial','insert','Select\x20Existing\x20Feature...','12467MHRmXN','feat','_pGetUserClassItem','getAbilityModNumber','getFilteredFeatures','ability','Please\x20select\x20a\x20feat!','_$wrpList','keys','DND5E','classSourceLong','pImportEquipmentItemEntries','description','_pGetSelectedLevelIndices','class','getValues','abilities','MODE_TAKE_AVERAGE','copy','Please\x20select\x20something\x20to\x20import!','artisan\x27s\x20tools','_actor','_pImportEntry_pFillItemArrayPredefinedFeatures','intBonus','_pHandleAbilityScoreIncrease','toUpperCase','spell','Bonus','med','getData','create','sourceLong','languageProficiencies','_foundrySelectedLevelIndices','forg','getTotalClassLevels','_pImportEntry_pFinalise',')?</p>','doAbsorbItems','preCreateOwnedItem','formDataEquipment','pImportClass','game','log','60591FxLSem','14BVMRis','shl','_pDoResolve','dataType','MODULE_NAME','Rogue','activateListeners','Yes','ticker','1ySJYkq','getMappedCasterType','Import\x20Classes','Classes','69469pxWTad','_pImportClass_pImportToItems','set','feats-classAbilityScoreIncrease','wisBonus','heavy','_id','text','sourceJsonToColor','conBonus','pWaitForUserInput','levels','stripTags','currency','SYM_UI_SKIP','weapons','_pImportEntry_pDoUpdateCharacter','_titleButtonRun','<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>Ability\x20Score\x20Improvement</button>','_pack','_pImportEntry_pDoUpdateCharacter_pPopulateLevelOneProficienciesAndEquipment','close','Feats','_pImportEntry_pDoUpdateCharacter_pPopulateProficienciesFrom','_pageFilter','removeHook','modules/','content','art','add','ceil','forEach','proficient','tools','spacer','isOverwrite','get','targetLevel','classAbilityScoreIncrease','1mbXiPB','details','24595LIDPuh','startingProficiencies','info','Remaining:\x20','You\x20have\x20selected\x20a\x20subclass\x20to\x20import,\x20but\x20have\x20no\x20class\x20levels.\x20Would\x20you\x20like\x20to\x20import\x20the\x20class\x20too?','114974qcIbtS','entity','/template/ImportListClassAbilityScoreIncrease.handlebars','pImportSubclass','Importing\x20subclass\x20\x22','pGetClasses','_fnClose','_render_feat','languages','_activateListeners_initRunButton','init','pGetOptionalFeatureItem','total','toLowerCase','getCasterProgression','preparedSpells','getDataHitDice','link','pGetAllSpells','_isDataEntered','spellHashToItemIdMap','firstElementChild','itemsToUpdate','addToFilters','ixSub','_list','<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>Feat</button>','sourceClassName','_pImportEntry_getApproxPreviousMaxLevel','class_subclass','casterProgression','_ancestorType','AbilityScoreIncrease','source','remove','isStrictMatching','then','ascSortLower','contains','filter','numLevels','find','getActorSpell','Custom\x20URL','_content','cha','active','pFillActorSkillData','trim','<button\x20class=\x22btn\x20btn-primary\x20btn-5et\x22>Confirm</button>','_pImportClass_pGetProficiencyImportMode','getAllFeatures','<button\x20class=\x22btn\x20btn-default\x20mr-3\x22>Skip</button>','TASK_EXIT_COMPLETE','Fighter','isRadio','_$wrpBtnsSort','isToken','max','subclassFeatures','URL_TO_HASH_BUILDER','veapp__msg-error','_pImportEntry_pFillItemArrayAdditionalSpells','isClassImport','_getActorUpdate','<div\x20class=\x22flex-col\x20w-100\x20h-100\x22></div>','_importOpts','(Unnamed\x20class)','subRows','Importing\x20class\x20\x22','_pPostLoad','level','_pUserInput','_pImportClass_pGetHpImportMode','SRD','MODE_PRIMARY','cbSel','pInitFilterBox','warn','dex','data','join','_$bntFilter','_getFeatData','pFillActorLanguageData','Feat','constructor','bind','1KsYKCW','skills','\x20too?','trimObject','subclass','curLevel','className','_pImportSubclass_pImportToActor','_cachedData','musical\x20instrument','setFirstSection','getFeaturesGroupedByOptionsSet','<hr\x20class=\x22hr-1\x22><h3\x20class=\x22mb-2\x20mt-0\x22>Selected:\x20','importEntity','toggleVe','pact','disguise\x20Kit','_pImportClass_pImportToActor','page','gaming\x20set','pGetClassSubclassFeatureItem','\x20SUBCLASS\x20','last','DataSourceUrl','shields','addEventListener','push','_foundryHpIncreaseMode','<button\x20class=\x22btn\x20btn-primary\x20mr-2\x22>Confirm</button>','102971KLApPL','HP\x20Increase','floor','_handleFilterChange','_pValidateUserLevelIndices','chaBonus','_$btnToggleSummary','wis','some','<button\x20class=\x22btn\x20btn-default\x20btn-5et\x20w-100\x20mr-2\x22>Choose\x20Feat</button>','error','doApplyFilterToFeatureEntries','pGetUserEnum','MODE_ROLL','_getDuplicateMeta','toggleClass'];const _0x401e=function(_0x1c753e,_0x2b6bf2){_0x1c753e=_0x1c753e-0x9e;let _0x15c49b=_0x15c4[_0x1c753e];return _0x15c49b;};const _0x57d078=_0x401e;(function(_0x5ea5d1,_0x1c9dc7){const _0x1b3741=_0x401e;while(!![]){try{const _0x209f23=parseInt(_0x1b3741(0x239))*-parseInt(_0x1b3741(0x204))+parseInt(_0x1b3741(0x240))*-parseInt(_0x1b3741(0xd3))+parseInt(_0x1b3741(0x23b))+parseInt(_0x1b3741(0x212))+parseInt(_0x1b3741(0x1c6))*parseInt(_0x1b3741(0x20e))+-parseInt(_0x1b3741(0xf0))+parseInt(_0x1b3741(0x205))*parseInt(_0x1b3741(0x1d8));if(_0x209f23===_0x1c9dc7)break;else _0x5ea5d1['push'](_0x5ea5d1['shift']());}catch(_0xa1ade8){_0x5ea5d1['push'](_0x5ea5d1['shift']());}}}(_0x15c4,0x1925b));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT,Util}from'./Util.js';import{DataConverter}from'./DataConverter.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterClass}from'./DataConverterClass.js';import{UtilActors}from'./UtilActors.js';import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterOptionalfeature}from'./DataConverterOptionalfeature.js';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_HpIncreaseModeSelect,Charactermancer_Class_LevelSelect,Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';class ImportListClass extends ImportListCharacter{static[_0x57d078(0x24a)](){const _0x54388d=_0x57d078;Hooks['on'](_0x54388d(0x1ff),(_0x3687c9,_0x3c6ba1)=>{const _0x2b3bf1=_0x54388d,_0x112ae2=_0x3c6ba1['flags']?.[SharedConsts['MODULE_NAME']];if(!_0x112ae2||!_0x112ae2?.[_0x2b3bf1(0xcb)]?.[_0x2b3bf1(0x1e6)])return;const _0x249739=_0x112ae2[_0x2b3bf1(0xcb)][_0x2b3bf1(0x1e6)],_0x24b4f9=_0x112ae2[_0x2b3bf1(0xcb)][_0x2b3bf1(0xd7)];return(async()=>{const _0x59fc0f=_0x2b3bf1,_0xdef233=new ImportListClass({'actor':_0x3687c9});await _0xdef233[_0x59fc0f(0x14b)](),_0x24b4f9?await _0xdef233[_0x59fc0f(0x243)](_0x249739,_0x24b4f9,{'filterValues':_0x112ae2['filterValues']}):await _0xdef233['pImportClass'](_0x249739,{'filterValues':_0x112ae2[_0x59fc0f(0x1a6)]});})()[_0x2b3bf1(0x9f)](()=>ui[_0x2b3bf1(0x1ba)][_0x2b3bf1(0x23d)](_0x2b3bf1(0x1aa)+_0x249739[_0x2b3bf1(0x19f)]+'\x22'+(_0x24b4f9?'\x20('+_0x24b4f9[_0x2b3bf1(0x19f)]+')':'')+'\x20via\x20Class\x20Importer'))['catch'](_0xcc1f8d=>{const _0x4cb346=_0x2b3bf1;ui[_0x4cb346(0x1ba)][_0x4cb346(0xfa)](_0x4cb346(0x18f)+_0x249739[_0x4cb346(0x19f)]+'\x22'+(_0x24b4f9?'\x20('+_0x24b4f9[_0x4cb346(0x19f)]+')':'')+'!\x20'+VeCt['STR_SEE_CONSOLE']);throw _0xcc1f8d;}),![];});}constructor(_0x56024b){const _0x4536fe=_0x57d078;_0x56024b=_0x56024b||{},super({'title':_0x4536fe(0x210),'template':SharedConsts[_0x4536fe(0x14c)]+'/template/ImportListClass.handlebars','height':Util[_0x4536fe(0x17d)](),'resizable':!![]},_0x56024b,{'namespace':_0x4536fe(0x25d),'defaultFolderPath':[_0x4536fe(0x211)],'folderType':_0x4536fe(0x166),'sidebarTab':_0x4536fe(0x192),'gameProp':_0x4536fe(0x192),'pageFilter':new PageFilterClassesFoundry(),'isDedupable':!![]}),this[_0x4536fe(0xdb)]=null;}set[_0x57d078(0x22d)](_0x2543cc){const _0x286c26=_0x57d078;super['content']=_0x2543cc,this[_0x286c26(0xdb)]=null;}static async[_0x57d078(0xc1)](_0x51b5a0){const _0x2c6ff2=_0x57d078,_0x1f4e26=await PageFilterClassesFoundry[_0x2c6ff2(0x148)](_0x51b5a0),_0x5ca361=await Vetools[_0x2c6ff2(0x110)](Vetools['DATA_URL_OPTIONALFEATURES']);return Charactermancer_Class_Util['addFauxOptionalFeatureFeatures'](_0x1f4e26,_0x5ca361[_0x2c6ff2(0x15f)]),_0x1f4e26;}async[_0x57d078(0x145)](){const _0x3409dd=_0x57d078;return[new ImportList['DataSourceSpecial'](Config[_0x3409dd(0x236)]('ui',_0x3409dd(0x143))?_0x3409dd(0xc5):_0x3409dd(0x114),Vetools[_0x3409dd(0x245)],{'cacheKey':'5etools-classes','pPostLoad':this[_0x3409dd(0xd1)][_0x3409dd(0xc1)][_0x3409dd(0xd2)](this[_0x3409dd(0xd1)]),'filterTypes':[ImportList[_0x3409dd(0x112)]],'isDefault':!![]}),new ImportList[(_0x3409dd(0xea))](_0x3409dd(0xa6),'',{'pPostLoad':this['constructor'][_0x3409dd(0xc1)][_0x3409dd(0xd2)](this['constructor']),'filterTypes':[ImportList[_0x3409dd(0x12d)]]}),new ImportList['DataSourceFile']('Upload\x20File',{'pPostLoad':this[_0x3409dd(0xd1)][_0x3409dd(0xc1)][_0x3409dd(0xd2)](this[_0x3409dd(0xd1)]),'filterTypes':[ImportList[_0x3409dd(0x12d)]]}),...(await Vetools['pGetHomebrewSources']('class',_0x3409dd(0xd7)))[_0x3409dd(0x194)](({name:_0xfdce5a,url:_0x3855c3})=>new ImportList[(_0x3409dd(0xea))](_0xfdce5a,_0x3855c3,{'pPostLoad':this['constructor'][_0x3409dd(0xc1)]['bind'](this[_0x3409dd(0xd1)]),'filterTypes':[ImportList['SOURCE_TYP_BREW']]}))];}[_0x57d078(0x1f5)](){const _0x4b4b5f=_0x57d078;if(this[_0x4b4b5f(0xdb)]&&this[_0x4b4b5f(0xdb)][_0x4b4b5f(0xb2)]!==!!this['_actor'])this['_cachedData']=null;this[_0x4b4b5f(0xdb)]=this['_cachedData']||{'titleButtonRun':this[_0x4b4b5f(0x223)],'titleSearch':this[_0x4b4b5f(0x11e)],'rows':this[_0x4b4b5f(0xa7)][_0x4b4b5f(0x187)]((_0x3a080a,_0x4f123e)=>SortUtil[_0x4b4b5f(0xa0)](_0x3a080a[_0x4b4b5f(0x19f)],_0x4f123e[_0x4b4b5f(0x19f)])||SortUtil[_0x4b4b5f(0xa0)](Parser[_0x4b4b5f(0x169)](_0x3a080a[_0x4b4b5f(0x261)]||SRC_PHB),Parser[_0x4b4b5f(0x169)](_0x4f123e[_0x4b4b5f(0x261)]||SRC_PHB)))[_0x4b4b5f(0x194)]((_0x43c42d,_0x4620cb)=>{const _0x54f383=_0x4b4b5f;return this[_0x54f383(0x22a)][_0x54f383(0xd1)][_0x54f383(0x129)](_0x43c42d),{'name':_0x43c42d['name'],'source':_0x43c42d[_0x54f383(0x261)],'sourceShort':Parser[_0x54f383(0x151)](_0x43c42d[_0x54f383(0x261)]),'sourceLong':Parser[_0x54f383(0x169)](_0x43c42d[_0x54f383(0x261)]),'sourceClassName':Parser['sourceJsonToColor'](_0x43c42d['source']),'ix':_0x4620cb,'disabled':!_0x43c42d[_0x54f383(0x16f)],'subRows':(_0x43c42d[_0x54f383(0x141)]||[])['map']((_0x253a2c,_0x30169b)=>({'name':_0x253a2c[_0x54f383(0x19f)],'source':_0x253a2c[_0x54f383(0x261)]||_0x43c42d['source'],'sourceShort':Parser['sourceJsonToAbv'](_0x253a2c[_0x54f383(0x261)]||_0x43c42d[_0x54f383(0x261)]),'sourceLong':Parser[_0x54f383(0x169)](_0x253a2c['source']||_0x43c42d['source']),'sourceClassName':Parser[_0x54f383(0x21a)](_0x253a2c['source']||_0x43c42d[_0x54f383(0x261)]),'ixSub':_0x30169b}))};})};if(this['_actor'])this[_0x4b4b5f(0xdb)][_0x4b4b5f(0xb2)]=!![];return this[_0x4b4b5f(0xdb)];}[_0x57d078(0x249)](){const _0x164fc8=_0x57d078;this[_0x164fc8(0x15a)][_0x164fc8(0x1ac)](async()=>{const _0x31d290=_0x164fc8;if(!this[_0x31d290(0x259)])return;const _0x434ee3=this[_0x31d290(0x1ed)]?this['_list'][_0x31d290(0x192)][_0x31d290(0xa2)](_0x322550=>_0x322550[_0x31d290(0xcb)]['tglSel']&&_0x322550[_0x31d290(0xcb)][_0x31d290(0x1b1)]['classList']['contains'](_0x31d290(0xa9)))[_0x31d290(0x194)](_0x3757ae=>({'ix':_0x3757ae[_0x31d290(0x102)]['ix'],'ixSub':_0x3757ae[_0x31d290(0x102)][_0x31d290(0x258)]})):this['_list'][_0x31d290(0x192)]['filter'](_0x4136d3=>_0x4136d3[_0x31d290(0xcb)][_0x31d290(0xc7)]['checked'])[_0x31d290(0x194)](_0x1bbebe=>({'ix':_0x1bbebe[_0x31d290(0x102)]['ix'],'ixSub':_0x1bbebe[_0x31d290(0x102)][_0x31d290(0x258)]}));if(!_0x434ee3[_0x31d290(0x1b5)])return ui[_0x31d290(0x1ba)][_0x31d290(0xc9)](_0x31d290(0x1eb));this[_0x31d290(0x227)](),this[_0x31d290(0x144)]();const _0x27a61c=_0x434ee3[_0x31d290(0x194)](({ix:_0x4de0cc,ixSub:_0x2d88e1})=>{const _0x6785c1=_0x31d290,_0x1dc807=MiscUtil[_0x6785c1(0x1ea)](this['_content'][_0x4de0cc]);return{'ix':_0x4de0cc,'cls':_0x1dc807,'ixSub':_0x2d88e1,'sc':_0x2d88e1!=null?_0x1dc807['subclasses'][_0x2d88e1]:null};});_0x27a61c[_0x31d290(0xa2)](_0x3502c9=>!_0x3502c9['sc'])[_0x31d290(0x231)](_0x531054=>_0x531054[_0x31d290(0x161)][_0x31d290(0x141)]=[]),_0x27a61c[_0x31d290(0x187)]((_0x53de47,_0x25c02e)=>!!_0x53de47['sc']-!!_0x25c02e['sc']);const _0x3888e0=[],_0x3ed3c2=[];_0x27a61c[_0x31d290(0x231)](_0x19d36a=>{const _0x430700=_0x31d290;if(_0x19d36a['sc']){const _0x358949=_0x3888e0[_0x430700(0xa4)](_0x40a0cf=>_0x40a0cf[_0x430700(0x19f)][_0x430700(0x24d)]()===_0x19d36a['sc'][_0x430700(0xd9)]['toLowerCase']()&&_0x40a0cf[_0x430700(0x261)][_0x430700(0x24d)]()===_0x19d36a['sc']['classSource'][_0x430700(0x24d)]());if(_0x358949)_0x358949[_0x430700(0x141)][_0x430700(0xed)](_0x19d36a['sc']);else _0x3ed3c2['push']({'cls':_0x19d36a[_0x430700(0x161)],'sc':_0x19d36a['sc']});}else _0x3888e0['push'](_0x19d36a[_0x430700(0x161)]);});const _0x1fd2f4=[..._0x3888e0['map'](_0x59cd01=>{const _0x34bc3a=_0x31d290;return new Util[(_0x34bc3a(0x127))](_0x59cd01['name']+'\x20('+Parser[_0x34bc3a(0x151)](_0x59cd01[_0x34bc3a(0x261)])+')',()=>this['pImportClass'](_0x59cd01));}),..._0x3ed3c2[_0x31d290(0x194)](({cls:_0x2a4aff,sc:_0x59c0ed})=>{const _0x10aa3e=_0x31d290;return new Util[(_0x10aa3e(0x127))](_0x59c0ed['name']+'\x20('+Parser['sourceJsonToAbv'](_0x59c0ed[_0x10aa3e(0x261)])+')',()=>this['pImportSubclass'](_0x2a4aff,_0x59c0ed));})];await UtilApplications['pRunTasks'](_0x1fd2f4);if(!this['_actor'])game[this[_0x31d290(0x17e)]][_0x31d290(0x13c)]();this['_$cbAll']['prop'](_0x31d290(0x183),![])[_0x31d290(0x18b)]();});}[_0x57d078(0x15d)](){const _0xe51022=_0x57d078;this['_list']=new List({'$iptSearch':this['_$iptSearch'],'$wrpList':this[_0xe51022(0x1df)],'fnSort':(_0xb0f6fc,_0x17c637,_0x345ed1)=>{const _0x2d83f8=_0xe51022;if(_0x345ed1[_0x2d83f8(0x19a)]===_0x2d83f8(0x13b)&&_0xb0f6fc[_0x2d83f8(0x102)]['ix']===_0x17c637[_0x2d83f8(0x102)]['ix']&&(_0xb0f6fc[_0x2d83f8(0x102)][_0x2d83f8(0x258)]!=null||_0x17c637['values']['ixSub']!=null))return _0xb0f6fc[_0x2d83f8(0x102)][_0x2d83f8(0x258)]!=null?-0x1:0x1;return SortUtil[_0x2d83f8(0xa0)](_0xb0f6fc[_0x2d83f8(0x102)]['sortName'],_0x17c637[_0x2d83f8(0x102)]['sortName']);}}),SortUtil[_0xe51022(0x150)](this[_0xe51022(0xb3)],this[_0xe51022(0x259)]);const _0xbd3c18=this['_cachedData']['rows'][_0xe51022(0x194)](_0x3e0405=>{const _0x292172=_0xe51022,_0x3328d4={..._0x3e0405};delete _0x3328d4[_0x292172(0xbf)];const _0x4d6150=_0x3e0405[_0x292172(0xbf)][_0x292172(0x194)](_0x41adbf=>({..._0x41adbf,'ix':_0x3e0405['ix'],'className':_0x3e0405[_0x292172(0x19f)],'classSourceLong':_0x3e0405['sourceLong'],'classSourceClassName':_0x3e0405[_0x292172(0x25b)]}));return[_0x3328d4,..._0x4d6150];})['flat']();return this[_0xe51022(0x22a)][_0xe51022(0xc8)]({'$iptSearch':this['_$iptSearch'],'$btnReset':this[_0xe51022(0x19b)],'$btnOpen':this[_0xe51022(0xcd)],'$btnToggleSummaryHidden':this[_0xe51022(0xf6)],'$wrpMiniPills':this[_0xe51022(0x176)],'namespace':this[_0xe51022(0x198)]()})[_0xe51022(0x9f)](()=>{const _0x27f319=_0xe51022;this['_content'][_0x27f319(0x231)](_0x219ce9=>this[_0x27f319(0x22a)][_0x27f319(0x257)](_0x219ce9));const _0x52a3de={'fnGetName':_0x202dc6=>_0x202dc6[_0x27f319(0x19f)],'fnGetValues':_0x78ded1=>{const _0xf48221=_0x27f319;return _0x78ded1['ixSub']!=null?{'ix':_0x78ded1['ix'],'ixSub':_0x78ded1[_0xf48221(0x258)],'sortName':_0x78ded1['className']+_0xf48221(0x138)+_0x78ded1[_0xf48221(0x1e2)]+_0xf48221(0xe8)+_0x78ded1[_0xf48221(0x19f)]+_0xf48221(0x138)+_0x78ded1[_0xf48221(0x1f7)],'source':_0x78ded1[_0xf48221(0x261)]}:{'ix':_0x78ded1['ix'],'sortName':_0x78ded1[_0xf48221(0x19f)]+_0xf48221(0x138)+_0x78ded1[_0xf48221(0x1f7)]};}};this[_0x27f319(0x1ed)]?(_0x52a3de[_0x27f319(0x10b)]=_0x20ad9f=>({'tglSel':_0x20ad9f[_0x27f319(0x10e)]['firstElementChild'][_0x27f319(0x255)]}),_0x52a3de[_0x27f319(0x17c)]=_0x79c150=>{const _0x423142=_0x27f319;_0x79c150[_0x423142(0x10e)][_0x423142(0xec)](_0x423142(0x1ac),()=>{const _0x12f040=_0x423142,_0x1d7e85=_0x79c150['values'][_0x12f040(0x258)]!=null,_0x249661=_0x1d7e85?this[_0x12f040(0x259)][_0x12f040(0x192)]['find'](_0x1478cd=>_0x1478cd['values']['ix']===_0x79c150[_0x12f040(0x102)]['ix']&&_0x1478cd[_0x12f040(0x102)][_0x12f040(0x258)]==null):null,_0x2908ca=this[_0x12f040(0x259)][_0x12f040(0x192)]['filter'](_0x1ccb1e=>_0x1ccb1e[_0x12f040(0xcb)][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0xa1)](_0x12f040(0xa9)));if(!_0x2908ca[_0x12f040(0x1b5)]){_0x79c150[_0x12f040(0xcb)][_0x12f040(0x1b1)]['classList']['add'](_0x12f040(0xa9)),_0x79c150['ele'][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0x1bc));_0x1d7e85&&(_0x249661[_0x12f040(0xcb)][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0xa9)),_0x249661[_0x12f040(0x10e)][_0x12f040(0x1bd)]['add'](_0x12f040(0x1bc)));return;}if(_0x79c150['data'][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0xa1)](_0x12f040(0xa9))){_0x79c150[_0x12f040(0xcb)]['tglSel'][_0x12f040(0x1bd)]['remove'](_0x12f040(0xa9)),_0x79c150['ele']['classList'][_0x12f040(0x262)](_0x12f040(0x1bc));_0x1d7e85?(_0x249661[_0x12f040(0xcb)][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0x262)](_0x12f040(0xa9)),_0x249661[_0x12f040(0x10e)][_0x12f040(0x1bd)][_0x12f040(0x262)](_0x12f040(0x1bc))):_0x2908ca[_0x12f040(0x231)](_0x3875cb=>{const _0x3a85ef=_0x12f040;_0x3875cb['data'][_0x3a85ef(0x1b1)][_0x3a85ef(0x1bd)]['remove'](_0x3a85ef(0xa9)),_0x3875cb[_0x3a85ef(0x10e)][_0x3a85ef(0x1bd)][_0x3a85ef(0x262)](_0x3a85ef(0x1bc));});return;}_0x2908ca[_0x12f040(0x231)](_0x1ec92a=>{const _0x35b290=_0x12f040;_0x1ec92a[_0x35b290(0xcb)][_0x35b290(0x1b1)][_0x35b290(0x1bd)][_0x35b290(0x262)]('active'),_0x1ec92a['ele'][_0x35b290(0x1bd)][_0x35b290(0x262)](_0x35b290(0x1bc));}),_0x79c150['data'][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0xa9)),_0x79c150[_0x12f040(0x10e)][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0x1bc)),_0x1d7e85&&(_0x249661[_0x12f040(0xcb)][_0x12f040(0x1b1)][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0xa9)),_0x249661[_0x12f040(0x10e)][_0x12f040(0x1bd)][_0x12f040(0x22f)](_0x12f040(0x1bc)));});}):(_0x52a3de['fnGetData']=UtilList2[_0x27f319(0x12e)],_0x52a3de[_0x27f319(0x17c)]=_0x244467=>UtilList2['absorbFnBindListeners'](this[_0x27f319(0x259)],_0x244467)),this['_list'][_0x27f319(0x1fe)](_0xbd3c18,_0x52a3de),this[_0x27f319(0x259)][_0x27f319(0x24a)](),this[_0x27f319(0x22a)][_0x27f319(0x1d0)]['render'](),this[_0x27f319(0x22a)][_0x27f319(0x1d0)]['on'](FilterBox['EVNT_VALCHANGE'],this[_0x27f319(0xf3)]['bind'](this)),this[_0x27f319(0xf3)]();});}[_0x57d078(0xf3)](){const _0x12307a=_0x57d078,_0x125413=this['_pageFilter']['filterBox'][_0x12307a(0x1e7)]();this[_0x12307a(0x259)]['filter'](_0x32537d=>{const _0x4428a4=_0x12307a,_0x5ca3d0=this[_0x4428a4(0xa7)][_0x32537d[_0x4428a4(0x102)]['ix']];if(_0x32537d['values'][_0x4428a4(0x258)]!=null){const _0x3eefcf=_0x5ca3d0['subclasses'][_0x32537d[_0x4428a4(0x102)]['ixSub']];return this[_0x4428a4(0x22a)][_0x4428a4(0x1a5)](_0x125413,_0x5ca3d0)&&this[_0x4428a4(0x22a)][_0x4428a4(0x1d0)][_0x4428a4(0x1a5)](_0x125413,_0x3eefcf[_0x4428a4(0x261)],_0x3eefcf['_fMisc']);}else return this['_pageFilter'][_0x4428a4(0x1a5)](_0x125413,_0x5ca3d0);});}async['pImportClass'](_0x5a22bb,_0x3ddf09){const _0x248b33=_0x57d078;_0x3ddf09=_0x3ddf09||{},console[_0x248b33(0x203)](...LGT,_0x248b33(0xc0)+_0x5a22bb[_0x248b33(0x19f)]+'\x22\x20(from\x20\x22'+Parser[_0x248b33(0x151)](_0x5a22bb[_0x248b33(0x261)])+'\x22)');if(_0x3ddf09[_0x248b33(0x1bf)])return this[_0x248b33(0x213)](_0x5a22bb,_0x3ddf09);else{if(this['_actor'])return this[_0x248b33(0xe4)](_0x5a22bb,_0x3ddf09);else return this['_pImportClass_pImportToItems'](_0x5a22bb,_0x3ddf09);}}async[_0x57d078(0xe4)](_0x44f7df,_0x480146){const _0x2ca743=_0x57d078;MiscUtil[_0x2ca743(0x10f)](CONFIG[_0x2ca743(0x1e1)],_0x2ca743(0x16f),_0x44f7df[_0x2ca743(0x19f)][_0x2ca743(0x24d)]()[_0x2ca743(0xab)](),{'features':{},'subclasses':{}});const _0x3f3d92=new ImportListClass[(_0x2ca743(0x130))]({'isClassImport':!![]});let _0x3b6c4d;!_0x44f7df[_0x2ca743(0x154)]&&(_0x3b6c4d=Charactermancer_Class_Util[_0x2ca743(0xae)](_0x44f7df),_0x3b6c4d=Charactermancer_Class_Util['getFilteredFeatures'](_0x3b6c4d,this[_0x2ca743(0x22a)],_0x480146[_0x2ca743(0x1a6)]||this['_pageFilter']['filterBox'][_0x2ca743(0x1e7)]()));const _0x37995f=await this[_0x2ca743(0x1e5)](_0x44f7df,_0x3b6c4d,_0x3f3d92,!![]);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};await this['_pValidateUserLevelIndices'](_0x37995f,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};_0x3f3d92['targetLevel']=Math['max'](..._0x37995f)+0x1,_0x3f3d92['numLevels']=_0x3f3d92[_0x2ca743(0x237)]-Math['min'](..._0x37995f),_0x3f3d92[_0x2ca743(0x1b0)]=UtilActors['getTotalClassLevels'](this[_0x2ca743(0x1ed)]),_0x3f3d92[_0x2ca743(0x12f)]=_0x37995f[_0x2ca743(0x1b6)](0x0),_0x3f3d92[_0x2ca743(0x15b)]=_0x44f7df[_0x2ca743(0x15b)],_0x3f3d92['proficiencyImportMode']=await this['_pImportClass_pGetProficiencyImportMode'](_0x44f7df,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};_0x3f3d92[_0x2ca743(0x158)]=await this['_pImportClass_pGetHpImportMode'](_0x44f7df,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};const _0x321c3b=_0x44f7df[_0x2ca743(0x141)]?_0x44f7df['subclasses'][0x0]:null,_0xda6541=(_0x44f7df[_0x2ca743(0x141)]||[])[_0x2ca743(0xa2)](_0x30019b=>_0x30019b['spellcastingAbility']||_0x30019b[_0x2ca743(0x25e)]),_0x7c136=_0xda6541[0x0]||_0x321c3b,_0x4d61a1={'data':{}},_0x563ad8=await this[_0x2ca743(0x146)](_0x4d61a1,_0x44f7df,_0x7c136,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};const {curLevel:_0x3d479e,existingClassItem:_0x1fed58}=_0x563ad8;this[_0x2ca743(0x1c5)](_0x4d61a1,_0x44f7df,_0x44f7df[_0x2ca743(0x141)],_0x3d479e,_0x3f3d92),await this[_0x2ca743(0x222)](_0x4d61a1,_0x44f7df,_0x7c136,_0x3d479e,_0x1fed58,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};if(_0x44f7df[_0x2ca743(0x24f)])await this[_0x2ca743(0x1c0)](_0x44f7df,_0x3d479e,_0x3f3d92);await this[_0x2ca743(0xb9)](_0x44f7df,_0x44f7df[_0x2ca743(0x141)],_0x3d479e,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};await this[_0x2ca743(0x188)](_0x44f7df,_0x3b6c4d,_0x37995f,_0x480146,_0x3f3d92);if(_0x3f3d92[_0x2ca743(0x18d)])return{'status':UtilApplications[_0x2ca743(0x174)]};await this[_0x2ca743(0x1fc)](_0x3f3d92);if(this[_0x2ca743(0x1ed)][_0x2ca743(0xb4)])this[_0x2ca743(0x1ed)][_0x2ca743(0x1be)][_0x2ca743(0x13c)]();return{'status':UtilApplications[_0x2ca743(0xb0)]};}async['_pGetSelectedLevelIndices'](_0x4cfe9e,_0x225961,_0x35134e,_0xc0eb52){const _0x41a997=_0x57d078;if(_0x4cfe9e['_foundrySelectedLevelIndices'])return _0x4cfe9e[_0x41a997(0x1f9)];const _0x4ac278=await Charactermancer_Class_LevelSelect[_0x41a997(0x16b)]({'features':_0x225961,'isSubclass':_0xc0eb52,'maxPreviousLevel':this['_pImportEntry_getApproxPreviousMaxLevel'](_0x4cfe9e)});if(_0x4ac278==null)return _0x35134e[_0x41a997(0x18d)]=!![];return _0x4ac278[_0x41a997(0xcb)];}[_0x57d078(0x25c)](_0x1053de){const _0x3a5f3b=_0x57d078,_0x4cf425=this[_0x3a5f3b(0x100)](_0x1053de);if(!_0x4cf425[_0x3a5f3b(0x1b5)])return 0x0;return Math[_0x3a5f3b(0xb5)](..._0x4cf425[_0x3a5f3b(0x194)](_0x46a32b=>MiscUtil[_0x3a5f3b(0x236)](_0x46a32b,_0x3a5f3b(0xcb),'levels')||0x0));}[_0x57d078(0x1c5)](_0x2f80a2,_0x559cb1,_0x4f0f85,_0x33701c,_0x466375){const _0x6e11a1=_0x57d078,_0x22fe10={'dnd5e':{}};if(_0x466375[_0x6e11a1(0xba)]&&_0x559cb1&&_0x559cb1[_0x6e11a1(0x19f)]===_0x6e11a1(0x181)&&_0x559cb1['source']===SRC_PHB&&_0x33701c<0x2&&_0x466375[_0x6e11a1(0x237)]>=0x2)_0x22fe10[_0x6e11a1(0x191)]['jackOfAllTrades']=!![];if(_0x559cb1&&_0x559cb1['name']===_0x6e11a1(0xb1)&&_0x559cb1[_0x6e11a1(0x261)]===SRC_PHB&&_0x4f0f85[_0x6e11a1(0xf8)](_0x1cd562=>_0x1cd562[_0x6e11a1(0x19f)]==='Champion')&&_0x33701c<0x7&&_0x466375[_0x6e11a1(0x237)]>=0x7)_0x22fe10[_0x6e11a1(0x191)][_0x6e11a1(0x195)]=!![];if(_0x559cb1&&_0x559cb1[_0x6e11a1(0x19f)]===_0x6e11a1(0x20a)&&_0x559cb1[_0x6e11a1(0x261)]===SRC_PHB&&_0x33701c<0xb&&_0x466375['targetLevel']>=0xb)_0x22fe10[_0x6e11a1(0x191)][_0x6e11a1(0x128)]=!![];if(_0x559cb1&&_0x559cb1[_0x6e11a1(0x19f)]===_0x6e11a1(0x118)&&_0x559cb1[_0x6e11a1(0x261)]===SRC_PHB&&_0x33701c<0xe&&_0x466375[_0x6e11a1(0x237)]>=0xe)_0x22fe10['dnd5e'][_0x6e11a1(0x1b7)]=!![];if(Object['keys'](_0x22fe10[_0x6e11a1(0x191)])[_0x6e11a1(0x1b5)])_0x2f80a2['flags']=_0x22fe10;}async['_pImportClass_pGetProficiencyImportMode'](_0x3859ae,_0x39f9dc){const _0x55e718=_0x57d078,_0x5166a0=MiscUtil['get'](this[_0x55e718(0x1ed)],_0x55e718(0xcb),_0x55e718(0x192))||[],_0x24ab9e=_0x5166a0[_0x55e718(0xa2)](_0x53d39f=>_0x53d39f[_0x55e718(0x182)]===_0x55e718(0x1e6));if(!_0x39f9dc[_0x55e718(0xba)]||!_0x39f9dc[_0x55e718(0x12f)]||!_0x24ab9e[_0x55e718(0x1b5)])return Charactermancer_Class_ProficiencyImportModeSelect[_0x55e718(0xc6)];if(_0x3859ae[_0x55e718(0x185)]!=null)return _0x3859ae['_foundryStartingProficiencyMode'];const _0x16e1bd=await Charactermancer_Class_ProficiencyImportModeSelect['pGetUserInput']();if(_0x16e1bd==null)_0x39f9dc[_0x55e718(0x18d)]=!![];return _0x16e1bd[_0x55e718(0xcb)];}async[_0x57d078(0xc4)](_0x25515c,_0x32a0e7){const _0x426690=_0x57d078;if(!Charactermancer_Class_HpIncreaseModeSelect['isHpAvailable'](_0x25515c))return Charactermancer_Class_HpIncreaseModeSelect[_0x426690(0x160)];if(_0x25515c[_0x426690(0xee)]!=null)return _0x25515c[_0x426690(0xee)];const _0x2c7bda=await Charactermancer_Class_HpIncreaseModeSelect[_0x426690(0x16b)]();if(_0x2c7bda==null)_0x32a0e7[_0x426690(0x18d)]=!![];if(_0x2c7bda===VeCt[_0x426690(0x220)])return Charactermancer_Class_HpIncreaseModeSelect[_0x426690(0x160)];return _0x2c7bda[_0x426690(0xcb)];}async['_pImportClass_pImportToItems'](_0x4d5c71,_0x13afcb){const _0x49b6c8=_0x57d078,_0x20b984=this[_0x49b6c8(0xfe)]({'entity':_0x4d5c71});if(_0x20b984[_0x49b6c8(0x136)])return UtilApplications[_0x49b6c8(0x1a8)];const _0x9b0d5f=await DataConverterClass['pGetClassItem'](_0x4d5c71,{'isAddPermission':!![],'filterValues':this[_0x49b6c8(0x22a)][_0x49b6c8(0x1d0)][_0x49b6c8(0x1e7)]()});if(_0x13afcb[_0x49b6c8(0x1bf)]){const _0x100bc1=await Item[_0x49b6c8(0x1f6)](_0x9b0d5f,{'renderSheet':!![],'temporary':!![]}),_0x14f362=await(_0x4d5c71['subclasses']||[])[_0x49b6c8(0x134)](_0x1e68a8=>this[_0x49b6c8(0x142)](_0x4d5c71,_0x1e68a8,_0x13afcb));return{'imported':[_0x100bc1,..._0x14f362],'status':UtilApplications[_0x49b6c8(0xb0)]};}else{if(this[_0x49b6c8(0x225)]){if(_0x20b984[_0x49b6c8(0x235)]){const _0x2d489f=await this[_0x49b6c8(0x165)](_0x20b984,_0x9b0d5f),_0xeaca3a=await(_0x4d5c71['subclasses']||[])[_0x49b6c8(0x134)](_0x4167c4=>this['_pImportSubclass_pImportToItems'](_0x4d5c71,_0x4167c4,_0x13afcb));return{'imported':[_0x2d489f,..._0xeaca3a],'status':UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']};}const _0x53b156=new Item(_0x9b0d5f);await this[_0x49b6c8(0x225)][_0x49b6c8(0xe0)](_0x53b156);const _0x13d224=await(_0x4d5c71[_0x49b6c8(0x141)]||[])['pSerialAwaitMap'](_0x2033a4=>this[_0x49b6c8(0x142)](_0x4d5c71,_0x2033a4,_0x13afcb));return{'imported':[_0x53b156,..._0x13d224],'status':UtilApplications['TASK_EXIT_COMPLETE']};}else{if(_0x20b984[_0x49b6c8(0x235)]){const _0x2b1bbb=await this[_0x49b6c8(0x167)](_0x20b984,_0x9b0d5f),_0x5a9b94=await(_0x4d5c71[_0x49b6c8(0x141)]||[])[_0x49b6c8(0x134)](_0x4e60fc=>this['_pImportSubclass_pImportToItems'](_0x4d5c71,_0x4e60fc,_0x13afcb));return{'imported':[_0x2b1bbb,..._0x5a9b94],'status':UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']};}const _0x4e5cb9=await this[_0x49b6c8(0x123)](_0x4d5c71);if(_0x4e5cb9)_0x9b0d5f['folder']=_0x4e5cb9;const _0x16ece3=await Item['create'](_0x9b0d5f,{'renderSheet':![],'temporary':![]});await game[_0x49b6c8(0x192)]['insert'](_0x16ece3);const _0x26161b=await(_0x4d5c71['subclasses']||[])[_0x49b6c8(0x134)](_0x30e570=>this[_0x49b6c8(0x142)](_0x4d5c71,_0x30e570,_0x13afcb,{'folderId':_0x4e5cb9}));return{'imported':[_0x16ece3,..._0x26161b],'status':UtilApplications[_0x49b6c8(0xb0)]};}}}async[_0x57d078(0x243)](_0x49f461,_0x5bdfab,_0x22cca5){const _0x73ece4=_0x57d078;_0x22cca5=_0x22cca5||{},console['log'](...LGT,_0x73ece4(0x244)+_0x5bdfab['name']+'\x22\x20(from\x20\x22'+Parser['sourceJsonToAbv'](_0x5bdfab[_0x73ece4(0x261)])+'\x22)');if(_0x22cca5['isTemp'])return this[_0x73ece4(0x142)](_0x49f461,_0x5bdfab,_0x22cca5);else{if(this['_actor'])return this[_0x73ece4(0xda)](_0x49f461,_0x5bdfab,_0x22cca5);else return this['_pImportSubclass_pImportToItems'](_0x49f461,_0x5bdfab,_0x22cca5);}}async['_pImportSubclass_pImportToActor'](_0x47d869,_0x27c65f,_0x17bd60){const _0x85a066=_0x57d078,_0x3c83de=new ImportListClass[(_0x85a066(0x130))]({'isClassImport':![]}),_0x1c6d02=(MiscUtil[_0x85a066(0x236)](this[_0x85a066(0x1ed)],_0x85a066(0xcb),'items')||[])[_0x85a066(0xa2)](_0x242c5a=>_0x242c5a[_0x85a066(0x182)]===_0x85a066(0x1e6));if(!_0x1c6d02[_0x85a066(0x1b5)]){const _0x1e51e5=await InputUiUtil['pGetUserBoolean']({'title':_0x85a066(0x104),'htmlDescription':_0x85a066(0x23f),'textYes':_0x85a066(0x180),'textNo':_0x85a066(0x16a)});if(_0x1e51e5==null)return _0x3c83de[_0x85a066(0x18d)]=!![],{'status':UtilApplications['TASK_EXIT_CANCELLED']};if(_0x1e51e5===!![]){const _0x132a85=MiscUtil[_0x85a066(0x1ea)](_0x47d869);return _0x132a85[_0x85a066(0x141)]=[_0x27c65f],this[_0x85a066(0x201)](_0x132a85,_0x17bd60);}}let _0x36f742=MiscUtil[_0x85a066(0x1ea)](_0x27c65f[_0x85a066(0xb6)]);_0x36f742=Charactermancer_Class_Util[_0x85a066(0x1dc)](_0x36f742,this[_0x85a066(0x22a)],_0x17bd60[_0x85a066(0x1a6)]||this[_0x85a066(0x22a)][_0x85a066(0x1d0)]['getValues']());const _0x180e77=await this['_pGetSelectedLevelIndices'](_0x47d869,_0x36f742,_0x3c83de,!![]);if(_0x3c83de[_0x85a066(0x18d)])return{'status':UtilApplications[_0x85a066(0x174)]};await this[_0x85a066(0xf4)](_0x180e77,_0x3c83de);if(_0x3c83de[_0x85a066(0x18d)])return{'status':UtilApplications[_0x85a066(0x174)]};_0x3c83de[_0x85a066(0x237)]=Math[_0x85a066(0xb5)](..._0x180e77)+0x1,_0x3c83de[_0x85a066(0xa3)]=_0x3c83de[_0x85a066(0x237)]-Math[_0x85a066(0x107)](..._0x180e77),_0x3c83de['numLevelsPrev']=UtilActors[_0x85a066(0x1fb)](this['_actor']),_0x3c83de[_0x85a066(0x12f)]=![],_0x3c83de[_0x85a066(0x15b)]=_0x27c65f[_0x85a066(0x15b)]||_0x47d869[_0x85a066(0x15b)],_0x3c83de[_0x85a066(0x126)]=await this[_0x85a066(0xad)](_0x47d869,_0x3c83de);if(_0x3c83de['isCancelled'])return{'status':UtilApplications[_0x85a066(0x174)]};const _0x2a6b4a={'data':{}},_0x27fa45=await this[_0x85a066(0x146)](_0x2a6b4a,_0x47d869,_0x27c65f,_0x3c83de);if(_0x3c83de['isCancelled'])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};const {curLevel:_0x5381a4,existingClassItem:_0x4c2ce6}=_0x27fa45;this[_0x85a066(0x1c5)](_0x2a6b4a,_0x47d869,[_0x27c65f],_0x5381a4,_0x3c83de),await this[_0x85a066(0x222)](_0x2a6b4a,_0x47d869,_0x27c65f,_0x5381a4,_0x4c2ce6,_0x3c83de);if(_0x3c83de['isCancelled'])return{'status':UtilApplications[_0x85a066(0x174)]};if(_0x47d869[_0x85a066(0x24f)])await this[_0x85a066(0x1c0)](_0x47d869,_0x5381a4,_0x3c83de);await this[_0x85a066(0xb9)](_0x47d869,[_0x27c65f],_0x5381a4,_0x3c83de);if(_0x3c83de[_0x85a066(0x18d)])return{'status':UtilApplications[_0x85a066(0x174)]};await this[_0x85a066(0x188)](_0x47d869,_0x36f742,_0x180e77,_0x17bd60,_0x3c83de);if(_0x3c83de[_0x85a066(0x18d)])return{'status':UtilApplications[_0x85a066(0x174)]};await this[_0x85a066(0x1fc)](_0x3c83de);if(this[_0x85a066(0x1ed)][_0x85a066(0xb4)])this[_0x85a066(0x1ed)][_0x85a066(0x1be)]['render']();return{'status':UtilApplications['TASK_EXIT_COMPLETE']};}async[_0x57d078(0x142)](_0xd225eb,_0x5a3f08,_0x1af36c,_0x1ba568){const _0x550045=_0x57d078;_0x1ba568=_0x1ba568||{};const _0x88609a=await DataConverterClass['pGetSubclassItem'](_0xd225eb,_0x5a3f08,{'isAddPermission':!![],'filterValues':this[_0x550045(0x22a)][_0x550045(0x1d0)][_0x550045(0x1e7)]()}),_0x228d39=this[_0x550045(0xfe)]({'name':_0x88609a[_0x550045(0x19f)],'source':_0x88609a['data'][_0x550045(0x261)]});if(_0x228d39[_0x550045(0x136)])return{'status':UtilApplications[_0x550045(0x1a8)]};if(_0x1af36c[_0x550045(0x1bf)]){const _0x39e7be=Item[_0x550045(0x1f6)](_0x88609a,{'renderSheet':!![],'temporary':!![]});return{'imported':_0x39e7be,'status':UtilApplications[_0x550045(0xb0)]};}else{if(this[_0x550045(0x225)]){if(_0x228d39[_0x550045(0x235)])return this['_pImportEntry_pDoUpdateExistingPackEntity'](_0x228d39,_0x88609a);const _0x3d81dd=new Item(_0x88609a);return await this[_0x550045(0x225)][_0x550045(0xe0)](_0x3d81dd),{'imported':_0x3d81dd,'status':UtilApplications['TASK_EXIT_COMPLETE']};}else{if(_0x228d39[_0x550045(0x235)])return this[_0x550045(0x167)](_0x228d39,_0x88609a);const _0x5945bd=_0x1ba568[_0x550045(0x1d3)]||await this[_0x550045(0x123)](_0x5a3f08);if(_0x5945bd)_0x88609a[_0x550045(0x172)]=_0x5945bd;const _0x132951=await Item[_0x550045(0x1f6)](_0x88609a,{'renderSheet':![],'temporary':![]});return await game[_0x550045(0x192)][_0x550045(0x1d6)](_0x132951),{'imported':_0x132951,'status':UtilApplications[_0x550045(0xb0)]};}}}async['_pImportEntry_pDoUpdateCharacter'](_0x323c66,_0x15e66a,_0x54c94c,_0x2c7c87,_0x3daf18,_0x16b478){const _0x1a16f0=_0x57d078,_0x418170=MiscUtil[_0x1a16f0(0x236)](this[_0x1a16f0(0x1ed)],_0x1a16f0(0xcb),_0x1a16f0(0x192))||[],_0x500318=_0x418170['filter'](_0x4ff3b8=>_0x4ff3b8[_0x1a16f0(0x182)]==='class'),_0xd7bcb8=_0x500318[_0x1a16f0(0xa2)](_0x50eeb2=>_0x50eeb2!==_0x3daf18),_0x49afb2=_0xd7bcb8[_0x1a16f0(0x194)](_0x2efd80=>MiscUtil[_0x1a16f0(0x236)](_0x2efd80,'data',_0x1a16f0(0x21d))||0x0)[_0x1a16f0(0x139)]((_0x18a99a,_0x19e75c)=>_0x18a99a+_0x19e75c,0x0)+(_0x16b478[_0x1a16f0(0x237)]||0x0);if(_0x49afb2>0x0){const _0x53e422=(_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x23a)]=_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x23a)]||{})['xp']=_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x23a)]['xp']||{},_0x171e4d=MiscUtil[_0x1a16f0(0x236)](this[_0x1a16f0(0x1ed)],_0x1a16f0(0xcb),_0x1a16f0(0xcb),'details','xp',_0x1a16f0(0x1b9))||0x0,_0x25c1c1=Parser[_0x1a16f0(0x1ab)][_0x49afb2-0x1],_0xef42c1=Parser[_0x1a16f0(0x1ab)][Math[_0x1a16f0(0x107)](_0x49afb2,0x13)];_0x171e4d<_0x25c1c1?(_0x53e422[_0x1a16f0(0x1a7)]=0x0,_0x53e422[_0x1a16f0(0x1b9)]=_0x25c1c1):_0x53e422[_0x1a16f0(0x1a7)]=_0x171e4d/_0xef42c1*0x64,_0x53e422[_0x1a16f0(0xb5)]=_0xef42c1;}const _0x5ec336=MiscUtil[_0x1a16f0(0x236)](this[_0x1a16f0(0x1ed)],_0x1a16f0(0xcb),_0x1a16f0(0xcb),_0x1a16f0(0x14f),_0x1a16f0(0x1d1)),_0x2f55f2=Math[_0x1a16f0(0xf2)]((_0x16b478['targetLevel']-0x1)/0x4)+0x2;if(_0x5ec336<_0x2f55f2)(_0x323c66[_0x1a16f0(0xcb)]['attributes']=_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x14f)]||{})[_0x1a16f0(0x1d1)]=_0x2f55f2;const {spellProgression:_0x14732f,spellAbility:_0x363c1e,totalSpellcastingLevels:_0x4a0a1f,maxPactCasterLevel:_0x556713}=Charactermancer_Class_Util[_0x1a16f0(0x24e)](_0x15e66a,_0x54c94c,{'targetLevel':_0x16b478[_0x1a16f0(0x237)],'otherExistingClassItems':_0xd7bcb8});if(_0x4a0a1f||_0x14732f==='pact'){let _0x8f0654=![];_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x1a9)]=_0x323c66['data'][_0x1a16f0(0x1a9)]||{};const _0x3e0fa0=MiscUtil[_0x1a16f0(0x10f)](_0x16b478[_0x1a16f0(0x178)],_0x1a16f0(0xcb),_0x1a16f0(0x1a9),{});if(_0x4a0a1f){const _0xe833d5=UtilActors['CASTER_TYPE_TO_PROGRESSION'][_0x1a16f0(0x179)],_0x8bcaba=_0xe833d5[_0x4a0a1f-0x1]||_0xe833d5[_0x1a16f0(0xe9)]();_0x8bcaba[_0x1a16f0(0x231)]((_0x48ebb5,_0x4b9665)=>{const _0x119c13=_0x1a16f0;if(_0x48ebb5===0x0)return;const _0x26bc00='spell'+(_0x4b9665+0x1),_0x532780=MiscUtil[_0x119c13(0x236)](this['_actor'],_0x119c13(0xcb),'data',_0x119c13(0x1a9),_0x26bc00,'max'),_0x1f31ca=MiscUtil[_0x119c13(0x236)](this['_actor'],_0x119c13(0xcb),'data','spells',_0x26bc00,_0x119c13(0x1b9));if(_0x532780!=null){if(_0x532780<_0x48ebb5){_0x8f0654=!![];const _0x4b6644=_0x48ebb5-_0x532780;_0x323c66[_0x119c13(0xcb)][_0x119c13(0x1a9)][_0x26bc00]={'max':_0x48ebb5,'value':_0x1f31ca+_0x4b6644},_0x3e0fa0[_0x26bc00]={'max':_0x48ebb5,'value':_0x1f31ca+_0x4b6644};}}else _0x8f0654=!![],_0x323c66[_0x119c13(0xcb)]['spells'][_0x26bc00]={'max':_0x48ebb5,'value':_0x48ebb5},_0x3e0fa0[_0x26bc00]={'max':_0x48ebb5,'value':_0x48ebb5};});}else{if(_0x14732f===_0x1a16f0(0xe2)){const _0x4bb77b=MiscUtil[_0x1a16f0(0x236)](this['_actor'],_0x1a16f0(0xcb),_0x1a16f0(0xcb),_0x1a16f0(0x1a9),_0x1a16f0(0xe2),_0x1a16f0(0xb5)),_0x485b0a=MiscUtil[_0x1a16f0(0x236)](this[_0x1a16f0(0x1ed)],'data','data',_0x1a16f0(0x1a9),'pact','value'),_0x43a737=UtilActors[_0x1a16f0(0x1b3)][_0x1a16f0(0xe2)][_0x556713-0x1][_0x1a16f0(0xa4)](Boolean);if(_0x4bb77b!=null){if(_0x4bb77b<_0x43a737){_0x8f0654=!![];const _0x32a07b=_0x43a737-_0x4bb77b;_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x1a9)]['pact']={'max':_0x43a737,'value':_0x485b0a+_0x32a07b},_0x3e0fa0[_0x1a16f0(0xe2)]={'max':_0x43a737,'value':_0x485b0a+_0x32a07b};}}else _0x8f0654=!![],_0x323c66[_0x1a16f0(0xcb)]['spells']['pact']={'max':_0x43a737,'value':_0x43a737},_0x3e0fa0[_0x1a16f0(0xe2)]={'max':_0x43a737,'value':_0x43a737};}}!_0x8f0654&&(delete _0x323c66[_0x1a16f0(0xcb)]['spells'],delete _0x16b478['postItemActorUpdate'][_0x1a16f0(0xcb)][_0x1a16f0(0x1a9)]);}if(_0x363c1e)(_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x14f)]=_0x323c66[_0x1a16f0(0xcb)][_0x1a16f0(0x14f)]||{})[_0x1a16f0(0x1c4)]=_0x363c1e;if(_0x16b478['isClassImport']&&Charactermancer_Class_HpIncreaseModeSelect['isHpAvailable'](_0x15e66a)){const _0xb15b44=Parser[_0x1a16f0(0x1db)](this[_0x1a16f0(0x1ed)]?.[_0x1a16f0(0xcb)]?.['data']?.[_0x1a16f0(0x1e8)]?.[_0x1a16f0(0x170)]?.[_0x1a16f0(0x1b9)]);let _0x4e4e31=_0x16b478[_0x1a16f0(0x12f)]?_0x15e66a['hd'][_0x1a16f0(0x1ca)]*_0x15e66a['hd'][_0x1a16f0(0x16c)]+_0xb15b44:0x0;const _0x67d0df=_0x16b478['isIncludesLevelOne']?_0x16b478[_0x1a16f0(0xa3)]-0x1:_0x16b478[_0x1a16f0(0xa3)];switch(_0x16b478[_0x1a16f0(0x158)]){case Charactermancer_Class_HpIncreaseModeSelect[_0x1a16f0(0x1e9)]:{const _0x16339f=Math[_0x1a16f0(0x230)](_0x15e66a['hd'][_0x1a16f0(0x1ca)]*((_0x15e66a['hd'][_0x1a16f0(0x16c)]+0x1)/0x2));_0x4e4e31+=_0x67d0df*Math[_0x1a16f0(0xb5)](_0x16339f+_0xb15b44,0x1);break;}case Charactermancer_Class_HpIncreaseModeSelect[_0x1a16f0(0xfd)]:{for(let _0x3bf002=0x0;_0x3bf002<_0x67d0df;++_0x3bf002){const _0x35df0c=new Roll(_0x15e66a['hd'][_0x1a16f0(0x1ca)]+'d'+_0x15e66a['hd'][_0x1a16f0(0x16c)]+_0x1a16f0(0x184)+_0xb15b44);_0x35df0c[_0x1a16f0(0x19d)](),_0x4e4e31+=Math[_0x1a16f0(0xb5)](_0x35df0c[_0x1a16f0(0x24c)],0x1),await _0x35df0c[_0x1a16f0(0x1a3)]({'flavor':_0x1a16f0(0xf1),'speaker':{'actor':this[_0x1a16f0(0x1ed)]['id'],'alias':this['_actor'][_0x1a16f0(0x19f)],'scene':null,'token':null}});}break;}case Charactermancer_Class_HpIncreaseModeSelect[_0x1a16f0(0x160)]:{_0x4e4e31=0x0;break;}default:throw new Error(_0x1a16f0(0x1a0)+_0x16b478[_0x1a16f0(0x158)]+'\x22');}if(_0x4e4e31)switch(_0x16b478[_0x1a16f0(0x126)]){case Charactermancer_Class_ProficiencyImportModeSelect[_0x1a16f0(0x10d)]:{const _0x43c46e=(this[_0x1a16f0(0x1ed)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0x14f)]?.['hp']?.[_0x1a16f0(0x1b9)]||0x0)+_0x4e4e31,_0x555d1d=(this[_0x1a16f0(0x1ed)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0x14f)]?.['hp']?.['max']||0x0)+_0x4e4e31;MiscUtil[_0x1a16f0(0x214)](_0x323c66,_0x1a16f0(0xcb),_0x1a16f0(0x14f),'hp',_0x1a16f0(0x1b9),_0x43c46e),MiscUtil[_0x1a16f0(0x214)](_0x323c66,_0x1a16f0(0xcb),_0x1a16f0(0x14f),'hp',_0x1a16f0(0xb5),_0x555d1d);break;}case Charactermancer_Class_ProficiencyImportModeSelect[_0x1a16f0(0xc6)]:{const _0x1579e2=(_0x16b478[_0x1a16f0(0x12f)]?0x0:this['_actor']?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0xcb)]?.['attributes']?.['hp']?.[_0x1a16f0(0x1b9)]||0x0)+_0x4e4e31,_0x31672a=(_0x16b478['isIncludesLevelOne']?0x0:this[_0x1a16f0(0x1ed)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0xcb)]?.[_0x1a16f0(0x14f)]?.['hp']?.[_0x1a16f0(0xb5)]||0x0)+_0x4e4e31;MiscUtil[_0x1a16f0(0x214)](_0x323c66,'data',_0x1a16f0(0x14f),'hp',_0x1a16f0(0x1b9),_0x1579e2),MiscUtil[_0x1a16f0(0x214)](_0x323c66,_0x1a16f0(0xcb),_0x1a16f0(0x14f),'hp',_0x1a16f0(0xb5),_0x31672a);break;}case Charactermancer_Class_ProficiencyImportModeSelect['MODE_NONE']:break;default:throw new Error('Unknown\x20proficiency\x20import\x20mode\x20\x22'+_0x16b478[_0x1a16f0(0x126)]+'\x22');}}await DataConverter[_0x1a16f0(0xcf)](MiscUtil['get'](this[_0x1a16f0(0x1ed)],_0x1a16f0(0xcb),_0x1a16f0(0xcb),_0x1a16f0(0x193),_0x1a16f0(0x248)),_0x15e66a[_0x1a16f0(0x1f8)],_0x323c66[_0x1a16f0(0xcb)],_0x16b478);if(_0x16b478[_0x1a16f0(0x18d)])return;if(Object[_0x1a16f0(0x1e0)](_0x323c66[_0x1a16f0(0xcb)])[_0x1a16f0(0x1b5)])await this[_0x1a16f0(0x1ed)]['update'](_0x323c66);}async[_0x57d078(0x226)](_0x58a368,_0x229c8b,_0x278a17,_0xb1d147){const _0x5e235d=_0x57d078,_0x350438={'chosenProficiencies':{}};_0x229c8b[_0x5e235d(0x177)]&&_0x229c8b[_0x5e235d(0x177)][_0x5e235d(0x231)](_0x1673b3=>{const _0x289cd8=_0x5e235d,_0x2a3964=MiscUtil[_0x289cd8(0x236)](this['_actor'],_0x289cd8(0xcb),'data',_0x289cd8(0x1e8),_0x1673b3,_0x289cd8(0x232));!_0x2a3964&&(((_0x58a368['data']['abilities']=_0x58a368[_0x289cd8(0xcb)][_0x289cd8(0x1e8)]||{})[_0x1673b3]=_0x58a368[_0x289cd8(0xcb)][_0x289cd8(0x1e8)][_0x1673b3]||{})[_0x289cd8(0x232)]=0x1);});if(_0x229c8b[_0x5e235d(0x23c)]){_0x350438[_0x5e235d(0x18c)]=await this['_pImportEntry_pDoUpdateCharacter_pPopulateProficienciesFrom'](_0x58a368,_0x229c8b[_0x5e235d(0x23c)],_0xb1d147);if(_0xb1d147['isCancelled'])return;}await this['_pImportEntry_pDoUpdateCharacter_pPopulateEquipment'](_0x229c8b,_0xb1d147);if(_0xb1d147[_0x5e235d(0x18d)])return;return _0x350438;}async['_pImportEntry_pDoUpdateCharacter_pPopulateProficienciesFrom'](_0x9343c9,_0x246b8c,_0x318f4f){const _0x3f2906=_0x57d078,_0x31640c={'skills':{}},_0x516185=(_0x1df26c,_0x56a373)=>{const _0x3572d4=_0x401e;if(!_0x56a373['some'](_0x24559e=>_0x24559e[_0x3572d4(0x24d)]()[_0x3572d4(0xab)]()===_0x1df26c[_0x3572d4(0x24d)]()[_0x3572d4(0xab)]()))_0x56a373[_0x3572d4(0xed)](_0x1df26c);},_0x579a08=_0x363bb7=>{const _0x36b3d8=_0x401e,_0x1ffc4c=MiscUtil[_0x36b3d8(0x236)](this[_0x36b3d8(0x1ed)],_0x36b3d8(0xcb),_0x36b3d8(0xcb),_0x36b3d8(0x193),_0x363bb7),_0x41ec5d=(_0x9343c9[_0x36b3d8(0xcb)][_0x36b3d8(0x193)]=_0x9343c9['data'][_0x36b3d8(0x193)]||{})[_0x363bb7]=MiscUtil[_0x36b3d8(0x1ea)](_0x1ffc4c||{});_0x41ec5d[_0x36b3d8(0x1b9)]=_0x41ec5d[_0x36b3d8(0x1b9)]||[];const _0x503f9d=(_0x41ec5d[_0x36b3d8(0x171)]||'')['split'](';')['map'](_0x51f318=>_0x51f318['trim']())['filter'](Boolean);return{'profUpdate':_0x41ec5d,'customArr':_0x503f9d};};if(_0x246b8c['armor']){const {profUpdate:_0x46b030,customArr:_0xefdae9}=_0x579a08('armorProf');_0x246b8c['armor']['forEach'](_0xa7f953=>{const _0x4e59e7=_0x401e,_0x173d55=(_0xa7f953[_0x4e59e7(0x177)]||_0xa7f953)[_0x4e59e7(0x24d)]()[_0x4e59e7(0xab)]();switch(_0x173d55){case _0x4e59e7(0x16d):_0x516185('lgt',_0x46b030['value']);break;case'medium':_0x516185(_0x4e59e7(0x1f4),_0x46b030[_0x4e59e7(0x1b9)]);break;case _0x4e59e7(0x217):_0x516185(_0x4e59e7(0x1c8),_0x46b030['value']);break;case _0x4e59e7(0xeb):_0x516185(_0x4e59e7(0x206),_0x46b030[_0x4e59e7(0x1b9)]);break;default:(_0xa7f953[_0x4e59e7(0x179)]||_0xa7f953)[_0x4e59e7(0x115)](';')['map'](_0x59c9fd=>_0x59c9fd[_0x4e59e7(0xab)]())[_0x4e59e7(0xa2)](Boolean)['forEach'](_0x5caade=>_0x516185(_0x5caade,_0xefdae9));break;}}),_0x46b030['custom']=_0xefdae9['join'](';\x20');}if(_0x246b8c[_0x3f2906(0x221)]){const {profUpdate:_0x224314,customArr:_0x36dca6}=_0x579a08(_0x3f2906(0x103));_0x246b8c[_0x3f2906(0x221)][_0x3f2906(0x231)](_0x112541=>{const _0x324371=_0x3f2906,_0x2dd9c3=_0x112541[_0x324371(0x24d)]()[_0x324371(0xab)]();switch(_0x2dd9c3){case _0x324371(0x175):_0x516185('sim',_0x224314[_0x324371(0x1b9)]);break;case _0x324371(0x1d5):_0x516185('mar',_0x224314[_0x324371(0x1b9)]);break;default:_0x112541[_0x324371(0x115)](';')[_0x324371(0x194)](_0x49c4a5=>_0x49c4a5[_0x324371(0xab)]())[_0x324371(0xa2)](Boolean)[_0x324371(0x231)](_0x2e2542=>_0x516185(_0x2e2542,_0x36dca6));break;}}),_0x224314[_0x3f2906(0x171)]=_0x36dca6[_0x3f2906(0xcc)](';\x20');}if(_0x246b8c[_0x3f2906(0x233)]){const {profUpdate:_0x126782,customArr:_0x421d4e}=_0x579a08(_0x3f2906(0x119));_0x246b8c[_0x3f2906(0x233)][_0x3f2906(0x231)](_0x4db06d=>{const _0x1ce93f=_0x3f2906;_0x4db06d=Renderer[_0x1ce93f(0x21e)](_0x4db06d);const _0x5139cf=_0x4db06d['toLowerCase']()[_0x1ce93f(0xab)]();switch(_0x5139cf){case _0x1ce93f(0x1ec):_0x516185(_0x1ce93f(0x22e),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0xe3):_0x516185(_0x1ce93f(0x197),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0x163):_0x516185(_0x1ce93f(0x1fa),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0xe6):_0x516185(_0x1ce93f(0x202),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0x190):_0x516185(_0x1ce93f(0x14a),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0xdc):_0x516185(_0x1ce93f(0x1cc),_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0x137):_0x516185('navg',_0x126782[_0x1ce93f(0x1b9)]);break;case'poisoner\x27s\x20kit':_0x516185('pois',_0x126782[_0x1ce93f(0x1b9)]);break;case _0x1ce93f(0x1d4):_0x516185(_0x1ce93f(0x10c),_0x126782[_0x1ce93f(0x1b9)]);break;case'vehicles\x20(land\x20or\x20water)':_0x516185('vehicle',_0x126782[_0x1ce93f(0x1b9)]);break;default:_0x4db06d[_0x1ce93f(0x115)](';')[_0x1ce93f(0x194)](_0xe8f998=>_0xe8f998['trim']()[_0x1ce93f(0x125)]())[_0x1ce93f(0xa2)](Boolean)[_0x1ce93f(0x231)](_0x593177=>_0x516185(_0x593177,_0x421d4e));break;}}),_0x126782['custom']=_0x421d4e[_0x3f2906(0xcc)](';\x20');}if(_0x246b8c[_0x3f2906(0xd4)]){const _0x2c7260=await DataConverter[_0x3f2906(0xaa)](MiscUtil[_0x3f2906(0x236)](this['_actor'],_0x3f2906(0xcb),_0x3f2906(0xcb),_0x3f2906(0xd4)),_0x246b8c[_0x3f2906(0xd4)],_0x9343c9[_0x3f2906(0xcb)],_0x318f4f);if(_0x318f4f[_0x3f2906(0x18d)])return _0x31640c;_0x31640c[_0x3f2906(0xd4)]=_0x2c7260;}return _0x31640c;}async[_0x57d078(0x116)](_0x5b86fc,_0x46a1b2,_0x49a8c7,_0x1d2db8){const _0x3e4887=_0x57d078,_0x36bb9c={'chosenProficiencies':{}};if(_0x46a1b2[_0x3e4887(0x1ce)]&&_0x46a1b2['multiclassing']['proficienciesGained']){_0x36bb9c['chosenProficiencies']=await this[_0x3e4887(0x229)](_0x5b86fc,_0x46a1b2[_0x3e4887(0x1ce)][_0x3e4887(0x122)],_0x1d2db8);if(_0x1d2db8[_0x3e4887(0x18d)])return;}return _0x36bb9c;}[_0x57d078(0x100)](_0x1c7e61){const _0x2541a4=_0x57d078,_0x3339bf=MiscUtil[_0x2541a4(0x236)](this[_0x2541a4(0x1ed)],_0x2541a4(0xcb),_0x2541a4(0x192))||[];return _0x3339bf[_0x2541a4(0xa2)](_0x4cb779=>_0x4cb779[_0x2541a4(0x182)]===_0x2541a4(0x1e6)&&(_0x4cb779[_0x2541a4(0x19f)]||'')[_0x2541a4(0x24d)]()[_0x2541a4(0xab)]()===_0x1c7e61[_0x2541a4(0x19f)][_0x2541a4(0x24d)]()[_0x2541a4(0xab)]()&&(!Config[_0x2541a4(0x236)]('import',_0x2541a4(0x9e))||(DataConverter[_0x2541a4(0x13a)](_0x4cb779)||'')['toLowerCase']()===Parser['sourceJsonToAbv'](_0x1c7e61[_0x2541a4(0x261)])[_0x2541a4(0x24d)]()));}async[_0x57d078(0x146)](_0x48e5cd,_0x43b25e,_0x4cd6d5,_0xbf8811){const _0x21eece=_0x57d078,_0x22ae75={'curLevel':0x0,'existingClassItem':null};let _0x1c49ff={};if(_0xbf8811[_0x21eece(0xba)]&&_0xbf8811[_0x21eece(0x12f)])switch(_0xbf8811[_0x21eece(0x126)]){case Charactermancer_Class_ProficiencyImportModeSelect[_0x21eece(0x10d)]:{_0x1c49ff=await this[_0x21eece(0x116)](_0x48e5cd,_0x43b25e,_0x4cd6d5,_0xbf8811);break;}case Charactermancer_Class_ProficiencyImportModeSelect[_0x21eece(0xc6)]:{_0x1c49ff=await this['_pImportEntry_pDoUpdateCharacter_pPopulateLevelOneProficienciesAndEquipment'](_0x48e5cd,_0x43b25e,_0x4cd6d5,_0xbf8811);if(_0xbf8811[_0x21eece(0x18d)])return;break;}case Charactermancer_Class_ProficiencyImportModeSelect['MODE_NONE']:{break;}default:throw new Error(_0x21eece(0x18e)+_0xbf8811[_0x21eece(0x126)]+'\x22');}let _0x2842a8='';if(Config[_0x21eece(0x236)](_0x21eece(0x135),'isImportDescription')&&_0x43b25e[_0x21eece(0x1bb)]&&_0x43b25e['fluff']['length'])_0x2842a8=Renderer['get']()[_0x21eece(0xdd)](!![])[_0x21eece(0x13c)]({'type':_0x43b25e[_0x21eece(0x1bb)][0x0][_0x21eece(0x182)]||_0x21eece(0x13d),'entries':_0x43b25e[_0x21eece(0x1bb)][0x0][_0x21eece(0x149)]||[]});const _0x80a3f1=this[_0x21eece(0x100)](_0x43b25e),_0x2455cd=await(async()=>{const _0x1d367d=_0x21eece;if(!_0x80a3f1['length'])return null;if(!_0x4cd6d5&&_0x80a3f1['length']===0x1)return _0x80a3f1[0x0];if(!_0x4cd6d5)return this[_0x1d367d(0x1da)](_0x43b25e,_0x4cd6d5,_0x80a3f1);const _0x552a81=_0x80a3f1[_0x1d367d(0xa2)](_0x1aaeda=>MiscUtil[_0x1d367d(0x236)](_0x1aaeda,_0x1d367d(0xcb),_0x1d367d(0xd7)));if(!_0x552a81[_0x1d367d(0x1b5)]&&_0x80a3f1[_0x1d367d(0x1b5)]===0x1)return _0x80a3f1[0x0];if(!_0x552a81[_0x1d367d(0x1b5)])return this['_pGetUserClassItem'](_0x43b25e,_0x4cd6d5,_0x80a3f1);const _0x59267b=_0x80a3f1[_0x1d367d(0xa2)](_0x4ffcea=>(MiscUtil[_0x1d367d(0x236)](_0x4ffcea,'data',_0x1d367d(0xd7))||'')===_0x4cd6d5[_0x1d367d(0x19f)]);if(!_0x59267b['length'])return this[_0x1d367d(0x1da)](_0x43b25e,_0x4cd6d5,_0x80a3f1);if(_0x59267b['length']===0x1)return _0x59267b[0x0];return this[_0x1d367d(0x1da)](_0x43b25e,_0x4cd6d5,_0x59267b);})();if(_0x2455cd){let _0xd31461=![];const _0x3467f5={'_id':_0x2455cd[_0x21eece(0x218)]||_0x2455cd[_0x21eece(0xcb)][_0x21eece(0x218)]};_0x2842a8&&!(MiscUtil[_0x21eece(0x236)](_0x2455cd,_0x21eece(0xcb),'description',_0x21eece(0x1b9))||''[_0x21eece(0xab)]())&&(_0xd31461=!![],((_0x3467f5[_0x21eece(0xcb)]=_0x3467f5[_0x21eece(0xcb)]||{})[_0x21eece(0x1e4)]=_0x3467f5['data'][_0x21eece(0x1e4)]||{})[_0x21eece(0x1b9)]=_0x2842a8);let _0x457b26=MiscUtil[_0x21eece(0x236)](_0x2455cd,'data',_0x21eece(0x21d));_0x457b26&&(_0xbf8811['targetLevel']>_0x457b26&&(_0xd31461=!![],(_0x3467f5['data']=_0x3467f5['data']||{})['levels']=_0xbf8811[_0x21eece(0x237)]));if(_0x4cd6d5&&_0x4cd6d5[_0x21eece(0x19f)]){const _0x2a27a8=MiscUtil[_0x21eece(0x236)](_0x2455cd,_0x21eece(0xcb),_0x21eece(0xd7));_0x2a27a8!==_0x4cd6d5[_0x21eece(0x19f)]&&(_0xd31461=!![],(_0x3467f5[_0x21eece(0xcb)]=_0x3467f5[_0x21eece(0xcb)]||{})['subclass']=_0x4cd6d5['name']);}if(_0xd31461)_0xbf8811[_0x21eece(0x256)][_0x21eece(0xed)](_0x3467f5);_0x22ae75[_0x21eece(0xd8)]=_0x457b26||0x0,_0x22ae75['existingClassItem']=_0x2455cd;}else{const _0x3693a5=(_0x4cd6d5||{})['casterProgression']||_0x43b25e[_0x21eece(0x25e)],_0x3b7b29=await DataConverter[_0x21eece(0x11a)](_0x21eece(0x1e6),_0x43b25e)||_0x21eece(0x22c)+SharedConsts[_0x21eece(0x209)]+'/media/icon/laurels.svg',_0x13704c=_0x1c49ff['chosenProficiencies']&&_0x1c49ff['chosenProficiencies']['skills']?Object[_0x21eece(0x1e0)](_0x1c49ff[_0x21eece(0x18c)][_0x21eece(0xd4)]):[];_0xbf8811['items'][_0x21eece(0xed)]({'name':UtilApplications['getCleanEntityName'](DataConverter[_0x21eece(0x1af)](_0x43b25e)),'type':_0x21eece(0x1e6),'data':{'description':{'value':_0x2842a8,'chat':'','unidentified':''},'source':DataConverter[_0x21eece(0x1ad)](_0x43b25e),'levels':_0xbf8811['targetLevel'],'subclass':_0x4cd6d5?_0x4cd6d5[_0x21eece(0x19f)]:'','hitDice':DataConverterClass[_0x21eece(0x250)](_0x43b25e),'hitDiceUsed':0x0,'spellcasting':UtilActors[_0x21eece(0x20f)](_0x3693a5)||_0x3693a5,'skills':{'number':_0xbf8811[_0x21eece(0x126)]===Charactermancer_Class_ProficiencyImportModeSelect[_0x21eece(0x10d)]?_0x43b25e[_0x21eece(0x108)]||0x0:_0x43b25e['_cntStartingSkillChoices']||0x0,'value':_0x13704c}},'img':_0x3b7b29});}return _0x22ae75;}async['_pGetUserClassItem'](_0x7c7b92,_0x43a4ba,_0x41183c){const _0x449b81=_0x57d078,_0x17ae6e=''+(_0x7c7b92['name']||_0x449b81(0xbe))+(_0x43a4ba?'\x20('+(_0x43a4ba[_0x449b81(0x19f)]||_0x449b81(0x1c3))+')':''),_0xc41c5f=await InputUiUtil[_0x449b81(0xfc)]({'values':_0x41183c,'placeholder':_0x449b81(0x1d7),'title':_0x449b81(0x11c)+_0x17ae6e+_0x449b81(0x153),'fnDisplay':_0x562b76=>{const _0x2d9141=_0x449b81;if(_0x562b76==null)return _0x2d9141(0x147);const _0x3338d8=(MiscUtil[_0x2d9141(0x236)](_0x562b76,_0x2d9141(0xcb),'subclass')||'')[_0x2d9141(0xab)]();return''+(_0x562b76[_0x2d9141(0x19f)]||_0x2d9141(0xbe))+(_0x3338d8?':\x20'+_0x3338d8:'');},'isAllowNull':!![]});if(_0xc41c5f==null)return null;return _0x41183c[_0xc41c5f];}async['_pImportPreparedCasterSpells'](_0x4f9a39,_0x2f6455,_0x5d63d0){const _0x24bd86=_0x57d078;if(_0x4f9a39[_0x24bd86(0x168)])return;const _0x54de19=Charactermancer_Class_Util['getCasterProgressionMeta']({'casterProgression':_0x4f9a39[_0x24bd86(0x25e)],'curLevel':_0x2f6455,'targetLevel':_0x5d63d0[_0x24bd86(0x237)],'isBreakpointsOnly':!![]});if(!_0x54de19)return;const {spellLevelLow:_0x4ee61c,spellLevelHigh:_0x2afe07,deltaLevels:_0x4bec0a,deltaSpellLevels:_0x489bdc}=_0x54de19;if(!_0x489bdc)return;const _0x3ecdf9=await InputUiUtil[_0x24bd86(0x157)]({'title':_0x24bd86(0x111),'htmlDescription':'<p>Do\x20you\x20want\x20to\x20populate\x20the\x20spellbook\x20for\x20this\x20class\x20(for\x20class\x20level'+(_0x4bec0a===0x1?'':'s')+'\x20'+(_0x4bec0a===0x1?_0x5d63d0[_0x24bd86(0x237)]:_0x2f6455+0x1+'-'+_0x5d63d0[_0x24bd86(0x237)])+_0x24bd86(0x1fd),'textYes':_0x24bd86(0x20c),'textNo':'No'});if(!_0x3ecdf9)return;const _0x3e2b46=(await Vetools[_0x24bd86(0x252)](!![]))[_0x24bd86(0x1f2)],_0x541c21=Charactermancer_Class_Util['getPrepareableSpells'](_0x3e2b46,_0x4f9a39,_0x4ee61c,_0x2afe07);for(const _0x1da9e2 of _0x541c21){const _0x4a1a6b=UrlUtil[_0x24bd86(0xb7)][UrlUtil['PG_SPELLS']](_0x1da9e2),_0x5f4153=DataConverterSpell[_0x24bd86(0xa5)](this[_0x24bd86(0x1ed)],_0x1da9e2['name'],_0x1da9e2[_0x24bd86(0x261)]);if(_0x5f4153){_0x5d63d0[_0x24bd86(0x254)][_0x4a1a6b]=_0x5f4153[_0x24bd86(0x218)]||_0x5f4153[_0x24bd86(0xcb)][_0x24bd86(0x218)];continue;}const _0x38442=await DataConverterSpell[_0x24bd86(0x12c)](_0x1da9e2,{...UtilActors[_0x24bd86(0x15c)](),'casterLevel':_0x5d63d0['targetLevel'],'abilityAbv':_0x4f9a39[_0x24bd86(0x15b)]}),_0x4730a0=await this[_0x24bd86(0x1ed)][_0x24bd86(0x17f)](_0x24bd86(0x106),_0x38442,{});_0x5d63d0[_0x24bd86(0x254)][_0x4a1a6b]=_0x4730a0[_0x24bd86(0x218)]||_0x4730a0[_0x24bd86(0xcb)][_0x24bd86(0x218)];}}async[_0x57d078(0xb9)](_0x22b309,_0x937b25,_0x117059,_0x1b392b){const _0xe90c2e=_0x57d078;if(!_0x937b25||!_0x937b25[_0xe90c2e(0x1b5)])return;for(const _0x4d7206 of _0x937b25){const _0x3f4cdb=Charactermancer_Class_Util[_0xe90c2e(0x121)]({'casterProgression':_0x4d7206?.[_0xe90c2e(0x25e)]||_0x22b309[_0xe90c2e(0x25e)],'curLevel':_0x117059,'targetLevel':_0x1b392b['targetLevel']}),_0x125f4c=await Charactermancer_AdditionalSpellsSelect['pGetUserInput']({'additionalSpells':_0x4d7206[_0xe90c2e(0x133)],'sourceHintText':_0x4d7206[_0xe90c2e(0x19f)],'currentLevel':_0x117059,'targetLevel':_0x1b392b[_0xe90c2e(0x237)],'spellLevelLow':_0x3f4cdb?_0x3f4cdb['spellLevelLow']:null,'spellLevelHigh':_0x3f4cdb?_0x3f4cdb['spellLevelHigh']:null});if(_0x125f4c==null)return _0x1b392b[_0xe90c2e(0x18d)]=!![];if(_0x125f4c===VeCt[_0xe90c2e(0x220)])continue;await Charactermancer_AdditionalSpellsSelect['pApplyFormDataToActor'](this[_0xe90c2e(0x1ed)],_0x125f4c,{'abilityAbv':_0x1b392b[_0xe90c2e(0x15b)],'casterLevel':_0x1b392b[_0xe90c2e(0x237)],'hashToIdMap':_0x1b392b[_0xe90c2e(0x254)]});}}async[_0x57d078(0x188)](_0x59cdb2,_0x3ab19c,_0x3015f2,_0x340a82,_0x26dfbf){const _0x289f62=_0x57d078;if(_0x59cdb2['_foundryAllFeatures'])await this[_0x289f62(0x1ee)](_0x59cdb2[_0x289f62(0x154)],_0x340a82,_0x26dfbf);else{const _0xf78a41=_0x3ab19c[_0x289f62(0xa2)](_0xb204c6=>_0x3015f2[_0x289f62(0x1b6)](_0xb204c6[_0x289f62(0xc2)]-0x1));await this['_pImportEntry_pFillItemArrayFeatures'](_0xf78a41,_0x340a82,_0x26dfbf);}}async['_pImportEntry_pFillItemArrayPredefinedFeatures'](_0xdbf369,_0x5c9ef8,_0x138b30){const _0x501d72=_0x57d078,_0x475939=DataConverterSpell['doHookSpellLinkRender'][_0x501d72(0xd2)](null,this[_0x501d72(0x1ed)]['id'],_0x138b30[_0x501d72(0x254)]);Renderer[_0x501d72(0x236)]()['addHook'](_0x501d72(0x251),_0x501d72(0x10e),_0x475939);for(const _0x5de9f8 of _0xdbf369){await this['_pAddLoadedFeature'](_0x5de9f8,_0x138b30);if(_0x138b30[_0x501d72(0x18d)])return;}Renderer[_0x501d72(0x236)]()[_0x501d72(0x22b)](_0x501d72(0x251),'ele',_0x475939);}async[_0x57d078(0x101)](_0x26b17e,_0x401102,_0x4cf8fb){const _0x23a688=_0x57d078,_0x24d615=this[_0x23a688(0x1ed)]?.['data']?.[_0x23a688(0xcb)]?.[_0x23a688(0x1e8)]?.[_0x23a688(0x170)]?.['value'],_0x221e61=DataConverterSpell['doHookSpellLinkRender']['bind'](null,this[_0x23a688(0x1ed)]['id'],_0x4cf8fb['spellHashToItemIdMap']);Renderer[_0x23a688(0x236)]()[_0x23a688(0x1c7)](_0x23a688(0x251),_0x23a688(0x10e),_0x221e61),_0x26b17e=Charactermancer_Class_Util[_0x23a688(0x156)](_0x26b17e),Charactermancer_Class_Util[_0x23a688(0xfb)](_0x26b17e,this[_0x23a688(0x22a)],_0x401102['filterValues']||this['_pageFilter'][_0x23a688(0x1d0)][_0x23a688(0x1e7)]());const _0x4e8600=new Charactermancer_Class_Util[(_0x23a688(0x1cb))](this[_0x23a688(0x1ed)]),_0x7c2870=Charactermancer_Class_Util[_0x23a688(0xde)](_0x26b17e);for(const _0x17cc3b of _0x7c2870){const {topLevelFeature:_0x455c69,optionsSets:_0x220ab7}=_0x17cc3b,_0x19e4bc=_0x455c69['name']['toLowerCase']();if(_0x19e4bc==='ability\x20score\x20improvement'){await this[_0x23a688(0x1f0)](_0x455c69,_0x4cf8fb);if(_0x4cf8fb[_0x23a688(0x18d)])return;continue;}for(const _0xa719c7 of _0x220ab7){const _0x1dc42a=await Charactermancer_Class_FeatureOptionsSelect['pGetUserInput']({'actor':this[_0x23a688(0x1ed)],'optionsSet':_0xa719c7,'level':_0x455c69['level'],'existingFeatureChecker':_0x4e8600});if(!_0x1dc42a)return _0x4cf8fb['isCancelled']=!![];if(_0x1dc42a===VeCt['SYM_UI_SKIP'])continue;for(const _0x1577c2 of _0x1dc42a['data']){await this[_0x23a688(0x131)](_0x1577c2,_0x4cf8fb,_0x4e8600);if(_0x4cf8fb[_0x23a688(0x18d)])return;}}}Renderer[_0x23a688(0x236)]()[_0x23a688(0x22b)]('link','ele',_0x221e61);const _0xf85c89=this[_0x23a688(0x1ed)]?.[_0x23a688(0xcb)]?.['data']?.[_0x23a688(0x1e8)]?.[_0x23a688(0x170)]?.['value'];if(_0xf85c89!=null&&_0xf85c89!==_0x24d615){const _0xfedd56=Parser[_0x23a688(0x1db)](_0x24d615),_0x487069=Parser[_0x23a688(0x1db)](_0xf85c89),_0x483355=(_0x4cf8fb[_0x23a688(0x1b0)]+_0x4cf8fb['numLevels'])*(_0x487069-_0xfedd56),_0x31bcd8=(this[_0x23a688(0x1ed)]?.[_0x23a688(0xcb)]?.['data']?.['attributes']?.['hp']?.['value']||0x0)+_0x483355,_0x32b79b=(this[_0x23a688(0x1ed)]?.[_0x23a688(0xcb)]?.[_0x23a688(0xcb)]?.[_0x23a688(0x14f)]?.['hp']?.[_0x23a688(0xb5)]||0x0)+_0x483355;MiscUtil[_0x23a688(0x214)](_0x4cf8fb[_0x23a688(0x164)],'data',_0x23a688(0x14f),'hp',_0x23a688(0x1b9),_0x31bcd8),MiscUtil['set'](_0x4cf8fb[_0x23a688(0x164)],'data',_0x23a688(0x14f),'hp','max',_0x32b79b);}}async['_pImportEntry_pFinalise'](_0x139d34){const _0x2d2e94=_0x57d078;if(_0x139d34[_0x2d2e94(0x200)]?.[_0x2d2e94(0xcb)]?.[_0x2d2e94(0x21f)])MiscUtil['set'](_0x139d34[_0x2d2e94(0x164)],'data','currency',_0x139d34[_0x2d2e94(0x200)][_0x2d2e94(0xcb)][_0x2d2e94(0x21f)]);if(Object[_0x2d2e94(0x1e0)](_0x139d34[_0x2d2e94(0x164)])[_0x2d2e94(0x1b5)])await this[_0x2d2e94(0x1ed)][_0x2d2e94(0x152)](_0x139d34[_0x2d2e94(0x164)]);if(_0x139d34['items']['length']){const _0x2bc646=_0x139d34[_0x2d2e94(0x192)][_0x2d2e94(0xa2)](_0x96b6f9=>_0x96b6f9['type']===_0x2d2e94(0x1e6)),_0x4c219f=_0x139d34['items'][_0x2d2e94(0xa2)](_0x5a2deb=>_0x5a2deb['type']!==_0x2d2e94(0x1e6));if(_0x2bc646[_0x2d2e94(0x1b5)])await UtilActors[_0x2d2e94(0x11b)](this[_0x2d2e94(0x1ed)],_0x2bc646);if(_0x4c219f[_0x2d2e94(0x1b5)])await UtilActors[_0x2d2e94(0x11b)](this[_0x2d2e94(0x1ed)],_0x4c219f);}_0x139d34[_0x2d2e94(0x256)][_0x2d2e94(0x1b5)]&&await this['_actor'][_0x2d2e94(0x155)](_0x2d2e94(0x106),_0x139d34[_0x2d2e94(0x256)]);await Charactermancer_StartingEquipment[_0x2d2e94(0x1e3)](this['_actor'],_0x139d34[_0x2d2e94(0x200)]),Util[_0x2d2e94(0xd6)](_0x139d34[_0x2d2e94(0x178)]);if(Object[_0x2d2e94(0x1e0)](_0x139d34[_0x2d2e94(0x178)])[_0x2d2e94(0x1b5)])await this['_actor'][_0x2d2e94(0x152)](_0x139d34[_0x2d2e94(0x178)]);}async[_0x57d078(0x131)](_0x122757,_0x177a1c,_0x146887){const _0x1b1d73=_0x57d078,_0x2888d3=_0x122757[_0x1b1d73(0x241)];if(_0x146887)_0x146887[_0x1b1d73(0x12b)](_0x122757[_0x1b1d73(0xe5)],_0x122757[_0x1b1d73(0x261)],_0x122757[_0x1b1d73(0x199)]);let _0x129560;switch(_0x122757[_0x1b1d73(0x182)]){case _0x1b1d73(0x1a4):case'subclassFeature':{const _0x307bcb=await DataConverterClass[_0x1b1d73(0xe7)](_0x122757,this[_0x1b1d73(0x1ed)]);_0x129560=_0x307bcb,_0x177a1c[_0x1b1d73(0x192)][_0x1b1d73(0xed)](_0x307bcb),await DataConverterClass['pMutActorUpdateClassSubclassFeatureItem'](this['_actor'],_0x177a1c['actorUpdate'],_0x122757,_0x177a1c),MiscUtil[_0x1b1d73(0x214)](_0x307bcb[_0x1b1d73(0xcb)],_0x1b1d73(0x15e),SharedConsts[_0x1b1d73(0x13e)],_0x1b1d73(0x208),_0x122757[_0x1b1d73(0x182)]);break;}case _0x1b1d73(0x15f):{const _0x59e919=await DataConverterOptionalfeature[_0x1b1d73(0x24b)](_0x2888d3);_0x129560=_0x59e919,_0x177a1c[_0x1b1d73(0x192)]['push'](_0x59e919),await DataConverterOptionalfeature[_0x1b1d73(0x105)](this['_actor'],_0x177a1c[_0x1b1d73(0x164)],_0x2888d3,_0x177a1c),MiscUtil[_0x1b1d73(0x214)](_0x59e919[_0x1b1d73(0xcb)],'flags',SharedConsts[_0x1b1d73(0x13e)],_0x1b1d73(0x208),_0x2888d3[_0x1b1d73(0x25f)]||_0x1b1d73(0x1a4));break;}default:throw new Error('Unhandled\x20sub-feature\x20type\x20\x22'+_0x122757[_0x1b1d73(0x182)]+'\x22');}const _0x16f32f=_0x2888d3[_0x1b1d73(0xd9)]||_0x2888d3['_ancestorClassName']||_0x122757[_0x1b1d73(0xd9)],_0x3ceb98=_0x2888d3[_0x1b1d73(0x1cd)]||_0x2888d3['_ancestorSubclassName']||_0x122757[_0x1b1d73(0x1cd)];if(_0x16f32f)MiscUtil[_0x1b1d73(0x214)](_0x129560[_0x1b1d73(0xcb)],_0x1b1d73(0x15e),SharedConsts[_0x1b1d73(0x13e)],_0x1b1d73(0xd9),_0x16f32f);if(_0x3ceb98)MiscUtil['set'](_0x129560['data'],_0x1b1d73(0x15e),SharedConsts[_0x1b1d73(0x13e)],'subclassName',_0x3ceb98);}async[_0x57d078(0xf4)](_0x1ce4ad,_0x520c14){const _0x335294=_0x57d078;if(_0x1ce4ad[_0x335294(0x1b5)]>0x1)return;if(_0x1ce4ad[0x0]===0x0)return;const _0x4f98eb=(MiscUtil['get'](this[_0x335294(0x1ed)],_0x335294(0xcb),_0x335294(0x192))||[])['filter'](_0x3e2366=>_0x3e2366[_0x335294(0x182)]===_0x335294(0x1e6));if(_0x4f98eb[_0x335294(0x1b5)])return;const _0x4b6182=_0x1ce4ad[0x0]+0x1,_0x311778=await InputUiUtil[_0x335294(0x157)]({'title':'Import\x20Lower\x20Levels?','htmlDescription':_0x335294(0x124)+_0x4b6182+_0x335294(0x173)+(_0x4b6182===0x2?'':'s')+'\x20'+(_0x4b6182===0x2?'1':'1-'+(_0x4b6182-0x1))+_0x335294(0xd5),'textYes':'Import\x20Levels\x201-'+_0x4b6182,'textNo':_0x335294(0x140)+_0x4b6182});if(_0x311778==null){_0x520c14[_0x335294(0x18d)]=!![];return;}if(_0x311778){const _0x41b705=_0x1ce4ad[0x0];for(let _0x46ba3d=0x0;_0x46ba3d<=_0x41b705;++_0x46ba3d){_0x1ce4ad[_0x46ba3d]=_0x46ba3d;}}}async['_pHandleAbilityScoreIncrease'](_0x10f533,_0x9d9614){const _0xddc583=_0x57d078,_0x5572b7=new ImportListClass['AbilityScoreIncrease'](this['_actor'],_0x10f533,_0x9d9614);_0x5572b7[_0xddc583(0x13c)](!![]),await _0x5572b7['pWaitForUserInput']();}async['_pImportEntry_pDoUpdateCharacter_pPopulateEquipment'](_0x3820ad,_0x16e8b7){const _0x7483cc=_0x57d078;if(!_0x3820ad[_0x7483cc(0x1a2)])return;const _0x4bfd16=new Charactermancer_StartingEquipment({'actor':this[_0x7483cc(0x1ed)],'startingEquipment':_0x3820ad[_0x7483cc(0x1a2)],'appSubTitle':_0x3820ad['name'],'equiSpecialSource':_0x3820ad[_0x7483cc(0x261)],'equiSpecialPage':_0x3820ad[_0x7483cc(0xe5)]}),_0x47eea7=await _0x4bfd16[_0x7483cc(0x21c)]();if(_0x47eea7==null)return _0x16e8b7[_0x7483cc(0x18d)]=!![];if(_0x47eea7===VeCt[_0x7483cc(0x220)])return;_0x16e8b7[_0x7483cc(0x200)]=_0x47eea7;}}ImportListClass['ImportEntryOpts']=class extends ImportListCharacter[_0x57d078(0x130)]{constructor(_0x48f927){const _0x54f719=_0x57d078;super(_0x48f927),_0x48f927=_0x48f927||{},this['isClassImport']=!!_0x48f927['isClassImport'],this[_0x54f719(0x192)]=[],this[_0x54f719(0x164)]={},this[_0x54f719(0x178)]={},this[_0x54f719(0x256)]=[],this[_0x54f719(0x254)]={},this[_0x54f719(0x200)]=null,this[_0x54f719(0x237)]=null,this[_0x54f719(0xa3)]=null,this[_0x54f719(0x1b0)]=null,this[_0x54f719(0x12f)]=null,this[_0x54f719(0x15b)]=null,this[_0x54f719(0x126)]=null,this[_0x54f719(0x158)]=null;}},ImportListClass[_0x57d078(0x260)]=class extends Application{constructor(_0x41eb93,_0xc440d8,_0x47bfe8){const _0x1bb4d1=_0x57d078;super({'title':_0x1bb4d1(0x109)+_0xc440d8[_0x1bb4d1(0xc2)],'template':SharedConsts[_0x1bb4d1(0x14c)]+_0x1bb4d1(0x242),'width':0x280,'resizable':!![]}),this[_0x1bb4d1(0xbd)]=_0x47bfe8,this[_0x1bb4d1(0x1b4)]=null,this[_0x1bb4d1(0x1c1)]=null,this[_0x1bb4d1(0xc3)]=new Promise((_0x362a16,_0x4e61cb)=>{const _0x399efa=_0x1bb4d1;this[_0x399efa(0x1b4)]=_0x362a16,this[_0x399efa(0x1c1)]=_0x4e61cb;}),this[_0x1bb4d1(0x10a)]=new ImportListClass[(_0x1bb4d1(0x260))][(_0x1bb4d1(0x189))](_0x41eb93,_0x47bfe8,this[_0x1bb4d1(0x227)][_0x1bb4d1(0xd2)](this));}[_0x57d078(0x20b)](_0x42fede){const _0x4ad311=_0x57d078;this[_0x4ad311(0x10a)][_0x4ad311(0x13c)](_0x42fede);}async[_0x57d078(0x227)](){const _0x1558ad=_0x57d078;await super[_0x1558ad(0x227)]();if(!this[_0x1558ad(0x10a)]['isDataEntered'])this[_0x1558ad(0xbd)]['isCancelled']=!![];this[_0x1558ad(0x1b4)]();}[_0x57d078(0x21c)](){return this['_pUserInput'];}},ImportListClass[_0x57d078(0x260)][_0x57d078(0x189)]=class extends BaseComponent{constructor(_0x39dd58,_0x434f17,_0x3b19f7){const _0x4403b6=_0x57d078;super(),this[_0x4403b6(0x1ed)]=_0x39dd58,this[_0x4403b6(0xbd)]=_0x434f17,this[_0x4403b6(0x246)]=_0x3b19f7,this['_isDataEntered']=![],Object[_0x4403b6(0x162)](this[_0x4403b6(0x1b2)],{'str':Number(MiscUtil['get'](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),'data',_0x4403b6(0x1e8),_0x4403b6(0x18a),_0x4403b6(0x1b9))||0x0),'dex':Number(MiscUtil[_0x4403b6(0x236)](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),_0x4403b6(0xcb),'abilities',_0x4403b6(0xca),_0x4403b6(0x1b9))||0x0),'con':Number(MiscUtil[_0x4403b6(0x236)](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),'data','abilities',_0x4403b6(0x170),_0x4403b6(0x1b9))||0x0),'int':Number(MiscUtil['get'](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),_0x4403b6(0xcb),'abilities',_0x4403b6(0x1d2),_0x4403b6(0x1b9))||0x0),'wis':Number(MiscUtil[_0x4403b6(0x236)](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),_0x4403b6(0xcb),'abilities',_0x4403b6(0xf7),_0x4403b6(0x1b9))||0x0),'cha':Number(MiscUtil[_0x4403b6(0x236)](this[_0x4403b6(0x1ed)],_0x4403b6(0xcb),_0x4403b6(0xcb),'abilities',_0x4403b6(0xa8),'value')||0x0)});}get[_0x57d078(0x117)](){return this['_isDataEntered'];}[_0x57d078(0x13c)](_0x25883c){const _0x1af45c=_0x57d078,_0x28366e=$(_0x1af45c(0x224))[_0x1af45c(0x1ac)](()=>this[_0x1af45c(0x14e)]['mode']=_0x1af45c(0x1dd)),_0x1dd28c=$(_0x1af45c(0x25a))[_0x1af45c(0x1ac)](()=>this[_0x1af45c(0x14e)]['mode']=_0x1af45c(0x1d9)),_0x30d3f1=$('<div\x20class=\x22flex-col\x20w-100\x20h-100\x22></div>'),_0x2f32d6=$(_0x1af45c(0xbc)),_0x2f1a4d=()=>{const _0x29c6a3=_0x1af45c,_0x2ae5ec=this[_0x29c6a3(0x14e)][_0x29c6a3(0x11f)]===_0x29c6a3(0x1dd);_0x28366e[_0x29c6a3(0xff)]('active',_0x2ae5ec),_0x1dd28c[_0x29c6a3(0xff)](_0x29c6a3(0xa9),!_0x2ae5ec),_0x30d3f1[_0x29c6a3(0xe1)](_0x2ae5ec),_0x2f32d6[_0x29c6a3(0xe1)](!_0x2ae5ec);};_0x2f1a4d(),this[_0x1af45c(0x1ae)](_0x1af45c(0x11f),_0x2f1a4d),this[_0x1af45c(0x132)](_0x30d3f1),this[_0x1af45c(0x247)](_0x2f32d6),$$(_0x25883c)`<div class="flex-col w-100 h-100">
			<div class="flex no-shrink btn-group mb-1">${_0x28366e}${_0x1dd28c}</div>
			${_0x30d3f1}
			${_0x2f32d6}
		</div>`;}[_0x57d078(0x132)](_0x36ed9b){const _0x2c1ccf=_0x57d078,_0xda220f=[_0x2c1ccf(0x18a),'dex','con',_0x2c1ccf(0x1d2),_0x2c1ccf(0xf7),_0x2c1ccf(0xa8)]['map'](_0x3cc260=>{const _0x2fc72f=_0x2c1ccf,_0x48b51b=$('<div\x20class=\x22col-2\x20text-center\x22></div>'),_0x444804=$(_0x2fc72f(0x13f)),_0x17ab5c=()=>{const _0x1ab5c5=_0x2fc72f;_0x48b51b[_0x1ab5c5(0x219)](this[_0x1ab5c5(0x14e)][_0x3cc260]),_0x444804[_0x1ab5c5(0x219)](Parser[_0x1ab5c5(0x1c9)](this['_state'][_0x3cc260]));};this[_0x2fc72f(0x1ae)](_0x3cc260,_0x17ab5c),_0x17ab5c();const _0x4f0f44=_0x3cc260+_0x2fc72f(0x1f3),{$wrp:_0x35b8c3,$ipt:_0x151d53}=ComponentUiUtil['$getIptNumber'](this,_0x4f0f44,0x0,{'min':0x0,'fallbackOnNaN':0x0,'html':_0x2fc72f(0x120),'asMeta':!![],'decorationRight':_0x2fc72f(0x20d),'decorationLeft':_0x2fc72f(0x234)});_0x151d53[_0x2fc72f(0x1ac)](()=>_0x151d53['select']());const _0x33d937=$(_0x2fc72f(0x13f)),_0x155490=$(_0x2fc72f(0x13f)),_0x46269d=()=>{const _0x183c8b=_0x2fc72f,_0x50e9d3=this[_0x183c8b(0x14e)][_0x3cc260]+this[_0x183c8b(0x14e)][_0x4f0f44];_0x33d937['text'](_0x50e9d3),_0x155490[_0x183c8b(0x219)](Parser[_0x183c8b(0x1c9)](_0x50e9d3)),_0x33d937[_0x183c8b(0xff)](_0x183c8b(0xb8),_0x50e9d3>0x14)['title'](_0x50e9d3>0x14?'You\x20can\x27t\x20increase\x20an\x20ability\x20score\x20above\x2020\x20using\x20this\x20feature.':'');};this[_0x2fc72f(0x1ae)](_0x4f0f44,_0x46269d),_0x46269d();const _0x579ce6=$$`<div class="flex w-100 my-1">
				<div class="col-1 text-right bold">${_0x3cc260[_0x2fc72f(0x1f1)]()}</div>
				${_0x48b51b}
				${_0x444804}
				<div class="col-2">${_0x35b8c3}</div>
				<div class="col-1 text-center">=</div>
				${_0x33d937}
				${_0x155490}
			</div>`;return{'$row':_0x579ce6,'$iptBonus':_0x151d53};}),_0xe65089=$(_0x2c1ccf(0x14d)),_0x531556=()=>{const _0x518d5e=_0x2c1ccf,_0x22a358=[_0x518d5e(0x11d),_0x518d5e(0x1cf),'conBonus','intBonus',_0x518d5e(0x216),_0x518d5e(0xf5)][_0x518d5e(0x194)](_0x5597d6=>this[_0x518d5e(0x14e)][_0x5597d6])['reduce']((_0x10ad2f,_0x56abf1)=>_0x10ad2f+_0x56abf1,0x0),_0x2e7413=_0x22a358>0x2;_0xe65089['text'](_0x518d5e(0x23e)+(0x2-_0x22a358))[_0x518d5e(0xff)](_0x518d5e(0xb8),_0x2e7413),_0xda220f[_0x518d5e(0x231)](_0x32fd4b=>_0x32fd4b[_0x518d5e(0x17b)]['toggleClass'](_0x518d5e(0x19c),_0x2e7413));};[_0x2c1ccf(0x11d),'dexBonus',_0x2c1ccf(0x21b),_0x2c1ccf(0x1ef),_0x2c1ccf(0x216),_0x2c1ccf(0xf5)][_0x2c1ccf(0x231)](_0x3f9ac3=>this[_0x2c1ccf(0x1ae)](_0x3f9ac3,_0x531556)),_0x531556();const _0x2e957a=$(_0x2c1ccf(0xef))[_0x2c1ccf(0x1ac)](async()=>{const _0x1507be=_0x2c1ccf,_0x14a26f=[this[_0x1507be(0x14e)]['strBonus'],this['_state'][_0x1507be(0x1cf)],this[_0x1507be(0x14e)][_0x1507be(0x21b)],this[_0x1507be(0x14e)][_0x1507be(0x1ef)],this[_0x1507be(0x14e)][_0x1507be(0x216)],this[_0x1507be(0x14e)][_0x1507be(0xf5)]][_0x1507be(0x139)]((_0x473e99,_0x4c95e8)=>_0x473e99+_0x4c95e8,0x0);if(_0x14a26f!==0x2)return ui['notifications'][_0x1507be(0xfa)]('Please\x20enter\x20a\x20combination\x20of\x20ability\x20score\x20changes\x20which\x20adds\x20up\x20to\x20two!');await this['_pDoResolve'](!![]);}),_0x1df479=$(_0x2c1ccf(0xaf))[_0x2c1ccf(0x1ac)](()=>this[_0x2c1ccf(0x207)](VeCt[_0x2c1ccf(0x220)]));$$(_0x36ed9b)`
		<div class="flex w-100 my-1 bold">
			<div class="text-center col-1"></div>
			<div class="text-center col-2">Current</div>
			<div class="text-center col-2 ve-muted">Mod</div>
			<div class="text-center col-2 text-center">${_0xe65089}</div>
			<div class="text-center col-1"></div>
			<div class="text-center col-2">Result</div>
			<div class="text-center col-2 ve-muted">Mod</div>
		</div>
		<div class="flex-col w-100 h-100">
			${_0xda220f[_0x2c1ccf(0x194)](_0x4aacc2=>_0x4aacc2[_0x2c1ccf(0x186)])}
		</div>
		<div class="flex-v-center flex-h-right w-100">${_0x2e957a}${_0x1df479}</div>
		`;}['_render_feat'](_0x169783){const _0x5d609b=_0x57d078,_0x37ce50=$(_0x5d609b(0xf9))[_0x5d609b(0x1ac)](async()=>{const _0x39f4fb=_0x5d609b,_0x393070=await ImportListFeat['UserChoose'][_0x39f4fb(0x196)]({'id':_0x39f4fb(0x215),'name':_0x39f4fb(0x228),'singleName':_0x39f4fb(0xd0),'wizardTitleWindow':'Select\x20Source','wizardTitlePanel3':_0x39f4fb(0x1a1),'wizardTitleButtonOpenImporter':'Open\x20List'},_0x39f4fb(0x238));if(!_0x393070)return;this[_0x39f4fb(0x14e)][_0x39f4fb(0x19e)]=_0x393070;}),_0xfd5ca9=$('<div></div>'),_0x1a80d2=()=>{const _0x983b20=_0x5d609b;_0xfd5ca9[_0x983b20(0x1c2)]();if(!this[_0x983b20(0x14e)]['featData'])return;_0xfd5ca9[_0x983b20(0x12a)](_0x983b20(0xdf)+this[_0x983b20(0x14e)]['featData'][_0x983b20(0x19f)]+_0x983b20(0x16e));const {page:_0x4f76db,source:_0x14d2b5,hash:_0x37d2c3}=MiscUtil[_0x983b20(0x236)](this[_0x983b20(0x14e)]['featData'],_0x983b20(0x15e),SharedConsts['MODULE_NAME'])||{};if(!_0x37d2c3)return;Renderer['hover']['pCacheAndGet'](_0x4f76db,_0x14d2b5,_0x37d2c3)[_0x983b20(0x9f)](_0x2ef82a=>{const _0x407fcc=_0x983b20;_0xfd5ca9[_0x407fcc(0x12a)](_0x407fcc(0x1b8)+Vetools['withUnpatchedDiceRendering'](()=>Renderer[_0x407fcc(0x17a)][_0x407fcc(0x159)](UrlUtil['PG_FEATS'],_0x2ef82a))+'\x0a\x09\x09\x09\x09\x09');});};_0x1a80d2(),this[_0x5d609b(0x1ae)](_0x5d609b(0x19e),_0x1a80d2);const _0x514f7b=$(_0x5d609b(0xac))[_0x5d609b(0x1ac)](async()=>{const _0xceb37=_0x5d609b;if(!this['_state'][_0xceb37(0x19e)])return ui[_0xceb37(0x1ba)]['error'](_0xceb37(0x1de));await this['_pDoResolve'](!![]);}),_0x43b320=$('<button\x20class=\x22btn\x20btn-default\x20btn-5et\x22>Skip</button>')[_0x5d609b(0x1ac)](()=>this[_0x5d609b(0x207)](VeCt['SYM_UI_SKIP']));$$(_0x169783)`
		<div class="flex-col h-100">
			<div class="flex-v-center mb-1">
				${_0x37ce50}
				<div class="flex-v-center btn-group">${_0x514f7b}${_0x43b320}</div>
			</div>
			${_0xfd5ca9}
		</div>
		`;}async[_0x57d078(0x207)](_0x11a760){const _0x1a7b2f=_0x57d078;if(!_0x11a760)return this[_0x1a7b2f(0x246)]();if(_0x11a760===VeCt[_0x1a7b2f(0x220)])return this[_0x1a7b2f(0x253)]=!![],this[_0x1a7b2f(0x246)]();const _0x404cfd=this[_0x1a7b2f(0xbb)]();_0x404cfd&&(this[_0x1a7b2f(0x253)]=!![],await this[_0x1a7b2f(0x1ed)][_0x1a7b2f(0x152)](_0x404cfd));const _0xf72b17=this[_0x1a7b2f(0xce)]();_0xf72b17&&(this[_0x1a7b2f(0x253)]=!![],this[_0x1a7b2f(0xbd)][_0x1a7b2f(0x192)]['push'](_0xf72b17)),this[_0x1a7b2f(0x246)]();}[_0x57d078(0xbb)](){const _0x2c23cb=_0x57d078;if(this[_0x2c23cb(0x14e)][_0x2c23cb(0x11f)]!=='ability')return null;return{'data':{'abilities':{'str':{'value':this[_0x2c23cb(0x14e)][_0x2c23cb(0x18a)]+this[_0x2c23cb(0x14e)][_0x2c23cb(0x11d)]},'dex':{'value':this[_0x2c23cb(0x14e)]['dex']+this[_0x2c23cb(0x14e)][_0x2c23cb(0x1cf)]},'con':{'value':this[_0x2c23cb(0x14e)][_0x2c23cb(0x170)]+this[_0x2c23cb(0x14e)][_0x2c23cb(0x21b)]},'int':{'value':this[_0x2c23cb(0x14e)][_0x2c23cb(0x1d2)]+this['_state'][_0x2c23cb(0x1ef)]},'wis':{'value':this[_0x2c23cb(0x14e)]['wis']+this[_0x2c23cb(0x14e)][_0x2c23cb(0x216)]},'cha':{'value':this['_state']['cha']+this[_0x2c23cb(0x14e)]['chaBonus']}}}};}[_0x57d078(0xce)](){const _0x214872=_0x57d078;if(this['_state'][_0x214872(0x11f)]!==_0x214872(0x1d9))return null;return this[_0x214872(0x14e)]['featData'];}[_0x57d078(0x113)](){const _0x14be26=_0x57d078;return{'mode':_0x14be26(0x1dd),'str':0x0,'dex':0x0,'con':0x0,'int':0x0,'wis':0x0,'cha':0x0,'strBonus':0x0,'dexBonus':0x0,'conBonus':0x0,'intBonus':0x0,'wisBonus':0x0,'chaBonus':0x0,'featData':null};}};export{ImportListClass};