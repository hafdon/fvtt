'use strict';const _0x2771=['PG_SPELLS','5etools','_$iptSearch','_render_ability','_foundryHpIncreaseMode','cls','includes','\x20too?','feat','hpIncreaseMode','157wzooey','CASTER_TYPE_TO_PROGRESSION','Select\x20Existing\x20Feature\x20to\x20Import\x20','int','pMutActorUpdateClassSubclassFeatureItem','_pUserInput','You\x20can\x27t\x20increase\x20an\x20ability\x20score\x20above\x2020\x20using\x20this\x20feature.','mode','_pImportEntry_pDoUpdateCharacter_pPopulateEquipment','strBonus','pSerialAwaitMap','isDataEntered','classList','activateSidebarTab','game','_$cbAll','MODE_PRIMARY','list-multi-selected','412239TjqCLc','isImportDescription','_comp','removeHook','thief','pGetClassItem','322397LaVCYP','Import\x20Lower\x20Levels?','notifications','SOURCE_TYP_OFFICIAL_ALL','pPostLoad','_gameProp','isStreamerMode','_activateListeners_initRunButton','flat','feats-classAbilityScoreIncrease','_$btnReset','actorUpdate','_importOpts','pGetUserInput','$row','_addHookBase','DataSourceFile','text','thieves\x27\x20tools','hvy','section','class_subclass','isToken','Upload\x20File','languageProficiencies','log','spellLevelHigh','forEach','getFeaturesGroupedByOptionsSet','pGetHomebrewSources','MODE_TAKE_AVERAGE','sheet','_titleButtonRun','isCancelled','curLevel','addEventListener','floor','SOURCE_TYP_CUSTOM','name','multiclassing','cha','numLevelsPrev','value','SOURCE_TYP_BREW','create','MODULE_NAME','\x22\x20(from\x20\x22','addToFilters','363926pfyFrw','absorbFnBindListeners','5etools-classes','filterBox','disg','_pImportEntry_pDoUpdateCharacter_pPopulateMulticlassProficiencies','level','Feat','Unhandled\x20HP\x20increase\x20mode\x20\x22','classSource','toUpperCase','Import\x20Level\x20','getTotalClassLevels','faces','_state','forgery\x20kit','vehicle','pImportClass','featData','description','reduce','spellcastingAbility','MODE_DO_NOT_INCREASE','number','spellcasting','wis','_pImportEntry_getApproxPreviousMaxLevel','link','getSourceWithPagePart','DataSourceUrl','languages','type','_getExistingClassItems','proficiency','_pImportEntry_pFillItemArrayAdditionalSpells','Select\x20Existing\x20Feature...','then','_$btnRun','toolProf','update','pImportEquipmentItemEntries','bind','entity','poisoner\x27s\x20kit','_pImportEntry_pFinalise','simple','classFeature','light','/media/icon/laurels.svg','_content','pGetAllSpells','Import\x20Class\x20and\x20Subclass','AbilityScoreIncrease','armor','_handleFilterChange','min','split','887cVXGXt','TASK_EXIT_CANCELLED','sourceJsonToColor','Bonus','dataType','trimObject','_pImportEntry_pDoUpdateCharacter','Configure\x20and\x20Open\x20List','getCasterProgression','1dBQzbT','_$wrpMiniPills','<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>Feat</button>','importClass','dex','<hr\x20class=\x22hr-1\x22>\x0a\x09\x09\x09\x09\x09\x09','_pack','_$wrpList','lgt','tglSel','folder','toggleVe','additionalSpells','page','Open\x20List','$iptBonus','updateEmbeddedEntity','MODE_NONE','tools','ability','preCreateOwnedItem','spellHashToItemIdMap','\x20+\x20','URL_TO_HASH_BUILDER','<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>Ability\x20Score\x20Improvement</button>','shields','currency','Imported\x20\x22','subclasses','_pGetSelectedLevelIndices','spacer','initBtnSortHandlers','<div\x20class=\x22col-2\x20text-center\x22></div>','ixSub','subRows','spell','shl','148179xAZdyx','isStrictMatching','empty','sim','_pHandleAbilityScoreIncrease','wisBonus','_pImportEntry_pDoUpdateExistingDirectoryEntity','_pImportEntry_pGetFolderId','sourceLong','insert','subclassName','remarkableAthlete','_pImportClass_pGetHpImportMode','getOrSet','getValues','pGetClassSubclassFeatureItem','_$bntFilter','length','sourceJsonToFull','constructor','isRadio','some','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','_pImportEntry_pGetCurLevelFillClassData','startingProficiencies','_pImportEntry_pFillItemArrayFeatures','DND5E','sort','sourceClassName','_id','hover','pGetSpellItem','_pImportSubclass_pImportToActor','<button\x20class=\x22btn\x20btn-primary\x20mr-2\x22>Confirm</button>','toLowerCase','getDataHitDice','navg','_pImportEntry_pFillItemArrayPredefinedFeatures','fnGetData','modules/','pApplyFormDataToActor','MODE_ROLL','pois','getCleanEntityName','mar','\x20via\x20Class\x20Importer','pAddActorItems','max','setFirstSection','postItemActorUpdate','data','full','getAllFeatures','doAbsorbItems','html','dnd5e','<button\x20class=\x22btn\x20btn-primary\x20btn-5et\x22>Confirm</button>','map','targetLevel','remove','martial','ele','194223zvnwlE','PG_FEATS','_pImportSubclass_pImportToItems','You\x20have\x20selected\x20a\x20single\x20level\x20to\x20import\x20(level\x20','activateListeners','addHook','isHpAvailable','\x20SOURCE\x20','items','chosenProficiencies','content','checked','prop','_pGetUserClassItem','getNameWithSourcePart','TASK_EXIT_COMPLETE','pFillActorSkillData','_getDefaultState','MODULE_NAME_FAKE','art','_cntStartingSkillChoicesMutliclass','join','_pageFilter','toTitleCase','musical\x20instrument','startingEquipment','TASK_EXIT_SKIPPED_DUPLICATE','pCacheAndGet','close','hash','attributes','Please\x20enter\x20a\x20combination\x20of\x20ability\x20score\x20changes\x20which\x20adds\x20up\x20to\x20two!','_resolve','STR_SEE_CONSOLE','casterProgression','$getIptNumber','proficient','keys','proficiencyImportMode','active','isClassImport','isIncludesLevelOne','$getHoverContent_stats','filter','render','subclass','find','_titleSearch','MODE_MULTICLASS','pGetCompendiumImage','custom','Import\x20Classes','pGetOptionalFeatureItem','gaming\x20set','classSourceLong','init','toggleClass','_pImportClass_pImportToItems','spells','set','Unknown\x20proficiency\x20import\x20mode\x20\x22',').\x20Would\x20you\x20like\x20to\x20import\x20level','_foundryAllFeatures','str','isOverwrite','filterValues','abilities','fluff','withUnpatchedDiceRendering','_pImportEntry_pDoUpdateCharacter_pPopulateProficienciesFrom','_foundryStartingProficiencyMode','catch','itemsToUpdate','pact','herb','_foundryIsSkipImportPreparedSpells','preparedSpells','Please\x20select\x20a\x20feat!','Champion','navigator\x27s\x20tools','_actor','form-control--error','copy','_fnClose','click','source','push','toDisplay','ascSortLower','_pImportClass_pGetProficiencyImportMode','Component','pGetUserBoolean','pImportSubclass','_$btnToggleSummary','_pImportEntry_pHandleFeatures','importEntity','Please\x20select\x20something\x20to\x20import!','subclassFeatures','_activateListeners_pInitFilteredList','vehicles\x20(land\x20or\x20water)','21927NIizsL','warn','info','traits','UserChoose','<button\x20class=\x22btn\x20btn-default\x20btn-5et\x20w-100\x20mr-2\x22>Choose\x20Feat</button>','_render_feat','get','\x20Levels\x20To','sortName',')?</p>','SRD','_pAddLoadedFeature','ImportEntryOpts','dexBonus','_pImportEntry_pDoUpdateCharacter_pPopulateLevelOneProficienciesAndEquipment','(Unnamed\x20class)','_pImportEntry_setActorFlags','_getFeatData','veapp__msg-error','Remaining:\x20','<button\x20class=\x22btn\x20btn-default\x20mr-3\x22>Skip</button>','<div\x20class=\x22flex-col\x20w-100\x20h-100\x22></div>','pGetSources','_cachedData','_list','MODULE_LOCATION','Yes','_getDuplicateMeta','class','Ability\x20Score\x20Improvementâ€”Level\x20','artisan\x27s\x20tools','assign','getMaxWindowHeight','flags','pGetUserChoice','_isDataEntered','con','Importing\x20class\x20\x22','_getActorUpdate','trim','/template/ImportListClass.handlebars','absorbFnGetData','doHookSpellLinkRender','Bard','_getFilterNamespace','Import\x20Only\x20Subclass','Rogue','classFeatures','pFillActorLanguageData','_pImportClass_pImportToActor','_pImportPreparedCasterSpells','LEVEL_XP_REQUIRED','chaBonus','numLevels','pct','_pImportEntry_pDoUpdateExistingPackEntity','toMessage','_pDoResolve','medium','_ancestorClassName','Task','entries','getAbilityModifier','proficienciesGained','isSkip','SYM_UI_SKIP','firstElementChild','spellLevelLow','add','doApplyFilterToFeatureEntries','DataSourceSpecial','roll','pWaitForUserInput','details','getAbilityModNumber','_ancestorType','formDataEquipment','skills','values','last','OwnedItem','sourceJsonToAbv','heavy','contains','You\x20have\x20selected\x20a\x20subclass\x20to\x20import,\x20but\x20have\x20no\x20class\x20levels.\x20Would\x20you\x20like\x20to\x20import\x20the\x20class\x20too?','getFilteredFeatures','className','levels'];const _0xd38d=function(_0x398185,_0x5c6cda){_0x398185=_0x398185-0x1de;let _0x2771fd=_0x2771[_0x398185];return _0x2771fd;};const _0xd44325=_0xd38d;(function(_0x485dce,_0x3b97a8){const _0x80fa6b=_0xd38d;while(!![]){try{const _0x5236a9=parseInt(_0x80fa6b(0x253))+-parseInt(_0x80fa6b(0x2f8))+-parseInt(_0x80fa6b(0x295))*-parseInt(_0x80fa6b(0x223))+parseInt(_0x80fa6b(0x2ba))+parseInt(_0x80fa6b(0x35c))+-parseInt(_0x80fa6b(0x20b))*-parseInt(_0x80fa6b(0x28c))+-parseInt(_0x80fa6b(0x21d));if(_0x5236a9===_0x3b97a8)break;else _0x485dce['push'](_0x485dce['shift']());}catch(_0x24b38a){_0x485dce['push'](_0x485dce['shift']());}}}(_0x2771,0x5f06a));import{ImportList,MixinUserChooseImporter}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT,Util}from'./Util.js';import{DataConverter}from'./DataConverter.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterClass}from'./DataConverterClass.js';import{UtilActors}from'./UtilActors.js';import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterOptionalfeature}from'./DataConverterOptionalfeature.js';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_HpIncreaseModeSelect,Charactermancer_Class_LevelSelect,Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';class ImportListClass extends ImportListCharacter{static['init'](){const _0x5af635=_0xd38d;Hooks['on'](_0x5af635(0x2a9),(_0x27385f,_0x59ac47)=>{const _0x4f64fb=_0x5af635,_0xf2dc57=_0x59ac47['flags']?.[SharedConsts[_0x4f64fb(0x250)]];if(!_0xf2dc57||!_0xf2dc57?.[_0x4f64fb(0x2ec)]?.[_0x4f64fb(0x379)])return;const _0x439d48=_0xf2dc57[_0x4f64fb(0x2ec)][_0x4f64fb(0x379)],_0x301e40=_0xf2dc57[_0x4f64fb(0x2ec)][_0x4f64fb(0x325)];return(async()=>{const _0x31018d=_0x4f64fb,_0x408de5=new ImportListClass({'actor':_0x27385f});await _0x408de5['pInit'](),_0x301e40?await _0x408de5['pImportSubclass'](_0x439d48,_0x301e40,{'filterValues':_0xf2dc57[_0x31018d(0x339)]}):await _0x408de5[_0x31018d(0x264)](_0x439d48,{'filterValues':_0xf2dc57['filterValues']});})()[_0x4f64fb(0x277)](()=>ui['notifications'][_0x4f64fb(0x35e)](_0x4f64fb(0x2b0)+_0x439d48[_0x4f64fb(0x249)]+'\x22'+(_0x301e40?'\x20('+_0x301e40[_0x4f64fb(0x249)]+')':'')+_0x4f64fb(0x2e7)))[_0x4f64fb(0x33f)](_0x4796f6=>{const _0x4147ff=_0x4f64fb;ui[_0x4147ff(0x225)]['error']('Failed\x20to\x20import\x20\x22'+_0x439d48[_0x4147ff(0x249)]+'\x22'+(_0x301e40?'\x20('+_0x301e40['name']+')':'')+'!\x20'+VeCt[_0x4147ff(0x319)]);throw _0x4796f6;}),![];});}constructor(_0x7dab6){const _0x19999c=_0xd38d;_0x7dab6=_0x7dab6||{},super({'title':_0x19999c(0x32b),'template':SharedConsts[_0x19999c(0x376)]+_0x19999c(0x385),'height':Util[_0x19999c(0x37d)](),'resizable':!![]},_0x7dab6,{'namespace':_0x19999c(0x238),'defaultFolderPath':['Classes'],'folderType':'Item','sidebarTab':'items','gameProp':_0x19999c(0x300),'pageFilter':new PageFilterClassesFoundry(),'isDedupable':!![]}),this['_cachedData']=null;}set[_0xd44325(0x302)](_0x4e03d8){const _0x2163ee=_0xd44325;super[_0x2163ee(0x302)]=_0x4e03d8,this[_0x2163ee(0x374)]=null;}async[_0xd44325(0x373)](){const _0xec34b2=_0xd44325;return[new ImportList[(_0xec34b2(0x1ef))](Config[_0xec34b2(0x363)]('ui',_0xec34b2(0x229))?_0xec34b2(0x367):_0xec34b2(0x202),Vetools['pGetClasses'],{'cacheKey':_0xec34b2(0x255),'pPostLoad':PageFilterClassesFoundry[_0xec34b2(0x227)][_0xec34b2(0x27c)](PageFilterClassesFoundry),'filterTypes':[ImportList[_0xec34b2(0x226)]],'isDefault':!![]}),new ImportList['DataSourceUrl']('Custom\x20URL','',{'pPostLoad':PageFilterClassesFoundry['pPostLoad'][_0xec34b2(0x27c)](PageFilterClassesFoundry),'filterTypes':[ImportList[_0xec34b2(0x248)]]}),new ImportList[(_0xec34b2(0x233))](_0xec34b2(0x23a),{'pPostLoad':PageFilterClassesFoundry['pPostLoad']['bind'](PageFilterClassesFoundry),'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...(await Vetools[_0xec34b2(0x240)](_0xec34b2(0x379),_0xec34b2(0x325)))['map'](({name:_0x5365cc,url:_0x5dfb40})=>new ImportList[(_0xec34b2(0x270))](_0x5365cc,_0x5dfb40,{'pPostLoad':PageFilterClassesFoundry[_0xec34b2(0x227)][_0xec34b2(0x27c)](PageFilterClassesFoundry),'filterTypes':[ImportList[_0xec34b2(0x24e)]]}))];}['getData'](){const _0x40a868=_0xd44325;if(this[_0x40a868(0x374)]&&this[_0x40a868(0x374)][_0x40a868(0x2ce)]!==!!this[_0x40a868(0x348)])this[_0x40a868(0x374)]=null;this['_cachedData']=this[_0x40a868(0x374)]||{'titleButtonRun':this[_0x40a868(0x243)],'titleSearch':this[_0x40a868(0x327)],'rows':this[_0x40a868(0x284)][_0x40a868(0x2d5)]((_0x37034d,_0x59a170)=>SortUtil[_0x40a868(0x350)](_0x37034d[_0x40a868(0x249)],_0x59a170['name'])||SortUtil['ascSortLower'](Parser[_0x40a868(0x2cc)](_0x37034d[_0x40a868(0x34d)]||SRC_PHB),Parser[_0x40a868(0x2cc)](_0x59a170[_0x40a868(0x34d)]||SRC_PHB)))['map']((_0xe577d5,_0x55eaed)=>{const _0x1fc3f9=_0x40a868;return this[_0x1fc3f9(0x30e)][_0x1fc3f9(0x2cd)]['mutateForFilters'](_0xe577d5),{'name':_0xe577d5[_0x1fc3f9(0x249)],'source':_0xe577d5[_0x1fc3f9(0x34d)],'sourceShort':Parser[_0x1fc3f9(0x1fa)](_0xe577d5[_0x1fc3f9(0x34d)]),'sourceLong':Parser[_0x1fc3f9(0x2cc)](_0xe577d5[_0x1fc3f9(0x34d)]),'sourceClassName':Parser[_0x1fc3f9(0x28e)](_0xe577d5['source']),'ix':_0x55eaed,'disabled':!_0xe577d5[_0x1fc3f9(0x38c)],'subRows':(_0xe577d5[_0x1fc3f9(0x2b1)]||[])[_0x1fc3f9(0x2f3)]((_0x68f7b,_0x1ba52e)=>({'name':_0x68f7b[_0x1fc3f9(0x249)],'source':_0x68f7b['source']||_0xe577d5[_0x1fc3f9(0x34d)],'sourceShort':Parser[_0x1fc3f9(0x1fa)](_0x68f7b[_0x1fc3f9(0x34d)]||_0xe577d5[_0x1fc3f9(0x34d)]),'sourceLong':Parser[_0x1fc3f9(0x2cc)](_0x68f7b[_0x1fc3f9(0x34d)]||_0xe577d5['source']),'sourceClassName':Parser[_0x1fc3f9(0x28e)](_0x68f7b[_0x1fc3f9(0x34d)]||_0xe577d5[_0x1fc3f9(0x34d)]),'ixSub':_0x1ba52e}))};})};if(this[_0x40a868(0x348)])this['_cachedData'][_0x40a868(0x2ce)]=!![];return this[_0x40a868(0x374)];}[_0xd44325(0x22a)](){const _0x3d8a62=_0xd44325;this[_0x3d8a62(0x278)][_0x3d8a62(0x34c)](async()=>{const _0x320b5c=_0x3d8a62;if(!this[_0x320b5c(0x375)])return;const _0x324826=this[_0x320b5c(0x348)]?this[_0x320b5c(0x375)][_0x320b5c(0x300)][_0x320b5c(0x323)](_0x4391b8=>_0x4391b8[_0x320b5c(0x2ec)][_0x320b5c(0x29e)]&&_0x4391b8[_0x320b5c(0x2ec)][_0x320b5c(0x29e)][_0x320b5c(0x217)][_0x320b5c(0x1fc)](_0x320b5c(0x31f)))[_0x320b5c(0x2f3)](_0x45a779=>({'ix':_0x45a779[_0x320b5c(0x1f7)]['ix'],'ixSub':_0x45a779[_0x320b5c(0x1f7)][_0x320b5c(0x2b6)]})):this[_0x320b5c(0x375)][_0x320b5c(0x300)]['filter'](_0xe6ba50=>_0xe6ba50[_0x320b5c(0x2ec)]['cbSel'][_0x320b5c(0x303)])[_0x320b5c(0x2f3)](_0x28dd82=>({'ix':_0x28dd82[_0x320b5c(0x1f7)]['ix'],'ixSub':_0x28dd82[_0x320b5c(0x1f7)]['ixSub']}));if(!_0x324826[_0x320b5c(0x2cb)])return ui[_0x320b5c(0x225)][_0x320b5c(0x35d)](_0x320b5c(0x358));this[_0x320b5c(0x314)](),this[_0x320b5c(0x218)]();const _0xe6885e=_0x324826['map'](({ix:_0x43d60b,ixSub:_0x29e41d})=>{const _0x46e2ac=_0x320b5c,_0x1bcf66=MiscUtil['copy'](this[_0x46e2ac(0x284)][_0x43d60b]);return{'ix':_0x43d60b,'cls':_0x1bcf66,'ixSub':_0x29e41d,'sc':_0x29e41d!=null?_0x1bcf66[_0x46e2ac(0x2b1)][_0x29e41d]:null};});_0xe6885e[_0x320b5c(0x323)](_0x14e179=>!_0x14e179['sc'])[_0x320b5c(0x23e)](_0x5ba1e6=>_0x5ba1e6[_0x320b5c(0x206)][_0x320b5c(0x2b1)]=[]),_0xe6885e[_0x320b5c(0x2d5)]((_0xe37cae,_0x1b963a)=>!!_0xe37cae['sc']-!!_0x1b963a['sc']);const _0x3fb68a=[],_0x4574ae=[];_0xe6885e[_0x320b5c(0x23e)](_0x28ccd9=>{const _0x2bdf1b=_0x320b5c;if(_0x28ccd9['sc']){const _0x8154ff=_0x3fb68a[_0x2bdf1b(0x326)](_0x1a54d2=>_0x1a54d2['name'][_0x2bdf1b(0x2dc)]()===_0x28ccd9['sc'][_0x2bdf1b(0x1ff)][_0x2bdf1b(0x2dc)]()&&_0x1a54d2[_0x2bdf1b(0x34d)][_0x2bdf1b(0x2dc)]()===_0x28ccd9['sc'][_0x2bdf1b(0x25c)][_0x2bdf1b(0x2dc)]());if(_0x8154ff)_0x8154ff['subclasses'][_0x2bdf1b(0x34e)](_0x28ccd9['sc']);else _0x4574ae[_0x2bdf1b(0x34e)]({'cls':_0x28ccd9[_0x2bdf1b(0x206)],'sc':_0x28ccd9['sc']});}else _0x3fb68a['push'](_0x28ccd9['cls']);});const _0x575f83=[..._0x3fb68a[_0x320b5c(0x2f3)](_0x3c5d40=>{const _0x2dd6d7=_0x320b5c;return new Util[(_0x2dd6d7(0x1e5))](_0x3c5d40[_0x2dd6d7(0x249)]+'\x20('+Parser[_0x2dd6d7(0x1fa)](_0x3c5d40[_0x2dd6d7(0x34d)])+')',()=>this[_0x2dd6d7(0x264)](_0x3c5d40));}),..._0x4574ae[_0x320b5c(0x2f3)](({cls:_0x226494,sc:_0x2b1abc})=>{const _0x80e68a=_0x320b5c;return new Util[(_0x80e68a(0x1e5))](_0x2b1abc['name']+'\x20('+Parser[_0x80e68a(0x1fa)](_0x2b1abc['source'])+')',()=>this[_0x80e68a(0x354)](_0x226494,_0x2b1abc));})];await UtilApplications['pRunTasks'](_0x575f83);if(!this['_actor'])game[this[_0x320b5c(0x228)]][_0x320b5c(0x324)]();this[_0x320b5c(0x21a)][_0x320b5c(0x304)]('checked',![])['change']();});}[_0xd44325(0x35a)](){const _0x3ec783=_0xd44325;this[_0x3ec783(0x375)]=new List({'$iptSearch':this[_0x3ec783(0x203)],'$wrpList':this[_0x3ec783(0x29c)],'fnSort':(_0x121249,_0xa94172,_0x1e8e72)=>{const _0x2141f0=_0x3ec783;if(_0x1e8e72['sortDir']==='desc'&&_0x121249[_0x2141f0(0x1f7)]['ix']===_0xa94172[_0x2141f0(0x1f7)]['ix']&&(_0x121249[_0x2141f0(0x1f7)][_0x2141f0(0x2b6)]!=null||_0xa94172[_0x2141f0(0x1f7)][_0x2141f0(0x2b6)]!=null))return _0x121249[_0x2141f0(0x1f7)][_0x2141f0(0x2b6)]!=null?-0x1:0x1;return SortUtil['ascSortLower'](_0x121249['values'][_0x2141f0(0x365)],_0xa94172[_0x2141f0(0x1f7)][_0x2141f0(0x365)]);}}),SortUtil[_0x3ec783(0x2b4)](this['_$wrpBtnsSort'],this['_list']);const _0x454e23=this[_0x3ec783(0x374)]['rows']['map'](_0x1407ba=>{const _0x559053=_0x3ec783,_0x2b505c={..._0x1407ba};delete _0x2b505c[_0x559053(0x2b7)];const _0x53c757=_0x1407ba['subRows'][_0x559053(0x2f3)](_0x335532=>({..._0x335532,'ix':_0x1407ba['ix'],'className':_0x1407ba[_0x559053(0x249)],'classSourceLong':_0x1407ba['sourceLong'],'classSourceClassName':_0x1407ba[_0x559053(0x2d6)]}));return[_0x2b505c,..._0x53c757];})[_0x3ec783(0x22b)]();return this['_pageFilter']['pInitFilterBox']({'$iptSearch':this[_0x3ec783(0x203)],'$btnReset':this[_0x3ec783(0x22d)],'$btnOpen':this[_0x3ec783(0x2ca)],'$btnToggleSummaryHidden':this[_0x3ec783(0x355)],'$wrpMiniPills':this[_0x3ec783(0x296)],'namespace':this[_0x3ec783(0x389)]()})[_0x3ec783(0x277)](()=>{const _0x2a2e59=_0x3ec783;this['_content'][_0x2a2e59(0x23e)](_0x136800=>this[_0x2a2e59(0x30e)][_0x2a2e59(0x252)](_0x136800));const _0x4fbbb6={'fnGetName':_0x2b6c42=>_0x2b6c42[_0x2a2e59(0x249)],'fnGetValues':_0x1ab787=>{const _0x118438=_0x2a2e59;return _0x1ab787[_0x118438(0x2b6)]!=null?{'ix':_0x1ab787['ix'],'ixSub':_0x1ab787[_0x118438(0x2b6)],'sortName':_0x1ab787['className']+_0x118438(0x2ff)+_0x1ab787[_0x118438(0x32e)]+'\x20SUBCLASS\x20'+_0x1ab787['name']+_0x118438(0x2ff)+_0x1ab787[_0x118438(0x2c2)],'source':_0x1ab787['source']}:{'ix':_0x1ab787['ix'],'sortName':_0x1ab787['name']+'\x20SOURCE\x20'+_0x1ab787['sourceLong']};}};this['_actor']?(_0x4fbbb6[_0x2a2e59(0x2e0)]=_0x1baf18=>({'tglSel':_0x1baf18[_0x2a2e59(0x2f7)][_0x2a2e59(0x1eb)]['firstElementChild']}),_0x4fbbb6['fnBindListeners']=_0x5a45c9=>{const _0x44afa1=_0x2a2e59;_0x5a45c9[_0x44afa1(0x2f7)][_0x44afa1(0x246)](_0x44afa1(0x34c),()=>{const _0x50faba=_0x44afa1,_0x3ea698=_0x5a45c9[_0x50faba(0x1f7)]['ixSub']!=null,_0x5ab198=_0x3ea698?this['_list'][_0x50faba(0x300)]['find'](_0x4cc71b=>_0x4cc71b[_0x50faba(0x1f7)]['ix']===_0x5a45c9[_0x50faba(0x1f7)]['ix']&&_0x4cc71b[_0x50faba(0x1f7)][_0x50faba(0x2b6)]==null):null,_0x51a14a=this['_list'][_0x50faba(0x300)][_0x50faba(0x323)](_0x209861=>_0x209861[_0x50faba(0x2ec)][_0x50faba(0x29e)]['classList'][_0x50faba(0x1fc)](_0x50faba(0x31f)));if(!_0x51a14a[_0x50faba(0x2cb)]){_0x5a45c9[_0x50faba(0x2ec)][_0x50faba(0x29e)][_0x50faba(0x217)]['add'](_0x50faba(0x31f)),_0x5a45c9[_0x50faba(0x2f7)][_0x50faba(0x217)][_0x50faba(0x1ed)](_0x50faba(0x21c));_0x3ea698&&(_0x5ab198[_0x50faba(0x2ec)][_0x50faba(0x29e)]['classList']['add'](_0x50faba(0x31f)),_0x5ab198['ele']['classList']['add']('list-multi-selected'));return;}if(_0x5a45c9[_0x50faba(0x2ec)][_0x50faba(0x29e)][_0x50faba(0x217)][_0x50faba(0x1fc)](_0x50faba(0x31f))){_0x5a45c9['data'][_0x50faba(0x29e)][_0x50faba(0x217)][_0x50faba(0x2f5)](_0x50faba(0x31f)),_0x5a45c9[_0x50faba(0x2f7)][_0x50faba(0x217)][_0x50faba(0x2f5)](_0x50faba(0x21c));_0x3ea698?(_0x5ab198[_0x50faba(0x2ec)][_0x50faba(0x29e)]['classList'][_0x50faba(0x2f5)]('active'),_0x5ab198['ele'][_0x50faba(0x217)][_0x50faba(0x2f5)](_0x50faba(0x21c))):_0x51a14a[_0x50faba(0x23e)](_0x346144=>{const _0x289811=_0x50faba;_0x346144[_0x289811(0x2ec)][_0x289811(0x29e)][_0x289811(0x217)][_0x289811(0x2f5)]('active'),_0x346144[_0x289811(0x2f7)][_0x289811(0x217)][_0x289811(0x2f5)](_0x289811(0x21c));});return;}_0x51a14a[_0x50faba(0x23e)](_0x5a23e6=>{const _0x592a48=_0x50faba;_0x5a23e6[_0x592a48(0x2ec)]['tglSel'][_0x592a48(0x217)][_0x592a48(0x2f5)](_0x592a48(0x31f)),_0x5a23e6[_0x592a48(0x2f7)][_0x592a48(0x217)]['remove'](_0x592a48(0x21c));}),_0x5a45c9[_0x50faba(0x2ec)]['tglSel'][_0x50faba(0x217)]['add'](_0x50faba(0x31f)),_0x5a45c9[_0x50faba(0x2f7)][_0x50faba(0x217)][_0x50faba(0x1ed)](_0x50faba(0x21c)),_0x3ea698&&(_0x5ab198[_0x50faba(0x2ec)][_0x50faba(0x29e)][_0x50faba(0x217)][_0x50faba(0x1ed)](_0x50faba(0x31f)),_0x5ab198['ele'][_0x50faba(0x217)][_0x50faba(0x1ed)]('list-multi-selected'));});}):(_0x4fbbb6['fnGetData']=UtilList2[_0x2a2e59(0x386)],_0x4fbbb6['fnBindListeners']=_0x5b9bfb=>UtilList2[_0x2a2e59(0x254)](this[_0x2a2e59(0x375)],_0x5b9bfb)),this[_0x2a2e59(0x375)][_0x2a2e59(0x2ef)](_0x454e23,_0x4fbbb6),this[_0x2a2e59(0x375)][_0x2a2e59(0x32f)](),this['_pageFilter']['filterBox'][_0x2a2e59(0x324)](),this[_0x2a2e59(0x30e)][_0x2a2e59(0x256)]['on'](FilterBox['EVNT_VALCHANGE'],this[_0x2a2e59(0x289)][_0x2a2e59(0x27c)](this)),this[_0x2a2e59(0x289)]();});}[_0xd44325(0x289)](){const _0x25983b=_0xd44325,_0x115226=this[_0x25983b(0x30e)][_0x25983b(0x256)][_0x25983b(0x2c8)]();this[_0x25983b(0x375)][_0x25983b(0x323)](_0x39e219=>{const _0x52f7c1=_0x25983b,_0xd50f89=this[_0x52f7c1(0x284)][_0x39e219['values']['ix']];if(_0x39e219[_0x52f7c1(0x1f7)]['ixSub']!=null){const _0x1cf822=_0xd50f89[_0x52f7c1(0x2b1)][_0x39e219[_0x52f7c1(0x1f7)]['ixSub']];return this[_0x52f7c1(0x30e)][_0x52f7c1(0x34f)](_0x115226,_0xd50f89)&&this[_0x52f7c1(0x30e)][_0x52f7c1(0x256)][_0x52f7c1(0x34f)](_0x115226,_0x1cf822[_0x52f7c1(0x34d)],_0x1cf822['_fMisc']);}else return this[_0x52f7c1(0x30e)]['toDisplay'](_0x115226,_0xd50f89);});}async[_0xd44325(0x264)](_0x21b96,_0x4feae0){const _0xab9385=_0xd44325;_0x4feae0=_0x4feae0||{},console[_0xab9385(0x23c)](...LGT,_0xab9385(0x382)+_0x21b96[_0xab9385(0x249)]+_0xab9385(0x251)+Parser[_0xab9385(0x1fa)](_0x21b96[_0xab9385(0x34d)])+'\x22)');if(_0x4feae0['isTemp'])return this[_0xab9385(0x331)](_0x21b96,_0x4feae0);else{if(this['_actor'])return this[_0xab9385(0x38e)](_0x21b96,_0x4feae0);else return this[_0xab9385(0x331)](_0x21b96,_0x4feae0);}}async['_pImportClass_pImportToActor'](_0x31b674,_0x6f3c2f){const _0x2aa6bc=_0xd44325;MiscUtil[_0x2aa6bc(0x2c7)](CONFIG[_0x2aa6bc(0x2d4)],'classFeatures',_0x31b674[_0x2aa6bc(0x249)][_0x2aa6bc(0x2dc)]()[_0x2aa6bc(0x384)](),{'features':{},'subclasses':{}});const _0x559314=new ImportListClass[(_0x2aa6bc(0x369))]({'isClassImport':!![]});let _0x3a7680;!_0x31b674[_0x2aa6bc(0x336)]&&(_0x3a7680=Charactermancer_Class_Util[_0x2aa6bc(0x2ee)](_0x31b674),_0x3a7680=Charactermancer_Class_Util[_0x2aa6bc(0x1fe)](_0x3a7680,this[_0x2aa6bc(0x30e)],_0x6f3c2f[_0x2aa6bc(0x339)]||this['_pageFilter']['filterBox'][_0x2aa6bc(0x2c8)]()));const _0x561c84=await this[_0x2aa6bc(0x2b2)](_0x31b674,_0x3a7680,_0x559314,!![]);if(_0x559314[_0x2aa6bc(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this['_pValidateUserLevelIndices'](_0x561c84,_0x559314);if(_0x559314[_0x2aa6bc(0x244)])return{'status':UtilApplications[_0x2aa6bc(0x28d)]};_0x559314[_0x2aa6bc(0x2f4)]=Math[_0x2aa6bc(0x2e9)](..._0x561c84)+0x1,_0x559314[_0x2aa6bc(0x1de)]=_0x559314[_0x2aa6bc(0x2f4)]-Math[_0x2aa6bc(0x28a)](..._0x561c84),_0x559314[_0x2aa6bc(0x24c)]=UtilActors[_0x2aa6bc(0x25f)](this[_0x2aa6bc(0x348)]),_0x559314[_0x2aa6bc(0x321)]=_0x561c84[_0x2aa6bc(0x207)](0x0),_0x559314[_0x2aa6bc(0x268)]=_0x31b674[_0x2aa6bc(0x268)],_0x559314[_0x2aa6bc(0x31e)]=await this['_pImportClass_pGetProficiencyImportMode'](_0x31b674,_0x559314);if(_0x559314['isCancelled'])return{'status':UtilApplications[_0x2aa6bc(0x28d)]};_0x559314[_0x2aa6bc(0x20a)]=await this[_0x2aa6bc(0x2c6)](_0x31b674,_0x559314);if(_0x559314['isCancelled'])return{'status':UtilApplications[_0x2aa6bc(0x28d)]};const _0x2423b8=_0x31b674['subclasses']?_0x31b674[_0x2aa6bc(0x2b1)][0x0]:null,_0x52998=(_0x31b674['subclasses']||[])[_0x2aa6bc(0x323)](_0x195c84=>_0x195c84[_0x2aa6bc(0x268)]||_0x195c84[_0x2aa6bc(0x31a)]),_0x982a09=_0x52998[0x0]||_0x2423b8,_0x1c939c={'data':{}},_0x423ffe=await this[_0x2aa6bc(0x2d1)](_0x1c939c,_0x31b674,_0x982a09,_0x559314);if(_0x559314['isCancelled'])return{'status':UtilApplications[_0x2aa6bc(0x28d)]};const {curLevel:_0x4a00ce,existingClassItem:_0x3c1a1c}=_0x423ffe;this[_0x2aa6bc(0x36d)](_0x1c939c,_0x31b674,_0x31b674[_0x2aa6bc(0x2b1)],_0x4a00ce,_0x559314),await this['_pImportEntry_pDoUpdateCharacter'](_0x1c939c,_0x31b674,_0x982a09,_0x4a00ce,_0x3c1a1c,_0x559314);if(_0x559314[_0x2aa6bc(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};if(_0x31b674[_0x2aa6bc(0x344)])await this[_0x2aa6bc(0x38f)](_0x31b674,_0x4a00ce,_0x559314);await this[_0x2aa6bc(0x275)](_0x31b674,_0x31b674[_0x2aa6bc(0x2b1)],_0x4a00ce,_0x559314);if(_0x559314[_0x2aa6bc(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this[_0x2aa6bc(0x356)](_0x31b674,_0x3a7680,_0x561c84,_0x6f3c2f,_0x559314);if(_0x559314[_0x2aa6bc(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this[_0x2aa6bc(0x27f)](_0x559314);if(this[_0x2aa6bc(0x348)][_0x2aa6bc(0x239)])this['_actor'][_0x2aa6bc(0x242)][_0x2aa6bc(0x324)]();return{'status':UtilApplications[_0x2aa6bc(0x307)]};}async[_0xd44325(0x2b2)](_0xe21b4,_0x5b9215,_0x5543c6,_0x202ca4){const _0x1f0ea0=_0xd44325;if(_0xe21b4['_foundrySelectedLevelIndices'])return _0xe21b4['_foundrySelectedLevelIndices'];const _0xd95669=await Charactermancer_Class_LevelSelect['pGetUserInput']({'features':_0x5b9215,'isSubclass':_0x202ca4,'maxPreviousLevel':this[_0x1f0ea0(0x26d)](_0xe21b4)});if(_0xd95669==null)return _0x5543c6[_0x1f0ea0(0x244)]=!![];return _0xd95669[_0x1f0ea0(0x2ec)];}[_0xd44325(0x26d)](_0x2e3ffa){const _0x3c1542=_0xd44325,_0xbc64c8=this[_0x3c1542(0x273)](_0x2e3ffa);if(!_0xbc64c8[_0x3c1542(0x2cb)])return 0x0;return Math[_0x3c1542(0x2e9)](..._0xbc64c8['map'](_0x79d747=>MiscUtil[_0x3c1542(0x363)](_0x79d747,_0x3c1542(0x2ec),'levels')||0x0));}[_0xd44325(0x36d)](_0x2b4d70,_0x3d424c,_0x44afdc,_0x2b8cf2,_0x507f42){const _0x24e3fc=_0xd44325,_0x3de0a5={'dnd5e':{}};if(_0x507f42[_0x24e3fc(0x320)]&&_0x3d424c&&_0x3d424c[_0x24e3fc(0x249)]===_0x24e3fc(0x388)&&_0x3d424c[_0x24e3fc(0x34d)]===SRC_PHB&&_0x2b8cf2<0x2&&_0x507f42['targetLevel']>=0x2)_0x3de0a5[_0x24e3fc(0x2f1)]['jackOfAllTrades']=!![];if(_0x3d424c&&_0x3d424c[_0x24e3fc(0x249)]==='Fighter'&&_0x3d424c[_0x24e3fc(0x34d)]===SRC_PHB&&_0x44afdc[_0x24e3fc(0x2cf)](_0x3764a7=>_0x3764a7[_0x24e3fc(0x249)]===_0x24e3fc(0x346))&&_0x2b8cf2<0x7&&_0x507f42[_0x24e3fc(0x2f4)]>=0x7)_0x3de0a5[_0x24e3fc(0x2f1)][_0x24e3fc(0x2c5)]=!![];if(_0x3d424c&&_0x3d424c['name']===_0x24e3fc(0x38b)&&_0x3d424c['source']===SRC_PHB&&_0x2b8cf2<0xb&&_0x507f42['targetLevel']>=0xb)_0x3de0a5['dnd5e']['reliableTalent']=!![];if(_0x3d424c&&_0x3d424c[_0x24e3fc(0x249)]==='Monk'&&_0x3d424c[_0x24e3fc(0x34d)]===SRC_PHB&&_0x2b8cf2<0xe&&_0x507f42['targetLevel']>=0xe)_0x3de0a5[_0x24e3fc(0x2f1)]['diamondSoul']=!![];if(Object[_0x24e3fc(0x31d)](_0x3de0a5[_0x24e3fc(0x2f1)])[_0x24e3fc(0x2cb)])_0x2b4d70['flags']=_0x3de0a5;}async[_0xd44325(0x351)](_0x4efb2d,_0x196ee3){const _0x1ac9e9=_0xd44325,_0x44c9dc=MiscUtil[_0x1ac9e9(0x363)](this['_actor'],_0x1ac9e9(0x2ec),'items')||[],_0x1b3a3d=_0x44c9dc['filter'](_0x463573=>_0x463573[_0x1ac9e9(0x272)]==='class');if(!_0x196ee3[_0x1ac9e9(0x320)]||!_0x196ee3[_0x1ac9e9(0x321)]||!_0x1b3a3d[_0x1ac9e9(0x2cb)])return Charactermancer_Class_ProficiencyImportModeSelect[_0x1ac9e9(0x21b)];if(_0x4efb2d['_foundryStartingProficiencyMode']!=null)return _0x4efb2d[_0x1ac9e9(0x33e)];const _0x2326d1=await Charactermancer_Class_ProficiencyImportModeSelect[_0x1ac9e9(0x230)]();if(_0x2326d1==null)_0x196ee3['isCancelled']=!![];return _0x2326d1['data'];}async[_0xd44325(0x2c6)](_0x35e6ca,_0x2c34e2){const _0x35668c=_0xd44325;if(!Charactermancer_Class_HpIncreaseModeSelect[_0x35668c(0x2fe)](_0x35e6ca))return Charactermancer_Class_HpIncreaseModeSelect[_0x35668c(0x269)];if(_0x35e6ca[_0x35668c(0x205)]!=null)return _0x35e6ca[_0x35668c(0x205)];const _0x5601de=await Charactermancer_Class_HpIncreaseModeSelect['pGetUserInput']();if(_0x5601de==null)_0x2c34e2[_0x35668c(0x244)]=!![];if(_0x5601de===VeCt[_0x35668c(0x1ea)])return Charactermancer_Class_HpIncreaseModeSelect['MODE_DO_NOT_INCREASE'];return _0x5601de['data'];}async[_0xd44325(0x331)](_0x23a9b6,_0x3bfa96){const _0x4b373c=_0xd44325,_0x4e0972=this[_0x4b373c(0x378)]({'entity':_0x23a9b6});if(_0x4e0972['isSkip'])return UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE'];const _0x34440f=await DataConverterClass[_0x4b373c(0x222)](_0x23a9b6,{'isAddPermission':!![],'filterValues':this[_0x4b373c(0x30e)][_0x4b373c(0x256)][_0x4b373c(0x2c8)]()});if(_0x3bfa96['isTemp']){const _0x397347=await Item[_0x4b373c(0x24f)](_0x34440f,{'renderSheet':!![],'temporary':!![]}),_0x5bde99=await(_0x23a9b6['subclasses']||[])[_0x4b373c(0x215)](_0xde6f94=>this['_pImportSubclass_pImportToItems'](_0x23a9b6,_0xde6f94,_0x3bfa96));return{'imported':[_0x397347,..._0x5bde99],'status':UtilApplications[_0x4b373c(0x307)]};}else{if(this[_0x4b373c(0x29b)]){if(_0x4e0972['isOverwrite']){const _0x4a8b1d=await this[_0x4b373c(0x1e0)](_0x4e0972,_0x34440f),_0x505d1f=await(_0x23a9b6[_0x4b373c(0x2b1)]||[])['pSerialAwaitMap'](_0x5d8fc9=>this[_0x4b373c(0x2fa)](_0x23a9b6,_0x5d8fc9,_0x3bfa96));return{'imported':[_0x4a8b1d,..._0x505d1f],'status':UtilApplications[_0x4b373c(0x2d0)]};}const _0xd3945d=new Item(_0x34440f);await this[_0x4b373c(0x29b)][_0x4b373c(0x357)](_0xd3945d);const _0x3b9405=await(_0x23a9b6['subclasses']||[])[_0x4b373c(0x215)](_0x319ebd=>this[_0x4b373c(0x2fa)](_0x23a9b6,_0x319ebd,_0x3bfa96));return{'imported':[_0xd3945d,..._0x3b9405],'status':UtilApplications['TASK_EXIT_COMPLETE']};}else{if(_0x4e0972[_0x4b373c(0x338)]){const _0x5ed751=await this[_0x4b373c(0x2c0)](_0x4e0972,_0x34440f),_0x5da1b7=await(_0x23a9b6['subclasses']||[])[_0x4b373c(0x215)](_0x39b416=>this[_0x4b373c(0x2fa)](_0x23a9b6,_0x39b416,_0x3bfa96));return{'imported':[_0x5ed751,..._0x5da1b7],'status':UtilApplications[_0x4b373c(0x2d0)]};}const _0xdcfaac=await this['_pImportEntry_pGetFolderId'](_0x23a9b6);if(_0xdcfaac)_0x34440f[_0x4b373c(0x29f)]=_0xdcfaac;const _0x230754=await Item[_0x4b373c(0x24f)](_0x34440f,{'renderSheet':![],'temporary':![]});await game[_0x4b373c(0x300)]['insert'](_0x230754);const _0x54eced=await(_0x23a9b6['subclasses']||[])[_0x4b373c(0x215)](_0x3bce93=>this[_0x4b373c(0x2fa)](_0x23a9b6,_0x3bce93,_0x3bfa96,{'folderId':_0xdcfaac}));return{'imported':[_0x230754,..._0x54eced],'status':UtilApplications['TASK_EXIT_COMPLETE']};}}}async['pImportSubclass'](_0x38fd70,_0x130f14,_0x332d06){const _0x4825d5=_0xd44325;_0x332d06=_0x332d06||{},console['log'](...LGT,'Importing\x20subclass\x20\x22'+_0x130f14['name']+_0x4825d5(0x251)+Parser['sourceJsonToAbv'](_0x130f14[_0x4825d5(0x34d)])+'\x22)');if(_0x332d06['isTemp'])return this[_0x4825d5(0x2fa)](_0x38fd70,_0x130f14,_0x332d06);else{if(this[_0x4825d5(0x348)])return this[_0x4825d5(0x2da)](_0x38fd70,_0x130f14,_0x332d06);else return this[_0x4825d5(0x2fa)](_0x38fd70,_0x130f14,_0x332d06);}}async[_0xd44325(0x2da)](_0x3bdd58,_0xfaaef7,_0x4bee33){const _0x3c025e=_0xd44325,_0x12548a=new ImportListClass['ImportEntryOpts']({'isClassImport':![]}),_0x588177=(MiscUtil[_0x3c025e(0x363)](this['_actor'],_0x3c025e(0x2ec),_0x3c025e(0x300))||[])[_0x3c025e(0x323)](_0x32897c=>_0x32897c[_0x3c025e(0x272)]===_0x3c025e(0x379));if(!_0x588177['length']){const _0x532e47=await InputUiUtil['pGetUserBoolean']({'title':'Import\x20Class?','htmlDescription':_0x3c025e(0x1fd),'textYes':_0x3c025e(0x286),'textNo':_0x3c025e(0x38a)});if(_0x532e47==null)return _0x12548a[_0x3c025e(0x244)]=!![],{'status':UtilApplications[_0x3c025e(0x28d)]};if(_0x532e47===!![]){const _0x4c70da=MiscUtil[_0x3c025e(0x34a)](_0x3bdd58);return _0x4c70da[_0x3c025e(0x2b1)]=[_0xfaaef7],this[_0x3c025e(0x264)](_0x4c70da,_0x4bee33);}}let _0x5a9f60=MiscUtil[_0x3c025e(0x34a)](_0xfaaef7[_0x3c025e(0x359)]);_0x5a9f60=Charactermancer_Class_Util[_0x3c025e(0x1fe)](_0x5a9f60,this[_0x3c025e(0x30e)],_0x4bee33['filterValues']||this[_0x3c025e(0x30e)][_0x3c025e(0x256)][_0x3c025e(0x2c8)]());const _0x1f4bb2=await this[_0x3c025e(0x2b2)](_0x3bdd58,_0x5a9f60,_0x12548a,!![]);if(_0x12548a[_0x3c025e(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};await this['_pValidateUserLevelIndices'](_0x1f4bb2,_0x12548a);if(_0x12548a['isCancelled'])return{'status':UtilApplications[_0x3c025e(0x28d)]};_0x12548a[_0x3c025e(0x2f4)]=Math['max'](..._0x1f4bb2)+0x1,_0x12548a['numLevels']=_0x12548a[_0x3c025e(0x2f4)]-Math[_0x3c025e(0x28a)](..._0x1f4bb2),_0x12548a[_0x3c025e(0x24c)]=UtilActors[_0x3c025e(0x25f)](this[_0x3c025e(0x348)]),_0x12548a[_0x3c025e(0x321)]=![],_0x12548a[_0x3c025e(0x268)]=_0xfaaef7[_0x3c025e(0x268)]||_0x3bdd58[_0x3c025e(0x268)],_0x12548a[_0x3c025e(0x31e)]=await this[_0x3c025e(0x351)](_0x3bdd58,_0x12548a);if(_0x12548a[_0x3c025e(0x244)])return{'status':UtilApplications[_0x3c025e(0x28d)]};const _0x7dc802={'data':{}},_0xb4162e=await this[_0x3c025e(0x2d1)](_0x7dc802,_0x3bdd58,_0xfaaef7,_0x12548a);if(_0x12548a[_0x3c025e(0x244)])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};const {curLevel:_0x4798fe,existingClassItem:_0x5c2936}=_0xb4162e;this[_0x3c025e(0x36d)](_0x7dc802,_0x3bdd58,[_0xfaaef7],_0x4798fe,_0x12548a),await this[_0x3c025e(0x292)](_0x7dc802,_0x3bdd58,_0xfaaef7,_0x4798fe,_0x5c2936,_0x12548a);if(_0x12548a[_0x3c025e(0x244)])return{'status':UtilApplications[_0x3c025e(0x28d)]};if(_0x3bdd58[_0x3c025e(0x344)])await this['_pImportPreparedCasterSpells'](_0x3bdd58,_0x4798fe,_0x12548a);await this[_0x3c025e(0x275)](_0x3bdd58,[_0xfaaef7],_0x4798fe,_0x12548a);if(_0x12548a[_0x3c025e(0x244)])return{'status':UtilApplications[_0x3c025e(0x28d)]};await this[_0x3c025e(0x356)](_0x3bdd58,_0x5a9f60,_0x1f4bb2,_0x4bee33,_0x12548a);if(_0x12548a['isCancelled'])return{'status':UtilApplications[_0x3c025e(0x28d)]};await this[_0x3c025e(0x27f)](_0x12548a);if(this[_0x3c025e(0x348)][_0x3c025e(0x239)])this[_0x3c025e(0x348)][_0x3c025e(0x242)][_0x3c025e(0x324)]();return{'status':UtilApplications['TASK_EXIT_COMPLETE']};}async['_pImportSubclass_pImportToItems'](_0x8dc5ce,_0x165663,_0x3d90f6,_0x23c3c1){const _0x234b22=_0xd44325;_0x23c3c1=_0x23c3c1||{};const _0x28e08=await DataConverterClass['pGetSubclassItem'](_0x8dc5ce,_0x165663,{'isAddPermission':!![],'filterValues':this['_pageFilter']['filterBox'][_0x234b22(0x2c8)]()}),_0x3a5f64=this[_0x234b22(0x378)]({'name':_0x28e08[_0x234b22(0x249)],'source':_0x28e08['data'][_0x234b22(0x34d)]});if(_0x3a5f64[_0x234b22(0x1e9)])return{'status':UtilApplications[_0x234b22(0x312)]};if(_0x3d90f6['isTemp']){const _0x3f4abb=Item[_0x234b22(0x24f)](_0x28e08,{'renderSheet':!![],'temporary':!![]});return{'imported':_0x3f4abb,'status':UtilApplications[_0x234b22(0x307)]};}else{if(this[_0x234b22(0x29b)]){if(_0x3a5f64[_0x234b22(0x338)])return this['_pImportEntry_pDoUpdateExistingPackEntity'](_0x3a5f64,_0x28e08);const _0x5cb52a=new Item(_0x28e08);return await this[_0x234b22(0x29b)]['importEntity'](_0x5cb52a),{'imported':_0x5cb52a,'status':UtilApplications[_0x234b22(0x307)]};}else{if(_0x3a5f64[_0x234b22(0x338)])return this[_0x234b22(0x2c0)](_0x3a5f64,_0x28e08);const _0x315f3e=_0x23c3c1['folderId']||await this[_0x234b22(0x2c1)](_0x165663);if(_0x315f3e)_0x28e08['folder']=_0x315f3e;const _0x290fdd=await Item[_0x234b22(0x24f)](_0x28e08,{'renderSheet':![],'temporary':![]});return await game['items'][_0x234b22(0x2c3)](_0x290fdd),{'imported':_0x290fdd,'status':UtilApplications[_0x234b22(0x307)]};}}}async[_0xd44325(0x292)](_0x65cde,_0x4d479f,_0x557721,_0x1a347e,_0x2425fb,_0x1ea572){const _0x5a7b09=_0xd44325,_0x812d2a=MiscUtil[_0x5a7b09(0x363)](this[_0x5a7b09(0x348)],_0x5a7b09(0x2ec),_0x5a7b09(0x300))||[],_0x40ed63=_0x812d2a[_0x5a7b09(0x323)](_0x1015d7=>_0x1015d7[_0x5a7b09(0x272)]===_0x5a7b09(0x379)),_0xd8e6e6=_0x40ed63[_0x5a7b09(0x323)](_0x2ef400=>_0x2ef400!==_0x2425fb),_0x42434a=_0xd8e6e6['map'](_0x595f1d=>MiscUtil[_0x5a7b09(0x363)](_0x595f1d,_0x5a7b09(0x2ec),'levels')||0x0)[_0x5a7b09(0x267)]((_0x56c753,_0x153180)=>_0x56c753+_0x153180,0x0)+(_0x1ea572[_0x5a7b09(0x2f4)]||0x0);if(_0x42434a>0x0){const _0x38e066=(_0x65cde[_0x5a7b09(0x2ec)]['details']=_0x65cde['data'][_0x5a7b09(0x1f2)]||{})['xp']=_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x1f2)]['xp']||{},_0x453eb0=MiscUtil['get'](this[_0x5a7b09(0x348)],_0x5a7b09(0x2ec),_0x5a7b09(0x2ec),_0x5a7b09(0x1f2),'xp','value')||0x0,_0x325a19=Parser['LEVEL_XP_REQUIRED'][_0x42434a-0x1],_0x24df94=Parser[_0x5a7b09(0x390)][Math[_0x5a7b09(0x28a)](_0x42434a,0x13)];_0x453eb0<_0x325a19?(_0x38e066[_0x5a7b09(0x1df)]=0x0,_0x38e066['value']=_0x325a19):_0x38e066[_0x5a7b09(0x1df)]=_0x453eb0/_0x24df94*0x64,_0x38e066[_0x5a7b09(0x2e9)]=_0x24df94;}const _0x1526ae=MiscUtil[_0x5a7b09(0x363)](this['_actor'],'data',_0x5a7b09(0x2ec),_0x5a7b09(0x316),'prof'),_0x5e13ac=Math[_0x5a7b09(0x247)]((_0x1ea572['targetLevel']-0x1)/0x4)+0x2;if(_0x1526ae<_0x5e13ac)(_0x65cde['data']['attributes']=_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x316)]||{})['prof']=_0x5e13ac;const {spellProgression:_0x4448c8,spellAbility:_0x13342b,totalSpellcastingLevels:_0x2cdf97,maxPactCasterLevel:_0x1044ed}=Charactermancer_Class_Util[_0x5a7b09(0x294)](_0x4d479f,_0x557721,{'targetLevel':_0x1ea572[_0x5a7b09(0x2f4)],'otherExistingClassItems':_0xd8e6e6});if(_0x2cdf97||_0x4448c8==='pact'){let _0x2688ea=![];_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x332)]=_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x332)]||{};const _0x13fe84=MiscUtil[_0x5a7b09(0x2c7)](_0x1ea572[_0x5a7b09(0x2eb)],'data',_0x5a7b09(0x332),{});if(_0x2cdf97){const _0x4350e6=UtilActors[_0x5a7b09(0x20c)]['full'],_0x39e809=_0x4350e6[_0x2cdf97-0x1]||_0x4350e6[_0x5a7b09(0x1f8)]();_0x39e809[_0x5a7b09(0x23e)]((_0x58066f,_0x175bf1)=>{const _0x1955e5=_0x5a7b09;if(_0x58066f===0x0)return;const _0x59a79a='spell'+(_0x175bf1+0x1),_0x35af98=MiscUtil[_0x1955e5(0x363)](this[_0x1955e5(0x348)],_0x1955e5(0x2ec),'data',_0x1955e5(0x332),_0x59a79a,'max'),_0x4c9004=MiscUtil[_0x1955e5(0x363)](this[_0x1955e5(0x348)],_0x1955e5(0x2ec),_0x1955e5(0x2ec),'spells',_0x59a79a,_0x1955e5(0x24d));if(_0x35af98!=null){if(_0x35af98<_0x58066f){_0x2688ea=!![];const _0x2c1b1e=_0x58066f-_0x35af98;_0x65cde[_0x1955e5(0x2ec)]['spells'][_0x59a79a]={'max':_0x58066f,'value':_0x4c9004+_0x2c1b1e},_0x13fe84[_0x59a79a]={'max':_0x58066f,'value':_0x4c9004+_0x2c1b1e};}}else _0x2688ea=!![],_0x65cde[_0x1955e5(0x2ec)][_0x1955e5(0x332)][_0x59a79a]={'max':_0x58066f,'value':_0x58066f},_0x13fe84[_0x59a79a]={'max':_0x58066f,'value':_0x58066f};});}else{if(_0x4448c8===_0x5a7b09(0x341)){const _0x1f1216=MiscUtil['get'](this['_actor'],_0x5a7b09(0x2ec),_0x5a7b09(0x2ec),_0x5a7b09(0x332),'pact',_0x5a7b09(0x2e9)),_0x30386c=MiscUtil['get'](this[_0x5a7b09(0x348)],_0x5a7b09(0x2ec),_0x5a7b09(0x2ec),_0x5a7b09(0x332),'pact','value'),_0x34714e=UtilActors[_0x5a7b09(0x20c)][_0x5a7b09(0x341)][_0x1044ed-0x1][_0x5a7b09(0x326)](Boolean);if(_0x1f1216!=null){if(_0x1f1216<_0x34714e){_0x2688ea=!![];const _0x8820a6=_0x34714e-_0x1f1216;_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x332)][_0x5a7b09(0x341)]={'max':_0x34714e,'value':_0x30386c+_0x8820a6},_0x13fe84[_0x5a7b09(0x341)]={'max':_0x34714e,'value':_0x30386c+_0x8820a6};}}else _0x2688ea=!![],_0x65cde['data']['spells'][_0x5a7b09(0x341)]={'max':_0x34714e,'value':_0x34714e},_0x13fe84[_0x5a7b09(0x341)]={'max':_0x34714e,'value':_0x34714e};}}!_0x2688ea&&(delete _0x65cde['data'][_0x5a7b09(0x332)],delete _0x1ea572['postItemActorUpdate'][_0x5a7b09(0x2ec)][_0x5a7b09(0x332)]);}if(_0x13342b)(_0x65cde[_0x5a7b09(0x2ec)][_0x5a7b09(0x316)]=_0x65cde['data'][_0x5a7b09(0x316)]||{})[_0x5a7b09(0x26b)]=_0x13342b;if(_0x1ea572['isClassImport']&&Charactermancer_Class_HpIncreaseModeSelect['isHpAvailable'](_0x4d479f)){const _0x5d2ac6=Parser['getAbilityModNumber'](this[_0x5a7b09(0x348)]?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x2ec)]?.['abilities']?.[_0x5a7b09(0x381)]?.[_0x5a7b09(0x24d)]);let _0x4f53c9=_0x1ea572[_0x5a7b09(0x321)]?_0x4d479f['hd'][_0x5a7b09(0x26a)]*_0x4d479f['hd']['faces']+_0x5d2ac6:0x0;const _0x24fb2d=_0x1ea572[_0x5a7b09(0x321)]?_0x1ea572[_0x5a7b09(0x1de)]-0x1:_0x1ea572[_0x5a7b09(0x1de)];switch(_0x1ea572['hpIncreaseMode']){case Charactermancer_Class_HpIncreaseModeSelect[_0x5a7b09(0x241)]:{const _0x3192cb=Math['ceil'](_0x4d479f['hd'][_0x5a7b09(0x26a)]*((_0x4d479f['hd'][_0x5a7b09(0x260)]+0x1)/0x2));_0x4f53c9+=_0x24fb2d*Math[_0x5a7b09(0x2e9)](_0x3192cb+_0x5d2ac6,0x1);break;}case Charactermancer_Class_HpIncreaseModeSelect[_0x5a7b09(0x2e3)]:{for(let _0x16342b=0x0;_0x16342b<_0x24fb2d;++_0x16342b){const _0x3e7ae0=new Roll(_0x4d479f['hd'][_0x5a7b09(0x26a)]+'d'+_0x4d479f['hd'][_0x5a7b09(0x260)]+_0x5a7b09(0x2ab)+_0x5d2ac6);_0x3e7ae0[_0x5a7b09(0x1f0)](),_0x4f53c9+=Math[_0x5a7b09(0x2e9)](_0x3e7ae0['total'],0x1),await _0x3e7ae0[_0x5a7b09(0x1e1)]({'flavor':'HP\x20Increase','speaker':{'actor':this[_0x5a7b09(0x348)]['id'],'alias':this[_0x5a7b09(0x348)][_0x5a7b09(0x249)],'scene':null,'token':null}});}break;}case Charactermancer_Class_HpIncreaseModeSelect['MODE_DO_NOT_INCREASE']:{_0x4f53c9=0x0;break;}default:throw new Error(_0x5a7b09(0x25b)+_0x1ea572['hpIncreaseMode']+'\x22');}if(_0x4f53c9)switch(_0x1ea572['proficiencyImportMode']){case Charactermancer_Class_ProficiencyImportModeSelect[_0x5a7b09(0x328)]:{const _0x2ef9c3=(this['_actor']?.[_0x5a7b09(0x2ec)]?.['data']?.['attributes']?.['hp']?.[_0x5a7b09(0x24d)]||0x0)+_0x4f53c9,_0x1a61f4=(this[_0x5a7b09(0x348)]?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x316)]?.['hp']?.['max']||0x0)+_0x4f53c9;MiscUtil[_0x5a7b09(0x333)](_0x65cde,_0x5a7b09(0x2ec),_0x5a7b09(0x316),'hp','value',_0x2ef9c3),MiscUtil['set'](_0x65cde,_0x5a7b09(0x2ec),'attributes','hp',_0x5a7b09(0x2e9),_0x1a61f4);break;}case Charactermancer_Class_ProficiencyImportModeSelect[_0x5a7b09(0x21b)]:{const _0x3fc192=(_0x1ea572['isIncludesLevelOne']?0x0:this['_actor']?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x316)]?.['hp']?.[_0x5a7b09(0x24d)]||0x0)+_0x4f53c9,_0x4f9eb8=(_0x1ea572[_0x5a7b09(0x321)]?0x0:this[_0x5a7b09(0x348)]?.[_0x5a7b09(0x2ec)]?.[_0x5a7b09(0x2ec)]?.['attributes']?.['hp']?.[_0x5a7b09(0x2e9)]||0x0)+_0x4f53c9;MiscUtil[_0x5a7b09(0x333)](_0x65cde,'data',_0x5a7b09(0x316),'hp',_0x5a7b09(0x24d),_0x3fc192),MiscUtil['set'](_0x65cde,_0x5a7b09(0x2ec),_0x5a7b09(0x316),'hp',_0x5a7b09(0x2e9),_0x4f9eb8);break;}case Charactermancer_Class_ProficiencyImportModeSelect[_0x5a7b09(0x2a6)]:break;default:throw new Error(_0x5a7b09(0x334)+_0x1ea572[_0x5a7b09(0x31e)]+'\x22');}}await DataConverter[_0x5a7b09(0x38d)](MiscUtil[_0x5a7b09(0x363)](this[_0x5a7b09(0x348)],_0x5a7b09(0x2ec),'data',_0x5a7b09(0x35f),_0x5a7b09(0x271)),_0x4d479f[_0x5a7b09(0x23b)],_0x65cde[_0x5a7b09(0x2ec)],_0x1ea572);if(_0x1ea572[_0x5a7b09(0x244)])return;if(Object['keys'](_0x65cde[_0x5a7b09(0x2ec)])[_0x5a7b09(0x2cb)])await this[_0x5a7b09(0x348)][_0x5a7b09(0x27a)](_0x65cde);}async[_0xd44325(0x36b)](_0x390b01,_0x44cbd1,_0x169246,_0x8ac3bb){const _0x17632b=_0xd44325,_0x535c8e={'chosenProficiencies':{}};_0x44cbd1['proficiency']&&_0x44cbd1[_0x17632b(0x274)][_0x17632b(0x23e)](_0x3b7c3a=>{const _0x29e87b=_0x17632b,_0xbb08f2=MiscUtil[_0x29e87b(0x363)](this['_actor'],_0x29e87b(0x2ec),_0x29e87b(0x2ec),_0x29e87b(0x33a),_0x3b7c3a,_0x29e87b(0x31c));!_0xbb08f2&&(((_0x390b01[_0x29e87b(0x2ec)][_0x29e87b(0x33a)]=_0x390b01[_0x29e87b(0x2ec)][_0x29e87b(0x33a)]||{})[_0x3b7c3a]=_0x390b01['data'][_0x29e87b(0x33a)][_0x3b7c3a]||{})[_0x29e87b(0x31c)]=0x1);});if(_0x44cbd1[_0x17632b(0x2d2)]){_0x535c8e[_0x17632b(0x301)]=await this[_0x17632b(0x33d)](_0x390b01,_0x44cbd1[_0x17632b(0x2d2)],_0x8ac3bb);if(_0x8ac3bb[_0x17632b(0x244)])return;}await this[_0x17632b(0x213)](_0x44cbd1,_0x8ac3bb);if(_0x8ac3bb['isCancelled'])return;return _0x535c8e;}async[_0xd44325(0x33d)](_0x166613,_0x1094d3,_0x2c6c9a){const _0x5951bc=_0xd44325,_0x3d8610={'skills':{}},_0x2b6d76=(_0x4ce777,_0x164087)=>{const _0x2dc55c=_0xd38d;if(!_0x164087[_0x2dc55c(0x2cf)](_0x465216=>_0x465216[_0x2dc55c(0x2dc)]()[_0x2dc55c(0x384)]()===_0x4ce777[_0x2dc55c(0x2dc)]()[_0x2dc55c(0x384)]()))_0x164087['push'](_0x4ce777);},_0x4511ef=_0x27e10e=>{const _0x2915f2=_0xd38d,_0x50f7a9=MiscUtil[_0x2915f2(0x363)](this[_0x2915f2(0x348)],_0x2915f2(0x2ec),_0x2915f2(0x2ec),_0x2915f2(0x35f),_0x27e10e),_0xa3983c=(_0x166613['data']['traits']=_0x166613[_0x2915f2(0x2ec)]['traits']||{})[_0x27e10e]=MiscUtil[_0x2915f2(0x34a)](_0x50f7a9||{});_0xa3983c[_0x2915f2(0x24d)]=_0xa3983c[_0x2915f2(0x24d)]||[];const _0xbf03d3=(_0xa3983c[_0x2915f2(0x32a)]||'')[_0x2915f2(0x28b)](';')['map'](_0x1c9c91=>_0x1c9c91[_0x2915f2(0x384)]())[_0x2915f2(0x323)](Boolean);return{'profUpdate':_0xa3983c,'customArr':_0xbf03d3};};if(_0x1094d3[_0x5951bc(0x288)]){const {profUpdate:_0xe8663b,customArr:_0x452679}=_0x4511ef('armorProf');_0x1094d3[_0x5951bc(0x288)][_0x5951bc(0x23e)](_0x15768f=>{const _0x505e2a=_0x5951bc,_0x3fcf67=(_0x15768f[_0x505e2a(0x274)]||_0x15768f)[_0x505e2a(0x2dc)]()[_0x505e2a(0x384)]();switch(_0x3fcf67){case _0x505e2a(0x282):_0x2b6d76(_0x505e2a(0x29d),_0xe8663b[_0x505e2a(0x24d)]);break;case _0x505e2a(0x1e3):_0x2b6d76('med',_0xe8663b[_0x505e2a(0x24d)]);break;case _0x505e2a(0x1fb):_0x2b6d76(_0x505e2a(0x236),_0xe8663b[_0x505e2a(0x24d)]);break;case _0x505e2a(0x2ae):_0x2b6d76(_0x505e2a(0x2b9),_0xe8663b[_0x505e2a(0x24d)]);break;default:(_0x15768f[_0x505e2a(0x2ed)]||_0x15768f)[_0x505e2a(0x28b)](';')[_0x505e2a(0x2f3)](_0x4dc48e=>_0x4dc48e[_0x505e2a(0x384)]())[_0x505e2a(0x323)](Boolean)[_0x505e2a(0x23e)](_0x20e3e1=>_0x2b6d76(_0x20e3e1,_0x452679));break;}}),_0xe8663b['custom']=_0x452679[_0x5951bc(0x30d)](';\x20');}if(_0x1094d3['weapons']){const {profUpdate:_0x422a95,customArr:_0x4c9162}=_0x4511ef('weaponProf');_0x1094d3['weapons']['forEach'](_0x2db411=>{const _0x6d0770=_0x5951bc,_0xf016e2=_0x2db411['toLowerCase']()[_0x6d0770(0x384)]();switch(_0xf016e2){case _0x6d0770(0x280):_0x2b6d76(_0x6d0770(0x2bd),_0x422a95[_0x6d0770(0x24d)]);break;case _0x6d0770(0x2f6):_0x2b6d76(_0x6d0770(0x2e6),_0x422a95[_0x6d0770(0x24d)]);break;default:_0x2db411[_0x6d0770(0x28b)](';')[_0x6d0770(0x2f3)](_0x2f4651=>_0x2f4651['trim']())['filter'](Boolean)[_0x6d0770(0x23e)](_0x417a5f=>_0x2b6d76(_0x417a5f,_0x4c9162));break;}}),_0x422a95[_0x5951bc(0x32a)]=_0x4c9162[_0x5951bc(0x30d)](';\x20');}if(_0x1094d3[_0x5951bc(0x2a7)]){const {profUpdate:_0x4b0f61,customArr:_0x1ec69a}=_0x4511ef(_0x5951bc(0x279));_0x1094d3[_0x5951bc(0x2a7)][_0x5951bc(0x23e)](_0x1b42d6=>{const _0x11c287=_0x5951bc;_0x1b42d6=Renderer['stripTags'](_0x1b42d6);const _0x2bf0e1=_0x1b42d6['toLowerCase']()[_0x11c287(0x384)]();switch(_0x2bf0e1){case _0x11c287(0x37b):_0x2b6d76(_0x11c287(0x30b),_0x4b0f61[_0x11c287(0x24d)]);break;case'disguise\x20Kit':_0x2b6d76(_0x11c287(0x257),_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x262):_0x2b6d76('forg',_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x32d):_0x2b6d76(_0x11c287(0x219),_0x4b0f61['value']);break;case'herbalism\x20kit':_0x2b6d76(_0x11c287(0x342),_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x310):_0x2b6d76('music',_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x347):_0x2b6d76(_0x11c287(0x2de),_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x27e):_0x2b6d76(_0x11c287(0x2e4),_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x235):_0x2b6d76(_0x11c287(0x221),_0x4b0f61[_0x11c287(0x24d)]);break;case _0x11c287(0x35b):_0x2b6d76(_0x11c287(0x263),_0x4b0f61[_0x11c287(0x24d)]);break;default:_0x1b42d6[_0x11c287(0x28b)](';')[_0x11c287(0x2f3)](_0x6a19c=>_0x6a19c['trim']()[_0x11c287(0x30f)]())['filter'](Boolean)[_0x11c287(0x23e)](_0x224a8f=>_0x2b6d76(_0x224a8f,_0x1ec69a));break;}}),_0x4b0f61[_0x5951bc(0x32a)]=_0x1ec69a['join'](';\x20');}if(_0x1094d3[_0x5951bc(0x1f6)]){const _0x285fd6=await DataConverter[_0x5951bc(0x308)](MiscUtil[_0x5951bc(0x363)](this[_0x5951bc(0x348)],'data',_0x5951bc(0x2ec),_0x5951bc(0x1f6)),_0x1094d3[_0x5951bc(0x1f6)],_0x166613[_0x5951bc(0x2ec)],_0x2c6c9a);if(_0x2c6c9a[_0x5951bc(0x244)])return _0x3d8610;_0x3d8610[_0x5951bc(0x1f6)]=_0x285fd6;}return _0x3d8610;}async[_0xd44325(0x258)](_0x2aac03,_0x49dcc0,_0x35e56d,_0x219895){const _0x15b691=_0xd44325,_0x5ec808={'chosenProficiencies':{}};if(_0x49dcc0['multiclassing']&&_0x49dcc0[_0x15b691(0x24a)]['proficienciesGained']){_0x5ec808[_0x15b691(0x301)]=await this['_pImportEntry_pDoUpdateCharacter_pPopulateProficienciesFrom'](_0x2aac03,_0x49dcc0['multiclassing'][_0x15b691(0x1e8)],_0x219895);if(_0x219895['isCancelled'])return;}return _0x5ec808;}[_0xd44325(0x273)](_0x1b40a3){const _0x1bdc16=_0xd44325,_0x5deb97=MiscUtil[_0x1bdc16(0x363)](this[_0x1bdc16(0x348)],_0x1bdc16(0x2ec),'items')||[];return _0x5deb97[_0x1bdc16(0x323)](_0x382f25=>_0x382f25[_0x1bdc16(0x272)]==='class'&&(_0x382f25[_0x1bdc16(0x249)]||'')[_0x1bdc16(0x2dc)]()['trim']()===_0x1b40a3['name'][_0x1bdc16(0x2dc)]()[_0x1bdc16(0x384)]()&&(!Config[_0x1bdc16(0x363)]('import',_0x1bdc16(0x2bb))||(DataConverter['getItemSource'](_0x382f25)||'')[_0x1bdc16(0x2dc)]()===Parser[_0x1bdc16(0x1fa)](_0x1b40a3['source'])['toLowerCase']()));}async[_0xd44325(0x2d1)](_0x1caea5,_0x4c0993,_0x3f0472,_0x363b05){const _0x538609=_0xd44325,_0xde921f={'curLevel':0x0,'existingClassItem':null};let _0xe250c0={};if(_0x363b05['isClassImport']&&_0x363b05[_0x538609(0x321)])switch(_0x363b05['proficiencyImportMode']){case Charactermancer_Class_ProficiencyImportModeSelect['MODE_MULTICLASS']:{_0xe250c0=await this[_0x538609(0x258)](_0x1caea5,_0x4c0993,_0x3f0472,_0x363b05);break;}case Charactermancer_Class_ProficiencyImportModeSelect[_0x538609(0x21b)]:{_0xe250c0=await this[_0x538609(0x36b)](_0x1caea5,_0x4c0993,_0x3f0472,_0x363b05);if(_0x363b05['isCancelled'])return;break;}case Charactermancer_Class_ProficiencyImportModeSelect['MODE_NONE']:{break;}default:throw new Error(_0x538609(0x334)+_0x363b05[_0x538609(0x31e)]+'\x22');}let _0x5a721='';if(Config[_0x538609(0x363)](_0x538609(0x298),_0x538609(0x21e))&&_0x4c0993['fluff']&&_0x4c0993[_0x538609(0x33b)][_0x538609(0x2cb)])_0x5a721=Renderer[_0x538609(0x363)]()[_0x538609(0x2ea)](!![])[_0x538609(0x324)]({'type':_0x4c0993[_0x538609(0x33b)][0x0][_0x538609(0x272)]||_0x538609(0x237),'entries':_0x4c0993[_0x538609(0x33b)][0x0][_0x538609(0x1e6)]||[]});const _0x52b129=this['_getExistingClassItems'](_0x4c0993),_0x3ec6e1=await(async()=>{const _0x2a8122=_0x538609;if(!_0x52b129[_0x2a8122(0x2cb)])return null;if(!_0x3f0472&&_0x52b129[_0x2a8122(0x2cb)]===0x1)return _0x52b129[0x0];if(!_0x3f0472)return this['_pGetUserClassItem'](_0x4c0993,_0x3f0472,_0x52b129);const _0x490e8e=_0x52b129[_0x2a8122(0x323)](_0x2b6a25=>MiscUtil[_0x2a8122(0x363)](_0x2b6a25,'data',_0x2a8122(0x325)));if(!_0x490e8e['length']&&_0x52b129[_0x2a8122(0x2cb)]===0x1)return _0x52b129[0x0];if(!_0x490e8e[_0x2a8122(0x2cb)])return this['_pGetUserClassItem'](_0x4c0993,_0x3f0472,_0x52b129);const _0x4a57bf=_0x52b129[_0x2a8122(0x323)](_0x5a5cf3=>(MiscUtil['get'](_0x5a5cf3,_0x2a8122(0x2ec),_0x2a8122(0x325))||'')===_0x3f0472[_0x2a8122(0x249)]);if(!_0x4a57bf[_0x2a8122(0x2cb)])return this[_0x2a8122(0x305)](_0x4c0993,_0x3f0472,_0x52b129);if(_0x4a57bf[_0x2a8122(0x2cb)]===0x1)return _0x4a57bf[0x0];return this['_pGetUserClassItem'](_0x4c0993,_0x3f0472,_0x4a57bf);})();if(_0x3ec6e1){let _0x41f6b2=![];const _0x4116f6={'_id':_0x3ec6e1[_0x538609(0x2d7)]||_0x3ec6e1[_0x538609(0x2ec)][_0x538609(0x2d7)]};_0x5a721&&!(MiscUtil[_0x538609(0x363)](_0x3ec6e1,_0x538609(0x2ec),_0x538609(0x266),'value')||''[_0x538609(0x384)]())&&(_0x41f6b2=!![],((_0x4116f6[_0x538609(0x2ec)]=_0x4116f6[_0x538609(0x2ec)]||{})[_0x538609(0x266)]=_0x4116f6[_0x538609(0x2ec)][_0x538609(0x266)]||{})[_0x538609(0x24d)]=_0x5a721);let _0x31ea41=MiscUtil[_0x538609(0x363)](_0x3ec6e1,_0x538609(0x2ec),_0x538609(0x200));_0x31ea41&&(_0x363b05[_0x538609(0x2f4)]>_0x31ea41&&(_0x41f6b2=!![],(_0x4116f6[_0x538609(0x2ec)]=_0x4116f6[_0x538609(0x2ec)]||{})[_0x538609(0x200)]=_0x363b05[_0x538609(0x2f4)]));if(_0x3f0472&&_0x3f0472[_0x538609(0x249)]){const _0x27bf3e=MiscUtil[_0x538609(0x363)](_0x3ec6e1,_0x538609(0x2ec),_0x538609(0x325));_0x27bf3e!==_0x3f0472[_0x538609(0x249)]&&(_0x41f6b2=!![],(_0x4116f6[_0x538609(0x2ec)]=_0x4116f6[_0x538609(0x2ec)]||{})[_0x538609(0x325)]=_0x3f0472[_0x538609(0x249)]);}if(_0x41f6b2)_0x363b05[_0x538609(0x340)]['push'](_0x4116f6);_0xde921f[_0x538609(0x245)]=_0x31ea41||0x0,_0xde921f['existingClassItem']=_0x3ec6e1;}else{const _0x1372e9=(_0x3f0472||{})[_0x538609(0x31a)]||_0x4c0993[_0x538609(0x31a)],_0xd7bd44=await DataConverter[_0x538609(0x329)](_0x538609(0x379),_0x4c0993)||_0x538609(0x2e1)+SharedConsts['MODULE_NAME']+_0x538609(0x283),_0x437887=_0xe250c0[_0x538609(0x301)]&&_0xe250c0[_0x538609(0x301)][_0x538609(0x1f6)]?Object[_0x538609(0x31d)](_0xe250c0['chosenProficiencies'][_0x538609(0x1f6)]):[];_0x363b05['items'][_0x538609(0x34e)]({'name':UtilApplications[_0x538609(0x2e5)](DataConverter[_0x538609(0x306)](_0x4c0993)),'type':_0x538609(0x379),'data':{'description':{'value':_0x5a721,'chat':'','unidentified':''},'source':DataConverter[_0x538609(0x26f)](_0x4c0993),'levels':_0x363b05[_0x538609(0x2f4)],'subclass':_0x3f0472?_0x3f0472[_0x538609(0x249)]:'','hitDice':DataConverterClass[_0x538609(0x2dd)](_0x4c0993),'hitDiceUsed':0x0,'spellcasting':UtilActors['getMappedCasterType'](_0x1372e9)||_0x1372e9,'skills':{'number':_0x363b05[_0x538609(0x31e)]===Charactermancer_Class_ProficiencyImportModeSelect[_0x538609(0x328)]?_0x4c0993[_0x538609(0x30c)]||0x0:_0x4c0993['_cntStartingSkillChoices']||0x0,'value':_0x437887}},'img':_0xd7bd44});}return _0xde921f;}async[_0xd44325(0x305)](_0x2b29c0,_0x4c5c65,_0x1af956){const _0x31818a=_0xd44325,_0x430baf=''+(_0x2b29c0[_0x31818a(0x249)]||_0x31818a(0x36c))+(_0x4c5c65?'\x20('+(_0x4c5c65[_0x31818a(0x249)]||'(Unnamed\x20subclass)')+')':''),_0x5c64d2=await InputUiUtil['pGetUserEnum']({'values':_0x1af956,'placeholder':_0x31818a(0x276),'title':_0x31818a(0x20d)+_0x430baf+_0x31818a(0x364),'fnDisplay':_0x1091ba=>{const _0xe91095=_0x31818a;if(_0x1091ba==null)return'(Create\x20New\x20Feature)';const _0x102ddc=(MiscUtil[_0xe91095(0x363)](_0x1091ba,_0xe91095(0x2ec),_0xe91095(0x325))||'')['trim']();return''+(_0x1091ba[_0xe91095(0x249)]||_0xe91095(0x36c))+(_0x102ddc?':\x20'+_0x102ddc:'');},'isAllowNull':!![]});if(_0x5c64d2==null)return null;return _0x1af956[_0x5c64d2];}async[_0xd44325(0x38f)](_0x216e01,_0x4fc3be,_0x31c19d){const _0x267d95=_0xd44325;if(_0x216e01[_0x267d95(0x343)])return;const _0x3f2814=Charactermancer_Class_Util['getCasterProgressionMeta']({'casterProgression':_0x216e01[_0x267d95(0x31a)],'curLevel':_0x4fc3be,'targetLevel':_0x31c19d['targetLevel'],'isBreakpointsOnly':!![]});if(!_0x3f2814)return;const {spellLevelLow:_0xcbafea,spellLevelHigh:_0x151583,deltaLevels:_0x56d304,deltaSpellLevels:_0xd3b75f}=_0x3f2814;if(!_0xd3b75f)return;const _0xe0c746=await InputUiUtil[_0x267d95(0x353)]({'title':'Populate\x20Spellbook','htmlDescription':'<p>Do\x20you\x20want\x20to\x20populate\x20the\x20spellbook\x20for\x20this\x20class\x20(for\x20class\x20level'+(_0x56d304===0x1?'':'s')+'\x20'+(_0x56d304===0x1?_0x31c19d[_0x267d95(0x2f4)]:_0x4fc3be+0x1+'-'+_0x31c19d[_0x267d95(0x2f4)])+_0x267d95(0x366),'textYes':_0x267d95(0x377),'textNo':'No'});if(!_0xe0c746)return;const _0x202d73=(await Vetools[_0x267d95(0x285)](!![]))[_0x267d95(0x2b8)],_0x188a07=Charactermancer_Class_Util['getPrepareableSpells'](_0x202d73,_0x216e01,_0xcbafea,_0x151583);for(const _0x32c7d6 of _0x188a07){const _0x5ac7aa=UrlUtil[_0x267d95(0x2ac)][UrlUtil[_0x267d95(0x201)]](_0x32c7d6),_0x1a4716=DataConverterSpell['getActorSpell'](this['_actor'],_0x32c7d6[_0x267d95(0x249)],_0x32c7d6[_0x267d95(0x34d)]);if(_0x1a4716){_0x31c19d['spellHashToItemIdMap'][_0x5ac7aa]=_0x1a4716[_0x267d95(0x2d7)]||_0x1a4716[_0x267d95(0x2ec)][_0x267d95(0x2d7)];continue;}const _0x27ffc9=await DataConverterSpell[_0x267d95(0x2d9)](_0x32c7d6,{...UtilActors['getActorSpellItemOpts'](),'casterLevel':_0x31c19d[_0x267d95(0x2f4)],'abilityAbv':_0x216e01[_0x267d95(0x268)]}),_0x2bf673=await this[_0x267d95(0x348)]['createEmbeddedEntity']('OwnedItem',_0x27ffc9,{});_0x31c19d[_0x267d95(0x2aa)][_0x5ac7aa]=_0x2bf673[_0x267d95(0x2d7)]||_0x2bf673[_0x267d95(0x2ec)]['_id'];}}async[_0xd44325(0x275)](_0x58a78d,_0xd55a4,_0x292544,_0x4cb9f0){const _0x13ed3e=_0xd44325;if(!_0xd55a4||!_0xd55a4[_0x13ed3e(0x2cb)])return;for(const _0x26cdcd of _0xd55a4){const _0x5a3090=Charactermancer_Class_Util['getCasterProgressionMeta']({'casterProgression':_0x26cdcd?.[_0x13ed3e(0x31a)]||_0x58a78d['casterProgression'],'curLevel':_0x292544,'targetLevel':_0x4cb9f0[_0x13ed3e(0x2f4)]}),_0xb310b4=await Charactermancer_AdditionalSpellsSelect[_0x13ed3e(0x230)]({'additionalSpells':_0x26cdcd[_0x13ed3e(0x2a1)],'sourceHintText':_0x26cdcd[_0x13ed3e(0x249)],'currentLevel':_0x292544,'targetLevel':_0x4cb9f0[_0x13ed3e(0x2f4)],'spellLevelLow':_0x5a3090?_0x5a3090[_0x13ed3e(0x1ec)]:null,'spellLevelHigh':_0x5a3090?_0x5a3090[_0x13ed3e(0x23d)]:null});if(_0xb310b4==null)return _0x4cb9f0['isCancelled']=!![];if(_0xb310b4===VeCt[_0x13ed3e(0x1ea)])continue;await Charactermancer_AdditionalSpellsSelect[_0x13ed3e(0x2e2)](this[_0x13ed3e(0x348)],_0xb310b4,{'abilityAbv':_0x4cb9f0[_0x13ed3e(0x268)],'casterLevel':_0x4cb9f0['targetLevel'],'hashToIdMap':_0x4cb9f0[_0x13ed3e(0x2aa)]});}}async[_0xd44325(0x356)](_0xf446ba,_0x5d8652,_0x6d7034,_0x397e97,_0x52f069){const _0x26e433=_0xd44325;if(_0xf446ba[_0x26e433(0x336)])await this['_pImportEntry_pFillItemArrayPredefinedFeatures'](_0xf446ba[_0x26e433(0x336)],_0x397e97,_0x52f069);else{const _0x373763=_0x5d8652[_0x26e433(0x323)](_0x56d6ae=>_0x6d7034[_0x26e433(0x207)](_0x56d6ae[_0x26e433(0x259)]-0x1));await this[_0x26e433(0x2d3)](_0x373763,_0x397e97,_0x52f069);}}async[_0xd44325(0x2df)](_0x488e11,_0x28aedf,_0x18cc2d){const _0x3c2937=_0xd44325,_0x4abd59=DataConverterSpell[_0x3c2937(0x387)]['bind'](null,this[_0x3c2937(0x348)]['id'],_0x18cc2d[_0x3c2937(0x2aa)]);Renderer[_0x3c2937(0x363)]()[_0x3c2937(0x2fd)](_0x3c2937(0x26e),'ele',_0x4abd59);for(const _0x2eba0c of _0x488e11){await this[_0x3c2937(0x368)](_0x2eba0c,_0x18cc2d);if(_0x18cc2d['isCancelled'])return;}Renderer[_0x3c2937(0x363)]()[_0x3c2937(0x220)](_0x3c2937(0x26e),'ele',_0x4abd59);}async['_pImportEntry_pFillItemArrayFeatures'](_0x20d99e,_0x1d5115,_0x21875b){const _0xa4c651=_0xd44325,_0x189c69=this['_actor']?.[_0xa4c651(0x2ec)]?.['data']?.[_0xa4c651(0x33a)]?.[_0xa4c651(0x381)]?.[_0xa4c651(0x24d)],_0xcec078=DataConverterSpell['doHookSpellLinkRender'][_0xa4c651(0x27c)](null,this[_0xa4c651(0x348)]['id'],_0x21875b[_0xa4c651(0x2aa)]);Renderer[_0xa4c651(0x363)]()[_0xa4c651(0x2fd)]('link',_0xa4c651(0x2f7),_0xcec078),_0x20d99e=Charactermancer_Class_Util['getImportableFeatures'](_0x20d99e),Charactermancer_Class_Util[_0xa4c651(0x1ee)](_0x20d99e,this[_0xa4c651(0x30e)],_0x1d5115[_0xa4c651(0x339)]||this[_0xa4c651(0x30e)]['filterBox'][_0xa4c651(0x2c8)]());const _0x5eebdd=new Charactermancer_Class_Util['ExistingFeatureChecker'](this[_0xa4c651(0x348)]),_0xd251f1=Charactermancer_Class_Util[_0xa4c651(0x23f)](_0x20d99e);for(const _0x4d2e21 of _0xd251f1){const {topLevelFeature:_0x3c48d3,optionsSets:_0x2478f0}=_0x4d2e21,_0x1e4f1e=_0x3c48d3[_0xa4c651(0x249)][_0xa4c651(0x2dc)]();if(_0x1e4f1e==='ability\x20score\x20improvement'){await this[_0xa4c651(0x2be)](_0x3c48d3,_0x21875b);if(_0x21875b['isCancelled'])return;continue;}for(const _0x356722 of _0x2478f0){const _0x229e4b=await Charactermancer_Class_FeatureOptionsSelect['pGetUserInput']({'actor':this[_0xa4c651(0x348)],'optionsSet':_0x356722,'level':_0x3c48d3[_0xa4c651(0x259)],'existingFeatureChecker':_0x5eebdd});if(!_0x229e4b)return _0x21875b[_0xa4c651(0x244)]=!![];if(_0x229e4b===VeCt[_0xa4c651(0x1ea)])continue;for(const _0x26b174 of _0x229e4b[_0xa4c651(0x2ec)]){await this[_0xa4c651(0x368)](_0x26b174,_0x21875b,_0x5eebdd);if(_0x21875b['isCancelled'])return;}}}Renderer['get']()[_0xa4c651(0x220)](_0xa4c651(0x26e),_0xa4c651(0x2f7),_0xcec078);const _0x15ca35=this[_0xa4c651(0x348)]?.[_0xa4c651(0x2ec)]?.[_0xa4c651(0x2ec)]?.[_0xa4c651(0x33a)]?.[_0xa4c651(0x381)]?.[_0xa4c651(0x24d)];if(_0x15ca35!=null&&_0x15ca35!==_0x189c69){const _0x22076e=Parser[_0xa4c651(0x1f3)](_0x189c69),_0x37a916=Parser[_0xa4c651(0x1f3)](_0x15ca35),_0x4f03e1=(_0x21875b['numLevelsPrev']+_0x21875b['numLevels'])*(_0x37a916-_0x22076e),_0xa6891a=(this['_actor']?.[_0xa4c651(0x2ec)]?.[_0xa4c651(0x2ec)]?.['attributes']?.['hp']?.[_0xa4c651(0x24d)]||0x0)+_0x4f03e1,_0x1649cf=(this[_0xa4c651(0x348)]?.[_0xa4c651(0x2ec)]?.[_0xa4c651(0x2ec)]?.[_0xa4c651(0x316)]?.['hp']?.['max']||0x0)+_0x4f03e1;MiscUtil['set'](_0x21875b['actorUpdate'],'data',_0xa4c651(0x316),'hp',_0xa4c651(0x24d),_0xa6891a),MiscUtil['set'](_0x21875b[_0xa4c651(0x22e)],'data',_0xa4c651(0x316),'hp',_0xa4c651(0x2e9),_0x1649cf);}}async['_pImportEntry_pFinalise'](_0x3098be){const _0x606d04=_0xd44325;if(_0x3098be[_0x606d04(0x1f5)]?.[_0x606d04(0x2ec)]?.[_0x606d04(0x2af)])MiscUtil[_0x606d04(0x333)](_0x3098be[_0x606d04(0x22e)],_0x606d04(0x2ec),_0x606d04(0x2af),_0x3098be[_0x606d04(0x1f5)][_0x606d04(0x2ec)][_0x606d04(0x2af)]);if(Object[_0x606d04(0x31d)](_0x3098be[_0x606d04(0x22e)])[_0x606d04(0x2cb)])await this[_0x606d04(0x348)]['update'](_0x3098be[_0x606d04(0x22e)]);if(_0x3098be['items']['length']){const _0x1df7e3=_0x3098be[_0x606d04(0x300)][_0x606d04(0x323)](_0x2b6a3f=>_0x2b6a3f[_0x606d04(0x272)]===_0x606d04(0x379)),_0x491174=_0x3098be[_0x606d04(0x300)][_0x606d04(0x323)](_0x728a7c=>_0x728a7c[_0x606d04(0x272)]!==_0x606d04(0x379));if(_0x1df7e3[_0x606d04(0x2cb)])await UtilActors[_0x606d04(0x2e8)](this['_actor'],_0x1df7e3);if(_0x491174[_0x606d04(0x2cb)])await UtilActors['pAddActorItems'](this[_0x606d04(0x348)],_0x491174);}_0x3098be[_0x606d04(0x340)][_0x606d04(0x2cb)]&&await this[_0x606d04(0x348)][_0x606d04(0x2a5)](_0x606d04(0x1f9),_0x3098be[_0x606d04(0x340)]);await Charactermancer_StartingEquipment[_0x606d04(0x27b)](this[_0x606d04(0x348)],_0x3098be[_0x606d04(0x1f5)]),Util[_0x606d04(0x291)](_0x3098be[_0x606d04(0x2eb)]);if(Object[_0x606d04(0x31d)](_0x3098be[_0x606d04(0x2eb)])[_0x606d04(0x2cb)])await this[_0x606d04(0x348)][_0x606d04(0x27a)](_0x3098be[_0x606d04(0x2eb)]);}async[_0xd44325(0x368)](_0x5cf6ac,_0x2f4262,_0x127c68){const _0x47d086=_0xd44325,_0x257b04=_0x5cf6ac[_0x47d086(0x27d)];if(_0x127c68)_0x127c68['addImportFeature'](_0x5cf6ac[_0x47d086(0x2a2)],_0x5cf6ac[_0x47d086(0x34d)],_0x5cf6ac[_0x47d086(0x315)]);let _0x5a1a05;switch(_0x5cf6ac[_0x47d086(0x272)]){case _0x47d086(0x281):case'subclassFeature':{const _0x37116f=await DataConverterClass[_0x47d086(0x2c9)](_0x5cf6ac,this['_actor']);_0x5a1a05=_0x37116f,_0x2f4262[_0x47d086(0x300)]['push'](_0x37116f),await DataConverterClass[_0x47d086(0x20f)](this['_actor'],_0x2f4262[_0x47d086(0x22e)],_0x5cf6ac,_0x2f4262),MiscUtil[_0x47d086(0x333)](_0x37116f[_0x47d086(0x2ec)],_0x47d086(0x37e),SharedConsts[_0x47d086(0x30a)],_0x47d086(0x290),_0x5cf6ac[_0x47d086(0x272)]);break;}case'optionalfeature':{const _0x5326ec=await DataConverterOptionalfeature[_0x47d086(0x32c)](_0x257b04);_0x5a1a05=_0x5326ec,_0x2f4262[_0x47d086(0x300)][_0x47d086(0x34e)](_0x5326ec),await DataConverterOptionalfeature['pMutActorUpdateOptionalFeature'](this[_0x47d086(0x348)],_0x2f4262['actorUpdate'],_0x257b04,_0x2f4262),MiscUtil[_0x47d086(0x333)](_0x5326ec[_0x47d086(0x2ec)],_0x47d086(0x37e),SharedConsts[_0x47d086(0x30a)],_0x47d086(0x290),_0x257b04[_0x47d086(0x1f4)]||_0x47d086(0x281));break;}default:throw new Error('Unhandled\x20sub-feature\x20type\x20\x22'+_0x5cf6ac['type']+'\x22');}const _0x19a37f=_0x257b04[_0x47d086(0x1ff)]||_0x257b04[_0x47d086(0x1e4)]||_0x5cf6ac[_0x47d086(0x1ff)],_0x23faf5=_0x257b04[_0x47d086(0x2c4)]||_0x257b04['_ancestorSubclassName']||_0x5cf6ac[_0x47d086(0x2c4)];if(_0x19a37f)MiscUtil[_0x47d086(0x333)](_0x5a1a05[_0x47d086(0x2ec)],'flags',SharedConsts[_0x47d086(0x30a)],_0x47d086(0x1ff),_0x19a37f);if(_0x23faf5)MiscUtil[_0x47d086(0x333)](_0x5a1a05[_0x47d086(0x2ec)],_0x47d086(0x37e),SharedConsts[_0x47d086(0x30a)],_0x47d086(0x2c4),_0x23faf5);}async['_pValidateUserLevelIndices'](_0x55d6ac,_0x42cf01){const _0x38d66f=_0xd44325;if(_0x55d6ac['length']>0x1)return;if(_0x55d6ac[0x0]===0x0)return;const _0xd3ec52=(MiscUtil[_0x38d66f(0x363)](this[_0x38d66f(0x348)],_0x38d66f(0x2ec),_0x38d66f(0x300))||[])[_0x38d66f(0x323)](_0xa1de7e=>_0xa1de7e['type']==='class');if(_0xd3ec52[_0x38d66f(0x2cb)])return;const _0x4bec5b=_0x55d6ac[0x0]+0x1,_0x2884d4=await InputUiUtil[_0x38d66f(0x353)]({'title':_0x38d66f(0x224),'htmlDescription':_0x38d66f(0x2fb)+_0x4bec5b+_0x38d66f(0x335)+(_0x4bec5b===0x2?'':'s')+'\x20'+(_0x4bec5b===0x2?'1':'1-'+(_0x4bec5b-0x1))+_0x38d66f(0x208),'textYes':'Import\x20Levels\x201-'+_0x4bec5b,'textNo':_0x38d66f(0x25e)+_0x4bec5b});if(_0x2884d4==null){_0x42cf01[_0x38d66f(0x244)]=!![];return;}if(_0x2884d4){const _0x3fa005=_0x55d6ac[0x0];for(let _0x1fcd01=0x0;_0x1fcd01<=_0x3fa005;++_0x1fcd01){_0x55d6ac[_0x1fcd01]=_0x1fcd01;}}}async[_0xd44325(0x2be)](_0x44decf,_0x5f2aee){const _0x25899b=_0xd44325,_0x3b7486=new ImportListClass[(_0x25899b(0x287))](this['_actor'],_0x44decf,_0x5f2aee);_0x3b7486[_0x25899b(0x324)](!![]),await _0x3b7486[_0x25899b(0x1f1)]();}async[_0xd44325(0x213)](_0x240b4b,_0x13b222){const _0x2e4335=_0xd44325;if(!_0x240b4b[_0x2e4335(0x311)])return;const _0x5394c2=new Charactermancer_StartingEquipment({'actor':this[_0x2e4335(0x348)],'startingEquipment':_0x240b4b[_0x2e4335(0x311)],'appSubTitle':_0x240b4b[_0x2e4335(0x249)],'equiSpecialSource':_0x240b4b[_0x2e4335(0x34d)],'equiSpecialPage':_0x240b4b[_0x2e4335(0x2a2)]}),_0x2d5887=await _0x5394c2[_0x2e4335(0x1f1)]();if(_0x2d5887==null)return _0x13b222['isCancelled']=!![];if(_0x2d5887===VeCt[_0x2e4335(0x1ea)])return;_0x13b222[_0x2e4335(0x1f5)]=_0x2d5887;}}ImportListClass[_0xd44325(0x369)]=class extends ImportListCharacter[_0xd44325(0x369)]{constructor(_0x1924dd){const _0x368db5=_0xd44325;super(_0x1924dd),_0x1924dd=_0x1924dd||{},this[_0x368db5(0x320)]=!!_0x1924dd[_0x368db5(0x320)],this[_0x368db5(0x300)]=[],this['actorUpdate']={},this[_0x368db5(0x2eb)]={},this['itemsToUpdate']=[],this[_0x368db5(0x2aa)]={},this[_0x368db5(0x1f5)]=null,this['targetLevel']=null,this[_0x368db5(0x1de)]=null,this[_0x368db5(0x24c)]=null,this['isIncludesLevelOne']=null,this[_0x368db5(0x268)]=null,this[_0x368db5(0x31e)]=null,this[_0x368db5(0x20a)]=null;}},ImportListClass[_0xd44325(0x287)]=class extends Application{constructor(_0x1d9711,_0x1c18e5,_0x5eff51){const _0x31a642=_0xd44325;super({'title':_0x31a642(0x37a)+_0x1c18e5[_0x31a642(0x259)],'template':SharedConsts[_0x31a642(0x376)]+'/template/ImportListClassAbilityScoreIncrease.handlebars','width':0x280,'resizable':!![]}),this[_0x31a642(0x22f)]=_0x5eff51,this[_0x31a642(0x318)]=null,this['_reject']=null,this[_0x31a642(0x210)]=new Promise((_0x470419,_0x3f5d28)=>{this['_resolve']=_0x470419,this['_reject']=_0x3f5d28;}),this[_0x31a642(0x21f)]=new ImportListClass[(_0x31a642(0x287))]['Component'](_0x1d9711,_0x5eff51,this[_0x31a642(0x314)][_0x31a642(0x27c)](this));}[_0xd44325(0x2fc)](_0x5b7630){const _0x2cfba6=_0xd44325;this['_comp'][_0x2cfba6(0x324)](_0x5b7630);}async[_0xd44325(0x314)](){const _0x3fa915=_0xd44325;await super[_0x3fa915(0x314)]();if(!this[_0x3fa915(0x21f)]['isDataEntered'])this[_0x3fa915(0x22f)][_0x3fa915(0x244)]=!![];this['_resolve']();}[_0xd44325(0x1f1)](){return this['_pUserInput'];}},ImportListClass['AbilityScoreIncrease'][_0xd44325(0x352)]=class extends BaseComponent{constructor(_0x5c551e,_0x27a1ea,_0x5e6443){const _0x59ea9e=_0xd44325;super(),this[_0x59ea9e(0x348)]=_0x5c551e,this[_0x59ea9e(0x22f)]=_0x27a1ea,this[_0x59ea9e(0x34b)]=_0x5e6443,this[_0x59ea9e(0x380)]=![],Object[_0x59ea9e(0x37c)](this['__state'],{'str':Number(MiscUtil[_0x59ea9e(0x363)](this['_actor'],_0x59ea9e(0x2ec),_0x59ea9e(0x2ec),_0x59ea9e(0x33a),'str',_0x59ea9e(0x24d))||0x0),'dex':Number(MiscUtil[_0x59ea9e(0x363)](this['_actor'],_0x59ea9e(0x2ec),_0x59ea9e(0x2ec),_0x59ea9e(0x33a),_0x59ea9e(0x299),_0x59ea9e(0x24d))||0x0),'con':Number(MiscUtil[_0x59ea9e(0x363)](this[_0x59ea9e(0x348)],_0x59ea9e(0x2ec),_0x59ea9e(0x2ec),_0x59ea9e(0x33a),_0x59ea9e(0x381),'value')||0x0),'int':Number(MiscUtil['get'](this[_0x59ea9e(0x348)],_0x59ea9e(0x2ec),_0x59ea9e(0x2ec),_0x59ea9e(0x33a),'int',_0x59ea9e(0x24d))||0x0),'wis':Number(MiscUtil['get'](this[_0x59ea9e(0x348)],_0x59ea9e(0x2ec),'data',_0x59ea9e(0x33a),_0x59ea9e(0x26c),_0x59ea9e(0x24d))||0x0),'cha':Number(MiscUtil['get'](this['_actor'],'data',_0x59ea9e(0x2ec),'abilities',_0x59ea9e(0x24b),_0x59ea9e(0x24d))||0x0)});}get[_0xd44325(0x216)](){const _0x2ca5e5=_0xd44325;return this[_0x2ca5e5(0x380)];}[_0xd44325(0x324)](_0x431ea9){const _0x4b4067=_0xd44325,_0x443ce1=$(_0x4b4067(0x2ad))[_0x4b4067(0x34c)](()=>this[_0x4b4067(0x261)][_0x4b4067(0x212)]=_0x4b4067(0x2a8)),_0x2eeb6e=$(_0x4b4067(0x297))[_0x4b4067(0x34c)](()=>this[_0x4b4067(0x261)][_0x4b4067(0x212)]='feat'),_0x17ac88=$(_0x4b4067(0x372)),_0x192676=$(_0x4b4067(0x372)),_0xcd6a89=()=>{const _0x7ab08d=_0x4b4067,_0x152951=this[_0x7ab08d(0x261)]['mode']===_0x7ab08d(0x2a8);_0x443ce1['toggleClass'](_0x7ab08d(0x31f),_0x152951),_0x2eeb6e[_0x7ab08d(0x330)](_0x7ab08d(0x31f),!_0x152951),_0x17ac88[_0x7ab08d(0x2a0)](_0x152951),_0x192676['toggleVe'](!_0x152951);};_0xcd6a89(),this['_addHookBase']('mode',_0xcd6a89),this[_0x4b4067(0x204)](_0x17ac88),this[_0x4b4067(0x362)](_0x192676),$$(_0x431ea9)`<div class="flex-col w-100 h-100">
			<div class="flex no-shrink btn-group mb-1">${_0x443ce1}${_0x2eeb6e}</div>
			${_0x17ac88}
			${_0x192676}
		</div>`;}[_0xd44325(0x204)](_0x36da20){const _0x1c63d5=_0xd44325,_0xd73749=[_0x1c63d5(0x337),_0x1c63d5(0x299),_0x1c63d5(0x381),_0x1c63d5(0x20e),_0x1c63d5(0x26c),'cha']['map'](_0x2fefba=>{const _0x5d5940=_0x1c63d5,_0x412b37=$(_0x5d5940(0x2b5)),_0x41c505=$(_0x5d5940(0x2b5)),_0x31917c=()=>{const _0x3c809f=_0x5d5940;_0x412b37[_0x3c809f(0x234)](this[_0x3c809f(0x261)][_0x2fefba]),_0x41c505[_0x3c809f(0x234)](Parser[_0x3c809f(0x1e7)](this[_0x3c809f(0x261)][_0x2fefba]));};this[_0x5d5940(0x232)](_0x2fefba,_0x31917c),_0x31917c();const _0x519575=_0x2fefba+_0x5d5940(0x28f),{$wrp:_0x1c801b,$ipt:_0x3d9a60}=ComponentUiUtil[_0x5d5940(0x31b)](this,_0x519575,0x0,{'min':0x0,'fallbackOnNaN':0x0,'html':'<input\x20type=\x22text\x22\x20class=\x22text-center\x22\x20placeholder=\x220\x22>','asMeta':!![],'decorationRight':'ticker','decorationLeft':_0x5d5940(0x2b3)});_0x3d9a60[_0x5d5940(0x34c)](()=>_0x3d9a60['select']());const _0x1d31ca=$('<div\x20class=\x22col-2\x20text-center\x22></div>'),_0x399408=$(_0x5d5940(0x2b5)),_0x3a974f=()=>{const _0x5b9f1f=_0x5d5940,_0xfc4f93=this[_0x5b9f1f(0x261)][_0x2fefba]+this[_0x5b9f1f(0x261)][_0x519575];_0x1d31ca[_0x5b9f1f(0x234)](_0xfc4f93),_0x399408[_0x5b9f1f(0x234)](Parser[_0x5b9f1f(0x1e7)](_0xfc4f93)),_0x1d31ca[_0x5b9f1f(0x330)]('veapp__msg-error',_0xfc4f93>0x14)['title'](_0xfc4f93>0x14?_0x5b9f1f(0x211):'');};this[_0x5d5940(0x232)](_0x519575,_0x3a974f),_0x3a974f();const _0x577244=$$`<div class="flex w-100 my-1">
				<div class="col-1 text-right bold">${_0x2fefba[_0x5d5940(0x25d)]()}</div>
				${_0x412b37}
				${_0x41c505}
				<div class="col-2">${_0x1c801b}</div>
				<div class="col-1 text-center">=</div>
				${_0x1d31ca}
				${_0x399408}
			</div>`;return{'$row':_0x577244,'$iptBonus':_0x3d9a60};}),_0x27f578=$('<div\x20class=\x22text-center\x22\x20title=\x22Remaining\x22></div>'),_0xbce484=()=>{const _0x162ccb=_0x1c63d5,_0x1530df=['strBonus',_0x162ccb(0x36a),'conBonus','intBonus',_0x162ccb(0x2bf),_0x162ccb(0x391)][_0x162ccb(0x2f3)](_0x29ce8a=>this[_0x162ccb(0x261)][_0x29ce8a])['reduce']((_0x1d7b1e,_0x4e34c4)=>_0x1d7b1e+_0x4e34c4,0x0),_0x22b9a7=_0x1530df>0x2;_0x27f578[_0x162ccb(0x234)](_0x162ccb(0x370)+(0x2-_0x1530df))[_0x162ccb(0x330)](_0x162ccb(0x36f),_0x22b9a7),_0xd73749[_0x162ccb(0x23e)](_0x140a5d=>_0x140a5d[_0x162ccb(0x2a4)][_0x162ccb(0x330)](_0x162ccb(0x349),_0x22b9a7));};['strBonus',_0x1c63d5(0x36a),'conBonus','intBonus',_0x1c63d5(0x2bf),_0x1c63d5(0x391)][_0x1c63d5(0x23e)](_0x517765=>this['_addHookBase'](_0x517765,_0xbce484)),_0xbce484();const _0x2fb516=$(_0x1c63d5(0x2db))['click'](async()=>{const _0x52340c=_0x1c63d5,_0xb1f81b=[this['_state'][_0x52340c(0x214)],this[_0x52340c(0x261)][_0x52340c(0x36a)],this[_0x52340c(0x261)]['conBonus'],this[_0x52340c(0x261)]['intBonus'],this[_0x52340c(0x261)]['wisBonus'],this[_0x52340c(0x261)][_0x52340c(0x391)]]['reduce']((_0xbe6cf5,_0x25c0d8)=>_0xbe6cf5+_0x25c0d8,0x0);if(_0xb1f81b!==0x2)return ui['notifications']['error'](_0x52340c(0x317));await this['_pDoResolve'](!![]);}),_0x3acbf3=$(_0x1c63d5(0x371))[_0x1c63d5(0x34c)](()=>this[_0x1c63d5(0x1e2)](VeCt['SYM_UI_SKIP']));$$(_0x36da20)`
		<div class="flex w-100 my-1 bold">
			<div class="text-center col-1"></div>
			<div class="text-center col-2">Current</div>
			<div class="text-center col-2 ve-muted">Mod</div>
			<div class="text-center col-2 text-center">${_0x27f578}</div>
			<div class="text-center col-1"></div>
			<div class="text-center col-2">Result</div>
			<div class="text-center col-2 ve-muted">Mod</div>
		</div>
		<div class="flex-col w-100 h-100">
			${_0xd73749[_0x1c63d5(0x2f3)](_0x1c699e=>_0x1c699e[_0x1c63d5(0x231)])}
		</div>
		<div class="flex-v-center flex-h-right w-100">${_0x2fb516}${_0x3acbf3}</div>
		`;}['_render_feat'](_0x65ce92){const _0x358ea8=_0xd44325,_0xa5469=$(_0x358ea8(0x361))[_0x358ea8(0x34c)](async()=>{const _0x59f46f=_0x358ea8,_0x577060=await ImportListFeat[_0x59f46f(0x360)][_0x59f46f(0x37f)]({'id':_0x59f46f(0x22c),'name':'Feats','singleName':_0x59f46f(0x25a),'wizardTitleWindow':'Select\x20Source','wizardTitlePanel3':_0x59f46f(0x293),'wizardTitleButtonOpenImporter':_0x59f46f(0x2a3)},'classAbilityScoreIncrease');if(!_0x577060)return;this[_0x59f46f(0x261)][_0x59f46f(0x265)]=_0x577060;}),_0x3bd9b6=$('<div></div>'),_0x1b8604=()=>{const _0x522e60=_0x358ea8;_0x3bd9b6[_0x522e60(0x2bc)]();if(!this['_state']['featData'])return;_0x3bd9b6['html']('<hr\x20class=\x22hr-1\x22><h3\x20class=\x22mb-2\x20mt-0\x22>Selected:\x20'+this[_0x522e60(0x261)][_0x522e60(0x265)][_0x522e60(0x249)]+'</h3>');const {page:_0x187017,source:_0x165a5b,hash:_0x3057bd}=MiscUtil[_0x522e60(0x363)](this[_0x522e60(0x261)]['featData'],_0x522e60(0x37e),SharedConsts[_0x522e60(0x250)])||{};if(!_0x3057bd)return;Renderer[_0x522e60(0x2d8)][_0x522e60(0x313)](_0x187017,_0x165a5b,_0x3057bd)[_0x522e60(0x277)](_0x4b282b=>{const _0x23ec86=_0x522e60;_0x3bd9b6[_0x23ec86(0x2f0)](_0x23ec86(0x29a)+Vetools[_0x23ec86(0x33c)](()=>Renderer['hover'][_0x23ec86(0x322)](UrlUtil[_0x23ec86(0x2f9)],_0x4b282b))+'\x0a\x09\x09\x09\x09\x09');});};_0x1b8604(),this[_0x358ea8(0x232)](_0x358ea8(0x265),_0x1b8604);const _0x34805b=$(_0x358ea8(0x2f2))[_0x358ea8(0x34c)](async()=>{const _0x19d0e4=_0x358ea8;if(!this[_0x19d0e4(0x261)][_0x19d0e4(0x265)])return ui[_0x19d0e4(0x225)]['error'](_0x19d0e4(0x345));await this[_0x19d0e4(0x1e2)](!![]);}),_0x2f599a=$('<button\x20class=\x22btn\x20btn-default\x20btn-5et\x22>Skip</button>')[_0x358ea8(0x34c)](()=>this['_pDoResolve'](VeCt[_0x358ea8(0x1ea)]));$$(_0x65ce92)`
		<div class="flex-col h-100">
			<div class="flex-v-center mb-1">
				${_0xa5469}
				<div class="flex-v-center btn-group">${_0x34805b}${_0x2f599a}</div>
			</div>
			${_0x3bd9b6}
		</div>
		`;}async[_0xd44325(0x1e2)](_0x3c8e52){const _0x1d93ed=_0xd44325;if(!_0x3c8e52)return this[_0x1d93ed(0x34b)]();if(_0x3c8e52===VeCt[_0x1d93ed(0x1ea)])return this[_0x1d93ed(0x380)]=!![],this[_0x1d93ed(0x34b)]();const _0x531b5d=this[_0x1d93ed(0x383)]();_0x531b5d&&(this[_0x1d93ed(0x380)]=!![],await this[_0x1d93ed(0x348)][_0x1d93ed(0x27a)](_0x531b5d));const _0x6bd2fc=this[_0x1d93ed(0x36e)]();_0x6bd2fc&&(this['_isDataEntered']=!![],this['_importOpts']['items'][_0x1d93ed(0x34e)](_0x6bd2fc)),this[_0x1d93ed(0x34b)]();}['_getActorUpdate'](){const _0x17d847=_0xd44325;if(this[_0x17d847(0x261)][_0x17d847(0x212)]!==_0x17d847(0x2a8))return null;return{'data':{'abilities':{'str':{'value':this[_0x17d847(0x261)][_0x17d847(0x337)]+this[_0x17d847(0x261)][_0x17d847(0x214)]},'dex':{'value':this['_state'][_0x17d847(0x299)]+this[_0x17d847(0x261)][_0x17d847(0x36a)]},'con':{'value':this[_0x17d847(0x261)][_0x17d847(0x381)]+this[_0x17d847(0x261)]['conBonus']},'int':{'value':this['_state'][_0x17d847(0x20e)]+this[_0x17d847(0x261)]['intBonus']},'wis':{'value':this[_0x17d847(0x261)][_0x17d847(0x26c)]+this[_0x17d847(0x261)][_0x17d847(0x2bf)]},'cha':{'value':this[_0x17d847(0x261)]['cha']+this[_0x17d847(0x261)][_0x17d847(0x391)]}}}};}[_0xd44325(0x36e)](){const _0x26e16e=_0xd44325;if(this[_0x26e16e(0x261)]['mode']!==_0x26e16e(0x209))return null;return this['_state'][_0x26e16e(0x265)];}[_0xd44325(0x309)](){const _0x5c63ca=_0xd44325;return{'mode':_0x5c63ca(0x2a8),'str':0x0,'dex':0x0,'con':0x0,'int':0x0,'wis':0x0,'cha':0x0,'strBonus':0x0,'dexBonus':0x0,'conBonus':0x0,'intBonus':0x0,'wisBonus':0x0,'chaBonus':0x0,'featData':null};}};export{ImportListClass};