const _0x567c=['_collectionName','push','allPlayerUpdate','folder','disabled','init','length','2272217MpLNuv','.veapp__list','label[data-permu-type=\x22lbl-player-all-entities\x22]','pInitFilterBox','values','tagName','permission','_sortEntities','default','[name=btn-filter]','checked','Save','filterBox','cbAllPlayers','getData','_collection','_$cbAll','data-permu-player-id','.permu__row-ent','render','name','_pageFilter','attr','_$btnReset','_pHandleBtnClick_reset','style','toDisplay','_$cbEach','_absorbFnGetData','label[data-permu-type=\x22lbl-entity-all-players\x22]','playerPermissions','_setMassCheckboxValues','Failed\x20to\x20update\x20','1694609dIlXjM','input','input[name=\x22permu__cb-each-player-all-entities\x22]','_pUpdateItemPermissions','get','handleSelectClick','findIndex','then','_entities','1toqVjE','close','2909QfIzVC','doAbsorbItems','selsPlayers','path','Updating...','EVNT_VALCHANGE','ascSortLower','sort','update','...','scrollLeft','Bulk\x20Permission\x20Editor','_$btnRun','scroll','entities','158581XEPMjH','.fltr__mini-view','closest','1mDvGHz','select[data-permu-type=\x22sel-entity-all-players\x22]','getValues','select[name=\x22permu__sel-all-players-all-entities\x22]','value','getPermissionsEnum','data-permu-value','allPlayerPermissions','_setMassAllPlayerCheckboxValues','children','cbEachPlayer','getMaxWindowHeight','users','Saved!','Updating\x20','9sxFnCG','SELECT','items','filter','setAttribute','[name=\x22btn-save\x22]','.search','val','1711698aadgGs','data','click','text','_$iptSearch','Update\x20Complete','teardown','cbsPlayers','data-permu-entity-id','Please\x20make\x20some\x20changes\x20first!','_pHandleBtnClick_run','forEach','change','10665BHllFd','bind','map','target','.permu__cell-player','visibleItems','Fvtt','entityMeta','MODULE_LOCATION','left','prop','1615142IyqbGu','select[data-permu-type=\x22sel-entity-each-player\x22]','type','select[data-permu-type=\x22sel-player-all-entities\x22]','35KzaWqY','find','metasPlayerUpdates','[name=btn-toggle-summary]','STR_SEE_CONSOLE','_list','unknown','input[data-permu-player-id]','label[data-permu-type=\x22lbl-entity-player\x22]','getFolderPath','_players','select[name=\x22permu__sel-each-player-all-entities\x22]','selAllPlayers','tool-permissions_','ele','_$rowMass'];const _0x587b=function(_0x192d70,_0x2bd047){_0x192d70=_0x192d70-0x104;let _0x567cda=_0x567c[_0x192d70];return _0x567cda;};const _0x176e94=_0x587b;(function(_0xd18f4d,_0x1ea472){const _0x559ce0=_0x587b;while(!![]){try{const _0x313a72=-parseInt(_0x559ce0(0x114))*parseInt(_0x559ce0(0x112))+parseInt(_0x559ce0(0x13d))+-parseInt(_0x559ce0(0x135))*parseInt(_0x559ce0(0x123))+parseInt(_0x559ce0(0x109))+parseInt(_0x559ce0(0x155))+-parseInt(_0x559ce0(0x14a))*parseInt(_0x559ce0(0x159))+-parseInt(_0x559ce0(0x126))*parseInt(_0x559ce0(0x170));if(_0x313a72===_0x1ea472)break;else _0xd18f4d['push'](_0xd18f4d['shift']());}catch(_0x2c5e47){_0xd18f4d['push'](_0xd18f4d['shift']());}}}(_0x567c,0xe6e9b));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{AppFilterBasic}from'./FilterApplications.js';class CollectionPermissionUpdater extends BaseCollectionTool{constructor(_0x58d250){const _0x476876=_0x587b;super({'title':_0x476876(0x11f),'template':SharedConsts[_0x476876(0x152)]+'/template/CollectionPermissionUpdater.handlebars','width':0x3c0,'height':Util[_0x476876(0x131)](),'resizable':!![]},_0x58d250),this[_0x476876(0x185)]=new AppFilterBasic(),this[_0x476876(0x15e)]=null,this[_0x476876(0x180)]=null,this[_0x476876(0x168)]=null,this[_0x476876(0x18b)]=null,this['_$btnRun']=null,this['_$iptSearch']=null,this[_0x476876(0x187)]=null,this[_0x476876(0x163)]=null,this[_0x476876(0x111)]=null;}['activateListeners'](_0x30914c){const _0x365602=_0x587b;super['activateListeners'](_0x30914c);const _0x53bdf8='-2',_0x10332e=_0x30914c[0x0][_0x365602(0x12f)][0x2],_0x283bfb=$(_0x10332e)[_0x365602(0x15a)]('.permu__cell-ent-name')['map']((_0x21bb80,_0x54ed30)=>_0x54ed30)[_0x365602(0x10d)]();_0x10332e['addEventListener'](_0x365602(0x121),()=>{const _0xcc4f4e=_0x365602,_0x386919=_0x10332e[_0xcc4f4e(0x11e)];_0x283bfb[_0xcc4f4e(0x148)](_0x5332f0=>_0x5332f0[_0xcc4f4e(0x189)][_0xcc4f4e(0x153)]=_0x386919+'px');});const _0x427bfc=_0x10332e[_0x365602(0x12f)][0x1];this['_$rowMass']=$(_0x427bfc);const _0xc00371=this['_$rowMass'][_0x365602(0x15a)](_0x365602(0x129))[_0x365602(0x149)](()=>{const _0x386db6=_0x365602,_0x5c44ac=_0xc00371[_0x386db6(0x13c)]();this['_list'][_0x386db6(0x14f)][_0x386db6(0x148)](_0xcfa291=>{const _0x3b5b70=_0x386db6;if(!_0xcfa291['data'][_0x3b5b70(0x17d)]['checked'])return;_0xcfa291[_0x3b5b70(0x13e)][_0x3b5b70(0x165)]['value']=_0x5c44ac,_0xcfa291[_0x3b5b70(0x13e)][_0x3b5b70(0x165)][_0x3b5b70(0x139)](_0x3b5b70(0x12c),_0x5c44ac);}),_0xc00371[_0x386db6(0x13c)](_0x53bdf8);});this[_0x365602(0x180)]=this[_0x365602(0x168)][_0x365602(0x15a)]('input[name=\x22permu__cb-all-players-all-entities\x22]')[_0x365602(0x149)](()=>{const _0x233fb5=_0x365602,_0x2c8397=this['_$cbAll'][_0x233fb5(0x154)](_0x233fb5(0x17a));this[_0x233fb5(0x12e)](_0x2c8397),this[_0x233fb5(0x15e)][_0x233fb5(0x14f)][_0x233fb5(0x148)](_0x49791f=>{const _0x13667c=_0x233fb5;_0x49791f[_0x13667c(0x13e)][_0x13667c(0x17d)][_0x13667c(0x17a)]=_0x2c8397;});});const _0x45fb04=this['_$rowMass'][_0x365602(0x15a)](_0x365602(0x164))['change'](()=>{const _0x42e1b2=_0x365602,_0x242997=_0x45fb04[_0x42e1b2(0x13c)](),_0x2499b9=this['_list'][_0x42e1b2(0x137)][0x0]?this['_list'][_0x42e1b2(0x137)][0x0][_0x42e1b2(0x13e)][_0x42e1b2(0x144)][_0x42e1b2(0x16f)]:0x0;for(let _0x2f27e6=0x0;_0x2f27e6<_0x2499b9;++_0x2f27e6){this[_0x42e1b2(0x15e)][_0x42e1b2(0x14f)]['forEach'](_0x3a106b=>{const _0x54c565=_0x42e1b2;if(!_0x3a106b[_0x54c565(0x13e)][_0x54c565(0x144)][_0x2f27e6]['checked'])return;_0x3a106b[_0x54c565(0x13e)][_0x54c565(0x116)][_0x2f27e6]['value']=_0x242997,_0x3a106b[_0x54c565(0x13e)][_0x54c565(0x116)][_0x2f27e6]['setAttribute']('data-permu-value',_0x242997);});}_0x45fb04['val'](_0x53bdf8);});this[_0x365602(0x18b)]=this[_0x365602(0x168)]['find'](_0x365602(0x10b))[_0x365602(0x149)](()=>{const _0x57b302=_0x365602,_0x306da=this[_0x57b302(0x18b)][_0x57b302(0x154)](_0x57b302(0x17a));this[_0x57b302(0x107)](_0x306da),this[_0x57b302(0x15e)][_0x57b302(0x14f)][_0x57b302(0x148)](_0x4f2c38=>{const _0x198fa3=_0x57b302;_0x4f2c38[_0x198fa3(0x13e)][_0x198fa3(0x130)][_0x198fa3(0x17a)]=_0x306da,_0x4f2c38[_0x198fa3(0x13e)][_0x198fa3(0x144)][_0x198fa3(0x148)](_0x3c76a0=>_0x3c76a0[_0x198fa3(0x17a)]=_0x306da);});}),this['_$rowMass']['on']('change',_0x365602(0x158),_0xdf122b=>{const _0x53261e=_0x365602,_0x6edde3=$(_0xdf122b[_0x53261e(0x14d)]),_0x5c4876=_0x6edde3['val'](),_0x23c61d=_0x6edde3[_0x53261e(0x186)]('data-permu-player-id'),_0x36a04b=this[_0x53261e(0x163)][_0x53261e(0x10f)](_0x2f527a=>_0x2f527a['id']===_0x23c61d);this[_0x53261e(0x15e)][_0x53261e(0x14f)][_0x53261e(0x148)](_0x536f76=>{const _0x5244a7=_0x53261e;if(!_0x536f76[_0x5244a7(0x13e)][_0x5244a7(0x144)][_0x36a04b][_0x5244a7(0x17a)])return;_0x536f76[_0x5244a7(0x13e)][_0x5244a7(0x116)][_0x36a04b]['value']=_0x5c4876,_0x536f76[_0x5244a7(0x13e)]['selsPlayers'][_0x36a04b][_0x5244a7(0x139)](_0x5244a7(0x12c),_0x5c4876);}),_0x6edde3[_0x53261e(0x13c)](_0x53bdf8);}),this[_0x365602(0x168)]['on'](_0x365602(0x13f),_0x365602(0x172),_0x13d547=>{const _0xe5cab8=_0x365602;if(_0x13d547[_0xe5cab8(0x14d)][_0xe5cab8(0x175)]===_0xe5cab8(0x136))return;const _0x13bb53=$(_0x13d547[_0xe5cab8(0x14d)])[_0xe5cab8(0x125)](_0xe5cab8(0x14e)),_0x49e9c2=_0x13bb53[_0xe5cab8(0x15a)](_0xe5cab8(0x10a)),_0x5c84b4=_0x49e9c2[_0xe5cab8(0x154)]('checked'),_0x28c8fa=_0x49e9c2['attr'](_0xe5cab8(0x181)),_0x483ffe=this[_0xe5cab8(0x163)][_0xe5cab8(0x10f)](_0x5ed11d=>_0x5ed11d['id']===_0x28c8fa);this[_0xe5cab8(0x15e)][_0xe5cab8(0x14f)][_0xe5cab8(0x148)](_0x1e4896=>{const _0x2d007f=_0xe5cab8;_0x1e4896[_0x2d007f(0x13e)][_0x2d007f(0x144)][_0x483ffe][_0x2d007f(0x17a)]=_0x5c84b4;});}),_0x30914c['on'](_0x365602(0x149),_0x365602(0x127),_0x1f6064=>{const _0x2cfe2b=_0x365602,_0x3a592f=$(_0x1f6064[_0x2cfe2b(0x14d)]);_0x3a592f[_0x2cfe2b(0x186)](_0x2cfe2b(0x12c),_0x3a592f['val']());}),_0x30914c['on'](_0x365602(0x13f),_0x365602(0x105),_0x41389e=>{const _0x43a5f1=_0x365602;if(_0x41389e['target'][_0x43a5f1(0x175)]===_0x43a5f1(0x136))return;const _0x36117d=$(_0x41389e[_0x43a5f1(0x14d)])['closest'](_0x43a5f1(0x182)),_0x3292e2=_0x36117d[_0x43a5f1(0x186)](_0x43a5f1(0x145)),_0xc9b2a7=this[_0x43a5f1(0x15e)][_0x43a5f1(0x137)][_0x43a5f1(0x15a)](_0xb4553f=>_0xb4553f[_0x43a5f1(0x174)]['id']===_0x3292e2);ListUiUtil[_0x43a5f1(0x10e)](this[_0x43a5f1(0x15e)],_0xc9b2a7,_0x41389e,{'fnGetCb':_0x243961=>_0x243961['data'][_0x43a5f1(0x17d)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x9206e6,_0x1697d8)=>{const _0x3af91a=_0x43a5f1;_0x9206e6['data'][_0x3af91a(0x17d)][_0x3af91a(0x17a)]=_0x1697d8;}});}),_0x30914c['on'](_0x365602(0x149),_0x365602(0x156),_0x17eab8=>{const _0x31eceb=_0x365602,_0x3008b8=$(_0x17eab8[_0x31eceb(0x14d)]),_0x19c248=_0x3008b8['val'](),_0x32e3b0=_0x3008b8[_0x31eceb(0x125)](_0x31eceb(0x182)),_0x599949=_0x32e3b0[_0x31eceb(0x186)](_0x31eceb(0x145)),_0x2623b1=this[_0x31eceb(0x15e)][_0x31eceb(0x137)][_0x31eceb(0x15a)](_0x294698=>_0x294698[_0x31eceb(0x174)]['id']===_0x599949),_0xe66a3f=_0x2623b1[_0x31eceb(0x13e)]['cbsPlayers']['length'];for(let _0x2aafb5=0x0;_0x2aafb5<_0xe66a3f;++_0x2aafb5){if(!_0x2623b1[_0x31eceb(0x13e)][_0x31eceb(0x144)][_0x2aafb5][_0x31eceb(0x17a)])continue;_0x2623b1[_0x31eceb(0x13e)][_0x31eceb(0x116)][_0x2aafb5]['value']=_0x19c248,_0x2623b1['data'][_0x31eceb(0x116)][_0x2aafb5][_0x31eceb(0x139)]('data-permu-value',_0x19c248);}_0x3008b8[_0x31eceb(0x13c)](_0x53bdf8);}),_0x30914c['on'](_0x365602(0x13f),'label[data-permu-type=\x22lbl-entity-each-player\x22]',_0xfb1e80=>{const _0x1e75c0=_0x365602;if(_0xfb1e80[_0x1e75c0(0x14d)][_0x1e75c0(0x175)]===_0x1e75c0(0x136))return;const _0x2d6068=$(_0xfb1e80[_0x1e75c0(0x14d)])[_0x1e75c0(0x125)](_0x1e75c0(0x182)),_0x3265d8=_0x2d6068[_0x1e75c0(0x186)](_0x1e75c0(0x145)),_0x5b12a0=this[_0x1e75c0(0x15e)][_0x1e75c0(0x137)][_0x1e75c0(0x15a)](_0x3cf3eb=>_0x3cf3eb['values']['id']===_0x3265d8);ListUiUtil[_0x1e75c0(0x10e)](this[_0x1e75c0(0x15e)],_0x5b12a0,_0xfb1e80,{'fnGetCb':_0x289c9f=>_0x289c9f[_0x1e75c0(0x13e)][_0x1e75c0(0x130)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x1f79c3,_0x143a58)=>{const _0x897e1b=_0x1e75c0;_0x1f79c3[_0x897e1b(0x13e)][_0x897e1b(0x144)]['forEach'](_0x374b09=>_0x374b09['checked']=_0x143a58);}});}),_0x30914c['on'](_0x365602(0x149),'select[data-permu-type=\x22sel-entity\x22]',_0x28b57d=>{const _0x24a02b=_0x365602,_0x2944fd=$(_0x28b57d[_0x24a02b(0x14d)]);_0x2944fd[_0x24a02b(0x186)](_0x24a02b(0x12c),_0x2944fd[_0x24a02b(0x13c)]());}),_0x30914c['on'](_0x365602(0x13f),_0x365602(0x161),_0x31e88e=>{const _0x1efcd9=_0x365602;if(_0x31e88e[_0x1efcd9(0x14d)]['tagName']===_0x1efcd9(0x136))return;const _0x174c17=$(_0x31e88e[_0x1efcd9(0x14d)])['closest'](_0x1efcd9(0x182)),_0x55b56c=$(_0x31e88e[_0x1efcd9(0x14d)])['closest'](_0x1efcd9(0x14e))[_0x1efcd9(0x15a)]('input[data-permu-player-id]'),_0x2df472=_0x174c17['attr']('data-permu-entity-id'),_0x425194=_0x55b56c[_0x1efcd9(0x186)](_0x1efcd9(0x181)),_0x1b5032=this['_players'][_0x1efcd9(0x10f)](_0x41f919=>_0x41f919['id']===_0x425194),_0x220e57=this[_0x1efcd9(0x15e)][_0x1efcd9(0x137)]['find'](_0x356675=>_0x356675[_0x1efcd9(0x174)]['id']===_0x2df472);ListUiUtil[_0x1efcd9(0x10e)](this[_0x1efcd9(0x15e)],_0x220e57,_0x31e88e,{'fnGetCb':_0x3795f7=>_0x3795f7[_0x1efcd9(0x13e)][_0x1efcd9(0x144)][_0x1b5032],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x218e87,_0x2ff12a)=>{const _0x592b4f=_0x1efcd9;_0x218e87[_0x592b4f(0x13e)][_0x592b4f(0x144)][_0x1b5032]['checked']=_0x2ff12a;}});}),this[_0x365602(0x120)]=_0x30914c[_0x365602(0x15a)](_0x365602(0x13a))[_0x365602(0x13f)](async()=>this[_0x365602(0x147)]()),this[_0x365602(0x141)]=_0x30914c[_0x365602(0x15a)](_0x365602(0x13b)),this['_$btnReset']=_0x30914c['find']('[name=\x22btn-reset\x22]')[_0x365602(0x13f)](()=>this[_0x365602(0x188)]()),this[_0x365602(0x15e)]=new List({'$iptSearch':_0x30914c[_0x365602(0x15a)](_0x365602(0x13b)),'$wrpList':_0x30914c[_0x365602(0x15a)](_0x365602(0x171)),'fnSort':CollectionPermissionUpdater[_0x365602(0x177)]}),this[_0x365602(0x185)][_0x365602(0x173)]({'$iptSearch':this['_$iptSearch'],'$btnReset':this[_0x365602(0x187)],'$btnOpen':_0x30914c[_0x365602(0x15a)](_0x365602(0x179)),'$btnToggleSummaryHidden':_0x30914c['find'](_0x365602(0x15c)),'$wrpMiniPills':_0x30914c['find'](_0x365602(0x124)),'namespace':_0x365602(0x166)+this[_0x365602(0x169)]})[_0x365602(0x110)](()=>{const _0x56b8ae=_0x365602;this['_entities']['forEach'](_0x1f7e62=>this[_0x56b8ae(0x185)]['addToFilters'](_0x1f7e62)),this[_0x56b8ae(0x15e)][_0x56b8ae(0x115)](this[_0x56b8ae(0x111)],{'fnGetName':_0x109f90=>_0x109f90[_0x56b8ae(0x184)],'fnGetValues':_0x11fb81=>({'id':_0x11fb81['id'],'path':_0x11fb81['path']}),'fnGetData':CollectionPermissionUpdater[_0x56b8ae(0x104)]}),this[_0x56b8ae(0x15e)][_0x56b8ae(0x16e)](),this['_pageFilter'][_0x56b8ae(0x17c)][_0x56b8ae(0x183)](),this['_pageFilter'][_0x56b8ae(0x17c)]['on'](FilterBox[_0x56b8ae(0x119)],this['_handleFilterChange'][_0x56b8ae(0x14b)](this)),this['_handleFilterChange']();});}async[_0x176e94(0x147)](){const _0x3252aa=_0x176e94;if(!this[_0x3252aa(0x15e)])return;const _0x16b0aa=[];this[_0x3252aa(0x111)][_0x3252aa(0x148)](_0x1f8818=>{const _0x8e01d5=_0x3252aa,_0x3d245f=this[_0x8e01d5(0x15e)][_0x8e01d5(0x137)]['find'](_0x571cc7=>_0x571cc7[_0x8e01d5(0x174)]['id']===_0x1f8818['id']);let _0x23e5fb=null;const _0x3fd310=[],_0x38908e=''+_0x1f8818[_0x8e01d5(0x12d)];if(_0x3d245f[_0x8e01d5(0x13e)][_0x8e01d5(0x165)][_0x8e01d5(0x12a)]!==_0x38908e)_0x23e5fb=_0x3d245f[_0x8e01d5(0x13e)][_0x8e01d5(0x165)][_0x8e01d5(0x12a)];_0x3d245f['data']['selsPlayers'][_0x8e01d5(0x148)]((_0x305937,_0x19cf80)=>{const _0x33e886=_0x8e01d5,_0x1610c7=this[_0x33e886(0x163)][_0x19cf80]['id'],_0x1ba24d=''+_0x1f8818[_0x33e886(0x106)][_0x1610c7];if(_0x305937['value']!==_0x1ba24d)_0x3fd310[_0x33e886(0x16a)]({'value':_0x305937[_0x33e886(0x12a)],'playerId':_0x1610c7});});if(_0x23e5fb!=null||_0x3fd310[_0x8e01d5(0x16f)])_0x16b0aa[_0x8e01d5(0x16a)]({'entityMeta':_0x1f8818,'metasPlayerUpdates':_0x3fd310,'allPlayerUpdate':_0x23e5fb});});if(!_0x16b0aa)return ui['notifications']['warn'](_0x3252aa(0x146));this[_0x3252aa(0x120)][_0x3252aa(0x186)](_0x3252aa(0x16d),!![])[_0x3252aa(0x140)]('Saving...');const _0xf567f4=_0x16b0aa[_0x3252aa(0x14c)](_0x5c31e4=>new Util['Task'](''+_0x5c31e4[_0x3252aa(0x151)]['path']+_0x5c31e4[_0x3252aa(0x151)][_0x3252aa(0x184)],()=>this[_0x3252aa(0x10c)](_0x5c31e4)));await UtilApplications['pRunTasks'](_0xf567f4,{'titleInitial':_0x3252aa(0x118),'titleComplete':_0x3252aa(0x142),'fnGetRowRunningText':_0x1492fb=>_0x3252aa(0x134)+_0x1492fb+_0x3252aa(0x11d),'fnGetRowSuccessText':_0x198d58=>'Updated\x20'+_0x198d58+'.','fnGetRowErrorText':_0x2e7f1f=>_0x3252aa(0x108)+_0x2e7f1f+'!\x20'+VeCt[_0x3252aa(0x15d)]}),this[_0x3252aa(0x120)][_0x3252aa(0x186)]('disabled',![])[_0x3252aa(0x140)](_0x3252aa(0x133)),setTimeout(()=>this['_$btnRun'][_0x3252aa(0x140)](_0x3252aa(0x17b)),VeCt['DUR_INLINE_NOTIFY']);}async['_pUpdateItemPermissions'](_0x27bab8){const _0x333dff=_0x176e94,_0x236fa7=this[_0x333dff(0x17f)][_0x333dff(0x10d)](_0x27bab8['entityMeta']['id']),_0x1a9716={..._0x236fa7[_0x333dff(0x13e)][_0x333dff(0x176)]};_0x27bab8[_0x333dff(0x16b)]!=null&&(_0x1a9716[_0x333dff(0x178)]=Number(_0x27bab8['allPlayerUpdate'])),(_0x27bab8['metasPlayerUpdates']||[])[_0x333dff(0x148)](_0x250c33=>{const {playerId:_0x50028c,value:_0x2e8d1a}=_0x250c33;_0x1a9716[_0x50028c]=Number(_0x2e8d1a);}),await _0x236fa7[_0x333dff(0x11c)]({'permission':{}}),await _0x236fa7[_0x333dff(0x11c)]({'permission':_0x1a9716}),_0x27bab8['allPlayerUpdate']!=null&&(_0x27bab8[_0x333dff(0x151)][_0x333dff(0x12d)]=''+_0x27bab8[_0x333dff(0x16b)]),(_0x27bab8[_0x333dff(0x15b)]||[])[_0x333dff(0x148)](_0x3f801e=>{const _0x52f2b5=_0x333dff,{playerId:_0x131382,value:_0x1055a6}=_0x3f801e;_0x27bab8[_0x52f2b5(0x151)][_0x52f2b5(0x106)][_0x131382]=''+_0x1055a6;});}async[_0x176e94(0x188)](){const _0x2fa3be=_0x176e94;this['_$iptSearch'][_0x2fa3be(0x13c)](''),this[_0x2fa3be(0x180)]['prop'](_0x2fa3be(0x17a),![]),this[_0x2fa3be(0x12e)](![]),this[_0x2fa3be(0x18b)][_0x2fa3be(0x154)]('checked',![]),this[_0x2fa3be(0x107)](![]),this['_entities'][_0x2fa3be(0x148)](_0xb3b4f9=>{const _0x14b277=_0x2fa3be,_0x3447bf=this[_0x14b277(0x15e)][_0x14b277(0x137)][_0x14b277(0x15a)](_0x32258d=>_0x32258d[_0x14b277(0x174)]['id']===_0xb3b4f9['id']);_0x3447bf['data'][_0x14b277(0x130)][_0x14b277(0x17a)]=![],_0x3447bf['data']['cbsPlayers']['forEach'](_0x47c5ab=>_0x47c5ab[_0x14b277(0x17a)]=![]),_0x3447bf[_0x14b277(0x13e)]['selsPlayers']['forEach']((_0x2fe3e6,_0x5526f0)=>{const _0x5cfb85=_0x14b277,_0x3c8927=this[_0x5cfb85(0x163)][_0x5526f0]['id'],_0x41fcb8=''+_0xb3b4f9['playerPermissions'][_0x3c8927];_0x2fe3e6['value']=_0x41fcb8,_0x2fe3e6[_0x5cfb85(0x139)]('data-permu-value',_0x41fcb8);});});}[_0x176e94(0x12e)](_0x56a996){const _0x534638=_0x176e94;this[_0x534638(0x15e)][_0x534638(0x14f)][_0x534638(0x148)](_0x314fc6=>_0x314fc6[_0x534638(0x13e)]['cbAllPlayers'][_0x534638(0x17a)]=_0x56a996);}[_0x176e94(0x107)](_0x57f053){const _0x750399=_0x176e94;this[_0x750399(0x168)]['find'](_0x750399(0x160))[_0x750399(0x10d)]()[_0x750399(0x148)](_0x3c94e1=>_0x3c94e1['checked']=_0x57f053);}['_handleFilterChange'](){const _0x534a48=_0x176e94,_0x1951e9=this[_0x534a48(0x185)][_0x534a48(0x17c)][_0x534a48(0x128)]();this[_0x534a48(0x15e)][_0x534a48(0x138)](_0x32a7d3=>this['_pageFilter'][_0x534a48(0x18a)](_0x1951e9,this[_0x534a48(0x111)][_0x32a7d3['ix']]));}static['_absorbFnGetData'](_0x1c07d0){const _0x134555=_0x176e94,_0x59074e=_0x1c07d0['ele'][_0x134555(0x12f)][0x2],_0x3a4bd6=_0x1c07d0[_0x134555(0x167)]['children'][0x3],_0x559001=[..._0x1c07d0[_0x134555(0x167)]['children']]['slice'](0x4);return{'cbAllPlayers':_0x59074e[_0x134555(0x12f)][0x0],'selAllPlayers':_0x59074e[_0x134555(0x12f)][0x1],'cbEachPlayer':_0x3a4bd6[_0x134555(0x12f)][0x0],'selEachPlayer':_0x3a4bd6[_0x134555(0x12f)][0x1],'cbsPlayers':_0x559001['map'](_0x22458f=>_0x22458f['children'][0x0]),'selsPlayers':_0x559001[_0x134555(0x14c)](_0x16c33d=>_0x16c33d['children'][0x1])};}static[_0x176e94(0x177)](_0x176a6f,_0x5e9368){const _0x39c289=_0x176e94,_0x4b0306=_0x176a6f['values']?_0x176a6f[_0x39c289(0x174)][_0x39c289(0x117)]:_0x176a6f['path'],_0xae0701=_0x5e9368['values']?_0x5e9368[_0x39c289(0x174)][_0x39c289(0x117)]:_0x5e9368[_0x39c289(0x117)];if(_0x4b0306&&!_0xae0701)return-0x1;if(!_0x4b0306&&_0xae0701)return 0x1;return SortUtil['ascSortLower'](_0x4b0306,_0xae0701)||SortUtil[_0x39c289(0x11a)](_0x176a6f[_0x39c289(0x184)],_0x5e9368['name']);}[_0x176e94(0x17e)](){const _0x200e23=_0x176e94;return this[_0x200e23(0x163)]=game[_0x200e23(0x132)][_0x200e23(0x122)][_0x200e23(0x14c)](_0x295d9a=>({'id':_0x295d9a['id'],'name':_0x295d9a['name']})),this[_0x200e23(0x111)]=this[_0x200e23(0x17f)][_0x200e23(0x122)][_0x200e23(0x14c)]((_0x31c263,_0xbd1b87)=>{const _0x1d0cce=_0x200e23,_0x58972c=UtilApplications[_0x1d0cce(0x162)](_0x31c263,{'isAddTrailingSlash':!![]}),_0x938118=(_0x31c263[_0x1d0cce(0x13e)]||{})['permission']||{},_0x3147fd=_0x938118[_0x1d0cce(0x178)]!=null?_0x938118[_0x1d0cce(0x178)]:-0x1;return{'id':_0x31c263['id'],'name':_0x31c263[_0x1d0cce(0x184)],'allPlayerPermissions':_0x3147fd,'playerPermissions':this[_0x1d0cce(0x163)][_0x1d0cce(0x14c)](_0x5f42df=>_0x5f42df['id'])['mergeMap'](_0x4553d9=>{const _0x493dc0=_0x938118[_0x4553d9]!=null?_0x938118[_0x4553d9]:-0x1;return{[_0x4553d9]:_0x493dc0};}),'type':MiscUtil['get'](_0x31c263,_0x1d0cce(0x13e),_0x1d0cce(0x157))||_0x1d0cce(0x15f),'folderId':_0x31c263[_0x1d0cce(0x16c)]?_0x31c263[_0x1d0cce(0x16c)]['id']:null,'path':_0x58972c||'','ix':_0xbd1b87};}),this[_0x200e23(0x111)][_0x200e23(0x11b)](CollectionPermissionUpdater['_sortEntities']),{...super[_0x200e23(0x17e)](),'titleSearch':this['_collectionName']+'s','players':this[_0x200e23(0x163)],'entities':this[_0x200e23(0x111)],'permissions':Util[_0x200e23(0x150)][_0x200e23(0x12b)]()};}['close'](..._0x4b783b){const _0x3cc512=_0x176e94;return this[_0x3cc512(0x185)][_0x3cc512(0x143)](),super[_0x3cc512(0x113)](..._0x4b783b);}}export{CollectionPermissionUpdater};