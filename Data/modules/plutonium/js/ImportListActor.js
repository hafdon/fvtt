const _0x46cc=['physical','section','isSkip','proficient','Cannot\x20import\x20','ABIL_ABVS','piercing','join','_pImportEntry_hasTokenImage','_pImportEntry_fillConditionsDamage','_pImportEntry_pFillItems','abs','log','expert','OwnedItem','setFirstSection','importEntity','actor','_pack','mystery-man.svg','map','blindsight','getAbilityModNumber','isOverwrite','_pImportEntry_fillData_Abilities','immune','name','_pImportEntry_pFillBase','_data','update','darkvision','custom','\x22\x20=\x20\x22','source','forEach','find','Unimplemented!','entries','vulnerable','_id','VALID_DAMAGE_TYPES','_getDuplicateMeta','tokenBarDisplay','slashing','sourceJsonToAbv','\x22\x20bonus\x20\x22','_pImportEntry_pFillBase_pGetCompendiumImage','note','abilities','type','_pImportEntry_pFillToken',')\x20save\x20\x22','insert','resist','pGetCompendiumImage','img','tokenDisposition','\x22\x20(','existing','_PROPS_DAMAGE_IMM_VULN_RES','actors','TASK_EXIT_SKIPPED_DUPLICATE','_actorType','Importing\x20','_getBiographyValue','size','assumedPb','tokenNameDisplay','updateEntity','_pImportEntry_pGetImportMetadata','has','tokenIsAddVision','intToBonus','_actor','tremorsense','\x20to\x20actor!','ACTOR_TEMP_NAME','TASK_EXIT_COMPLETE','_displayName','deleteEmbeddedEntity','actorType','VALID_CONDITIONS','save','setEq','_props','includes','get','assign','_pImportEntry_getTokenImage','senses','isTemp','icons/svg/mystery-man.svg','add','data','tokenBar1Attribute','\x22\x20did\x20not\x20match\x20an\x20expected\x20modifier/proficiency\x20amount!\x20A\x20fallback\x20value\x20(\x22','max','_SET_PHYSICAL_DAMAGE','warn','monImmResToFull','create','tokenBar2Attribute','copy','conditionImmune','exec','some','items','hasTokenUrl'];(function(_0x58a77c,_0x46cc88){const _0x1488c0=function(_0x52c413){while(--_0x52c413){_0x58a77c['push'](_0x58a77c['shift']());}};_0x1488c0(++_0x46cc88);}(_0x46cc,0xdf));const _0x1488=function(_0x58a77c,_0x46cc88){_0x58a77c=_0x58a77c-0x0;let _0x1488c0=_0x46cc[_0x58a77c];return _0x1488c0;};const _0x350765=_0x1488;import{ImportList}from'./ImportList.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Consts}from'./Consts.js';class ImportListActor extends ImportList{constructor(_0x52c413,_0x2b45e2,_0x255d74,_0x3aa69c){const _0x23805c=_0x1488;super(_0x52c413,_0x2b45e2,_0x255d74),this['_actorType']=_0x3aa69c[_0x23805c('0x49')];}async['pImportEntry'](_0x129012,_0x594b21){const _0x29076f=_0x1488;_0x594b21=_0x594b21||{},console[_0x29076f('0x5')](...LGT,_0x29076f('0x38')+this['_actorType']+'\x20\x22'+_0x129012['name']+'\x22\x20(from\x20\x22'+Parser[_0x29076f('0x25')](_0x129012[_0x29076f('0x1a')])+'\x22)');if(this[_0x29076f('0x42')])throw new Error(_0x29076f('0x69')+this[_0x29076f('0x37')]+_0x29076f('0x44'));let _0x402ccf;const _0x25979c=this[_0x29076f('0x22')]({'entity':_0x129012});if(_0x25979c[_0x29076f('0x67')])return{'status':UtilApplications[_0x29076f('0x36')]};else{if(_0x25979c[_0x29076f('0x10')])_0x402ccf=_0x25979c[_0x29076f('0x33')];else _0x402ccf=this['_pack']?null:await Actor[_0x29076f('0x5d')]({'name':Consts[_0x29076f('0x45')],'type':this['_actorType']},{'renderSheet':!!_0x594b21[_0x29076f('0x53')],'temporary':!!_0x594b21['isTemp']});}const {dataBuilderOpts:_0x1b7958,actorData:_0x1ee47e}=await this['_pImportEntry_pGetImportMetadata'](_0x402ccf,_0x129012,_0x594b21);if(_0x594b21['isTemp'])return _0x402ccf=await Actor['create']({..._0x1ee47e,'type':this[_0x29076f('0x37')]},{'renderSheet':!![],'temporary':!![]}),_0x1b7958[_0x29076f('0xa')]=_0x402ccf,await this[_0x29076f('0x3')](_0x129012,_0x1ee47e,_0x1b7958,_0x594b21),{'imported':_0x402ccf,'status':UtilApplications[_0x29076f('0x46')]};else{if(this[_0x29076f('0xb')]){if(_0x25979c['isOverwrite'])return _0x1b7958['actor']=_0x402ccf,Object[_0x29076f('0x50')](_0x402ccf['data'],_0x1ee47e),_0x402ccf['data'][_0x29076f('0x63')]=[],await this[_0x29076f('0x3')](_0x129012,_0x1ee47e,_0x1b7958,_0x594b21),await this[_0x29076f('0xb')][_0x29076f('0x3d')](MiscUtil['copy'](_0x402ccf[_0x29076f('0x56')])),{'imported':_0x402ccf,'status':UtilApplications[_0x29076f('0x46')]};else{_0x402ccf=await Actor['create']({..._0x1ee47e,'type':this[_0x29076f('0x37')]},{'temporary':!![]}),_0x1b7958[_0x29076f('0xa')]=_0x402ccf,await this[_0x29076f('0x3')](_0x129012,_0x1ee47e,_0x1b7958,_0x594b21);if(_0x402ccf[_0x29076f('0x15')])_0x402ccf[_0x29076f('0x15')]=MiscUtil[_0x29076f('0x5f')](_0x402ccf['data']);await this[_0x29076f('0xb')][_0x29076f('0x9')](_0x402ccf);}return{'imported':_0x402ccf,'status':UtilApplications[_0x29076f('0x46')]};}else{if(_0x25979c[_0x29076f('0x10')])await _0x402ccf[_0x29076f('0x48')](_0x29076f('0x7'),_0x402ccf['data'][_0x29076f('0x63')][_0x29076f('0xd')](_0x5cf5f3=>_0x5cf5f3['id']||_0x5cf5f3[_0x29076f('0x20')]));return await this['_pImportEntry_pFillItems'](_0x129012,_0x1ee47e,_0x1b7958,_0x594b21),await _0x402ccf[_0x29076f('0x16')](_0x1ee47e),await game[_0x29076f('0x35')][_0x29076f('0x2d')](_0x402ccf),{'imported':_0x402ccf,'status':UtilApplications['TASK_EXIT_COMPLETE']};}}}[_0x350765('0x3e')](){const _0x5842c7=_0x350765;throw new Error(_0x5842c7('0x1d'));}[_0x350765('0x3')](){}[_0x350765('0x1')](_0x5c4e6b){const _0x55ed91=_0x350765;return this[_0x55ed91('0x4d')][_0x55ed91('0x62')](_0x333cab=>Vetools['hasTokenUrl'](_0x333cab,_0x5c4e6b));}[_0x350765('0x51')](_0x5aca2a){const _0x11bfec=_0x350765,_0x3dbfe3=this[_0x11bfec('0x4d')][_0x11bfec('0x1c')](_0x575206=>Vetools[_0x11bfec('0x64')](_0x575206,_0x5aca2a));if(_0x3dbfe3)return Vetools['getTokenUrl'](_0x3dbfe3,_0x5aca2a);return _0x11bfec('0x54');}async[_0x350765('0x14')](_0x2fa24d,_0x11dd90,_0xa3a880){const _0x287892=_0x350765;_0x11dd90[_0x287892('0x13')]=DataConverter['getNameWithSourcePart'](_0x2fa24d);let _0x1f0e85=Vetools['getImageUrlFromFluff'](_0xa3a880);if(!_0x1f0e85){if(this['_pImportEntry_hasTokenImage'](_0x2fa24d))_0x1f0e85=this['_pImportEntry_getTokenImage'](_0x2fa24d);else{const _0x2344c3=await this[_0x287892('0x27')](_0x2fa24d);if(_0x2344c3)_0x1f0e85=_0x2344c3;else _0x1f0e85=this[_0x287892('0x51')](_0x2fa24d);}}_0x11dd90[_0x287892('0x30')]=_0x1f0e85,_0x11dd90[_0x287892('0x2a')]=this[_0x287892('0x37')];}async[_0x350765('0x27')](_0x35a698){const _0x4235a4=_0x350765;for(const _0x536560 of this[_0x4235a4('0x4d')]){const _0x5575bb=await DataConverter[_0x4235a4('0x2f')](_0x536560,_0x35a698);if(_0x5575bb&&!_0x5575bb['toLowerCase']()[_0x4235a4('0x4e')](_0x4235a4('0xc')))return _0x5575bb;}return null;}async[_0x350765('0x2b')](_0xde9c09,_0x4c5c43,_0x11e1f6){const _0x5f16ec=_0x350765;let _0xd1c0c4=0x1;switch(_0xde9c09[_0x5f16ec('0x3a')]||'M'){case'T':_0xd1c0c4=0.5;break;case'L':_0xd1c0c4=0x2;break;case'H':_0xd1c0c4=0x3;break;case'G':_0xd1c0c4=0x4;break;}let _0x532c12=0x0,_0x295e61=0x0;(_0xde9c09[_0x5f16ec('0x52')]||[])[_0x5f16ec('0x1b')](_0x494ec0=>{const _0x53df17=_0x5f16ec,_0x158352=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x53df17('0x61')](_0x494ec0);if(_0x158352){const _0x3de323=Number(_0x158352[0x2]);switch(_0x158352[0x1]){case _0x53df17('0x17'):_0x532c12=Math[_0x53df17('0x59')](_0x532c12,_0x3de323);break;case _0x53df17('0xe'):case _0x53df17('0x43'):case'truesight':_0x295e61=Math[_0x53df17('0x59')](_0x295e61,_0x3de323);break;}}}),_0x4c5c43['token']={'displayName':Config[_0x5f16ec('0x4f')](_0x11e1f6,_0x5f16ec('0x3c')),'name':UtilApplications['getCleanEntityName'](_0xde9c09[_0x5f16ec('0x47')]||_0xde9c09[_0x5f16ec('0x13')]),'img':this[_0x5f16ec('0x51')](_0xde9c09),'width':_0xd1c0c4,'height':_0xd1c0c4,'scale':0x1,'elevation':0x0,'lockRotation':![],'rotation':0x0,'vision':Config[_0x5f16ec('0x4f')](_0x11e1f6,_0x5f16ec('0x40')),'dimSight':_0x532c12,'brightSight':_0x295e61,'dimLight':0x0,'brightLight':0x0,'sightAngle':0x168,'lightAngle':0x168,'actorLink':![],'actorData':{},'disposition':Config[_0x5f16ec('0x4f')](_0x11e1f6,_0x5f16ec('0x31')),'displayBars':Config[_0x5f16ec('0x4f')](_0x11e1f6,_0x5f16ec('0x23')),'bar1':{'attribute':Config['get'](_0x11e1f6,_0x5f16ec('0x57'))},'bar2':{'attribute':Config[_0x5f16ec('0x4f')](_0x11e1f6,_0x5f16ec('0x5e'))},'flags':{},'effects':[],'randomImg':![]};}[_0x350765('0x11')](_0x28d2f6,_0xf02460,_0x4745c6){const _0x6e1d91=_0x350765,_0x369332={};Parser[_0x6e1d91('0x6a')]['forEach'](_0x13e490=>{const _0x839702=_0x6e1d91;let _0x94b28b=0x0;const _0x414bec=Parser[_0x839702('0xf')](_0x28d2f6[_0x13e490]);if(_0x28d2f6[_0x839702('0x4b')]&&_0x28d2f6[_0x839702('0x4b')][_0x13e490]){const _0x80a105=Number(_0x28d2f6['save'][_0x13e490]);if(!isNaN(_0x80a105)){const _0x4546dc=Parser[_0x839702('0xf')](_0x28d2f6[_0x13e490]),_0x20f66b=_0x4546dc+(_0x4745c6[_0x839702('0x3b')]||_0x4745c6['pb']),_0x313daa=_0x4546dc+0x2*(_0x4745c6[_0x839702('0x3b')]||_0x4745c6['pb']);if(_0x20f66b===_0x80a105)_0x94b28b=0x1;else{if(_0x313daa===_0x80a105)_0x94b28b=0x2;else{const _0x42a4f2=Math['abs'](_0x80a105-_0x20f66b),_0x557cac=Math[_0x839702('0x4')](_0x80a105-_0x313daa);if(_0x42a4f2<_0x557cac)_0x94b28b=0x1;else _0x94b28b=0x2;const _0x8dc16=_0x94b28b===0x2?_0x313daa:_0x20f66b;console[_0x839702('0x5b')](...LGT,'Creature\x20\x22'+_0x28d2f6[_0x839702('0x13')]+_0x839702('0x32')+_0x28d2f6[_0x839702('0x1a')]+_0x839702('0x2c')+_0x13e490+_0x839702('0x26')+_0x28d2f6[_0x839702('0x4b')][_0x13e490]+_0x839702('0x58')+(_0x94b28b===0x2?_0x839702('0x6'):_0x839702('0x68'))+_0x839702('0x19')+UiUtil[_0x839702('0x41')](_0x8dc16)+'\x22)\x20will\x20be\x20used.');}}}}_0x369332[_0x13e490]={'value':_0x28d2f6[_0x13e490],'proficient':_0x94b28b,'mod':_0x414bec};}),_0xf02460[_0x6e1d91('0x29')]=_0x369332;}[_0x350765('0x39')](_0x436304){const _0x57bdc2=_0x350765;if(!_0x436304||!_0x436304[_0x57bdc2('0x1e')])return'';const _0x2ac180=_0x436304[_0x57bdc2('0x2a')]===_0x57bdc2('0x66')?-0x1:0x2;if(_0x436304[_0x57bdc2('0x2a')]!==_0x57bdc2('0x66'))Renderer['get']()[_0x57bdc2('0x8')](![]);return Renderer[_0x57bdc2('0x4f')]()[_0x57bdc2('0x8')](!![])['render']({'type':_0x436304[_0x57bdc2('0x2a')],'entries':_0x436304[_0x57bdc2('0x1e')]},_0x2ac180);}[_0x350765('0x2')](_0x533dfa,_0x7ef0d8){const _0x145029=_0x350765,_0x29903d=(_0x454afb,_0x55f0fb,_0xb16eea,_0x3395e1,_0x359dd0)=>{if(!_0x533dfa[_0xb16eea])return;_0x533dfa[_0xb16eea]['forEach'](_0x17791e=>{const _0x113f74=_0x1488;if(_0x454afb[_0x113f74('0x4e')](_0x17791e))_0x3395e1['add'](_0x17791e);else{if(ImportListActor[_0x113f74('0x34')][_0x113f74('0x3f')](_0xb16eea)&&_0x17791e[_0xb16eea]&&_0x17791e[_0xb16eea]instanceof Array&&CollectionUtil[_0x113f74('0x4c')](new Set(_0x17791e[_0xb16eea]),ImportListActor[_0x113f74('0x5a')])&&_0x17791e[_0x113f74('0x28')]&&_0x17791e['cond'])_0x3395e1[_0x113f74('0x55')](_0x113f74('0x65'));else{const _0x4ef351=_0x55f0fb([_0x17791e]);_0x3395e1[_0x113f74('0x55')](_0x113f74('0x18')),_0x359dd0['push'](_0x4ef351);}}});},_0x3fb2d2=new Set();let _0xa7df64=[];_0x29903d(UtilActors['VALID_DAMAGE_TYPES'],Parser['monImmResToFull'],_0x145029('0x12'),_0x3fb2d2,_0xa7df64),_0x7ef0d8['di']={'value':[..._0x3fb2d2],'custom':_0xa7df64['join'](',\x20')};const _0xa80f2f=new Set();let _0x1147fd=[];_0x29903d(UtilActors['VALID_DAMAGE_TYPES'],Parser[_0x145029('0x5c')],_0x145029('0x2e'),_0xa80f2f,_0x1147fd),_0x7ef0d8['dr']={'value':[..._0xa80f2f],'custom':_0x1147fd['join'](',\x20')};const _0x178b44=new Set();let _0x498d61=[];_0x29903d(UtilActors[_0x145029('0x21')],Parser['monImmResToFull'],_0x145029('0x1f'),_0x178b44,_0x498d61),_0x7ef0d8['dv']={'value':[..._0x178b44],'custom':_0x498d61[_0x145029('0x0')](',\x20')};const _0x18767c=new Set();let _0x4f01d7=[];_0x29903d(UtilActors[_0x145029('0x4a')],_0x2bbcc0=>Parser['monCondImmToFull'](_0x2bbcc0,!![]),_0x145029('0x60'),_0x18767c,_0x4f01d7),_0x7ef0d8['ci']={'value':[..._0x18767c],'custom':_0x4f01d7['join'](',\x20')};}}ImportListActor['_PROPS_DAMAGE_IMM_VULN_RES']=new Set(['immune','resist',_0x350765('0x1f')]),ImportListActor[_0x350765('0x5a')]=new Set(['bludgeoning',_0x350765('0x6b'),_0x350765('0x24')]);export{ImportListActor};