const _0x9be8=['_pImportEntry_pGetImportMetadata','conditionImmune','Unimplemented!','getNameWithSourcePart','669jKaFtS','assumedPb','getImageUrlFromFluff','_id','warn','285196qKgNPm','icons/svg/mystery-man.svg','join','truesight','\x22\x20bonus\x20\x22','isDataOnly','add','mystery-man.svg','_pImportEntry_pFillItems','_pack','tokenNameDisplay','monCondImmToFull','_pImportEntry_pFillBase_pGetCompendiumImage','isTemp','28BbKLKj','expert','TASK_EXIT_SKIPPED_DUPLICATE','blindsight','has','\x22)\x20will\x20be\x20used.','updateEntity','Cannot\x20import\x20','50341pgiDvR','_getDuplicateMeta','type','tokenBar1Attribute','_actorType','get','copy','push','_actor','piercing','custom','1ZrSQzx','VALID_DAMAGE_TYPES','forEach','note','\x22\x20(from\x20\x22','TASK_EXIT_COMPLETE_DATA_ONLY','_pImportEntry_pHandlePostItemItemUpdates','save','tokenBarDisplay','hasTokenUrl','pGetCompendiumImage','getAbilityModNumber','4GHooLC','\x22\x20(','1esyhcl','size','create','token','isSkip','_SET_PHYSICAL_DAMAGE','_data','16wpqwnB','data','OwnedItem','_pImportEntry_hasTokenImage',')\x20save\x20\x22','getTokenUrl','_pImportEntry_getTokenImage','exec','proficient','sourceJsonToAbv','deleteEmbeddedEntity','\x22\x20=\x20\x22','intToBonus','find','senses','name','76495vpFlcP','178235BDtLsa','vulnerable','includes','postItemItemUpdates','ABIL_ABVS','_PROPS_DAMAGE_IMM_VULN_RES','abs','tokenBar2Attribute','35993mNryyP','actor','TASK_EXIT_COMPLETE','entries','tokenDisposition','max','_displayName','physical','setFirstSection','Importing\x20','existing','73237lIbvVR','items','importEntity','\x22\x20did\x20not\x20match\x20an\x20expected\x20modifier/proficiency\x20amount!\x20A\x20fallback\x20value\x20(\x22','monImmResToFull','isOverwrite','Creature\x20\x22','immune','getCleanEntityName','update','pImportEntry','tremorsense','isUseTokenImageAsPortrait','_props','abilities','7rYeSms','19DOquoO','render','insert'];const _0x734c=function(_0x320088,_0x436081){_0x320088=_0x320088-0xa2;let _0x9be88a=_0x9be8[_0x320088];return _0x9be88a;};const _0x1f9e68=_0x734c;(function(_0x3d2889,_0x25823e){const _0x275754=_0x734c;while(!![]){try{const _0x36a789=parseInt(_0x275754(0x10a))*-parseInt(_0x275754(0xaf))+-parseInt(_0x275754(0xae))*parseInt(_0x275754(0x115))+-parseInt(_0x275754(0xc9))*parseInt(_0x275754(0xb6))+parseInt(_0x275754(0x102))*parseInt(_0x275754(0xdc))+-parseInt(_0x275754(0xbb))*-parseInt(_0x275754(0xea))+parseInt(_0x275754(0xd1))*parseInt(_0x275754(0xe8))+parseInt(_0x275754(0xf1))*parseInt(_0x275754(0x101));if(_0x36a789===_0x25823e)break;else _0x3d2889['push'](_0x3d2889['shift']());}catch(_0x45edec){_0x3d2889['push'](_0x3d2889['shift']());}}}(_0x9be8,0xa46b1));import{ImportList}from'./ImportList.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Consts}from'./Consts.js';class ImportListActor extends ImportList{constructor(_0x3336e6,_0x364072,_0x317255,_0x52b943){const _0x30ae35=_0x734c;super(_0x3336e6,_0x364072,_0x317255),this[_0x30ae35(0xd5)]=_0x52b943['actorType'];}async[_0x1f9e68(0xa9)](_0x162711,_0x557b42){const _0x48cfed=_0x1f9e68;_0x557b42=_0x557b42||{},console['log'](...LGT,_0x48cfed(0x113)+this[_0x48cfed(0xd5)]+'\x20\x22'+_0x162711[_0x48cfed(0x100)]+_0x48cfed(0xe0)+Parser[_0x48cfed(0xfa)](_0x162711['source'])+'\x22)');if(this[_0x48cfed(0xd9)])throw new Error(_0x48cfed(0xd0)+this[_0x48cfed(0xd5)]+'\x20to\x20actor!');let _0x5cd7ce;const _0x169d7b=this[_0x48cfed(0xd2)]({'entity':_0x162711});if(_0x169d7b[_0x48cfed(0xee)])return{'status':UtilApplications[_0x48cfed(0xcb)]};else{if(_0x169d7b[_0x48cfed(0xa4)])_0x5cd7ce=_0x169d7b[_0x48cfed(0x114)];else _0x5cd7ce=this[_0x48cfed(0xc4)]?null:await Actor[_0x48cfed(0xec)]({'name':Consts['ACTOR_TEMP_NAME'],'type':this[_0x48cfed(0xd5)]},{'renderSheet':!!_0x557b42['isTemp'],'temporary':!!_0x557b42[_0x48cfed(0xc8)]});}const {dataBuilderOpts:_0x4d72dc,actorData:_0x185a3c}=await this[_0x48cfed(0xb2)](_0x5cd7ce,_0x162711,_0x557b42);if(_0x557b42[_0x48cfed(0xc8)])return _0x5cd7ce=await Actor[_0x48cfed(0xec)]({..._0x185a3c,'type':this[_0x48cfed(0xd5)]},{'renderSheet':!_0x557b42['isDataOnly'],'temporary':!![]}),_0x4d72dc['actor']=_0x5cd7ce,await this[_0x48cfed(0xc3)](_0x162711,_0x185a3c,_0x4d72dc,_0x557b42),await this[_0x48cfed(0xe2)](_0x5cd7ce,_0x557b42,_0x4d72dc),_0x557b42[_0x48cfed(0xc0)]?{'imported':_0x5cd7ce,'status':UtilApplications[_0x48cfed(0xe1)]}:{'imported':_0x5cd7ce,'status':UtilApplications[_0x48cfed(0x10c)]};else{if(this[_0x48cfed(0xc4)]){if(_0x169d7b[_0x48cfed(0xa4)]){_0x4d72dc['actor']=_0x5cd7ce,Object['assign'](_0x5cd7ce[_0x48cfed(0xf2)],_0x185a3c),_0x5cd7ce[_0x48cfed(0xf2)][_0x48cfed(0x116)]=[],await this[_0x48cfed(0xc3)](_0x162711,_0x185a3c,_0x4d72dc,_0x557b42);const _0x59e264=await this[_0x48cfed(0xc4)][_0x48cfed(0xcf)](MiscUtil[_0x48cfed(0xd7)](_0x5cd7ce[_0x48cfed(0xf2)]));return await this[_0x48cfed(0xe2)](_0x59e264,_0x557b42,_0x4d72dc),{'imported':_0x5cd7ce,'status':UtilApplications[_0x48cfed(0x10c)]};}else{_0x5cd7ce=await Actor[_0x48cfed(0xec)]({..._0x185a3c,'type':this['_actorType']},{'temporary':!![]}),_0x4d72dc[_0x48cfed(0x10b)]=_0x5cd7ce,await this[_0x48cfed(0xc3)](_0x162711,_0x185a3c,_0x4d72dc,_0x557b42);if(_0x5cd7ce[_0x48cfed(0xf0)])_0x5cd7ce[_0x48cfed(0xf0)]=MiscUtil['copy'](_0x5cd7ce['data']);const _0x30602f=await this[_0x48cfed(0xc4)][_0x48cfed(0x117)](_0x5cd7ce);await this[_0x48cfed(0xe2)](_0x30602f,_0x557b42,_0x4d72dc);}return{'imported':_0x5cd7ce,'status':UtilApplications[_0x48cfed(0x10c)]};}else{if(_0x169d7b[_0x48cfed(0xa4)])await _0x5cd7ce[_0x48cfed(0xfb)](_0x48cfed(0xf3),_0x5cd7ce['data']['items']['map'](_0xae577b=>_0xae577b['id']||_0xae577b[_0x48cfed(0xb9)]));return await this[_0x48cfed(0xc3)](_0x162711,_0x185a3c,_0x4d72dc,_0x557b42),await _0x5cd7ce[_0x48cfed(0xa8)](_0x185a3c),await game['actors'][_0x48cfed(0xb1)](_0x5cd7ce),await this['_pImportEntry_pHandlePostItemItemUpdates'](_0x5cd7ce,_0x557b42,_0x4d72dc),{'imported':_0x5cd7ce,'status':UtilApplications[_0x48cfed(0x10c)]};}}}async[_0x1f9e68(0xe2)](_0x1af462,_0x1b0452,_0x5b72b2){const _0x5f139f=_0x1f9e68;if(_0x5b72b2[_0x5f139f(0x105)])for(const _0x1416dc of _0x5b72b2[_0x5f139f(0x105)]){await _0x1416dc({'actor':_0x1af462,'isTemp':_0x1b0452[_0x5f139f(0xc8)],'isPack':this['_pack']!=null,'pack':this[_0x5f139f(0xc4)]});}}[_0x1f9e68(0xb2)](){const _0x483311=_0x1f9e68;throw new Error(_0x483311(0xb4));}['_pImportEntry_pFillItems'](){const _0x4bbbca=_0x1f9e68;throw new Error(_0x4bbbca(0xb4));}[_0x1f9e68(0xf4)](_0x443730){return this['_props']['some'](_0x86f041=>Vetools['hasTokenUrl'](_0x86f041,_0x443730));}[_0x1f9e68(0xf7)](_0x1f73b2){const _0x90d7d7=_0x1f9e68,_0x12739b=this[_0x90d7d7(0xac)][_0x90d7d7(0xfe)](_0x57fb91=>Vetools[_0x90d7d7(0xe5)](_0x57fb91,_0x1f73b2));if(_0x12739b)return Vetools[_0x90d7d7(0xf6)](_0x12739b,_0x1f73b2);return _0x90d7d7(0xbc);}async['_pImportEntry_pFillBase'](_0xbbbc9c,_0x2f1112,_0x4956a1,_0x2c567f){const _0x3b0d7b=_0x1f9e68;_0x2c567f=_0x2c567f||{},_0x2f1112['name']=DataConverter[_0x3b0d7b(0xb5)](_0xbbbc9c);let _0x5d17f2=_0x2c567f[_0x3b0d7b(0xab)]?null:Vetools[_0x3b0d7b(0xb8)](_0x4956a1);if(!_0x5d17f2){if(this[_0x3b0d7b(0xf4)](_0xbbbc9c))_0x5d17f2=this[_0x3b0d7b(0xf7)](_0xbbbc9c);else{const _0x5c3149=await this[_0x3b0d7b(0xc7)](_0xbbbc9c);if(_0x5c3149)_0x5d17f2=_0x5c3149;else _0x5d17f2=this[_0x3b0d7b(0xf7)](_0xbbbc9c);}}_0x2f1112['img']=_0x5d17f2,_0x2f1112['type']=this[_0x3b0d7b(0xd5)];}async['_pImportEntry_pFillBase_pGetCompendiumImage'](_0x447250){const _0x34b859=_0x1f9e68;for(const _0xb88eb8 of this[_0x34b859(0xac)]){const _0x45e7c6=await DataConverter[_0x34b859(0xe6)](_0xb88eb8,_0x447250);if(_0x45e7c6&&!_0x45e7c6['toLowerCase']()[_0x34b859(0x104)](_0x34b859(0xc2)))return _0x45e7c6;}return null;}async['_pImportEntry_pFillToken'](_0x340d07,_0x42dc7d,_0x297c63){const _0x198e7f=_0x1f9e68;let _0x35b72c=0x1;switch(_0x340d07[_0x198e7f(0xeb)]||'M'){case'T':_0x35b72c=0.5;break;case'L':_0x35b72c=0x2;break;case'H':_0x35b72c=0x3;break;case'G':_0x35b72c=0x4;break;}let _0xa4f097=0x0,_0x1f0281=0x0;(_0x340d07[_0x198e7f(0xff)]||[])[_0x198e7f(0xde)](_0x3fce44=>{const _0x2ac0e6=_0x198e7f,_0x4e6eb0=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x2ac0e6(0xf8)](_0x3fce44);if(_0x4e6eb0){const _0x2bc66a=Number(_0x4e6eb0[0x2]);switch(_0x4e6eb0[0x1]){case'darkvision':_0xa4f097=Math['max'](_0xa4f097,_0x2bc66a);break;case _0x2ac0e6(0xcc):case _0x2ac0e6(0xaa):case _0x2ac0e6(0xbe):_0x1f0281=Math[_0x2ac0e6(0x10f)](_0x1f0281,_0x2bc66a);break;}}}),_0x42dc7d[_0x198e7f(0xed)]={'displayName':Config[_0x198e7f(0xd6)](_0x297c63,_0x198e7f(0xc5)),'name':UtilApplications[_0x198e7f(0xa7)](_0x340d07[_0x198e7f(0x110)]||_0x340d07[_0x198e7f(0x100)]),'img':this['_pImportEntry_getTokenImage'](_0x340d07),'width':_0x35b72c,'height':_0x35b72c,'scale':0x1,'elevation':0x0,'lockRotation':![],'rotation':0x0,'vision':Config[_0x198e7f(0xd6)](_0x297c63,'tokenIsAddVision'),'dimSight':_0xa4f097,'brightSight':_0x1f0281,'dimLight':0x0,'brightLight':0x0,'sightAngle':0x168,'lightAngle':0x168,'actorLink':![],'actorData':{},'disposition':Config[_0x198e7f(0xd6)](_0x297c63,_0x198e7f(0x10e)),'displayBars':Config[_0x198e7f(0xd6)](_0x297c63,_0x198e7f(0xe4)),'bar1':{'attribute':Config[_0x198e7f(0xd6)](_0x297c63,_0x198e7f(0xd4))},'bar2':{'attribute':Config[_0x198e7f(0xd6)](_0x297c63,_0x198e7f(0x109))},'flags':{},'effects':[],'randomImg':![]};}['_pImportEntry_fillData_Abilities'](_0x116891,_0x2cba80,_0x9a045){const _0x23129=_0x1f9e68,_0x2f4f58={};Parser[_0x23129(0x106)]['forEach'](_0x37ccb6=>{const _0x46ddb7=_0x23129;let _0x49b527=0x0;const _0x54f9e3=Parser[_0x46ddb7(0xe7)](_0x116891[_0x37ccb6]);if(_0x116891[_0x46ddb7(0xe3)]&&_0x116891[_0x46ddb7(0xe3)][_0x37ccb6]){const _0x56a4c2=Number(_0x116891['save'][_0x37ccb6]);if(!isNaN(_0x56a4c2)){const _0xde379=Parser[_0x46ddb7(0xe7)](_0x116891[_0x37ccb6]),_0x4f126f=_0xde379+(_0x9a045[_0x46ddb7(0xb7)]||_0x9a045['pb']),_0x37d4fc=_0xde379+0x2*(_0x9a045[_0x46ddb7(0xb7)]||_0x9a045['pb']);if(_0x4f126f===_0x56a4c2)_0x49b527=0x1;else{if(_0x37d4fc===_0x56a4c2)_0x49b527=0x2;else{const _0x166cc3=Math[_0x46ddb7(0x108)](_0x56a4c2-_0x4f126f),_0x1400c1=Math[_0x46ddb7(0x108)](_0x56a4c2-_0x37d4fc);if(_0x166cc3<_0x1400c1)_0x49b527=0x1;else _0x49b527=0x2;const _0x2f442c=_0x49b527===0x2?_0x37d4fc:_0x4f126f;console[_0x46ddb7(0xba)](...LGT,_0x46ddb7(0xa5)+_0x116891[_0x46ddb7(0x100)]+_0x46ddb7(0xe9)+_0x116891['source']+_0x46ddb7(0xf5)+_0x37ccb6+_0x46ddb7(0xbf)+_0x116891[_0x46ddb7(0xe3)][_0x37ccb6]+_0x46ddb7(0xa2)+(_0x49b527===0x2?_0x46ddb7(0xca):_0x46ddb7(0xf9))+_0x46ddb7(0xfc)+UiUtil[_0x46ddb7(0xfd)](_0x2f442c)+_0x46ddb7(0xce));}}}}_0x2f4f58[_0x37ccb6]={'value':_0x116891[_0x37ccb6],'proficient':_0x49b527,'mod':_0x54f9e3};}),_0x2cba80[_0x23129(0xad)]=_0x2f4f58;}['_getBiographyValue'](_0xf6f10a){const _0x1a592a=_0x1f9e68;if(!_0xf6f10a||!_0xf6f10a[_0x1a592a(0x10d)])return'';const _0x104a03=_0xf6f10a[_0x1a592a(0xd3)]==='section'?-0x1:0x2;if(_0xf6f10a['type']!=='section')Renderer[_0x1a592a(0xd6)]()[_0x1a592a(0x112)](![]);return Renderer['get']()[_0x1a592a(0x112)](!![])[_0x1a592a(0xb0)]({'type':_0xf6f10a[_0x1a592a(0xd3)],'entries':_0xf6f10a['entries']},_0x104a03);}['_pImportEntry_fillConditionsDamage'](_0x34fcfb,_0x1ad31e){const _0xae643a=_0x1f9e68,_0x21a93e=(_0x1d7d90,_0x124f86,_0x5d439c,_0x4b7d95,_0x57f60b)=>{const _0x385a6e=_0x734c;if(!_0x34fcfb[_0x5d439c])return;_0x34fcfb[_0x5d439c][_0x385a6e(0xde)](_0x5260a7=>{const _0x3334ca=_0x385a6e;if(_0x1d7d90[_0x3334ca(0x104)](_0x5260a7))_0x4b7d95[_0x3334ca(0xc1)](_0x5260a7);else{if(ImportListActor[_0x3334ca(0x107)][_0x3334ca(0xcd)](_0x5d439c)&&_0x5260a7[_0x5d439c]&&_0x5260a7[_0x5d439c]instanceof Array&&CollectionUtil['setEq'](new Set(_0x5260a7[_0x5d439c]),ImportListActor['_SET_PHYSICAL_DAMAGE'])&&_0x5260a7[_0x3334ca(0xdf)]&&_0x5260a7['cond'])_0x4b7d95[_0x3334ca(0xc1)](_0x3334ca(0x111));else{const _0x34b136=_0x124f86([_0x5260a7]);_0x4b7d95['add'](_0x3334ca(0xdb)),_0x57f60b[_0x3334ca(0xd8)](_0x34b136);}}});},_0x24e49e=new Set();let _0x40b093=[];_0x21a93e(UtilActors[_0xae643a(0xdd)],Parser['monImmResToFull'],_0xae643a(0xa6),_0x24e49e,_0x40b093),_0x1ad31e['di']={'value':[..._0x24e49e],'custom':_0x40b093['join'](',\x20')};const _0xd4075c=new Set();let _0x409672=[];_0x21a93e(UtilActors[_0xae643a(0xdd)],Parser[_0xae643a(0xa3)],'resist',_0xd4075c,_0x409672),_0x1ad31e['dr']={'value':[..._0xd4075c],'custom':_0x409672[_0xae643a(0xbd)](',\x20')};const _0x1e43ce=new Set();let _0x8584bc=[];_0x21a93e(UtilActors['VALID_DAMAGE_TYPES'],Parser[_0xae643a(0xa3)],_0xae643a(0x103),_0x1e43ce,_0x8584bc),_0x1ad31e['dv']={'value':[..._0x1e43ce],'custom':_0x8584bc['join'](',\x20')};const _0x24d4e2=new Set();let _0x2b1af8=[];_0x21a93e(UtilActors['VALID_CONDITIONS'],_0x7a9b89=>Parser[_0xae643a(0xc6)](_0x7a9b89,!![]),_0xae643a(0xb3),_0x24d4e2,_0x2b1af8),_0x1ad31e['ci']={'value':[..._0x24d4e2],'custom':_0x2b1af8['join'](',\x20')};}}ImportListActor[_0x1f9e68(0x107)]=new Set(['immune','resist',_0x1f9e68(0x103)]),ImportListActor[_0x1f9e68(0xef)]=new Set(['bludgeoning',_0x1f9e68(0xda),'slashing']);export{ImportListActor};