const _0x1e40=['source','flags','_pImportEntry_pImportToItems','sheet','pGetUserEnum','Upload\x20File','VET_SIZE_TO_ABV','None','_pPostLoad','choose','attAbvToFull','forEach','languages','_isRadio','ele','items','data','vision','isToken','absorbFnGetData','sizeAbvToFull','Importing\x20race\x20\x22','get','Choose\x20','_pImportEntry_fillToken','mutateForFilters','sourceJsonToAbv','Races','value','URL_TO_HASH_BUILDER','Powerful\x20Build','SOURCE_TYP_OFFICIAL_ALL','\x20to\x20Increase\x20by\x20','absorbFnBindListeners','_pack','sourceJsonToFull','map','notifications','_pageFilter','Name','pImportEntry','details','\x20ft.','med','_vSize','pGetUserMultipleChoice','_pImportEntry_pFillItems','addHook','_actor','includes','floor','getSpeedString','race','darkvision','size','_pImportEntry_pGetFolderId','_isPreviewable','render','pGetSources','isTemp','races','getRaceItem','Import\x20Races','Savage\x20Attacks','savageAttacks','_pImportEntry_fillFlags','keys','_pImportEntry_pFillSkills','SOURCE_TYP_BREW','_pImportEntry_fillAttributes','text-center','5etools','getItemActorPassive','numberToText','Darkvision\x20','count','player','PG_RACES','some','entries','subrace','token','5etools-races','amount','abilities','custom','_vAbility','ability','insert','pFillItemArrayAdditionalSpells','asTextShort','isCancelled','sourceShort','adoptSubraces','weighted','absorbFnBindListenersRadio','doAbsorbItems','SOURCE_TYP_CUSTOM','_page','toolProf','length','push','attributes','name','modules/','warn','bind','importEntity','pAddActorItems','pFillActorToolData','from','_pImportEntry_pImportToActor','skills','traits','link','getAbilityScore','ABIL_ABVS','join','Source','feat','dimSight','split','DataSourceSpecial','_pImportEntry_pFillTraits','_content','senses','log','getAbilityData','_pImportEntry_pFillAbilities','dnd5e','Select\x20Ability\x20Score\x20Set','skillProficiencies','traitTags','Size','mergeSubraces'];(function(_0x361381,_0x1e4099){const _0x5f4379=function(_0x4e629a){while(--_0x4e629a){_0x361381['push'](_0x361381['shift']());}};_0x5f4379(++_0x1e4099);}(_0x1e40,0x147));const _0x5f43=function(_0x361381,_0x1e4099){_0x361381=_0x361381-0x0;let _0x5f4379=_0x1e40[_0x361381];return _0x5f4379;};import{ImportList}from'./ImportList.js';import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterRace}from'./DataConverterRace.js';class ImportListRace extends ImportList{constructor(_0x556b74){_0x556b74=_0x556b74||{},super({'title':_0x5f43('0x5')},_0x556b74,{'props':[_0x5f43('0x82')],'titleSearch':_0x5f43('0x3'),'sidebarTab':_0x5f43('0x5d'),'gameProp':_0x5f43('0x5d'),'defaultFolderPath':[_0x5f43('0x69')],'folderType':'Item','pageFilter':new PageFilterRaces(),'isActorRadio':!![],'page':UrlUtil[_0x5f43('0x14')],'isPreviewable':!![]});}async[_0x5f43('0x56')](_0x16ad48,_0x2f7628){const _0x5f5332=[];if(_0x2f7628['race'])_0x5f5332[_0x5f43('0x2c')](...Renderer[_0x5f43('0x82')]['mergeSubraces'](_0x2f7628['race'],{'isAddBaseRaces':!![]}));if(_0x2f7628[_0x5f43('0x17')]){const _0x2dd681=(await Vetools['pGetRaces']({'isAddBaseRaces':!![]}))[_0x5f43('0x82')];_0x2dd681['forEach'](_0x499bbe=>this[_0x5f43('0x74')]['mutateForFilters'](_0x499bbe));const _0x127fbb=Renderer[_0x5f43('0x82')][_0x5f43('0x24')](_0x2dd681,_0x2f7628[_0x5f43('0x17')]),_0x241ce4=Renderer[_0x5f43('0x82')][_0x5f43('0x4d')](_0x127fbb);_0x5f5332[_0x5f43('0x2c')](..._0x241ce4);}return _0x5f5332;}async[_0x5f43('0x1')](){const _0x3e8d67={'pPostLoad':this['_pPostLoad'][_0x5f43('0x31')](this)};return[new ImportList[(_0x5f43('0x41'))](Config[_0x5f43('0x64')]('ui','isStreamerMode')?'SRD':_0x5f43('0xe'),async()=>(await Vetools['pGetRaces']())[_0x5f43('0x82')],{'cacheKey':_0x5f43('0x19'),'filterTypes':[ImportList[_0x5f43('0x6d')]],'isDefault':!![]}),new ImportList['DataSourceUrl']('Custom\x20URL','',{..._0x3e8d67,'filterTypes':[ImportList[_0x5f43('0x28')]]}),new ImportList['DataSourceFile'](_0x5f43('0x53'),{..._0x3e8d67,'filterTypes':[ImportList[_0x5f43('0x28')]]}),...(await Vetools['pGetHomebrewSources'](_0x5f43('0x82'),_0x5f43('0x17')))[_0x5f43('0x72')](({name,url})=>new ImportList['DataSourceUrl'](name,url,{..._0x3e8d67,'filterTypes':[ImportList[_0x5f43('0xb')]]}))];}['getData'](){return{'isRadio':this['_isRadio'],'isPreviewable':this[_0x5f43('0x86')],'titleButtonRun':this['_titleButtonRun'],'titleSearch':this['_titleSearch'],'cols':[{'name':_0x5f43('0x75'),'width':0x4,'field':_0x5f43('0x2e')},{'name':'Ability','width':0x5,'field':'ability'},{'name':_0x5f43('0x4c'),'width':0x1,'field':'size'},{'name':_0x5f43('0x3d'),'width':0x1,'field':_0x5f43('0x4e'),'titleProp':'sourceLong','displayProp':_0x5f43('0x23'),'rowClassName':_0x5f43('0xd')}],'rows':this[_0x5f43('0x43')][_0x5f43('0x72')]((_0x2cf621,_0x225f96)=>{return this['_pageFilter'][_0x5f43('0x67')](_0x2cf621),_0x2cf621['_vAbility']=_0x2cf621[_0x5f43('0x1e')]?Renderer[_0x5f43('0x46')](_0x2cf621[_0x5f43('0x1e')])[_0x5f43('0x21')]:_0x5f43('0x55'),_0x2cf621[_0x5f43('0x7a')]=Parser[_0x5f43('0x62')](_0x2cf621[_0x5f43('0x84')]||SZ_VARIES),{'name':_0x2cf621[_0x5f43('0x2e')],'ability':_0x2cf621[_0x5f43('0x1d')],'size':_0x2cf621[_0x5f43('0x7a')],'source':_0x2cf621['source'],'sourceShort':Parser[_0x5f43('0x68')](_0x2cf621['source']),'sourceLong':Parser[_0x5f43('0x71')](_0x2cf621[_0x5f43('0x4e')]),'ix':_0x225f96};})};}['_activateListeners_absorbListItems'](){this['_list'][_0x5f43('0x27')](this[_0x5f43('0x43')],{'fnGetName':_0x5396b1=>_0x5396b1[_0x5f43('0x2e')],'fnGetValues':_0x5a83c9=>({'source':_0x5a83c9[_0x5f43('0x4e')],'ability':_0x5a83c9['_vAbility'],'size':_0x5a83c9[_0x5f43('0x7a')],'hash':UrlUtil[_0x5f43('0x6b')][this[_0x5f43('0x29')]](_0x5a83c9)}),'fnGetData':UtilList2[_0x5f43('0x61')],'fnBindListeners':_0x546790=>this[_0x5f43('0x5b')]?UtilList2[_0x5f43('0x26')](this['_list'],_0x546790):UtilList2[_0x5f43('0x6f')](this['_list'],_0x546790)});}async[_0x5f43('0x76')](_0x3ee39,_0x59c5d9){_0x59c5d9=_0x59c5d9||{},console[_0x5f43('0x45')](...LGT,_0x5f43('0x63')+_0x3ee39[_0x5f43('0x2e')]+'\x22\x20(from\x20\x22'+Parser['sourceJsonToAbv'](_0x3ee39['source'])+'\x22)');if(_0x59c5d9['isTemp'])return this[_0x5f43('0x50')](_0x3ee39,_0x59c5d9);else{if(this[_0x5f43('0x7e')])return this['_pImportEntry_pImportToActor'](_0x3ee39,_0x59c5d9);else return this['_pImportEntry_pImportToItems'](_0x3ee39,_0x59c5d9);}}async[_0x5f43('0x36')](_0x2fd50b,_0xe017ad){const _0x5f4cc3={'data':{'details':{'race':_0x2fd50b['name']}},'token':{}},_0x55df98=MiscUtil[_0x5f43('0x64')](this[_0x5f43('0x7e')],_0x5f43('0x5e'),_0x5f43('0x5e'),_0x5f43('0x77'),'level','value')||0x1,_0x4b0cd9={'pb':Math[_0x5f43('0x80')]((_0x55df98-0x1)/0x4)+0x2,'isCancelled':![]};this['_pImportEntry_fillFlags'](_0x2fd50b,_0x5f4cc3,_0x4b0cd9),await this[_0x5f43('0x47')](_0x2fd50b,_0x5f4cc3[_0x5f43('0x5e')],_0x4b0cd9);if(_0x4b0cd9[_0x5f43('0x22')])return;this[_0x5f43('0xc')](_0x2fd50b,_0x5f4cc3['data'],_0x4b0cd9),await this['_pImportEntry_pFillSkills'](_0x2fd50b,_0x5f4cc3[_0x5f43('0x5e')],_0x4b0cd9);if(_0x4b0cd9['isCancelled'])return;await this[_0x5f43('0x42')](_0x2fd50b,_0x5f4cc3[_0x5f43('0x5e')],_0x4b0cd9);if(_0x4b0cd9[_0x5f43('0x22')])return;await this[_0x5f43('0x66')](_0x2fd50b,_0x5f4cc3[_0x5f43('0x18')],_0x4b0cd9);if(_0x4b0cd9[_0x5f43('0x22')])return;await this[_0x5f43('0x7c')](_0x2fd50b,_0x5f4cc3,_0x4b0cd9);if(_0x4b0cd9[_0x5f43('0x22')])return;this[_0x5f43('0x7e')]['update'](_0x5f4cc3);if(this[_0x5f43('0x7e')][_0x5f43('0x60')])this['_actor'][_0x5f43('0x51')][_0x5f43('0x0')]();return{'name':_0x2fd50b['name'],'actor':this[_0x5f43('0x7e')]};}async[_0x5f43('0x50')](_0x568c8d,_0x967b92){const _0x4221f8=DataConverterRace[_0x5f43('0x4')](_0x568c8d,{'isAddPermission':!![]});if(_0x967b92['isTemp']||!this['_pack']){if(!_0x967b92[_0x5f43('0x2')]){const _0x447a19=await this[_0x5f43('0x85')](_0x568c8d);if(_0x447a19)_0x4221f8['folder']=_0x447a19;}const _0x9c7707=await Item['create'](_0x4221f8,{'renderSheet':!!_0x967b92[_0x5f43('0x2')],'temporary':!!_0x967b92[_0x5f43('0x2')]});if(!_0x967b92['isTemp'])await game[_0x5f43('0x5d')][_0x5f43('0x1f')](_0x9c7707);return _0x9c7707;}else{const _0x2c59cc=new Item(_0x4221f8);return await this[_0x5f43('0x70')][_0x5f43('0x32')](_0x2c59cc),_0x2c59cc;}}[_0x5f43('0x8')](_0x1301c0,_0x1c7eba,_0x2b680){const _0x169651={},_0x2e120c={},_0x116d10=_0x1301c0[_0x5f43('0x4b')]&&_0x1301c0[_0x5f43('0x4b')][_0x5f43('0x7f')](_0x5f43('0x6c'))||_0x1301c0['entries']['some'](_0x2bf7e8=>_0x2bf7e8[_0x5f43('0x2e')]===_0x5f43('0x6c'));if(_0x116d10)_0x2e120c['powerfulBuild']=!![];if(_0x1301c0[_0x5f43('0x16')][_0x5f43('0x15')](_0x52ce8c=>_0x52ce8c[_0x5f43('0x2e')]===_0x5f43('0x6')))_0x2e120c[_0x5f43('0x7')]=!![];if(_0x1301c0[_0x5f43('0x16')][_0x5f43('0x15')](_0x3a669c=>_0x3a669c['name']==='Lucky')&&_0x1301c0['_baseName']==='Halfling')_0x2e120c['halflingLucky']=!![];if(Object[_0x5f43('0x9')](_0x2e120c)['length'])_0x169651[_0x5f43('0x48')]=_0x2e120c;if(Object[_0x5f43('0x9')](_0x169651)[_0x5f43('0x2b')])_0x1c7eba[_0x5f43('0x4f')]=_0x169651;}async[_0x5f43('0x47')](_0x11fa86,_0x700f0f,_0xf25472){if(!_0x11fa86[_0x5f43('0x1e')])return;const _0x59346d=_0x11fa86[_0x5f43('0x1e')][_0x5f43('0x2b')]>0x1?await InputUiUtil[_0x5f43('0x52')]({'values':_0x11fa86[_0x5f43('0x1e')],'placeholder':_0x5f43('0x49'),'title':_0x5f43('0x49'),'fnDisplay':_0xd65230=>Renderer[_0x5f43('0x46')]([_0xd65230])['asText'],'isResolveItem':!![]}):_0x11fa86['ability'][0x0];if(!_0x59346d)return _0xf25472[_0x5f43('0x22')]=!![];const _0x117887={};Parser[_0x5f43('0x3b')][_0x5f43('0x59')](_0x16967f=>{if(_0x59346d[_0x16967f])_0x117887[_0x16967f]=_0x59346d[_0x16967f];});if(_0x59346d[_0x5f43('0x57')]){const _0x5b7fed=_0x59346d[_0x5f43('0x57')];if(_0x5b7fed['from']){const _0x59421d=_0x5b7fed[_0x5f43('0x12')]||0x1,_0x5f4170=await InputUiUtil[_0x5f43('0x7b')]({'title':_0x5f43('0x65')+Parser[_0x5f43('0x10')](_0x59421d)+'\x20Ability\x20Score'+(_0x59421d===0x1?'':'s')+_0x5f43('0x6e')+(_0x5b7fed[_0x5f43('0x1a')]||0x1),'values':_0x5b7fed[_0x5f43('0x35')],'count':_0x59421d,'isResolveItems':!![],'fnDisplay':_0x35172b=>Parser[_0x5f43('0x58')](_0x35172b)});if(!_0x5f4170)return _0xf25472[_0x5f43('0x22')]=!![];_0x5f4170[_0x5f43('0x59')](_0x735bcb=>_0x117887[_0x735bcb]=(_0x117887[_0x735bcb]||0x0)+_0x5b7fed[_0x5f43('0x1a')]||0x1);}else _0x5b7fed[_0x5f43('0x25')]&&ui[_0x5f43('0x73')][_0x5f43('0x30')]('This\x20importer\x20does\x20not\x20yet\x20support\x20\x22weighted\x22-type\x20ability\x20scores.\x20Check\x20back\x20later!');}if(Object[_0x5f43('0x9')](_0x117887)[_0x5f43('0x2b')])_0x700f0f[_0x5f43('0x1b')]={};Object['entries'](_0x117887)[_0x5f43('0x59')](([_0x36dfe3,_0x595827])=>{_0x700f0f[_0x5f43('0x1b')][_0x36dfe3]={'value':UtilActors[_0x5f43('0x3a')](this[_0x5f43('0x7e')],_0x36dfe3)+_0x595827};});}[_0x5f43('0xc')](_0x184ecf,_0x23d103,_0x2ae5b8){const _0x14a823={};if(_0x184ecf['speed']){const _0x39d33d=Parser[_0x5f43('0x81')](_0x184ecf),[_0x513318,..._0x43be03]=_0x39d33d[_0x5f43('0x40')](',\x20');_0x14a823['speed']={'value':_0x513318,'special':_0x43be03[_0x5f43('0x3c')](',\x20')};}_0x23d103[_0x5f43('0x2d')]=_0x14a823;}async[_0x5f43('0xa')](_0x1d80ea,_0x22405f,_0x2ed4db){const _0x3d0e66=await DataConverter['pFillActorSkillData'](MiscUtil[_0x5f43('0x64')](this[_0x5f43('0x7e')],_0x5f43('0x5e'),_0x5f43('0x5e'),_0x5f43('0x37')),_0x1d80ea[_0x5f43('0x4a')],_0x22405f);if(_0x3d0e66[_0x5f43('0x22')])_0x2ed4db[_0x5f43('0x22')]=!![];}async[_0x5f43('0x42')](_0xefd6c1,_0x351473,_0x2db017){const _0x464e52={};_0x464e52[_0x5f43('0x84')]=UtilActors[_0x5f43('0x54')][_0xefd6c1[_0x5f43('0x84')]]||_0x5f43('0x79');if(_0xefd6c1['darkvision'])_0x464e52[_0x5f43('0x44')]=_0x5f43('0x11')+_0xefd6c1['darkvision']+_0x5f43('0x78');_0x351473['traits']=_0x464e52,_0x2db017[_0x5f43('0x22')]=await DataConverter['pFillActorLanguageData'](MiscUtil[_0x5f43('0x64')](this[_0x5f43('0x7e')],_0x5f43('0x5e'),'data',_0x5f43('0x38'),_0x5f43('0x5a'),_0x5f43('0x6a')),MiscUtil[_0x5f43('0x64')](this['_actor'],_0x5f43('0x5e'),_0x5f43('0x5e'),_0x5f43('0x38'),'languages',_0x5f43('0x1c')),_0xefd6c1['languageProficiencies'],_0x351473);if(_0x2db017['isCancelled'])return;_0x2db017['isCancelled']=await DataConverter[_0x5f43('0x34')](MiscUtil[_0x5f43('0x64')](this['_actor'],_0x5f43('0x5e'),_0x5f43('0x5e'),_0x5f43('0x38'),_0x5f43('0x2a'),'value'),MiscUtil[_0x5f43('0x64')](this[_0x5f43('0x7e')],_0x5f43('0x5e'),_0x5f43('0x5e'),_0x5f43('0x38'),_0x5f43('0x2a'),_0x5f43('0x1c')),_0xefd6c1['toolProficiencies'],_0x351473);}[_0x5f43('0x66')](_0x4cfcb9,_0x2dbbde,_0x3635fd){if(_0x4cfcb9[_0x5f43('0x83')]){const {dimSight:_0xc61345}=this[_0x5f43('0x7e')][_0x5f43('0x5e')][_0x5f43('0x18')]||{};(!_0xc61345||!isNaN(_0xc61345)&&Number(_0xc61345)<_0x4cfcb9['darkvision'])&&(_0x2dbbde[_0x5f43('0x3f')]=_0x4cfcb9[_0x5f43('0x83')],_0x2dbbde[_0x5f43('0x5f')]=!![]);}}async[_0x5f43('0x7c')](_0x5b45d7,_0x15f545,_0x97c466){_0x97c466[_0x5f43('0x5d')]=_0x97c466[_0x5f43('0x5d')]||[];const _0x28770f={},_0x17798a=await UtilActors[_0x5f43('0x20')](this['_actor'],_0x5b45d7['additionalSpells'],{'sourceHintText':_0x5b45d7[_0x5f43('0x2e')],'hashToIdMap':_0x28770f});_0x97c466['isCancelled']=_0x97c466['isCancelled']||_0x17798a;const _0x4394e9=DataConverterSpell['doHookSpellLinkRender']['bind'](null,this['_actor']['id'],_0x28770f);Renderer[_0x5f43('0x64')]()[_0x5f43('0x7d')](_0x5f43('0x39'),_0x5f43('0x5c'),_0x4394e9),_0x5b45d7[_0x5f43('0x16')][_0x5f43('0x59')](_0x54bae5=>{if(_0x54bae5['name']===_0x5f43('0x4c'))return;_0x97c466[_0x5f43('0x5d')][_0x5f43('0x2c')](DataConverter[_0x5f43('0xf')](_0x54bae5,{'mode':_0x5f43('0x13'),'img':_0x5f43('0x2f')+SharedConsts['MODULE_NAME']+'/media/icon/mighty-force.svg','fvttType':_0x5f43('0x3e'),'source':_0x5b45d7[_0x5f43('0x4e')],'actor':this['_actor']}));}),Renderer[_0x5f43('0x64')]()['removeHook'](_0x5f43('0x39'),_0x5f43('0x5c'),_0x4394e9);if(_0x97c466[_0x5f43('0x5d')][_0x5f43('0x2b')])await UtilActors[_0x5f43('0x33')](this[_0x5f43('0x7e')],_0x97c466[_0x5f43('0x5d')]);}}export{ImportListRace};