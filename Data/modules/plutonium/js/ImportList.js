const _0x5070=['_pack','_$bntFilter','1GuhIIk','_pHandleClickRunButton','pCacheAndGet','_folderPathSpec','Folder','ascSortLower','_activateListeners_initPreviewButton','element','No,\x20use\x20normal\x20drag-drop','replace','C_IMPORT_DRAG_DROP_MODE_NEVER','_$cbAll','getNameWithSourcePart','preventDefault','doAbsorbItems','reset','_packCache','_isResolveOnClose','data','911176zlCkeC','5etaGTf','teardown','_pImportEntry_pDoUpdateExistingPackEntity','list-multi-selected','.lst__wrp-search-visible','_fnResolve','pPreRender','Continue\x20and\x20Remember','absorbFnBindListeners','_$iptSearch','props','type','_activateListeners_pInitFilteredList','actor','isNonCacheableInstance','_$dispNumVisible','MODULE_NAME_FAKE','sorting','_pPostFilterRender','\x20Importer','_getDuplicateMeta_getCleanName','name','render','_isUseMods','existing','TASK_EXIT_COMPLETE','pGetSources','Please\x20select\x20something\x20to\x20import!','create','Import','_comp','.search','TASK_EXIT_SKIPPED_DUPLICATE','pSetClient','journal','_propsBrewAdditionalData','importer_','update','_folderType','_page','join','addToFilters','Unimplemented!','pInitFilterBox','Actor','isPreviewable','_isHidden','children','entity','isClosable','/template/FolderPathBuilder.hbs','preCreateItem','getValues','ImportList.folderKeyPathSpec','cbSel','getMaxWindowHeight','_isFolderOnly','bind','_handleFilterChange','init','activateListeners','739OigguT','_defaultFolderPath','bindPreviewAllButton','toDisplay','forEach','_$wrpRun','listInitialSortBy','details','?\x20Note\x20that\x20this\x20will\x20ignore\x20any\x20in-Foundry\x20modifications\x20made\x20to\x20the\x20item.','19RZtwLo','selectedProp','namespace','Item','[name=\x22btn-run-mods\x22]','text-center','getStateFromString','Name','_isModdable','pSetFolderPathSpec','set','isStrictMatching','pGetClient','_activateListeners_initPreviewHoversAndImportButtons','_$wrpList','_isInit','sourceJsonToFull','isEscapeable','STR_SEE_CONSOLE','sort','warn','sourceLong','filterBox','html','length','Import\x20exited\x20with\x20status\x20\x22','_isClosable','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','isDisableLargeImportWarning','_gameProp','page','showVe','isSkip','pGetUserChoice','hash','_content','_fnListSort','_activateListeners_absorbListItems','_getDuplicateMeta_getEntityKey','_$btnRunWithMods','documentName','_pGetUseImporterDragDrop','sidebar','978079veFsOp','flags','titleButtonRun','Source\x20(Abbreviation)','filterValues','getFolderPathMeta','_userData','propDroppable','_namespace','319458dEYwJK','Mismatched\x20number\x20of\x20properties!\x20This\x20is\x20a\x20bug!','getContent','_getFilterNamespace','_$btnTogglePreviewAll','_$wrpBtnsSort','getSourceWithPagePart','pImportEntry','Yes,\x20use\x20the\x20importer','trim','items','_fnLoadSideData','isFolderOnly','stopPropagation','get','isStandardDragDrop','[name=\x22btn-reset\x22]','sourceShort','_$wrpMiniPills','bindPreviewButton','_titleSearch','C_IMPORT_DRAG_DROP_MODE_PROMPT','absorbFnBindListenersRadio','sourceJsonToColor','firstElementChild','toUpperCase','doShowImportedNotification','pSyncStateFrom','contents','[name=\x22cb-select-all\x22]','isDedupable','error','_pFnPostProcessEntries','_pImportEntry_pDoUpdateExistingDirectoryEntity','_activateListeners_initPreviewImportButton','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','_sidebarTab','info','_uploadedFile','entries','[name=\x22btn-run\x22]','pack','_listInitialSortBy','checked','MODULE_TITLE','activateSidebarTab','576262nFyTsX','path','\x20entities\x20to\x20import.<br>Importing\x20a\x20large\x20number\x20of\x20entities\x20may\x20degrade\x20game\x20performance\x20(consider\x20importing\x20to\x20a\x20compendium\x20instead).<br>Do\x20you\x20wish\x20to\x20continue?','MODULE_LOCATION','_activateListeners_initRunButton','_$btnToggleSummary','close','_getFullFolderPathSpecKey','gameProp','instance','_list','_pImportEntry_pImportToDirectoryGeneric','then','hideVe','_propGroups','19xcxFvn','sourceClassName','push','updated','compendium','_getDuplicateMeta','pSetContent','prop','_isRadio','map','ele','pHandleEditFolderPathClick','_props','TASK_EXIT_FAILED','createEmbeddedDocuments','importDocument','Failed\x20to\x20import\x20\x22','\x22\x20is\x20not\x20supported!','visibleItems','isOverwrite','deduplicationMode','_titleButtonRun','_isDedupable','source','sourceJsonToAbv','copy','remove','_pHandleClickRunButton_pDoPreCachePack','toLowerCase','isFreeText','_pageFilter','filter','pGetUserBoolean','tables','folderType','_actor','_$btnRun','Source\x20(Full)','_pImportEntry_pGetFolderId','[name=\x22btn-toggle-all-previews\x22]','_pHandleClickRunButton_doDumpPackCache','Warning:\x20Large\x20Import','dragDropMode','pGetChooseImporterUserDataForSources','text','actors','\x22!\x20','userData','Edit\x20Folder\x20Path','toString','pResult','MODULE_NAME','SRD\x20Importer','isActorRadio','addEventListener','C_IMPORT_DEDUPE_MODE_OVERWRITE','_activateListeners_initList','579304eeJrHF','click','notifications','/template/ImportList.hbs','One\x20of\x20\x22props\x22\x20or\x20\x22namespace\x22\x20must\x20be\x20provided!','ActiveEffect','initBtnSortHandlers','constructor','pInit','Game\x20property\x20\x22','\x22\x20via\x20','folder','find','import','collection','_fnReject','_pLoadFolderPathSpec','parent','_isNonCacheableInstance','status','TASK_EXIT_COMPLETE_DATA_ONLY','fnLoadSideData','Task','_$btnReset','66522aOpsOL','titleSearch','_isPreviewable','_displayName'];const _0x36dd=function(_0x5da01f,_0x2a5ca4){_0x5da01f=_0x5da01f-0xa1;let _0x507021=_0x5070[_0x5da01f];return _0x507021;};const _0x2f1b98=_0x36dd;(function(_0x5a267f,_0x47255b){const _0x5eaeaa=_0x36dd;while(!![]){try{const _0x5a0a70=parseInt(_0x5eaeaa(0xc0))*-parseInt(_0x5eaeaa(0x182))+-parseInt(_0x5eaeaa(0xf4))+parseInt(_0x5eaeaa(0x188))*-parseInt(_0x5eaeaa(0xeb))+parseInt(_0x5eaeaa(0xb7))*parseInt(_0x5eaeaa(0x131))+parseInt(_0x5eaeaa(0x19b))+-parseInt(_0x5eaeaa(0x16a))+parseInt(_0x5eaeaa(0x122))*parseInt(_0x5eaeaa(0x19c));if(_0x5a0a70===_0x47255b)break;else _0x5a267f['push'](_0x5a267f['shift']());}catch(_0x18edab){_0x5a267f['push'](_0x5a267f['shift']());}}}(_0x5070,0xa28a8));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';import{UtilList2}from'./UtilList2.js';import{FolderPathBuilder,FolderPathBuilderRow}from'./FolderPathBuilder.js';import{GameStorage}from'./GameStorage.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{DataConverter}from'./DataConverter.js';import{UtilCompendium}from'./UtilCompendium.js';import{ConfigConsts}from'./ConfigConsts.js';class ImportList extends Application{static['_initCreateSheetItemHook'](_0x3840ba){const _0x1abedd=_0x36dd;Hooks['on'](_0x1abedd(0xad),(_0x588b1a,_0x2d5937,_0x3afffc,_0x57ba24)=>{const _0x2054fb=_0x1abedd;if(_0x588b1a[_0x2054fb(0x17b)]?.[_0x2054fb(0xe8)]!==_0x2054fb(0xa6))return;const _0x39235a=_0x2d5937[_0x2054fb(0xec)]?.[SharedConsts[_0x2054fb(0x1ac)]]||_0x2d5937['flags']?.[SharedConsts[_0x2054fb(0x164)]];if(!_0x39235a||_0x39235a?.[_0x2054fb(0xf2)]!==_0x3840ba['prop'])return;if(_0x39235a[_0x2054fb(0x103)])return;const _0x1cc7c6=_0x588b1a[_0x2054fb(0x17b)];return this[_0x2054fb(0xe9)]()[_0x2054fb(0x12e)](async _0x511ba7=>{const _0x570387=_0x2054fb;let _0x25af8f;try{_0x25af8f=await Renderer['hover'][_0x570387(0x18a)](_0x39235a[_0x570387(0xde)],_0x39235a[_0x570387(0x148)],_0x39235a[_0x570387(0xe2)]);}catch(_0x504b9f){ui[_0x570387(0x16c)][_0x570387(0x113)](_0x570387(0x141)+(_0x25af8f?.[_0x570387(0x1b1)]??_0x39235a[_0x570387(0xe2)])+_0x570387(0x15f)+VeCt['STR_SEE_CONSOLE']);throw _0x504b9f;}if(!_0x25af8f){const _0x5677e3=_0x570387(0x141)+_0x39235a[_0x570387(0xe2)]+_0x570387(0x15f)+VeCt['STR_SEE_CONSOLE'];ui[_0x570387(0x16c)]['error'](_0x5677e3);throw new Error(_0x5677e3);}try{if(_0x511ba7){const _0x2664e6=new this({'actor':_0x1cc7c6});await _0x2664e6[_0x570387(0x172)](),await _0x2664e6[_0x570387(0xfb)](_0x25af8f,{'filterValues':_0x39235a[_0x570387(0xef)]}),ui[_0x570387(0x16c)][_0x570387(0x119)]('Imported\x20\x22'+_0x25af8f[_0x570387(0x1b1)]+_0x570387(0x174)+_0x3840ba['importerName']+_0x570387(0x1af));return;}_0x2d5937=MiscUtil[_0x570387(0x14a)](_0x2d5937),MiscUtil[_0x570387(0xca)](_0x2d5937['flags'],SharedConsts[_0x570387(0x1ac)],_0x570387(0x103),!![]),await _0x1cc7c6[_0x570387(0x13f)](_0x570387(0xc3),[_0x2d5937]);}catch(_0x1151c){ui[_0x570387(0x16c)]['error'](_0x570387(0x141)+_0x25af8f['name']+'\x22!\x20'+VeCt[_0x570387(0xd2)]);throw _0x1151c;}}),![];});}static async['_pGetUseImporterDragDrop'](){const _0x17eb9f=_0x36dd,_0x974e54=Config['get'](_0x17eb9f(0x177),_0x17eb9f(0x15b));if(_0x974e54===ConfigConsts[_0x17eb9f(0x192)])return![];if(_0x974e54===ConfigConsts[_0x17eb9f(0x109)]){const _0x6fae6b=await InputUiUtil[_0x17eb9f(0x151)]({'title':'Import\x20via\x20'+(Config[_0x17eb9f(0x102)]('ui','isStreamerMode')?_0x17eb9f(0x165):SharedConsts[_0x17eb9f(0x120)])+_0x17eb9f(0xbf),'textYes':_0x17eb9f(0xfc),'textNo':_0x17eb9f(0x190)});if(!_0x6fae6b)return![];}return!![];}constructor(_0x281c9f,_0x46a36b,_0x331519){const _0x11febc=_0x36dd;_0x331519=_0x331519||{};if(!_0x331519[_0x11febc(0x1a6)]&&!_0x331519[_0x11febc(0xc2)])throw new Error(_0x11febc(0x16e));const _0x4bc4b3={'template':SharedConsts[_0x11febc(0x125)]+_0x11febc(0x16d),'width':0x3c0,'height':Util[_0x11febc(0xb1)](),'resizable':!![]};Object['assign'](_0x4bc4b3,_0x281c9f||{}),super(_0x4bc4b3),this[_0x11febc(0x13d)]=_0x331519['props'],this[_0x11febc(0x1bf)]=_0x331519['propsBrewAdditionalData'];if(this[_0x11febc(0x13d)]&&this[_0x11febc(0x1bf)]&&this['_props'][_0x11febc(0xd8)]!==this[_0x11febc(0x1bf)][_0x11febc(0xd8)])throw new Error(_0x11febc(0xf5));this[_0x11febc(0x108)]=_0x331519[_0x11febc(0x183)]||_0x11febc(0x11b),this[_0x11febc(0x118)]=_0x331519['sidebarTab'],this[_0x11febc(0xdd)]=_0x331519[_0x11febc(0x12a)],this[_0x11febc(0xb8)]=_0x331519['defaultFolderPath'],this[_0x11febc(0x1c2)]=_0x331519[_0x11febc(0x153)],this[_0x11febc(0xe4)]=_0x331519['fnListSort'],this[_0x11febc(0x11e)]=_0x331519[_0x11febc(0xbd)],this[_0x11febc(0x14f)]=_0x331519['pageFilter'],this[_0x11febc(0xf3)]=_0x331519['namespace'],this[_0x11febc(0xb2)]=!!_0x331519[_0x11febc(0x100)],this['_isNonCacheableInstance']=_0x331519[_0x11febc(0x1aa)],this[_0x11febc(0xa1)]=_0x331519[_0x11febc(0xde)],this[_0x11febc(0x184)]=_0x331519[_0x11febc(0xa7)],this[_0x11febc(0xc8)]=_0x331519['isModdable'],this[_0x11febc(0x146)]=_0x331519[_0x11febc(0xed)]||_0x11febc(0x1b9),this[_0x11febc(0x147)]=!!_0x331519[_0x11febc(0x112)],this[_0x11febc(0xff)]=_0x331519[_0x11febc(0x17f)],this[_0x11febc(0x154)]=_0x46a36b[_0x11febc(0x1a9)],this[_0x11febc(0x139)]=!!_0x46a36b[_0x11febc(0x1a9)]&&_0x331519[_0x11febc(0x166)],this[_0x11febc(0x186)]=null,this[_0x11febc(0x198)]=null,this[_0x11febc(0x18b)]=[],this['_isClosable']=!![],this[_0x11febc(0xa8)]=![],this[_0x11febc(0xcf)]=![],this['_content']=null,this[_0x11febc(0x12c)]=null,this[_0x11febc(0x11a)]=null,this[_0x11febc(0x187)]=null,this[_0x11febc(0x181)]=null,this[_0x11febc(0x127)]=null,this[_0x11febc(0x1a5)]=null,this[_0x11febc(0x1ab)]=null,this[_0x11febc(0x193)]=null,this[_0x11febc(0xf8)]=null,this[_0x11febc(0xbc)]=null,this[_0x11febc(0x155)]=null,this[_0x11febc(0xe7)]=null,this[_0x11febc(0xf9)]=null,this[_0x11febc(0xce)]=null,this[_0x11febc(0x106)]=null,this[_0x11febc(0xf1)]=null;}get[_0x2f1b98(0xde)](){return this['_page'];}get['folderType'](){return this['_folderType'];}set[_0x2f1b98(0xab)](_0x464d8c){this['_isClosable']=_0x464d8c;}get[_0x2f1b98(0xc2)](){const _0x2a4cdb=_0x2f1b98;return this[_0x2a4cdb(0xf3)];}get['props'](){const _0x55e146=_0x2f1b98;return this[_0x55e146(0x13d)];}set[_0x2f1b98(0x11d)](_0x5b489f){this['_pack']=_0x5b489f;}get['folderPathSpec'](){return this['_folderPathSpec'];}get[_0x2f1b98(0x100)](){return this['_isFolderOnly'];}get[_0x2f1b98(0x1aa)](){const _0x301511=_0x2f1b98;return!!this[_0x301511(0x17c)];}get[_0x2f1b98(0x112)](){const _0x28f272=_0x2f1b98;return!!this[_0x28f272(0x147)];}set[_0x2f1b98(0x160)](_0x457496){const _0x4c489a=_0x2f1b98;this[_0x4c489a(0xf1)]=_0x457496;}get[_0x2f1b98(0x12a)](){const _0x5a085a=_0x2f1b98;return this[_0x5a085a(0xdd)];}get[_0x2f1b98(0xd1)](){const _0x5d5f9c=_0x2f1b98;if(this[_0x5d5f9c(0xda)])return!![];else return!this[_0x5d5f9c(0xa8)];}get[_0x2f1b98(0x130)](){const _0x3421cc=_0x2f1b98;return this[_0x3421cc(0x13d)]['map']((_0x84a72b,_0x3acd54)=>({'prop':_0x84a72b,'propBrewAdditionalData':this[_0x3421cc(0x1bf)]?.[_0x3acd54]}));}async[_0x2f1b98(0x137)](_0xf03b25){const _0x5e0518=_0x2f1b98;this[_0x5e0518(0xe3)]=_0xf03b25;}async[_0x2f1b98(0x10f)](_0x109167){const _0x3dc06a=_0x2f1b98;this[_0x3dc06a(0x154)]=_0x109167['_actor'],this[_0x3dc06a(0x186)]=_0x109167[_0x3dc06a(0x186)],await this[_0x3dc06a(0xc9)](_0x109167['_folderPathSpec']);}['close'](..._0x3c1ff2){const _0x2c8d38=_0x2f1b98;if(this[_0x2c8d38(0x17c)]){if(this[_0x2c8d38(0x14f)]&&this['_pageFilter'][_0x2c8d38(0xd6)])this[_0x2c8d38(0x14f)][_0x2c8d38(0xd6)]['teardown']();return super['close'](..._0x3c1ff2);}if(!this[_0x2c8d38(0xda)]){this['_isHidden']=!![],this[_0x2c8d38(0x18f)][_0x2c8d38(0x12f)]();return;}if(this[_0x2c8d38(0x14f)]&&this[_0x2c8d38(0x14f)][_0x2c8d38(0xd6)])this[_0x2c8d38(0x14f)][_0x2c8d38(0xd6)][_0x2c8d38(0x19d)]();return super[_0x2c8d38(0x128)](..._0x3c1ff2);}async['pPreRender'](){}[_0x2f1b98(0x1b2)](..._0x3e1a46){const _0x4fef75=_0x2f1b98;if(this[_0x4fef75(0xa8)]){this[_0x4fef75(0x18f)][_0x4fef75(0xdf)](),this[_0x4fef75(0xa8)]=![];return;}return super[_0x4fef75(0x1b2)](..._0x3e1a46);}['showAndRender'](..._0x47362f){const _0x561d5b=_0x2f1b98;return this[_0x561d5b(0xa8)]&&(this[_0x561d5b(0x18f)]['showVe'](),this[_0x561d5b(0xa8)]=![]),this[_0x561d5b(0x1b2)](..._0x47362f);}[_0x2f1b98(0x121)](){const _0x4e2a6e=_0x2f1b98;if(this[_0x4e2a6e(0x186)])ui[_0x4e2a6e(0xea)]['activateTab'](_0x4e2a6e(0x135));else{if(!this[_0x4e2a6e(0x154)]&&this[_0x4e2a6e(0x118)])ui[_0x4e2a6e(0xea)]['activateTab'](this[_0x4e2a6e(0x118)]);}}async['pInit'](){const _0x3d21df=_0x2f1b98;if(this[_0x3d21df(0xcf)])return;this[_0x3d21df(0xcf)]=!![],await this['_pLoadFolderPathSpec']();}async[_0x2f1b98(0x17a)](){const _0xc645e6=_0x2f1b98;this[_0xc645e6(0x18b)]=MiscUtil[_0xc645e6(0x102)](await GameStorage[_0xc645e6(0xcc)](this['_getFullFolderPathSpecKey']()),_0xc645e6(0x123));if(this[_0xc645e6(0x18b)]==null)await this[_0xc645e6(0xc9)]((this[_0xc645e6(0xb8)]||[])[_0xc645e6(0x13a)](_0x4ea9b4=>FolderPathBuilderRow[_0xc645e6(0xc6)](_0x4ea9b4)));}async[_0x2f1b98(0xc9)](_0x293787){const _0x577051=_0x2f1b98;return this[_0x577051(0x18b)]=_0x293787,GameStorage[_0x577051(0x1bd)](this[_0x577051(0x129)](),{'path':this[_0x577051(0x18b)]});}[_0x2f1b98(0x129)](){const _0x287070=_0x2f1b98;return ImportList['_STO_K_FOLDER_PATH_SPEC']+'.'+this[_0x287070(0x171)][_0x287070(0x1b1)];}['getData'](){const _0x1f7f19=_0x2f1b98;return{'isRadio':this[_0x1f7f19(0x139)],'isPreviewable':this[_0x1f7f19(0x184)],'titleButtonRun':this[_0x1f7f19(0x146)],'titleSearch':this[_0x1f7f19(0x108)],'cols':[{'name':_0x1f7f19(0xc7),'width':0x9,'field':'name'},{'name':'Source','width':0x2,'field':_0x1f7f19(0x148),'titleProp':_0x1f7f19(0xd5),'displayProp':_0x1f7f19(0x105),'classNameProp':_0x1f7f19(0x132),'rowClassName':_0x1f7f19(0xc5)}],'rows':this[_0x1f7f19(0xe3)]['map']((_0x3dbb37,_0xf15253)=>{const _0x119f94=_0x1f7f19;if(this[_0x119f94(0x14f)])this[_0x119f94(0x14f)][_0x119f94(0x171)]['mutateForFilters'](_0x3dbb37);return{'name':_0x3dbb37[_0x119f94(0x1b1)],'source':_0x3dbb37[_0x119f94(0x148)],'sourceShort':Parser[_0x119f94(0x149)](_0x3dbb37[_0x119f94(0x148)]),'sourceLong':Parser[_0x119f94(0xd0)](_0x3dbb37[_0x119f94(0x148)]),'sourceClassName':Parser[_0x119f94(0x10b)](_0x3dbb37['source']),'ix':_0xf15253};})};}['_activateListeners_doFindUiElements'](_0x7b4342){const _0x1371e8=_0x2f1b98,_0x179b08=_0x7b4342[0x0],_0x20efff=$(_0x179b08['children'][0x0]);this[_0x1371e8(0x187)]=_0x20efff['find']('[name=\x22btn-filter\x22]'),this[_0x1371e8(0x181)]=_0x20efff[_0x1371e8(0x176)](_0x1371e8(0x104)),this[_0x1371e8(0x127)]=_0x20efff[_0x1371e8(0x176)]('[name=\x22btn-toggle-summary\x22]'),this[_0x1371e8(0x1a5)]=_0x20efff[_0x1371e8(0x176)](_0x1371e8(0x1bb)),this['_$dispNumVisible']=_0x20efff[_0x1371e8(0x176)](_0x1371e8(0x1a0)),this[_0x1371e8(0x106)]=$(_0x179b08['children'][0x1]);const _0xf7b9ec=$(_0x179b08[_0x1371e8(0xa9)][0x2]);this[_0x1371e8(0x193)]=_0xf7b9ec[_0x1371e8(0x176)](_0x1371e8(0x111)),this[_0x1371e8(0xf8)]=_0xf7b9ec[_0x1371e8(0x176)](_0x1371e8(0x158)),this[_0x1371e8(0xf9)]=_0xf7b9ec,this[_0x1371e8(0xce)]=$(_0x179b08['children'][0x3]),this['_$wrpRun']=$(_0x179b08[_0x1371e8(0xa9)][0x4]),this[_0x1371e8(0x155)]=this['_$wrpRun']['find'](_0x1371e8(0x11c)),this[_0x1371e8(0xc8)]&&(this['_$btnRunWithMods']=this[_0x1371e8(0xbc)]['find'](_0x1371e8(0xc4)));}[_0x2f1b98(0xb6)](_0xdf71f8){const _0x5df57d=_0x2f1b98;super['activateListeners'](_0xdf71f8),this['_activateListeners_doFindUiElements'](_0xdf71f8),this['_activateListeners_initRunButton'](),this[_0x5df57d(0x181)][_0x5df57d(0x16b)](()=>{const _0x5c3ebe=_0x5df57d;this['_$iptSearch']['val']('');if(this['_list'])this[_0x5c3ebe(0x12c)][_0x5c3ebe(0x197)]();});this[_0x5df57d(0x14f)]?this[_0x5df57d(0x1a8)]()[_0x5df57d(0x12e)](()=>this[_0x5df57d(0xcd)]()):this[_0x5df57d(0x169)]();this[_0x5df57d(0x12c)]['on'](_0x5df57d(0x134),()=>this['_$dispNumVisible'][_0x5df57d(0xd7)](this[_0x5df57d(0x12c)][_0x5df57d(0x143)][_0x5df57d(0xd8)]+'/'+this[_0x5df57d(0x12c)][_0x5df57d(0xfe)][_0x5df57d(0xd8)])),ListUiUtil['bindSelectAllCheckbox'](this[_0x5df57d(0x193)],this[_0x5df57d(0x12c)]),ListUiUtil[_0x5df57d(0xb9)](this[_0x5df57d(0xf8)],this['_list']);if(this['_$btnReset'])this['_$btnReset'][_0x5df57d(0x16b)]();}[_0x2f1b98(0xcd)](){const _0x30faa9=_0x2f1b98;if(!this['_isPreviewable'])return;const _0x22b48a=this[_0x30faa9(0x12c)][_0x30faa9(0xfe)],_0x7b0a20=_0x22b48a['length'];for(let _0x4b13fc=0x0;_0x4b13fc<_0x7b0a20;++_0x4b13fc){const _0x24f660=_0x22b48a[_0x4b13fc],_0xe2dec7=_0x24f660[_0x30faa9(0x13b)][_0x30faa9(0x10c)][_0x30faa9(0xa9)][0x1],_0x3c9e99=_0xe2dec7['children'][0x0],_0x359fdd=_0xe2dec7[_0x30faa9(0xa9)][0x1];this[_0x30faa9(0x18e)](_0x24f660,_0x3c9e99),this['_activateListeners_initPreviewImportButton'](_0x24f660,_0x359fdd);}}[_0x2f1b98(0x18e)](_0x45f7e2,_0x10c694){const _0x55139f=_0x2f1b98;ListUiUtil[_0x55139f(0x107)](this['_page'],this[_0x55139f(0xe3)],_0x45f7e2,_0x10c694);}[_0x2f1b98(0x116)](_0x1d03a2,_0x305957){const _0x166bbb=_0x2f1b98;_0x305957[_0x166bbb(0x167)](_0x166bbb(0x16b),async _0x190b22=>{const _0x37b10c=_0x166bbb;_0x190b22[_0x37b10c(0x101)](),_0x190b22['preventDefault']();if(this['_isRadio'])this[_0x37b10c(0x128)]();const _0x5af603=this['_content'][_0x1d03a2['ix']];try{await this[_0x37b10c(0x14c)]();let _0x52653b;try{_0x52653b=await this[_0x37b10c(0xfb)](_0x5af603);}finally{this['_pHandleClickRunButton_doDumpPackCache']();}if(!_0x52653b)return;UtilApplications[_0x37b10c(0x10e)](_0x52653b);}catch(_0x514f69){setTimeout(()=>{throw _0x514f69;}),UtilApplications[_0x37b10c(0x10e)]({'entity':_0x5af603,'status':UtilApplications[_0x37b10c(0x13e)]});}});}[_0x2f1b98(0x126)](){const _0x1a950f=_0x2f1b98;this[_0x1a950f(0x155)][_0x1a950f(0x16b)](()=>this[_0x1a950f(0x189)]()),this[_0x1a950f(0xc8)]&&this['_$btnRunWithMods']['click'](async()=>{const _0x47195f=_0x1a950f;try{this['_isUseMods']=!![],await this['_pHandleClickRunButton']();}finally{this[_0x47195f(0x1b3)]=![];}});}async[_0x2f1b98(0x114)](_0x4fa2fc){return _0x4fa2fc;}async[_0x2f1b98(0x189)](){const _0x2a64ea=_0x2f1b98;if(!this[_0x2a64ea(0x12c)])return;const _0x4af21c=this[_0x2a64ea(0x12c)][_0x2a64ea(0xfe)][_0x2a64ea(0x150)](_0x2c8480=>_0x2c8480[_0x2a64ea(0x19a)]['cbSel'][_0x2a64ea(0x11f)])[_0x2a64ea(0x13a)](_0x37b765=>_0x37b765['ix']);if(!_0x4af21c[_0x2a64ea(0xd8)])return ui['notifications'][_0x2a64ea(0xd4)](_0x2a64ea(0x1b7));if(!this['_pack']&&_0x4af21c[_0x2a64ea(0xd8)]>0x64&&!Config[_0x2a64ea(0x102)]('ui',_0x2a64ea(0xdc))){const _0x54c53f=await InputUiUtil[_0x2a64ea(0x151)]({'title':_0x2a64ea(0x15a),'htmlDescription':'You\x20have\x20selected\x20'+_0x4af21c[_0x2a64ea(0xd8)]+_0x2a64ea(0x124),'textYesRemember':_0x2a64ea(0x1a3),'textYes':'Continue','textNo':'Cancel','fnRemember':_0x48cfa8=>Config[_0x2a64ea(0xca)]('ui',_0x2a64ea(0xdc),_0x48cfa8)});if(_0x54c53f==null||_0x54c53f===![])return;}this['close'](),this['activateSidebarTab']();let _0xb04528=_0x4af21c[_0x2a64ea(0x13a)](_0x14a3ce=>this['_content'][_0x14a3ce]);_0xb04528=await this['_pFnPostProcessEntries'](_0xb04528);if(_0xb04528==null)return;await this[_0x2a64ea(0x14c)]();const _0x52c133=_0xb04528[_0x2a64ea(0x13a)](_0x41c8b1=>{const _0x3019fa=_0x2a64ea;return new Util[(_0x3019fa(0x180))]((_0x41c8b1[_0x3019fa(0x185)]||_0x41c8b1[_0x3019fa(0x1b1)])+'\x20('+Parser[_0x3019fa(0x149)](_0x41c8b1[_0x3019fa(0x148)])+')',()=>this[_0x3019fa(0xfb)](_0x41c8b1));});await UtilApplications['pRunTasks'](_0x52c133);if(!this[_0x2a64ea(0x154)])game[this['_gameProp']]['render']();this[_0x2a64ea(0x159)](),this[_0x2a64ea(0x193)][_0x2a64ea(0x138)](_0x2a64ea(0x11f),![]),this[_0x2a64ea(0x12c)][_0x2a64ea(0xfe)][_0x2a64ea(0xbb)](_0x1732db=>{const _0x1163d8=_0x2a64ea;_0x1732db['data'][_0x1163d8(0xb0)][_0x1163d8(0x11f)]=![],_0x1732db[_0x1163d8(0x13b)]['classList'][_0x1163d8(0x14b)](_0x1163d8(0x19f));});}[_0x2f1b98(0x1a8)](){const _0x258f40=_0x2f1b98;return this['_list']=new List({'$iptSearch':this[_0x258f40(0x1a5)],'$wrpList':this[_0x258f40(0xce)],'fnSort':this[_0x258f40(0xe4)],'sortByInitial':this[_0x258f40(0x11e)]}),SortUtil[_0x258f40(0x170)](this['_$wrpBtnsSort'],this[_0x258f40(0x12c)]),this[_0x258f40(0x14f)][_0x258f40(0xa5)]({'$iptSearch':this[_0x258f40(0x1a5)],'$btnReset':this[_0x258f40(0x181)],'$btnOpen':this['_$bntFilter'],'$btnToggleSummaryHidden':this[_0x258f40(0x127)],'$wrpMiniPills':this[_0x258f40(0x106)],'namespace':this['_getFilterNamespace']()})[_0x258f40(0x12e)](async()=>{const _0x39cc58=_0x258f40;this['_content'][_0x39cc58(0xbb)](_0x311b74=>this[_0x39cc58(0x14f)][_0x39cc58(0xa3)](_0x311b74)),this[_0x39cc58(0xe5)](),this['_list'][_0x39cc58(0xb5)](),this[_0x39cc58(0x14f)][_0x39cc58(0xd6)][_0x39cc58(0x1b2)](),await this['_pPostFilterRender'](),this[_0x39cc58(0x14f)][_0x39cc58(0xd6)]['on'](FilterBox['EVNT_VALCHANGE'],this[_0x39cc58(0xb4)][_0x39cc58(0xb3)](this)),this[_0x39cc58(0xb4)]();});}async[_0x2f1b98(0x1ae)](){}[_0x2f1b98(0x169)](){const _0x2594d9=_0x2f1b98;this[_0x2594d9(0x12c)]=new List({'$iptSearch':this[_0x2594d9(0x1a5)],'$wrpList':this['_$wrpList'],'fnSort':this['_fnListSort']}),SortUtil['initBtnSortHandlers'](this[_0x2594d9(0xf9)],this[_0x2594d9(0x12c)]),this['_activateListeners_absorbListItems'](),this[_0x2594d9(0x12c)][_0x2594d9(0xb5)]();}['_activateListeners_absorbListItems'](){const _0x4c0eac=_0x2f1b98;this[_0x4c0eac(0x12c)][_0x4c0eac(0x196)](this[_0x4c0eac(0xe3)],{'fnGetName':_0x24d74c=>_0x24d74c[_0x4c0eac(0x1b1)],'fnGetValues':_0x458530=>({'source':_0x458530[_0x4c0eac(0x148)],'hash':UrlUtil['URL_TO_HASH_BUILDER'][this[_0x4c0eac(0xa1)]](_0x458530)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x19de5d=>this['_isRadio']?UtilList2[_0x4c0eac(0x10a)](this[_0x4c0eac(0x12c)],_0x19de5d):UtilList2[_0x4c0eac(0x1a4)](this[_0x4c0eac(0x12c)],_0x19de5d)});}['_handleFilterChange'](){const _0x34dd24=_0x2f1b98,_0x19e328=this[_0x34dd24(0x14f)][_0x34dd24(0xd6)][_0x34dd24(0xae)]();this[_0x34dd24(0x12c)][_0x34dd24(0x150)](_0x4d20c4=>this[_0x34dd24(0x14f)][_0x34dd24(0xba)](_0x19e328,this[_0x34dd24(0xe3)][_0x4d20c4['ix']]));}async['pImportEntry'](){throw new Error('Unimplemented!');}async[_0x2f1b98(0x1b6)](){throw new Error('Unimplemented!');}['getFolderPathMeta'](){const _0x361051=_0x2f1b98;return{'alpha':{'label':'First\x20Letter\x20of\x20Name','getter':_0x5d11c9=>_0x5d11c9['name']['slice'](0x0,0x1)[_0x361051(0x10d)]()},'source':{'label':_0x361051(0x156),'getter':_0x14bfd1=>Parser[_0x361051(0xd0)](_0x14bfd1[_0x361051(0x148)])},'sourceAbbreviation':{'label':_0x361051(0xee),'getter':_0x3617b6=>Parser['sourceJsonToAbv'](_0x3617b6[_0x361051(0x148)])}};}async[_0x2f1b98(0x157)](_0x41b44c,_0x4c5cd9){const _0x34de17=_0x2f1b98;_0x4c5cd9=_0x4c5cd9||{};const _0x18c7fd=_0x4c5cd9['folderType']||this[_0x34de17(0x1c2)];if(!this[_0x34de17(0x18b)][_0x34de17(0xd8)]||!_0x18c7fd)return null;const _0x504a8d=this[_0x34de17(0xf0)](),_0x3c4041=this['_folderPathSpec'][_0x34de17(0x150)](_0x236e5f=>_0x236e5f[_0x34de17(0x14e)]?_0x236e5f[_0x34de17(0x15d)]&&_0x236e5f[_0x34de17(0x15d)][_0x34de17(0xfd)]():_0x236e5f[_0x34de17(0xc1)])[_0x34de17(0x13a)](_0x381702=>_0x381702[_0x34de17(0x14e)]?_0x381702['text']:_0x504a8d[_0x381702[_0x34de17(0xc1)]]['getter'](_0x41b44c)),_0x52573d=[],_0x2175af=(_0x375d46,_0x12ecb5)=>{const _0x3547c0=_0x34de17,_0xaae084=CONFIG[_0x3547c0(0x18c)][_0x3547c0(0x178)][_0x3547c0(0x12b)][_0x3547c0(0x110)][_0x3547c0(0x150)](_0x2987e6=>{const _0x3a91c3=_0x3547c0,_0x272e3c=_0x2987e6['data'][_0x3a91c3(0x1b1)]===_0x375d46,_0x2d94ab=_0x2987e6[_0x3a91c3(0x19a)][_0x3a91c3(0x1a7)]===_0x18c7fd,_0x2bc8fa=_0x12ecb5?_0x2987e6[_0x3a91c3(0x19a)][_0x3a91c3(0x17b)]===_0x12ecb5:_0x2987e6[_0x3a91c3(0x19a)][_0x3a91c3(0x17b)]==null;return _0x272e3c&&_0x2d94ab&&_0x2bc8fa;});if(_0xaae084[_0x3547c0(0xd8)]>0x1){const _0x3bc2e1='Ambiguous\x20folder\x20path!\x20Found\x20multiple\x20folders\x20for\x20'+_0x52573d['map'](_0xaffbe6=>_0xaffbe6['data'][_0x3547c0(0x1b1)])[_0x3547c0(0xa2)]('\x20>\x20');ui[_0x3547c0(0x16c)]['error'](_0x3bc2e1);throw new Error(_0x3bc2e1);}else{if(_0xaae084['length'])return _0xaae084[0x0];else return null;}};for(let _0x443fbd=0x0;_0x443fbd<_0x3c4041[_0x34de17(0xd8)];++_0x443fbd){const _0x26b354=_0x3c4041[_0x443fbd],_0x34832c=_0x443fbd===_0x3c4041['length']-0x1,_0x2e2876=_0x52573d[_0x34de17(0xd8)]?_0x52573d['last']()['id']:null,_0x2036a7=_0x2175af(_0x26b354,_0x2e2876);if(_0x2036a7)_0x52573d[_0x34de17(0x133)](_0x2036a7);else{const _0x12d927={'name':_0x26b354,'parent':_0x2e2876,'type':_0x18c7fd};if(_0x34832c&&_0x4c5cd9['sorting'])_0x12d927[_0x34de17(0x1ad)]=_0x4c5cd9[_0x34de17(0x1ad)];const _0x2bc6fc=await Folder[_0x34de17(0x1b8)](_0x12d927,{});_0x52573d[_0x34de17(0x133)](_0x2bc6fc);}}if(_0x52573d[_0x34de17(0xd8)])return _0x52573d['last']()['id'];return null;}async[_0x2f1b98(0x13c)](){const _0x880418=_0x2f1b98;await this[_0x880418(0x17a)]();const _0x4957ce=new FolderPathBuilderApp(this);_0x4957ce[_0x880418(0x1b2)](!![]);}[_0x2f1b98(0xf6)](_0x138e58){const _0x29fca9=_0x2f1b98;return Vetools[_0x29fca9(0xf6)](_0x138e58,this[_0x29fca9(0x13d)]);}[_0x2f1b98(0xf7)](){const _0x29861d=_0x2f1b98;return _0x29861d(0x1c0)+(this[_0x29861d(0xf3)]||this['_props']['join']('_'));}['_getDuplicateMeta'](_0x350821){const _0x20a2cf=_0x2f1b98;_0x350821=_0x350821||{};const _0x16bdb0=_0x350821['gameProp']||this[_0x20a2cf(0xdd)],_0x5b707a=_0x16bdb0===this[_0x20a2cf(0xdd)]?this[_0x20a2cf(0x186)]:null;let _0x219829=null;switch(_0x16bdb0){case _0x20a2cf(0x15e):case _0x20a2cf(0xfe):{if(!(_0x350821[_0x20a2cf(0x1b1)]&&_0x350821[_0x20a2cf(0x148)]||_0x350821[_0x20a2cf(0xaa)]))throw new Error('Either\x20\x22name\x22\x20and\x20\x22source\x22,\x20or\x20\x22entity\x22,\x20must\x20be\x20provided!');const _0x9deae1=(_0x350821[_0x20a2cf(0x1b1)]||DataConverter[_0x20a2cf(0x194)](_0x350821[_0x20a2cf(0xaa)]))[_0x20a2cf(0x14d)]()[_0x20a2cf(0xfd)](),_0x127f77=(_0x350821[_0x20a2cf(0x148)]||DataConverter[_0x20a2cf(0xfa)](_0x350821['entity']))[_0x20a2cf(0x14d)]()[_0x20a2cf(0xfd)]();switch(_0x16bdb0){case _0x20a2cf(0x15e):{if(_0x5b707a){const _0x58a983=this[_0x20a2cf(0xe6)]({'name':_0x9deae1,'source':_0x127f77});_0x219829=(this[_0x20a2cf(0x198)]||{})[_0x58a983];}else _0x219829=game[_0x16bdb0][_0x20a2cf(0x176)](_0x33ea0e=>this[_0x20a2cf(0x171)][_0x20a2cf(0x1b0)](_0x33ea0e)===_0x9deae1&&(!Config[_0x20a2cf(0x102)](_0x20a2cf(0x177),_0x20a2cf(0xcb))||(MiscUtil['get'](_0x33ea0e,_0x20a2cf(0x19a),'data',_0x20a2cf(0xbe),_0x20a2cf(0x148))||'')['toLowerCase']()['trim']()===_0x127f77));break;}case _0x20a2cf(0xfe):{if(_0x5b707a){const _0x451ecb=this['_getDuplicateMeta_getEntityKey']({'name':_0x9deae1,'source':_0x127f77});_0x219829=(this[_0x20a2cf(0x198)]||{})[_0x451ecb];}else _0x219829=game[_0x16bdb0][_0x20a2cf(0x176)](_0x3e4d4c=>this[_0x20a2cf(0x171)][_0x20a2cf(0x1b0)](_0x3e4d4c)===_0x9deae1&&(!Config[_0x20a2cf(0x102)](_0x20a2cf(0x177),_0x20a2cf(0xcb))||(MiscUtil[_0x20a2cf(0x102)](_0x3e4d4c,_0x20a2cf(0x19a),_0x20a2cf(0x19a),_0x20a2cf(0x148))||'')[_0x20a2cf(0x14d)]()[_0x20a2cf(0xfd)]()===_0x127f77));break;}}break;}case _0x20a2cf(0x1be):case _0x20a2cf(0x152):{const _0x41d608=_0x350821['name'][_0x20a2cf(0x14d)]()[_0x20a2cf(0xfd)]();if(_0x5b707a){const _0x298dbf=this[_0x20a2cf(0xe6)]({'name':_0x41d608});_0x219829=(this[_0x20a2cf(0x198)]||{})[_0x298dbf];}else _0x219829=game[_0x16bdb0]['find'](_0x4c34d1=>this[_0x20a2cf(0x171)][_0x20a2cf(0x1b0)](_0x4c34d1)===_0x41d608);break;}default:throw new Error('Game\x20property\x20\x22'+_0x16bdb0+_0x20a2cf(0x142));}const _0x15eaaf=Config['get'](_0x20a2cf(0x177),_0x20a2cf(0x145));return{'mode':_0x15eaaf,'existing':_0x219829,'isSkip':_0x15eaaf===ConfigConsts['C_IMPORT_DEDUPE_MODE_SKIP']&&_0x219829!=null,'isOverwrite':_0x15eaaf===ConfigConsts[_0x20a2cf(0x168)]&&_0x219829!=null};}static[_0x2f1b98(0x1b0)](_0x5b8bee){const _0x371bce=_0x2f1b98;let _0x226993=(MiscUtil['get'](_0x5b8bee,'data',_0x371bce(0x1b1))||'')[_0x371bce(0x14d)]()[_0x371bce(0xfd)]();return _0x226993=_0x226993[_0x371bce(0x191)](/\[[^\]]+]/g,'')[_0x371bce(0xfd)](),_0x226993;}[_0x2f1b98(0xe6)](_0x6fa287){const _0x1e4c73=_0x2f1b98;return Object[_0x1e4c73(0x11b)](_0x6fa287)[_0x1e4c73(0xd3)](([_0x3eced8],[_0x21065c])=>SortUtil[_0x1e4c73(0x18d)](_0x3eced8,_0x21065c))[_0x1e4c73(0x13a)](([_0x3f14b8,_0x509340])=>(_0x3f14b8+'='+(''+_0x509340)[_0x1e4c73(0xfd)]())['toLowerCase']())[_0x1e4c73(0xa2)]('::');}async['_pHandleClickRunButton_pDoPreCachePack'](){const _0x417b14=_0x2f1b98;if(!this[_0x417b14(0x186)]||Config['get'](_0x417b14(0x177),_0x417b14(0x145))===ConfigConsts['C_IMPORT_DEDUPE_MODE_NONE'])return;this[_0x417b14(0x198)]={};const _0x1fffbe=await UtilCompendium['pGetCompendiumData'](this[_0x417b14(0x186)],!![]);_0x1fffbe[_0x417b14(0xbb)](_0x2dc529=>{const _0x53686a=_0x417b14;switch(this['_gameProp']){case _0x53686a(0x15e):{const _0x39bc60=(MiscUtil['get'](_0x2dc529,_0x53686a(0x19a),'name')||'')['toLowerCase']()[_0x53686a(0xfd)](),_0x189d91=(MiscUtil[_0x53686a(0x102)](_0x2dc529,'data',_0x53686a(0x19a),_0x53686a(0xbe),_0x53686a(0x148))||'')['toLowerCase']()[_0x53686a(0xfd)](),_0x368eef=this[_0x53686a(0xe6)]({'name':_0x39bc60,'source':_0x189d91});this[_0x53686a(0x198)][_0x368eef]=_0x2dc529;break;}case _0x53686a(0xfe):{const _0x138da6=(MiscUtil[_0x53686a(0x102)](_0x2dc529,_0x53686a(0x19a),_0x53686a(0x1b1))||'')[_0x53686a(0x14d)]()['trim'](),_0x270421=(MiscUtil['get'](_0x2dc529,_0x53686a(0x19a),_0x53686a(0x19a),_0x53686a(0x148))||'')['toLowerCase']()[_0x53686a(0xfd)](),_0x56adbe=this[_0x53686a(0xe6)]({'name':_0x138da6,'source':_0x270421});this[_0x53686a(0x198)][_0x56adbe]=_0x2dc529;break;}case _0x53686a(0x1be):case'tables':{const _0x28af7d=(MiscUtil[_0x53686a(0x102)](_0x2dc529,_0x53686a(0x19a),_0x53686a(0x1b1))||'')[_0x53686a(0x14d)]()[_0x53686a(0xfd)](),_0x3b132d=this[_0x53686a(0xe6)]({'name':_0x28af7d});this[_0x53686a(0x198)][_0x3b132d]=_0x2dc529;break;}default:throw new Error(_0x53686a(0x173)+this[_0x53686a(0xdd)]+_0x53686a(0x142));}});}[_0x2f1b98(0x159)](){const _0x581110=_0x2f1b98;this[_0x581110(0x198)]=null;}async['_pImportEntry_pDoUpdateExistingPackEntity'](_0x5c3389,_0x1cb237){const _0x36e210=_0x2f1b98;return await _0x5c3389['existing']['deleteEmbeddedDocuments'](_0x36e210(0x16f),_0x5c3389[_0x36e210(0x1b4)]['effects'][_0x36e210(0x13a)](_0x3564ef=>_0x3564ef['id'])),await _0x5c3389[_0x36e210(0x1b4)][_0x36e210(0x1c1)](_0x1cb237),{'imported':[_0x5c3389['existing']],'status':UtilApplications[_0x36e210(0xdb)]};}async[_0x2f1b98(0x115)](_0x5d2cba,_0x221373){const _0x22def6=_0x2f1b98;return await _0x5d2cba[_0x22def6(0x1b4)][_0x22def6(0x1c1)](_0x221373),{'imported':[_0x5d2cba[_0x22def6(0x1b4)]],'status':UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']};}async[_0x2f1b98(0x12d)](_0x5c0854,_0x333cc1,_0x3e20f7){const _0x19c08c=_0x2f1b98,_0x25cfa3=await this['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x5c0854,{'isAddDataFlags':!![],'filterValues':_0x333cc1['filterValues'],..._0x3e20f7,'isAddPermission':!![]}),_0x376f96=this[_0x19c08c(0x136)]({'name':_0x25cfa3[_0x19c08c(0x1b1)],'source':MiscUtil[_0x19c08c(0x102)](_0x25cfa3,_0x19c08c(0x19a),_0x19c08c(0x148))});if(_0x376f96[_0x19c08c(0xe0)])return{'existing':_0x376f96[_0x19c08c(0x1b4)],'status':UtilApplications[_0x19c08c(0x1bc)]};let _0x3611b8;switch(this[_0x19c08c(0xdd)]){case _0x19c08c(0xfe):_0x3611b8=Item;break;case'journal':_0x3611b8=JournalEntry;break;case _0x19c08c(0x152):_0x3611b8=RollTable;break;}if(_0x333cc1['isTemp']){const _0x36daa3=await _0x3611b8[_0x19c08c(0x1b8)](_0x25cfa3,{'renderSheet':!![],'temporary':!![]});return{'imported':[_0x36daa3],'status':UtilApplications[_0x19c08c(0x1b5)]};}else{if(this[_0x19c08c(0x186)]){if(_0x376f96[_0x19c08c(0x144)])return this[_0x19c08c(0x19e)](_0x376f96,_0x25cfa3);const _0x45bd56=await _0x3611b8[_0x19c08c(0x1b8)](_0x25cfa3,{'renderSheet':![],'temporary':![]});return await this[_0x19c08c(0x186)][_0x19c08c(0x140)](_0x45bd56),{'imported':[_0x45bd56],'status':UtilApplications[_0x19c08c(0x1b5)]};}else{if(_0x376f96[_0x19c08c(0x144)])return this[_0x19c08c(0x115)](_0x376f96,_0x25cfa3);const _0x301dcf=await this[_0x19c08c(0x157)](_0x5c0854);if(_0x301dcf)_0x25cfa3[_0x19c08c(0x175)]=_0x301dcf;const _0x4fc5b3=await _0x3611b8[_0x19c08c(0x1b8)](_0x25cfa3,{'renderSheet':![],'temporary':![]});return await game[this[_0x19c08c(0xdd)]][_0x19c08c(0xca)](_0x4fc5b3['id'],_0x4fc5b3),{'imported':[_0x4fc5b3],'status':UtilApplications[_0x19c08c(0x1b5)]};}}}[_0x2f1b98(0x117)](_0x208ea6,_0x1cdd1f){const _0x5e895f=_0x2f1b98;throw new Error(_0x5e895f(0xa4));}async[_0x2f1b98(0x15c)](){}}ImportList['_STO_K_FOLDER_PATH_SPEC']=_0x2f1b98(0xaf);class FolderPathBuilderApp extends Application{constructor(_0x249b4e){const _0x18e0c6=_0x2f1b98;super({'width':0x1e0,'height':0x1e0,'title':_0x18e0c6(0x161),'template':SharedConsts[_0x18e0c6(0x125)]+_0x18e0c6(0xac),'resizable':!![]}),this[_0x18e0c6(0x1ba)]=new FolderPathBuilder(_0x249b4e);}[_0x2f1b98(0xb6)](_0x25650d){const _0x1b251c=_0x2f1b98;super[_0x1b251c(0xb6)](_0x25650d),this[_0x1b251c(0x1ba)][_0x1b251c(0x1b2)](_0x25650d);}}const MixinUserChooseImporter=_0x4fc12c=>class extends _0x4fc12c{constructor(..._0x397340){const _0x4936dd=_0x2f1b98;super(..._0x397340),this[_0x4936dd(0x139)]=!![],this[_0x4936dd(0x199)]=!![],this['_fnResolve']=null,this['_fnReject']=null,this['pResult']=null;}async[_0x2f1b98(0x189)](){const _0x5c5431=_0x2f1b98;if(!this[_0x5c5431(0x12c)])return;try{const _0x1d4f14=this[_0x5c5431(0x12c)][_0x5c5431(0xfe)][_0x5c5431(0x176)](_0x5b9f8c=>_0x5b9f8c[_0x5c5431(0x19a)][_0x5c5431(0xb0)][_0x5c5431(0x11f)]);if(!_0x1d4f14)return ui[_0x5c5431(0x16c)]['warn']('Please\x20select\x20something\x20from\x20the\x20list!');this[_0x5c5431(0x199)]=![],this[_0x5c5431(0x128)]();let _0x36d8ef=[this['_content'][_0x1d4f14['ix']]];_0x36d8ef=await this[_0x5c5431(0x114)](_0x36d8ef);if(_0x36d8ef==null)return;const _0x59782d=await this[_0x5c5431(0xfb)](_0x36d8ef[0x0],{'isTemp':!![],'isDataOnly':!![]});if(_0x59782d['status']===UtilApplications[_0x5c5431(0x17e)])this[_0x5c5431(0x1a1)](_0x59782d?.['imported']?.[0x0]);else this[_0x5c5431(0x179)](new Error('Import\x20exited\x20with\x20status\x20\x22'+_0x59782d['status'][_0x5c5431(0x162)]()+'\x22'));_0x1d4f14[_0x5c5431(0x19a)][_0x5c5431(0xb0)][_0x5c5431(0x11f)]=![],_0x1d4f14[_0x5c5431(0x13b)]['classList'][_0x5c5431(0x14b)]('list-multi-selected');}catch(_0x41d5e0){this['_fnReject'](_0x41d5e0);}}[_0x2f1b98(0x116)](_0x4d5b52,_0x571a65){const _0x1e0a2c=_0x2f1b98;_0x571a65[_0x1e0a2c(0x167)](_0x1e0a2c(0x16b),async _0x2db02f=>{const _0x2e54a0=_0x1e0a2c;_0x2db02f['stopPropagation'](),_0x2db02f[_0x2e54a0(0x195)]();try{let _0xdcc124=[this[_0x2e54a0(0xe3)][_0x4d5b52['ix']]];_0xdcc124=await this[_0x2e54a0(0x114)](_0xdcc124);if(_0xdcc124==null)return;const _0x4ee2c8=await this[_0x2e54a0(0xfb)](_0xdcc124[0x0],{'isTemp':!![],'isDataOnly':!![]});if(_0x4ee2c8['status']===UtilApplications[_0x2e54a0(0x17e)])this[_0x2e54a0(0x1a1)](_0x4ee2c8?.['imported']?.[0x0]);else this[_0x2e54a0(0x179)](new Error(_0x2e54a0(0xd9)+_0x4ee2c8[_0x2e54a0(0x17d)]['toString']()+'\x22'));this[_0x2e54a0(0x128)]();}catch(_0x562191){this[_0x2e54a0(0x179)](_0x562191);}});}async[_0x2f1b98(0x128)](..._0x5a0c70){const _0x1fd6c0=_0x2f1b98;await super[_0x1fd6c0(0x128)](..._0x5a0c70);if(this[_0x1fd6c0(0x199)])this[_0x1fd6c0(0x1a1)](null);}async[_0x2f1b98(0x1a2)](_0x4ab10c){const _0x590c2f=_0x2f1b98;await super['pPreRender'](_0x4ab10c);if(!_0x4ab10c)return;const {fnResolve:_0x4619c7,fnReject:_0x255dee,pResult:_0x4848a8}=_0x4ab10c;this[_0x590c2f(0x199)]=!![],this[_0x590c2f(0x1a1)]=_0x4619c7,this['_fnReject']=_0x255dee,this[_0x590c2f(0x163)]=_0x4848a8;}static async[_0x2f1b98(0xe1)](_0x4c279e,_0x29932f){const _0x18c6d4=_0x2f1b98,{ChooseImporter:_0x465855}=await import('./ChooseImporter.js'),_0x36aed7=new this({});await _0x36aed7[_0x18c6d4(0x172)]();let _0x45cb80=null,_0x216ca3=null;const _0x5a37ec=new Promise((_0x3884d1,_0x3d897f)=>{_0x45cb80=_0x3884d1,_0x216ca3=_0x3d897f;}),_0x418d5a=new _0x465855(null,{'mode':{..._0x4c279e,'importerInstance':_0x36aed7},'namespace':_0x29932f,'isAlwaysCloseWindow':!![],'isTemp':!![],'isNoImport':!![],'importerPreRenderArgs':{'fnResolve':_0x45cb80,'fnReject':_0x216ca3,'pResult':_0x5a37ec}});return _0x418d5a[_0x18c6d4(0x1b2)](!![]),_0x5a37ec;}};export{ImportList,MixinUserChooseImporter};