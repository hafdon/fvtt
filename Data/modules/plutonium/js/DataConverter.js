'use strict';const _0x3de1=['contents','size','SRD_COMPENDIUMS_CREATURES','_pMutActorUpdate_pMutFromSideSkillProfs','pFillActorConditionImmunityData','medium','sourceJsonToAbv','importOptionalFeature','imgCompendium','_pGetCacheAndGetActorItemCompendiumData','_pGetCacheAndGetCompendiumData_getCompendiums','prop','scalarAddUnit','has','textToNumber','<div\x20class=\x22w-100\x20overflow-x-hidden\x22>','walk','2814SxNzou','PG_ITEMS','getAdventureJournals','stripTags','\x5cd+','cacheId','_COMPENDIUM_CACHES','mode','day','pLock','modeOptions','value','generic','pFillActorVulnerabilityData','reaction','srd','medium\x20armor','_pMutActorUpdate_pMutFromLanguageProfs','_COMPENDIUM_CACHE_KEY_DATA','name','fnGetAliases','index','collection','rwak','_pMutActorUpdate_mutFromSideTokenMod','player','isChannelDivinity','pFillActorLanguageData','WALKER_READONLY_GENERIC',')\x5c))?','skillProficiencies','INS','581401oGsSAH','object','book','weaponProf','ascSortLower','adventure','getMappedLanguage','filter','getEntryDescription','191rSDuIi','\x20(Level\x20','getCleanEntityName','length','getItemActorPassive','getCombinedFoundryData','copy','100569rkMikA','armorProf','pGetCompendiumImage','getSourceWithPagePart','_doApplyFormData','actorTraitProp','importClass','type','render','trim','find','replace','isCancelled','token','endsWith','spell','simple\x20weapons','_pMutActorUpdate_mutFromProficiencySetCustom','importAdventure','1101ajrBFn','importVehicle','actorTokenMod','test','SYM_UI_SKIP','deepEquals','plutonium.configUpdate','TERMS_COUNT','isAddPageNumberToSource','abilityDc','baseCacheId','_SOURCE_PAGE_PREFIX_RE','optionalfeature','tokens','_pHandleConfigUpdate','_pMutActorUpdate_addValidSkills','_COMPENDIUM_CACHES_LOCK','isAddPermission','isSpeedHover','level','diseased','getNameWithSourcePart','race','SRD_COMPENDIUMS_CLASS_FEATURES','other','imgCompendiumFeatures','isIgnoreSrd','indexOf','_pCacheActorItemCompendium','_SOURCE_PAGE_PREFIX','\x20pg.\x20','177WsUxwG','actor','traits','73579fkzlLX','pGetUserInput','skills','mod','pCacheAndGetHash','\x22\x20from\x20object','SKILL_TO_ATB_ABV','746xEradI','subclassFeature','_pMutActorUpdate_mutFromProficiencySetFoundry','exec','pFillActorSkillData','max','_displayName','entity','getWalker','ITEM_TYPES_ACTOR_TOOLS','light\x20armor','ITEM_TYPES_ACTOR_WEAPONS','ITEM_TYPES_ACTOR_ARMOR','setFirstSection','vehicle','canHover','string','SYM_AT','getOrSet','light','conditionals','condition','instead','_COMPENDIUM_ACTOR_IMAGE_LAST_VALUES','includes','_pCacheCompendium','sideData','ordinal','push','languages','_COMPENDIUM_CACHE_KEY_IMAGE','entries','ability','621149jzKWTJ','URL_TO_HASH_BUILDER','_COMPENDIUM_IMAGE_LAST_VALUES','_COMPENDIUM_ACTOR_CACHES_LOCK','pMutActorUpdate','some','join','raceFeature','keys','MODULE_NAME','_getAdventureBookJournals','pGetCompendiumData','classFeature','___','))?\x20your\x20(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)\x20modifier(?:\x20\x5c(minimum\x20of\x20(','SRD_COMPENDIUMS_SPELLS','save','rsak','count','Unknown\x20cache\x20ID\x20\x22','get','getBookJournals','toTitleCase','abilities','getCombinedFoundryFlags','_doApplyFormData_doCheckAddCustomItem','warn','_pGetCacheAndGetCompendiumData','flat','_pMutActorUpdate_mutFromSideDataMod','monster','unshift','scalar','getAbilityModNumber','_pMutActorUpdate_pMutFromSkillProfs','import','attributes','getTagUids','short\x20rest','SRD_COMPENDIUMS_ITEMS','4djTGkH','getCleanOriginalData','heavy\x20armor','sort','item','isAddSourceToName','map','proficient','getMappedTool','assign','SRD_COMPENDIUMS_CLASSES','_pMutActorUpdate_mutFromSideMod_handleProp','page','SRD_COMPENDIUMS_RACES_AND_FEATURES','mwak','5qbFlDS','pGetIconImage','skill','sim','importSpell','<PLUT_SYM__AT>','SRD_COMPENDIUMS_CREATURE_FEATURES','source','_pMutActorUpdate_pMutFromEntries','Shield','7353pwVAic','permissions','img','unlock','SKILL_ABV_TO_FULL','set','getAttackRange','med','isSkipDescription','bonus','none','getDamageTuples','\x20([^}]+)}','unitShort','_pHandleConfigUpdate_pFlushCompendiumImageCaches','_pMutActorUpdate_mutFromSideMod','deepKeys','getSpeedValue','number','_isCompendiumCached','2bHqCFC','_getCachedCompendiumData','packs','data','unit','items','add','importCreature','importRace','creature','toLowerCase','long\x20rest','toolProf','slice','min','monsterFeature','_COMPENDIUM_ACTOR_CACHES','mergeMap','custom','split','forEach','shl','_getCleanOriginalData_recurse','class'];const _0x4897=function(_0x6e2e63,_0x44cd06){_0x6e2e63=_0x6e2e63-0x1e3;let _0x3de1cd=_0x3de1[_0x6e2e63];return _0x3de1cd;};const _0x1213e6=_0x4897;(function(_0x35b16d,_0x493b49){const _0x305838=_0x4897;while(!![]){try{const _0x43bc65=-parseInt(_0x305838(0x259))+-parseInt(_0x305838(0x231))*-parseInt(_0x305838(0x290))+parseInt(_0x305838(0x29a))*parseInt(_0x305838(0x1f5))+-parseInt(_0x305838(0x20f))*-parseInt(_0x305838(0x238))+-parseInt(_0x305838(0x2ae))*parseInt(_0x305838(0x1ec))+-parseInt(_0x305838(0x22e))*parseInt(_0x305838(0x2d7))+-parseInt(_0x305838(0x281))*-parseInt(_0x305838(0x1fc));if(_0x43bc65===_0x493b49)break;else _0x35b16d['push'](_0x35b16d['shift']());}catch(_0x5a57fc){_0x35b16d['push'](_0x35b16d['shift']());}}}(_0x3de1,0xae4b7));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilActors}from'./UtilActors.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{Vetools}from'./Vetools.js';import{Consts}from'./Consts.js';import{Charactermancer_SkillSelect,Charactermancer_LanguageSelect,Charactermancer_ToolSelect}from'./UtilCharactermancer.js';import{UtilCompendium}from'./UtilCompendium.js';import{LGT}from'./Util.js';import{Charactermancer_Race_ConditionImmunitySelect,Charactermancer_Race_DamageImmunitySelect,Charactermancer_Race_DamageResistanceSelect,Charactermancer_Race_DamageVulnerabilitySelect}from'./UtilCharactermancerRace.js';class DataConverter{static['init'](){const _0x365e10=_0x4897;Hooks['on'](_0x365e10(0x215),()=>this['_pHandleConfigUpdate']()),this[_0x365e10(0x21d)]();}static async['_pHandleConfigUpdate'](){const _0x3fc46c=_0x4897;await this[_0x3fc46c(0x2a8)]();}static async[_0x1213e6(0x2a8)](){const _0xb9a437=_0x1213e6,_0x240dc8=[[_0xb9a437(0x2b5),'imgCompendium'],[_0xb9a437(0x210),'imgCompendium'],[_0xb9a437(0x202),'imgCompendium'],['importClass',_0xb9a437(0x228)],['importItem',_0xb9a437(0x2ce)],['importSpell',_0xb9a437(0x2ce)],[_0xb9a437(0x2b6),_0xb9a437(0x228)],[_0xb9a437(0x2cd),_0xb9a437(0x2ce)]];await DataConverter['_COMPENDIUM_CACHES_LOCK'][_0xb9a437(0x2e0)]();try{_0x240dc8[_0xb9a437(0x2c2)](_0x129bf3=>{const _0xcac449=_0xb9a437,_0x2c015c=_0x129bf3[_0xcac449(0x25f)](_0xcac449(0x266)),_0x428d9f=DataConverter[_0xcac449(0x25b)][_0x2c015c]||'',_0x157356=Config[_0xcac449(0x26d)](_0x129bf3[0x0],_0x129bf3[0x1])||'';if(_0x428d9f[_0xcac449(0x205)]()!==_0x157356['trim']()){if(DataConverter[_0xcac449(0x2dd)][DataConverter['_COMPENDIUM_CACHE_KEY_IMAGE']])delete DataConverter[_0xcac449(0x2dd)][DataConverter[_0xcac449(0x256)]][_0x2c015c];}DataConverter[_0xcac449(0x25b)][_0x2c015c]=_0x157356;});}finally{DataConverter[_0xb9a437(0x21f)][_0xb9a437(0x29d)]();}}static[_0x1213e6(0x224)](_0x1dd486,_0x492867){const _0x185a37=_0x1213e6;return''+(_0x492867||Renderer['stripTags'](_0x1dd486['_displayName']||_0x1dd486[_0x185a37(0x2ea)]||''))+(_0x1dd486[_0x185a37(0x297)]&&Config[_0x185a37(0x26d)]('import',_0x185a37(0x286))?'\x20('+Parser['sourceJsonToAbv'](_0x1dd486[_0x185a37(0x297)])+')':'');}static[_0x1213e6(0x1ff)](_0x15b408){const _0x3daf2b=_0x1213e6;return''+Parser[_0x3daf2b(0x2cc)](_0x15b408[_0x3daf2b(0x297)])+(Config['get'](_0x3daf2b(0x27c),_0x3daf2b(0x217))&&_0x15b408['page']?''+DataConverter[_0x3daf2b(0x22c)]+_0x15b408[_0x3daf2b(0x28d)]:'');}static['getItemSource'](_0x585b01){const _0x30fde4=_0x1213e6;let _0xbbcefb=_0x585b01[_0x30fde4(0x2b1)]||{};if(_0xbbcefb['data'])_0xbbcefb=_0xbbcefb['data'];let _0x28d768=_0xbbcefb[_0x30fde4(0x297)];if(_0x28d768 instanceof Array)_0x28d768=_0x28d768[0x0];if(!_0x28d768)return _0x28d768;return _0x28d768[_0x30fde4(0x2c1)](DataConverter[_0x30fde4(0x21a)])[0x0][_0x30fde4(0x205)]();}static['getTagUids'](_0x506b0e,_0x44f859){const _0x3255c9=_0x1213e6,_0x5c78e7=new RegExp('{@'+_0x506b0e+_0x3255c9(0x2a6),'gi'),_0x3133f7=[];return _0x44f859['replace'](_0x5c78e7,(..._0x42463b)=>_0x3133f7[_0x3255c9(0x254)](_0x42463b[0x1])),_0x3133f7;}static async[_0x1213e6(0x291)](_0x4e3761,_0x5838cc){const _0x160954=_0x1213e6;switch(_0x4e3761){case'feat':case _0x160954(0x20b):{const _0x295622=await Vetools['pGetIconLookup'](_0x4e3761),_0xe132e8=MiscUtil['get'](_0x295622,_0x5838cc[_0x160954(0x297)],_0x5838cc[_0x160954(0x2ea)]);if(!_0xe132e8)return null;return'modules/'+SharedConsts[_0x160954(0x262)]+'/'+_0xe132e8;}default:return null;}}static[_0x1213e6(0x1fa)](_0x3a4306,_0xbc7e7c){const _0x497dcc=_0x1213e6;if(!_0xbc7e7c&&!_0x3a4306)return{};const _0x4aa956=MiscUtil[_0x497dcc(0x1fb)](_0xbc7e7c||{});return Object[_0x497dcc(0x28a)](_0x4aa956,MiscUtil['copy'](_0x3a4306||{})),_0x4aa956;}static[_0x1213e6(0x271)](_0x407091,_0x2f1ff1){const _0xc826cc=_0x1213e6;if(!_0x407091&&!_0x2f1ff1)return{};const _0x496d1d=MiscUtil['copy'](_0x2f1ff1||{});return Object['entries'](MiscUtil['copy'](_0x407091||{}))[_0xc826cc(0x2c2)](([_0x2f30ed,_0x553d0a])=>{const _0x150f2d=_0xc826cc;if(!_0x496d1d[_0x2f30ed])return _0x496d1d[_0x2f30ed]=_0x553d0a;Object[_0x150f2d(0x28a)](_0x496d1d[_0x2f30ed],_0x553d0a);}),_0x496d1d;}static async[_0x1213e6(0x1fe)](_0x50815a,_0x1ffef8,_0xdb9543){const _0x2ff2ae=_0x1213e6;return this[_0x2ff2ae(0x274)](DataConverter[_0x2ff2ae(0x256)],_0x50815a,_0x1ffef8,_0xdb9543);}static async[_0x1213e6(0x274)](_0x2b90f6,_0x107403,_0x288254,_0x1c2ac7){const _0x455d43=_0x1213e6;_0x1c2ac7=_0x1c2ac7||{};if(!_0x1c2ac7[_0x455d43(0x229)]&&!_0x288254[_0x455d43(0x2e6)])return null;let _0x27fe25=[];if(_0x288254['srd'])_0x27fe25[_0x455d43(0x254)]((typeof _0x288254['srd']===_0x455d43(0x248)?_0x288254[_0x455d43(0x2e6)]:_0x288254[_0x455d43(0x2ea)])[_0x455d43(0x2b8)]()[_0x455d43(0x205)]());if(_0x288254[_0x455d43(0x23e)])_0x27fe25['push'](_0x288254[_0x455d43(0x23e)]['toLowerCase']()[_0x455d43(0x205)]());if(_0x1c2ac7[_0x455d43(0x2aa)]){_0x27fe25=_0x27fe25[_0x455d43(0x287)](_0x1cdfe6=>({'name':_0x1cdfe6}));if(_0x1c2ac7[_0x455d43(0x2eb)]){const _0x6f5737=_0x1c2ac7[_0x455d43(0x2eb)](_0x288254);_0x6f5737['forEach'](_0x36e5ca=>_0x36e5ca[_0x455d43(0x2ea)]=_0x36e5ca[_0x455d43(0x2ea)]?_0x36e5ca[_0x455d43(0x2ea)][_0x455d43(0x2b8)]()[_0x455d43(0x205)]():_0x36e5ca[_0x455d43(0x2ea)]),_0x27fe25[_0x455d43(0x278)](..._0x6f5737);}}else{if(_0x1c2ac7[_0x455d43(0x2eb)])_0x27fe25[_0x455d43(0x254)](..._0x1c2ac7['fnGetAliases'](_0x288254)['map'](_0x4822a8=>_0x4822a8[_0x455d43(0x2b8)]()[_0x455d43(0x205)]()));}let _0x542cfd;switch(_0x2b90f6){case DataConverter[_0x455d43(0x256)]:{switch(_0x107403){case _0x455d43(0x20b):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)](_0x455d43(0x294),_0x455d43(0x2ce)));break;case _0x455d43(0x277):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)](_0x455d43(0x2b5),'imgCompendium'));break;case _0x455d43(0x285):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)]('importItem',_0x455d43(0x2ce)));break;case _0x455d43(0x2c5):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)]('importClass','imgCompendium'));break;case _0x455d43(0x265):_0x542cfd=this[_0x455d43(0x2d0)](Config['get'](_0x455d43(0x202),_0x455d43(0x228)));break;case _0x455d43(0x239):_0x542cfd=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config['get'](_0x455d43(0x202),_0x455d43(0x228)));break;case _0x455d43(0x21b):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)]('importOptionalFeature',_0x455d43(0x2ce)));break;case'race':_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)](_0x455d43(0x2b6),'imgCompendium'));break;case _0x455d43(0x260):_0x542cfd=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config[_0x455d43(0x26d)]('importRace','imgCompendiumFeatures'));break;case _0x455d43(0x2bd):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x26d)](_0x455d43(0x2b5),_0x455d43(0x228)));break;default:return null;}break;}case DataConverter[_0x455d43(0x2e9)]:{switch(_0x107403){case _0x455d43(0x20b):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x268)]);break;case _0x455d43(0x277):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x2c8)]);break;case'item':_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x280)]);break;case'class':_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x28b)]);break;case'classFeature':_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x226)]);break;case'subclassFeature':_0x542cfd=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config[_0x455d43(0x226)]);break;case _0x455d43(0x21b):_0x542cfd=this[_0x455d43(0x2d0)](Config['SRD_COMPENDIUMS_OPTIONAL_FEATURES']);break;case _0x455d43(0x225):_0x542cfd=this[_0x455d43(0x2d0)](Config['SRD_COMPENDIUMS_RACES_AND_FEATURES']);break;case _0x455d43(0x260):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x28e)]);break;case _0x455d43(0x2bd):_0x542cfd=this[_0x455d43(0x2d0)](Config[_0x455d43(0x296)]);break;default:return null;}break;}default:throw new Error(_0x455d43(0x26c)+_0x2b90f6+'\x22');}if(!_0x542cfd[_0x455d43(0x1f8)])return null;_0x1c2ac7[_0x455d43(0x2aa)]&&(_0x2b90f6={'baseCacheId':_0x2b90f6,'deepKeys':_0x1c2ac7[_0x455d43(0x2aa)],'cacheId':[_0x2b90f6,..._0x1c2ac7[_0x455d43(0x2aa)]['sort'](SortUtil[_0x455d43(0x1f0)])][_0x455d43(0x25f)]('__')});await DataConverter['_COMPENDIUM_CACHES_LOCK'][_0x455d43(0x2e0)]();try{for(const _0x124c78 of _0x27fe25){for(const _0x2b01db of _0x542cfd){!this['_isCompendiumCached'](DataConverter[_0x455d43(0x2dd)],_0x2b90f6,_0x2b01db)&&await this[_0x455d43(0x251)](DataConverter[_0x455d43(0x2dd)],_0x2b90f6,_0x2b01db);const _0x2a2e39=this[_0x455d43(0x2af)](DataConverter[_0x455d43(0x2dd)],_0x2b90f6,_0x2b01db,_0x124c78);if(_0x2a2e39)return _0x2a2e39;}}}finally{DataConverter[_0x455d43(0x21f)]['unlock']();}}static[_0x1213e6(0x2d0)](_0x371102){const _0x10036c=_0x1213e6;return _0x371102=typeof _0x371102==='string'?_0x371102[_0x10036c(0x2c1)](',')[_0x10036c(0x287)](_0x511826=>_0x511826[_0x10036c(0x205)]()[_0x10036c(0x2b8)]()):_0x371102[_0x10036c(0x287)](_0x4913b9=>_0x4913b9[_0x10036c(0x2b8)]()),_0x371102[_0x10036c(0x287)](_0x5d10fd=>game[_0x10036c(0x2b0)]['find'](_0x22944e=>_0x22944e[_0x10036c(0x2ed)][_0x10036c(0x2b8)]()===_0x5d10fd))['filter'](Boolean);}static async['pGetActorItemCompendiumImage'](_0x177ff0,_0x1a75ab,_0x1f29b1){const _0x3d6515=_0x1213e6;return this[_0x3d6515(0x2cf)](DataConverter[_0x3d6515(0x256)],_0x177ff0,_0x1a75ab,_0x1f29b1);}static async[_0x1213e6(0x2cf)](_0x35255e,_0xd357df,_0x3f7521,_0x1179d8){const _0x392aa4=_0x1213e6;_0x1179d8=_0x1179d8||{};let _0x359679=[];if(_0x3f7521[_0x392aa4(0x2e6)])_0x359679[_0x392aa4(0x254)]((typeof _0x3f7521[_0x392aa4(0x2e6)]==='string'?_0x3f7521[_0x392aa4(0x2e6)]:_0x3f7521['name'])[_0x392aa4(0x2b8)]()['trim']());if(_0x3f7521[_0x392aa4(0x23e)])_0x359679[_0x392aa4(0x254)](_0x3f7521['_displayName']['toLowerCase']()[_0x392aa4(0x205)]());if(_0x1179d8[_0x392aa4(0x2eb)])_0x359679[_0x392aa4(0x254)](..._0x1179d8['fnGetAliases'](_0x3f7521)['map'](_0x23608f=>_0x23608f[_0x392aa4(0x2b8)]()[_0x392aa4(0x205)]()));let _0x4903e3;switch(_0x35255e){case DataConverter[_0x392aa4(0x256)]:{switch(_0xd357df){case _0x392aa4(0x2bd):_0x4903e3=this[_0x392aa4(0x2d0)](Config[_0x392aa4(0x26d)]('importCreature',_0x392aa4(0x2ce)));break;default:return null;}break;}case DataConverter['_COMPENDIUM_CACHE_KEY_DATA']:{switch(_0xd357df){case'monsterFeature':_0x4903e3=this[_0x392aa4(0x2d0)](Config[_0x392aa4(0x2c8)]);break;default:return null;}break;}default:throw new Error(_0x392aa4(0x26c)+_0x35255e+'\x22');}if(!_0x4903e3[_0x392aa4(0x1f8)])return null;await DataConverter[_0x392aa4(0x25c)][_0x392aa4(0x2e0)]();try{for(const _0x49fbd8 of _0x359679){for(const _0x15bc6b of _0x4903e3){!this[_0x392aa4(0x2ad)](DataConverter[_0x392aa4(0x2be)],_0x35255e,_0x15bc6b)&&await this[_0x392aa4(0x22b)](DataConverter['_COMPENDIUM_ACTOR_CACHES'],_0x35255e,_0x15bc6b);const _0x3a4762=this[_0x392aa4(0x2af)](DataConverter['_COMPENDIUM_ACTOR_CACHES'],_0x35255e,_0x15bc6b,_0x49fbd8);if(_0x3a4762)return _0x3a4762;}}}finally{DataConverter['_COMPENDIUM_ACTOR_CACHES_LOCK'][_0x392aa4(0x29d)]();}}static async['getSrdCompendiumEntity'](_0x5b05d4,_0x5aff0b,_0x566d42){const _0x9ea4c6=_0x1213e6;return this[_0x9ea4c6(0x274)](DataConverter[_0x9ea4c6(0x2e9)],_0x5b05d4,_0x5aff0b,_0x566d42);}static[_0x1213e6(0x2ad)](_0x2395e8,_0x40a954,_0x22bbf3){const _0x4866b5=_0x1213e6;return _0x40a954=_0x40a954[_0x4866b5(0x2dc)]||_0x40a954,!!MiscUtil[_0x4866b5(0x26d)](_0x2395e8,_0x40a954,_0x22bbf3['collection']);}static async[_0x1213e6(0x251)](_0x12966f,_0x580d34,_0x2759fe){const _0x545abc=_0x1213e6;let _0x16ed3a;if(_0x580d34[_0x545abc(0x219)])_0x16ed3a=!![];else switch(_0x580d34){case DataConverter[_0x545abc(0x256)]:_0x16ed3a=![];break;case DataConverter[_0x545abc(0x2e9)]:_0x16ed3a=!![];break;default:throw new Error(_0x545abc(0x26c)+_0x580d34+'\x22');}const _0x5e7588=await UtilCompendium[_0x545abc(0x264)](_0x2759fe,_0x16ed3a),_0x317023=MiscUtil[_0x545abc(0x24a)](_0x12966f,_0x580d34[_0x545abc(0x2dc)]||_0x580d34,_0x2759fe[_0x545abc(0x2ed)],{});if(!_0x5e7588)return;if(_0x580d34[_0x545abc(0x219)])_0x5e7588[_0x545abc(0x2c2)](_0x421dd6=>_0x317023[_0x421dd6[_0x545abc(0x2ea)][_0x545abc(0x2b8)]()]=MiscUtil[_0x545abc(0x1fb)](_0x421dd6[_0x545abc(0x2b1)]));else switch(_0x580d34){case DataConverter[_0x545abc(0x256)]:_0x5e7588[_0x545abc(0x2c2)](_0x5cdce3=>_0x317023[_0x5cdce3[_0x545abc(0x2ea)]['toLowerCase']()]=_0x5cdce3[_0x545abc(0x29c)]);break;case DataConverter[_0x545abc(0x2e9)]:_0x5e7588[_0x545abc(0x2c2)](_0x273189=>_0x317023[_0x273189[_0x545abc(0x2ea)]['toLowerCase']()]=MiscUtil[_0x545abc(0x1fb)](_0x273189[_0x545abc(0x2b1)]));break;default:throw new Error(_0x545abc(0x26c)+_0x580d34+'\x22');}}static async['_pCacheActorItemCompendium'](_0xc1577c,_0x204e60,_0x48d090){const _0x4efb08=_0x1213e6,_0x15dda2=await UtilCompendium['pGetCompendiumData'](_0x48d090,!![]),_0x53ddb9=MiscUtil[_0x4efb08(0x24a)](_0xc1577c,_0x204e60[_0x4efb08(0x2dc)]||_0x204e60,_0x48d090[_0x4efb08(0x2ed)],{});if(!_0x15dda2)return;_0x15dda2['forEach'](_0x1864fc=>{const _0x22e762=_0x4efb08;(_0x1864fc[_0x22e762(0x2b3)]||[])[_0x22e762(0x2c2)](_0x8532ba=>{const _0x416bc2=_0x22e762,_0x5d4b25=_0x8532ba['name'][_0x416bc2(0x2b8)]();switch(_0x204e60){case DataConverter['_COMPENDIUM_CACHE_KEY_IMAGE']:{if(!_0x8532ba[_0x416bc2(0x29c)]||_0x8532ba['img']['toLowerCase']()['includes']('mystery-man.svg'))return;_0x53ddb9[_0x5d4b25]=_0x53ddb9[_0x5d4b25]||_0x8532ba[_0x416bc2(0x29c)];break;}case DataConverter['_COMPENDIUM_CACHE_KEY_DATA']:_0x53ddb9[_0x5d4b25]=_0x53ddb9[_0x5d4b25]||MiscUtil[_0x416bc2(0x1fb)](_0x8532ba[_0x416bc2(0x2b1)]);break;default:throw new Error(_0x416bc2(0x26c)+_0x204e60+'\x22');}});});}static[_0x1213e6(0x2af)](_0x49dc31,_0x33a14f,_0x45844f,_0x31da6c){const _0x3aba40=_0x1213e6,_0x39aa37=MiscUtil['get'](_0x49dc31,_0x33a14f[_0x3aba40(0x2dc)]||_0x33a14f,_0x45844f[_0x3aba40(0x2ed)]);if(!_0x39aa37)return null;const _0x44d64a=_0x39aa37[_0x31da6c[_0x3aba40(0x2ea)]||_0x31da6c];if(!_0x44d64a||typeof _0x31da6c==='string')return _0x44d64a;const _0xba59ae=Object[_0x3aba40(0x257)](_0x31da6c)[_0x3aba40(0x1f3)](([_0x3457ba])=>_0x3457ba!==_0x3aba40(0x2ea))['every'](([_0x4b8424,_0x119960])=>{const _0x5e5e1b=_0x3aba40;if(typeof _0x119960===_0x5e5e1b(0x248))_0x119960=_0x119960['toLowerCase']()[_0x5e5e1b(0x205)]();let _0x10372f;const _0x3ab3e3=_0x4b8424[_0x5e5e1b(0x2c1)]('.');for(const _0x520813 of _0x3ab3e3){_0x10372f=(_0x10372f||_0x44d64a)[_0x520813];if(_0x10372f===undefined)return![];}if(typeof _0x10372f===_0x5e5e1b(0x248))_0x10372f=_0x10372f['trim']()[_0x5e5e1b(0x2b8)]();return _0x10372f===_0x119960;});if(!_0xba59ae)return null;switch(_0x33a14f['baseCacheId']){case DataConverter[_0x3aba40(0x256)]:return _0x44d64a[_0x3aba40(0x29c)];case DataConverter[_0x3aba40(0x2e9)]:return _0x44d64a;default:throw new Error(_0x3aba40(0x26c)+_0x33a14f[_0x3aba40(0x219)]+'\x22');}}static[_0x1213e6(0x1f4)](_0x4f7255,_0x282637){const _0x1ca55b=_0x1213e6;_0x282637=_0x282637||{},_0x282637[_0x1ca55b(0x2d1)]=_0x282637[_0x1ca55b(0x2d1)]||_0x1ca55b(0x257);let _0x2be991='';return _0x4f7255[_0x282637[_0x1ca55b(0x2d1)]]&&(_0x2be991=Renderer[_0x1ca55b(0x26d)]()[_0x1ca55b(0x245)](!![])[_0x1ca55b(0x204)]({'type':_0x1ca55b(0x257),'entries':_0x4f7255[_0x282637['prop']]},_0x282637['depth']!=null?_0x282637['depth']:0x2)),_0x2be991;}static async[_0x1213e6(0x25d)](_0x7d939c,_0x36a68e,_0x56ccf7,_0x58ac89){const _0x276848=_0x1213e6;_0x58ac89=_0x58ac89||{},this[_0x276848(0x276)](_0x7d939c,_0x36a68e,_0x58ac89),this[_0x276848(0x1e4)](_0x7d939c,_0x36a68e,_0x58ac89),await this[_0x276848(0x2c9)](_0x7d939c,_0x36a68e,_0x56ccf7,_0x58ac89);if(_0x58ac89[_0x276848(0x208)])return;await this[_0x276848(0x298)](_0x7d939c,_0x36a68e,_0x56ccf7,_0x58ac89);}static[_0x1213e6(0x276)](_0x3153ed,_0x1ee8aa,_0x374980){const _0x316d29=_0x1213e6;return this['_pMutActorUpdate_mutFromSideMod'](_0x3153ed,_0x1ee8aa,_0x374980,'actorDataMod',_0x316d29(0x2b1));}static[_0x1213e6(0x1e4)](_0x4fb3b0,_0x3b2161,_0xd255c6){const _0x6d37d5=_0x1213e6;return this[_0x6d37d5(0x2a9)](_0x4fb3b0,_0x3b2161,_0xd255c6,_0x6d37d5(0x211),_0x6d37d5(0x209));}static[_0x1213e6(0x2a9)](_0x2421ae,_0x4605c4,_0xcdc3f0,_0x371c01,_0x16c0e0){const _0xae41f=_0x1213e6;if(!_0xcdc3f0['sideData']||!_0xcdc3f0[_0xae41f(0x252)][_0x371c01])return;Object[_0xae41f(0x257)](_0xcdc3f0[_0xae41f(0x252)][_0x371c01])[_0xae41f(0x2c2)](([_0x27d489,_0x144758])=>this['_pMutActorUpdate_mutFromSideMod_handleProp'](_0x2421ae,_0x4605c4,_0xcdc3f0,_0x371c01,_0x16c0e0,_0x27d489,_0x144758));}static[_0x1213e6(0x28c)](_0xb8f355,_0x3adfec,_0x18611f,_0x314a0f,_0x42fc45,_0x2725d2,_0x14b80b){const _0x547d9d=_0x1213e6,_0x199a82=_0x2725d2[_0x547d9d(0x2c1)]('.');if(_0x2725d2==='_'){_0x14b80b[_0x547d9d(0x2c2)](_0x474d78=>{const _0x508a52=_0x547d9d;switch(_0x474d78[_0x508a52(0x2de)]){case _0x508a52(0x24c):{for(const _0x4167d0 of _0x474d78[_0x508a52(0x24c)]){window['PLUT_CONTEXT']={'actor':_0xb8f355};if(_0x4167d0['condition']&&!eval(_0x4167d0[_0x508a52(0x24d)]))continue;Object['entries'](_0x4167d0[_0x508a52(0x234)])[_0x508a52(0x2c2)](([_0x4c0a7d,_0x241a55])=>this[_0x508a52(0x28c)](_0xb8f355,_0x3adfec,_0x18611f,_0x314a0f,_0x42fc45,_0x4c0a7d,_0x241a55));break;}break;}default:throw new Error('Unhandled\x20mode\x20\x22'+_0x474d78['mode']+'\x22');}});return;}const _0xb2fc2e=MiscUtil['get'](_0xb8f355,_0x547d9d(0x2b1),_0x42fc45,..._0x199a82),_0x39e2dd=MiscUtil[_0x547d9d(0x26d)](_0x3adfec,_0x42fc45,..._0x199a82),_0x3e9203=_0x39e2dd||_0xb2fc2e;_0x14b80b[_0x547d9d(0x2c2)](_0x57a93b=>{const _0x21568d=_0x547d9d;switch(_0x57a93b[_0x21568d(0x2de)]){case'appendIfNotExistsArr':{const _0x1a936c=MiscUtil['copy'](_0x3e9203||[]),_0x17c0cc=[..._0x1a936c];_0x17c0cc[_0x21568d(0x254)](..._0x57a93b[_0x21568d(0x2b3)][_0x21568d(0x1f3)](_0x283bbc=>!_0x1a936c['some'](_0x355ed0=>CollectionUtil[_0x21568d(0x214)](_0x283bbc,_0x355ed0)))),MiscUtil[_0x21568d(0x29f)](_0x3adfec,_0x42fc45,..._0x199a82,_0x17c0cc);break;}case'scalarAdd':{MiscUtil[_0x21568d(0x29f)](_0x3adfec,_0x42fc45,..._0x199a82,_0x57a93b[_0x21568d(0x279)]+_0x3e9203||0x0);break;}case _0x21568d(0x2d2):{const _0x3a7490=(''+(_0x3e9203||0x0))[_0x21568d(0x2b8)](),_0x1b9263=_0x20545e=>{const _0x1a2e3a=_0x21568d,_0x23786d=_0x3a7490[_0x1a2e3a(0x22a)](_0x20545e[_0x1a2e3a(0x2b8)]());let _0x38b40a=_0x3e9203['slice'](0x0,_0x23786d);const _0x3c7183=_0x3e9203['slice'](_0x23786d),_0x4230f5=_0x38b40a[_0x1a2e3a(0x20a)]('\x20');_0x38b40a=_0x38b40a[_0x1a2e3a(0x205)]();if(!isNaN(_0x38b40a)){const _0x8181af=''+(_0x57a93b['scalar']+Number(_0x38b40a))+(_0x4230f5?'\x20':'')+_0x3c7183;MiscUtil['set'](_0x3adfec,_0x42fc45,..._0x199a82,_0x8181af);}};if(!_0x3e9203)MiscUtil['set'](_0x3adfec,_0x42fc45,..._0x199a82,_0x57a93b[_0x21568d(0x279)]+'\x20'+(_0x57a93b['unitShort']||_0x57a93b[_0x21568d(0x2b2)]));else{if(_0x57a93b[_0x21568d(0x2b2)]&&_0x3a7490[_0x21568d(0x250)](_0x57a93b[_0x21568d(0x2b2)][_0x21568d(0x2b8)]()))_0x1b9263(_0x57a93b[_0x21568d(0x2b2)]);else _0x57a93b[_0x21568d(0x2a7)]&&_0x3a7490[_0x21568d(0x250)](_0x57a93b[_0x21568d(0x2a7)][_0x21568d(0x2b8)]())&&_0x1b9263(_0x57a93b[_0x21568d(0x2a7)]);}break;}case'setMax':{const _0x5d4e49=(''+(_0x3e9203||0x0))['toLowerCase']();let _0x3eef34=Number(_0x5d4e49);if(isNaN(_0x3eef34))_0x3eef34=0x0;const _0x12bd25=Math[_0x21568d(0x23d)](_0x3eef34,_0x57a93b[_0x21568d(0x2e2)]);MiscUtil[_0x21568d(0x29f)](_0x3adfec,_0x42fc45,..._0x199a82,_0x12bd25);break;}case _0x21568d(0x29f):{MiscUtil[_0x21568d(0x29f)](_0x3adfec,_0x42fc45,..._0x199a82,MiscUtil[_0x21568d(0x1fb)](_0x57a93b[_0x21568d(0x2e2)]));break;}default:throw new Error('Unhandled\x20mode\x20\x22'+_0x57a93b[_0x21568d(0x2de)]+'\x22');}});}static[_0x1213e6(0x2c9)](_0x23a00d,_0x1d466f,_0x1f12a6,_0xa7a9b5){const _0x4a590d=_0x1213e6;if(!_0xa7a9b5[_0x4a590d(0x252)]||!_0xa7a9b5[_0x4a590d(0x252)][_0x4a590d(0x1ea)])return;return this[_0x4a590d(0x27b)](_0x23a00d,_0x1d466f,_0x1f12a6,_0xa7a9b5[_0x4a590d(0x252)][_0x4a590d(0x1ea)],_0xa7a9b5);}static async[_0x1213e6(0x27b)](_0x43d819,_0x41f052,_0x134adf,_0x1de0eb,_0x994355){const _0xc97ebf=_0x1213e6,_0xb98609=MiscUtil[_0xc97ebf(0x24a)](_0x41f052,_0xc97ebf(0x2b1),{});await DataConverter[_0xc97ebf(0x23c)](MiscUtil[_0xc97ebf(0x26d)](_0x43d819,_0xc97ebf(0x2b1),'data',_0xc97ebf(0x233)),_0x1de0eb,_0xb98609,_0x994355,{'titlePrefix':_0x134adf['name']+_0xc97ebf(0x1f6)+_0x134adf['level']+')'});}static async[_0x1213e6(0x2e8)](_0x1d5d9e,_0x7e48ac,_0x5d2fe4,_0x112c29,_0x23d7e8){const _0x4bf56c=_0x1213e6,_0x5e0337=MiscUtil['getOrSet'](_0x7e48ac,_0x4bf56c(0x2b1),{});await DataConverter[_0x4bf56c(0x1e7)](MiscUtil[_0x4bf56c(0x26d)](_0x1d5d9e,_0x4bf56c(0x2b1),'data',_0x4bf56c(0x230),_0x4bf56c(0x255)),_0x112c29,_0x5e0337,_0x23d7e8,{'titlePrefix':_0x5d2fe4[_0x4bf56c(0x2ea)]+'\x20(Level\x20'+_0x5d2fe4[_0x4bf56c(0x222)]+')'});}static async['_pMutActorUpdate_pMutFromEntries'](_0x3d0dc0,_0x5b1dd9,_0x3729df,_0x6099c2){const _0x40a1f3=_0x1213e6;if(!_0x3729df[_0x40a1f3(0x257)])return;const _0x13c8e8=new Set(),_0x2ee099=new Set(),_0x4d91af=new Set(),_0x3c31b5=new Set(),_0x4608cc=new Set(),_0x2ce089=new Set(),_0x4c396b=new Set(),_0x1af254=new Set(),_0x346c67=[],_0x3f1e93=[],_0x163ee0=new Set();DataConverter[_0x40a1f3(0x1e8)]['walk'](_0x3729df[_0x40a1f3(0x257)],{'string':_0x30df85=>{const _0x3ee160=_0x40a1f3;_0x30df85[_0x3ee160(0x207)](/(?:you|s?he or s?he) ([^.!?]*? )?gains? proficiency (?:with|in (?:either )?(?: the)?)(.*?)(?:[.!?]|$)/gi,(..._0x6286d5)=>{const _0x366cd3=_0x3ee160,[,_0x5c8306,_0x11dbff]=_0x6286d5;if(_0x5c8306&&_0x5c8306[_0x366cd3(0x2c1)](/\W/g)[_0x366cd3(0x25e)](_0x562229=>_0x562229[_0x366cd3(0x205)]()['toLowerCase']()===_0x366cd3(0x24e)))return;const _0x2d7d09=this[_0x366cd3(0x27e)](_0x366cd3(0x285),_0x11dbff);for(const _0x3d6e1c of _0x2d7d09){const _0x4a5830=DataUtil[_0x366cd3(0x2e3)]['unpackUid'](_0x3d6e1c,_0x366cd3(0x285)),_0x304033=UrlUtil[_0x366cd3(0x25a)][UrlUtil[_0x366cd3(0x2d8)]](_0x4a5830);_0x13c8e8['add'](_0x304033);}const _0x12c60b=_0x11dbff[_0x366cd3(0x2c1)](/,? and |,? or |, /gi);_0x12c60b[_0x366cd3(0x287)](_0x2205a5=>_0x2205a5[_0x366cd3(0x205)]()[_0x366cd3(0x207)](/^\W+/,'')[_0x366cd3(0x207)](/\W+$/,''))[_0x366cd3(0x1f3)](Boolean)['forEach'](_0x244d92=>{const _0x1c00a6=_0x366cd3;_0x244d92=_0x244d92[_0x1c00a6(0x2b8)]()[_0x1c00a6(0x205)]();switch(_0x244d92){case'martial\x20weapons':_0x3c31b5[_0x1c00a6(0x2b4)]('mar');break;case _0x1c00a6(0x20c):_0x3c31b5[_0x1c00a6(0x2b4)](_0x1c00a6(0x293));break;case _0x1c00a6(0x24b):case _0x1c00a6(0x242):_0x2ce089[_0x1c00a6(0x2b4)]('lgt');break;case _0x1c00a6(0x2cb):case _0x1c00a6(0x2e7):_0x2ce089[_0x1c00a6(0x2b4)](_0x1c00a6(0x2a1));break;case'heavy':case _0x1c00a6(0x283):_0x2ce089[_0x1c00a6(0x2b4)]('hvy');break;case'shields':_0x2ce089[_0x1c00a6(0x2b4)]('shl');break;}});let _0x4e1cc4=![];_0x11dbff[_0x366cd3(0x207)](/(?:(one|two|three|four|five|six) )skills? of your choice/gi,(..._0x46b8be)=>{const _0x3f07d8=_0x366cd3;_0x4e1cc4=!![];const _0x57013b=Parser['textToNumber'](_0x46b8be[0x1]);if(isNaN(_0x57013b))return;_0x346c67['push']([{'choose':{'from':Object[_0x3f07d8(0x261)](Parser['SKILL_TO_ATB_ABV']),'count':_0x57013b}}]);}),!/(^|\W)choice(\W|$)/i['test'](_0x11dbff)&&(_0x4e1cc4=!![],this[_0x366cd3(0x21e)](_0x11dbff,_0x1af254)),!_0x4e1cc4&&_0x11dbff[_0x366cd3(0x207)](/ or (.*?) skills?(\W|$)/i,(..._0x2a131e)=>{const _0x3899ce=_0x366cd3,_0x38fc0d=new Set();this[_0x3899ce(0x21e)](_0x2a131e[0x2],_0x38fc0d);if(_0x38fc0d[_0x3899ce(0x2c7)])_0x346c67[_0x3899ce(0x254)]([{'choose':{'from':[..._0x38fc0d],'count':count}}]);}),_0x11dbff[_0x366cd3(0x207)](/(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma) saving throws/i,(..._0x2fe016)=>{const _0x488598=_0x366cd3;_0x163ee0[_0x488598(0x2b4)](_0x2fe016[0x1][_0x488598(0x2b8)]()[_0x488598(0x2bb)](0x0,0x3));});}),_0x30df85[_0x3ee160(0x207)](/you (?:[^.!?]*? )proficien[^ ]+ in (one|two|three|four|five|six) [^.!?]* skills [^.!?:]*:(.*?)(?:[.!?]|$)/gi,(..._0x389a90)=>{const _0x1469e8=_0x3ee160,_0x3faaee=Parser[_0x1469e8(0x2d4)](_0x389a90[0x1]);if(isNaN(_0x3faaee))return;const _0x427a84=new Set();this[_0x1469e8(0x21e)](_0x389a90[0x2],_0x427a84);if(_0x427a84[_0x1469e8(0x2c7)])_0x346c67[_0x1469e8(0x254)]([{'choose':{'from':[..._0x427a84],'count':_0x3faaee}}]);}),_0x30df85[_0x3ee160(0x207)](/you (?:[^.!?]*? )proficien[^ ]+ (?:[^.!?]*? )choice of (two|three|four|five|six) (?:[^.!?]*? )skills:(.*?)(?:[.!?]|$)/gi,(..._0x247ffe)=>{const _0x122d50=_0x3ee160,_0xafdbab=Parser[_0x122d50(0x2d4)](_0x247ffe[0x1]);if(isNaN(_0xafdbab))return;const _0x53df49=new Set();this['_pMutActorUpdate_addValidSkills'](_0x247ffe[0x2],_0x53df49);if(_0x53df49[_0x122d50(0x2c7)])_0x346c67[_0x122d50(0x254)]([{'choose':{'from':[..._0x53df49],'count':_0xafdbab}}]);}),_0x30df85[_0x3ee160(0x207)](/gain proficiency (?:[^.!?]*?) (one|two|three|four|five|six) (?:[^.!?]*?) following skills(?:[^.!?]*?):(.*?)(?:[.!?]|$)/gi,(..._0x75e089)=>{const _0x41ee2b=_0x3ee160,_0x99b5c9=Parser[_0x41ee2b(0x2d4)](_0x75e089[0x1]);if(isNaN(_0x99b5c9))return;const _0xb54fa2=new Set();this[_0x41ee2b(0x21e)](_0x75e089[0x2],_0xb54fa2);if(_0xb54fa2[_0x41ee2b(0x2c7)])_0x346c67[_0x41ee2b(0x254)]([{'choose':{'from':[..._0xb54fa2],'count':_0x99b5c9}}]);}),_0x30df85['replace'](/you learn (an|one|two|three|four|five|six)(?: additional)? language of your choice/gi,(..._0x27d1ec)=>{const _0x5304bb=_0x3ee160,_0x858380=Parser['textToNumber'](_0x27d1ec[0x1]);if(isNaN(_0x858380))return;_0x3f1e93[_0x5304bb(0x254)]([{'any':_0x858380}]);});}});for(const _0x4a8246 of _0x13c8e8){const _0x2c3de6=await Renderer['hover'][_0x40a1f3(0x235)](UrlUtil[_0x40a1f3(0x2d8)],_0x4a8246);if(DataConverter[_0x40a1f3(0x241)][_0x40a1f3(0x2d3)](_0x2c3de6['type'])){const _0x2a17cd=UtilActors[_0x40a1f3(0x289)](_0x2c3de6[_0x40a1f3(0x2ea)]);if(_0x2a17cd)_0x2ee099[_0x40a1f3(0x2b4)](_0x2a17cd);else _0x4d91af[_0x40a1f3(0x2b4)](_0x2c3de6[_0x40a1f3(0x2ea)][_0x40a1f3(0x2b8)]());}DataConverter[_0x40a1f3(0x243)]['has'](_0x2c3de6[_0x40a1f3(0x203)])&&_0x4608cc[_0x40a1f3(0x2b4)](_0x2c3de6[_0x40a1f3(0x2ea)]['toLowerCase']()+'s');if(DataConverter[_0x40a1f3(0x244)][_0x40a1f3(0x2d3)](_0x2c3de6[_0x40a1f3(0x203)])){if(_0x2c3de6[_0x40a1f3(0x2ea)]===_0x40a1f3(0x299))_0x2ce089[_0x40a1f3(0x2b4)](_0x40a1f3(0x2c3));else _0x4c396b[_0x40a1f3(0x2b4)](_0x2c3de6['name'][_0x40a1f3(0x2b8)]());}}this['_pMutActorUpdate_mutFromProficiencySetFoundry'](_0x3d0dc0,_0x5b1dd9,_0x3c31b5,'data',_0x40a1f3(0x230),_0x40a1f3(0x1ef),'value'),this['_pMutActorUpdate_mutFromProficiencySetCustom'](_0x3d0dc0,_0x5b1dd9,_0x4608cc,_0x40a1f3(0x2b1),'traits',_0x40a1f3(0x1ef),_0x40a1f3(0x2c0)),this['_pMutActorUpdate_mutFromProficiencySetFoundry'](_0x3d0dc0,_0x5b1dd9,_0x2ce089,_0x40a1f3(0x2b1),_0x40a1f3(0x230),_0x40a1f3(0x1fd),_0x40a1f3(0x2e2)),this['_pMutActorUpdate_mutFromProficiencySetCustom'](_0x3d0dc0,_0x5b1dd9,_0x4c396b,_0x40a1f3(0x2b1),'traits',_0x40a1f3(0x1fd),_0x40a1f3(0x2c0)),this[_0x40a1f3(0x23a)](_0x3d0dc0,_0x5b1dd9,_0x2ee099,_0x40a1f3(0x2b1),_0x40a1f3(0x230),_0x40a1f3(0x2ba),'value'),this[_0x40a1f3(0x20d)](_0x3d0dc0,_0x5b1dd9,_0x4d91af,_0x40a1f3(0x2b1),_0x40a1f3(0x230),_0x40a1f3(0x2ba),_0x40a1f3(0x2c0));if(_0x1af254['size']){const _0x345c0b=[[..._0x1af254][_0x40a1f3(0x2bf)](_0x4e26ab=>({[_0x4e26ab]:!![]}))];await this['_pMutActorUpdate_pMutFromSkillProfs'](_0x3d0dc0,_0x5b1dd9,_0x3729df,_0x345c0b,_0x6099c2);}if(_0x346c67['length'])for(const _0x18c722 of _0x346c67){await this['_pMutActorUpdate_pMutFromSkillProfs'](_0x3d0dc0,_0x5b1dd9,_0x3729df,_0x18c722,_0x6099c2);}if(_0x3f1e93[_0x40a1f3(0x1f8)])for(const _0x81dcf7 of _0x3f1e93){await this[_0x40a1f3(0x2e8)](_0x3d0dc0,_0x5b1dd9,_0x3729df,_0x81dcf7,_0x6099c2);}_0x163ee0['size']&&_0x163ee0[_0x40a1f3(0x2c2)](_0x1b96ae=>MiscUtil['set'](_0x5b1dd9,'data',_0x40a1f3(0x270),_0x1b96ae,_0x40a1f3(0x288),0x1));}static[_0x1213e6(0x21e)](_0x4ce2b2,_0x4d4c8f){const _0x3dc8c2=_0x1213e6,_0x5d8750=this[_0x3dc8c2(0x27e)](_0x3dc8c2(0x292),_0x4ce2b2);for(const _0x43d4b3 of _0x5d8750){const _0x58b1e2=_0x43d4b3[_0x3dc8c2(0x2c1)]('|')[0x0][_0x3dc8c2(0x2b8)](),_0x5dffb5=!!Parser[_0x3dc8c2(0x237)][_0x58b1e2];if(!_0x5dffb5)continue;_0x4d4c8f['add'](_0x58b1e2);}}static[_0x1213e6(0x23a)](_0x4c53cc,_0x52d2c1,_0x1ca4d3,..._0x3b941f){const _0x489616=_0x1213e6;if(!_0x1ca4d3[_0x489616(0x2c7)])return;const _0x350d52=MiscUtil[_0x489616(0x1fb)](MiscUtil[_0x489616(0x26d)](_0x4c53cc,'data',..._0x3b941f)||[]),_0x3aca19=MiscUtil[_0x489616(0x24a)](_0x52d2c1,..._0x3b941f,_0x350d52),_0x120474=new Set([..._0x3aca19,..._0x1ca4d3]);MiscUtil[_0x489616(0x29f)](_0x52d2c1,..._0x3b941f,[..._0x120474]);}static[_0x1213e6(0x20d)](_0x210ed0,_0x2e1b47,_0x5b1503,..._0x4bfaa5){const _0x22aaa1=_0x1213e6;if(!_0x5b1503[_0x22aaa1(0x2c7)])return;const _0x328e41=MiscUtil[_0x22aaa1(0x1fb)](MiscUtil['get'](_0x210ed0,'data',..._0x4bfaa5)||''),_0xe7446=MiscUtil[_0x22aaa1(0x26d)](_0x2e1b47,..._0x4bfaa5)||_0x328e41,_0x87a836=_0xe7446[_0x22aaa1(0x2c1)](';')['map'](_0x62b4a4=>_0x62b4a4[_0x22aaa1(0x205)]())[_0x22aaa1(0x1f3)](Boolean);[..._0x5b1503]['filter'](_0x5b7dcc=>!_0x87a836['some'](_0x4c9200=>_0x4c9200[_0x22aaa1(0x2b8)]()[_0x22aaa1(0x205)]()===_0x5b7dcc[_0x22aaa1(0x2b8)]()[_0x22aaa1(0x205)]()))[_0x22aaa1(0x2c2)](_0x4bbdaa=>_0x87a836[_0x22aaa1(0x254)](_0x4bbdaa)),MiscUtil['set'](_0x2e1b47,..._0x4bfaa5,_0x87a836[_0x22aaa1(0x25f)](';'));}static[_0x1213e6(0x1f9)](_0x32cc26,_0x334b94){const _0x2c3b31=_0x1213e6;_0x334b94=_0x334b94||{},_0x334b94[_0x2c3b31(0x2e1)]=_0x334b94[_0x2c3b31(0x2e1)]||{};let {description:_0x2ad0c1,activationType:_0x29deb6,activationCost:_0x4945af,activationCondition:_0x14cb4f,saveAbility:_0x41315a,saveDc:_0x1965d8,saveScaling:_0x126fb0,damageParts:_0x4d946d,attackBonus:_0x3f1983,requirements:_0x317c14,actionType:_0x9881fe,durationValue:_0x38f641,durationUnits:_0x20dc14,consumeType:_0x27c751,consumeTarget:_0x1a25b2,consumeAmount:_0x8606bc,formula:_0x2b108a,targetValue:_0x5a3a53,targetUnits:_0x4f53e6,targetType:_0x342e4b,foundryData:_0xa17d0e,_foundryData:_0x3d10e7,foundryFlags:_0x4c9838,_foundryFlags:_0x209287}=_0x334b94;const _0x54ee63=DataConverter['getCombinedFoundryData'](_0xa17d0e,_0x3d10e7),_0x3d716b=DataConverter[_0x2c3b31(0x271)](_0x4c9838,_0x209287);_0x2ad0c1=_0x2ad0c1||(_0x334b94[_0x2c3b31(0x2a2)]?'':DataConverter[_0x2c3b31(0x1f4)](_0x32cc26,{'depth':_0x334b94['renderDepth']})),_0x29deb6=_0x29deb6||'',_0x4945af=_0x4945af||0x0,_0x14cb4f=_0x14cb4f||'',_0x41315a=_0x41315a||'',_0x1965d8=_0x1965d8||null,_0x126fb0=_0x126fb0||'',_0x4d946d=_0x4d946d||[],_0x3f1983=_0x3f1983||0x0,_0x317c14=_0x317c14||'',_0x9881fe=_0x9881fe||'',_0x38f641=_0x38f641||null,_0x20dc14=_0x20dc14||'',_0x27c751=_0x27c751||null,_0x1a25b2=_0x1a25b2||null,_0x8606bc=_0x8606bc||null,_0x2b108a=_0x2b108a||'',_0x5a3a53=_0x5a3a53||null,_0x4f53e6=_0x4f53e6||'',_0x342e4b=_0x342e4b||'';let _0x44c11e=UtilApplications[_0x2c3b31(0x1f7)](DataConverter[_0x2c3b31(0x224)](_0x32cc26));const _0x18d210=_0x32cc26[_0x2c3b31(0x257)]?JSON['stringify'](_0x32cc26[_0x2c3b31(0x257)]):null;let _0x4ec161=null;if(_0x32cc26[_0x2c3b31(0x2ea)]){const _0x1d2a19=/{@recharge( \d+)?}/gi[_0x2c3b31(0x23b)](_0x32cc26[_0x2c3b31(0x2ea)]);_0x1d2a19&&(_0x4ec161=_0x1d2a19[0x1]?Number(_0x1d2a19[0x1][_0x2c3b31(0x205)]()):0x6,_0x44c11e=_0x44c11e[_0x2c3b31(0x207)](/\(Recharge \d+(–\d+)?\)/gi,'')[_0x2c3b31(0x205)]()[_0x2c3b31(0x207)](/[ ]+/g,'\x20'));}if(_0x32cc26[_0x2c3b31(0x257)]){/(?:^|\W)bonus action(?:\W|$)/i[_0x2c3b31(0x212)](_0x18d210)&&(_0x29deb6=_0x29deb6||_0x2c3b31(0x2a3),_0x4945af=_0x4945af||0x1);if(_0x334b94['mode']==='player'){if(!_0x29deb6&&!_0x4945af){const _0x56a53a=DataConverter['WALKER_READONLY_GENERIC'];_0x56a53a[_0x2c3b31(0x2d6)](_0x32cc26[_0x2c3b31(0x257)],{'string':_0x59d8fa=>{const _0x36b69e=_0x2c3b31;if(_0x29deb6)return _0x59d8fa;const _0x2ea50e=_0x59d8fa[_0x36b69e(0x2c1)](/[.?!]/g)[_0x36b69e(0x287)](_0x5aa5f1=>_0x5aa5f1[_0x36b69e(0x205)]());for(const _0x3f804f of _0x2ea50e){if(/as an action|can take an action/i['test'](_0x3f804f)){_0x29deb6=_0x29deb6||'action',_0x4945af=_0x4945af||0x1;break;}const _0x2f1927=/you can use your reaction|using your reaction|you can use this special reaction/i[_0x36b69e(0x23b)](_0x3f804f);if(_0x2f1927){_0x29deb6=_0x29deb6||_0x36b69e(0x2e5),_0x4945af=_0x4945af||0x1;let _0x5567b1=_0x3f804f[_0x36b69e(0x2bb)](0x0,_0x2f1927['index'])[_0x36b69e(0x205)]()['replace'](/,$/,'');const _0xd716e3=/(^|\W)(?:if|when)(?:|\W)/i[_0x36b69e(0x23b)](_0x5567b1);_0xd716e3&&(_0x5567b1=_0x5567b1[_0x36b69e(0x2bb)](_0xd716e3[_0x36b69e(0x2ec)]+_0xd716e3[0x1][_0x36b69e(0x1f8)])['trim'](),_0x14cb4f=_0x14cb4f||_0x5567b1);break;}}}});}}}let _0x346f4f=0x0,_0x255845=null;_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x2b7)&&_0x32cc26[_0x2c3b31(0x2ea)]&&(_0x44c11e=_0x44c11e[_0x2c3b31(0x207)](/\(\s*(\d+)\s*\/\s*(Day|Short Rest|Long Rest)\s*\)/i,(..._0x185dfd)=>{const _0x1c7c0f=_0x2c3b31;_0x346f4f=Number(_0x185dfd[0x1]);const _0x2bf392=_0x185dfd[0x2][_0x1c7c0f(0x205)]()['toLowerCase']();switch(_0x2bf392){case _0x1c7c0f(0x2df):_0x255845=_0x1c7c0f(0x2df);break;case _0x1c7c0f(0x27f):_0x255845='sr';break;case _0x1c7c0f(0x2b9):_0x255845='lr';break;}return'';}),!_0x255845&&(_0x44c11e=_0x44c11e[_0x2c3b31(0x207)](/\(\s*(\d+)\s+Charges\s*\)/i,(..._0x35ab2a)=>{return _0x346f4f=Number(_0x35ab2a[0x1]),_0x255845='charges','';})),_0x255845&&(_0x44c11e=_0x44c11e[_0x2c3b31(0x205)]()['replace'](/[ ]+/g,'\x20'),_0x29deb6=_0x29deb6||_0x2c3b31(0x2a4),_0x32cc26[_0x2c3b31(0x257)]&&typeof _0x32cc26['entries'][0x0]===_0x2c3b31(0x248)&&/^(?:If |When )/i['test'](_0x32cc26[_0x2c3b31(0x257)][0x0][_0x2c3b31(0x205)]())&&(_0x14cb4f=_0x32cc26[_0x2c3b31(0x257)][0x0]['trim']())),/legendary resistance/gi[_0x2c3b31(0x212)](_0x44c11e)&&(_0x346f4f=0x0,_0x255845=null));if(_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x1e5)&&_0x32cc26['entries']){const _0x5b7159=/finish a short rest/['test'](_0x18d210)||/finish a short or long rest/[_0x2c3b31(0x212)](_0x18d210)||/finish a short rest or a long rest/[_0x2c3b31(0x212)](_0x18d210)||/finish a short or long rest/[_0x2c3b31(0x212)](_0x18d210),_0x55cbda=!_0x5b7159&&/finish a long rest/['test'](_0x18d210);if(_0x5b7159)_0x255845='sr';else{if(_0x55cbda)_0x255845='lr';}const _0x50930e=new RegExp('a\x20number\x20of\x20times\x20equal\x20to(?:\x20('+Consts['TERMS_COUNT']['map'](_0x2dc73b=>_0x2dc73b['tokens'][_0x2c3b31(0x25f)]('\x20'))['join']('|')+_0x2c3b31(0x267)+Consts[_0x2c3b31(0x216)][_0x2c3b31(0x287)](_0x1ad058=>_0x1ad058[_0x2c3b31(0x21c)][_0x2c3b31(0x25f)]('\x20'))['join']('|')+_0x2c3b31(0x1e9),'i'),_0x3857a4=_0x50930e['exec'](_0x18d210);if(_0x3857a4&&_0x334b94['actor']){const _0x427d41=_0x3857a4[0x2][_0x2c3b31(0x2bb)](0x0,0x3)['toLowerCase'](),_0x17a949=MiscUtil['get'](_0x334b94[_0x2c3b31(0x22f)],_0x2c3b31(0x2b1),'data',_0x2c3b31(0x270),_0x427d41,_0x2c3b31(0x2e2));if(_0x17a949!=null){let _0x34c35d=Parser[_0x2c3b31(0x27a)](_0x17a949);if(_0x3857a4[0x1]){const _0x3ccfe=(Consts[_0x2c3b31(0x216)][_0x2c3b31(0x206)](_0x4fdd75=>_0x4fdd75[_0x2c3b31(0x21c)][_0x2c3b31(0x25f)]('\x20')===_0x3857a4[0x1][_0x2c3b31(0x205)]()['toLowerCase']())||{})[_0x2c3b31(0x26b)]||0x1;_0x34c35d=_0x34c35d*_0x3ccfe;}if(_0x3857a4[0x3]){const _0x33ba53=(Consts['TERMS_COUNT'][_0x2c3b31(0x206)](_0x29d3be=>_0x29d3be['tokens'][_0x2c3b31(0x25f)]('\x20')===_0x3857a4[0x3][_0x2c3b31(0x205)]()['toLowerCase']())||{})[_0x2c3b31(0x26b)]||0x1;_0x34c35d=Math[_0x2c3b31(0x23d)](_0x33ba53,_0x34c35d);}_0x346f4f=_0x34c35d;}}}_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x1e5)&&_0x32cc26[_0x2c3b31(0x257)]&&DataConverter[_0x2c3b31(0x1e8)]['walk'](_0x32cc26[_0x2c3b31(0x257)],{'object':_0x5b828=>{const _0x1ac932=_0x2c3b31;if(_0x5b828[_0x1ac932(0x203)]!==_0x1ac932(0x218))return _0x5b828;if(_0x9881fe&&_0x126fb0)return _0x5b828;return _0x9881fe=_0x9881fe||_0x1ac932(0x269),_0x126fb0=_0x5b828[_0x1ac932(0x27d)][0x0],_0x5b828;},'string':_0x51b621=>{const _0x1c08e1=_0x2c3b31;if(_0x9881fe&&_0x41315a&&_0x126fb0)return _0x51b621;return _0x51b621['replace'](/8\s*\+\s*your proficiency bonus\s*\+\s*your (.*?) modifier/i,(..._0x44355e)=>{const _0xc04b05=_0x4897,_0x57e061=[];_0x44355e[0x1][_0xc04b05(0x207)](/(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)/i,(..._0x31ab7f)=>{const _0x31df52=_0xc04b05;_0x57e061[_0x31df52(0x254)](_0x31ab7f[0x1][_0x31df52(0x2b8)]()[_0x31df52(0x2bb)](0x0,0x3));});if(!_0x57e061[_0xc04b05(0x1f8)])return;_0x9881fe=_0x9881fe||'save',_0x126fb0=_0x57e061[0x0];}),_0x51b621[_0x1c08e1(0x207)](/(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma) saving throw against your (.*? )spell save DC/i,(..._0x411158)=>{const _0x4f806e=_0x1c08e1;_0x9881fe=_0x9881fe||_0x4f806e(0x269),_0x41315a=_0x41315a||_0x411158[0x1]['toLowerCase']()[_0x4f806e(0x2bb)](0x0,0x3),_0x126fb0=_0x126fb0||_0x4f806e(0x20b);}),_0x334b94[_0x1c08e1(0x2e1)][_0x1c08e1(0x1e6)]&&_0x51b621[_0x1c08e1(0x207)](/(?:make a|succeed on a) (Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma) saving throw/gi,(..._0x43ad5f)=>{const _0x418792=_0x1c08e1;_0x9881fe=_0x9881fe||_0x418792(0x269),_0x41315a=_0x41315a||_0x43ad5f[0x1]['toLowerCase']()[_0x418792(0x2bb)](0x0,0x3),_0x126fb0=_0x126fb0||_0x418792(0x20b);}),_0x51b621;}});_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x2b7)&&_0x32cc26[_0x2c3b31(0x257)]&&_0x18d210[_0x2c3b31(0x207)](/{@dc ([-+]?\s*\d+)}\s+(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)/,(..._0x153a1b)=>{const _0x1d8bb8=_0x2c3b31,_0x2427b0=Number(_0x153a1b[0x1][_0x1d8bb8(0x207)](/\s*/g,''));if(isNaN(_0x2427b0))return;_0x9881fe=_0x9881fe||_0x1d8bb8(0x269),_0x41315a=_0x41315a||_0x153a1b[0x2]['toLowerCase']()[_0x1d8bb8(0x2bb)](0x0,0x3),_0x1965d8=_0x2427b0;if(_0x334b94['pb']==null||_0x334b94[_0x1d8bb8(0x23f)]==null||Parser['ABIL_ABVS'][_0x1d8bb8(0x25e)](_0x1ec2fc=>_0x334b94[_0x1d8bb8(0x23f)][_0x1ec2fc]==null)){_0x126fb0=_0x1d8bb8(0x275);return;}const _0x21a6d2=_0x2427b0-_0x334b94['pb']-0x8,_0x33e91e=Parser['ABIL_ABVS']['map'](_0x3e698e=>({'ability':_0x3e698e,'bonus':Parser['getAbilityModNumber'](_0x334b94[_0x1d8bb8(0x23f)][_0x3e698e])})),_0x4aa962=_0x33e91e[_0x1d8bb8(0x1f3)](_0x48ce00=>_0x48ce00['bonus']===_0x21a6d2);if(_0x4aa962[_0x1d8bb8(0x1f8)]===0x1)_0x126fb0=_0x126fb0||_0x4aa962[0x0][_0x1d8bb8(0x258)];else _0x126fb0=_0x1d8bb8(0x275);});_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x1e5)&&_0x32cc26['entries']&&DataConverter[_0x2c3b31(0x1e8)]['walk'](_0x32cc26['entries'],{'string':_0x3f4026=>{const _0x26a1c9=_0x2c3b31;if(_0x38f641||_0x20dc14)return;_0x3f4026[_0x26a1c9(0x207)](/(?:^|\W)lasts for (\d+) (minute|hour|day|month|year|turn|round)s?(?:\W|$)/gi,(..._0xbc5a63)=>{const _0xa6aab1=_0x26a1c9;_0x38f641=Number(_0xbc5a63[0x1]),_0x20dc14=_0xbc5a63[0x2][_0xa6aab1(0x2b8)]();}),_0x3f4026[_0x26a1c9(0x207)](/(?:^|\W)for the next (\d+) (minute|hour|day|month|year|turn|round)s?(?:\W|$)/gi,(..._0x3331ad)=>{const _0x42c0b3=_0x26a1c9;_0x38f641=Number(_0x3331ad[0x1]),_0x20dc14=_0x3331ad[0x2][_0x42c0b3(0x2b8)]();}),_0x3f4026[_0x26a1c9(0x207)](/(?:^|\W)turned for (\d+) (minute|hour|day|month|year|turn|round)s?(?:\W|$)/gi,(..._0x3b3b8c)=>{const _0x5d40b6=_0x26a1c9;_0x38f641=Number(_0x3b3b8c[0x1]),_0x20dc14=_0x3b3b8c[0x2][_0x5d40b6(0x2b8)]();}),_0x3f4026[_0x26a1c9(0x207)](/(?:^|\W)this effect lasts for (\d+) (minute|hour|day|month|year|turn|round)s?(?:\W|$)/gi,(..._0x4a485e)=>{_0x38f641=Number(_0x4a485e[0x1]),_0x20dc14=_0x4a485e[0x2]['toLowerCase']();}),_0x3f4026[_0x26a1c9(0x207)](/(?:^|\W)until the end of your next turn(?:\W|$)/gi,()=>{_0x38f641=0x1,_0x20dc14='turn';}),Renderer[_0x26a1c9(0x2da)](_0x3f4026)[_0x26a1c9(0x207)](/(?:^|\W)is \w+ by you for (\d+) (minute|hour|day|month|year|turn|round)s(?:\W|$)/gi,(..._0x488b4d)=>{const _0x20da97=_0x26a1c9;_0x38f641=Number(_0x488b4d[0x1]),_0x20dc14=_0x488b4d[0x2][_0x20da97(0x2b8)]();});}});_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x1e5)&&_0x32cc26[_0x2c3b31(0x257)]&&DataConverter[_0x2c3b31(0x1e8)][_0x2c3b31(0x2d6)](_0x32cc26[_0x2c3b31(0x257)],{'string':_0x2d5e45=>{const _0x4c108e=_0x2c3b31;if(_0x27c751||_0x1a25b2||_0x8606bc)return;_0x2d5e45[_0x4c108e(0x207)](/(?:(\d+) to )?(\d+) (?:ki|sorcery) point/i,(..._0x2aaa42)=>{_0x27c751='attribute',_0x1a25b2='resources.primary.value',_0x8606bc=Number(_0x2aaa42[0x1]||_0x2aaa42[0x2]);});}});let _0x25daa6=_0x18d210;if((_0x334b94['mode']===_0x2c3b31(0x1e5)||_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x246))&&_0x32cc26[_0x2c3b31(0x257)]&&!_0x4d946d[_0x2c3b31(0x1f8)]){const {str:_0x59c7a4,damageTuples:_0xaea5ab}=DataConverter['getDamageTuples'](_0x18d210);_0x25daa6=_0x59c7a4,_0x4d946d=_0xaea5ab;}return(_0x334b94['mode']==='player'||_0x334b94[_0x2c3b31(0x2de)]===_0x2c3b31(0x246))&&_0x32cc26[_0x2c3b31(0x257)]&&!_0x2b108a&&_0x25daa6[_0x2c3b31(0x207)](/{(?:@dice|@scaledice) ([^}]+)}/i,(..._0x42efba)=>{const _0x56d00b=_0x2c3b31,[_0x27990c]=_0x42efba[0x1][_0x56d00b(0x2c1)]('|');_0x2b108a=_0x27990c;}),_0x18d210&&_0x18d210['replace'](/exhales [^.]*a (\d+)-foot[- ](cone|line)/,(..._0x98eeaa)=>{_0x5a3a53=_0x5a3a53||Number(_0x98eeaa[0x1]),_0x4f53e6=_0x4f53e6||'ft',_0x342e4b=_0x342e4b||_0x98eeaa[0x2];}),{'name':_0x44c11e,'type':_0x334b94['fvttType'],'data':{'source':_0x334b94[_0x2c3b31(0x297)]?Parser[_0x2c3b31(0x2cc)](_0x334b94[_0x2c3b31(0x297)]):'','description':{'value':_0x2ad0c1,'chat':'','unidentified':''},'damage':{'parts':_0x4d946d,'versatile':''},'duration':{'value':_0x38f641,'units':_0x20dc14},'range':{'value':null,'long':null,'units':''},'requirements':_0x317c14,'save':{'ability':_0x41315a,'dc':_0x1965d8,'scaling':_0x126fb0||_0x2c3b31(0x275)},'activation':{'type':_0x29deb6,'cost':_0x4945af,'condition':_0x14cb4f},'target':{'value':_0x5a3a53,'units':_0x4f53e6,'type':_0x342e4b},'uses':{'value':_0x346f4f,'max':_0x346f4f,'per':_0x255845},'ability':'','actionType':_0x9881fe||_0x2c3b31(0x227),'attackBonus':_0x3f1983,'chatFlavor':'','critical':null,'formula':_0x2b108a,'recharge':{'value':_0x4ec161,'charged':_0x4ec161!=null},'consume':{'type':_0x27c751,'target':_0x1a25b2,'amount':_0x8606bc},..._0x54ee63||{},..._0x334b94['additionalData']||{}},'img':_0x334b94[_0x2c3b31(0x29c)],'flags':{..._0x3d716b||{}},'effects':[]};}static[_0x1213e6(0x263)](_0x1b3fc2,_0x1d9176,_0x36930f,_0x189535){const _0x761b32=_0x1213e6,_0x28ec69=_0x36930f===_0x761b32(0x1f1)?_0x761b32(0x20e):'importBook',_0x3e47e6=[],_0xd0c0ed=_0x1d9176[_0x761b32(0x2c6)],_0x4ee036=Math[_0x761b32(0x2bc)](_0xd0c0ed['length'],_0x1b3fc2[_0x761b32(0x1f8)]);for(let _0x2b4f98=0x0;_0x2b4f98<_0x4ee036;++_0x2b4f98){const _0x3dcebe=_0xd0c0ed[_0x2b4f98],_0x4a7e74=_0x1b3fc2[_0x2b4f98],_0x1ff685={'name':UtilApplications['getCleanEntityName'](''+Parser['bookOrdinalToAbv'](_0x3dcebe[_0x761b32(0x253)])+_0x3dcebe[_0x761b32(0x2ea)]),'permission':{'default':0x0},'entryTime':Date['now'](),'content':(_0x761b32(0x2d5)+Renderer[_0x761b32(0x26d)]()['setFirstSection'](!![])[_0x761b32(0x204)](_0x4a7e74)+'</div>')[_0x761b32(0x207)](new RegExp(DataConverter[_0x761b32(0x249)],'g'),'@')};if(_0x189535[_0x761b32(0x220)])_0x1ff685['permission']={'default':Config['get'](_0x28ec69,_0x761b32(0x29b))};_0x3e47e6[_0x761b32(0x254)](_0x1ff685);}return _0x3e47e6;}static[_0x1213e6(0x2d9)](_0x5d0234,_0x319c87,_0x4d672d){const _0xa7ac1f=_0x1213e6;return this[_0xa7ac1f(0x263)](_0x5d0234,_0x319c87,_0xa7ac1f(0x1f1),_0x4d672d);}static[_0x1213e6(0x26e)](_0x192e06,_0x110a18,_0x564731){const _0x3d5c32=_0x1213e6;return this[_0x3d5c32(0x263)](_0x192e06,_0x110a18,_0x3d5c32(0x1ee),_0x564731);}static async[_0x1213e6(0x23c)](_0x5c643c,_0x27aaed,_0x1391f5,_0x5b6efe,_0x18d8a9){const _0x3c563a=_0x1213e6;_0x18d8a9=_0x18d8a9||{};if(!_0x27aaed)return{};const _0x161a49=await Charactermancer_SkillSelect['pGetUserInput']({..._0x18d8a9,'existingProficienciesFvtt':_0x5c643c,'availableProficiencies':_0x27aaed});if(!_0x161a49)return _0x5b6efe[_0x3c563a(0x208)]=!![];if(_0x161a49===VeCt['SYM_UI_SKIP'])return;const _0x540fd8={};return _0x1391f5[_0x3c563a(0x233)]=_0x1391f5[_0x3c563a(0x233)]||{},Object['entries'](UtilActors[_0x3c563a(0x29e)])[_0x3c563a(0x1f3)](([_0x3076a3,_0x495eda])=>_0x161a49[_0x3c563a(0x2b1)][_0x495eda])[_0x3c563a(0x2c2)](([_0x1c2c9e,_0x2db7b2])=>{const _0x20fbe3=_0x3c563a;_0x540fd8[_0x1c2c9e]=_0x161a49[_0x20fbe3(0x2b1)][_0x2db7b2];const _0x18df78=Math[_0x20fbe3(0x23d)]((_0x5c643c[_0x1c2c9e]||{})[_0x20fbe3(0x2e2)]||0x0,_0x161a49[_0x20fbe3(0x2b1)][_0x2db7b2]?0x1:0x0,(_0x1391f5[_0x20fbe3(0x233)][_0x1c2c9e]||{})[_0x20fbe3(0x2e2)]||0x0),_0x27a361=_0x18df78>(MiscUtil['get'](_0x1391f5[_0x20fbe3(0x233)],_0x1c2c9e,_0x20fbe3(0x2e2))||0x0);if(_0x27a361)(_0x1391f5[_0x20fbe3(0x233)][_0x1c2c9e]=_0x1391f5['skills'][_0x1c2c9e]||{})['value']=_0x18df78;}),_0x540fd8;}static async[_0x1213e6(0x1e7)](_0x4a0d69,_0x86c7e2,_0x308f33,_0x842046,_0x484d6d){const _0x1dd033=_0x1213e6;_0x484d6d=_0x484d6d||{};const _0x334c9a=await Charactermancer_LanguageSelect['pGetUserInput']({..._0x484d6d,'existingProficienciesFvtt':_0x4a0d69,'availableProficiencies':_0x86c7e2});if(!_0x334c9a)return _0x842046[_0x1dd033(0x208)]=!![];if(_0x334c9a===VeCt[_0x1dd033(0x213)])return;this[_0x1dd033(0x200)](_0x4a0d69,_0x334c9a,_0x308f33,{'fnGetMappedItem':_0x43bed0=>UtilActors[_0x1dd033(0x1f2)](_0x43bed0),'actorTraitProp':_0x1dd033(0x255)});}static async['pFillActorToolData'](_0xdeac88,_0x2b6fb1,_0x56b1fb,_0x4943da,_0x4223dc){const _0x16e90e=_0x1213e6;_0x4223dc=_0x4223dc||{};const _0x1a7647=await Charactermancer_ToolSelect[_0x16e90e(0x232)]({..._0x4223dc,'existingProficienciesFvtt':_0xdeac88,'availableProficiencies':_0x2b6fb1});if(!_0x1a7647)return _0x4943da[_0x16e90e(0x208)]=!![];if(_0x1a7647===VeCt[_0x16e90e(0x213)])return;this[_0x16e90e(0x200)](_0xdeac88,_0x1a7647,_0x56b1fb,{'fnGetMappedItem':_0x259bf1=>UtilActors['getMappedTool'](_0x259bf1),'actorTraitProp':_0x16e90e(0x2ba)});}static['_doApplyFormData'](_0x491fc2,_0x319f87,_0x55e625,_0x4fc309){const _0x5cfb02=_0x1213e6;if(!_0x319f87)return![];_0x491fc2=_0x491fc2||{};if(!_0x319f87[_0x5cfb02(0x2b1)]||!Object[_0x5cfb02(0x261)](_0x319f87[_0x5cfb02(0x2b1)])[_0x5cfb02(0x1f8)])return![];const _0x2d5f4b=MiscUtil['copy'](_0x319f87['data']),_0xdfd08f=new Set();Object[_0x5cfb02(0x261)](_0x2d5f4b)[_0x5cfb02(0x1f3)](_0x363b24=>_0x2d5f4b[_0x363b24])['forEach'](_0x7d2579=>_0xdfd08f[_0x5cfb02(0x2b4)](_0x7d2579));const _0x1310e6=new Set(),_0x25caf7=[];(_0x491fc2[_0x5cfb02(0x2e2)]||[])[_0x5cfb02(0x2c2)](_0x4958da=>_0x1310e6['add'](_0x4958da)),(_0x491fc2['custom']||'')[_0x5cfb02(0x2c1)](';')['map'](_0x3baf35=>_0x3baf35[_0x5cfb02(0x205)]())[_0x5cfb02(0x1f3)](Boolean)[_0x5cfb02(0x2c2)](_0x48eb29=>this[_0x5cfb02(0x272)](_0x25caf7,_0x48eb29)),_0xdfd08f[_0x5cfb02(0x2c2)](_0x50ebc2=>{const _0x4e3407=_0x5cfb02,_0x2d654a=_0x4fc309['fnGetMappedItem'](_0x50ebc2);if(_0x2d654a)_0x1310e6['add'](_0x2d654a);else this[_0x4e3407(0x272)](_0x25caf7,_0x50ebc2[_0x4e3407(0x26f)]());});const _0x37ebe3=(_0x55e625['traits']=_0x55e625[_0x5cfb02(0x230)]||{})[_0x4fc309[_0x5cfb02(0x201)]]=_0x55e625[_0x5cfb02(0x230)][_0x4fc309[_0x5cfb02(0x201)]]||{};_0x37ebe3['value']=[..._0x1310e6][_0x5cfb02(0x287)](_0x3a0cfa=>_0x3a0cfa[_0x5cfb02(0x2b8)]())[_0x5cfb02(0x284)](SortUtil[_0x5cfb02(0x1f0)]),_0x37ebe3[_0x5cfb02(0x2c0)]=_0x25caf7[_0x5cfb02(0x25f)](';');}static['_doApplyFormData_doCheckAddCustomItem'](_0x6a6257,_0x565dd3){const _0x1a37a4=_0x1213e6,_0x38a8d5=_0x565dd3[_0x1a37a4(0x205)]()[_0x1a37a4(0x2b8)]();if(!_0x6a6257['some'](_0x599f50=>_0x599f50[_0x1a37a4(0x205)]()[_0x1a37a4(0x2b8)]()===_0x38a8d5))_0x6a6257[_0x1a37a4(0x254)](_0x565dd3);}static async['pFillActorImmunityData'](_0x508cab,_0x4238f8,_0x5be900,_0x8a52be){const _0x4aea19=_0x1213e6,_0x1d9262=await Charactermancer_Race_DamageImmunitySelect[_0x4aea19(0x232)]({'existingFvtt':_0x508cab,'available':_0x4238f8});if(!_0x1d9262)return _0x8a52be[_0x4aea19(0x208)]=!![];if(_0x1d9262===VeCt[_0x4aea19(0x213)])return;const _0x499b55=MiscUtil[_0x4aea19(0x24a)](_0x5be900,'traits','di',{});_0x499b55['value']=[...Object[_0x4aea19(0x261)](_0x1d9262['data']||{})];}static async['pFillActorResistanceData'](_0x297723,_0x23323b,_0x36cfea,_0x116f47){const _0x2b6a2e=_0x1213e6,_0x2195c8=await Charactermancer_Race_DamageResistanceSelect[_0x2b6a2e(0x232)]({'existingFvtt':_0x297723,'available':_0x23323b});if(!_0x2195c8)return _0x116f47[_0x2b6a2e(0x208)]=!![];if(_0x2195c8===VeCt[_0x2b6a2e(0x213)])return;const _0x47d7ce=MiscUtil[_0x2b6a2e(0x24a)](_0x36cfea,_0x2b6a2e(0x230),'dr',{});_0x47d7ce[_0x2b6a2e(0x2e2)]=[...Object[_0x2b6a2e(0x261)](_0x2195c8[_0x2b6a2e(0x2b1)]||{})];}static async[_0x1213e6(0x2e4)](_0x5064f1,_0x3d9e2b,_0x1a782d,_0x2948a0){const _0x4cb440=_0x1213e6,_0x3efa0e=await Charactermancer_Race_DamageVulnerabilitySelect[_0x4cb440(0x232)]({'existingFvtt':_0x5064f1,'available':_0x3d9e2b});if(!_0x3efa0e)return _0x2948a0[_0x4cb440(0x208)]=!![];if(_0x3efa0e===VeCt['SYM_UI_SKIP'])return;const _0x5e6cb3=MiscUtil['getOrSet'](_0x1a782d,_0x4cb440(0x230),'dv',{});_0x5e6cb3[_0x4cb440(0x2e2)]=[...Object[_0x4cb440(0x261)](_0x3efa0e[_0x4cb440(0x2b1)]||{})];}static async[_0x1213e6(0x2ca)](_0x5b85de,_0x10d2e7,_0x22f5c9,_0x57b94f){const _0x225fa6=_0x1213e6,_0x5e308a=await Charactermancer_Race_ConditionImmunitySelect['pGetUserInput']({'existingFvtt':_0x5b85de,'available':_0x10d2e7});if(!_0x5e308a)return _0x57b94f[_0x225fa6(0x208)]=!![];if(_0x5e308a===VeCt['SYM_UI_SKIP'])return;const _0x4617ee=MiscUtil[_0x225fa6(0x24a)](_0x22f5c9,'traits','ci',{});_0x4617ee[_0x225fa6(0x2e2)]=[...Object[_0x225fa6(0x261)](_0x5e308a[_0x225fa6(0x2b1)]||{})[_0x225fa6(0x287)](_0x31bf6c=>_0x31bf6c==='disease'?_0x225fa6(0x223):_0x31bf6c)];}static[_0x1213e6(0x2a5)](_0x2190a5){const _0x45b479=_0x1213e6,_0x129ecf=[],_0x119880=_0x2190a5[_0x45b479(0x207)](/(?:(\d+)|\(?{@(?:dice|damage) ([^}]+)}(?:\s+[-+]\s+the spell's level)?(?: plus {@(?:dice|damage) ([^}]+)})?\)?)(?:\s+[-+]\s+[-+a-zA-Z0-9 ]*?)? ([^ ]+) damage/gi,(..._0x4aa660)=>{const _0x4a6783=_0x45b479,_0x1befde=_0x4aa660[0x1]!=null,_0x4e3c65=_0x1befde?_0x4aa660[0x1]:_0x4aa660[0x3]?_0x4aa660[0x2]+'\x20+\x20'+_0x4aa660[0x3]:_0x4aa660[0x2];if(_0x1befde){const _0x5f3fc2=_0x4aa660[0x5],_0x5a4ac3=_0x2190a5['split'](/( )/g);let _0x5e206c=0x0;const _0x3c9303=[];for(let _0x1a59e6=0x0;_0x1a59e6<_0x5a4ac3['length'];++_0x1a59e6){_0x3c9303[_0x4a6783(0x254)](_0x5a4ac3[_0x1a59e6]),_0x5e206c+=_0x5a4ac3[_0x1a59e6][_0x4a6783(0x1f8)];if(_0x5e206c===_0x5f3fc2){const _0x503234=_0x3c9303[_0x4a6783(0x2bb)](-0x4);if(/^by dealing$/i[_0x4a6783(0x212)](_0x503234[_0x4a6783(0x25f)]('')['trim']()))return'';}}}const _0x1246bf=_0x4aa660[0x4];return _0x129ecf[_0x4a6783(0x254)]([_0x4e3c65,_0x1246bf]),'';});return{'str':_0x119880,'damageTuples':_0x129ecf['filter'](_0x33571a=>_0x33571a[_0x45b479(0x1f8)])};}static[_0x1213e6(0x2ab)](_0x50abd8,_0x1ebd49){const _0x108a60=_0x1213e6;if(typeof _0x50abd8==='number')return _0x1ebd49===_0x108a60(0x2d6)?_0x50abd8:null;_0x50abd8=_0x50abd8[_0x1ebd49];if(_0x50abd8==null)return null;if(_0x50abd8['number']!=null)return _0x50abd8[_0x108a60(0x2ac)];return Number(_0x50abd8);}static[_0x1213e6(0x221)](_0x4ab1ca){const _0x5a904d=_0x1213e6;if(typeof _0x4ab1ca===_0x5a904d(0x2ac))return![];return!!_0x4ab1ca[_0x5a904d(0x247)];}static[_0x1213e6(0x2a0)](_0x20ad45){const _0x5d7766=_0x1213e6;let _0x28cbad=0x0,_0x340f0e=0x0;const _0x4dc35d=/range (\d+)\/(\d+) ft/gi[_0x5d7766(0x23b)](_0x20ad45);if(_0x4dc35d)_0x28cbad=Number(_0x4dc35d[0x1]),_0x340f0e=Number(_0x4dc35d[0x2]);else{const _0x5f4e88=/reach (\d+) ft/gi[_0x5d7766(0x23b)](_0x20ad45);_0x5f4e88&&(_0x28cbad=Number(_0x5f4e88[0x1]));}return{'rangeShort':_0x28cbad,'rangeLong':_0x340f0e};}static['getAttackActionType'](_0x5aa295){const _0x2409f5=_0x1213e6;let _0x9d0273='',_0x2bb809=![];const _0x3ac795=/{@atk ([^}]+)}/gi[_0x2409f5(0x23b)](_0x5aa295);if(_0x3ac795){_0x2bb809=!![];if(_0x3ac795[0x1][_0x2409f5(0x250)]('s')){if(_0x3ac795[0x1][_0x2409f5(0x250)]('m'))_0x9d0273='msak';else _0x9d0273=_0x2409f5(0x26a);}else{if(_0x3ac795[0x1][_0x2409f5(0x250)]('m'))_0x9d0273=_0x2409f5(0x28f);else{if(_0x3ac795[0x1]['includes']('r'))_0x9d0273=_0x2409f5(0x1e3);}}}return{'actionType':_0x9d0273,'isAttack':_0x2bb809};}static[_0x1213e6(0x282)](_0x11731b){const _0x173a7f=_0x1213e6;return _0x11731b=MiscUtil['copy'](_0x11731b),Object['keys'](_0x11731b)[_0x173a7f(0x1f3)](_0x39a5b3=>/^_f[A-Z]/[_0x173a7f(0x212)](_0x39a5b3))[_0x173a7f(0x2c2)](_0x1e10e8=>delete _0x11731b[_0x1e10e8]),this[_0x173a7f(0x2c4)](_0x11731b),_0x11731b;}static['_getCleanOriginalData_recurse'](_0x390998){const _0x47799f=_0x1213e6;if(_0x390998==null)return;if(typeof _0x390998!==_0x47799f(0x1ed))return;_0x390998 instanceof Array?_0x390998['forEach'](_0x2585ff=>this['_getCleanOriginalData_recurse'](_0x2585ff)):Object['entries'](_0x390998)['forEach'](([_0x1e7be2,_0x2be9d9])=>{const _0x2b49db=_0x47799f;if(_0x1e7be2['includes']('$'))delete _0x390998[_0x1e7be2],console[_0x2b49db(0x273)](...LGT,'Removed\x20key\x20\x22'+_0x1e7be2+_0x2b49db(0x236));else this[_0x2b49db(0x2c4)](_0x2be9d9);});}}DataConverter[_0x1213e6(0x1e8)]=MiscUtil[_0x1213e6(0x240)]({'isNoModification':!![],'keyBlacklist':MiscUtil['GENERIC_WALKER_ENTRIES_KEY_BLACKLIST']}),DataConverter[_0x1213e6(0x249)]=_0x1213e6(0x295),DataConverter[_0x1213e6(0x256)]=_0x1213e6(0x29c),DataConverter[_0x1213e6(0x2e9)]=_0x1213e6(0x2b1),DataConverter[_0x1213e6(0x25b)]={},DataConverter[_0x1213e6(0x2dd)]={},DataConverter['_COMPENDIUM_CACHES_LOCK']=new VeLock(),DataConverter[_0x1213e6(0x24f)]={},DataConverter[_0x1213e6(0x2be)]={},DataConverter[_0x1213e6(0x25c)]=new VeLock(),DataConverter[_0x1213e6(0x22c)]=_0x1213e6(0x22d),DataConverter[_0x1213e6(0x21a)]=new RegExp(DataConverter['_SOURCE_PAGE_PREFIX']+_0x1213e6(0x2db)),DataConverter[_0x1213e6(0x241)]=new Set(['AT','GS',_0x1213e6(0x1eb),'T']),DataConverter[_0x1213e6(0x243)]=new Set(['M','R']),DataConverter['ITEM_TYPES_ACTOR_ARMOR']=new Set(['LA','MA','HA','S']);export{DataConverter};