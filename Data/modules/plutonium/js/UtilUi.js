const _0x2a9c=['number','warn','isGM','settings','hasFocus','map','appId','z-index','TEXTAREA','_handleConfigUpdate_handleFixEscapeKey','renderSettings','preventDefault','isFixEscapeKey','toggle','filter','menu','insertAfter','_ELEMENTS_WITH_FOCUS','insertBefore','text','.game-system','target','\x20(Expanded\x20SRD)','_handleConfigUpdate','_handleConfigUpdate_handleFastAnimations','SRD\x20Module','remove','renderActorDirectory','render','INPUT','renderCompendiumDirectory','slideDown','Plutonium\x20','keys','sight','MODULE_NAME','find','length','renderJournalDirectory','_doRenderSettings_handleConfigFixEscapeKey','context','</button>','.dir__wrp-footer','span','<button><i\x20class=\x22fas\x20fa-cogs\x22></i>\x20Configure\x20','object','prototype','.ui__btn-open-menu','isEscapeable','duration','element','each','Could\x20not\x20determine\x20z-index\x20for\x20app\x20','.ui__wrp-player-settings','getCachedMethod','ascSort','ready','trim','button[data-action=\x22configure\x22]','releaseAll','plutonium.configUpdate','entries','_init_addDirectoryWrapper','sort','keyboard','$getDirButton','.directory-footer','close','<button\x20class=\x22ui__btn-open-menu\x22><i\x20class=\x22fas\x20fa-bars\x22></i>\x20Open\x20Main\x20Menu</button>','pHandleButtonClick','_onEscape','saveFog','init','animate','user','zIndex','isFastAnimations','_init_addCompendiumObfuscation','call','_MODAL_STACK','activeLayer','nodeName','get','windows','cacheMethod','_handled','isStreamerMode','_doRenderSettings_addPlayerConfigButton','_controlled','blur','add'];(function(_0x2c58e6,_0x2a9c01){const _0x5efdd8=function(_0x1f381b){while(--_0x1f381b){_0x2c58e6['push'](_0x2c58e6['shift']());}};_0x5efdd8(++_0x2a9c01);}(_0x2a9c,0x11e));const _0x5efd=function(_0x2c58e6,_0x2a9c01){_0x2c58e6=_0x2c58e6-0x0;let _0x5efdd8=_0x2a9c[_0x2c58e6];return _0x5efdd8;};'use strict';import{Config}from'./Config.js';import{ChooseImporter}from'./ChooseImporter.js';import{MenuCollectionTools}from'./MenuCollectionTools.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilPatch}from'./UtilPatch.js';class UtilUi{static[_0x5efd('0x3b')](){game[_0x5efd('0x3d')][_0x5efd('0x50')]&&(UtilUi[_0x5efd('0x31')](_0x5efd('0xe')),UtilUi[_0x5efd('0x31')]('renderItemDirectory'),UtilUi['_init_addDirectoryWrapper'](_0x5efd('0x19')),UtilUi[_0x5efd('0x31')]('renderRollTableDirectory')),UtilUi['_init_addCompendiumObfuscation'](),Hooks['on'](_0x5efd('0x2f'),()=>this[_0x5efd('0xa')]()),this[_0x5efd('0xa')]();}static[_0x5efd('0x40')](){const _0x152721='('+SharedConsts[_0x5efd('0x16')]+')';Hooks['on'](_0x5efd('0x11'),()=>{if(!Config[_0x5efd('0x45')]('ui','isStreamerMode'))return;$('#compendium')['find']('.compendium-footer')[_0x5efd('0x26')]((_0x172d59,_0x399d62)=>{$(_0x399d62)['find'](_0x5efd('0x1e'))[_0x5efd('0x1')]((_0x1dee06,_0x4b5ccc)=>$(_0x4b5ccc)['text']()[_0x5efd('0x2c')]()===_0x152721)[_0x5efd('0x6')](_0x5efd('0x9'));});});}static[_0x5efd('0x31')](_0xa73b29){Hooks['on'](_0xa73b29,(_0x19d8f7,_0x2721bb)=>{_0x2721bb[_0x5efd('0x17')](_0x5efd('0x1d'))[_0x5efd('0xd')](),$$`<div class="flex-col dir__wrp-footer w-100 no-shrink min-w-100">
				<hr class="w-100 m-1">
				<div class="flex w-100">
					${ChooseImporter[_0x5efd('0x34')](_0xa73b29)}
					${MenuCollectionTools[_0x5efd('0x34')](_0xa73b29)}
					${Config['$getDirButton'](_0xa73b29)}
				</div>
			</div>`['appendTo'](_0x2721bb[_0x5efd('0x17')](_0x5efd('0x35')));}),Hooks['on'](_0x5efd('0x58'),(_0x2a5633,_0x3033fd)=>{this[_0x5efd('0x1a')](_0x2a5633,_0x3033fd),this[_0x5efd('0x4a')](_0x2a5633,_0x3033fd);});}static[_0x5efd('0xa')](){this[_0x5efd('0xb')](),this[_0x5efd('0x57')]();}static[_0x5efd('0xb')](){UtilPatch[_0x5efd('0x47')]($[_0x5efd('0x21')],'animate');if(!Config['get']('ui',_0x5efd('0x3f'))){UtilPatch['restoreCachedMethod']($[_0x5efd('0x21')],'animate');return;}$['prototype'][_0x5efd('0x3c')]=function(..._0x53d0f1){const _0xf248e7=[..._0x53d0f1];for(let _0x3e596a=0x0;_0x3e596a<_0xf248e7[_0x5efd('0x18')];++_0x3e596a){const _0x5f2e84=_0xf248e7[_0x3e596a];if(typeof _0x5f2e84===_0x5efd('0x20')&&_0x5f2e84[_0x5efd('0x24')]!=null){if(_0x5f2e84[_0x5efd('0x24')]>0x21)_0x5f2e84[_0x5efd('0x24')]=0x21;}else{if(typeof _0x5f2e84===_0x5efd('0x4e')){if(_0x5f2e84>0x21)_0xf248e7[_0x3e596a]=0x21;}}}const _0x4eaa42=UtilPatch[_0x5efd('0x29')]($[_0x5efd('0x21')],_0x5efd('0x3c'));_0x4eaa42[_0x5efd('0x41')](this,..._0xf248e7);};}static[_0x5efd('0x57')](){ui[_0x5efd('0x51')][_0x5efd('0xf')](),UtilPatch[_0x5efd('0x47')](game[_0x5efd('0x33')],_0x5efd('0x39'),{'isBind':!![]});if(!Config[_0x5efd('0x45')]('ui','isFixEscapeKey')){game[_0x5efd('0x33')][_0x5efd('0x39')]=function(_0x194317,_0x229881,_0xe06621){if(UiUtil[_0x5efd('0x42')]&&UiUtil['_MODAL_STACK']['length'])return;UtilPatch['getCachedMethod'](game[_0x5efd('0x33')],_0x5efd('0x39'))(_0x194317,_0x229881,_0xe06621);};return;}game[_0x5efd('0x33')]['_onEscape']=function(_0x3cd709,_0x4ac1e0,_0x37e2d7){if(UiUtil[_0x5efd('0x42')]&&UiUtil[_0x5efd('0x42')]['length'])return;if(_0x4ac1e0)return;if(_0x37e2d7[_0x5efd('0x52')]&&UtilUi[_0x5efd('0x4')]['has'](_0x3cd709[_0x5efd('0x8')][_0x5efd('0x44')])){_0x3cd709[_0x5efd('0x8')][_0x5efd('0x4c')]();return;}if(canvas[_0x5efd('0x2b')])canvas[_0x5efd('0x15')][_0x5efd('0x3a')]();if(ui[_0x5efd('0x1b')]&&ui[_0x5efd('0x1b')][_0x5efd('0x2')][_0x5efd('0x18')])ui['context'][_0x5efd('0x36')]();else{if(canvas['ready']&&Object[_0x5efd('0x14')](canvas['activeLayer'][_0x5efd('0x4b')])[_0x5efd('0x18')])_0x3cd709[_0x5efd('0x59')](),canvas[_0x5efd('0x43')][_0x5efd('0x2e')]();else{if(Object['values'](ui[_0x5efd('0x46')])['filter'](_0x4a035f=>_0x4a035f[_0x5efd('0x23')]==null||_0x4a035f[_0x5efd('0x23')]===!![])['length']){const _0x451583=Object[_0x5efd('0x30')](ui[_0x5efd('0x46')])[_0x5efd('0x1')](([_0x1ca5be,_0x3f8401])=>_0x3f8401[_0x5efd('0x23')]==null||_0x3f8401[_0x5efd('0x23')]===!![])[_0x5efd('0x53')](([_0x337715,_0x5d9787])=>{const _0x79f5d0=Number(((_0x5d9787['element'][0x0]||{})['style']||{})[_0x5efd('0x55')]||-0x1);if(isNaN(_0x79f5d0)||!~_0x79f5d0)console[_0x5efd('0x4f')](_0x5efd('0x27')+_0x337715);return{'appId':_0x337715,'zIndex':isNaN(_0x79f5d0)?-0x1:_0x79f5d0};})[_0x5efd('0x32')]((_0x156bd3,_0x5125f0)=>SortUtil[_0x5efd('0x2a')](_0x5125f0[_0x5efd('0x3e')],_0x156bd3[_0x5efd('0x3e')]));ui[_0x5efd('0x46')][_0x451583[0x0][_0x5efd('0x54')]][_0x5efd('0x36')]();}else ui[_0x5efd('0x2')][_0x5efd('0x0')]();}}this[_0x5efd('0x48')][_0x5efd('0x4d')](_0x37e2d7['key']);};}static[_0x5efd('0x1a')](_0x4a540d,_0x4d5634){if(!Config[_0x5efd('0x45')]('ui',_0x5efd('0x5a')))return _0x4d5634[_0x5efd('0x17')](_0x5efd('0x22'))[_0x5efd('0xd')]();if(_0x4d5634['find'](_0x5efd('0x22'))['length'])return;$(_0x5efd('0x37'))['click'](()=>{const _0x1801e3=ui[_0x5efd('0x2')][_0x5efd('0x25')];if(!_0x1801e3[_0x5efd('0x18')])ui[_0x5efd('0x2')][_0x5efd('0xf')](!![]);else _0x1801e3[_0x5efd('0x12')](0x96);})[_0x5efd('0x5')](_0x4d5634[_0x5efd('0x17')](_0x5efd('0x2d')));}static[_0x5efd('0x4a')](_0x2ac6ee,_0x9509f8){if(game[_0x5efd('0x3d')][_0x5efd('0x50')])return;if(_0x9509f8[_0x5efd('0x17')](_0x5efd('0x28'))[_0x5efd('0x18')])return;const _0x241488=$(_0x5efd('0x1f')+(Config[_0x5efd('0x45')]('ui',_0x5efd('0x49'))?_0x5efd('0xc'):_0x5efd('0x13'))+_0x5efd('0x1c'))['click'](_0x2cee61=>Config[_0x5efd('0x38')](_0x2cee61));$$`<div class="ui__wrp-player-settings">${_0x241488}</div>`[_0x5efd('0x3')](_0x9509f8[_0x5efd('0x17')](_0x5efd('0x7')));}}UtilUi[_0x5efd('0x4')]=new Set([_0x5efd('0x10'),_0x5efd('0x56')]);export{UtilUi};