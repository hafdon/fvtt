'use strict';const _0x4071=['ready','slideDown','501314eWjouz','_handleConfigUpdate','menu','</button>','SRD\x20Module','compendium','zIndex','\x20(Expanded\x20SRD)','274EmpUiC','2549urIAfD','ascSort','render','key','appendTo','740219kBcgND','_handleConfigUpdate_handleFastAnimations','trim','restoreCachedMethod','renderItemDirectory','21652FjsgBo','activeLayer','click','length','find','_handled','addClass','insertAfter','isFastAnimations','filter','add','_doRenderSettings_handleConfigFixEscapeKey','keyboard','_doRenderSettings_addPlayerConfigButton','renderJournalDirectory','_init_addCompendiumObfuscation','context','text','windows','.game-system','animate','sort','saveFog','renderRollTableDirectory','number','role','.action-buttons','import','.ui__btn-open-menu','getCachedMethod','_init_addDirectoryWrapper','warn','.dir__wrp-header','entries','get','Plutonium\x20','<button\x20class=\x22ui__btn-open-menu\x22><i\x20class=\x22fas\x20fa-bars\x22></i>\x20Open\x20Main\x20Menu</button>','prototype','target','22699HJuJuM','has','init','TEXTAREA','values','_doRenderSettings_handleConfigHidePlutoniumDirectoryButtons','<button><i\x20class=\x22fas\x20fa-cogs\x22></i>\x20Configure\x20','dir__btn-header\x20dir__control-header--alt','#compendium','608399VusQjF','appId','remove','_ELEMENTS_WITH_FOCUS','insertBefore','renderSettings','MODULE_NAME','isEscapeable','button[data-action=\x22configure\x22]','_onEscape','cacheMethod','duration','$getDirButton','nodeName','css','style','_plut_IsPopout','.cfg__btn-open-alt','plutonium.configUpdate','.ui__wrp-player-settings','each','blur','<div\x20class=\x22w-100\x22></div>','isGM','isFixEscapeKey','keys','user','renderActorDirectory','settings','_controlled','call','.header-actions','map','span','_handleConfigUpdate_handleFixEscapeKey','dir__btn-header','19aNjZhl','_MODAL_STACK','close','object','1223327wcYadH'];const _0x3761=function(_0x5cb476,_0x30c073){_0x5cb476=_0x5cb476-0x184;let _0x4071fe=_0x4071[_0x5cb476];return _0x4071fe;};const _0x34ffae=_0x3761;(function(_0x59949b,_0x993a20){const _0x523f23=_0x3761;while(!![]){try{const _0x1912e6=parseInt(_0x523f23(0x1cc))+parseInt(_0x523f23(0x18e))+parseInt(_0x523f23(0x1c7))+parseInt(_0x523f23(0x1b9))+parseInt(_0x523f23(0x1c1))*-parseInt(_0x523f23(0x1c2))+-parseInt(_0x523f23(0x185))*-parseInt(_0x523f23(0x1b2))+-parseInt(_0x523f23(0x1b6));if(_0x1912e6===_0x993a20)break;else _0x59949b['push'](_0x59949b['shift']());}catch(_0x18af12){_0x59949b['push'](_0x59949b['shift']());}}}(_0x4071,0x5d0b8));import{Config}from'./Config.js';import{ChooseImporter}from'./ChooseImporter.js';import{MenuCollectionTools}from'./MenuCollectionTools.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilPatch}from'./UtilPatch.js';import{Menu}from'./Menu.js';class UtilUi{static[_0x34ffae(0x187)](){const _0x24da52=_0x34ffae;game[_0x24da52(0x1a8)][_0x24da52(0x1a5)]&&(UtilUi[_0x24da52(0x1ea)](_0x24da52(0x1a9)),UtilUi[_0x24da52(0x1ea)](_0x24da52(0x1cb)),UtilUi['_init_addDirectoryWrapper'](_0x24da52(0x1da)),UtilUi['_init_addDirectoryWrapper'](_0x24da52(0x1e3))),UtilUi[_0x24da52(0x1db)](),Hooks['on'](_0x24da52(0x1a0),()=>this['_handleConfigUpdate']()),this[_0x24da52(0x1ba)]();}static[_0x34ffae(0x1db)](){const _0x4b6931=_0x34ffae,_0x5b9768='('+SharedConsts[_0x4b6931(0x194)]+')';Hooks['on']('renderCompendiumDirectory',()=>{const _0x4ddea4=_0x4b6931;if(!Config[_0x4ddea4(0x1ee)]('ui','isStreamerMode'))return;$(_0x4ddea4(0x18d))[_0x4ddea4(0x1d0)]('.compendium-footer')[_0x4ddea4(0x1a2)]((_0x525a4b,_0x47d594)=>{const _0x442a6a=_0x4ddea4;$(_0x47d594)[_0x442a6a(0x1d0)](_0x442a6a(0x1af))[_0x442a6a(0x1d5)]((_0x410a4a,_0x4d7e26)=>$(_0x4d7e26)[_0x442a6a(0x1dd)]()[_0x442a6a(0x1c9)]()===_0x5b9768)[_0x442a6a(0x1dd)](_0x442a6a(0x1c0));});}),ui[_0x4b6931(0x1be)]['render']();}static[_0x34ffae(0x1ea)](_0x634e98){const _0x529ea6=_0x34ffae,_0x23fe3b=Config[_0x529ea6(0x1ee)](_0x529ea6(0x1e7),'minimumRole'),_0x5a823a=game['user'][_0x529ea6(0x1e5)]>=_0x23fe3b;Hooks['on'](_0x634e98,(_0x1da80a,_0x2840f4)=>{const _0x3ed3b2=_0x529ea6;_0x2840f4[_0x3ed3b2(0x1d0)](_0x3ed3b2(0x1ec))[_0x3ed3b2(0x190)](),$$`<div class="flex-col dir__wrp-header w-100 no-shrink min-w-100 dir__control-header">
					<div class="flex w-100">
						${_0x5a823a?ChooseImporter[_0x3ed3b2(0x19a)](_0x634e98)['addClass'](_0x3ed3b2(0x1b1)):_0x3ed3b2(0x1a4)}
						${MenuCollectionTools['$getDirButton'](_0x634e98)['addClass'](_0x3ed3b2(0x1b1))}
						${Config[_0x3ed3b2(0x19a)]()[_0x3ed3b2(0x1d2)]('dir__btn-header')}
					</div>
				</div>`[_0x3ed3b2(0x1d3)](_0x2840f4['find'](_0x3ed3b2(0x1ad))),MenuCollectionTools['$getDirButton'](_0x634e98)['addClass'](_0x3ed3b2(0x18c))[_0x3ed3b2(0x19c)]({'maxWidth':0x1c})[_0x3ed3b2(0x1c6)](_0x2840f4[_0x3ed3b2(0x1d0)](_0x3ed3b2(0x1e6)));}),Hooks['on'](_0x529ea6(0x193),(_0x5bf12f,_0x5d56a3)=>{const _0x377f89=_0x529ea6;this[_0x377f89(0x1d7)](_0x5bf12f,_0x5d56a3),this['_doRenderSettings_handleConfigHidePlutoniumDirectoryButtons'](_0x5bf12f,_0x5d56a3),this[_0x377f89(0x1d9)](_0x5bf12f,_0x5d56a3);});}static[_0x34ffae(0x1ba)](){const _0x5e6c19=_0x34ffae;this[_0x5e6c19(0x1c8)](),this[_0x5e6c19(0x1b0)]();}static[_0x34ffae(0x1c8)](){const _0xfda285=_0x34ffae;UtilPatch[_0xfda285(0x198)]($[_0xfda285(0x1f1)],_0xfda285(0x1e0));if(!Config[_0xfda285(0x1ee)]('ui',_0xfda285(0x1d4))){UtilPatch[_0xfda285(0x1ca)]($[_0xfda285(0x1f1)],_0xfda285(0x1e0));return;}$[_0xfda285(0x1f1)][_0xfda285(0x1e0)]=function(..._0xfeb47a){const _0x3f838a=_0xfda285,_0x20cca5=[..._0xfeb47a];for(let _0x211916=0x0;_0x211916<_0x20cca5['length'];++_0x211916){const _0x394c95=_0x20cca5[_0x211916];if(typeof _0x394c95===_0x3f838a(0x1b5)&&_0x394c95[_0x3f838a(0x199)]!=null){if(_0x394c95['duration']>0x21)_0x394c95[_0x3f838a(0x199)]=0x21;break;}else{if(typeof _0x394c95===_0x3f838a(0x1e4)){if(_0x394c95>0x21)_0x20cca5[_0x211916]=0x21;break;}}}const _0x11dd33=UtilPatch[_0x3f838a(0x1e9)]($[_0x3f838a(0x1f1)],_0x3f838a(0x1e0));_0x11dd33[_0x3f838a(0x1ac)](this,..._0x20cca5);};}static['_handleConfigUpdate_handleFixEscapeKey'](){const _0x46d1e9=_0x34ffae;ui[_0x46d1e9(0x1aa)][_0x46d1e9(0x1c4)](),UtilPatch[_0x46d1e9(0x198)](game[_0x46d1e9(0x1d8)],_0x46d1e9(0x197),{'isBind':!![]});if(!Config['get']('ui',_0x46d1e9(0x1a6))){game[_0x46d1e9(0x1d8)]['_onEscape']=function(_0x2e7d2c,_0xdb0a84,_0x10b16c){const _0x2e9999=_0x46d1e9;if(UiUtil[_0x2e9999(0x1b3)]&&UiUtil[_0x2e9999(0x1b3)][_0x2e9999(0x1cf)])return;UtilPatch[_0x2e9999(0x1e9)](game[_0x2e9999(0x1d8)],'_onEscape')(_0x2e7d2c,_0xdb0a84,_0x10b16c);};return;}game['keyboard'][_0x46d1e9(0x197)]=function(_0x135712,_0x28e67a,_0xc06563){const _0x328d60=_0x46d1e9;if(UiUtil[_0x328d60(0x1b3)]&&UiUtil[_0x328d60(0x1b3)][_0x328d60(0x1cf)])return;if(_0x28e67a)return;if(_0xc06563['hasFocus']&&UtilUi['_ELEMENTS_WITH_FOCUS'][_0x328d60(0x186)](_0x135712[_0x328d60(0x184)][_0x328d60(0x19b)])){_0x135712[_0x328d60(0x184)][_0x328d60(0x1a3)]();return;}if(canvas[_0x328d60(0x1b7)])canvas['sight'][_0x328d60(0x1e2)]();if(ui[_0x328d60(0x1dc)]&&ui[_0x328d60(0x1dc)][_0x328d60(0x1bb)][_0x328d60(0x1cf)])ui[_0x328d60(0x1dc)]['close']();else{if(Menu['closeAllMenus']())return;else{if(canvas[_0x328d60(0x1b7)]&&Object[_0x328d60(0x1a7)](canvas[_0x328d60(0x1cd)][_0x328d60(0x1ab)])[_0x328d60(0x1cf)])_0x135712['preventDefault'](),canvas[_0x328d60(0x1cd)]['releaseAll']();else{if(Object[_0x328d60(0x189)](ui[_0x328d60(0x1de)])['filter'](_0x8d9ed0=>(_0x8d9ed0[_0x328d60(0x195)]==null||_0x8d9ed0[_0x328d60(0x195)]===!![])&&!_0x8d9ed0[_0x328d60(0x19e)])[_0x328d60(0x1cf)]){const _0x1d573b=Object[_0x328d60(0x1ed)](ui['windows'])[_0x328d60(0x1d5)](([_0x1ce004,_0x135a22])=>(_0x135a22[_0x328d60(0x195)]==null||_0x135a22[_0x328d60(0x195)]===!![])&&!_0x135a22['_plut_IsPopout'])[_0x328d60(0x1ae)](([_0x548cc2,_0x1c04a7])=>{const _0x46c397=_0x328d60,_0x3dbb33=Number(((_0x1c04a7['element'][0x0]||{})[_0x46c397(0x19d)]||{})['z-index']||-0x1);if(isNaN(_0x3dbb33)||!~_0x3dbb33)console[_0x46c397(0x1eb)]('Could\x20not\x20determine\x20z-index\x20for\x20app\x20'+_0x548cc2);return{'appId':_0x548cc2,'zIndex':isNaN(_0x3dbb33)?-0x1:_0x3dbb33};})[_0x328d60(0x1e1)]((_0x53af59,_0x569de1)=>SortUtil[_0x328d60(0x1c3)](_0x569de1['zIndex'],_0x53af59[_0x328d60(0x1bf)]));ui['windows'][_0x1d573b[0x0][_0x328d60(0x18f)]][_0x328d60(0x1b4)]();}else ui[_0x328d60(0x1bb)]['toggle']();}}}this[_0x328d60(0x1d1)][_0x328d60(0x1d6)](_0xc06563[_0x328d60(0x1c5)]);};}static['_doRenderSettings_handleConfigFixEscapeKey'](_0xa3a9a5,_0x4c3e57){const _0x45b50e=_0x34ffae;if(!Config[_0x45b50e(0x1ee)]('ui',_0x45b50e(0x1a6)))return _0x4c3e57[_0x45b50e(0x1d0)](_0x45b50e(0x1e8))[_0x45b50e(0x190)]();if(_0x4c3e57['find'](_0x45b50e(0x1e8))['length'])return;$(_0x45b50e(0x1f0))['click'](()=>{const _0x3d3d8f=_0x45b50e,_0x4f0c8c=ui['menu']['element'];if(!_0x4f0c8c[_0x3d3d8f(0x1cf)])ui[_0x3d3d8f(0x1bb)][_0x3d3d8f(0x1c4)](!![]);else _0x4f0c8c[_0x3d3d8f(0x1b8)](0x96);})[_0x45b50e(0x192)](_0x4c3e57[_0x45b50e(0x1d0)](_0x45b50e(0x196)));}static[_0x34ffae(0x18a)](_0xd512f3,_0x55dace){const _0x593295=_0x34ffae;if(!Config[_0x593295(0x1ee)]('ui','isHidePlutoniumDirectoryButtons'))return _0x55dace[_0x593295(0x1d0)](_0x593295(0x19f))[_0x593295(0x190)]();if(_0x55dace[_0x593295(0x1d0)](_0x593295(0x19f))['length'])return;Config['$getDirButton']({'isGameSettingsButton':!![]})[_0x593295(0x1d3)](_0x55dace[_0x593295(0x1d0)](_0x593295(0x196)));}static[_0x34ffae(0x1d9)](_0x37a19f,_0x149239){const _0x428172=_0x34ffae;if(game[_0x428172(0x1a8)][_0x428172(0x1a5)])return;if(_0x149239[_0x428172(0x1d0)](_0x428172(0x1a1))[_0x428172(0x1cf)])return;const _0x251411=$(_0x428172(0x18b)+(Config['get']('ui','isStreamerMode')?_0x428172(0x1bd):_0x428172(0x1ef))+_0x428172(0x1bc))[_0x428172(0x1ce)](_0xa8249d=>Config['pHandleButtonClick'](_0xa8249d));$$`<div class="ui__wrp-player-settings">${_0x251411}</div>`[_0x428172(0x1d3)](_0x149239[_0x428172(0x1d0)](_0x428172(0x1df)));}}UtilUi[_0x34ffae(0x191)]=new Set(['INPUT',_0x34ffae(0x188)]);export{UtilUi};