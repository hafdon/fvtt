const _0x3242=['crToPb','function','isSingletonSource_officialAdventure','alignment','pact','effects','daily','uid','Failed\x20to\x20find\x20sheet\x20item\x20for\x20item\x20\x22','rendered','pGetSources','SOURCE_TYP_ARCANA','val','_pImportEntry_pFillToken','_pTypes','_pImportEntry_fillData_Currency','Unhandled\x20lair\x20action\x20format!','getMaxWindowHeight','288336OWqrcr','PG_ITEMS','181XWXukL','_summonedBySpell_level','[name=\x22btn-run\x22]','Unknown\x20CR','map','_pImportEntry_fillData_Spells','monster','nameTags','getMetaGroup','item','activateListeners','_getItemHashesFromString','name','from','push','_pImportEntry_fillData_Traits','ascSortLower','sourceClassName','prepared','pGetAllCreatures','pGetLairActionImage','_tmpItemId','PG_BESTIARY','legendaryMeta','isAddActiveEffects','constant','pCacheAndGetHash','trait','number','legendaryActions','_pImportEntry_pFillData_Attributes','Upload\x20File','variant','_pImportEntry_fillData_Resources','_getCasterLevelFromEntry','monCrToFull','creatures','Actor','pAddActorItems','day','VALID_LANGUAGES','will','_isUseMods','close','Miscellaneous','URL_TO_HASH_BUILDER','_resolve','<div>','items','min','following\x20breath\x20weapon','mutateForFilters','Challenge\x20Rating','attribute','spells','monTypeToFullObj','Source','copy','Lair:\x20','_postLoadVetools','pGetCreatureSideData','darkvision','data/bestiary/','assumedPb','getWithDescriptionPlugins','_pImportEntry_fillData_Details','stringify','_pImportEntry_pFillItems_pAction','_summonedBySpell_levelBase','_pImportEntry_pFillItems_getSubActions','_pImportEntry_fillData_Skills','_pack','pGetParsedAction','doHookSpellLinkRender','ABIL_ABVS','legres','filterBox','legact','actor','movement','weekly','fnPreProcess','permission','712573DGloOe','/template/ImportListCreatureScaleRename.hbs','importCreature','environment','prof','lower','speed','_userData','initBtnSortHandlers','ability','dex','has','list','walk','crToNumber','5etools-creatures','average','Breath\x20Weapons:\x20','_getSpellCount','_getSavingThrowData','startsWith','spellClass','exec','C_CREATURE_NAMETAGS_TYPE_WITH_TAGS','warn','data','size','pGetHomebrewSources','toLowerCase','_activateListeners_absorbListItems','Import\x20with\x20Scaling/Renames','_pFnPostProcessEntries','init','options','Custom\x20URL','MODULE_NAME','join','currency','84xmafJN','_getFolderCr','_vCr','languages','getData','_getRenamedMon','Other\x20AC\x20Bonus','[name=\x22sel-cr\x22]','action','source','MODULE_LOCATION','escapeRegexp','_pImportEntry_pFillItems_pAddItem','foundryMonster','941MMTceK','click','_pImportEntry_fillData_Abilities','prop','5etools','entry','_pImportEntry_pFillItems_pLegendaryHeader','isImportBioImages','tremorsense','test','actors','every','1836WLdsdu','bonusAc','sourceLong','</div>','Eye\x20Ray:\x20','_pImportEntry_pFillItems_pInventory','constructor','224496MnWvZy','formula','DataSourceSpecial','ADD','_pImportEntry_pFillItems_pSpellcasting_recharge','_list','postProcessFluff','blindsight','getSourceWithPagePart','_pImportEntry_pFillItems_pTraitsReactionsLegendaries','_getItemHashesFromAcItem','sourceJsonToColor','dexterityMax','all','feat','trim','_content','perm','regionalEffects','sourceJsonToAbv','lairActions','DataSourceUrl','_pImportEntry_pGetImportMetadata','pGetFluff','VET_SIZE_TO_ABV','race','ACTIVE_EFFECT_MODES','MODULE_NAME_FAKE','Creatures','pWithPlugin','[data-name=\x22wrp-btns-sort\x22]','truesight','_CREATURE_TYPES','getItemActorPassive','keys','628312hiKmax','text-center','pGetSpellHashToItemPosMapAndFillSpells','permissions','includes','add','doAbsorbItems','1989600pnnwKY','_pageFilter','isEquipped','_pImportEntry_pFillItems_pRegionalEffects','charges','_pImportEntry_pFillItems_lairActions_addLairAction','\x20or\x20','_displayName','_pImportEntry_pFillItems_pSpellcasting','DND5E','_dataList','custom','resources.legres.value','bind','string','getParsedActionEntryData','1PPaOyf','spellDc','[name=\x22btn-reset\x22]','spellcastingPrimaryTraitMode','_initSpellcasterData','_getFolderTypeWithTags','findIndex','...','con','getDataSpells','weaponCategory','pGetWithDescriptionPlugins','Legendary\x20Actions','senses','_plut_isLegendaryResistance','pGetCreatureIndex','sourceShort','asText','entries','str','value','_pCr','skills','pGetItemItem','_pImportEntry_pFillData_Attributes_Ac_getAcFromItemEffects','C_CREATURE_NAMETAGS_TYPE','_initAssumedPb','toTitleCase','isUseTokenImageAsPortrait','resources','sourceJsonToFull','SOURCE_TYP_OFFICIAL_SINGLE','sort','Lair\x20Action','Lair\x20Actions','swarmSize','med','importItem','group','split','_getFolderType','_$btnReset','pGetSpellcastingImage','Magic\x20Weapons','splice','SOURCE_TYP_OFFICIAL_ALL','Type','cha','uppercaseFirst','SOURCE_TYP_CUSTOM','spellAbility','forEach','alias','_pPostFilterRender','legendary','substring','getValues','scale','creature','pGetTraitReactionLegendaryImage','getDamageTupleMetas','SRD','setFromValues','Type\x20(With\x20Tags)','alignmentListToFull','sortMonsters','spellLevel','_pImportEntry_pGetFolderId','reaction','_pImportEntry_fillConditionsDamage','class','pGetChooseImporterUserDataForSources','getDataSkills','_pImportEntry_pFillItems_pActions','mon','ascSort','getFolderPathMeta','_isRadio','postItemItemUpdates','_plut_cleanName','_pImportEntry_pFillItems_addTextOnlyItem','find','Import\x20Creatures','render','ScaleRename','utils','_WALER_RENAME','hover','getCreatureUrl','replace','tags','spellcasting','MAX_SAFE_INTEGER','int','_getCasterClassFromEntry','_titleButtonRun','ImportEntryOpts','traits','length','getLegendaryActionIntro','_pImportEntry_pFillData_Attributes_Ac','bonus','reset','getDamagePartsAndOtherFormula','isTemp','DataSourceFile','filter','getAbilityModNumber','headerEntries','max','absorbFnBindListenersRadio','_getBiographyValue','get','_pImportEntry_pFillBase','special','folder','Item','.search','_getLairActionName','type','(^|[^a-zA-Z0-9])','_plut_legActions','getEntryDescription','innate','_titleSearch','rest','_numberCleanRegexp','isNonstandardSource','getWalker','_page','Name','_pImportEntry_pFillItems_pLairActions','ele'];const _0x5a20=function(_0x511c11,_0x2082b6){_0x511c11=_0x511c11-0x15d;let _0x324297=_0x3242[_0x511c11];return _0x324297;};const _0x2e7eef=_0x5a20;(function(_0x58b5bd,_0x3b5867){const _0x122d4b=_0x5a20;while(!![]){try{const _0x2db129=parseInt(_0x122d4b(0x1de))+parseInt(_0x122d4b(0x1e0))*-parseInt(_0x122d4b(0x267))+parseInt(_0x122d4b(0x259))*-parseInt(_0x122d4b(0x273))+-parseInt(_0x122d4b(0x27a))+-parseInt(_0x122d4b(0x29d))+-parseInt(_0x122d4b(0x233))*parseInt(_0x122d4b(0x2b4))+parseInt(_0x122d4b(0x2a4));if(_0x2db129===_0x3b5867)break;else _0x58b5bd['push'](_0x58b5bd['shift']());}catch(_0x30b5ac){_0x58b5bd['push'](_0x58b5bd['shift']());}}}(_0x3242,0x5ebaa));import{ImportListActor}from'./ImportListActor.js';import{Vetools}from'./Vetools.js';import{Util,LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{DataConverterItem}from'./DataConverterItem.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterCreature}from'./DataConverterCreature.js';import{UtilDataSource}from'./UtilDataSource.js';import{ConfigConsts}from'./ConfigConsts.js';import{DataConverterActor}from'./DataConverterActor.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';class ImportListCreature extends ImportListActor{constructor(_0x4dd79e,_0xd3e259,_0x5df74e,_0x56b775){const _0x47c6dd=_0x5a20;_0x4dd79e=_0x4dd79e||{},_0xd3e259=_0xd3e259||{},_0x5df74e=_0x5df74e||{},_0x56b775=_0x56b775||{},super({'title':_0x47c6dd(0x199),..._0xd3e259},_0x4dd79e,{'props':[_0x47c6dd(0x1e6)],'propsBrewAdditionalData':[_0x47c6dd(0x266)],'fnLoadSideData':Vetools[_0x47c6dd(0x21c)],'titleSearch':_0x47c6dd(0x204),'sidebarTab':_0x47c6dd(0x271),'gameProp':_0x47c6dd(0x271),'defaultFolderPath':[_0x47c6dd(0x296)],'folderType':_0x47c6dd(0x205),'fnListSort':PageFilterBestiary[_0x47c6dd(0x188)],'pageFilter':new PageFilterBestiary(),'isActorRadio':!![],'page':UrlUtil[_0x47c6dd(0x1f6)],'isPreviewable':!![],'isModdable':!![],'isDedupable':!![],..._0x5df74e},{'actorType':'npc',..._0x56b775}),this[_0x47c6dd(0x20a)]=![];}async[_0x2e7eef(0x1d6)](){const _0x1c2b9b=_0x2e7eef,_0x32a032=await Vetools[_0x1c2b9b(0x2c3)]();return[new UtilDataSource[(_0x1c2b9b(0x27c))](Config['get']('ui','isStreamerMode')?_0x1c2b9b(0x184):_0x1c2b9b(0x26b),async()=>(await Vetools[_0x1c2b9b(0x1f3)]())[_0x1c2b9b(0x1e6)],{'cacheKey':_0x1c2b9b(0x242),'filterTypes':[UtilDataSource[_0x1c2b9b(0x174)]],'isDefault':!![]}),new UtilDataSource[(_0x1c2b9b(0x28f))](_0x1c2b9b(0x255),'',{'filterTypes':[UtilDataSource[_0x1c2b9b(0x178)]]}),new UtilDataSource[(_0x1c2b9b(0x1b0))](_0x1c2b9b(0x1ff),{'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),...Object['entries'](_0x32a032)[_0x1c2b9b(0x1e4)](([_0x1082a9,_0x43bd67])=>new UtilDataSource['DataSourceUrl'](Parser['sourceJsonToFull'](_0x1082a9),Vetools[_0x1c2b9b(0x19f)](_0x43bd67),{'source':_0x1082a9,'pPostLoad':ImportListCreature['_postLoadVetools']['bind'](ImportListCreature,_0x1082a9),'filterTypes':SourceUtil[_0x1c2b9b(0x1c6)](_0x1082a9)?[UtilDataSource[_0x1c2b9b(0x1d7)]]:[UtilDataSource[_0x1c2b9b(0x166)]]})),...(await Vetools[_0x1c2b9b(0x24e)](_0x1c2b9b(0x181)))[_0x1c2b9b(0x1e4)](({name:_0x1931ec,url:_0x1a1bf0})=>new UtilDataSource[(_0x1c2b9b(0x28f))](_0x1931ec,_0x1a1bf0,{'filterTypes':[UtilDataSource['SOURCE_TYP_BREW']]}))];}static[_0x2e7eef(0x21b)](_0x3fbb77,_0x1d43e0){const _0x5850a6=_0x2e7eef;return _0x1d43e0[_0x5850a6(0x1b1)](_0x3532ca=>_0x3532ca[_0x5850a6(0x262)]===_0x3fbb77);}async[_0x2e7eef(0x18e)](_0x419e44){const _0x2da0f1=_0x2e7eef;return{'isSingletonSource_officialAdventure':_0x419e44[_0x2da0f1(0x1a9)]===0x1&&_0x419e44[0x0][_0x2da0f1(0x262)]&&Parser['SOURCES_ADVENTURES'][_0x2da0f1(0x23e)](_0x419e44[0x0][_0x2da0f1(0x262)])};}async[_0x2e7eef(0x17c)](){const _0x1a294a=_0x2e7eef;if(!this[_0x1a294a(0x23a)])return;const _0x163dc0=this[_0x1a294a(0x23a)][_0x1a294a(0x1ce)];this['_userData']=null;if(!_0x163dc0)return;const _0x542e84=_0x1a294a(0x20c),_0xf4d19e=this[_0x1a294a(0x2a5)][_0x1a294a(0x22c)][_0x1a294a(0x17f)]()[_0x542e84];this['_pageFilter']['filterBox'][_0x1a294a(0x185)]({[_0x542e84]:{...Object['entries'](_0xf4d19e)[_0x1a294a(0x1b1)](([_0x40ee12])=>!_0x40ee12[_0x1a294a(0x247)]('_'))['mergeMap'](([_0x38d3a0,_0x3af43a])=>({[_0x38d3a0]:_0x3af43a})),'Adventure\x20NPC':0x0}});}[_0x2e7eef(0x25d)](){const _0x11074a=_0x2e7eef;return{'isRadio':this['_isRadio'],'isPreviewable':this['_isPreviewable'],'titleButtonRun':this[_0x11074a(0x1a6)],'titleSearch':this[_0x11074a(0x1c3)],'buttonsAdditional':[{'name':'btn-run-mods','text':_0x11074a(0x251)}],'cols':[{'name':_0x11074a(0x1c9),'width':0x4,'field':_0x11074a(0x1ec)},{'name':_0x11074a(0x175),'width':0x5,'field':'type'},{'name':'CR','width':0x1,'field':'cr','rowClassName':'text-center'},{'name':_0x11074a(0x218),'width':0x1,'field':_0x11074a(0x262),'titleProp':_0x11074a(0x275),'displayProp':_0x11074a(0x2c4),'classNameProp':_0x11074a(0x1f1),'rowClassName':_0x11074a(0x29e)}],'rows':this[_0x11074a(0x28a)]['map']((_0x4faa53,_0x3495be)=>{const _0x500409=_0x11074a;return this['_pageFilter'][_0x500409(0x279)][_0x500409(0x213)](_0x4faa53),_0x4faa53['_vCr']=_0x4faa53[_0x500409(0x2c9)]||'—',{'name':_0x4faa53['name'],'type':_0x4faa53['_pTypes'][_0x500409(0x2c5)][_0x500409(0x177)](),'cr':_0x4faa53[_0x500409(0x25b)],'source':_0x4faa53[_0x500409(0x262)],'sourceShort':Parser[_0x500409(0x28d)](_0x4faa53[_0x500409(0x262)]),'sourceLong':Parser[_0x500409(0x165)](_0x4faa53[_0x500409(0x262)]),'sourceClassName':Parser[_0x500409(0x285)](_0x4faa53[_0x500409(0x262)]),'ix':_0x3495be};})};}['_getAbsorbListItemOpts'](){const _0xdcda21=_0x2e7eef;return{'fnGetName':_0x4b2ee4=>_0x4b2ee4[_0xdcda21(0x1ec)],'fnGetValues':_0x3e861e=>({'source':_0x3e861e['source'],'type':_0x3e861e[_0xdcda21(0x1da)][_0xdcda21(0x2c5)],'cr':_0x3e861e[_0xdcda21(0x25b)],'group':_0x3e861e[_0xdcda21(0x16d)]||'','alias':(_0x3e861e[_0xdcda21(0x17b)]||[])[_0xdcda21(0x1e4)](_0x470624=>'\x22'+_0x470624+'\x22')[_0xdcda21(0x257)](','),'hash':UrlUtil[_0xdcda21(0x20d)][this[_0xdcda21(0x1c8)]](_0x3e861e)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x42b400=>this[_0xdcda21(0x194)]?UtilList2[_0xdcda21(0x1b5)](this[_0xdcda21(0x27f)],_0x42b400):UtilList2['absorbFnBindListeners'](this[_0xdcda21(0x27f)],_0x42b400)};}[_0x2e7eef(0x250)](){const _0x31acb2=_0x2e7eef;this[_0x31acb2(0x27f)][_0x31acb2(0x2a3)](this[_0x31acb2(0x28a)],this['_getAbsorbListItemOpts']());}[_0x2e7eef(0x193)](){const _0x22a20f=_0x2e7eef;return{...super[_0x22a20f(0x193)](),'cr':{'label':_0x22a20f(0x214),'getter':_0x2b47c6=>this[_0x22a20f(0x279)]['_getFolderCr'](_0x2b47c6)},'type':{'label':'Type','getter':_0x3759ae=>this['constructor']['_getFolderType'](_0x3759ae)},'typeTags':{'label':_0x22a20f(0x186),'getter':_0x1806a9=>this[_0x22a20f(0x279)][_0x22a20f(0x2b9)](_0x1806a9)}};}static[_0x2e7eef(0x25a)](_0xad551f){const _0x5e4b4b=_0x2e7eef;return _0xad551f['cr']?_0xad551f['cr']['cr']||_0xad551f['cr']:_0x5e4b4b(0x1e3);}static[_0x2e7eef(0x16f)](_0x6fb546){const _0x55b052=_0x2e7eef;return Parser[_0x55b052(0x217)](_0x6fb546['type'])['type'][_0x55b052(0x162)]();}static[_0x2e7eef(0x2b9)](_0x24250d){const _0x5f4de9=_0x2e7eef;return Parser[_0x5f4de9(0x217)](_0x24250d[_0x5f4de9(0x1be)])[_0x5f4de9(0x2c5)][_0x5f4de9(0x177)]();}[_0x2e7eef(0x252)](_0x1739a2){if(!this['_isUseMods'])return _0x1739a2;return new Promise(_0x3878f3=>{const _0x1915fc=_0x5a20,_0x1849d4=new ImportListCreature[(_0x1915fc(0x19b))](_0x1739a2,_0x3878f3,{'titleSearch':this['_titleSearch']});_0x1849d4[_0x1915fc(0x19a)](!![]);});}async[_0x2e7eef(0x290)](_0x260cbc,_0xbeb919,_0xc13d92){const _0xa32407=_0x2e7eef,_0x4cdc67={},_0x56166e=await Renderer[_0xa32407(0x19c)][_0xa32407(0x291)]({'entity':_0xbeb919,'pFnPostProcess':Renderer[_0xa32407(0x1e6)][_0xa32407(0x280)][_0xa32407(0x2b1)](null,_0xbeb919),'fluffBaseUrl':_0xa32407(0x21e),'fluffProp':'monsterFluff'}),_0x49ec52=new ImportListCreature['ImportEntryOpts']({'actor':_0x260cbc,'mon':_0xbeb919,'fluff':_0x56166e});await this[_0xa32407(0x1b8)](_0xbeb919,_0x4cdc67,_0x49ec52['fluff'],{'isUseTokenImageAsPortrait':Config[_0xa32407(0x1b7)](_0xa32407(0x235),_0xa32407(0x163))}),_0x4cdc67[_0xa32407(0x24c)]={};if(!this['_isSkipFolder']&&!_0xc13d92[_0xa32407(0x1af)]&&!this[_0xa32407(0x227)]){const _0x5992d8=await this[_0xa32407(0x18a)](_0xbeb919);if(_0x5992d8)_0x4cdc67[_0xa32407(0x1ba)]=_0x5992d8;}return _0x4cdc67[_0xa32407(0x232)]={'default':Config['get']('importCreature',_0xa32407(0x2a0))},this[_0xa32407(0x269)](_0xbeb919,_0x4cdc67['data'],_0x49ec52),await this[_0xa32407(0x1fe)](_0xbeb919,_0x4cdc67,_0x49ec52),this[_0xa32407(0x221)](_0xbeb919,_0x4cdc67[_0xa32407(0x24c)],_0x49ec52),this[_0xa32407(0x226)](_0xbeb919,_0x4cdc67[_0xa32407(0x24c)],_0x49ec52),this[_0xa32407(0x1ef)](_0xbeb919,_0x4cdc67[_0xa32407(0x24c)],_0x49ec52),this[_0xa32407(0x1db)](_0xbeb919,_0x4cdc67['data'],_0x49ec52),this['_pImportEntry_fillData_Spells'](_0xbeb919,_0x4cdc67['data'],_0x49ec52),this[_0xa32407(0x201)](_0xbeb919,_0x4cdc67[_0xa32407(0x24c)],_0x49ec52),await this[_0xa32407(0x1d9)](_0xbeb919,_0x4cdc67,'importCreature'),{'dataBuilderOpts':_0x49ec52,'actorData':_0x4cdc67};}['_getActorSheetName'](_0x2ed2ae){const _0x13215c=_0x2e7eef,_0x433bb0=[DataConverter['getNameWithSourcePart'](_0x2ed2ae)],_0x4a5946=Config['get']('importCreature',_0x13215c(0x1e7));return Object[_0x13215c(0x2c6)](_0x4a5946)['filter'](([,_0x3c6bf7])=>_0x3c6bf7)[_0x13215c(0x17a)](([_0x4fc53e])=>{const _0x25e4e4=_0x13215c;switch(Number(_0x4fc53e)){case ConfigConsts['C_CREATURE_NAMETAGS_CR']:_0x433bb0['push']('['+this[_0x25e4e4(0x279)][_0x25e4e4(0x25a)](_0x2ed2ae)+']');break;case ConfigConsts[_0x25e4e4(0x160)]:_0x433bb0[_0x25e4e4(0x1ee)]('['+this['constructor'][_0x25e4e4(0x16f)](_0x2ed2ae)+']');break;case ConfigConsts[_0x25e4e4(0x24a)]:_0x433bb0[_0x25e4e4(0x1ee)]('['+this['constructor'][_0x25e4e4(0x2b9)](_0x2ed2ae)+']');break;}}),_0x433bb0[_0x13215c(0x257)]('\x20');}async['_pImportEntry_pFillData_Attributes'](_0x3892e4,_0x32fdbe,_0x35d8a8){const _0x495a51=_0x2e7eef,_0x57ae57=_0x32fdbe['data'],_0x166d90={};let _0x2fb2b7=0xa;if(_0x3892e4['ac']&&_0x3892e4['ac']['length']){const _0x3c78fc=_0x3892e4['ac'][0x0];if(typeof _0x3c78fc===_0x495a51(0x1fc))_0x2fb2b7=_0x3c78fc;else{if(typeof _0x3c78fc['ac']===_0x495a51(0x1fc))_0x2fb2b7=_0x3c78fc['ac'];}_0x2fb2b7=await this['_pImportEntry_pFillData_Attributes_Ac'](_0x3892e4,_0x32fdbe,_0x35d8a8,_0x2fb2b7,_0x3c78fc);}_0x166d90['ac']={'min':0x0,'value':_0x2fb2b7};let _0x8f6f1d=0x0,_0x268afe='';if(_0x3892e4['hp']){if(_0x3892e4['hp'][_0x495a51(0x1b9)]&&/^\d+$/[_0x495a51(0x270)](_0x3892e4['hp'][_0x495a51(0x1b9)]))_0x8f6f1d=Number(_0x3892e4['hp']['special']);if(_0x3892e4['hp'][_0x495a51(0x243)])_0x8f6f1d=_0x3892e4['hp'][_0x495a51(0x243)];if(_0x3892e4['hp']['formula'])_0x268afe=_0x3892e4['hp'][_0x495a51(0x27b)];}_0x166d90['hp']={'value':_0x8f6f1d,'min':0x0,'max':_0x8f6f1d,'temp':0x0,'tempmax':0x0,'formula':_0x268afe},_0x166d90[_0x495a51(0x253)]={'value':0x0,'mod':0x0,'bonus':0x0,'total':Parser[_0x495a51(0x1b2)](_0x3892e4['dex']),'prof':0x0},_0x166d90[_0x495a51(0x237)]=_0x35d8a8['pb'],_0x166d90[_0x495a51(0x22f)]=DataConverter['getMovement'](_0x3892e4[_0x495a51(0x239)]),_0x166d90[_0x495a51(0x1a2)]=_0x35d8a8[_0x495a51(0x179)],_0x166d90['spelldc']=_0x35d8a8['spellDc'],_0x166d90['senses']={'darkvision':0x0,'blindsight':0x0,'tremorsense':0x0,'truesight':0x0,'units':'ft','special':''},_0x166d90[_0x495a51(0x2c1)][_0x495a51(0x1b9)]=(_0x3892e4[_0x495a51(0x2c1)]||[])[_0x495a51(0x1b1)](_0xc9d706=>{const _0x16bc8d=_0x495a51;_0xc9d706=_0xc9d706[_0x16bc8d(0x1a0)](Parser[_0x16bc8d(0x1c5)],'');const _0x495ec6=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x16bc8d(0x249)](_0xc9d706);if(!_0x495ec6)return!![];const _0x4828bc=Number(_0x495ec6[0x2]);switch(_0x495ec6[0x1]){case _0x16bc8d(0x21d):_0x166d90[_0x16bc8d(0x2c1)]['darkvision']=_0x4828bc;break;case _0x16bc8d(0x281):_0x166d90[_0x16bc8d(0x2c1)][_0x16bc8d(0x281)]=_0x4828bc;break;case _0x16bc8d(0x26f):_0x166d90[_0x16bc8d(0x2c1)][_0x16bc8d(0x26f)]=_0x4828bc;break;case _0x16bc8d(0x299):_0x166d90[_0x16bc8d(0x2c1)][_0x16bc8d(0x299)]=_0x4828bc;break;}return![];})[_0x495a51(0x257)](',\x20'),_0x57ae57['attributes']=_0x166d90;}async[_0x2e7eef(0x1ab)](_0x1ce2bc,_0x1d23cc,_0x39c5fa,_0x34d36e,_0x4db859){const _0x2a3fa7=_0x2e7eef;if(!_0x4db859['from'])return _0x34d36e;const _0x49dd94=this[_0x2a3fa7(0x279)][_0x2a3fa7(0x284)](_0x4db859);if(!_0x49dd94[_0x2a3fa7(0x1a9)])return _0x34d36e;const _0x4c088f=await this[_0x2a3fa7(0x15f)](_0x1ce2bc,_0x49dd94);_0x34d36e!==_0x4c088f&&_0x39c5fa[_0x2a3fa7(0x1d1)][_0x2a3fa7(0x1ee)]({'label':_0x2a3fa7(0x25f),'icon':'modules/'+SharedConsts[_0x2a3fa7(0x256)]+'/media/icon/mighty-force.svg','changes':[{'key':'data.attributes.ac.value','value':_0x34d36e-_0x4c088f,'mode':CONST[_0x2a3fa7(0x294)][_0x2a3fa7(0x27d)],'priority':UtilActiveEffects['PRIORITY_BONUS']}],'disabled':![],'duration':{'startTime':null,'seconds':null,'rounds':null,'turns':null,'startRound':null,'startTurn':null},'origin':null,'tint':'','transfer':![],'flags':{}});if(!Config['get'](_0x2a3fa7(0x16c),_0x2a3fa7(0x1f8)))return _0x4c088f;return 0xa+Parser['getAbilityModNumber'](_0x1ce2bc['dex']);}async[_0x2e7eef(0x15f)](_0x66e2c4,_0x3cc258){const _0x4c7bc7=_0x2e7eef;let _0x4d103c=0xa,_0x54617d=0x0,_0x5795a0=0x0;for(const _0x44ceec of _0x3cc258){const _0x28dd85=await Renderer['hover']['pCacheAndGetHash'](UrlUtil[_0x4c7bc7(0x1df)],_0x44ceec);if(!_0x28dd85)continue;let _0x29b56c=Number(_0x28dd85[_0x4c7bc7(0x274)]||0x0);if(isNaN(_0x29b56c))_0x29b56c=0x0;switch(_0x28dd85['bardingType']||_0x28dd85[_0x4c7bc7(0x1be)]){case'HA':{_0x4d103c=Math['max'](_0x4d103c,(_0x28dd85['ac']||0xa)+_0x29b56c);break;}case'MA':{const _0x5b855c=_0x28dd85[_0x4c7bc7(0x286)]===null?Number[_0x4c7bc7(0x1a3)]:_0x28dd85[_0x4c7bc7(0x286)]!=null?_0x28dd85[_0x4c7bc7(0x286)]:0x2;_0x4d103c=Math[_0x4c7bc7(0x1b4)](_0x4d103c,(_0x28dd85['ac']||0xa)+Math[_0x4c7bc7(0x211)](_0x5b855c,Parser[_0x4c7bc7(0x1b2)](_0x66e2c4['dex']||0xa))+_0x29b56c);break;}case'LA':{_0x4d103c=Math[_0x4c7bc7(0x1b4)](_0x4d103c,(_0x28dd85['ac']||0xa)+Parser[_0x4c7bc7(0x1b2)](_0x66e2c4[_0x4c7bc7(0x23d)]||0xa)+_0x29b56c);break;}case'S':{_0x54617d=Math[_0x4c7bc7(0x1b4)](_0x54617d,0x2+_0x29b56c);break;}default:{if(Config['get']('importItem',_0x4c7bc7(0x1f8)))_0x5795a0+=_0x29b56c;}}}return _0x4d103c+_0x54617d+_0x5795a0;}['_pImportEntry_fillData_Details'](_0x4fcde1,_0x271074,_0x1f0eab){const _0x31e3fd=_0x2e7eef,_0x26c01f={};_0x26c01f[_0x31e3fd(0x1cf)]=_0x4fcde1['alignment']?Parser[_0x31e3fd(0x187)](_0x4fcde1[_0x31e3fd(0x1cf)])[_0x31e3fd(0x24f)]():'',_0x26c01f['biography']={'value':this[_0x31e3fd(0x1b6)](_0x4fcde1,_0x1f0eab['fluff'],{'isImportText':Config[_0x31e3fd(0x1b7)](_0x31e3fd(0x235),'isImportBio'),'isImportImages':Config[_0x31e3fd(0x1b7)]('importCreature',_0x31e3fd(0x26e))})};_0x1f0eab[_0x31e3fd(0x189)]||_0x1f0eab['spellClass']?_0x26c01f['class']={'level':_0x1f0eab['spellLevel'],'name':_0x1f0eab[_0x31e3fd(0x248)]}:_0x26c01f[_0x31e3fd(0x18d)]={};_0x26c01f[_0x31e3fd(0x189)]=_0x1f0eab[_0x31e3fd(0x189)],_0x26c01f[_0x31e3fd(0x293)]='',ImportListCreature['_CREATURE_TYPES']=ImportListCreature[_0x31e3fd(0x29a)]||new Set(Object['keys'](CONFIG[_0x31e3fd(0x2ad)]['creatureTypes']));const _0x580cb7=Parser['monTypeToFullObj'](_0x4fcde1[_0x31e3fd(0x1be)]);ImportListCreature[_0x31e3fd(0x29a)][_0x31e3fd(0x23e)](_0x580cb7['type'])?_0x26c01f[_0x31e3fd(0x1be)]={'value':_0x580cb7[_0x31e3fd(0x1be)],'subtype':_0x580cb7[_0x31e3fd(0x1a1)]['join'](',\x20'),'swarm':_0x580cb7[_0x31e3fd(0x16a)]?UtilActors[_0x31e3fd(0x292)][_0x580cb7[_0x31e3fd(0x16a)]]:null}:_0x26c01f[_0x31e3fd(0x1be)]={'custom':Parser['monTypeToFullObj'](_0x4fcde1[_0x31e3fd(0x1be)])['asText']};_0x26c01f['environment']=_0x4fcde1['environment']?_0x4fcde1[_0x31e3fd(0x236)][_0x31e3fd(0x167)](SortUtil[_0x31e3fd(0x1f0)])[_0x31e3fd(0x1e4)](_0x3c1c45=>_0x3c1c45[_0x31e3fd(0x162)]())['join'](',\x20'):'';const _0xea8057=Parser[_0x31e3fd(0x241)](_0x4fcde1['cr']);_0x26c01f['cr']=_0xea8057>=VeCt['CR_CUSTOM']?0x0:_0xea8057,_0x26c01f['xp']={'value':_0x4fcde1['cr']?Parser['crToXpNumber'](_0x4fcde1['cr'])||0x0:0x0},_0x26c01f[_0x31e3fd(0x262)]=DataConverter[_0x31e3fd(0x282)](_0x4fcde1),_0x271074['details']=_0x26c01f;}[_0x2e7eef(0x226)](_0x4ab2a1,_0x110cfd,_0x32706d){const _0x33ab1e=_0x2e7eef;_0x110cfd[_0x33ab1e(0x15d)]=DataConverterCreature[_0x33ab1e(0x18f)](_0x4ab2a1,_0x110cfd,_0x32706d);}['_pImportEntry_fillData_Traits'](_0xe172d1,_0x521405,_0x376eaf){const _0x137faa=_0x2e7eef,_0x18697e={};_0x18697e['size']=UtilActors[_0x137faa(0x292)][_0xe172d1[_0x137faa(0x24d)]]||_0x137faa(0x16b);const _0x4b9463=new Set();let _0xff0563=[];_0xe172d1[_0x137faa(0x25c)]&&_0xe172d1['languages'][_0x137faa(0x17a)](_0x5a712a=>{const _0x17762d=_0x137faa,_0x57410c=UtilActors[_0x17762d(0x208)][_0x5a712a['toLowerCase']()[_0x17762d(0x289)]()];if(_0x57410c)_0x4b9463[_0x17762d(0x2a2)](_0x57410c);else _0x4b9463['add'](_0x17762d(0x2af)),_0xff0563[_0x17762d(0x1ee)](_0x5a712a);}),_0x18697e[_0x137faa(0x25c)]={'value':[..._0x4b9463],'custom':_0xff0563[_0x137faa(0x1b1)](Boolean)[_0x137faa(0x257)](';\x20')},this[_0x137faa(0x18c)](_0xe172d1,_0x18697e),_0x521405[_0x137faa(0x1a8)]=_0x18697e;}['_pImportEntry_fillData_Currency'](_0x5b8b51,_0xf56cce,_0x19d1d4){const _0x3a5ab3=_0x2e7eef;_0xf56cce[_0x3a5ab3(0x258)]={'pp':0x0,'gp':0x0,'ep':0x0,'sp':0x0,'cp':0x0};}[_0x2e7eef(0x1e5)](_0x4d3aaa,_0xada9a1,_0x2c9460){const _0x7e2e7f=_0x2e7eef;_0xada9a1['spells']=DataConverterCreature[_0x7e2e7f(0x2bd)](_0x4d3aaa,_0xada9a1,_0x2c9460);}[_0x2e7eef(0x201)](_0x51a7df,_0xd09e07,_0x2f28d6){const _0x5569b7=_0x2e7eef,_0x5812c5={};let _0x5ca584=0x0;if(_0x51a7df['legendary'])_0x5ca584=_0x51a7df[_0x5569b7(0x1fd)]||0x3;_0x5812c5[_0x5569b7(0x22d)]={'value':_0x5ca584,'max':_0x5ca584};let _0x4324fe=0x0;if(_0x51a7df[_0x5569b7(0x1fb)]){const _0x4024fe=_0x51a7df[_0x5569b7(0x1fb)][_0x5569b7(0x198)](_0x4dbe63=>/legendary resistance/gi['test'](_0x4dbe63[_0x5569b7(0x1ec)]||''));if(_0x4024fe){const _0x2a6b55=/\((\d+)\/Day\)/i[_0x5569b7(0x249)](_0x4024fe[_0x5569b7(0x1ec)]);if(_0x2a6b55)_0x4324fe=Number(_0x2a6b55[0x1]);}}_0x5812c5[_0x5569b7(0x22b)]={'value':_0x4324fe,'max':_0x4324fe},_0x5812c5['lair']={'value':!!(_0x2f28d6['legendaryMeta']&&_0x2f28d6[_0x5569b7(0x1f7)][_0x5569b7(0x28e)]),'initiative':0x14},_0xd09e07[_0x5569b7(0x164)]=_0x5812c5;}async['_pImportEntry_pFillItems'](_0x2b3c3f,_0x54d8ed,_0x282022,_0x1838da){const _0x264bf8=_0x2e7eef;await this[_0x264bf8(0x190)](_0x2b3c3f,_0x54d8ed,_0x282022),await this[_0x264bf8(0x283)](_0x2b3c3f,_0x54d8ed,_0x282022,{'prop':_0x264bf8(0x1fb),'fnPreProcess':_0x819e7=>{const _0xf3113a=_0x264bf8;if(!/legendary resistance/gi[_0xf3113a(0x270)](_0x819e7[_0xf3113a(0x1ec)]||''))return;_0x819e7[_0xf3113a(0x2c2)]=!![];}},{'consumeType':_0x18fe13=>_0x18fe13[_0x264bf8(0x2c2)]?_0x264bf8(0x215):null,'consumeTarget':_0x238323=>_0x238323[_0x264bf8(0x2c2)]?_0x264bf8(0x2b0):null,'consumeAmount':_0x1a4162=>_0x1a4162[_0x264bf8(0x2c2)]?0x1:null}),await this[_0x264bf8(0x283)](_0x2b3c3f,_0x54d8ed,_0x282022,{'prop':_0x264bf8(0x1ac)},{'activationType':_0x264bf8(0x1ac),'activationCost':0x1}),await this['_pImportEntry_pFillItems_pTraitsReactionsLegendaries'](_0x2b3c3f,_0x54d8ed,_0x282022,{'prop':_0x264bf8(0x18b)},{'activationType':_0x264bf8(0x18b),'activationCost':0x1}),await this[_0x264bf8(0x26d)](_0x2b3c3f,_0x54d8ed,_0x282022),await this[_0x264bf8(0x283)](_0x2b3c3f,_0x54d8ed,_0x282022,{'prop':_0x264bf8(0x17d),'fnPreProcess':_0x275f72=>{const _0xc3c5ff=_0x264bf8;_0x275f72[_0xc3c5ff(0x1c0)]=0x1,_0x275f72[_0xc3c5ff(0x1ec)]&&(_0x275f72['name']=_0x275f72['name'][_0xc3c5ff(0x1a0)](/\(costs (\d+) actions?\)/i,(..._0x455ca5)=>{return _0x275f72['_plut_legActions']=Number(_0x455ca5[0x1]),'';})['trim']());}},{'activationType':_0x264bf8(0x17d),'activationCost':_0x26876f=>_0x26876f[_0x264bf8(0x1c0)],'consumeType':_0x264bf8(0x215),'consumeTarget':'resources.legact.value','consumeAmount':_0x10fada=>_0x10fada[_0x264bf8(0x1c0)]}),await this['_pImportEntry_pFillItems_pLairActions'](_0x2b3c3f,_0x54d8ed,_0x282022),await this[_0x264bf8(0x2a7)](_0x2b3c3f,_0x54d8ed,_0x282022),await this[_0x264bf8(0x278)](_0x2b3c3f,_0x54d8ed,_0x282022);const _0xbf5436=_0x1838da[_0x264bf8(0x1af)]||this[_0x264bf8(0x227)]!=null;await this[_0x264bf8(0x2ac)](_0x2b3c3f,_0x54d8ed,_0xbf5436,_0x282022),await UtilActors[_0x264bf8(0x206)](_0x282022[_0x264bf8(0x22e)],_0x282022[_0x264bf8(0x210)],{'isTemporary':_0xbf5436});}['_pImportEntry_pFillItems_addTextOnlyItem'](_0x229086,_0x3b4141,_0x24f587,_0x359497,_0x18461d){const _0x533e52=_0x2e7eef;_0x3b4141[_0x533e52(0x210)]['push'](DataConverter['getItemActorPassive'](_0x359497,{..._0x18461d,'mode':'creature','pb':_0x3b4141[_0x533e52(0x21f)],'entity':_0x229086,'source':_0x229086[_0x533e52(0x262)],'summonSpellLevel':_0x229086[_0x533e52(0x1e1)]??_0x229086[_0x533e52(0x224)],'actor':{'data':_0x24f587}}));}async['_pImportEntry_pFillItems_pLegendaryHeader'](_0x45ac22,_0x12267f,_0x4eb1d4){const _0x3938cf=_0x2e7eef;let _0xe26300=0x0;if(_0x45ac22['legendary'])_0xe26300=_0x45ac22[_0x3938cf(0x1fd)]||0x3;if(!_0xe26300)return;const _0x2eed66=_0x3938cf(0x20f)+DataConverter[_0x3938cf(0x220)](()=>Renderer[_0x3938cf(0x1e6)][_0x3938cf(0x1aa)](_0x45ac22))+_0x3938cf(0x276),_0x207b6d=await DataConverterCreature[_0x3938cf(0x182)](_0x45ac22,{'name':_0x3938cf(0x2c0)},_0x4eb1d4);_0x4eb1d4[_0x3938cf(0x210)][_0x3938cf(0x1ee)](DataConverter[_0x3938cf(0x29b)]({'name':_0x3938cf(0x2c0)},{'fvttType':_0x3938cf(0x288),'description':_0x2eed66,'mode':_0x3938cf(0x181),'pb':_0x4eb1d4[_0x3938cf(0x21f)],'entity':_0x45ac22,'source':_0x45ac22[_0x3938cf(0x262)],'summonSpellLevel':_0x45ac22[_0x3938cf(0x1e1)]??_0x45ac22['_summonedBySpell_levelBase'],'actor':{'data':_0x12267f},'img':_0x207b6d}));}async[_0x2e7eef(0x283)](_0x484da1,_0x44ee37,_0x569f8b,_0x574d66,_0x502563){const _0x39ffad=_0x2e7eef;_0x502563=_0x502563||{};if(!_0x484da1[_0x574d66[_0x39ffad(0x26a)]])return;for(let _0x8052f6 of _0x484da1[_0x574d66[_0x39ffad(0x26a)]]){_0x574d66['fnPreProcess']&&(_0x8052f6=MiscUtil[_0x39ffad(0x219)](_0x8052f6),_0x574d66[_0x39ffad(0x231)](_0x8052f6));const _0x287545={};Object[_0x39ffad(0x2c6)](_0x502563)['forEach'](([_0x476734,_0xe6ec02])=>{const _0x34f0e5=_0x39ffad;if(typeof _0xe6ec02===_0x34f0e5(0x1cd))_0x287545[_0x476734]=_0xe6ec02(_0x8052f6);else _0x287545[_0x476734]=MiscUtil['copy'](_0xe6ec02);});const _0x5916a5=await DataConverterCreature[_0x39ffad(0x182)](_0x484da1,_0x8052f6,_0x569f8b,{'isLegendary':_0x574d66[_0x39ffad(0x26a)]==='legendary'});this[_0x39ffad(0x197)](_0x484da1,_0x569f8b,_0x44ee37,_0x8052f6,{..._0x287545,'fvttType':'feat','img':_0x5916a5});}}static[_0x2e7eef(0x1bd)](_0x226da5){const _0x25d32d=_0x2e7eef,_0x5aee85=Renderer['stripTags'](_0x226da5);let _0x27a34e=_0x25d32d(0x21a);const _0x3dc36c=_0x5aee85[_0x25d32d(0x16e)]('\x20');for(const _0x5d66c5 of _0x3dc36c){if(_0x27a34e[_0x25d32d(0x1a9)]+_0x5d66c5['length']<0x32)_0x27a34e+=_0x5d66c5+'\x20';else break;}if(_0x5aee85['length']>_0x27a34e[_0x25d32d(0x289)]()[_0x25d32d(0x1a9)])_0x27a34e+=_0x25d32d(0x2bb);else _0x27a34e=_0x27a34e[_0x25d32d(0x289)]();return _0x27a34e;}async[_0x2e7eef(0x1ca)](_0x4d14d3,_0x379ce5,_0xdf124e){const _0x379f66=_0x2e7eef;if(!_0xdf124e[_0x379f66(0x1f7)]?.[_0x379f66(0x28e)])return;const _0x228c7c=_0xdf124e['legendaryMeta']['lairActions'],_0x4dd496=_0x228c7c[_0x379f66(0x198)](_0x430405=>_0x430405[_0x379f66(0x1be)]===_0x379f66(0x23f));if(_0x4dd496)for(let _0x495b15=0x0;_0x495b15<_0x4dd496[_0x379f66(0x210)][_0x379f66(0x1a9)];++_0x495b15){const _0x5b9ec5=_0x4dd496[_0x379f66(0x210)][_0x495b15];await this['_pImportEntry_pFillItems_lairActions_addLairAction'](_0x4d14d3,_0x379ce5,_0xdf124e,_0x5b9ec5,_0x495b15);}else await this[_0x379f66(0x2a9)](_0x4d14d3,_0x379ce5,_0xdf124e,_0x228c7c);}async[_0x2e7eef(0x2a9)](_0x10e728,_0x36c1c9,_0x201600,_0x1d61cf,_0x345cf3){const _0x8cff13=_0x2e7eef;if(_0x1d61cf instanceof Array)typeof _0x1d61cf[0x0]===_0x8cff13(0x2b2)?_0x1d61cf={'type':'entries','name':this['constructor'][_0x8cff13(0x1bd)](_0x1d61cf[0x0]),'entries':_0x1d61cf}:_0x1d61cf={'type':'entries','name':_0x8cff13(0x168)+(_0x345cf3!=null?'\x20'+(_0x345cf3+0x1):''),'entries':_0x1d61cf};else{if(typeof _0x1d61cf==='string')_0x1d61cf={'type':_0x8cff13(0x2c6),'name':this[_0x8cff13(0x279)][_0x8cff13(0x1bd)](_0x1d61cf),'entries':[_0x1d61cf]};else throw new Error(_0x8cff13(0x1dc));}const _0x3fe010=JSON['stringify'](_0x1d61cf),{saveAbility:_0x279724,saveScaling:_0x4a5530,saveDc:_0x509aac}=this['_getSavingThrowData'](_0x10e728,_0x201600[_0x8cff13(0x21f)],_0x3fe010),_0x54546c=[];let _0x46614f='';if(typeof _0x1d61cf['entries'][0x0]===_0x8cff13(0x2b2)){const {damageTupleMetas:_0x291636}=DataConverter[_0x8cff13(0x183)](_0x1d61cf[_0x8cff13(0x2c6)][0x0],{'summonSpellLevel':_0x10e728[_0x8cff13(0x1e1)]??_0x10e728['_summonedBySpell_levelBase']}),{damageParts:_0x4c0cff,formula:_0x1e47f6}=DataConverter[_0x8cff13(0x1ae)](_0x291636);_0x54546c['push'](..._0x4c0cff),_0x46614f=_0x1e47f6;}const _0x226c46=this['_getDamageTuplesWithMod'](_0x54546c),_0x80fe1e=await DataConverterCreature[_0x8cff13(0x1f4)](_0x10e728,{'name':_0x8cff13(0x169)},_0x201600);this['_pImportEntry_pFillItems_addTextOnlyItem'](_0x10e728,_0x201600,_0x36c1c9,_0x1d61cf,{'fvttType':'feat','activationType':'lair','activationCost':0x1,'img':_0x80fe1e,'saveAbility':_0x279724,'saveDc':_0x509aac,'saveScaling':_0x4a5530,'damageParts':_0x226c46,'formula':_0x46614f});}async['_pImportEntry_pFillItems_pRegionalEffects'](_0x2b337b,_0x3ec1ce,_0x1150f8){const _0x3c5a8a=_0x2e7eef;if(!_0x1150f8[_0x3c5a8a(0x1f7)]?.[_0x3c5a8a(0x28c)])return;const _0x3ccacb={'type':_0x3c5a8a(0x2c6),'name':'Regional\x20Effects','entries':MiscUtil[_0x3c5a8a(0x219)](_0x1150f8[_0x3c5a8a(0x1f7)]['regionalEffects'])},_0x53558b=await DataConverterCreature['pGetLairActionImage'](_0x2b337b,_0x3ccacb,_0x1150f8);this[_0x3c5a8a(0x197)](_0x2b337b,_0x1150f8,_0x3ec1ce,_0x3ccacb,{'fvttType':_0x3c5a8a(0x288),'img':_0x53558b});}async[_0x2e7eef(0x190)](_0x3bddea,_0x56b1fb,_0x1f4aa2){const _0x56de81=_0x2e7eef;if(!_0x3bddea[_0x56de81(0x261)])return;for(const _0x2f67fb of _0x3bddea['action']){const _0x45855b=this['_pImportEntry_pFillItems_getSubActions'](_0x2f67fb,_0x1f4aa2);for(const _0x5c9bcb of _0x45855b){await this['_pImportEntry_pFillItems_pAction'](_0x3bddea,_0x56b1fb,_0x5c9bcb,_0x1f4aa2);}}}[_0x2e7eef(0x225)](_0x10cc76,_0x1aca3e){const _0x4c4c7c=_0x2e7eef;if(!_0x10cc76[_0x4c4c7c(0x1ec)]||!_0x10cc76['entries'])return[_0x10cc76];if(_0x10cc76[_0x4c4c7c(0x2c6)][_0x4c4c7c(0x1a9)]===0x2&&typeof _0x10cc76['entries'][0x0]===_0x4c4c7c(0x2b2)&&_0x10cc76['entries'][0x0][_0x4c4c7c(0x2a1)](_0x4c4c7c(0x212))&&_0x10cc76['entries'][0x1]['type']===_0x4c4c7c(0x23f)&&_0x10cc76[_0x4c4c7c(0x2c6)][0x1][_0x4c4c7c(0x210)][_0x4c4c7c(0x272)](_0x414012=>_0x414012[_0x4c4c7c(0x1ec)]&&_0x414012[_0x4c4c7c(0x26c)])){const _0x3d5c26=[],_0x385800=CryptUtil['uid'](),_0x4e66f0=_0x10cc76[_0x4c4c7c(0x2c6)][0x1][_0x4c4c7c(0x210)][_0x4c4c7c(0x1e4)](_0x22a3f2=>{const _0x214824=_0x4c4c7c,_0x104e5f=_0x22a3f2[_0x214824(0x1ec)]['replace'](/\.\s*$/,''),_0x1db05c=_0x214824(0x244)+_0x104e5f,_0x426c3b=CryptUtil[_0x214824(0x1d3)]();return _0x1aca3e[_0x214824(0x195)]['push'](async({actor:_0x541526,isTemp:_0x342f88,isPack:_0x1389e7,pack:_0x117d8f})=>{const _0x189d62=_0x214824;if(_0x342f88)return;const _0x1174ef=_0x541526[_0x189d62(0x210)][_0x189d62(0x198)](_0xe2a28a=>_0xe2a28a[_0x189d62(0x24c)]['flags']?.[SharedConsts['MODULE_NAME_FAKE']]?.[_0x189d62(0x1f5)]===_0x385800);if(!_0x1174ef)return console[_0x189d62(0x24b)](...LGT,'Failed\x20to\x20find\x20parent\x20sheet\x20item\x20for\x20item\x20\x22'+_0x22a3f2[_0x189d62(0x1ec)]+'\x22');const _0x349791=_0x541526['items'][_0x189d62(0x198)](_0x104f31=>_0x104f31['data']['flags']?.[SharedConsts[_0x189d62(0x295)]]?.[_0x189d62(0x1f5)]===_0x426c3b);if(!_0x349791)return console[_0x189d62(0x24b)](...LGT,_0x189d62(0x1d4)+_0x22a3f2[_0x189d62(0x1ec)]+'\x22');const _0x53e3b2={'_id':_0x349791['id'],'data':{'consume':{'target':_0x1174ef['id']}}};await _0x541526['updateEmbeddedDocuments'](_0x189d62(0x1bb),[_0x53e3b2]);}),{'name':_0x1db05c,'_plut_cleanName':_0x104e5f,'entries':[_0x22a3f2['entry']],'_foundryData':{'consume.type':'charges','consume.amount':0x1},'_foundryFlags':{[SharedConsts['MODULE_NAME_FAKE']]:{'_tmpItemId':_0x426c3b}}};});return _0x3d5c26[_0x4c4c7c(0x1ee)]({'name':_0x10cc76[_0x4c4c7c(0x1ec)],'entries':[_0x10cc76[_0x4c4c7c(0x2c6)][0x0][_0x4c4c7c(0x289)]()['replace'](/[.,!?:]$/,'')+':\x20'+_0x4e66f0[_0x4c4c7c(0x1e4)](_0x759b86=>_0x759b86[_0x4c4c7c(0x196)])['joinConjunct'](',\x20',_0x4c4c7c(0x2aa))],'_foundryFlags':{[SharedConsts['MODULE_NAME_FAKE']]:{'_tmpItemId':_0x385800}}}),_0x4e66f0['forEach'](_0x528394=>delete _0x528394['_plut_cleanName']),_0x3d5c26[_0x4c4c7c(0x1ee)](..._0x4e66f0),_0x3d5c26;}if(/^eye ray/gi[_0x4c4c7c(0x270)](_0x10cc76[_0x4c4c7c(0x1ec)])&&_0x10cc76[_0x4c4c7c(0x2c6)][_0x4c4c7c(0x198)](_0x29e87f=>_0x29e87f[_0x4c4c7c(0x1be)]===_0x4c4c7c(0x23f)&&(_0x29e87f[_0x4c4c7c(0x210)]||[])[_0x4c4c7c(0x272)](_0xd39457=>_0xd39457[_0x4c4c7c(0x1be)]===_0x4c4c7c(0x1e9)))){const _0x1c17cd=[],_0x1b406f=MiscUtil['copy'](_0x10cc76),_0x5b1bb8=_0x10cc76[_0x4c4c7c(0x2c6)][_0x4c4c7c(0x2ba)](_0x55c6da=>_0x55c6da[_0x4c4c7c(0x1be)]==='list'&&(_0x55c6da[_0x4c4c7c(0x210)]||[])['every'](_0x2606ac=>_0x2606ac[_0x4c4c7c(0x1be)]===_0x4c4c7c(0x1e9))),_0xc7c744=_0x10cc76['entries'][_0x5b1bb8];return _0x1b406f['entries'][_0x4c4c7c(0x173)](_0x5b1bb8,0x1),_0x1c17cd[_0x4c4c7c(0x1ee)](_0x1b406f),_0xc7c744[_0x4c4c7c(0x210)]['forEach'](_0x1954f0=>{const _0x6df00c=_0x4c4c7c,_0x24f671={..._0x1954f0,'type':_0x6df00c(0x2c6),'name':_0x6df00c(0x277)+_0x1954f0[_0x6df00c(0x1ec)][_0x6df00c(0x1a0)](/[.,!:?]\\s*$/,'')};_0x24f671['entry']&&(_0x24f671['entries']=[_0x24f671[_0x6df00c(0x26c)]],delete _0x24f671['entry']),delete _0x24f671['style'],_0x1c17cd[_0x6df00c(0x1ee)](_0x24f671);}),_0x1c17cd;}return[_0x10cc76];}async[_0x2e7eef(0x223)](_0x19b031,_0x233a72,_0x327e43,_0x487c3a){const _0x468d78=_0x2e7eef,_0x4b2be0=DataConverter[_0x468d78(0x1c1)](_0x327e43,{'summonSpellLevel':_0x19b031[_0x468d78(0x1e1)]??_0x19b031[_0x468d78(0x224)]}),_0x485a8a=_0x327e43['entries']?JSON[_0x468d78(0x222)](_0x327e43['entries']):null,{damageTuples:_0x246015,formula:_0x25441d,offensiveAbility:_0xf6e672,isAttack:_0x343160,rangeShort:_0x2d5710,rangeLong:_0x5c3d8d,actionType:_0x3bf032,isProficient:_0x43505f,attackBonus:_0x16ffc8,_foundryData:_0x183bab,foundryData:_0x55b357,_foundryFlags:_0x433266,foundryFlags:_0x436c2a,img:_0x7b3bc}=await DataConverterCreature[_0x468d78(0x228)](_0x19b031,_0x327e43,_0x487c3a),_0x4424e4=[];_0x4424e4[_0x468d78(0x1ee)](...this['_getDamageTuplesWithMod'](_0x246015,_0x19b031[_0xf6e672]));const {saveAbility:_0x54669a,saveScaling:_0x14ed61,saveDc:_0x2294ca}=this[_0x468d78(0x246)](_0x19b031,_0x487c3a[_0x468d78(0x21f)],_0x485a8a);_0x343160?await this['_pFillWeaponItem'](_0x19b031,_0x233a72,_0x327e43,_0x487c3a,{'offensiveAbility':_0xf6e672,'damageParts':_0x4424e4,'formula':_0x25441d,'rangeShort':_0x2d5710,'rangeLong':_0x5c3d8d,'actionType':_0x3bf032,'isProficient':_0x43505f,'description':_0x4b2be0,'saveAbility':_0x54669a,'saveDc':_0x2294ca,'saveScaling':_0x14ed61,'attackBonus':_0x16ffc8,'_foundryData':_0x183bab,'foundryData':_0x55b357,'_foundryFlags':_0x433266,'foundryFlags':_0x436c2a,'img':_0x7b3bc,'isMagical':(_0x19b031['traitTags']||[])['includes'](_0x468d78(0x172))}):this[_0x468d78(0x197)](_0x19b031,_0x487c3a,_0x233a72,_0x327e43,{'fvttType':'feat','activationType':_0x468d78(0x261),'activationCost':0x1,'description':_0x4b2be0,'saveAbility':_0x54669a,'saveDc':_0x2294ca,'saveScaling':_0x14ed61,'damageParts':_0x4424e4,'formula':_0x25441d,'attackBonus':_0x16ffc8,'_foundryData':_0x183bab,'foundryData':_0x55b357,'_foundryFlags':_0x433266,'foundryFlags':_0x436c2a,'img':_0x7b3bc});}['_getSavingThrowData'](_0x537aea,_0x5cedc1,_0x20cc33){const _0x36628e=_0x2e7eef;let {saveAbility:_0xa2693a,saveScaling:_0x4e0ff2,saveDc:_0xf48c95,isFoundParse:_0x35fdb2}=super[_0x36628e(0x246)](_0x20cc33);if(_0x35fdb2){if(_0x5cedc1){const _0xf10658=_0xf48c95-_0x5cedc1-0x8;for(const _0x357e8a of[_0x36628e(0x176),'wis',_0x36628e(0x1a4),_0x36628e(0x2c7),_0x36628e(0x23d),_0x36628e(0x2bc)]){const _0x3dee53=Parser[_0x36628e(0x1b2)](_0x537aea[_0x357e8a]);if(_0x3dee53===_0xf10658){_0x4e0ff2=_0x357e8a;break;}}}}return{'saveAbility':_0xa2693a,'saveScaling':_0x4e0ff2,'saveDc':_0xf48c95};}['_getDamageTuplesWithMod'](_0x48bfcc,_0x43438d){const _0x606f60=_0x2e7eef;if(!_0x48bfcc[_0x606f60(0x1a9)])return[];return _0x48bfcc=MiscUtil[_0x606f60(0x219)](_0x48bfcc),_0x43438d&&_0x48bfcc['forEach'](_0x2b5008=>{const _0x3ed971=_0x606f60,_0x5c4bb0=Parser[_0x3ed971(0x1b2)](_0x43438d),_0x40fc3c=/(\d+d\d+\s*)([-+]\s*\d+)([ -+].*)?$/['exec'](_0x2b5008[0x0]);if(!_0x40fc3c)return;const _0x2b2c1f=Number(_0x40fc3c[0x2][_0x3ed971(0x1a0)](/\s*/g,''));if(_0x2b2c1f===_0x5c4bb0)_0x2b5008[0x0]=_0x40fc3c[0x1]+'\x20+\x20@mod'+(_0x40fc3c[0x3]||'');}),_0x48bfcc['filter'](_0x23ccd6=>_0x23ccd6[_0x606f60(0x1a9)]);}static[_0x2e7eef(0x284)](_0x448745){const _0x3e58fc=_0x2e7eef,_0x4f32cc=[];if(!_0x448745[_0x3e58fc(0x1ed)]||!_0x448745['from']['length'])return _0x4f32cc;return _0x448745[_0x3e58fc(0x1ed)]['forEach'](_0x992de7=>{const _0x5f0679=_0x3e58fc,_0x12a307=this[_0x5f0679(0x1eb)](_0x992de7);_0x12a307[_0x5f0679(0x17a)](_0x5a78d3=>{const _0x257481=_0x5f0679;if(!_0x4f32cc['includes'](_0x5a78d3))_0x4f32cc[_0x257481(0x1ee)](_0x5a78d3);});}),_0x4f32cc;}static[_0x2e7eef(0x1eb)](_0x2106dd){const _0x871061=_0x2e7eef,_0x503ed4=[];return _0x2106dd[_0x871061(0x1a0)](/{@item ([^}]+)}/gi,(..._0x54320b)=>{const _0x245545=_0x871061,[_0xf17424,_0x1167b6]=_0x54320b[0x1]['trim']()[_0x245545(0x24f)]()[_0x245545(0x16e)]('|'),_0x50d705=UrlUtil[_0x245545(0x20d)][UrlUtil['PG_ITEMS']]({'name':_0xf17424,'source':_0x1167b6||SRC_DMG});if(!_0x503ed4[_0x245545(0x2a1)](_0x50d705))_0x503ed4['push'](_0x50d705);}),[..._0x503ed4];}async[_0x2e7eef(0x278)](_0x14cd7c,_0x1a9fdc,_0xfda100){const _0x151a3c=_0x2e7eef,_0x4504d5=new Set(),_0x19b268=new Set();(_0x14cd7c['ac']||[])[_0x151a3c(0x17a)]((_0x3fa067,_0x4a2075)=>{const _0x169bf4=_0x151a3c,_0x596e3d=this['constructor'][_0x169bf4(0x284)](_0x3fa067);_0x596e3d[_0x169bf4(0x17a)](_0x253714=>_0x4504d5[_0x169bf4(0x2a2)](_0x253714));if(_0x4a2075===0x0)_0x596e3d[_0x169bf4(0x17a)](_0x331281=>_0x19b268[_0x169bf4(0x2a2)](_0x331281));});for(const _0x3dc7a7 of _0x4504d5){const _0x334223=await Renderer[_0x151a3c(0x19e)][_0x151a3c(0x1fa)](UrlUtil[_0x151a3c(0x1df)],_0x3dc7a7);if(!_0x334223)continue;await this[_0x151a3c(0x265)](_0x14cd7c,_0x1a9fdc,_0x334223,_0xfda100,{'isEquipped':_0x19b268[_0x151a3c(0x23e)](_0x3dc7a7)});}const _0x18062e=(_0x14cd7c['trait']||[])[_0x151a3c(0x1b1)](_0x6195de=>_0x6195de[_0x151a3c(0x1ec)]&&_0x6195de['entries']&&/equipment/i[_0x151a3c(0x270)](_0x6195de[_0x151a3c(0x1ec)][_0x151a3c(0x289)]()))['map'](_0x4df80f=>this[_0x151a3c(0x279)]['_getItemHashesFromString'](JSON[_0x151a3c(0x222)](_0x4df80f[_0x151a3c(0x2c6)])))['flat']()['filter'](_0x373b55=>!_0x4504d5[_0x151a3c(0x23e)](_0x373b55));for(const _0x12aa93 of _0x18062e){const _0x20432b=await Renderer[_0x151a3c(0x19e)][_0x151a3c(0x1fa)](UrlUtil[_0x151a3c(0x1df)],_0x12aa93);if(!_0x20432b)continue;if(_0x20432b['type']==='S'||_0x20432b[_0x151a3c(0x1be)]==='R'||_0x20432b[_0x151a3c(0x2be)])continue;await this[_0x151a3c(0x265)](_0x14cd7c,_0x1a9fdc,_0x20432b,_0xfda100,{'isEquipped':!![]});}}async[_0x2e7eef(0x265)](_0x261634,_0x2864e3,_0x10f803,_0x10d891,_0x1c8983){const _0x67da6a=_0x2e7eef;_0x1c8983=_0x1c8983||{};const _0x84f5c1=await Renderer['item']['pGetFluff'](_0x10f803),_0x575bb4=await DataConverterItem[_0x67da6a(0x15e)](_0x10f803,{'isActorItem':!![],'fluff':_0x84f5c1,'size':_0x261634[_0x67da6a(0x24d)],'isEquipped':_0x1c8983[_0x67da6a(0x2a6)],'dexMod':Parser[_0x67da6a(0x1b2)](_0x261634[_0x67da6a(0x23d)])});_0x10d891[_0x67da6a(0x210)][_0x67da6a(0x1ee)](_0x575bb4);}async[_0x2e7eef(0x2ac)](_0x6d0e45,_0x371dc0,_0x4f40a6,_0x189d6a){const _0x2ac5ff=_0x2e7eef;if(!_0x6d0e45[_0x2ac5ff(0x1a2)])return;const _0x4fe486={},_0x1a8362=_0x289323=>{const _0x88dce8=_0x2ac5ff;Object[_0x88dce8(0x2c6)](_0x289323)[_0x88dce8(0x17a)](([_0x5151de,_0x25e220])=>{_0x4fe486[_0x5151de]=_0x4fe486[_0x5151de]||_0x25e220;});},_0x155078=!![],_0x4dfc77=[];for(const _0x2f29f1 of _0x6d0e45[_0x2ac5ff(0x1a2)]){const _0x168787=MiscUtil[_0x2ac5ff(0x219)](_0x2f29f1);if(_0x168787[_0x2ac5ff(0x216)]){const _0x374319=Object[_0x2ac5ff(0x29c)](_0x168787[_0x2ac5ff(0x216)]);for(const _0xb17705 of _0x374319){const _0xade250=_0x168787['spells'][_0xb17705],_0xa38e23=_0xade250[_0x2ac5ff(0x238)]!=null?_0x2ac5ff(0x1d0):_0x2ac5ff(0x1f2),_0x37de1e=await DataConverterSpell[_0x2ac5ff(0x29f)](_0x189d6a[_0x2ac5ff(0x22e)],JSON[_0x2ac5ff(0x222)](_0xade250['spells']),{'isTemporary':_0x4f40a6,'optsGetSpellItem':{'abilityAbv':_0x189d6a['spellAbility'],'isPrepared':_0x155078,'preparationMode':_0xa38e23}});_0x1a8362(_0x37de1e);}delete _0x168787['spells'];}_0x168787['weekly']&&await this[_0x2ac5ff(0x27e)](_0x189d6a,_0x168787,_0x2ac5ff(0x230),_0x1a8362,{'isTemporary':_0x4f40a6,'isPrepared':_0x155078,'usesPer':_0x2ac5ff(0x2a8)});_0x168787[_0x2ac5ff(0x1d2)]&&await this[_0x2ac5ff(0x27e)](_0x189d6a,_0x168787,_0x2ac5ff(0x1d2),_0x1a8362,{'isTemporary':_0x4f40a6,'isPrepared':_0x155078,'usesPer':_0x2ac5ff(0x207)});_0x168787[_0x2ac5ff(0x1c4)]&&await this['_pImportEntry_pFillItems_pSpellcasting_recharge'](_0x189d6a,_0x168787,'daily',_0x1a8362,{'isTemporary':_0x4f40a6,'isPrepared':_0x155078,'usesPer':'sr'});if(_0x168787[_0x2ac5ff(0x209)]){const _0x3e394b=_0x2ac5ff(0x1c2),_0x47a54c=await DataConverterSpell[_0x2ac5ff(0x29f)](_0x189d6a['actor'],JSON[_0x2ac5ff(0x222)](_0x168787[_0x2ac5ff(0x209)]),{'isTemporary':_0x4f40a6,'optsGetSpellItem':{'abilityAbv':_0x189d6a['spellAbility'],'isPrepared':_0x155078,'preparationMode':_0x3e394b}});_0x1a8362(_0x47a54c),delete _0x168787[_0x2ac5ff(0x209)];}if(_0x168787[_0x2ac5ff(0x1f9)]){const _0x984cbf=_0x2ac5ff(0x1c2),_0x13ccdb=await DataConverterSpell[_0x2ac5ff(0x29f)](_0x189d6a[_0x2ac5ff(0x22e)],JSON[_0x2ac5ff(0x222)](_0x168787['constant']),{'isTemporary':_0x4f40a6,'optsGetSpellItem':{'abilityAbv':_0x189d6a[_0x2ac5ff(0x179)],'isPrepared':_0x155078,'preparationMode':_0x984cbf,'durationAmount':null,'durationUnit':_0x2ac5ff(0x28b)}});_0x1a8362(_0x13ccdb),delete _0x168787['constant'];}_0x4dfc77[_0x2ac5ff(0x1ee)](_0x168787);}await DataConverterSpell[_0x2ac5ff(0x29f)](_0x189d6a['actor'],JSON[_0x2ac5ff(0x222)](_0x4dfc77),{'isTemporary':_0x4f40a6,'hashToIdMap':_0x4fe486,'optsGetSpellItem':{'abilityAbv':_0x189d6a[_0x2ac5ff(0x179)]}});const _0xa444f6=DataConverterSpell[_0x2ac5ff(0x229)]['bind'](null,_0x189d6a[_0x2ac5ff(0x22e)]['id'],_0x4fe486);await DataConverter[_0x2ac5ff(0x2bf)](async()=>{const _0x1ae3d7=_0x2ac5ff;await Renderer[_0x1ae3d7(0x1b7)]()[_0x1ae3d7(0x297)]({'entryType':'link','pluginType':'*','fnPlugin':_0xa444f6,'pFn':async()=>{const _0x56dc92=_0x1ae3d7,_0x1d0423=Renderer['monster']['getSpellcastingRenderedTraits'](Renderer[_0x56dc92(0x1b7)](),_0x6d0e45);for(const _0x3767a1 of _0x1d0423){const _0x547cd8=await DataConverterCreature[_0x56dc92(0x171)](_0x6d0e45,_0x3767a1,_0x189d6a);this[_0x56dc92(0x197)](_0x6d0e45,_0x189d6a,_0x371dc0,_0x3767a1,{'fvttType':'feat','img':_0x547cd8,'description':_0x3767a1[_0x56dc92(0x1d5)]});}}});});}async['_pImportEntry_pFillItems_pSpellcasting_recharge'](_0x80456f,_0x6b94e5,_0x2eaa68,_0x5a9af2,{isTemporary:_0x4fba9c,isPrepared:_0x4fe7d5,usesPer:_0x42dabe}){const _0x5d78a1=_0x2e7eef,_0x18bd5b='innate';for(let _0xeeee6c=0x1;_0xeeee6c<=0x9;++_0xeeee6c){const _0x2d4d24=_0xeeee6c+'e',_0x2d2547=[...(_0x6b94e5[_0x2eaa68]||{})[_0xeeee6c]||[],...(_0x6b94e5[_0x2eaa68]||{})[_0x2d4d24]||[]];if(!_0x2d2547[_0x5d78a1(0x1a9)])continue;const _0x21f0d3=await DataConverterSpell[_0x5d78a1(0x29f)](_0x80456f[_0x5d78a1(0x22e)],JSON[_0x5d78a1(0x222)](_0x2d2547),{'isTemporary':_0x4fba9c,'optsGetSpellItem':{'abilityAbv':_0x80456f[_0x5d78a1(0x179)],'isPrepared':_0x4fe7d5,'preparationMode':_0x18bd5b,'usesCurrent':_0xeeee6c,'usesMax':_0xeeee6c,'usesPer':_0x42dabe}});_0x5a9af2(_0x21f0d3);}delete _0x6b94e5[_0x2eaa68];}static[_0x2e7eef(0x202)](_0x1fc9be){const _0xae20e4=_0x2e7eef;let _0x5273fe=0x0;return _0x1fc9be[_0xae20e4(0x1b3)]&&JSON[_0xae20e4(0x222)](_0x1fc9be[_0xae20e4(0x1b3)])[_0xae20e4(0x1a0)](/an? (\d+)[A-Za-z]+-level/i,(..._0x541531)=>{const _0x49a4e5=Number(_0x541531[0x1]);if(!isNaN(_0x49a4e5))_0x5273fe=_0x49a4e5;}),_0x5273fe;}static[_0x2e7eef(0x1a5)](_0x2e423f){const _0x4d979e=_0x2e7eef;let _0x20b32b='';return _0x2e423f['headerEntries']&&JSON['stringify'](_0x2e423f[_0x4d979e(0x1b3)])['replace'](/(?:^| )(bard|cleric|druid|paladin|ranger|sorcerer|warlock|wizard)(?:\W|$)?/i,(..._0xfd6d73)=>{_0x20b32b=_0xfd6d73[0x1];}),_0x20b32b;}}ImportListCreature[_0x2e7eef(0x29a)]=null,ImportListCreature[_0x2e7eef(0x1a7)]=class extends ImportListActor[_0x2e7eef(0x1a7)]{constructor(_0xfcdfce){const _0x59c6fa=_0x2e7eef;_0xfcdfce=_0xfcdfce||{},super(_0xfcdfce),this[_0x59c6fa(0x191)]=_0xfcdfce[_0x59c6fa(0x191)],this['pb']=Parser[_0x59c6fa(0x1cc)](this[_0x59c6fa(0x191)]['cr']),this[_0x59c6fa(0x21f)]=this['pb'],this[_0x59c6fa(0x1f7)]=DataUtil[_0x59c6fa(0x1e6)][_0x59c6fa(0x1e8)](this[_0x59c6fa(0x191)]),this['spellAbility']='',this[_0x59c6fa(0x2b5)]=0x8,this['spellLevel']=0x0,this['spellClass']='',this[_0x59c6fa(0x2b8)](this['mon']),this[_0x59c6fa(0x161)](this['mon']);}[_0x2e7eef(0x161)](_0x14ec48){const _0x34e169=_0x2e7eef;if(!_0x14ec48[_0x34e169(0x261)])return;_0x14ec48[_0x34e169(0x261)]['forEach'](_0x48cb06=>DataConverterActor[_0x34e169(0x2b3)](_0x14ec48,_0x48cb06,this,{'mode':_0x34e169(0x181),'summonSpellLevel':_0x14ec48[_0x34e169(0x1e1)]??_0x14ec48[_0x34e169(0x224)]}));}[_0x2e7eef(0x2b8)](_0x1d54f4){const _0x22015e=_0x2e7eef;if(!_0x1d54f4['spellcasting'])return;const _0x330f0d=_0x1d54f4[_0x22015e(0x1a2)][_0x22015e(0x1b1)](_0x29f707=>_0x29f707[_0x22015e(0x23c)])[_0x22015e(0x1e4)](_0x438043=>{const _0x439e3e=_0x22015e;if(Parser[_0x439e3e(0x22a)][_0x439e3e(0x2a1)](_0x438043[_0x439e3e(0x23c)]))return _0x438043;const _0xbcaa86=_0x438043[_0x439e3e(0x23c)][_0x439e3e(0x17e)](0x0,0x3);if(Parser[_0x439e3e(0x22a)][_0x439e3e(0x2a1)](_0xbcaa86))return _0x438043[_0x439e3e(0x23c)]=_0xbcaa86,_0x438043;return null;})['filter'](Boolean);if(_0x330f0d['length']){let _0x75d8d9=_0x330f0d[0x0];if(_0x330f0d[_0x22015e(0x1a9)]>0x1)switch(Config[_0x22015e(0x1b7)]('importCreature',_0x22015e(0x2b7))){case 0x1:{_0x75d8d9=_0x330f0d['sort']((_0x499d25,_0x265731)=>{const _0x440ab5=_0x22015e,_0x6ecf42=this[_0x440ab5(0x279)][_0x440ab5(0x245)](_0x499d25),_0xec55a6=this['constructor'][_0x440ab5(0x245)](_0x265731);return SortUtil[_0x440ab5(0x192)](_0xec55a6,_0x6ecf42);})[0x0];break;}case 0x2:{_0x75d8d9=_0x330f0d[_0x22015e(0x167)]((_0x385690,_0x3677fb)=>SortUtil['ascSort'](Parser['getAbilityModNumber'](_0x1d54f4[_0x3677fb['ability']]),Parser[_0x22015e(0x1b2)](_0x1d54f4[_0x385690[_0x22015e(0x23c)]])))[0x0];break;}}const _0x4c5dd5=_0x75d8d9['ability'],_0x3e37ad=Parser[_0x22015e(0x1b2)](_0x1d54f4[_0x4c5dd5]);this[_0x22015e(0x179)]=_0x4c5dd5,this[_0x22015e(0x2b5)]=_0x3e37ad+this['pb'];}this[_0x22015e(0x189)]=_0x1d54f4[_0x22015e(0x1a2)][_0x22015e(0x1e4)](_0x2e009d=>ImportListCreature[_0x22015e(0x202)](_0x2e009d))[_0x22015e(0x198)](Boolean)||0x0,this[_0x22015e(0x248)]=_0x1d54f4[_0x22015e(0x1a2)][_0x22015e(0x1e4)](_0x249495=>ImportListCreature['_getCasterClassFromEntry'](_0x249495))[_0x22015e(0x198)](Boolean)||'';}static[_0x2e7eef(0x245)](_0x5e235e){const _0x2ba7d2=_0x2e7eef;let _0x1d89ab=0x0;return JSON[_0x2ba7d2(0x222)](_0x5e235e)[_0x2ba7d2(0x1a0)](/{@spell [^}]+}/g,()=>{return _0x1d89ab++,'';}),_0x1d89ab;}},ImportListCreature[_0x2e7eef(0x19b)]=class extends Application{constructor(_0x511f75,_0x5943fe,_0x453cf7){const _0x53e04f=_0x2e7eef;super({'title':'Scale\x20and\x20Rename\x20Creatures','template':SharedConsts[_0x53e04f(0x263)]+_0x53e04f(0x234),'width':0x3c0,'height':Util[_0x53e04f(0x1dd)](),'resizable':!![]}),this['_dataList']=_0x511f75,this[_0x53e04f(0x20e)]=_0x5943fe,this[_0x53e04f(0x1c3)]=_0x453cf7['titleSearch'],this[_0x53e04f(0x27f)]=null,this['_$btnReset']=null;}[_0x2e7eef(0x25d)](){const _0x33d383=_0x2e7eef;return{'titleSearch':this[_0x33d383(0x1c3)],'rows':this[_0x33d383(0x2ae)]['map']((_0x4b325b,_0x9d2d53)=>({'name':_0x4b325b[_0x33d383(0x1ec)],'source':_0x4b325b['source'],'sourceShort':Parser[_0x33d383(0x28d)](_0x4b325b[_0x33d383(0x262)]),'sourceLong':Parser[_0x33d383(0x165)](_0x4b325b[_0x33d383(0x262)]),'sourceClassName':Parser[_0x33d383(0x285)](_0x4b325b[_0x33d383(0x262)]),'cr':Parser[_0x33d383(0x203)](_0x4b325b['cr']),'isAdjustableCr':Parser['crToNumber'](_0x4b325b['cr'])<VeCt['CR_CUSTOM'],'isAdjustableSummonSpellLevel':_0x4b325b['_summonedBySpell_levelBase']!=null,'availableSummonSpellLevels':_0x4b325b[_0x33d383(0x224)]!=null?[...Renderer[_0x33d383(0x1e6)]['getSelSummonSpellLevel'](_0x4b325b)[_0x33d383(0x254)]][_0x33d383(0x1e4)](_0x54bbaa=>Number(_0x54bbaa[_0x33d383(0x2c8)]))[_0x33d383(0x1b1)](_0x4ba3c9=>~_0x4ba3c9):null,'ix':_0x9d2d53}))};}['activateListeners'](_0x3c6820){const _0xed0efe=_0x2e7eef;super[_0xed0efe(0x1ea)](_0x3c6820),this['_list']=new List({'$iptSearch':_0x3c6820[_0xed0efe(0x198)]('.search'),'$wrpList':_0x3c6820[_0xed0efe(0x198)]('.veapp__list'),'valueNames':[_0xed0efe(0x1ec),'source','cr','ix']}),SortUtil[_0xed0efe(0x23b)](_0x3c6820[_0xed0efe(0x198)](_0xed0efe(0x298)),this['_list']),this[_0xed0efe(0x27f)][_0xed0efe(0x2a3)](this['_dataList'],{'fnGetName':_0x232ccd=>_0x232ccd['name'],'fnGetValues':_0x37a74a=>({'source':_0x37a74a[_0xed0efe(0x262)],'cr':Parser[_0xed0efe(0x203)](_0x37a74a['cr'])})}),this[_0xed0efe(0x27f)]['init'](),this[_0xed0efe(0x170)]=_0x3c6820['find'](_0xed0efe(0x2b6))[_0xed0efe(0x268)](()=>{const _0x30e8ae=_0xed0efe;_0x3c6820['find'](_0x30e8ae(0x1bc))[_0x30e8ae(0x1d8)]('');if(this['_list'])this[_0x30e8ae(0x27f)][_0x30e8ae(0x1ad)]();}),_0x3c6820[_0xed0efe(0x198)](_0xed0efe(0x1e2))[_0xed0efe(0x268)](async()=>{const _0x4be716=_0xed0efe,_0x1933ba=this['_list']['items'][_0x4be716(0x1e4)](_0x41af04=>{const _0x5db34a=_0x4be716,_0x232bac=$(_0x41af04[_0x5db34a(0x1cb)]),_0x136146=_0x232bac[_0x5db34a(0x198)](_0x5db34a(0x260)),_0x32613c=_0x232bac[_0x5db34a(0x198)]('[name=\x22sel-summon-spell-level\x22]');return{'ix':_0x41af04['ix'],'targetCr':_0x136146['length']?Number(_0x136146[_0x5db34a(0x1d8)]())===-0x1?null:Number(_0x136146[_0x5db34a(0x1d8)]()):null,'targetSpellLevel':_0x32613c[_0x5db34a(0x1a9)]?Number(_0x32613c[_0x5db34a(0x1d8)]())===-0x1?null:Number(_0x32613c[_0x5db34a(0x1d8)]()):null,'rename':_0x232bac[_0x5db34a(0x198)]('[name=\x22ipt-rename\x22]')[_0x5db34a(0x1d8)]()[_0x5db34a(0x289)]()};}),_0x118142=await Promise[_0x4be716(0x287)](_0x1933ba[_0x4be716(0x1e4)](async({ix:_0x1c9c2c,targetCr:_0x55d1cb,targetSpellLevel:_0x2653e1,rename:_0x1b3953})=>{const _0x153ddc=_0x4be716;let _0xfe0a3=this[_0x153ddc(0x2ae)][_0x1c9c2c];if(_0x55d1cb!=null&&_0x55d1cb!==Parser[_0x153ddc(0x241)](_0xfe0a3['cr']))_0xfe0a3=await ScaleCreature[_0x153ddc(0x180)](_0xfe0a3,_0x55d1cb);else{if(_0x2653e1!=null)_0xfe0a3=await ScaleSummonCreature[_0x153ddc(0x180)](_0xfe0a3,_0x2653e1);}if(_0x1b3953)_0xfe0a3=ImportListCreature['ScaleRename']['_getRenamedMon'](_0xfe0a3,_0x1b3953);return _0xfe0a3;}));this[_0x4be716(0x20e)](_0x118142),await this[_0x4be716(0x20b)]();});if(this['_$btnReset'])this[_0xed0efe(0x170)][_0xed0efe(0x268)]();}static[_0x2e7eef(0x25e)](_0x40f64e,_0x1979b2){const _0x49aefc=_0x2e7eef;ImportListCreature[_0x49aefc(0x19b)]['_WALER_RENAME']=ImportListCreature[_0x49aefc(0x19b)][_0x49aefc(0x19d)]||MiscUtil[_0x49aefc(0x1c7)](),_0x40f64e=MiscUtil[_0x49aefc(0x219)](_0x40f64e);const _0x3c0d7d=_0x1979b2[_0x49aefc(0x1a0)](/\\/g,'\x5c\x5c')[_0x49aefc(0x1a0)](/"/g,'\x5c\x22'),_0x2e8992=new RegExp(_0x49aefc(0x1bf)+_0x40f64e[_0x49aefc(0x1ec)][_0x49aefc(0x264)]()+'([^a-zA-Z0-9]|$)','gi'),_0x38d005=_0x130776=>{const _0x287c81=_0x49aefc;_0x40f64e[_0x130776]&&_0x40f64e[_0x130776][_0x287c81(0x17a)](_0x3bc953=>{const _0x56b8c0=_0x287c81;_0x3bc953[_0x56b8c0(0x2c6)]&&(_0x3bc953[_0x56b8c0(0x2c6)]=ImportListCreature[_0x56b8c0(0x19b)][_0x56b8c0(0x19d)][_0x56b8c0(0x240)](_0x3bc953[_0x56b8c0(0x2c6)],{'string':_0x409e77=>_0x409e77['replace'](_0x2e8992,(..._0x3775f0)=>''+_0x3775f0[0x1]+_0x3c0d7d+_0x3775f0[0x2])})),_0x3bc953[_0x56b8c0(0x1b3)]&&(_0x3bc953[_0x56b8c0(0x1b3)]=ImportListCreature[_0x56b8c0(0x19b)][_0x56b8c0(0x19d)][_0x56b8c0(0x240)](_0x3bc953['headerEntries'],{'string':_0x211f33=>_0x211f33[_0x56b8c0(0x1a0)](_0x2e8992,(..._0x52be03)=>''+_0x52be03[0x1]+_0x3c0d7d+_0x52be03[0x2])}));});};return _0x38d005(_0x49aefc(0x261)),_0x38d005(_0x49aefc(0x1ac)),_0x38d005(_0x49aefc(0x18b)),_0x38d005(_0x49aefc(0x1fb)),_0x38d005(_0x49aefc(0x17d)),_0x38d005(_0x49aefc(0x200)),_0x40f64e[_0x49aefc(0x2ab)]=_0x1979b2,_0x40f64e;}async[_0x2e7eef(0x20b)](){const _0x49d36c=_0x2e7eef;return this[_0x49d36c(0x20e)](null),super['close']();}},ImportListCreature[_0x2e7eef(0x19b)][_0x2e7eef(0x19d)]=null;export{ImportListCreature};