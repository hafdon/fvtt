const _0xdc24=['</div>','prepared','_PSI_DURATION_MAP','duration','test','type','</i></p>','feat','min','cost','level','_getPsionicItems_getSaveFromString','<p><i>','(Only\x20one\x20focus\x20may\x20be\x20active\x20at\x20a\x20time)','<div>\x0a\x09\x09\x09\x09\x09\x09\x09','push','isImportDescription','modules/','round','getPsionicItems','/media/icon/brain.svg','get','<br>','getSourceWithPagePart','getBodyText','permissions','_getPsionicItems_getDamageTypeFromString','getTypeOrderString','<div>','getPsionicItem','getNameWithSourcePart','int','name','map','find','render','importPsionic','_getPsionicItems_getActionTypeFromString','stringify','getCleanEntityName','concentration','evo','DMG_TYPES','minute','cantrip','isAddPermission','_getPsionicItems_getTalentItem','entries','setFirstSection','modes','item','_getPsionicItems_getDisciplineFocusItem','toLowerCase','replace','spell','list',')\x20saving\x20throw','exec','action','psionic','none','MODULE_NAME','submodes','max','unit','bonus','focus','slice','filter','join','\x0a\x09\x09\x09\x09\x09\x09\x09','length','\x20-\x20'];(function(_0x4be3fb,_0xdc24a5){const _0x2a38fa=function(_0x39bcf2){while(--_0x39bcf2){_0x4be3fb['push'](_0x4be3fb['shift']());}};_0x2a38fa(++_0xdc24a5);}(_0xdc24,0x1db));const _0x2a38=function(_0x4be3fb,_0xdc24a5){_0x4be3fb=_0x4be3fb-0x0;let _0x2a38fa=_0xdc24[_0x4be3fb];return _0x2a38fa;};const _0x18a0f4=_0x2a38;import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';class DataConverterPsionic{static[_0x18a0f4('0x37')](_0x39bcf2){const _0x1b7be4=_0x18a0f4;return[this[_0x1b7be4('0x9')](_0x39bcf2),this[_0x1b7be4('0xe')](_0x39bcf2),...this['_getPsionicItems_getDisciplineActiveItems'](_0x39bcf2)][_0x1b7be4('0x1f')](Boolean);}static[_0x18a0f4('0x9')](_0x35f41b){const _0xfd55=_0x18a0f4;if(_0x35f41b[_0xfd55('0x29')]!=='T')return null;const _0x1655a9=JSON[_0xfd55('0x1')](_0x35f41b[_0xfd55('0xa')]),_0x4c622f=this['_getPsionicItems_getActionTypeFromString'](_0x1655a9);let _0x10b8d9='',_0xd37076=null;const _0x311232=[];_0x1655a9[_0xfd55('0x10')](/\({@damage ([^}]+)}\)/g,(..._0x5444dd)=>_0x311232[_0xfd55('0x33')](_0x5444dd[0x1]));const _0x913124=/(?:^|[^(]){@dice ([^}]+)}(?:[^)]|$)/[_0xfd55('0x14')](_0x1655a9);if(_0x311232[_0xfd55('0x22')]===0x3){if(_0x913124)_0xd37076=_0x913124[0x1];else _0xd37076=_0x311232[0x0];}if(_0x913124)_0x10b8d9=_0x913124;else{if(_0x311232[_0xfd55('0x22')])_0x10b8d9=_0x311232[0x0];}const _0x5c359b=this['_getPsionicItems_getDamageTypeFromString'](_0x1655a9),_0x471522=_0x10b8d9?[_0x10b8d9,_0x5c359b]['filter'](Boolean):null,_0x5a253c=this[_0xfd55('0x2f')](_0x1655a9);return{'name':UtilApplications[_0xfd55('0x2')](DataConverter['getNameWithSourcePart'](_0x35f41b)),'type':_0xfd55('0x11'),'data':{'source':DataConverter[_0xfd55('0x3b')](_0x35f41b),'description':{'value':Config[_0xfd55('0x39')](_0xfd55('0x48'),_0xfd55('0x34'))?_0xfd55('0x40')+Renderer[_0xfd55('0x16')][_0xfd55('0x3c')](_0x35f41b,Renderer[_0xfd55('0x39')]())+_0xfd55('0x24'):'','chat':'','unidentified':''},'actionType':_0x4c622f,'level':0x0,'school':_0xfd55('0x4'),'components':{'value':'','vocal':![],'somatic':![],'material':![],'ritual':![],'concentration':![]},'materials':{'value':'','consumed':![],'cost':0x0,'supply':0x0},'target':{'value':0x0,'units':'','type':''},'range':{'value':null,'units':'','long':null},'activation':{'type':_0x4c622f,'cost':0x1,'condition':''},'duration':{'value':0x0,'units':''},'damage':{'parts':[_0x471522][_0xfd55('0x1f')](Boolean),'versatile':''},'scaling':{'mode':_0xd37076?_0xfd55('0x7'):_0xfd55('0x17'),'formula':_0xd37076||''},'save':{'ability':_0x5a253c,'dc':null},'ability':'int','uses':{'value':0x0,'max':0x0,'per':''},'attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','preparation':{'mode':_0xfd55('0x25'),'prepared':!![]}},'img':_0xfd55('0x35')+SharedConsts[_0xfd55('0x18')]+_0xfd55('0x38'),'flags':{},'effects':[]};}static[_0x18a0f4('0xe')](_0x54c26f){const _0x5a3107=_0x18a0f4;if(_0x54c26f['type']!=='D')return null;return{'name':UtilApplications[_0x5a3107('0x2')](DataConverter['getNameWithSourcePart'](_0x54c26f,_0x54c26f[_0x5a3107('0x44')]+'\x20-\x20Focus')),'type':_0x5a3107('0x11'),'data':{'source':DataConverter[_0x5a3107('0x3b')](_0x54c26f),'description':{'value':Config[_0x5a3107('0x39')](_0x5a3107('0x48'),_0x5a3107('0x34'))?_0x5a3107('0x40')+Renderer[_0x5a3107('0x39')]()['setFirstSection'](!![])['render']({'entries':[_0x54c26f[_0x5a3107('0x1d')]]})+_0x5a3107('0x24'):'','chat':'','unidentified':''},'actionType':_0x5a3107('0x1c'),'level':0x0,'school':_0x5a3107('0x4'),'components':{'value':'','vocal':![],'somatic':![],'material':![],'ritual':![],'concentration':![]},'materials':{'value':'','consumed':![],'cost':0x0,'supply':0x0},'target':{'value':0x0,'units':'','type':''},'range':{'value':null,'units':'','long':null},'activation':{'type':_0x5a3107('0x1c'),'cost':0x1,'condition':_0x5a3107('0x31')},'duration':{'value':0x0,'units':''},'damage':{'parts':[],'versatile':''},'scaling':{'mode':'none','formula':''},'save':{'ability':null,'dc':null},'ability':_0x5a3107('0x43'),'uses':{'value':0x0,'max':0x0,'per':''},'attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','preparation':{'mode':_0x5a3107('0x25'),'prepared':!![]}},'img':_0x5a3107('0x35')+SharedConsts[_0x5a3107('0x18')]+'/media/icon/brain.svg','flags':{},'effects':[]};}static['_getPsionicItems_getDisciplineActiveItems'](_0x4bc701){const _0x4f983c=_0x18a0f4,_0x5d6e15=_0xa0a614=>{const _0x5e0a85=_0x2a38,_0x2c35a1=_0x4853fb=>_0x4853fb[_0x5e0a85('0x2d')]?'\x20('+(_0x4853fb[_0x5e0a85('0x2d')][_0x5e0a85('0x2c')]===_0x4853fb[_0x5e0a85('0x2d')][_0x5e0a85('0x1a')]?_0x4853fb[_0x5e0a85('0x2d')][_0x5e0a85('0x2c')]:_0x4853fb[_0x5e0a85('0x2d')][_0x5e0a85('0x2c')]+'-'+_0x4853fb[_0x5e0a85('0x2d')][_0x5e0a85('0x1a')])+'psi)':'',_0xe65180=_0x2c35a1(_0xa0a614),_0x3fd707=_0xa0a614[_0x5e0a85('0x19')]?Renderer[_0x5e0a85('0x39')]()[_0x5e0a85('0xb')](!![])['render']({'type':_0x5e0a85('0x12'),'style':'list-hang-notitle','items':_0xa0a614['submodes'][_0x5e0a85('0x45')](_0x36c564=>({'type':_0x5e0a85('0xd'),'name':''+_0x36c564['name']+_0x2c35a1(_0x36c564),'entry':_0x36c564[_0x5e0a85('0xa')][_0x5e0a85('0x20')](_0x5e0a85('0x3a'))}))},0x2):'',_0xa0cc44=JSON[_0x5e0a85('0x1')](_0xa0a614[_0x5e0a85('0xa')]),_0x1d90f1=this[_0x5e0a85('0x0')](_0xa0cc44);let _0xa860e9=null;const _0x5a8424=[],_0x3f7a4b=this[_0x5e0a85('0x3e')](_0xa0cc44);_0xa0cc44[_0x5e0a85('0x10')](/{@(?:scaledice|scaledamage) ([^}]+)}/,(..._0xc8ab83)=>{const _0x1ffc4d=_0x5e0a85,[_0x540e4f,_0x1792c1,_0x5e28d3]=_0xc8ab83[0x1]['split']('|');_0x5a8424[_0x1ffc4d('0x33')](_0x540e4f),_0xa860e9=_0x5e28d3;});!_0x5a8424['length']&&_0xa0cc44[_0x5e0a85('0x10')](/{@damage ([^}]+)}/g,(..._0x519de6)=>_0x5a8424[_0x5e0a85('0x33')](_0x519de6[0x1]));const _0xea042d=_0x5a8424[_0x5e0a85('0x45')](_0x3ec1c5=>[_0x3ec1c5,_0x3f7a4b][_0x5e0a85('0x1f')](Boolean)),_0x55dcb0=this[_0x5e0a85('0x2f')](_0xa0cc44),_0x197709=_0xa0a614[_0x5e0a85('0x2d')]?_0xa0a614[_0x5e0a85('0x2d')]['min']:_0xa0a614['submodes']?MiscUtil['get'](_0xa0a614[_0x5e0a85('0x19')][_0x5e0a85('0x46')](_0x3d13be=>_0x3d13be['cost']),_0x5e0a85('0x2d'),_0x5e0a85('0x2c'))||0x1:0x1,_0x2bb13c=_0xa0a614[_0x5e0a85('0x3')]?_0xa0a614['concentration'][_0x5e0a85('0x27')]:0x0,_0x150fd7=(_0xa0a614[_0x5e0a85('0x3')]?DataConverterPsionic[_0x5e0a85('0x26')][_0xa0a614['concentration'][_0x5e0a85('0x1b')]]:'')||'';return{'name':UtilApplications[_0x5e0a85('0x2')](DataConverter[_0x5e0a85('0x42')](_0x4bc701,_0x4bc701[_0x5e0a85('0x44')]+_0x5e0a85('0x23')+_0xa0a614[_0x5e0a85('0x44')]+_0xe65180)),'type':_0x5e0a85('0x11'),'data':{'source':DataConverter[_0x5e0a85('0x3b')](_0x4bc701),'description':{'value':Config['get'](_0x5e0a85('0x48'),_0x5e0a85('0x34'))?_0x5e0a85('0x32')+Renderer['get']()[_0x5e0a85('0xb')](!![])[_0x5e0a85('0x47')]({'entries':_0xa0a614[_0x5e0a85('0xa')]},0x2)+_0x5e0a85('0x21')+_0x3fd707+'\x0a\x09\x09\x09\x09\x09\x09</div>':'','chat':'','unidentified':''},'actionType':_0x1d90f1,'level':_0x197709,'school':_0x5e0a85('0x4'),'components':{'value':'','vocal':![],'somatic':![],'material':![],'ritual':![],'concentration':!!_0xa0a614[_0x5e0a85('0x3')]},'materials':{'value':'','consumed':![],'cost':0x0,'supply':0x0},'target':{'value':0x0,'units':'','type':''},'range':{'value':null,'units':'','long':null},'activation':{'type':_0x1d90f1,'cost':0x1,'condition':''},'duration':{'value':_0x2bb13c,'units':_0x150fd7},'damage':{'parts':_0xea042d,'versatile':''},'scaling':{'mode':_0xa860e9?_0x5e0a85('0x2e'):_0x5e0a85('0x17'),'formula':_0xa860e9||''},'save':{'ability':_0x55dcb0,'dc':null},'ability':_0x5e0a85('0x43'),'uses':{'value':0x0,'max':0x0,'per':''},'attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','preparation':{'mode':_0x5e0a85('0x25'),'prepared':!![]}},'img':_0x5e0a85('0x35')+SharedConsts[_0x5e0a85('0x18')]+_0x5e0a85('0x38'),'flags':{},'effects':[]};};if(_0x4bc701[_0x4f983c('0x29')]==='T')return[];else return _0x4bc701[_0x4f983c('0xc')][_0x4f983c('0x45')](_0x3a878d=>_0x5d6e15(_0x3a878d));}static['_getPsionicItems_getActionTypeFromString'](_0x598095){const _0x1d6d24=_0x18a0f4,_0x40b7d7=/bonus action/i[_0x1d6d24('0x28')](_0x598095),_0x169b91=/as an action|using your action/i['test'](_0x598095);return _0x40b7d7?'bonus':_0x169b91?_0x1d6d24('0x15'):'';}static[_0x18a0f4('0x3e')](_0x37bdca){const _0x325b24=_0x18a0f4,_0x2b0e5b=Parser[_0x325b24('0x5')][_0x325b24('0x45')](_0x24b1e6=>new RegExp('('+_0x24b1e6+')[^.]+damage','ig')[_0x325b24('0x14')](_0x37bdca)),_0x4e2c25=_0x2b0e5b[_0x325b24('0x1f')](Boolean)[_0x325b24('0x45')](_0x448c22=>_0x448c22[0x1][_0x325b24('0xf')]());return _0x4e2c25[0x0]||null;}static[_0x18a0f4('0x2f')](_0x2b3fd0){const _0x276d42=_0x18a0f4,_0x474aa6=Object['values'](Parser['ATB_ABV_TO_FULL'])['map'](_0x3246bb=>new RegExp('('+_0x3246bb+_0x276d42('0x13'),'ig')['exec'](_0x2b3fd0)),_0x28e77c=_0x474aa6[_0x276d42('0x1f')](Boolean)[_0x276d42('0x45')](_0x305202=>_0x305202[0x1][_0x276d42('0x1e')](0x0,0x3)[_0x276d42('0xf')]());return _0x28e77c[0x0]||null;}static[_0x18a0f4('0x41')](_0x29d6d9,_0x4b2094){const _0x472963=_0x18a0f4;_0x4b2094=_0x4b2094||{};const _0x3ed63f=Renderer['psionic'][_0x472963('0x3f')](_0x29d6d9),_0x2e76e9=_0x472963('0x30')+_0x3ed63f+_0x472963('0x2a')+Renderer[_0x472963('0x16')][_0x472963('0x3c')](_0x29d6d9,Renderer[_0x472963('0x39')]()[_0x472963('0xb')](!![])),_0x1b9689={'name':_0x29d6d9[_0x472963('0x44')],'type':_0x472963('0x2b'),'data':{'description':{'value':Config[_0x472963('0x39')](_0x472963('0x48'),_0x472963('0x34'))?_0x472963('0x40')+_0x2e76e9+_0x472963('0x24'):'','chat':'','unidentified':''},'source':DataConverter[_0x472963('0x3b')](_0x29d6d9),'damage':{'parts':[]},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':0x0,'max':0x0,'per':null},'ability':null,'actionType':'','attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','save':{'ability':'','dc':null},'requirements':'','recharge':{'value':null,'charged':![]}},'flags':{},'effects':[],'img':'modules/'+SharedConsts[_0x472963('0x18')]+'/media/icon/brain.svg'};if(_0x4b2094[_0x472963('0x8')])_0x1b9689['permission']={'default':Config[_0x472963('0x39')](_0x472963('0x48'),_0x472963('0x3d'))};return _0x1b9689;}}DataConverterPsionic[_0x18a0f4('0x26')]={'min':_0x18a0f4('0x6'),'hr':'hour','rnd':_0x18a0f4('0x36')};export{DataConverterPsionic};