const _0x1cc6=['push','Regex','getActorBarAttributes','lightAlpha','_rows','hideVe','[\x22\x27]([^\x22\x27]*?)[\x22\x27]','add','(No\x20update)','visionAngle','isDispositionActive','\x22([^\x22]*?)\x22','isNameParseDoubleQuotes','_getSelectedIds','Task','_pUpdateToken_populateImageUpdate','_pUpdateToken_populateResourcesUpdate','replace','barAttributeCharacter2','click','join','_pUpdateToken_populateDispositionUpdate','lightBright','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','lightOpacity','ascSort','split','lightDim','token','TOKEN.BarValues','_activateListeners_initBtnRun','TOKEN.BarAttributes','getMaxWindowHeight','getPod','bar1','barAttributeNpc2','warn','toku__cb-head','Continue','map','_sidebarTab','get','pRunTasks','Prototype\x20Token\x20Updater\x20Configuration','$getIptInt','close','namePermissions','dimSight','keys','MODULE_LOCATION','isNameParseSingleQuotes','sidebar','i18n','_pUpdateToken','isUseSheetImage','values','forEach','_getAllAvailableActorBarAttributes','character','Updated\x20Not\x20Configured','collection','/template/CollectionTokenUpdater.handlebars','...','entities','brightSight','state','img','Quoted\x20Part\x20or\x20Last\x20Name','visionBright','length','_$btnReset','_pUpdateToken_populateVisionUpdate','(None)','NameUpdateMode','addClass','Last\x20Name','_DEFAULTS','trim','You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','$getSelEnum','barAttributeCharacter1','disposition','_STORAGE_KEY','_activateListeners_initBtnReset','data','[name=\x22btn-set-template\x22]','has','Full\x20Name','_addHookBase','isHasVision','model','error','render','sightAngle','Quoted\x20Part\x20or\x20Full\x20Name','Failed\x20to\x20save!\x20','isNameRegexIgnoreCase','_activateListeners_pInitListAndFilters','exec','nameRegexFormula','bar2','Updating...','/template/CollectionTokenUpdaterTemplate.handlebars','pGetUserBoolean','_pUpdateToken_populateNameUpdate','lightAngle','$getCbBool','_activateListeners_initBtnEditTemplate','isVisionActive','notifications','activate','\x27([^\x27]*?)\x27','Template','activateListeners','Friendly','_activateListeners_pDoLoadAndRender','pSet','collection_token_updater','showVe','name','_$stageNameRegex','$getIptStr','<input\x20class=\x22code\x22\x20type=\x22text\x22>','_pageFilter','pGetState','Quoted\x20Part\x20or\x20First\x20Name','dimLight','update','visionDim','localeCompare','Please\x20select\x20something\x20to\x20update!','Neutral','brightLight','Bulk\x20Prototype\x20Token\x20Editor','type','_list','Cancel','barAttributeNpc1','nameMode','localize','Actor','filter','_collectionName','flat','barPermissions','activateTab','debounce','isResourcesActive','toku__form','_gameProp','npc','<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>','_$stageNameQuotes','find','First\x20Name','pGet'];(function(_0x348273,_0x1cc699){const _0x8935e5=function(_0xa6d88){while(--_0xa6d88){_0x348273['push'](_0x348273['shift']());}};_0x8935e5(++_0x1cc699);}(_0x1cc6,0xd7));const _0x8935=function(_0x348273,_0x1cc699){_0x348273=_0x348273-0x0;let _0x8935e5=_0x1cc6[_0x348273];return _0x8935e5;};const _0x19c404=_0x8935;import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){const _0x4235ae=_0x8935;super({'title':_0x4235ae('0x4a'),'template':SharedConsts[_0x4235ae('0x92')]+_0x4235ae('0x2'),'width':0x3c0,'height':Util[_0x4235ae('0x81')](),'resizable':!![]},'actor'),this[_0x4235ae('0x40')]=new AppFilterBasic(),this[_0x4235ae('0x4c')]=null,this[_0x4235ae('0xb')]=null;}[_0x19c404('0x36')](_0xa6d88){const _0x46e30c=_0x19c404;super['activateListeners'](_0xa6d88),this[_0x46e30c('0x7f')](_0xa6d88),this['_activateListeners_initBtnEditTemplate'](_0xa6d88),this[_0x46e30c('0x18')](_0xa6d88),this[_0x46e30c('0x26')](_0xa6d88);}[_0x19c404('0x7f')](_0x143321){const _0x4f782e=_0x19c404;_0x143321[_0x4f782e('0x5e')]('[name=\x22btn-run\x22]')[_0x4f782e('0x74')](async()=>{const _0x108094=_0x4f782e;if(!this[_0x108094('0x4c')])return;const _0x3b7974=this[_0x108094('0x6e')]();if(!_0x3b7974[_0x108094('0xa')])return ui[_0x108094('0x32')][_0x108094('0x85')](_0x108094('0x47'));const _0x5c3fac=await CollectionTokenUpdater['Template'][_0x108094('0x41')]();if(_0x5c3fac['IS_DEFAULT']){const _0x515d0a=await InputUiUtil[_0x108094('0x2c')]({'title':_0x108094('0x0'),'htmlDescription':_0x108094('0x13'),'textNo':_0x108094('0x4d'),'textYes':_0x108094('0x87')});if(!_0x515d0a)return;}this[_0x108094('0x8e')](),ui[_0x108094('0x94')][_0x108094('0x56')](this[_0x108094('0x89')]);const _0x39c849=_0x3b7974['map'](({id:_0x2bd393,name:_0x9e9045})=>new Util[(_0x108094('0x6f'))](_0x9e9045,()=>this[_0x108094('0x96')](_0x2bd393,_0x5c3fac)));await UtilApplications[_0x108094('0x8b')](_0x39c849,{'titleInitial':_0x108094('0x2a'),'titleComplete':'Update\x20Complete','fnGetRowRunningText':_0x4d1a57=>'Updating\x20'+_0x4d1a57+_0x108094('0x3'),'fnGetRowSuccessText':_0x60e21=>'Updated\x20'+_0x60e21+'.','fnGetRowErrorText':_0x3a1bff=>'Failed\x20to\x20update\x20'+_0x3a1bff+'!\x20'+VeCt['STR_SEE_CONSOLE']}),game[this[_0x108094('0x5a')]][_0x108094('0x21')]();});}[_0x19c404('0x30')](_0x35b726){const _0x36e247=_0x19c404;_0x35b726[_0x36e247('0x5e')](_0x36e247('0x1a'))['click'](()=>{const _0x527dbb=_0x36e247,_0xf1b231=new CollectionTokenUpdater['Template']();_0xf1b231[_0x527dbb('0x21')](!![]);});}['getData'](){const _0x15d8ee=_0x19c404;return this[_0x15d8ee('0x65')]=this[_0x15d8ee('0x65')]=this['_mapEntitiesToRows'](),{...super['getData'](),'titleSearch':this[_0x15d8ee('0x53')]+'s','rows':this[_0x15d8ee('0x65')]};}async[_0x19c404('0x96')](_0x97a916,_0x16a210){const _0x129cad=_0x19c404,_0x269211=Actor['collection'][_0x129cad('0x8a')](_0x97a916);if(!_0x269211)return;const _0x4b370d={};let _0x2fc978=![];_0x2fc978=this[_0x129cad('0x2d')](_0x269211,_0x16a210,_0x4b370d)||_0x2fc978,_0x2fc978=this['_pUpdateToken_populateDispositionUpdate'](_0x269211,_0x16a210,_0x4b370d)||_0x2fc978,_0x2fc978=this['_pUpdateToken_populateImageUpdate'](_0x269211,_0x16a210,_0x4b370d)||_0x2fc978,_0x2fc978=this[_0x129cad('0x71')](_0x269211,_0x16a210,_0x4b370d)||_0x2fc978,_0x2fc978=this[_0x129cad('0xc')](_0x269211,_0x16a210,_0x4b370d)||_0x2fc978;if(!_0x2fc978)return;_0x269211[_0x129cad('0x44')]({'token':_0x4b370d});}[_0x19c404('0x2d')](_0x42e11a,_0x114c3f,_0x193ed9){const _0x43be54=_0x19c404;if(!_0x114c3f['isNameActive'])return![];let _0x1524c3=![];const _0x6bb8ae=()=>_0x42e11a[_0x43be54('0x3c')][_0x43be54('0x7b')]('\x20')[0x0][_0x43be54('0x12')]()[_0x43be54('0x72')](/,;$/,'')[_0x43be54('0x12')](),_0x5a1745=()=>_0x42e11a['name'][_0x43be54('0x7b')]('\x20')['last']()['trim'](),_0x21e8ae=()=>{const _0x237de1=_0x43be54,_0x38fc59=_0x114c3f[_0x237de1('0x6d')]&&_0x114c3f[_0x237de1('0x93')]?_0x237de1('0x67'):_0x114c3f[_0x237de1('0x6d')]?_0x237de1('0x6c'):_0x114c3f[_0x237de1('0x93')]?_0x237de1('0x34'):'^$',_0x5aaf8f=new RegExp(_0x38fc59)[_0x237de1('0x27')](_0x42e11a[_0x237de1('0x3c')]);if(!_0x5aaf8f)return null;return _0x5aaf8f[0x1][_0x237de1('0x12')]();};if(_0x114c3f[_0x43be54('0x4f')]!=null){_0x1524c3=!![];switch(_0x114c3f[_0x43be54('0x4f')]){case _0x43be54('0x1c'):_0x193ed9[_0x43be54('0x3c')]=_0x42e11a[_0x43be54('0x3c')];break;case _0x43be54('0x5f'):_0x193ed9['name']=_0x6bb8ae();break;case _0x43be54('0x10'):_0x193ed9[_0x43be54('0x3c')]=_0x5a1745();break;case _0x43be54('0x23'):{const _0x55f49d=_0x21e8ae();_0x193ed9['name']=_0x55f49d||_0x42e11a[_0x43be54('0x3c')];break;}case _0x43be54('0x42'):{const _0x24c322=_0x21e8ae();_0x193ed9['name']=_0x24c322||_0x6bb8ae();break;}case _0x43be54('0x8'):{const _0x5e8fd2=_0x21e8ae();_0x193ed9['name']=_0x5e8fd2||_0x5a1745();break;}case _0x43be54('0x62'):{const _0x5e8824=new RegExp(_0x114c3f[_0x43be54('0x28')],_0x114c3f[_0x43be54('0x25')]?'i':'')[_0x43be54('0x27')](_0x42e11a[_0x43be54('0x3c')]);if(_0x5e8824)_0x193ed9[_0x43be54('0x3c')]=_0x5e8824[0x1];break;}}}return _0x114c3f[_0x43be54('0x8f')]!=null&&(_0x1524c3=!![],_0x193ed9['displayName']=_0x114c3f[_0x43be54('0x8f')]),_0x1524c3;}[_0x19c404('0x76')](_0x20564e,_0x5ddc47,_0x1f08a2){const _0x4f0693=_0x19c404;if(!_0x5ddc47[_0x4f0693('0x6b')])return![];if(_0x5ddc47[_0x4f0693('0x16')]!=null)return _0x1f08a2[_0x4f0693('0x16')]=_0x5ddc47[_0x4f0693('0x16')],!![];return![];}[_0x19c404('0x70')](_0x15479c,_0x4c42e3,_0x424871){const _0x5b5020=_0x19c404;if(!_0x4c42e3['isImageActive'])return![];if(_0x4c42e3[_0x5b5020('0x97')])return _0x424871[_0x5b5020('0x7')]=_0x15479c['img'],!![];return![];}['_pUpdateToken_populateResourcesUpdate'](_0x4cc9b1,_0x1ace27,_0x763f46){const _0x3b809a=_0x19c404;if(!_0x1ace27[_0x3b809a('0x58')])return![];let _0x25497d=![];return _0x1ace27[_0x3b809a('0x55')]!=null&&(_0x25497d=!![],_0x763f46['displayBars']=_0x1ace27[_0x3b809a('0x55')]),_0x4cc9b1[_0x3b809a('0x19')][_0x3b809a('0x4b')]===_0x3b809a('0x9b')&&(_0x1ace27[_0x3b809a('0x15')]!=null&&(_0x25497d=!![],_0x763f46[_0x3b809a('0x83')]={'attribute':_0x1ace27[_0x3b809a('0x15')]==='(None)'?null:_0x1ace27[_0x3b809a('0x15')]}),_0x1ace27[_0x3b809a('0x73')]!=null&&(_0x25497d=!![],_0x763f46[_0x3b809a('0x29')]={'attribute':_0x1ace27[_0x3b809a('0x73')]==='(None)'?null:_0x1ace27[_0x3b809a('0x73')]})),_0x4cc9b1['data'][_0x3b809a('0x4b')]===_0x3b809a('0x5b')&&(_0x1ace27[_0x3b809a('0x4e')]!=null&&(_0x25497d=!![],_0x763f46[_0x3b809a('0x83')]={'attribute':_0x1ace27[_0x3b809a('0x4e')]===_0x3b809a('0xd')?null:_0x1ace27[_0x3b809a('0x4e')]}),_0x1ace27[_0x3b809a('0x84')]!=null&&(_0x25497d=!![],_0x763f46[_0x3b809a('0x29')]={'attribute':_0x1ace27['barAttributeNpc2']===_0x3b809a('0xd')?null:_0x1ace27[_0x3b809a('0x84')]})),_0x25497d;}[_0x19c404('0xc')](_0x569778,_0x22219d,_0x417c3c){const _0x1b60d2=_0x19c404;if(!_0x22219d[_0x1b60d2('0x31')])return![];let _0x4618e3=![];return _0x22219d['isHasVision']!=null&&(_0x569778['data']['token']['vision']!==_0x22219d['isHasVision']&&(_0x417c3c['vision']=_0x22219d['isHasVision'],_0x4618e3=!![])),_0x22219d['visionDim']!=null&&(_0x569778['data'][_0x1b60d2('0x7d')][_0x1b60d2('0x90')]!==_0x22219d[_0x1b60d2('0x45')]&&(_0x417c3c[_0x1b60d2('0x90')]=_0x22219d[_0x1b60d2('0x45')],_0x4618e3=!![])),_0x22219d['visionBright']!=null&&(_0x569778[_0x1b60d2('0x19')]['token'][_0x1b60d2('0x5')]!==_0x22219d[_0x1b60d2('0x9')]&&(_0x417c3c[_0x1b60d2('0x5')]=_0x22219d[_0x1b60d2('0x9')],_0x4618e3=!![])),_0x22219d[_0x1b60d2('0x6a')]!=null&&(_0x569778[_0x1b60d2('0x19')][_0x1b60d2('0x7d')][_0x1b60d2('0x22')]!==_0x22219d['visionAngle']&&(_0x417c3c[_0x1b60d2('0x22')]=_0x22219d[_0x1b60d2('0x6a')],_0x4618e3=!![])),_0x22219d[_0x1b60d2('0x7c')]!=null&&(_0x569778[_0x1b60d2('0x19')][_0x1b60d2('0x7d')][_0x1b60d2('0x43')]!==_0x22219d[_0x1b60d2('0x7c')]&&(_0x417c3c['dimLight']=_0x22219d[_0x1b60d2('0x7c')],_0x4618e3=!![])),_0x22219d[_0x1b60d2('0x77')]!=null&&(_0x569778[_0x1b60d2('0x19')][_0x1b60d2('0x7d')][_0x1b60d2('0x49')]!==_0x22219d[_0x1b60d2('0x77')]&&(_0x417c3c[_0x1b60d2('0x49')]=_0x22219d[_0x1b60d2('0x77')],_0x4618e3=!![])),_0x22219d[_0x1b60d2('0x2e')]!=null&&(_0x569778[_0x1b60d2('0x19')]['token'][_0x1b60d2('0x2e')]!==_0x22219d['lightAngle']&&(_0x417c3c['lightAngle']=_0x22219d[_0x1b60d2('0x2e')],_0x4618e3=!![])),_0x22219d[_0x1b60d2('0x79')]!=null&&(_0x569778['data']['token'][_0x1b60d2('0x64')]!==_0x22219d['lightOpacity']&&(_0x417c3c[_0x1b60d2('0x64')]=_0x22219d[_0x1b60d2('0x79')],_0x4618e3=!![])),_0x4618e3;}['close'](..._0x4a5182){const _0x2c2195=_0x19c404;super[_0x2c2195('0x8e')](..._0x4a5182),this[_0x2c2195('0x40')]['teardown']();}}CollectionTokenUpdater[_0x19c404('0x35')]=class extends Application{constructor(){const _0x14ea6e=_0x19c404;super({'title':_0x14ea6e('0x8c'),'template':SharedConsts[_0x14ea6e('0x92')]+_0x14ea6e('0x2b'),'width':0x258,'height':0x320,'resizable':!![]});}[_0x19c404('0x36')](_0x22541d){const _0x3f77c7=_0x19c404;_0x22541d['empty'](),this[_0x3f77c7('0x38')](_0x22541d);}static async[_0x19c404('0x41')](){const _0x578cc5=_0x19c404,_0x86b58a=await StorageUtil['pGet'](CollectionTokenUpdater[_0x578cc5('0x35')][_0x578cc5('0x17')]);return _0x86b58a||CollectionTokenUpdater[_0x578cc5('0x35')][_0x578cc5('0x11')];}async['_activateListeners_pDoLoadAndRender'](_0x67ea0b){const _0x4156f9=_0x19c404,_0x4870f4=await StorageUtil[_0x4156f9('0x60')](CollectionTokenUpdater['Template']['_STORAGE_KEY']),_0x27d501=BaseComponent['fromObject'](_0x4870f4||CollectionTokenUpdater[_0x4156f9('0x35')]['_DEFAULTS']),_0x316dbe=_0x27d501[_0x4156f9('0x82')](),_0x229091=()=>{const _0x2fde1f=_0x4156f9,_0x294efb=_0x27d501['toObject']();delete _0x294efb['IS_DEFAULT'],StorageUtil[_0x2fde1f('0x39')](CollectionTokenUpdater[_0x2fde1f('0x35')][_0x2fde1f('0x17')],_0x294efb);},_0x11ea3b=MiscUtil[_0x4156f9('0x57')](_0x229091,0x64);_0x27d501['_addHookAll'](_0x4156f9('0x6'),_0x11ea3b);const _0x10ff27=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,'isNameActive'),_0x24b7dd=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,_0x4156f9('0x6d')),_0x376515=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,'isNameParseSingleQuotes'),_0x3ce838=$$`<div class="flex-v-center toku__row">
			<label class="flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x24b7dd}</label>
			<label class="flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x376515}</label>
		</div>`,_0xa5cef7=ComponentUiUtil[_0x4156f9('0x3e')](_0x27d501,_0x4156f9('0x28'),{'html':_0x4156f9('0x3f')}),_0x1179a9=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,'isNameRegexIgnoreCase'),_0x2a9e6b=$$`<div class="flex-col w=100">
			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0xa5cef7}
			</label>

			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x1179a9}
			</label>
		</div>`,_0x222905=[new CollectionTokenUpdater[(_0x4156f9('0x35'))]['NameUpdateMode'](_0x4156f9('0x1c'),_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater[(_0x4156f9('0x35'))][(_0x4156f9('0xe'))]('First\x20Name',_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater['Template']['NameUpdateMode'](_0x4156f9('0x10'),_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater[(_0x4156f9('0x35'))]['NameUpdateMode'](_0x4156f9('0x23'),_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater[(_0x4156f9('0x35'))]['NameUpdateMode']('Quoted\x20Part\x20or\x20First\x20Name',_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater['Template']['NameUpdateMode'](_0x4156f9('0x8'),_0x3ce838,_0x2a9e6b),new CollectionTokenUpdater[(_0x4156f9('0x35'))][(_0x4156f9('0xe'))](_0x4156f9('0x62'),_0x3ce838,_0x2a9e6b)],_0x5f57f1=ComponentUiUtil[_0x4156f9('0x14')](_0x27d501,_0x4156f9('0x4f'),{'values':_0x222905['map'](_0x620aa0=>_0x620aa0['name']),'isAllowNull':!![],'displayNullAs':_0x4156f9('0x69')}),_0x24a66=()=>{const _0x11c8cb=_0x4156f9,_0x2dea9a=_0x222905[_0x11c8cb('0x5e')](_0x31551c=>_0x316dbe['get'](_0x11c8cb('0x4f'))===_0x31551c[_0x11c8cb('0x3c')]);if(_0x2dea9a)_0x2dea9a[_0x11c8cb('0x33')]();else _0x3ce838['hideVe'](),_0x2a9e6b['hideVe']();};_0x27d501[_0x4156f9('0x1d')](_0x4156f9('0x4f'),_0x24a66),_0x24a66();const _0x26c0f8={};Object['entries'](TOKEN_DISPLAY_MODES)['sort'](([_0x3764b0,_0x188118],[_0x23fbd0,_0x4fe8c0])=>SortUtil[_0x4156f9('0x7a')](_0x188118,_0x4fe8c0))[_0x4156f9('0x99')](([_0x37253c,_0x2ee6d4])=>_0x26c0f8[_0x2ee6d4]=_0x37253c[_0x4156f9('0x7b')]('_')[_0x4156f9('0x88')](_0x29a05a=>_0x29a05a['toTitleCase']())[_0x4156f9('0x75')]('\x20'));const _0x1abaac=ComponentUiUtil[_0x4156f9('0x14')](_0x27d501,_0x4156f9('0x8f'),{'values':Object[_0x4156f9('0x91')](_0x26c0f8),'fnDisplay':_0x134ab9=>_0x26c0f8[_0x134ab9],'isAllowNull':!![],'displayNullAs':_0x4156f9('0x69')}),_0x4c8af7=ComponentUiUtil['$getCbBool'](_0x27d501,'isDispositionActive'),_0x3e39dd=['Hostile',_0x4156f9('0x48'),_0x4156f9('0x37')],_0x5bd4ce=ComponentUiUtil[_0x4156f9('0x14')](_0x27d501,_0x4156f9('0x16'),{'values':[-0x1,0x0,0x1],'fnDisplay':_0x3d398e=>_0x3e39dd[_0x3d398e+0x1],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x16a5fa=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,'isImageActive'),_0x494a22=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,_0x4156f9('0x97')),_0x33a405=ComponentUiUtil['$getCbBool'](_0x27d501,_0x4156f9('0x58')),_0x53ccbb=ComponentUiUtil[_0x4156f9('0x14')](_0x27d501,_0x4156f9('0x55'),{'values':Object[_0x4156f9('0x91')](_0x26c0f8),'fnDisplay':_0x232e5f=>_0x26c0f8[_0x232e5f],'isAllowNull':!![],'displayNullAs':_0x4156f9('0x69')}),_0x17b9a9=CollectionTokenUpdater[_0x4156f9('0x35')][_0x4156f9('0x9a')](_0x4156f9('0x9b')),_0x7be6ac=['(None)',...Object[_0x4156f9('0x98')](_0x17b9a9)[_0x4156f9('0x54')]()],_0x52a991=CollectionTokenUpdater[_0x4156f9('0x35')][_0x4156f9('0x9a')](_0x4156f9('0x5b')),_0x1b1a69=['(None)',...Object[_0x4156f9('0x98')](_0x52a991)[_0x4156f9('0x54')]()],_0xebe97c=ComponentUiUtil['$getSelEnum'](_0x27d501,'barAttributeCharacter1',{'values':_0x7be6ac,'isAllowNull':!![],'displayNullAs':_0x4156f9('0x69')}),_0x10a11a=ComponentUiUtil[_0x4156f9('0x14')](_0x27d501,'barAttributeCharacter2',{'values':_0x7be6ac,'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x70d843=ComponentUiUtil['$getSelEnum'](_0x27d501,_0x4156f9('0x4e'),{'values':_0x1b1a69,'isAllowNull':!![],'displayNullAs':_0x4156f9('0x69')}),_0x5ef34b=ComponentUiUtil['$getSelEnum'](_0x27d501,'barAttributeNpc2',{'values':_0x1b1a69,'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x2c61af=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,'isVisionActive'),_0x42dffb=ComponentUiUtil[_0x4156f9('0x2f')](_0x27d501,_0x4156f9('0x1e')),_0x5a26d7=ComponentUiUtil[_0x4156f9('0x8d')](_0x27d501,_0x4156f9('0x45'),null,{'min':0x0,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x198ed6=ComponentUiUtil[_0x4156f9('0x8d')](_0x27d501,_0x4156f9('0x9'),null,{'min':0x0,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x3ef00b=ComponentUiUtil['$getIptInt'](_0x27d501,_0x4156f9('0x6a'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':'<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>'}),_0x2a8930=ComponentUiUtil['$getIptInt'](_0x27d501,'lightDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x1c5748=ComponentUiUtil[_0x4156f9('0x8d')](_0x27d501,_0x4156f9('0x77'),null,{'min':0x0,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x30432e=ComponentUiUtil['$getIptInt'](_0x27d501,_0x4156f9('0x2e'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x1dce90=ComponentUiUtil['$getIptNumber'](_0x27d501,_0x4156f9('0x79'),null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x4156f9('0x78')}),_0x15b687=$(_0x4156f9('0x5c'))[_0x4156f9('0x74')](async()=>{const _0x491e21=_0x4156f9;try{await _0x229091(),ui[_0x491e21('0x32')]['info']('Saved!');}catch(_0x436b6e){ui[_0x491e21('0x32')][_0x491e21('0x20')](_0x491e21('0x24')+VeCt['STR_SEE_CONSOLE']);throw _0x436b6e;}this['close']();});_0x67ea0b[_0x4156f9('0xf')](_0x4156f9('0x59')),$$(_0x67ea0b)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x10ff27[_0x4156f9('0xf')](_0x4156f9('0x86'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x5f57f1}</label>
			${_0x3ce838}
			${_0x2a9e6b}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0x1abaac}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0x4c8af7[_0x4156f9('0xf')]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x5bd4ce}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x16a5fa[_0x4156f9('0xf')]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Use Sheet Image</div>${_0x494a22}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0x33a405[_0x4156f9('0xf')](_0x4156f9('0x86'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x53ccbb}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0xebe97c}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0x10a11a}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0x70d843}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0x5ef34b}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x2c61af[_0x4156f9('0xf')](_0x4156f9('0x86'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x42dffb}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x5a26d7}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x198ed6}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x3ef00b}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x2a8930}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0x1c5748}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x30432e}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x1dce90}</label>
		</div>

		<div class="mt-auto">
			${_0x15b687}
		</div>
		`;}static[_0x19c404('0x9a')](_0x17cd63){const _0x17bd2f=_0x19c404,_0x47f536=Actor[_0x17bd2f('0x1')][_0x17bd2f('0x4')][_0x17bd2f('0x52')](_0xa3497d=>_0xa3497d[_0x17bd2f('0x19')][_0x17bd2f('0x4b')]===_0x17cd63);_0x47f536[_0x17bd2f('0x61')]({'data':{'data':game['system'][_0x17bd2f('0x1f')][_0x17bd2f('0x51')][_0x17cd63]}});const _0x3b6dac={},_0x2ad92d={},_0xb8a2fa=[game['i18n'][_0x17bd2f('0x50')](_0x17bd2f('0x80')),game[_0x17bd2f('0x95')][_0x17bd2f('0x50')](_0x17bd2f('0x7e'))];return _0x47f536[_0x17bd2f('0x99')](_0x476ea4=>{const _0x5778a1=_0x17bd2f,_0x236291=UtilActors[_0x5778a1('0x63')](_0x476ea4);_0xb8a2fa['forEach'](_0x39788f=>{const _0x279e2a=_0x5778a1;(_0x236291[_0x39788f]||[])[_0x279e2a('0x99')](_0x34cea0=>{const _0x94e8d3=_0x279e2a,_0xcbc1d6=_0x2ad92d[_0x39788f]=_0x2ad92d[_0x39788f]||new Set();if(_0xcbc1d6[_0x94e8d3('0x1b')](_0x34cea0))return;_0xcbc1d6[_0x94e8d3('0x68')](_0x34cea0),(_0x3b6dac[_0x39788f]=_0x3b6dac[_0x39788f]||[])[_0x94e8d3('0x61')](_0x34cea0);});});}),_0xb8a2fa[_0x17bd2f('0x99')](_0x905f65=>{const _0x265d81=_0x17bd2f;(_0x3b6dac[_0x905f65]||[])['sort']((_0x3c262f,_0x26aca1)=>_0x3c262f[_0x265d81('0x46')](_0x26aca1));}),_0x3b6dac;}},CollectionTokenUpdater[_0x19c404('0x35')][_0x19c404('0x17')]=_0x19c404('0x3a'),CollectionTokenUpdater[_0x19c404('0x35')][_0x19c404('0x11')]={'IS_DEFAULT':!![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x19c404('0x35')][_0x19c404('0xe')]=class{constructor(_0x281d3c,_0x4739b5,_0x4edd22){const _0x47d250=_0x19c404;this['name']=_0x281d3c,this[_0x47d250('0x5d')]=_0x4739b5,this['_$stageNameRegex']=_0x4edd22;}[_0x19c404('0x33')](){const _0x174576=_0x19c404;switch(this[_0x174576('0x3c')]){case _0x174576('0x1c'):case'First\x20Name':case'Last\x20Name':this[_0x174576('0x5d')][_0x174576('0x66')](),this[_0x174576('0x3d')]['hideVe']();break;case _0x174576('0x23'):case _0x174576('0x42'):case'Quoted\x20Part\x20or\x20Last\x20Name':this['_$stageNameQuotes']['showVe'](),this[_0x174576('0x3d')]['hideVe']();break;case'Regex':this[_0x174576('0x5d')][_0x174576('0x66')](),this[_0x174576('0x3d')][_0x174576('0x3b')]();break;}}};export{CollectionTokenUpdater};