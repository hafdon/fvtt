const _0x43c8=['[\x22\x27]([^\x22\x27]*?)[\x22\x27]','Last\x20Name','update','_rows','join','sightAngle','collection','visionAngle','_gameProp','addClass','map','click','/template/CollectionTokenUpdater.hbs','last','teardown','225921EakpQD','TOKEN.BarValues','Task','Quoted\x20Part\x20or\x20Last\x20Name','Updated\x20Not\x20Configured','exec','(No\x20update)','[name=\x22btn-run\x22]','STR_SEE_CONSOLE','namePermissions','isDispositionActive','isImageActive','lightBright','Failed\x20to\x20update\x20','Updating\x20','nameRegexFormula','...','_addHookBase','find','fromObject','push','_activateListeners_initBtnReset','sidebar','activateListeners','dimLight','_pUpdateToken_populateResourcesUpdate','lightOpacity','model','IS_DEFAULT','Actor','isNameParseSingleQuotes','<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>','_sidebarTab','i18n','_$stageNameQuotes','Failed\x20to\x20save!\x20','lightAngle','getData','_activateListeners_initBtnRun','TOKEN_DISPLAY_MODES','split','pGet','entries','pGetUserBoolean','empty','lightDim','type','error','Updating...','system','_STORAGE_KEY','pGetState','<input\x20class=\x22code\x22\x20type=\x22text\x22>','pRunTasks','You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','has','dimSight','trim','Template','isVisionActive','lightAlpha','Updated\x20','flat','visionBright','_pUpdateToken_populateDispositionUpdate','Hostile','render','notifications','_pageFilter','state','751826vLYLEE','_getSelectedIds','showVe','Quoted\x20Part\x20or\x20Full\x20Name','978531gWHGyK','getMaxWindowHeight','_pUpdateToken_populateVisionUpdate','pSet','$getSelEnum','brightLight','isHasVision','189033HlOxNE','_DEFAULTS','debounce','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','toTitleCase','_getAllAvailableActorBarAttributes','barAttributeCharacter1','barPermissions','_$stageNameRegex','isNameRegexIgnoreCase','localeCompare','name','isNameActive','_pUpdateToken','NameUpdateMode','Quoted\x20Part\x20or\x20First\x20Name','bar1','First\x20Name','nameMode','_activateListeners_pDoLoadAndRender','bar2','activateTab','Neutral','[name=\x22btn-set-template\x22]','_collectionName','img','localize','toku__cb-head','hideVe','Saved!','_activateListeners_initBtnEditTemplate','barAttributeCharacter2','1YgQNGE','$getCbBool','data','values','142123XCdYjG','barAttributeNpc2','MODULE_LOCATION','Bulk\x20Prototype\x20Token\x20Editor','1625805aeJClM','toObject','isNameParseDoubleQuotes','character','getPod','visionDim','_pUpdateToken_populateImageUpdate','get','Full\x20Name','444681WlIVwA','activate','toku__form','6Hewvsa','isResourcesActive','keys','actor','warn','token','_list','sort','close','Continue','disposition','forEach','$getIptInt','isUseSheetImage','barAttributeNpc1','instance','/template/CollectionTokenUpdaterTemplate.hbs','length','npc','displayName','\x27([^\x27]*?)\x27','Regex','Update\x20Complete','(None)','$getIptStr'];const _0x3e27=function(_0xcd1264,_0x84cd91){_0xcd1264=_0xcd1264-0xbe;let _0x43c851=_0x43c8[_0xcd1264];return _0x43c851;};const _0x4a95cd=_0x3e27;(function(_0x488bb2,_0x479648){const _0x4d6cc7=_0x3e27;while(!![]){try{const _0x3210de=-parseInt(_0x4d6cc7(0x15b))+parseInt(_0x4d6cc7(0xff))+-parseInt(_0x4d6cc7(0x123))*parseInt(_0x4d6cc7(0x133))+-parseInt(_0x4d6cc7(0xf4))+-parseInt(_0x4d6cc7(0x11f))*-parseInt(_0x4d6cc7(0xf8))+-parseInt(_0x4d6cc7(0x130))+parseInt(_0x4d6cc7(0x127));if(_0x3210de===_0x479648)break;else _0x488bb2['push'](_0x488bb2['shift']());}catch(_0x1b09bb){_0x488bb2['push'](_0x488bb2['shift']());}}}(_0x43c8,0x7e83b));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){const _0x525c9f=_0x3e27;super({'title':_0x525c9f(0x126),'template':SharedConsts[_0x525c9f(0x125)]+_0x525c9f(0x158),'width':0x3c0,'height':Util[_0x525c9f(0xf9)](),'resizable':!![]},_0x525c9f(0x136)),this[_0x525c9f(0xf2)]=new AppFilterBasic(),this['_list']=null,this['_$btnReset']=null;}[_0x4a95cd(0xc5)](_0x4ab2f8){const _0x29863a=_0x4a95cd;super['activateListeners'](_0x4ab2f8),this[_0x29863a(0xd4)](_0x4ab2f8),this[_0x29863a(0x11d)](_0x4ab2f8),this[_0x29863a(0xc3)](_0x4ab2f8),this['_activateListeners_pInitListAndFilters'](_0x4ab2f8);}['_activateListeners_initBtnRun'](_0x1de42b){const _0x4265b9=_0x4a95cd;_0x1de42b[_0x4265b9(0xc0)](_0x4265b9(0x162))[_0x4265b9(0x157)](async()=>{const _0x4caf4d=_0x4265b9;if(!this[_0x4caf4d(0x139)])return;const _0x144c33=this[_0x4caf4d(0xf5)]();if(!_0x144c33[_0x4caf4d(0x144)])return ui[_0x4caf4d(0xf1)][_0x4caf4d(0x137)]('Please\x20select\x20something\x20to\x20update!');const _0x970486=await CollectionTokenUpdater[_0x4caf4d(0xe8)]['pGetState']();if(_0x970486[_0x4caf4d(0xca)]){const _0x569c2f=await InputUiUtil[_0x4caf4d(0xd9)]({'title':_0x4caf4d(0x15f),'htmlDescription':_0x4caf4d(0xe4),'textNo':'Cancel','textYes':_0x4caf4d(0x13c)});if(!_0x569c2f)return;}this['close'](),ui[_0x4caf4d(0xc4)][_0x4caf4d(0x114)](this[_0x4caf4d(0xce)]);const _0x9ea59c=_0x144c33[_0x4caf4d(0x156)](({id:_0x5b243c,name:_0x1f44cf})=>new Util[(_0x4caf4d(0x15d))](_0x1f44cf,()=>this[_0x4caf4d(0x10c)](_0x5b243c,_0x970486)));await UtilApplications[_0x4caf4d(0xe3)](_0x9ea59c,{'titleInitial':_0x4caf4d(0xde),'titleComplete':_0x4caf4d(0x149),'fnGetRowRunningText':_0x53786f=>_0x4caf4d(0x169)+_0x53786f+_0x4caf4d(0xbe),'fnGetRowSuccessText':_0x50cfa6=>_0x4caf4d(0xeb)+_0x50cfa6+'.','fnGetRowErrorText':_0x30b58d=>_0x4caf4d(0x168)+_0x30b58d+'!\x20'+VeCt['STR_SEE_CONSOLE']}),game[this[_0x4caf4d(0x154)]]['render']();});}[_0x4a95cd(0x11d)](_0x36036c){const _0x5d24bb=_0x4a95cd;_0x36036c[_0x5d24bb(0xc0)](_0x5d24bb(0x116))[_0x5d24bb(0x157)](()=>{const _0x462ccb=_0x5d24bb,_0x29d3e9=new CollectionTokenUpdater[(_0x462ccb(0xe8))]();_0x29d3e9[_0x462ccb(0xf0)](!![]);});}[_0x4a95cd(0xd3)](){const _0x1d40c4=_0x4a95cd;return this[_0x1d40c4(0x14f)]=this['_rows']=this['_mapEntitiesToRows'](),{...super[_0x1d40c4(0xd3)](),'titleSearch':this[_0x1d40c4(0x117)]+'s','rows':this[_0x1d40c4(0x14f)]};}async[_0x4a95cd(0x10c)](_0x51177a,_0xf0dc9f){const _0x7cec0f=_0x4a95cd,_0x1f8d1a=CONFIG['Actor'][_0x7cec0f(0x152)]['instance'][_0x7cec0f(0x12e)](_0x51177a);if(!_0x1f8d1a)return;const _0x47100a={};let _0x43d088=![];_0x43d088=this['_pUpdateToken_populateNameUpdate'](_0x1f8d1a,_0xf0dc9f,_0x47100a)||_0x43d088,_0x43d088=this[_0x7cec0f(0xee)](_0x1f8d1a,_0xf0dc9f,_0x47100a)||_0x43d088,_0x43d088=this[_0x7cec0f(0x12d)](_0x1f8d1a,_0xf0dc9f,_0x47100a)||_0x43d088,_0x43d088=this[_0x7cec0f(0xc7)](_0x1f8d1a,_0xf0dc9f,_0x47100a)||_0x43d088,_0x43d088=this[_0x7cec0f(0xfa)](_0x1f8d1a,_0xf0dc9f,_0x47100a)||_0x43d088;if(!_0x43d088)return;_0x1f8d1a[_0x7cec0f(0x14e)]({'token':_0x47100a});}['_pUpdateToken_populateNameUpdate'](_0x48ded4,_0x3c27a5,_0x3d820d){const _0x214a40=_0x4a95cd;if(!_0x3c27a5[_0x214a40(0x10b)])return![];let _0x146574=![];const _0x6e1c15=()=>_0x48ded4[_0x214a40(0x10a)][_0x214a40(0xd6)]('\x20')[0x0]['trim']()['replace'](/,;$/,'')['trim'](),_0x5388ec=()=>_0x48ded4['name'][_0x214a40(0xd6)]('\x20')[_0x214a40(0x159)]()['trim'](),_0x4ff698=()=>{const _0x4e8dbf=_0x214a40,_0x398181=_0x3c27a5['isNameParseDoubleQuotes']&&_0x3c27a5[_0x4e8dbf(0xcc)]?_0x4e8dbf(0x14c):_0x3c27a5[_0x4e8dbf(0x129)]?'\x22([^\x22]*?)\x22':_0x3c27a5['isNameParseSingleQuotes']?_0x4e8dbf(0x147):'^$',_0x3b6052=new RegExp(_0x398181)['exec'](_0x48ded4['name']);if(!_0x3b6052)return null;return _0x3b6052[0x1][_0x4e8dbf(0xe7)]();};if(_0x3c27a5[_0x214a40(0x111)]!=null){_0x146574=!![];switch(_0x3c27a5[_0x214a40(0x111)]){case _0x214a40(0x12f):_0x3d820d[_0x214a40(0x10a)]=_0x48ded4[_0x214a40(0x10a)];break;case _0x214a40(0x110):_0x3d820d[_0x214a40(0x10a)]=_0x6e1c15();break;case _0x214a40(0x14d):_0x3d820d[_0x214a40(0x10a)]=_0x5388ec();break;case _0x214a40(0xf7):{const _0x375d63=_0x4ff698();_0x3d820d[_0x214a40(0x10a)]=_0x375d63||_0x48ded4[_0x214a40(0x10a)];break;}case _0x214a40(0x10e):{const _0x1e635e=_0x4ff698();_0x3d820d[_0x214a40(0x10a)]=_0x1e635e||_0x6e1c15();break;}case'Quoted\x20Part\x20or\x20Last\x20Name':{const _0x54631a=_0x4ff698();_0x3d820d[_0x214a40(0x10a)]=_0x54631a||_0x5388ec();break;}case'Regex':{const _0x5c4ff0=new RegExp(_0x3c27a5[_0x214a40(0x16a)],_0x3c27a5[_0x214a40(0x108)]?'i':'')[_0x214a40(0x160)](_0x48ded4[_0x214a40(0x10a)]);if(_0x5c4ff0)_0x3d820d[_0x214a40(0x10a)]=_0x5c4ff0[0x1];break;}}}return _0x3c27a5['namePermissions']!=null&&(_0x146574=!![],_0x3d820d[_0x214a40(0x146)]=_0x3c27a5[_0x214a40(0x164)]),_0x146574;}[_0x4a95cd(0xee)](_0x1c5d14,_0xef68b2,_0x455232){const _0x21b741=_0x4a95cd;if(!_0xef68b2[_0x21b741(0x165)])return![];if(_0xef68b2['disposition']!=null)return _0x455232[_0x21b741(0x13d)]=_0xef68b2[_0x21b741(0x13d)],!![];return![];}[_0x4a95cd(0x12d)](_0x5c15e1,_0x38e140,_0xec0d24){const _0x37e274=_0x4a95cd;if(!_0x38e140[_0x37e274(0x166)])return![];if(_0x38e140['isUseSheetImage'])return _0xec0d24[_0x37e274(0x118)]=_0x5c15e1[_0x37e274(0x118)],!![];return![];}[_0x4a95cd(0xc7)](_0xf43211,_0x1d3304,_0x27d7ba){const _0x2ae976=_0x4a95cd;if(!_0x1d3304[_0x2ae976(0x134)])return![];let _0x222784=![];return _0x1d3304['barPermissions']!=null&&(_0x222784=!![],_0x27d7ba['displayBars']=_0x1d3304[_0x2ae976(0x106)]),_0xf43211['data']['type']===_0x2ae976(0x12a)&&(_0x1d3304[_0x2ae976(0x105)]!=null&&(_0x222784=!![],_0x27d7ba[_0x2ae976(0x10f)]={'attribute':_0x1d3304[_0x2ae976(0x105)]===_0x2ae976(0x14a)?null:_0x1d3304[_0x2ae976(0x105)]}),_0x1d3304[_0x2ae976(0x11e)]!=null&&(_0x222784=!![],_0x27d7ba[_0x2ae976(0x113)]={'attribute':_0x1d3304[_0x2ae976(0x11e)]==='(None)'?null:_0x1d3304['barAttributeCharacter2']})),_0xf43211['data']['type']===_0x2ae976(0x145)&&(_0x1d3304[_0x2ae976(0x141)]!=null&&(_0x222784=!![],_0x27d7ba['bar1']={'attribute':_0x1d3304[_0x2ae976(0x141)]==='(None)'?null:_0x1d3304[_0x2ae976(0x141)]}),_0x1d3304[_0x2ae976(0x124)]!=null&&(_0x222784=!![],_0x27d7ba[_0x2ae976(0x113)]={'attribute':_0x1d3304[_0x2ae976(0x124)]===_0x2ae976(0x14a)?null:_0x1d3304[_0x2ae976(0x124)]})),_0x222784;}[_0x4a95cd(0xfa)](_0x24f096,_0x951f0b,_0x570fca){const _0x5c601d=_0x4a95cd;if(!_0x951f0b[_0x5c601d(0xe9)])return![];let _0x2904a4=![];return _0x951f0b[_0x5c601d(0xfe)]!=null&&(_0x24f096[_0x5c601d(0x121)]['token']['vision']!==_0x951f0b[_0x5c601d(0xfe)]&&(_0x570fca['vision']=_0x951f0b['isHasVision'],_0x2904a4=!![])),_0x951f0b[_0x5c601d(0x12c)]!=null&&(_0x24f096['data'][_0x5c601d(0x138)][_0x5c601d(0xe6)]!==_0x951f0b[_0x5c601d(0x12c)]&&(_0x570fca[_0x5c601d(0xe6)]=_0x951f0b['visionDim'],_0x2904a4=!![])),_0x951f0b[_0x5c601d(0xed)]!=null&&(_0x24f096[_0x5c601d(0x121)]['token']['brightSight']!==_0x951f0b['visionBright']&&(_0x570fca['brightSight']=_0x951f0b[_0x5c601d(0xed)],_0x2904a4=!![])),_0x951f0b[_0x5c601d(0x153)]!=null&&(_0x24f096['data']['token'][_0x5c601d(0x151)]!==_0x951f0b[_0x5c601d(0x153)]&&(_0x570fca[_0x5c601d(0x151)]=_0x951f0b[_0x5c601d(0x153)],_0x2904a4=!![])),_0x951f0b['lightDim']!=null&&(_0x24f096['data']['token']['dimLight']!==_0x951f0b[_0x5c601d(0xdb)]&&(_0x570fca[_0x5c601d(0xc6)]=_0x951f0b['lightDim'],_0x2904a4=!![])),_0x951f0b[_0x5c601d(0x167)]!=null&&(_0x24f096[_0x5c601d(0x121)][_0x5c601d(0x138)][_0x5c601d(0xfd)]!==_0x951f0b[_0x5c601d(0x167)]&&(_0x570fca[_0x5c601d(0xfd)]=_0x951f0b[_0x5c601d(0x167)],_0x2904a4=!![])),_0x951f0b['lightAngle']!=null&&(_0x24f096[_0x5c601d(0x121)]['token'][_0x5c601d(0xd2)]!==_0x951f0b['lightAngle']&&(_0x570fca[_0x5c601d(0xd2)]=_0x951f0b['lightAngle'],_0x2904a4=!![])),_0x951f0b[_0x5c601d(0xc8)]!=null&&(_0x24f096[_0x5c601d(0x121)][_0x5c601d(0x138)][_0x5c601d(0xea)]!==_0x951f0b[_0x5c601d(0xc8)]&&(_0x570fca[_0x5c601d(0xea)]=_0x951f0b[_0x5c601d(0xc8)],_0x2904a4=!![])),_0x2904a4;}['close'](..._0x5f1542){const _0x1fc043=_0x4a95cd;return this[_0x1fc043(0xf2)][_0x1fc043(0x15a)](),super[_0x1fc043(0x13b)](..._0x5f1542);}}CollectionTokenUpdater[_0x4a95cd(0xe8)]=class extends Application{constructor(){const _0x25d3aa=_0x4a95cd;super({'title':'Prototype\x20Token\x20Updater\x20Configuration','template':SharedConsts[_0x25d3aa(0x125)]+_0x25d3aa(0x143),'width':0x258,'height':0x320,'resizable':!![]});}[_0x4a95cd(0xc5)](_0x25475b){const _0x11e8d0=_0x4a95cd;_0x25475b[_0x11e8d0(0xda)](),this[_0x11e8d0(0x112)](_0x25475b);}static async[_0x4a95cd(0xe1)](){const _0x264e4e=_0x4a95cd,_0x1c240c=await StorageUtil[_0x264e4e(0xd7)](CollectionTokenUpdater['Template'][_0x264e4e(0xe0)]);return _0x1c240c||CollectionTokenUpdater['Template'][_0x264e4e(0x100)];}async[_0x4a95cd(0x112)](_0x11f2ca){const _0x280b67=_0x4a95cd,_0x573521=await StorageUtil[_0x280b67(0xd7)](CollectionTokenUpdater[_0x280b67(0xe8)][_0x280b67(0xe0)]),_0x77ff5e=BaseComponent[_0x280b67(0xc1)](_0x573521||CollectionTokenUpdater[_0x280b67(0xe8)][_0x280b67(0x100)]),_0x49831b=_0x77ff5e[_0x280b67(0x12b)](),_0x5a2284=()=>{const _0x2fbab6=_0x280b67,_0x5eef3e=_0x77ff5e[_0x2fbab6(0x128)]();delete _0x5eef3e[_0x2fbab6(0xca)],StorageUtil[_0x2fbab6(0xfb)](CollectionTokenUpdater[_0x2fbab6(0xe8)]['_STORAGE_KEY'],_0x5eef3e);},_0x1bb0ee=MiscUtil[_0x280b67(0x101)](_0x5a2284,0x64);_0x77ff5e['_addHookAll'](_0x280b67(0xf3),_0x1bb0ee);const _0x44825f=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,'isNameActive'),_0x101036=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,'isNameParseDoubleQuotes'),_0x55534a=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0xcc)),_0x3a040d=$$`<div class="flex-v-center toku__row">
			<label class="flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x101036}</label>
			<label class="flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x55534a}</label>
		</div>`,_0x137eb1=ComponentUiUtil[_0x280b67(0x14b)](_0x77ff5e,_0x280b67(0x16a),{'html':_0x280b67(0xe2)}),_0x1c4967=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0x108)),_0x3f641b=$$`<div class="flex-col w=100">
			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0x137eb1}
			</label>

			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x1c4967}
			</label>
		</div>`,_0x14d41d=[new CollectionTokenUpdater['Template'][(_0x280b67(0x10d))](_0x280b67(0x12f),_0x3a040d,_0x3f641b),new CollectionTokenUpdater['Template']['NameUpdateMode']('First\x20Name',_0x3a040d,_0x3f641b),new CollectionTokenUpdater[(_0x280b67(0xe8))]['NameUpdateMode'](_0x280b67(0x14d),_0x3a040d,_0x3f641b),new CollectionTokenUpdater[(_0x280b67(0xe8))][(_0x280b67(0x10d))](_0x280b67(0xf7),_0x3a040d,_0x3f641b),new CollectionTokenUpdater['Template'][(_0x280b67(0x10d))](_0x280b67(0x10e),_0x3a040d,_0x3f641b),new CollectionTokenUpdater[(_0x280b67(0xe8))][(_0x280b67(0x10d))](_0x280b67(0x15e),_0x3a040d,_0x3f641b),new CollectionTokenUpdater[(_0x280b67(0xe8))][(_0x280b67(0x10d))](_0x280b67(0x148),_0x3a040d,_0x3f641b)],_0x407a4b=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,'nameMode',{'values':_0x14d41d['map'](_0x5bbc65=>_0x5bbc65['name']),'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0xf47d0d=()=>{const _0x53ea0a=_0x280b67,_0x39e339=_0x14d41d[_0x53ea0a(0xc0)](_0x41dcf2=>_0x49831b['get'](_0x53ea0a(0x111))===_0x41dcf2[_0x53ea0a(0x10a)]);if(_0x39e339)_0x39e339[_0x53ea0a(0x131)]();else _0x3a040d['hideVe'](),_0x3f641b[_0x53ea0a(0x11b)]();};_0x77ff5e[_0x280b67(0xbf)](_0x280b67(0x111),_0xf47d0d),_0xf47d0d();const _0x408c2c={};Object[_0x280b67(0xd8)](CONST[_0x280b67(0xd5)])['sort'](([_0x220525,_0x3b8417],[_0x1b7b37,_0xe03bbe])=>SortUtil['ascSort'](_0x3b8417,_0xe03bbe))['forEach'](([_0x378a51,_0x1fc0dc])=>_0x408c2c[_0x1fc0dc]=_0x378a51[_0x280b67(0xd6)]('_')[_0x280b67(0x156)](_0x5e7ef5=>_0x5e7ef5[_0x280b67(0x103)]())[_0x280b67(0x150)]('\x20'));const _0x4fa70c=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,'namePermissions',{'values':Object[_0x280b67(0x135)](_0x408c2c),'fnDisplay':_0x3c9ce9=>_0x408c2c[_0x3c9ce9],'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x3b7c5a=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0x165)),_0x2083d6=[_0x280b67(0xef),_0x280b67(0x115),'Friendly'],_0x296319=ComponentUiUtil['$getSelEnum'](_0x77ff5e,'disposition',{'values':[-0x1,0x0,0x1],'fnDisplay':_0x171035=>_0x2083d6[_0x171035+0x1],'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x16b4fb=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0x166)),_0x23cc74=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0x140)),_0x2a96c7=ComponentUiUtil['$getCbBool'](_0x77ff5e,'isResourcesActive'),_0x2f78ff=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,_0x280b67(0x106),{'values':Object[_0x280b67(0x135)](_0x408c2c),'fnDisplay':_0x482499=>_0x408c2c[_0x482499],'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x381f3c=CollectionTokenUpdater[_0x280b67(0xe8)]['_getAllAvailableActorBarAttributes'](_0x280b67(0x12a)),_0xf1f4ad=[_0x280b67(0x14a),...Object[_0x280b67(0x122)](_0x381f3c)[_0x280b67(0xec)]()],_0x183433=CollectionTokenUpdater[_0x280b67(0xe8)][_0x280b67(0x104)]('npc'),_0x4085f1=['(None)',...Object[_0x280b67(0x122)](_0x183433)[_0x280b67(0xec)]()],_0x2bdf23=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,_0x280b67(0x105),{'values':_0xf1f4ad,'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x1485f7=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,_0x280b67(0x11e),{'values':_0xf1f4ad,'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x3102fa=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,_0x280b67(0x141),{'values':_0x4085f1,'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0xae17d4=ComponentUiUtil[_0x280b67(0xfc)](_0x77ff5e,_0x280b67(0x124),{'values':_0x4085f1,'isAllowNull':!![],'displayNullAs':_0x280b67(0x161)}),_0x4afb14=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0xe9)),_0x8bc3f4=ComponentUiUtil[_0x280b67(0x120)](_0x77ff5e,_0x280b67(0xfe)),_0x57ad28=ComponentUiUtil[_0x280b67(0x13f)](_0x77ff5e,'visionDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x420e65=ComponentUiUtil['$getIptInt'](_0x77ff5e,_0x280b67(0xed),null,{'min':0x0,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x497db1=ComponentUiUtil[_0x280b67(0x13f)](_0x77ff5e,'visionAngle',null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x15a2de=ComponentUiUtil[_0x280b67(0x13f)](_0x77ff5e,_0x280b67(0xdb),null,{'min':0x0,'isAllowNull':!![],'html':'<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>'}),_0x45e5be=ComponentUiUtil[_0x280b67(0x13f)](_0x77ff5e,_0x280b67(0x167),null,{'min':0x0,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x219a4a=ComponentUiUtil[_0x280b67(0x13f)](_0x77ff5e,_0x280b67(0xd2),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x22bf5=ComponentUiUtil['$getIptNumber'](_0x77ff5e,_0x280b67(0xc8),null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x280b67(0x102)}),_0x416d4a=$(_0x280b67(0xcd))[_0x280b67(0x157)](async()=>{const _0x1a1c51=_0x280b67;try{await _0x5a2284(),ui[_0x1a1c51(0xf1)]['info'](_0x1a1c51(0x11c));}catch(_0x6e4d73){ui[_0x1a1c51(0xf1)][_0x1a1c51(0xdd)](_0x1a1c51(0xd1)+VeCt[_0x1a1c51(0x163)]);throw _0x6e4d73;}this[_0x1a1c51(0x13b)]();});_0x11f2ca[_0x280b67(0x155)](_0x280b67(0x132)),$$(_0x11f2ca)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x44825f[_0x280b67(0x155)](_0x280b67(0x11a))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x407a4b}</label>
			${_0x3a040d}
			${_0x3f641b}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0x4fa70c}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0x3b7c5a[_0x280b67(0x155)](_0x280b67(0x11a))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x296319}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x16b4fb[_0x280b67(0x155)](_0x280b67(0x11a))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Use Sheet Image</div>${_0x23cc74}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0x2a96c7[_0x280b67(0x155)](_0x280b67(0x11a))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x2f78ff}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0x2bdf23}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0x1485f7}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0x3102fa}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0xae17d4}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x4afb14[_0x280b67(0x155)]('toku__cb-head')}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x8bc3f4}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x57ad28}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x420e65}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x497db1}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x15a2de}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0x45e5be}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x219a4a}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x22bf5}</label>
		</div>

		<div class="mt-auto">
			${_0x416d4a}
		</div>
		`;}static['_getAllAvailableActorBarAttributes'](_0x1f4b73){const _0x507043=_0x4a95cd,_0xad4874=CONFIG[_0x507043(0xcb)]['collection'][_0x507043(0x142)]['contents']['filter'](_0x571cc5=>_0x571cc5[_0x507043(0x121)][_0x507043(0xdc)]===_0x1f4b73);_0xad4874[_0x507043(0xc2)]({'data':{'data':game[_0x507043(0xdf)][_0x507043(0xc9)]['Actor'][_0x1f4b73]}});const _0x4b5aa2={},_0x11bc49={},_0x4ed208=[game['i18n']['localize']('TOKEN.BarAttributes'),game[_0x507043(0xcf)][_0x507043(0x119)](_0x507043(0x15c))];return _0xad4874[_0x507043(0x13e)](_0x5887d0=>{const _0x15c93d=_0x507043,_0x2ab176=UtilActors['getActorBarAttributes'](_0x5887d0);_0x4ed208[_0x15c93d(0x13e)](_0x381640=>{const _0x3b8277=_0x15c93d;(_0x2ab176[_0x381640]||[])[_0x3b8277(0x13e)](_0x5e580a=>{const _0x33111d=_0x3b8277,_0x618fb3=_0x11bc49[_0x381640]=_0x11bc49[_0x381640]||new Set();if(_0x618fb3[_0x33111d(0xe5)](_0x5e580a))return;_0x618fb3['add'](_0x5e580a),(_0x4b5aa2[_0x381640]=_0x4b5aa2[_0x381640]||[])[_0x33111d(0xc2)](_0x5e580a);});});}),_0x4ed208[_0x507043(0x13e)](_0x14a58e=>{const _0x36cea6=_0x507043;(_0x4b5aa2[_0x14a58e]||[])[_0x36cea6(0x13a)]((_0x21c0e2,_0x107344)=>_0x21c0e2[_0x36cea6(0x109)](_0x107344));}),_0x4b5aa2;}},CollectionTokenUpdater['Template'][_0x4a95cd(0xe0)]='collection_token_updater',CollectionTokenUpdater[_0x4a95cd(0xe8)][_0x4a95cd(0x100)]={'IS_DEFAULT':!![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x4a95cd(0xe8)][_0x4a95cd(0x10d)]=class{constructor(_0x1d21d4,_0x21ac9f,_0x51304b){const _0x2272f4=_0x4a95cd;this[_0x2272f4(0x10a)]=_0x1d21d4,this[_0x2272f4(0xd0)]=_0x21ac9f,this[_0x2272f4(0x107)]=_0x51304b;}[_0x4a95cd(0x131)](){const _0x210f69=_0x4a95cd;switch(this[_0x210f69(0x10a)]){case _0x210f69(0x12f):case _0x210f69(0x110):case _0x210f69(0x14d):this[_0x210f69(0xd0)][_0x210f69(0x11b)](),this['_$stageNameRegex'][_0x210f69(0x11b)]();break;case'Quoted\x20Part\x20or\x20Full\x20Name':case _0x210f69(0x10e):case _0x210f69(0x15e):this[_0x210f69(0xd0)][_0x210f69(0xf6)](),this[_0x210f69(0x107)][_0x210f69(0x11b)]();break;case _0x210f69(0x148):this[_0x210f69(0xd0)][_0x210f69(0x11b)](),this[_0x210f69(0x107)][_0x210f69(0xf6)]();break;}}};export{CollectionTokenUpdater};