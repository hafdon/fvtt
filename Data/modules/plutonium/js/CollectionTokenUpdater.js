const _0x2e3e=['img','pRunTasks','localize','_$stageNameQuotes','_DEFAULTS','vision','Actor','NameUpdateMode','filter','trim','nameMode','<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>','data','Neutral','keys','entries','exec','click','flat','$getCbBool','toObject','toku__cb-head','disposition','_pUpdateToken_populateResourcesUpdate','warn','STR_SEE_CONSOLE','lightDim','_pUpdateToken','getData','Continue','_pUpdateToken_populateDispositionUpdate','barAttributeCharacter1','visionBright','Failed\x20to\x20save!\x20','pGet','name','_STORAGE_KEY','fromObject','collection','activate','_activateListeners_initBtnReset','pGetState','lightBright','length','_activateListeners_pDoLoadAndRender','render','IS_DEFAULT','_sidebarTab','barAttributeNpc1','_mapEntitiesToRows','info','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','displayName','\x27([^\x27]*?)\x27','Update\x20Complete','Updating\x20','character','$getSelEnum','activateListeners','Updated\x20Not\x20Configured','i18n','lightAlpha','$getIptStr','pGetUserBoolean','[name=\x22btn-set-template\x22]','_addHookBase','_list','barPermissions','_collectionName','isResourcesActive','dimLight','_pUpdateToken_populateVisionUpdate','Please\x20select\x20something\x20to\x20update!','bar2','empty','isNameRegexIgnoreCase','token','state','close','isVisionActive','isDispositionActive','map','_getSelectedIds','get','addClass','lightAngle','activateTab','npc','namePermissions','_pUpdateToken_populateNameUpdate','push','_rows','Quoted\x20Part\x20or\x20Full\x20Name','isImageActive','isHasVision','_pUpdateToken_populateImageUpdate','values','<input\x20class=\x22code\x22\x20type=\x22text\x22>','visionAngle','barAttributeCharacter2','$getIptInt','_gameProp','ascSort','sidebar','Updating...','Template','add','last','_getAllAvailableActorBarAttributes','type','brightSight','actor','forEach','error','(None)','localeCompare','\x22([^\x22]*?)\x22','lightOpacity','Hostile','isUseSheetImage','toTitleCase','Full\x20Name','getPod','find','model','isNameParseSingleQuotes','(No\x20update)','visionDim','replace','hideVe','debounce','First\x20Name','Failed\x20to\x20update\x20','Quoted\x20Part\x20or\x20First\x20Name','split','_activateListeners_pInitListAndFilters','Updated\x20','update','_$stageNameRegex','_pageFilter','dimSight','TOKEN.BarValues','isNameActive','_activateListeners_initBtnRun','isNameParseDoubleQuotes','barAttributeNpc2','Regex','Quoted\x20Part\x20or\x20Last\x20Name','Last\x20Name','sightAngle','brightLight','Saved!','_activateListeners_initBtnEditTemplate','system','Task','/template/CollectionTokenUpdaterTemplate.handlebars'];(function(_0x42f251,_0x2e3e39){const _0x56c303=function(_0x5d5808){while(--_0x5d5808){_0x42f251['push'](_0x42f251['shift']());}};_0x56c303(++_0x2e3e39);}(_0x2e3e,0x17d));const _0x56c3=function(_0x42f251,_0x2e3e39){_0x42f251=_0x42f251-0x0;let _0x56c303=_0x2e3e[_0x42f251];return _0x56c303;};import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){super({'title':'Bulk\x20Prototype\x20Token\x20Editor','template':SharedConsts['MODULE_LOCATION']+'/template/CollectionTokenUpdater.handlebars','width':0x3c0,'height':Util['getMaxWindowHeight'](),'resizable':!![]},_0x56c3('0x2a')),this['_pageFilter']=new AppFilterBasic(),this['_list']=null,this['_$btnReset']=null;}[_0x56c3('0x91')](_0x4373d1){super[_0x56c3('0x91')](_0x4373d1),this['_activateListeners_initBtnRun'](_0x4373d1),this[_0x56c3('0x53')](_0x4373d1),this[_0x56c3('0x7f')](_0x4373d1),this[_0x56c3('0x42')](_0x4373d1);}[_0x56c3('0x4a')](_0x2d3b4a){_0x2d3b4a[_0x56c3('0x36')]('[name=\x22btn-run\x22]')[_0x56c3('0x68')](async()=>{if(!this[_0x56c3('0x99')])return;const _0x51f8b4=this[_0x56c3('0xd')]();if(!_0x51f8b4[_0x56c3('0x82')])return ui['notifications'][_0x56c3('0x6f')](_0x56c3('0x3'));const _0x58cf49=await CollectionTokenUpdater[_0x56c3('0x24')][_0x56c3('0x80')]();if(_0x58cf49['IS_DEFAULT']){const _0x37ccf2=await InputUiUtil[_0x56c3('0x96')]({'title':_0x56c3('0x92'),'htmlDescription':'You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','textNo':'Cancel','textYes':_0x56c3('0x74')});if(!_0x37ccf2)return;}this[_0x56c3('0x9')](),ui[_0x56c3('0x22')][_0x56c3('0x11')](this[_0x56c3('0x86')]);const _0x4a680c=_0x51f8b4[_0x56c3('0xc')](({id,name})=>new Util[(_0x56c3('0x55'))](name,()=>this['_pUpdateToken'](id,_0x58cf49)));await UtilApplications[_0x56c3('0x58')](_0x4a680c,{'titleInitial':_0x56c3('0x23'),'titleComplete':_0x56c3('0x8d'),'fnGetRowRunningText':_0xdd7e9f=>_0x56c3('0x8e')+_0xdd7e9f+'...','fnGetRowSuccessText':_0x1f8e8b=>_0x56c3('0x43')+_0x1f8e8b+'.','fnGetRowErrorText':_0xbf5130=>_0x56c3('0x3f')+_0xbf5130+'!\x20'+VeCt[_0x56c3('0x70')]}),game[this[_0x56c3('0x20')]][_0x56c3('0x84')]();});}['_activateListeners_initBtnEditTemplate'](_0x403c09){_0x403c09[_0x56c3('0x36')](_0x56c3('0x97'))[_0x56c3('0x68')](()=>{const _0x20d186=new CollectionTokenUpdater[(_0x56c3('0x24'))]();_0x20d186[_0x56c3('0x84')](!![]);});}[_0x56c3('0x73')](){return this[_0x56c3('0x16')]=this[_0x56c3('0x16')]=this[_0x56c3('0x88')](),{...super[_0x56c3('0x73')](),'titleSearch':this[_0x56c3('0x9b')]+'s','rows':this['_rows']};}async[_0x56c3('0x72')](_0x18dc07,_0x13d50f){const _0x4f706b=Actor[_0x56c3('0x7d')][_0x56c3('0xe')](_0x18dc07);if(!_0x4f706b)return;const _0x211a22={};let _0x21cf30=![];_0x21cf30=this['_pUpdateToken_populateNameUpdate'](_0x4f706b,_0x13d50f,_0x211a22)||_0x21cf30,_0x21cf30=this[_0x56c3('0x75')](_0x4f706b,_0x13d50f,_0x211a22)||_0x21cf30,_0x21cf30=this[_0x56c3('0x1a')](_0x4f706b,_0x13d50f,_0x211a22)||_0x21cf30,_0x21cf30=this['_pUpdateToken_populateResourcesUpdate'](_0x4f706b,_0x13d50f,_0x211a22)||_0x21cf30,_0x21cf30=this[_0x56c3('0x2')](_0x4f706b,_0x13d50f,_0x211a22)||_0x21cf30;if(!_0x21cf30)return;_0x4f706b[_0x56c3('0x44')]({'token':_0x211a22});}[_0x56c3('0x14')](_0x198da7,_0x2eaf62,_0x24e153){if(!_0x2eaf62[_0x56c3('0x49')])return![];let _0x2b3c6b=![];const _0x3c777c=()=>_0x198da7[_0x56c3('0x7a')][_0x56c3('0x41')]('\x20')[0x0][_0x56c3('0x60')]()[_0x56c3('0x3b')](/,;$/,'')[_0x56c3('0x60')](),_0x424b0c=()=>_0x198da7[_0x56c3('0x7a')][_0x56c3('0x41')]('\x20')[_0x56c3('0x26')]()[_0x56c3('0x60')](),_0x1232ef=()=>{const _0x102fa9=_0x2eaf62['isNameParseDoubleQuotes']&&_0x2eaf62[_0x56c3('0x38')]?'[\x22\x27]([^\x22\x27]*?)[\x22\x27]':_0x2eaf62['isNameParseDoubleQuotes']?_0x56c3('0x2f'):_0x2eaf62['isNameParseSingleQuotes']?_0x56c3('0x8c'):'^$',_0x45bff8=new RegExp(_0x102fa9)[_0x56c3('0x67')](_0x198da7[_0x56c3('0x7a')]);if(!_0x45bff8)return null;return _0x45bff8[0x1][_0x56c3('0x60')]();};if(_0x2eaf62[_0x56c3('0x61')]!=null){_0x2b3c6b=!![];switch(_0x2eaf62[_0x56c3('0x61')]){case _0x56c3('0x34'):_0x24e153['name']=_0x198da7[_0x56c3('0x7a')];break;case _0x56c3('0x3e'):_0x24e153[_0x56c3('0x7a')]=_0x3c777c();break;case'Last\x20Name':_0x24e153['name']=_0x424b0c();break;case _0x56c3('0x17'):{const _0x3e09b6=_0x1232ef();_0x24e153[_0x56c3('0x7a')]=_0x3e09b6||_0x198da7[_0x56c3('0x7a')];break;}case _0x56c3('0x40'):{const _0x4f070f=_0x1232ef();_0x24e153['name']=_0x4f070f||_0x3c777c();break;}case'Quoted\x20Part\x20or\x20Last\x20Name':{const _0x3d24ff=_0x1232ef();_0x24e153[_0x56c3('0x7a')]=_0x3d24ff||_0x424b0c();break;}case _0x56c3('0x4d'):{const _0x5dbbe8=new RegExp(_0x2eaf62['nameRegexFormula'],_0x2eaf62[_0x56c3('0x6')]?'i':'')[_0x56c3('0x67')](_0x198da7['name']);if(_0x5dbbe8)_0x24e153['name']=_0x5dbbe8[0x1];break;}}}return _0x2eaf62[_0x56c3('0x13')]!=null&&(_0x2b3c6b=!![],_0x24e153[_0x56c3('0x8b')]=_0x2eaf62['namePermissions']),_0x2b3c6b;}[_0x56c3('0x75')](_0x13ac97,_0x58dcb9,_0xc8beec){if(!_0x58dcb9[_0x56c3('0xb')])return![];if(_0x58dcb9['disposition']!=null)return _0xc8beec[_0x56c3('0x6d')]=_0x58dcb9[_0x56c3('0x6d')],!![];return![];}[_0x56c3('0x1a')](_0x2188f6,_0x908ddb,_0x340368){if(!_0x908ddb['isImageActive'])return![];if(_0x908ddb['isUseSheetImage'])return _0x340368['img']=_0x2188f6[_0x56c3('0x57')],!![];return![];}[_0x56c3('0x6e')](_0x3a2906,_0x253c64,_0x199e23){if(!_0x253c64[_0x56c3('0x0')])return![];let _0x56d5ea=![];return _0x253c64[_0x56c3('0x9a')]!=null&&(_0x56d5ea=!![],_0x199e23['displayBars']=_0x253c64[_0x56c3('0x9a')]),_0x3a2906[_0x56c3('0x63')][_0x56c3('0x28')]==='character'&&(_0x253c64[_0x56c3('0x76')]!=null&&(_0x56d5ea=!![],_0x199e23['bar1']={'attribute':_0x253c64[_0x56c3('0x76')]===_0x56c3('0x2d')?null:_0x253c64[_0x56c3('0x76')]}),_0x253c64[_0x56c3('0x1e')]!=null&&(_0x56d5ea=!![],_0x199e23[_0x56c3('0x4')]={'attribute':_0x253c64[_0x56c3('0x1e')]===_0x56c3('0x2d')?null:_0x253c64['barAttributeCharacter2']})),_0x3a2906[_0x56c3('0x63')][_0x56c3('0x28')]===_0x56c3('0x12')&&(_0x253c64[_0x56c3('0x87')]!=null&&(_0x56d5ea=!![],_0x199e23['bar1']={'attribute':_0x253c64[_0x56c3('0x87')]==='(None)'?null:_0x253c64[_0x56c3('0x87')]}),_0x253c64[_0x56c3('0x4c')]!=null&&(_0x56d5ea=!![],_0x199e23[_0x56c3('0x4')]={'attribute':_0x253c64[_0x56c3('0x4c')]===_0x56c3('0x2d')?null:_0x253c64[_0x56c3('0x4c')]})),_0x56d5ea;}[_0x56c3('0x2')](_0x2b7600,_0x2a6ed5,_0x5cef76){if(!_0x2a6ed5[_0x56c3('0xa')])return![];let _0x4a2219=![];return _0x2a6ed5['isHasVision']!=null&&(_0x2b7600[_0x56c3('0x63')]['token'][_0x56c3('0x5c')]!==_0x2a6ed5['isHasVision']&&(_0x5cef76[_0x56c3('0x5c')]=_0x2a6ed5[_0x56c3('0x19')],_0x4a2219=!![])),_0x2a6ed5[_0x56c3('0x3a')]!=null&&(_0x2b7600[_0x56c3('0x63')][_0x56c3('0x7')]['dimSight']!==_0x2a6ed5['visionDim']&&(_0x5cef76[_0x56c3('0x47')]=_0x2a6ed5[_0x56c3('0x3a')],_0x4a2219=!![])),_0x2a6ed5[_0x56c3('0x77')]!=null&&(_0x2b7600[_0x56c3('0x63')][_0x56c3('0x7')][_0x56c3('0x29')]!==_0x2a6ed5[_0x56c3('0x77')]&&(_0x5cef76[_0x56c3('0x29')]=_0x2a6ed5[_0x56c3('0x77')],_0x4a2219=!![])),_0x2a6ed5['visionAngle']!=null&&(_0x2b7600[_0x56c3('0x63')][_0x56c3('0x7')][_0x56c3('0x50')]!==_0x2a6ed5[_0x56c3('0x1d')]&&(_0x5cef76[_0x56c3('0x50')]=_0x2a6ed5[_0x56c3('0x1d')],_0x4a2219=!![])),_0x2a6ed5[_0x56c3('0x71')]!=null&&(_0x2b7600[_0x56c3('0x63')][_0x56c3('0x7')][_0x56c3('0x1')]!==_0x2a6ed5[_0x56c3('0x71')]&&(_0x5cef76['dimLight']=_0x2a6ed5[_0x56c3('0x71')],_0x4a2219=!![])),_0x2a6ed5[_0x56c3('0x81')]!=null&&(_0x2b7600[_0x56c3('0x63')][_0x56c3('0x7')][_0x56c3('0x51')]!==_0x2a6ed5[_0x56c3('0x81')]&&(_0x5cef76['brightLight']=_0x2a6ed5[_0x56c3('0x81')],_0x4a2219=!![])),_0x2a6ed5[_0x56c3('0x10')]!=null&&(_0x2b7600[_0x56c3('0x63')]['token'][_0x56c3('0x10')]!==_0x2a6ed5[_0x56c3('0x10')]&&(_0x5cef76['lightAngle']=_0x2a6ed5[_0x56c3('0x10')],_0x4a2219=!![])),_0x2a6ed5['lightOpacity']!=null&&(_0x2b7600[_0x56c3('0x63')]['token'][_0x56c3('0x94')]!==_0x2a6ed5[_0x56c3('0x30')]&&(_0x5cef76[_0x56c3('0x94')]=_0x2a6ed5[_0x56c3('0x30')],_0x4a2219=!![])),_0x4a2219;}[_0x56c3('0x9')](..._0x57f1ba){super['close'](..._0x57f1ba),this[_0x56c3('0x46')]['teardown']();}}CollectionTokenUpdater[_0x56c3('0x24')]=class extends Application{constructor(){super({'title':'Prototype\x20Token\x20Updater\x20Configuration','template':SharedConsts['MODULE_LOCATION']+_0x56c3('0x56'),'width':0x258,'height':0x320,'resizable':!![]});}[_0x56c3('0x91')](_0x117421){_0x117421[_0x56c3('0x5')](),this[_0x56c3('0x83')](_0x117421);}static async[_0x56c3('0x80')](){const _0x40d55c=await StorageUtil['pGet'](CollectionTokenUpdater['Template'][_0x56c3('0x7b')]);return _0x40d55c||CollectionTokenUpdater[_0x56c3('0x24')][_0x56c3('0x5b')];}async[_0x56c3('0x83')](_0x530452){const _0x3e35cc=await StorageUtil[_0x56c3('0x79')](CollectionTokenUpdater[_0x56c3('0x24')][_0x56c3('0x7b')]),_0x359ef9=BaseComponent[_0x56c3('0x7c')](_0x3e35cc||CollectionTokenUpdater['Template'][_0x56c3('0x5b')]),_0x423ee2=_0x359ef9[_0x56c3('0x35')](),_0x5e350c=()=>{const _0x3b5e48=_0x359ef9[_0x56c3('0x6b')]();delete _0x3b5e48[_0x56c3('0x85')],StorageUtil['pSet'](CollectionTokenUpdater[_0x56c3('0x24')]['_STORAGE_KEY'],_0x3b5e48);},_0x20b0c1=MiscUtil[_0x56c3('0x3d')](_0x5e350c,0x64);_0x359ef9['_addHookAll'](_0x56c3('0x8'),_0x20b0c1);const _0x6bc06a=ComponentUiUtil['$getCbBool'](_0x359ef9,_0x56c3('0x49')),_0x5ef998=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0x4b')),_0x290731=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0x38')),_0x3eb791=$$`<div class="flex-v-center toku__row">
			<label class="flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x5ef998}</label>
			<label class="flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x290731}</label>
		</div>`,_0x305fed=ComponentUiUtil[_0x56c3('0x95')](_0x359ef9,'nameRegexFormula',{'html':_0x56c3('0x1c')}),_0x15cb28=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,'isNameRegexIgnoreCase'),_0x2d25d8=$$`<div class="flex-col w=100">
			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0x305fed}
			</label>

			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x15cb28}
			</label>
		</div>`,_0x363d49=[new CollectionTokenUpdater[(_0x56c3('0x24'))][(_0x56c3('0x5e'))](_0x56c3('0x34'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater[(_0x56c3('0x24'))][(_0x56c3('0x5e'))](_0x56c3('0x3e'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater[(_0x56c3('0x24'))][(_0x56c3('0x5e'))](_0x56c3('0x4f'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater['Template'][(_0x56c3('0x5e'))](_0x56c3('0x17'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater[(_0x56c3('0x24'))][(_0x56c3('0x5e'))](_0x56c3('0x40'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater[(_0x56c3('0x24'))][(_0x56c3('0x5e'))](_0x56c3('0x4e'),_0x3eb791,_0x2d25d8),new CollectionTokenUpdater[(_0x56c3('0x24'))]['NameUpdateMode'](_0x56c3('0x4d'),_0x3eb791,_0x2d25d8)],_0x2e85c4=ComponentUiUtil['$getSelEnum'](_0x359ef9,_0x56c3('0x61'),{'values':_0x363d49[_0x56c3('0xc')](_0x1f8ec1=>_0x1f8ec1['name']),'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x4e026c=()=>{const _0x4ef694=_0x363d49[_0x56c3('0x36')](_0x2d8901=>_0x423ee2[_0x56c3('0xe')](_0x56c3('0x61'))===_0x2d8901[_0x56c3('0x7a')]);if(_0x4ef694)_0x4ef694[_0x56c3('0x7e')]();else _0x3eb791[_0x56c3('0x3c')](),_0x2d25d8['hideVe']();};_0x359ef9[_0x56c3('0x98')](_0x56c3('0x61'),_0x4e026c),_0x4e026c();const _0x25b26d={};Object[_0x56c3('0x66')](TOKEN_DISPLAY_MODES)['sort'](([_0x5e742d,_0xdd3958],[_0x3bbce1,_0x582631])=>SortUtil[_0x56c3('0x21')](_0xdd3958,_0x582631))[_0x56c3('0x2b')](([_0x35470d,_0x9deeec])=>_0x25b26d[_0x9deeec]=_0x35470d['split']('_')['map'](_0x32ce7a=>_0x32ce7a[_0x56c3('0x33')]())['join']('\x20'));const _0x3845cc=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,_0x56c3('0x13'),{'values':Object[_0x56c3('0x65')](_0x25b26d),'fnDisplay':_0x366881=>_0x25b26d[_0x366881],'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x317af7=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0xb')),_0x19b494=[_0x56c3('0x31'),_0x56c3('0x64'),'Friendly'],_0x2d7179=ComponentUiUtil['$getSelEnum'](_0x359ef9,'disposition',{'values':[-0x1,0x0,0x1],'fnDisplay':_0xe910c2=>_0x19b494[_0xe910c2+0x1],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x494da7=ComponentUiUtil['$getCbBool'](_0x359ef9,_0x56c3('0x18')),_0x359832=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0x32')),_0xce5b0c=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0x0')),_0x5710e6=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,_0x56c3('0x9a'),{'values':Object[_0x56c3('0x65')](_0x25b26d),'fnDisplay':_0x25b480=>_0x25b26d[_0x25b480],'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x3fd0b9=CollectionTokenUpdater['Template']['_getAllAvailableActorBarAttributes'](_0x56c3('0x8f')),_0x560bc3=['(None)',...Object[_0x56c3('0x1b')](_0x3fd0b9)['flat']()],_0x1350b5=CollectionTokenUpdater[_0x56c3('0x24')]['_getAllAvailableActorBarAttributes'](_0x56c3('0x12')),_0xf14dfe=[_0x56c3('0x2d'),...Object[_0x56c3('0x1b')](_0x1350b5)[_0x56c3('0x69')]()],_0xb16351=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,'barAttributeCharacter1',{'values':_0x560bc3,'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0xb7a5fc=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,_0x56c3('0x1e'),{'values':_0x560bc3,'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x6a094c=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,'barAttributeNpc1',{'values':_0xf14dfe,'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x115227=ComponentUiUtil[_0x56c3('0x90')](_0x359ef9,_0x56c3('0x4c'),{'values':_0xf14dfe,'isAllowNull':!![],'displayNullAs':_0x56c3('0x39')}),_0x4193ba=ComponentUiUtil['$getCbBool'](_0x359ef9,_0x56c3('0xa')),_0x672bc6=ComponentUiUtil[_0x56c3('0x6a')](_0x359ef9,_0x56c3('0x19')),_0x1c5ca2=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,'visionDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x44740f=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,_0x56c3('0x77'),null,{'min':0x0,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x3e91bc=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,_0x56c3('0x1d'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x106e32=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,_0x56c3('0x71'),null,{'min':0x0,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x3dc577=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,_0x56c3('0x81'),null,{'min':0x0,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x25d579=ComponentUiUtil[_0x56c3('0x1f')](_0x359ef9,_0x56c3('0x10'),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x585701=ComponentUiUtil['$getIptNumber'](_0x359ef9,_0x56c3('0x30'),null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x56c3('0x8a')}),_0x3a8d61=$(_0x56c3('0x62'))[_0x56c3('0x68')](async()=>{try{await _0x5e350c(),ui['notifications'][_0x56c3('0x89')](_0x56c3('0x52'));}catch(_0x32c9e0){ui['notifications'][_0x56c3('0x2c')](_0x56c3('0x78')+VeCt[_0x56c3('0x70')]);throw _0x32c9e0;}this['close']();});_0x530452[_0x56c3('0xf')]('toku__form'),$$(_0x530452)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x6bc06a[_0x56c3('0xf')](_0x56c3('0x6c'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x2e85c4}</label>
			${_0x3eb791}
			${_0x2d25d8}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0x3845cc}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0x317af7[_0x56c3('0xf')](_0x56c3('0x6c'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x2d7179}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x494da7[_0x56c3('0xf')](_0x56c3('0x6c'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Use Sheet Image</div>${_0x359832}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0xce5b0c[_0x56c3('0xf')](_0x56c3('0x6c'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x5710e6}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0xb16351}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0xb7a5fc}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0x6a094c}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0x115227}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x4193ba[_0x56c3('0xf')](_0x56c3('0x6c'))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x672bc6}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x1c5ca2}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x44740f}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x3e91bc}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x106e32}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0x3dc577}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x25d579}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x585701}</label>
		</div>

		<div class="mt-auto">
			${_0x3a8d61}
		</div>
		`;}static[_0x56c3('0x27')](_0x49fa78){const _0x15512d=Actor[_0x56c3('0x7d')]['entities'][_0x56c3('0x5f')](_0x1cf619=>_0x1cf619[_0x56c3('0x63')][_0x56c3('0x28')]===_0x49fa78);_0x15512d['push']({'data':{'data':game[_0x56c3('0x54')][_0x56c3('0x37')][_0x56c3('0x5d')][_0x49fa78]}});const _0x52a65d={},_0x5e170c={},_0x7755b3=[game['i18n'][_0x56c3('0x59')]('TOKEN.BarAttributes'),game[_0x56c3('0x93')][_0x56c3('0x59')](_0x56c3('0x48'))];return _0x15512d[_0x56c3('0x2b')](_0x4025d5=>{const _0x44375f=UtilActors['getActorBarAttributes'](_0x4025d5);_0x7755b3[_0x56c3('0x2b')](_0x48af3d=>{(_0x44375f[_0x48af3d]||[])[_0x56c3('0x2b')](_0x21fd62=>{const _0x17a776=_0x5e170c[_0x48af3d]=_0x5e170c[_0x48af3d]||new Set();if(_0x17a776['has'](_0x21fd62))return;_0x17a776[_0x56c3('0x25')](_0x21fd62),(_0x52a65d[_0x48af3d]=_0x52a65d[_0x48af3d]||[])[_0x56c3('0x15')](_0x21fd62);});});}),_0x7755b3[_0x56c3('0x2b')](_0x1baaf3=>{(_0x52a65d[_0x1baaf3]||[])['sort']((_0x240265,_0x420621)=>_0x240265[_0x56c3('0x2e')](_0x420621));}),_0x52a65d;}},CollectionTokenUpdater[_0x56c3('0x24')][_0x56c3('0x7b')]='collection_token_updater',CollectionTokenUpdater[_0x56c3('0x24')][_0x56c3('0x5b')]={'IS_DEFAULT':!![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x56c3('0x24')]['NameUpdateMode']=class{constructor(_0x35821e,_0x3c7218,_0x151687){this[_0x56c3('0x7a')]=_0x35821e,this[_0x56c3('0x5a')]=_0x3c7218,this[_0x56c3('0x45')]=_0x151687;}['activate'](){switch(this[_0x56c3('0x7a')]){case _0x56c3('0x34'):case'First\x20Name':case _0x56c3('0x4f'):this[_0x56c3('0x5a')][_0x56c3('0x3c')](),this['_$stageNameRegex'][_0x56c3('0x3c')]();break;case _0x56c3('0x17'):case _0x56c3('0x40'):case _0x56c3('0x4e'):this[_0x56c3('0x5a')]['showVe'](),this[_0x56c3('0x45')][_0x56c3('0x3c')]();break;case'Regex':this[_0x56c3('0x5a')]['hideVe'](),this['_$stageNameRegex']['showVe']();break;}}};export{CollectionTokenUpdater};