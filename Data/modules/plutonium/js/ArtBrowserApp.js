const _0x3ced=['artBrowser','\x20-\x20Scenes','replace','p-0','_doCancelPackDownload','dataTransfer','title','_pLoadImage','_jsonDownloadMode','error','\x0a\x09\x09\x09\x09#controls\x20.scene-control[data-control=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09','html','_preInit_addSubmenuButton','get','scale','user','RenderTexture','toBlob','_pGetDownloadModes','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x20mr-1\x22\x20title=\x22Cancel\x20running\x20downloads\x22><span\x20class=\x22fas\x20fa-stop\x22></span></button>','Sprite','670618ILtiYQ','click','artDirectoryPath','#board','warn','_ART_SCENE_CONTROLS_NAME','append','tools','_pCopyImageToLocalViaBackend','_textDownloadMode','NotesLayer','C_ART_IMAGE_MODE_TOKEN','Foundry\x20Assets','_handleInstanceConfigUpdate','_pDoLoadAndPlaceImage','C_ART_IMAGE_MODE_NOTE','_handleConfigUpdate_toggleTileButton','_preInit_getInnerToolMeta','setApplicationTitle','notifications','text','naturalWidth','addEventListener','_BASE_TITLE','buttonDisplay','<span\x20class=\x22fas\x20fa-map\x22></span>','open','socket','_pDownloadPack','MODULE_LOCATION','31dFjOHh','1177Hwcoyt','plutonium__art__hide-main-button','render','1258qWoXoF','application/json','.artr__search','tiles','_activateListeners_pHandleDownloadAssets','dataset','ve-Art','importImagesAs','name','P_GET_BACKEND_VERSION','Unhandled\x20drop\x20mode\x20\x22','path','pHandleButtonClick','height','addClass','.artr__item__lnk-fullsize','remove','notes','find','Drag-Drop\x20Images\x20as\x20Tiles','drop','<span\x20class=\x22fas\x20fa-cubes\x22></span>','draw','set','Hi!\x20You\x20shouldn\x27t\x20be\x20able\x20to\x20click\x20this,\x20something\x20has\x20gone\x20wrong.','C_ART_IMAGE_MODE_TILE','artBrowserCancelDownloadPack','uri','getData','_handleConfigUpdate_toggleNotesButton','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x22\x20title=\x22Open\x20','initialize','close','controls','catch','unshift','<span\x20class=\x22fas\x20fa-bookmark\x22></span>','target','_handleConfigUpdate_toggleMainButton','Error\x20during\x20request\x20(','__bound__handleInstanceConfigUpdate','STR_SEE_CONSOLE','_pCopyImageToLocalViaCorsAnywhere','1173748gUWeRn','_handleCustomDrop','activateListeners','\x0a\x09\x09\x09\x09#controls\x20.scene-control[data-canvas-layer=\x22NotesLayer\x22]\x20.control-tool[data-tool=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09','onload','909760EPBeTa','off','/template/ArtBrowserApp.handlebars','_preInit_addTileButton','<span\x20class=\x22fas\x20fa-user\x22></span>','389MyuuYS','_isDownloadingPack','1189BUyUDb','.webp','type','onerror','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x20mr-1\x22><span\x20class=\x22fas\x20fa-spinner\x22></span></button>','Could\x20not\x20directly\x20load\x20image\x20from\x20','post','TokenLayer','C_ART_IMAGE_MODE_SCENE','artBrowserDownloadPack','_ID_HIDE_MAIN_BUTTON','app','_preInit_addMainButton','_preInit_handleOpenClick','token','round','plutonium__art__hide-notes-button','ve-art__btn-scene','destroy','Config\x20window\x22><span\x20class=\x22fas\x20fa-cogs\x22></span></button>','_INSTANCE','naturalHeight','Drag-Drop\x20Images\x20as\x20Tokens','_ID_HIDE_TILE_BUTTON','373twKNlt','appendTo','then','host','Drag-Drop\x20Images\x20as\x20Notes','status','extract','readyState','bringToFront','_preInit_addTokenButton','init','Art\x20Browser','_URL_CORS_ANYWHERE','isGM','_handleConfigUpdate','last','artBrowserCopyToLocal','_handleConfigUpdate_toggleTokenButton','\x20--\x20falling\x20back\x20on\x20alternate\x20loader:\x20','Failed\x20to\x20load\x20image!','fas\x20fa-palette','plutonium__art__hide-tile-button','_handleConfigUpdate_toggleButton','_$btnCycleImportMode','plutonium__art__hide-token-button','_pPingImage','pInit','create','push','some','\x0a\x09\x09\x09\x09#controls\x20.scene-control[data-canvas-layer=\x22TokenLayer\x22]\x20.control-tool[data-tool=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09','_onClickLayer','getPosCanvasSpace','bind','json','Failed\x20to\x20load\x20image!\x20','body','_ID_HIDE_TOKEN_BUTTON','Plutonium\x20','pct','stringify','\x20-\x20Notes','Drag-Drop\x20Images\x20as\x20Scenes','maximize','1449513sfXOXY','max','.window-content','length','backendEndpoint','isStreamerMode','plutonium.configUpdate','src','progress','split','tokenSize','getMaxWindowHeight','_BLOCKED_HOSTS','send','_ID_HIDE_NOTES_BUTTON'];const _0x459e=function(_0x44ac67,_0x579ac1){_0x44ac67=_0x44ac67-0x180;let _0x3ced4d=_0x3ced[_0x44ac67];return _0x3ced4d;};const _0x4234f6=_0x459e;(function(_0x367b37,_0x4ea585){const _0x18910a=_0x459e;while(!![]){try{const _0x58c1f7=-parseInt(_0x18910a(0x1e0))*-parseInt(_0x18910a(0x1c8))+parseInt(_0x18910a(0x1c1))+parseInt(_0x18910a(0x191))*-parseInt(_0x18910a(0x18d))+-parseInt(_0x18910a(0x18e))*-parseInt(_0x18910a(0x1c6))+-parseInt(_0x18910a(0x20c))+parseInt(_0x18910a(0x1bc))+-parseInt(_0x18910a(0x230));if(_0x58c1f7===_0x4ea585)break;else _0x367b37['push'](_0x367b37['shift']());}catch(_0x5b0a77){_0x367b37['push'](_0x367b37['shift']());}}}(_0x3ced,0xc9981));import{SharedConsts}from'../shared/SharedConsts.js';import{Util,LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilCanvas}from'./UtilCanvas.js';import{ArtBrowser}from'../art-js/ArtBrowser.js';import{UtilApplications}from'./UtilApplications.js';class ArtBrowserApp extends Application{static['preInit'](){Hooks['on']('getSceneControlButtons',_0x15bda1=>{const _0x23f8e3=_0x459e;if(!game[_0x23f8e3(0x22a)][_0x23f8e3(0x1ed)])return;this[_0x23f8e3(0x1d4)](_0x15bda1),this[_0x23f8e3(0x1c4)](_0x15bda1),this[_0x23f8e3(0x1e9)](_0x15bda1),this['_preInit_addNotesButton'](_0x15bda1);});}static['_preInit_handleOpenClick'](){const _0x2acb58=_0x459e;if(ArtBrowserApp[_0x2acb58(0x1dc)]){ArtBrowserApp[_0x2acb58(0x1dc)][_0x2acb58(0x190)](!![]),ArtBrowserApp[_0x2acb58(0x1dc)][_0x2acb58(0x20b)](),UtilApplications[_0x2acb58(0x1e8)](ArtBrowserApp[_0x2acb58(0x1dc)]);return;}ArtBrowserApp[_0x2acb58(0x1dc)]=new ArtBrowserApp(),ArtBrowserApp[_0x2acb58(0x1dc)][_0x2acb58(0x190)](!![]);}static[_0x4234f6(0x1d4)](_0x3f7974){const _0x4b2498=_0x4234f6,_0x288c87=_0x3f7974[_0x4b2498(0x1a3)](_0x1564cf=>_0x1564cf[_0x4b2498(0x199)]===ArtBrowserApp[_0x4b2498(0x235)]);if(_0x288c87)return;_0x3f7974[_0x4b2498(0x1fc)]({'name':ArtBrowserApp['_ART_SCENE_CONTROLS_NAME'],'title':_0x4b2498(0x1eb),'icon':'fas\x20fa-palette','tools':[{'name':ArtBrowserApp[_0x4b2498(0x235)],'title':_0x4b2498(0x1eb),'icon':_0x4b2498(0x1f4),'onClick':()=>ui['notifications']['info'](_0x4b2498(0x1a9)),'button':!![]}],'activeTool':_0x4b2498(0x189)});}static[_0x4234f6(0x180)](_0x535ef6){const _0x5dd406=_0x4234f6;return{'name':ArtBrowserApp[_0x5dd406(0x235)],'title':_0x5dd406(0x1eb),'icon':_0x5dd406(0x1f4),'onClick':()=>{const _0xe64f68=_0x5dd406;Config[_0xe64f68(0x1a8)](_0xe64f68(0x21b),'importImagesAs',_0x535ef6),ArtBrowserApp[_0xe64f68(0x1d5)]();},'button':!![]};}static[_0x4234f6(0x1c4)](_0x318342){const _0xaeba6c=_0x4234f6;this['_preInit_addSubmenuButton'](_0x318342,_0xaeba6c(0x194),Config['C_ART_IMAGE_MODE_TILE']);}static['_preInit_addTokenButton'](_0x1ffd28){const _0x164d26=_0x4234f6;this['_preInit_addSubmenuButton'](_0x1ffd28,_0x164d26(0x1d6),Config[_0x164d26(0x23b)]);}static['_preInit_addNotesButton'](_0x3ee469){const _0x55cc86=_0x4234f6;this[_0x55cc86(0x227)](_0x3ee469,_0x55cc86(0x1a2),Config[_0x55cc86(0x23f)]);}static[_0x4234f6(0x227)](_0x5a6faf,_0x4f4d41,_0x5ab7ec){const _0xa9e311=_0x4234f6,_0x2d4d25=_0x5a6faf[_0xa9e311(0x1a3)](_0x3f9b9a=>_0x3f9b9a[_0xa9e311(0x199)]===_0x4f4d41),_0x1ac2e9=_0x2d4d25[_0xa9e311(0x237)][_0xa9e311(0x1fd)](_0x2db1da=>_0x2db1da[_0xa9e311(0x199)]===ArtBrowserApp[_0xa9e311(0x235)]);if(_0x1ac2e9)return;_0x2d4d25[_0xa9e311(0x237)][_0xa9e311(0x1fc)](this[_0xa9e311(0x180)](_0x5ab7ec));}static async[_0x4234f6(0x18b)](_0x3d2cf4){const _0xbb0dd4=_0x4234f6;await fetch(Config['backendEndpoint'],{'method':_0xbb0dd4(0x1ce),'headers':{'Content-Type':'application/json'},'body':JSON[_0xbb0dd4(0x208)]({'type':_0xbb0dd4(0x1d1),'json':_0x3d2cf4,'directoryPath':Config['get'](_0xbb0dd4(0x21b),_0xbb0dd4(0x232))})});}static[_0x4234f6(0x1ea)](){const _0x1d24c4=_0x4234f6,_0x2a337b=ui[_0x1d24c4(0x1b2)]['_onClickLayer'][_0x1d24c4(0x201)](ui['controls']);ui['controls'][_0x1d24c4(0x1ff)]=function(_0x46bb2a){const _0x25f479=_0x1d24c4;if(_0x46bb2a['currentTarget'][_0x25f479(0x196)]['control']===ArtBrowserApp[_0x25f479(0x235)]){ArtBrowserApp[_0x25f479(0x1d5)]();return;}_0x2a337b(_0x46bb2a);},ui[_0x1d24c4(0x1b2)][_0x1d24c4(0x1b0)](),$(document[_0x1d24c4(0x204)])['on']('dragstart',_0x1d24c4(0x1a0),_0xdbb5ed=>{_0xdbb5ed['stopPropagation']();}),$(_0x1d24c4(0x233))[0x0][_0x1d24c4(0x185)](_0x1d24c4(0x1a5),this[_0x1d24c4(0x1bd)][_0x1d24c4(0x201)](this)),game[_0x1d24c4(0x18a)]['on'](_0x1d24c4(0x214),_0x597811=>{const _0x2d1d64=_0x1d24c4;if(_0x597811[_0x2d1d64(0x1ca)]!=='plutoniumDownloadPackImage')return;if(!ArtBrowserApp[_0x2d1d64(0x1dc)])return;if(!ArtBrowserApp[_0x2d1d64(0x1dc)][_0x2d1d64(0x1c7)])return;SceneNavigation['_onLoadProgress'](_0x597811[_0x2d1d64(0x183)],_0x597811[_0x2d1d64(0x207)]);}),Hooks['on'](_0x1d24c4(0x212),()=>this[_0x1d24c4(0x1ee)]()),this[_0x1d24c4(0x1ee)]();}constructor(){const _0x317d74=_0x4234f6;super({'title':ArtBrowserApp['_BASE_TITLE'],'template':SharedConsts[_0x317d74(0x18c)]+_0x317d74(0x1c3),'height':Util[_0x317d74(0x217)](),'width':Math[_0x317d74(0x20d)](0x30c,Util['getMaxWindowWidth']()/0x2),'resizable':!![]}),this[_0x317d74(0x1c7)]=![],this[_0x317d74(0x1f7)]=null,this[_0x317d74(0x1b9)]=null;}static['_handleConfigUpdate'](){const _0x3eaab6=_0x4234f6;this[_0x3eaab6(0x1f1)](),this[_0x3eaab6(0x240)](),this[_0x3eaab6(0x1ae)](),this[_0x3eaab6(0x1b7)]();}static[_0x4234f6(0x1f6)]({mode:_0x47ccfa,id:_0x32bafc,css:_0x47d4ec}){const _0x3eff1a=_0x4234f6,_0x23e495=Config[_0x3eff1a(0x228)]('artBrowser',_0x3eff1a(0x187)),_0x274f74=$('#'+_0x32bafc);if(_0x23e495[_0x47ccfa])return _0x274f74[_0x3eff1a(0x1a1)]();if(_0x274f74[_0x3eff1a(0x20f)])return;$('<style\x20id=\x22'+_0x32bafc+'\x22>\x0a\x09\x09\x09'+_0x47d4ec+'\x0a\x09\x09</style>')[_0x3eff1a(0x1e1)](document['body']);}static['_handleConfigUpdate_toggleTokenButton'](){const _0x95696b=_0x4234f6;this[_0x95696b(0x1f6)]({'mode':Config[_0x95696b(0x23b)],'id':Config['C_ART_IMAGE_MODE_TOKEN'],'css':_0x95696b(0x1fe)});}static[_0x4234f6(0x240)](){const _0x4af0ad=_0x4234f6;this[_0x4af0ad(0x1f6)]({'mode':Config[_0x4af0ad(0x1aa)],'id':ArtBrowserApp[_0x4af0ad(0x1df)],'css':'\x0a\x09\x09\x09\x09#controls\x20.scene-control[data-canvas-layer=\x22TilesLayer\x22]\x20.control-tool[data-tool=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09\x09}\x0a\x09\x09\x09'});}static[_0x4234f6(0x1ae)](){const _0x4d2fcc=_0x4234f6;this[_0x4d2fcc(0x1f6)]({'mode':Config[_0x4d2fcc(0x23f)],'id':ArtBrowserApp[_0x4d2fcc(0x21a)],'css':_0x4d2fcc(0x1bf)});}static[_0x4234f6(0x1b7)](){const _0x324067=_0x4234f6;this[_0x324067(0x1f6)]({'mode':Config[_0x324067(0x1d0)],'id':ArtBrowserApp[_0x324067(0x1d2)],'css':_0x324067(0x225)});}['_handleInstanceConfigUpdate'](){this['_handleInstanceConfigUpdate_cycleImportModeButton']();}['_handleInstanceConfigUpdate_cycleImportModeButton'](){const _0x296cd4=_0x4234f6,_0xc10ae6=Config['get'](_0x296cd4(0x21b),_0x296cd4(0x198))||0x0;switch(_0xc10ae6){case Config[_0x296cd4(0x23b)]:this[_0x296cd4(0x1f7)][_0x296cd4(0x226)](_0x296cd4(0x1a6))[_0x296cd4(0x221)](_0x296cd4(0x1a4)),UtilApplications[_0x296cd4(0x181)](this,ArtBrowserApp[_0x296cd4(0x186)]+'\x20-\x20Tiles');break;case Config[_0x296cd4(0x1aa)]:this['_$btnCycleImportMode'][_0x296cd4(0x226)](_0x296cd4(0x1c5))[_0x296cd4(0x221)](_0x296cd4(0x1de)),UtilApplications[_0x296cd4(0x181)](this,ArtBrowserApp['_BASE_TITLE']+'\x20-\x20Tokens');break;case Config['C_ART_IMAGE_MODE_NOTE']:this['_$btnCycleImportMode'][_0x296cd4(0x226)](_0x296cd4(0x1b5))['title'](_0x296cd4(0x1e4)),UtilApplications[_0x296cd4(0x181)](this,ArtBrowserApp[_0x296cd4(0x186)]+_0x296cd4(0x209));break;case Config[_0x296cd4(0x1d0)]:this[_0x296cd4(0x1f7)]['html'](_0x296cd4(0x188))[_0x296cd4(0x221)](_0x296cd4(0x20a)),UtilApplications[_0x296cd4(0x181)](this,ArtBrowserApp[_0x296cd4(0x186)]+_0x296cd4(0x21c));break;default:throw new Error(_0x296cd4(0x19b)+_0xc10ae6+'\x22');}}[_0x4234f6(0x1ad)](){return{'owner':!![],'entity':{'name':'Art\x20Browser'}};}[_0x4234f6(0x1be)](_0xd6eb60){const _0x34648d=_0x4234f6,_0x2b3823=this;this[_0x34648d(0x1b9)]=this[_0x34648d(0x23d)][_0x34648d(0x201)](this),Hooks['on'](_0x34648d(0x212),this[_0x34648d(0x1b9)]),_0xd6eb60['closest'](_0x34648d(0x20e))[_0x34648d(0x19f)](_0x34648d(0x21e))[_0x34648d(0x19f)]('artb__window-outer');const _0x1ac56a=new ArtBrowser(_0xd6eb60);_0x1ac56a[_0x34648d(0x22d)]=async function(){const _0x5a9f5a=_0x34648d,_0x1594e5=[this[_0x5a9f5a(0x239)],this[_0x5a9f5a(0x223)]];return await Config[_0x5a9f5a(0x19a)]&&_0x1594e5[_0x5a9f5a(0x1b4)]({'name':_0x5a9f5a(0x23c),'isMultipleFilesOnly':!![],'pDownloadAsMultipleFiles':(_0x346991,_0x45c043,_0x3bfbd2)=>_0x2b3823[_0x5a9f5a(0x195)](_0x346991,_0x45c043,_0x3bfbd2)}),_0x1594e5;},_0x1ac56a[_0x34648d(0x1fa)]()[_0x34648d(0x1e2)](()=>{const _0x1ac8c6=_0x34648d,_0x31a384=_0xd6eb60['find'](_0x1ac8c6(0x193)),_0x18ab03=$(_0x1ac8c6(0x22e))[_0x1ac8c6(0x231)](()=>ArtBrowserApp['_doCancelPackDownload']());this['_$btnCycleImportMode']=$(_0x1ac8c6(0x1cc))[_0x1ac8c6(0x231)](()=>{const _0x2e9306=_0x1ac8c6,_0x124709=Config[_0x2e9306(0x228)]('artBrowser',_0x2e9306(0x198))||0x0,_0x3cf1a1=_0x124709===Config['C_ART_IMAGE_MODE_SCENE']?Config[_0x2e9306(0x23b)]:_0x124709+0x1;Config[_0x2e9306(0x1a8)](_0x2e9306(0x21b),_0x2e9306(0x198),_0x3cf1a1);});const _0x468e52=$(_0x1ac8c6(0x1af)+(Config[_0x1ac8c6(0x228)]('ui',_0x1ac8c6(0x211))?'':_0x1ac8c6(0x206))+_0x1ac8c6(0x1db))['click'](_0x1340ee=>Config[_0x1ac8c6(0x19d)](_0x1340ee,_0x1ac8c6(0x21b)));$$`<div class="flex-v-center h-100">
					<div class="artr__search__divider mx-2"></div>
					<div class="flex-v-center">${_0x18ab03}</div>
					<div class="flex-v-center">${this['_$btnCycleImportMode']}</div>
					<div class="flex-v-center">${_0x468e52}</div>
				</div>`[_0x1ac8c6(0x1e1)](_0x31a384),this['__bound__handleInstanceConfigUpdate']();});}static async[_0x4234f6(0x21f)](){const _0xb473d9=_0x4234f6;await fetch(Config[_0xb473d9(0x210)],{'method':_0xb473d9(0x1ce),'headers':{'Content-Type':'application/json'},'body':JSON[_0xb473d9(0x208)]({'type':_0xb473d9(0x1ab)})});}async[_0x4234f6(0x195)](_0x48b932,_0x3e3106,_0x2bb48f){const _0x1361b8=_0x4234f6;try{ArtBrowserApp[_0x1361b8(0x1dc)][_0x1361b8(0x1c7)]=!![],await ArtBrowserApp[_0x1361b8(0x18b)](_0x48b932);}catch(_0x2c1216){ArtBrowserApp[_0x1361b8(0x1dc)][_0x1361b8(0x1c7)]=![];}_0x3e3106+0x1===_0x2bb48f&&(ArtBrowserApp[_0x1361b8(0x1dc)][_0x1361b8(0x1c7)]=![],ui[_0x1361b8(0x182)]['info']('Download\x20complete!\x20Images\x20will\x20be\x20available\x20in\x20your\x20\x22User\x20Data\x22\x20directory.'));}static[_0x4234f6(0x1bd)](_0xd097c2){const _0x4fd4d3=_0x4234f6;let _0x4713bf;try{const _0x28075a=_0xd097c2[_0x4fd4d3(0x220)]['getData'](_0x4fd4d3(0x192));if(!_0x28075a)return;_0x4713bf=JSON['parse'](_0x28075a);}catch(_0xa12ddf){ui[_0x4fd4d3(0x182)][_0x4fd4d3(0x224)](_0x4fd4d3(0x203)+VeCt[_0x4fd4d3(0x1ba)]),setTimeout(()=>{throw _0xa12ddf;});}if(!_0x4713bf||_0x4713bf[_0x4fd4d3(0x1ca)]!==_0x4fd4d3(0x197))return;return this[_0x4fd4d3(0x23e)](_0xd097c2,_0x4713bf)[_0x4fd4d3(0x1b3)](_0x5e67a2=>{const _0x463454=_0x4fd4d3;ui[_0x463454(0x182)]['error']('Failed\x20to\x20load\x20image!\x20'+VeCt[_0x463454(0x1ba)]),setTimeout(()=>{throw _0x5e67a2;});}),![];}static async['_pDoLoadAndPlaceImage'](_0x3f1278,_0x2eb027){const _0x3eecd9=_0x4234f6,_0x5f4325=Config[_0x3eecd9(0x228)](_0x3eecd9(0x21b),_0x3eecd9(0x198))||0x0;let _0x58b2a6=_0x2eb027[_0x3eecd9(0x1ac)],_0x54f100,_0x8b6bbc,_0x154323;if(await this[_0x3eecd9(0x1f9)](_0x58b2a6))_0x54f100=await this[_0x3eecd9(0x222)](_0x58b2a6);else{const _0x505508=await Config['P_GET_BACKEND_VERSION'];console[_0x3eecd9(0x234)](...LGT,_0x3eecd9(0x1cd)+_0x58b2a6+_0x3eecd9(0x1f2)+(_0x505508?'backend\x20mod':'CORS\x20Anywhere\x20(remote\x20server)')+'.');try{if(_0x505508){const {url:_0x44bf70,image:_0x2ec0a0}=await this['_pLoadImageViaBackend'](_0x58b2a6);_0x58b2a6=_0x44bf70,_0x54f100=_0x2ec0a0;}else{const {url:_0x454508,image:_0x2a8446}=await this['_pLoadImageViaCorsAnywhere'](_0x58b2a6);_0x58b2a6=_0x454508,_0x54f100=_0x2a8446;}}catch(_0x12d6f9){console[_0x3eecd9(0x224)](...LGT,_0x3eecd9(0x1f3),_0x12d6f9),ui[_0x3eecd9(0x182)][_0x3eecd9(0x224)](_0x3eecd9(0x203)+VeCt['STR_SEE_CONSOLE']);return;}}const _0xb9a8c0=()=>{const _0x319a5a=_0x3eecd9;let _0x1bf973=_0x58b2a6['split']('/')[_0x319a5a(0x1ef)]();try{_0x1bf973=decodeURIComponent(_0x1bf973),_0x1bf973=_0x1bf973['split']('.')[0x0],_0x1bf973=_0x1bf973[_0x319a5a(0x21d)](/_/g,'\x20')[_0x319a5a(0x21d)](/\s+/g,'\x20')[_0x319a5a(0x21d)](/\d+\s*[xX*]\s*\d+/g,'');}catch(_0x2c1116){}return _0x1bf973;};_0x8b6bbc=_0x54f100[_0x3eecd9(0x184)],_0x154323=_0x54f100[_0x3eecd9(0x1dd)];let _0x2cd503=Config[_0x3eecd9(0x228)](_0x3eecd9(0x21b),_0x3eecd9(0x229));switch(_0x5f4325){case Config['C_ART_IMAGE_MODE_TOKEN']:{const _0x39a4b1=UtilCanvas[_0x3eecd9(0x200)](_0x3f1278,'TilesLayer');Tile[_0x3eecd9(0x1fb)]({'img':encodeURL(_0x58b2a6),'width':Math['round'](_0x8b6bbc*_0x2cd503),'height':Math[_0x3eecd9(0x1d7)](_0x154323*_0x2cd503),'hidden':![],'scale':_0x2cd503,'x':_0x39a4b1['x'],'y':_0x39a4b1['y']});break;}case Config[_0x3eecd9(0x1aa)]:{const _0x34b2af=UtilCanvas['getPosCanvasSpace'](_0x3f1278,_0x3eecd9(0x1cf)),_0x221410=Config[_0x3eecd9(0x228)](_0x3eecd9(0x21b),_0x3eecd9(0x216))||0x1;Token['create']({'name':'-','x':_0x34b2af['x'],'y':_0x34b2af['y'],'img':encodeURL(_0x58b2a6),'width':_0x221410,'height':_0x221410,'scale':0x1});break;}case Config[_0x3eecd9(0x23f)]:{const _0x1fdac5=UtilCanvas[_0x3eecd9(0x200)](_0x3f1278,_0x3eecd9(0x23a)),_0x54d716=await JournalEntry['create']({'name':_0xb9a8c0(),'img':encodeURL(_0x58b2a6)});Note[_0x3eecd9(0x1fb)]({'entryId':_0x54d716['id'],'icon':'icons/svg/book.svg','iconSize':0x28,'text':'','x':_0x1fdac5['x'],'y':_0x1fdac5['y']});break;}case Config[_0x3eecd9(0x1d0)]:{const _0x3e7bae={'name':_0xb9a8c0(),'active':!![],'navigation':!![],'img':encodeURL(_0x58b2a6),'width':Math[_0x3eecd9(0x1d7)](_0x8b6bbc*_0x2cd503),'height':Math['round'](_0x154323*_0x2cd503)},_0x30dbf8=await Scene[_0x3eecd9(0x1fb)](_0x3e7bae,{'renderSheet':!![]});canvas[_0x3eecd9(0x1a7)]();break;}}}static async[_0x4234f6(0x1f9)](_0xb2483a){const _0x4033a9=_0x4234f6;let _0xb13605;try{_0xb13605=new URL(_0xb2483a);}catch(_0x51d32e){}if(_0xb13605&&ArtBrowserApp[_0x4033a9(0x218)][_0xb13605[_0x4033a9(0x1e3)]])return![];try{const _0x4fd9b4=await fetch(_0xb2483a);return await _0x4fd9b4['blob'](),!![];}catch(_0x4497a3){if(_0xb13605)ArtBrowserApp[_0x4033a9(0x218)][_0xb13605[_0x4033a9(0x1e3)]]=!![];return![];}}static[_0x4234f6(0x222)](_0x3e1eed){return new Promise((_0x5a875f,_0x3de449)=>{const _0x499227=_0x459e,_0xa427e4=new Image();_0xa427e4[_0x499227(0x1cb)]=_0x9d5137=>_0x3de449(_0x9d5137),_0xa427e4[_0x499227(0x1c0)]=()=>_0x5a875f(_0xa427e4),_0xa427e4[_0x499227(0x213)]=_0x3e1eed;});}static async[_0x4234f6(0x238)](_0x45ba12){const _0x8ae361=_0x4234f6,_0x54cec9=await fetch(Config[_0x8ae361(0x210)],{'method':_0x8ae361(0x1ce),'headers':{'Content-Type':_0x8ae361(0x192)},'body':JSON[_0x8ae361(0x208)]({'type':_0x8ae361(0x1f0),'url':_0x45ba12,'directoryPath':Config[_0x8ae361(0x228)](_0x8ae361(0x21b),_0x8ae361(0x232))})}),_0x4db475=await _0x54cec9[_0x8ae361(0x202)]();return _0x4db475[_0x8ae361(0x19c)];}static async['_pLoadImageViaBackend'](_0x3397f9){const _0x30f491=_0x4234f6,_0xedb747=await this[_0x30f491(0x238)](_0x3397f9),_0x128854=await this[_0x30f491(0x222)](_0xedb747);return{'url':_0xedb747,'image':_0x128854};}static async[_0x4234f6(0x1bb)](_0x22bc56){const _0x73df44=_0x4234f6,_0x1895c8=''+ArtBrowserApp['_URL_CORS_ANYWHERE']+_0x22bc56,_0x50810a=async _0x1b423b=>{const _0x39b1d1=_0x459e,_0x436771=Config[_0x39b1d1(0x228)](_0x39b1d1(0x21b),_0x39b1d1(0x232)),_0xb25cf1=_0x22bc56[_0x39b1d1(0x215)]('/')['last']()+_0x39b1d1(0x1c9),_0x9570e3=(_0x436771+'/'+_0xb25cf1)['replace'](/\/+/g,'/'),_0xf6ae4d=new FormData();return _0xf6ae4d[_0x39b1d1(0x236)](_0x39b1d1(0x1b6),_0x436771),_0xf6ae4d[_0x39b1d1(0x236)]('upload',_0x1b423b,_0xb25cf1),_0xf6ae4d[_0x39b1d1(0x236)]('source','data'),await new Promise((_0x3eba77,_0x33490c)=>{const _0x24ec28=_0x39b1d1,_0x699bfc=new XMLHttpRequest();_0x699bfc[_0x24ec28(0x189)]('POST','/upload',!![]),_0x699bfc['onreadystatechange']=()=>{const _0x247fac=_0x24ec28;if(_0x699bfc[_0x247fac(0x1e7)]!==0x4)return;if(_0x699bfc['status']<0xc8||_0x699bfc[_0x247fac(0x1e5)]>=0x190)_0x33490c(new Error(_0x247fac(0x1b8)+_0x699bfc[_0x247fac(0x1e5)]+')'));_0x3eba77();},_0x699bfc[_0x24ec28(0x219)](_0xf6ae4d);}),_0x9570e3;},_0x54ea9d=await loadTexture(_0x1895c8),_0x1e450e=new PIXI[(_0x73df44(0x22f))](_0x54ea9d),_0x2a3437=PIXI[_0x73df44(0x22b)][_0x73df44(0x1fb)](_0x1e450e['width'],_0x1e450e[_0x73df44(0x19e)]);canvas[_0x73df44(0x1d3)]['renderer'][_0x73df44(0x190)](_0x1e450e,_0x2a3437);const _0x58201f=new PIXI[(_0x73df44(0x22f))](_0x2a3437),_0x80a745=await new Promise((_0x63a076,_0xd9f638)=>{const _0x36d345=_0x73df44;canvas['app']['renderer'][_0x36d345(0x1e6)]['canvas'](_0x58201f)[_0x36d345(0x22c)](async _0x2858be=>{try{const _0x5b457c=await _0x50810a(_0x2858be);_0x63a076(_0x5b457c);}catch(_0x221cb5){_0xd9f638(_0x221cb5);}},'image/webp',0x1);});return _0x2a3437[_0x73df44(0x1da)](!![]),_0x80a745;}static async['_pLoadImageViaCorsAnywhere'](_0x18ebd5){const _0x211cc2=_0x4234f6,_0x5e047b=await this[_0x211cc2(0x1bb)](_0x18ebd5),_0x4b335a=await this[_0x211cc2(0x222)](_0x5e047b);return{'url':_0x5e047b,'image':_0x4b335a};}async[_0x4234f6(0x1b1)](..._0x48b29c){const _0x5ddfed=_0x4234f6;await super[_0x5ddfed(0x1b1)](..._0x48b29c),Hooks[_0x5ddfed(0x1c2)]('plutonium.configUpdate',this[_0x5ddfed(0x1b9)]),ArtBrowserApp[_0x5ddfed(0x1dc)]=null;}}ArtBrowserApp['_BLOCKED_HOSTS']={},ArtBrowserApp['_INSTANCE']=null,ArtBrowserApp[_0x4234f6(0x205)]=_0x4234f6(0x1f8),ArtBrowserApp[_0x4234f6(0x1df)]=_0x4234f6(0x1f5),ArtBrowserApp[_0x4234f6(0x21a)]=_0x4234f6(0x1d8),ArtBrowserApp[_0x4234f6(0x1d2)]=_0x4234f6(0x18f),ArtBrowserApp[_0x4234f6(0x1ec)]='https://cors-anywhere.herokuapp.com/',ArtBrowserApp[_0x4234f6(0x235)]=_0x4234f6(0x1d9),ArtBrowserApp[_0x4234f6(0x186)]='Art\x20Browser';export{ArtBrowserApp};