const _0x12e5=['.artr__search','toBlob','json','body','append','ve-art__btn-scene','_preInit_addMainButton','status','post','_pPingImage','\x22>\x0a\x09\x09\x09#controls\x20.scene-control[data-canvas-layer=\x22TilesLayer\x22]\x20.control-tool[data-tool=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09}\x0a\x09\x09</style>','Art\x20Browser','fas\x20fa-palette','get','open','backendEndpoint','artDirectoryPath','getData','initialize','C_ART_IMAGE_MODE_TILE','canvas','html','Hi!\x20You\x20shouldn\x27t\x20be\x20able\x20to\x20click\x20this,\x20something\x20has\x20gone\x20wrong.','length','application/json','last','getMaxWindowHeight','user','_preInit_addSubmenuButton','_pDownloadPack','plutonium__art__hide-main-button','height','backend\x20mod','_handleConfigUpdate_toggleTokenButton','_isDownloadingPack','_doCancelPackDownload','pInit','#board','_preInit_getInnerToolMeta','app','scale','closest','C_ART_IMAGE_MODE_TOKEN','_ID_HIDE_TOKEN_BUTTON','Sprite','notes','_handleConfigUpdate_toggleMainButton','Failed\x20to\x20load\x20image!\x20','<span\x20class=\x22fas\x20fa-bookmark\x22></span>','<style\x20id=\x22','artBrowserDownloadPack','bind','remove','control','artBrowser','dataset','_preInit_addTokenButton','bringToFront','init','_pCopyImageToLocalViaBackend','destroy','addClass','RenderTexture','find','Config\x20window\x22><span\x20class=\x22fas\x20fa-cogs\x22></span></button>','\x22>\x0a\x09\x09\x09#controls\x20.scene-control[data-control=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09}\x0a\x09\x09</style>','render','upload','host','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x20mr-1\x22><span\x20class=\x22fas\x20fa-spinner\x22></span></button>','naturalHeight','click','replace','getMaxWindowWidth','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x20mr-1\x22\x20title=\x22Cancel\x20running\x20downloads\x22><span\x20class=\x22fas\x20fa-stop\x22></span></button>','/template/ArtBrowserApp.handlebars','send','_$btnCycleImportMode','Unhandled\x20drop\x20mode\x20\x22','ve-Art','renderer','token','_textDownloadMode','socket','isStreamerMode','stringify','blob','catch','progress','warn','_handleCustomDrop','plutoniumDownloadPackImage','tokenSize','_jsonDownloadMode','text','STR_SEE_CONSOLE','_pLoadImageViaBackend','<button\x20class=\x22artr__btn-lg\x20artr__btn-lg--search-controls\x22\x20title=\x22Open\x20','Drag-Drop\x20Images\x20as\x20Tiles','buttonDisplay','TilesLayer','name','data','pct','_pLoadImageViaCorsAnywhere','Drag-Drop\x20Images\x20as\x20Scenes','P_GET_BACKEND_VERSION','set','_preInit_addNotesButton','push','plutonium.configUpdate','Drag-Drop\x20Images\x20as\x20Notes','error','<span\x20class=\x22fas\x20fa-cubes\x22></span>','image/webp','onreadystatechange','_BLOCKED_HOSTS','_handleConfigUpdate_toggleTileButton','dragstart','info','path','\x22>\x0a\x09\x09\x09#controls\x20.scene-control[data-canvas-layer=\x22TokenLayer\x22]\x20.control-tool[data-tool=\x22ve-art__btn-scene\x22]\x20{\x0a\x09\x09\x09\x09display:\x20none\x20!important;\x0a\x09\x09\x09}\x0a\x09\x09</style>','create','getSceneControlButtons','round','title','isGM','_INSTANCE','Plutonium\x20','_ID_HIDE_MAIN_BUTTON','tools','.window-content','https://cors-anywhere.herokuapp.com/','_handleInstanceConfigUpdate_cycleImportModeButton','stopPropagation','getPosCanvasSpace','CORS\x20Anywhere\x20(remote\x20server)','importImagesAs','width','_ID_HIDE_TILE_BUTTON','_pDoLoadAndPlaceImage','Failed\x20to\x20load\x20image!','some','_preInit_handleOpenClick','_handleConfigUpdate','plutonium__art__hide-token-button','readyState','<span\x20class=\x22fas\x20fa-user\x22></span>','_pLoadImage','activateListeners','Foundry\x20Assets','_onLoadProgress','_ART_SCENE_CONTROLS_NAME','off','dataTransfer','notifications','addEventListener','NotesLayer','appendTo','_preInit_addTileButton','p-0','TokenLayer','Could\x20not\x20directly\x20load\x20image\x20from\x20','_onClickLayer','\x20--\x20falling\x20back\x20on\x20alternate\x20loader:\x20','close','parse','preInit','uri','extract','Download\x20complete!\x20Images\x20will\x20be\x20available\x20in\x20your\x20\x22User\x20Data\x22\x20directory.','currentTarget','artBrowserCopyToLocal','controls','__bound__handleInstanceConfigUpdate','artBrowserCancelDownloadPack','type','_activateListeners_pHandleDownloadAssets','split','_pCopyImageToLocalViaCorsAnywhere','max','C_ART_IMAGE_MODE_NOTE'];(function(_0x45dfe0,_0x12e598){const _0x1beae2=function(_0x1b834c){while(--_0x1b834c){_0x45dfe0['push'](_0x45dfe0['shift']());}};_0x1beae2(++_0x12e598);}(_0x12e5,0x1d4));const _0x1bea=function(_0x45dfe0,_0x12e598){_0x45dfe0=_0x45dfe0-0x0;let _0x1beae2=_0x12e5[_0x45dfe0];return _0x1beae2;};const _0x3144a3=_0x1bea;'use strict';import{SharedConsts}from'../shared/SharedConsts.js';import{Util,LGT}from'./Util.js';import{Config}from'./Config.js';import{UtilCanvas}from'./UtilCanvas.js';import{ArtBrowser}from'../art-js/ArtBrowser.js';import{UtilApplications}from'./UtilApplications.js';class ArtBrowserApp extends Application{static[_0x3144a3('0x3f')](){const _0x2fe670=_0x3144a3;Hooks['on'](_0x2fe670('0x13'),_0x1b834c=>{const _0x8527f7=_0x2fe670;if(!game[_0x8527f7('0x69')][_0x8527f7('0x16')])return;this[_0x8527f7('0x54')](_0x1b834c),this[_0x8527f7('0x37')](_0x1b834c),this[_0x8527f7('0x86')](_0x1b834c),this[_0x8527f7('0x4')](_0x1b834c);});}static[_0x3144a3('0x27')](){const _0x42fcd0=_0x3144a3;if(ArtBrowserApp[_0x42fcd0('0x17')]){ArtBrowserApp[_0x42fcd0('0x17')]['render'](!![]),ArtBrowserApp[_0x42fcd0('0x17')]['maximize'](),UtilApplications[_0x42fcd0('0x87')](ArtBrowserApp[_0x42fcd0('0x17')]);return;}ArtBrowserApp[_0x42fcd0('0x17')]=new ArtBrowserApp(),ArtBrowserApp['_INSTANCE'][_0x42fcd0('0x90')](!![]);}static[_0x3144a3('0x54')](_0x5d544f){const _0x16f91b=_0x3144a3,_0x5d39a6=_0x5d544f[_0x16f91b('0x8d')](_0x3af8c5=>_0x3af8c5['name']===ArtBrowserApp['_ART_SCENE_CONTROLS_NAME']);if(_0x5d39a6)return;_0x5d544f['push']({'name':ArtBrowserApp['_ART_SCENE_CONTROLS_NAME'],'title':_0x16f91b('0x59'),'icon':_0x16f91b('0x5a'),'tools':[{'name':ArtBrowserApp['_ART_SCENE_CONTROLS_NAME'],'title':_0x16f91b('0x59'),'icon':'fas\x20fa-palette','onClick':()=>ui[_0x16f91b('0x33')][_0x16f91b('0xf')](_0x16f91b('0x64')),'button':!![]}],'activeTool':_0x16f91b('0x5c')});}static['_preInit_getInnerToolMeta'](_0x372386){const _0x310c0a=_0x3144a3;return{'name':ArtBrowserApp[_0x310c0a('0x30')],'title':'Art\x20Browser','icon':'fas\x20fa-palette','onClick':()=>{const _0x2e162d=_0x310c0a;Config['set'](_0x2e162d('0x84'),'importImagesAs',_0x372386),ArtBrowserApp[_0x2e162d('0x27')]();},'button':!![]};}static[_0x3144a3('0x37')](_0x2e99ca){const _0x7c21ab=_0x3144a3;this[_0x7c21ab('0x6a')](_0x2e99ca,'tiles',Config[_0x7c21ab('0x78')]);}static[_0x3144a3('0x86')](_0x27d52b){const _0x5df9c4=_0x3144a3;this[_0x5df9c4('0x6a')](_0x27d52b,_0x5df9c4('0x9f'),Config[_0x5df9c4('0x61')]);}static['_preInit_addNotesButton'](_0x1782c4){const _0x573219=_0x3144a3;this[_0x573219('0x6a')](_0x1782c4,_0x573219('0x7b'),Config['C_ART_IMAGE_MODE_NOTE']);}static[_0x3144a3('0x6a')](_0xcd3f2b,_0x137768,_0x44ba39){const _0x3ea53b=_0x3144a3,_0x49d849=_0xcd3f2b[_0x3ea53b('0x8d')](_0x3062f6=>_0x3062f6[_0x3ea53b('0xb3')]===_0x137768),_0x13952f=_0x49d849['tools'][_0x3ea53b('0x26')](_0x3f003a=>_0x3f003a[_0x3ea53b('0xb3')]===ArtBrowserApp[_0x3ea53b('0x30')]);if(_0x13952f)return;_0x49d849[_0x3ea53b('0x1a')][_0x3ea53b('0x5')](this[_0x3ea53b('0x74')](_0x44ba39));}static async['_pDownloadPack'](_0x290502){const _0x3b2b00=_0x3144a3;await fetch(Config[_0x3b2b00('0x5d')],{'method':_0x3b2b00('0x56'),'headers':{'Content-Type':'application/json'},'body':JSON[_0x3b2b00('0xa3')]({'type':_0x3b2b00('0x80'),'json':_0x290502,'directoryPath':Config[_0x3b2b00('0x5b')](_0x3b2b00('0x84'),_0x3b2b00('0x5e'))})});}static[_0x3144a3('0x88')](){const _0x1996a8=_0x3144a3,_0x39002c=ui[_0x1996a8('0x45')][_0x1996a8('0x3b')]['bind'](ui[_0x1996a8('0x45')]);ui[_0x1996a8('0x45')]['_onClickLayer']=function(_0x169ae9){const _0x468882=_0x1996a8;if(_0x169ae9[_0x468882('0x43')][_0x468882('0x85')][_0x468882('0x83')]===ArtBrowserApp['_ART_SCENE_CONTROLS_NAME']){ArtBrowserApp['_preInit_handleOpenClick']();return;}_0x39002c(_0x169ae9);},ui[_0x1996a8('0x45')][_0x1996a8('0x60')](),$(document['body'])['on'](_0x1996a8('0xe'),'.artr__item__lnk-fullsize',_0x59f80d=>{const _0x2a9440=_0x1996a8;_0x59f80d[_0x2a9440('0x1e')]();}),$(_0x1996a8('0x73'))[0x0][_0x1996a8('0x34')]('drop',this[_0x1996a8('0xa8')][_0x1996a8('0x81')](this)),game[_0x1996a8('0xa1')]['on'](_0x1996a8('0xa6'),_0x27880b=>{const _0x56a039=_0x1996a8;if(_0x27880b[_0x56a039('0x48')]!==_0x56a039('0xa9'))return;if(!ArtBrowserApp[_0x56a039('0x17')])return;if(!ArtBrowserApp[_0x56a039('0x17')][_0x56a039('0x70')])return;SceneNavigation[_0x56a039('0x2f')](_0x27880b[_0x56a039('0xac')],_0x27880b[_0x56a039('0xb5')]);}),Hooks['on'](_0x1996a8('0x6'),()=>this['_handleConfigUpdate']()),this[_0x1996a8('0x28')]();}constructor(){const _0x4383fe=_0x3144a3;super({'title':'Art\x20Browser','template':SharedConsts['MODULE_LOCATION']+_0x4383fe('0x99'),'height':Util[_0x4383fe('0x68')](),'width':Math[_0x4383fe('0x4c')](0x258,Util[_0x4383fe('0x97')]()/0x2),'resizable':!![]}),this[_0x4383fe('0x70')]=![],this[_0x4383fe('0x9b')]=null,this[_0x4383fe('0x46')]=null;}static[_0x3144a3('0x28')](){const _0xcdc2b7=_0x3144a3;this['_handleConfigUpdate_toggleTokenButton'](),this[_0xcdc2b7('0xd')](),this['_handleConfigUpdate_toggleMainButton']();}static[_0x3144a3('0x6f')](){const _0xbaaec4=_0x3144a3,_0x158cff=Config[_0xbaaec4('0x5b')](_0xbaaec4('0x84'),_0xbaaec4('0xb1')),_0x287fae=$('#'+ArtBrowserApp['_ID_HIDE_TOKEN_BUTTON']);if(_0x158cff[0x0])return _0x287fae[_0xbaaec4('0x82')]();if(_0x287fae['length'])return;$('<style\x20id=\x22'+ArtBrowserApp[_0xbaaec4('0x79')]+_0xbaaec4('0x11'))[_0xbaaec4('0x36')](document['body']);}static[_0x3144a3('0xd')](){const _0xc5cb4b=_0x3144a3,_0x1a0dbd=Config[_0xc5cb4b('0x5b')](_0xc5cb4b('0x84'),'buttonDisplay'),_0x201be3=$('#'+ArtBrowserApp[_0xc5cb4b('0x23')]);if(_0x1a0dbd[0x1])return _0x201be3[_0xc5cb4b('0x82')]();if(_0x201be3[_0xc5cb4b('0x65')])return;$(_0xc5cb4b('0x7f')+ArtBrowserApp[_0xc5cb4b('0x23')]+_0xc5cb4b('0x58'))[_0xc5cb4b('0x36')](document['body']);}static[_0x3144a3('0x7c')](){const _0x25161a=_0x3144a3,_0x21297b=Config[_0x25161a('0x5b')](_0x25161a('0x84'),_0x25161a('0xb1')),_0x10a231=$('#'+ArtBrowserApp[_0x25161a('0x19')]);if(_0x21297b[0x2])return _0x10a231['remove']();if(_0x10a231[_0x25161a('0x65')])return;$(_0x25161a('0x7f')+ArtBrowserApp[_0x25161a('0x19')]+_0x25161a('0x8f'))[_0x25161a('0x36')](document[_0x25161a('0x51')]);}['_handleInstanceConfigUpdate'](){const _0x24129b=_0x3144a3;this[_0x24129b('0x1d')]();}[_0x3144a3('0x1d')](){const _0x587bbe=_0x3144a3,_0xc20eb4=Config['get']('artBrowser',_0x587bbe('0x21'))||0x0;switch(_0xc20eb4){case Config[_0x587bbe('0x78')]:this[_0x587bbe('0x9b')][_0x587bbe('0x63')](_0x587bbe('0x9'))[_0x587bbe('0x15')](_0x587bbe('0xb0'));break;case Config[_0x587bbe('0x61')]:this[_0x587bbe('0x9b')]['html'](_0x587bbe('0x2b'))['title']('Drag-Drop\x20Images\x20as\x20Tokens');break;case Config[_0x587bbe('0x4d')]:this[_0x587bbe('0x9b')]['html'](_0x587bbe('0x7e'))['title'](_0x587bbe('0x7'));break;case Config['C_ART_IMAGE_MODE_SCENE']:this['_$btnCycleImportMode'][_0x587bbe('0x63')]('<span\x20class=\x22fas\x20fa-map\x22></span>')[_0x587bbe('0x15')](_0x587bbe('0x1'));break;default:throw new Error(_0x587bbe('0x9c')+_0xc20eb4+'\x22');}}[_0x3144a3('0x5f')](){const _0x556521=_0x3144a3;return{'owner':!![],'entity':{'name':_0x556521('0x59')}};}[_0x3144a3('0x2d')](_0x3958a0){const _0x53fbdc=_0x3144a3,_0x57afad=this;this[_0x53fbdc('0x46')]=this['_handleInstanceConfigUpdate'][_0x53fbdc('0x81')](this),Hooks['on'](_0x53fbdc('0x6'),this[_0x53fbdc('0x46')]),_0x3958a0[_0x53fbdc('0x77')](_0x53fbdc('0x1b'))[_0x53fbdc('0x8b')](_0x53fbdc('0x38'))[_0x53fbdc('0x8b')]('artb__window-outer');const _0x2eda64=new ArtBrowser(_0x3958a0);_0x2eda64['_pGetDownloadModes']=async function(){const _0xc1802b=_0x53fbdc,_0x14dbd8=[this[_0xc1802b('0xa0')],this[_0xc1802b('0xab')]];return await Config[_0xc1802b('0x2')]&&_0x14dbd8['unshift']({'name':_0xc1802b('0x2e'),'isMultipleFilesOnly':!![],'pDownloadAsMultipleFiles':(_0x1f96c6,_0x8dc4ef,_0x16a2c2)=>_0x57afad[_0xc1802b('0x49')](_0x1f96c6,_0x8dc4ef,_0x16a2c2)}),_0x14dbd8;},_0x2eda64[_0x53fbdc('0x72')]()['then'](()=>{const _0x11b07a=_0x53fbdc,_0x51ddc6=_0x3958a0['find'](_0x11b07a('0x4e')),_0x2ae92f=$(_0x11b07a('0x98'))['click'](()=>ArtBrowserApp[_0x11b07a('0x71')]());this[_0x11b07a('0x9b')]=$(_0x11b07a('0x93'))[_0x11b07a('0x95')](()=>{const _0x1ca429=_0x11b07a,_0x4b6b51=Config[_0x1ca429('0x5b')]('artBrowser','importImagesAs')||0x0,_0x16b228=_0x4b6b51===Config['C_ART_IMAGE_MODE_SCENE']?Config[_0x1ca429('0x78')]:_0x4b6b51+0x1;Config[_0x1ca429('0x3')](_0x1ca429('0x84'),'importImagesAs',_0x16b228);});const _0x506c4f=$(_0x11b07a('0xaf')+(Config[_0x11b07a('0x5b')]('ui',_0x11b07a('0xa2'))?'':_0x11b07a('0x18'))+_0x11b07a('0x8e'))[_0x11b07a('0x95')](_0x4b502f=>Config['pHandleButtonClick'](_0x4b502f,'artBrowser'));$$`<div class="flex-v-center h-100">
					<div class="artr__search__divider mx-2"></div>
					<div class="flex-v-center">${_0x2ae92f}</div>
					<div class="flex-v-center">${this[_0x11b07a('0x9b')]}</div>
					<div class="flex-v-center">${_0x506c4f}</div>
				</div>`[_0x11b07a('0x36')](_0x51ddc6),this[_0x11b07a('0x46')]();});}static async['_doCancelPackDownload'](){const _0x25a482=_0x3144a3;await fetch(Config[_0x25a482('0x5d')],{'method':_0x25a482('0x56'),'headers':{'Content-Type':_0x25a482('0x66')},'body':JSON['stringify']({'type':_0x25a482('0x47')})});}async['_activateListeners_pHandleDownloadAssets'](_0x3c3787,_0x271453,_0x27a60f){const _0x4b38f9=_0x3144a3;try{ArtBrowserApp[_0x4b38f9('0x17')][_0x4b38f9('0x70')]=!![],await ArtBrowserApp[_0x4b38f9('0x6b')](_0x3c3787);}catch(_0xa09d92){ArtBrowserApp[_0x4b38f9('0x17')]['_isDownloadingPack']=![];}_0x271453+0x1===_0x27a60f&&(ArtBrowserApp[_0x4b38f9('0x17')][_0x4b38f9('0x70')]=![],ui[_0x4b38f9('0x33')][_0x4b38f9('0xf')](_0x4b38f9('0x42')));}static['_handleCustomDrop'](_0x1eedb9){const _0x4225f4=_0x3144a3;let _0x102a95;try{const _0x73983e=_0x1eedb9[_0x4225f4('0x32')][_0x4225f4('0x5f')](_0x4225f4('0x66'));if(!_0x73983e)return;_0x102a95=JSON[_0x4225f4('0x3e')](_0x73983e);}catch(_0x25456a){ui[_0x4225f4('0x33')][_0x4225f4('0x8')](_0x4225f4('0x7d')+VeCt[_0x4225f4('0xad')]),setTimeout(()=>{throw _0x25456a;});}if(!_0x102a95||_0x102a95['type']!==_0x4225f4('0x9d'))return;return this[_0x4225f4('0x24')](_0x1eedb9,_0x102a95)[_0x4225f4('0xa5')](_0x488a46=>{const _0x2be9d0=_0x4225f4;ui['notifications'][_0x2be9d0('0x8')](_0x2be9d0('0x7d')+VeCt[_0x2be9d0('0xad')]),setTimeout(()=>{throw _0x488a46;});}),![];}static async[_0x3144a3('0x24')](_0xf4d2a3,_0x586623){const _0x2e1d3f=_0x3144a3,_0x1af9df=Config[_0x2e1d3f('0x5b')](_0x2e1d3f('0x84'),_0x2e1d3f('0x21'))||0x0;let _0x51d4eb=_0x586623[_0x2e1d3f('0x40')],_0x2493b9,_0xb59dbb,_0x2b0532;if(await this[_0x2e1d3f('0x57')](_0x51d4eb))_0x2493b9=await this['_pLoadImage'](_0x51d4eb);else{const _0xfee183=await Config[_0x2e1d3f('0x2')];console[_0x2e1d3f('0xa7')](...LGT,_0x2e1d3f('0x3a')+_0x51d4eb+_0x2e1d3f('0x3c')+(_0xfee183?_0x2e1d3f('0x6e'):_0x2e1d3f('0x20'))+'.');try{if(_0xfee183){const {url:_0x4d555e,image:_0x30ba1b}=await this[_0x2e1d3f('0xae')](_0x51d4eb);_0x51d4eb=_0x4d555e,_0x2493b9=_0x30ba1b;}else{const {url:_0x3ba188,image:_0x515664}=await this[_0x2e1d3f('0x0')](_0x51d4eb);_0x51d4eb=_0x3ba188,_0x2493b9=_0x515664;}}catch(_0x22303c){console[_0x2e1d3f('0x8')](...LGT,_0x2e1d3f('0x25'),_0x22303c),ui[_0x2e1d3f('0x33')][_0x2e1d3f('0x8')](_0x2e1d3f('0x7d')+VeCt[_0x2e1d3f('0xad')]);return;}}const _0x27c706=()=>{const _0x1ca678=_0x2e1d3f;let _0x5766a2=_0x51d4eb[_0x1ca678('0x4a')]('/')[_0x1ca678('0x67')]();try{_0x5766a2=decodeURIComponent(_0x5766a2),_0x5766a2=_0x5766a2[_0x1ca678('0x4a')]('.')[0x0],_0x5766a2=_0x5766a2[_0x1ca678('0x96')](/_/g,'\x20')[_0x1ca678('0x96')](/\s+/g,'\x20')[_0x1ca678('0x96')](/\d+\s*[xX*]\s*\d+/g,'');}catch(_0x32439e){}return _0x5766a2;};_0xb59dbb=_0x2493b9['naturalWidth'],_0x2b0532=_0x2493b9[_0x2e1d3f('0x94')];let _0x5080f2=Config[_0x2e1d3f('0x5b')](_0x2e1d3f('0x84'),_0x2e1d3f('0x76'));switch(_0x1af9df){case Config[_0x2e1d3f('0x78')]:{const _0x4d152c=UtilCanvas['getPosCanvasSpace'](_0xf4d2a3,_0x2e1d3f('0xb2'));Tile[_0x2e1d3f('0x12')]({'img':encodeURL(_0x51d4eb),'width':Math['round'](_0xb59dbb*_0x5080f2),'height':Math[_0x2e1d3f('0x14')](_0x2b0532*_0x5080f2),'hidden':![],'scale':_0x5080f2,'x':_0x4d152c['x'],'y':_0x4d152c['y']});break;}case Config[_0x2e1d3f('0x61')]:{const _0x553808=UtilCanvas[_0x2e1d3f('0x1f')](_0xf4d2a3,_0x2e1d3f('0x39')),_0x515f33=Config[_0x2e1d3f('0x5b')](_0x2e1d3f('0x84'),_0x2e1d3f('0xaa'))||0x1;Token[_0x2e1d3f('0x12')]({'name':'-','x':_0x553808['x'],'y':_0x553808['y'],'img':encodeURL(_0x51d4eb),'width':_0x515f33,'height':_0x515f33,'scale':0x1});break;}case Config[_0x2e1d3f('0x4d')]:{const _0xd2394b=UtilCanvas[_0x2e1d3f('0x1f')](_0xf4d2a3,_0x2e1d3f('0x35')),_0x2f6a67=await JournalEntry[_0x2e1d3f('0x12')]({'name':_0x27c706(),'img':encodeURL(_0x51d4eb)});Note[_0x2e1d3f('0x12')]({'entryId':_0x2f6a67['id'],'icon':'icons/svg/book.svg','iconSize':0x28,'text':'','x':_0xd2394b['x'],'y':_0xd2394b['y']});break;}case Config['C_ART_IMAGE_MODE_SCENE']:{const _0x4827b3={'name':_0x27c706(),'active':!![],'navigation':!![],'img':encodeURL(_0x51d4eb),'width':Math[_0x2e1d3f('0x14')](_0xb59dbb*_0x5080f2),'height':Math['round'](_0x2b0532*_0x5080f2)},_0xe54928=await Scene['create'](_0x4827b3,{'renderSheet':!![]});canvas['draw']();break;}}}static async[_0x3144a3('0x57')](_0x46bdc2){const _0x12e7e9=_0x3144a3;let _0x1b91a4;try{_0x1b91a4=new URL(_0x46bdc2);}catch(_0x276b8a){}if(_0x1b91a4&&ArtBrowserApp[_0x12e7e9('0xc')][_0x1b91a4[_0x12e7e9('0x92')]])return![];try{const _0x5f281d=await fetch(_0x46bdc2);return await _0x5f281d[_0x12e7e9('0xa4')](),!![];}catch(_0x58977f){if(_0x1b91a4)ArtBrowserApp[_0x12e7e9('0xc')][_0x1b91a4[_0x12e7e9('0x92')]]=!![];return![];}}static[_0x3144a3('0x2c')](_0x4d67f6){return new Promise((_0x4ca7c2,_0x4d926d)=>{const _0x12622c=new Image();_0x12622c['onerror']=_0x54f17f=>_0x4d926d(_0x54f17f),_0x12622c['onload']=()=>_0x4ca7c2(_0x12622c),_0x12622c['src']=_0x4d67f6;});}static async[_0x3144a3('0x89')](_0x2620d6){const _0x52b60f=_0x3144a3,_0x2e8f43=await fetch(Config[_0x52b60f('0x5d')],{'method':_0x52b60f('0x56'),'headers':{'Content-Type':'application/json'},'body':JSON[_0x52b60f('0xa3')]({'type':_0x52b60f('0x44'),'url':_0x2620d6,'directoryPath':Config[_0x52b60f('0x5b')](_0x52b60f('0x84'),_0x52b60f('0x5e'))})}),_0x476aec=await _0x2e8f43[_0x52b60f('0x50')]();return _0x476aec[_0x52b60f('0x10')];}static async[_0x3144a3('0xae')](_0x1ec4d2){const _0x57f54f=_0x3144a3,_0x5695ef=await this[_0x57f54f('0x89')](_0x1ec4d2),_0x49d3fc=await this[_0x57f54f('0x2c')](_0x5695ef);return{'url':_0x5695ef,'image':_0x49d3fc};}static async[_0x3144a3('0x4b')](_0x10f4f8){const _0x12efd6=_0x3144a3,_0x143904=''+ArtBrowserApp['_URL_CORS_ANYWHERE']+_0x10f4f8,_0x962b06=async _0x51f819=>{const _0x281c61=_0x1bea,_0x2c37ad=Config[_0x281c61('0x5b')](_0x281c61('0x84'),'artDirectoryPath'),_0x3943f8=_0x10f4f8[_0x281c61('0x4a')]('/')[_0x281c61('0x67')]()+'.webp',_0x4952a1=(_0x2c37ad+'/'+_0x3943f8)[_0x281c61('0x96')](/\/+/g,'/'),_0x198998=new FormData();return _0x198998['append']('target',_0x2c37ad),_0x198998[_0x281c61('0x52')](_0x281c61('0x91'),_0x51f819,_0x3943f8),_0x198998[_0x281c61('0x52')]('source',_0x281c61('0xb4')),await new Promise((_0x79f06a,_0x41b32f)=>{const _0x1a4331=_0x281c61,_0x1cd118=new XMLHttpRequest();_0x1cd118[_0x1a4331('0x5c')]('POST','/upload',!![]),_0x1cd118[_0x1a4331('0xb')]=()=>{const _0x25bdf0=_0x1a4331;if(_0x1cd118[_0x25bdf0('0x2a')]!==0x4)return;if(_0x1cd118['status']<0xc8||_0x1cd118[_0x25bdf0('0x55')]>=0x190)_0x41b32f(new Error('Error\x20during\x20request\x20('+_0x1cd118[_0x25bdf0('0x55')]+')'));_0x79f06a();},_0x1cd118[_0x1a4331('0x9a')](_0x198998);}),_0x4952a1;},_0x1c1158=await loadTexture(_0x143904),_0x4bede1=new PIXI[(_0x12efd6('0x7a'))](_0x1c1158),_0x8dbf50=PIXI[_0x12efd6('0x8c')][_0x12efd6('0x12')](_0x4bede1[_0x12efd6('0x22')],_0x4bede1[_0x12efd6('0x6d')]);canvas['app'][_0x12efd6('0x9e')][_0x12efd6('0x90')](_0x4bede1,_0x8dbf50);const _0x5431c1=new PIXI[(_0x12efd6('0x7a'))](_0x8dbf50),_0x16c90b=await new Promise((_0x4a2895,_0xad3afe)=>{const _0x41bcb8=_0x12efd6;canvas[_0x41bcb8('0x75')][_0x41bcb8('0x9e')][_0x41bcb8('0x41')][_0x41bcb8('0x62')](_0x5431c1)[_0x41bcb8('0x4f')](async _0x4fdb61=>{try{const _0x2b1547=await _0x962b06(_0x4fdb61);_0x4a2895(_0x2b1547);}catch(_0x3d1618){_0xad3afe(_0x3d1618);}},_0x41bcb8('0xa'),0x1);});return _0x8dbf50[_0x12efd6('0x8a')](!![]),_0x16c90b;}static async['_pLoadImageViaCorsAnywhere'](_0x338018){const _0x2c08ac=_0x3144a3,_0x2b46b0=await this['_pCopyImageToLocalViaCorsAnywhere'](_0x338018),_0x134260=await this[_0x2c08ac('0x2c')](_0x2b46b0);return{'url':_0x2b46b0,'image':_0x134260};}async['close'](..._0x15bf97){const _0x21db4=_0x3144a3;super[_0x21db4('0x3d')](..._0x15bf97),Hooks[_0x21db4('0x31')]('plutonium.configUpdate',this[_0x21db4('0x46')]),ArtBrowserApp[_0x21db4('0x17')]=null;}}ArtBrowserApp[_0x3144a3('0xc')]={},ArtBrowserApp[_0x3144a3('0x17')]=null,ArtBrowserApp['_ID_HIDE_TOKEN_BUTTON']=_0x3144a3('0x29'),ArtBrowserApp['_ID_HIDE_TILE_BUTTON']='plutonium__art__hide-tile-button',ArtBrowserApp['_ID_HIDE_MAIN_BUTTON']=_0x3144a3('0x6c'),ArtBrowserApp['_URL_CORS_ANYWHERE']=_0x3144a3('0x1c'),ArtBrowserApp[_0x3144a3('0x30')]=_0x3144a3('0x53');export{ArtBrowserApp};