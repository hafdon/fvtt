const _0x1cb6=['toLowerCase','255859bKHPpD','spellLevelHigh','pGetUserSelection','prepared','sort','splitTagByPipe','key','_isRequiredLevelInRange','push','rest','474808xZBQlV','spellLevelLow','_getFlatData_doProcessAdditionMeta','pGetUserInput','toggleVe','2MAHzdS','segregate','additionalSpells','{@spell\x20','isExpanded','requiredLevel','_additionalSpells','pGetFormData','preparationMode','_render_addLastExpandedSpellsHook','copy','casterLevel','getFormData','isPrepared','some','targetLevel','<hr\x20class=\x22hr-1\x22>','2gJddSA','883tCsAru','_getFlatData_doProcessSpellRechargeBlock','type','string','render','hashToIdMap','<div\x20class=\x22flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>','MIN_SAFE_INTEGER','_sourceHintText','requiredCasterLevel','map','length','Choose\x20Additional\x20Spell\x20Set','<div\x20class=\x22ve-small\x20flex-v-center\x20my-1\x20w-100\x20italic\x20ve-muted\x22>No\x20spells\x20at\x20this\x20level</div>','click','uses','filterExpression','meta','$getSelEnum','ascSort','_render_$getSelChooseAbility','addHookExpandedSpells','<div\x20class=\x22flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Spell\x20Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>','_isRequiredCasterLevelInRange','currentLevel','innate','Unhandled\x20spell\x20addition\x20type\x20\x22','Unhandled\x20additional\x20spell\x20format:\x20\x22','always','toSpellCase','active','appendTo','</button>','<button\x20class=\x22btn\x20btn-default\x20btn-xxs\x20mr-1\x22\x20title=\x22Choose\x20a\x20Spell\x22><span\x20class=\x22fas\x20fa-search\x22></span></button>','Unhandled\x20recharge\x20type\x20\x22','append','_isAnyExpanded','_render_$getRows','<div>','entries','ixSet','_additionalSpellsFlat','exec','_isAnyInnatePrepared','415825JXtprl','1298OnVaie','get','choose','spellsExpanded','<div\x20class=\x22flex-v-center\x22></div>','Unhandled\x20spell\x20recharge\x20type\x20\x22','_isAnyInnatePreparedExpanded','_addHookBase','atwill','<div\x20class=\x22flex-col\x20w-100\x22></div>','parentAbilityAbv','_state','usesPer','spells','isNoChoice','abilityAbv','_getFlatExpandedSpellsInRange','forEach','160766FnmOmB','67208tjbhXF','FlatSpell','_getDefaultState','values','modalFilterSpells','modalTitle','setEq','381wihYuB','attAbvToFull','_getFlatInnatePreparedSpellsInRange','daily','expanded','will','ability','toggleClass','_modalFilterSpells','ascSortLower','_getFlatData_doProcessSpellItem','_isChooseAbility','join','filter','uid','_render_renderOptions','getOrdinalForm','data','getFlatData','ritual','_getFlatSpellsInRange','859WdMQwD','pop'];const _0x1691=function(_0x2ca220,_0x32f67e){_0x2ca220=_0x2ca220-0x6b;let _0x1cb64b=_0x1cb6[_0x2ca220];return _0x1cb64b;};const _0x10cd18=_0x1691;(function(_0x373893,_0x33382b){const _0x5806b0=_0x1691;while(!![]){try{const _0x284456=parseInt(_0x5806b0(0xb9))+-parseInt(_0x5806b0(0x8f))+-parseInt(_0x5806b0(0x90))*-parseInt(_0x5806b0(0xbe))+-parseInt(_0x5806b0(0xcf))*-parseInt(_0x5806b0(0xaf))+-parseInt(_0x5806b0(0x7c))+-parseInt(_0x5806b0(0x7d))*-parseInt(_0x5806b0(0x97))+-parseInt(_0x5806b0(0xac))*parseInt(_0x5806b0(0xd0));if(_0x284456===_0x33382b)break;else _0x373893['push'](_0x373893['shift']());}catch(_0x2c5f2c){_0x373893['push'](_0x373893['shift']());}}}(_0x1cb6,0x44748));import{Charactermancer_Util}from'./UtilCharactermancer.js';import{DataConverterSpell}from'./DataConverterSpell.js';class Charactermancer_AdditionalSpellsUtil{static[_0x10cd18(0xa9)](_0x4ada2d){const _0x5533eb=_0x10cd18;return _0x4ada2d=MiscUtil['copy'](_0x4ada2d),_0x4ada2d[_0x5533eb(0xda)](_0x568610=>{const _0x334374=_0x5533eb,_0x588fdb={},_0x474c52={},_0x739702=[];return Object[_0x334374(0x77)](_0x568610)[_0x334374(0x8e)](([_0x158eec,_0x52d7bb])=>{const _0x364fb4=_0x334374;_0x739702[_0x364fb4(0xb7)](_0x158eec);switch(_0x158eec){case _0x364fb4(0x9d):_0x588fdb[_0x158eec]=_0x52d7bb;break;case _0x364fb4(0xe9):case _0x364fb4(0xb2):case _0x364fb4(0x9b):{this['_getFlatData_doProcessAdditionMeta']({'additionType':_0x158eec,'additionMeta':_0x52d7bb,'outSpells':_0x474c52,'keyPath':_0x739702});break;}default:throw new Error(_0x364fb4(0xea)+_0x158eec+'\x22');}_0x739702[_0x364fb4(0xad)]();}),{'meta':_0x588fdb,'spells':_0x474c52};});}static[_0x10cd18(0xbb)](_0x2f6bf1){const _0x28ef6f=_0x10cd18,{additionMeta:_0x22d93c,keyPath:_0x258f7d}=_0x2f6bf1;Object[_0x28ef6f(0x77)](_0x22d93c)[_0x28ef6f(0x8e)](([_0x805a5d,_0x319196])=>{const _0x598ca7=_0x28ef6f;_0x258f7d[_0x598ca7(0xb7)](_0x805a5d),_0x319196 instanceof Array?_0x319196[_0x598ca7(0x8e)]((_0x1a655c,_0x25c9c1)=>this[_0x598ca7(0xa1)]({..._0x2f6bf1,'levelOrCasterLevel':_0x805a5d,'spellItem':_0x1a655c,'ix':_0x25c9c1})):Object[_0x598ca7(0x77)](_0x319196)[_0x598ca7(0x8e)](([_0x2f9827,_0x1b6592])=>{const _0x1101e7=_0x598ca7;this[_0x1101e7(0xd1)]({..._0x2f6bf1,'levelOrCasterLevel':_0x805a5d,'rechargeType':_0x2f9827,'levelMetaInner':_0x1b6592});}),_0x258f7d[_0x598ca7(0xad)]();});}static[_0x10cd18(0xa1)](_0x2ac038){const _0x3b47c0=_0x10cd18,{additionType:_0x345674,additionMeta:_0x40a835,outSpells:_0x3760d4,keyPath:_0x3b2835,spellItem:_0x438b2b,ix:_0x5a5a64,rechargeType:_0x45ff21,uses:_0x48021c,usesPer:_0x3bcdbf,levelOrCasterLevel:_0xdb66f2}=_0x2ac038;_0x3b2835['push'](_0x5a5a64);const _0x8eb31a={'isExpanded':_0x345674===_0x3b47c0(0x9b),'isPrepared':_0x345674==='prepared'||_0x345674===_0x3b47c0(0xe9),'preparationMode':_0x345674===_0x3b47c0(0xb2)?_0x3b47c0(0x6c):_0x3b47c0(0xe9)},_0x17ac99=/^s(\d+)$/[_0x3b47c0(0x7a)](_0xdb66f2);if(_0x17ac99)_0x8eb31a['requiredCasterLevel']=Number(_0x17ac99[0x1]);else _0x8eb31a[_0x3b47c0(0xc3)]=Number(_0xdb66f2);if(_0x45ff21)switch(_0x45ff21){case _0x3b47c0(0xb8):case _0x3b47c0(0x9a):break;case _0x3b47c0(0x9c):case _0x3b47c0(0xaa):{_0x8eb31a[_0x3b47c0(0xc6)]=_0x3b47c0(0x85),_0x8eb31a[_0x3b47c0(0xcb)]=_0x45ff21!==_0x3b47c0(0xaa);break;}case'_':break;default:throw new Error(_0x3b47c0(0x72)+_0x45ff21+'\x22');}if(_0x48021c)_0x8eb31a[_0x3b47c0(0xdf)]=_0x48021c;if(_0x3bcdbf)_0x8eb31a[_0x3b47c0(0x89)]=_0x3bcdbf;if(typeof _0x438b2b===_0x3b47c0(0xd3)){const _0x5cc6de=_0x3b2835[_0x3b47c0(0xa3)]('__');_0x3760d4[_0x5cc6de]=new Charactermancer_AdditionalSpellsUtil[(_0x3b47c0(0x91))]({'type':'spell','key':_0x5cc6de,..._0x8eb31a,'uid':_0x438b2b});}else{if(_0x438b2b[_0x3b47c0(0x7f)]){const _0x3c6365=_0x438b2b['count']||0x1;for(let _0x3de366=0x0;_0x3de366<_0x3c6365;++_0x3de366){_0x3b2835[_0x3b47c0(0xb7)](_0x3de366);const _0x5210a0=_0x3b2835[_0x3b47c0(0xa3)]('__');_0x3760d4[_0x5210a0]=new Charactermancer_AdditionalSpellsUtil[(_0x3b47c0(0x91))]({'type':_0x3b47c0(0x7f),'key':_0x5210a0,..._0x8eb31a,'filterExpression':_0x438b2b[_0x3b47c0(0x7f)]}),_0x3b2835[_0x3b47c0(0xad)]();}}else throw new Error(_0x3b47c0(0x6b)+JSON['stringify'](_0x438b2b)+'\x22');}_0x3b2835[_0x3b47c0(0xad)]();}static[_0x10cd18(0xd1)](_0x3f42bc){const _0x41bb9e=_0x10cd18,{additionType:_0x3fab2a,additionMeta:_0x699826,outSpells:_0x545f4f,keyPath:_0x49ef22,levelOrCasterLevel:_0xb998de,rechargeType:_0x485801,levelMetaInner:_0x3a9631}=_0x3f42bc;_0x49ef22[_0x41bb9e(0xb7)](_0x485801);switch(_0x485801){case'rest':case _0x41bb9e(0x9a):{const _0x19a546=_0x485801===_0x41bb9e(0xb8)?'sr':'lr';Object[_0x41bb9e(0x77)](_0x3a9631)['forEach'](([_0xce2803,_0x5d8ec3])=>{const _0x546f44=_0x41bb9e;_0x49ef22[_0x546f44(0xb7)](_0xce2803),_0xce2803=_0xce2803['replace'](/^(\d+)e$/,'$1');const _0x46a9d7=Number(_0xce2803);_0x5d8ec3[_0x546f44(0x8e)]((_0x34cb71,_0x1c89b2)=>this[_0x546f44(0xa1)]({..._0x3f42bc,'spellItem':_0x34cb71,'ix':_0x1c89b2,'uses':_0x46a9d7,'usesPer':_0x19a546})),_0x49ef22[_0x546f44(0xad)]();});break;}case _0x41bb9e(0x9c):case'ritual':case'_':{_0x3a9631[_0x41bb9e(0x8e)]((_0x5101cc,_0x1e65e2)=>this[_0x41bb9e(0xa1)]({..._0x3f42bc,'spellItem':_0x5101cc,'ix':_0x1e65e2}));break;}default:throw new Error(_0x41bb9e(0x82)+_0x485801+'\x22');}_0x49ef22['pop']();}}Charactermancer_AdditionalSpellsUtil['FlatSpell']=class{constructor(_0x2d37ff){const _0x384538=_0x10cd18;this[_0x384538(0xd2)]=_0x2d37ff['type'],this[_0x384538(0xb5)]=_0x2d37ff[_0x384538(0xb5)],this['isExpanded']=_0x2d37ff[_0x384538(0xc2)],this[_0x384538(0xcb)]=_0x2d37ff[_0x384538(0xcb)],this[_0x384538(0xc6)]=_0x2d37ff[_0x384538(0xc6)],this['requiredCasterLevel']=_0x2d37ff['requiredCasterLevel'],this[_0x384538(0xc3)]=_0x2d37ff[_0x384538(0xc3)],this[_0x384538(0xdf)]=_0x2d37ff['uses'],this[_0x384538(0x89)]=_0x2d37ff[_0x384538(0x89)],this['uid']=null;if(_0x2d37ff[_0x384538(0xa5)]){const [_0x32b61c,_0x108127=SRC_PHB['toLowerCase']()]=Renderer[_0x384538(0xb4)](_0x2d37ff[_0x384538(0xa5)][_0x384538(0xae)]());this['uid']=_0x32b61c+'|'+_0x108127;}this[_0x384538(0xe0)]=_0x2d37ff[_0x384538(0xe0)];}};class Charactermancer_AdditionalSpellsSelect extends BaseComponent{static async[_0x10cd18(0xbc)](_0xdbcf22){const _0x1f2f9e=_0x10cd18;_0xdbcf22=_0xdbcf22||{};const {additionalSpells:_0x8e5937}=_0xdbcf22;if(!_0x8e5937||!_0x8e5937[_0x1f2f9e(0xdb)])return{'isFormComplete':!![],'data':[]};const _0x47ff56=new ModalFilterSpells({'namespace':'Charactermancer_AdditionalSpellsSelect.spells','isRadio':!![]}),_0x263ec7=new this({..._0xdbcf22,'modalFilterSpells':_0x47ff56});_0x263ec7['currentLevel']=_0xdbcf22['currentLevel'],_0x263ec7[_0x1f2f9e(0xcd)]=_0xdbcf22['targetLevel'],_0x263ec7['spellLevelLow']=_0xdbcf22['spellLevelLow'],_0x263ec7[_0x1f2f9e(0xb0)]=_0xdbcf22[_0x1f2f9e(0xb0)];if(_0x263ec7[_0x1f2f9e(0x8b)]())return _0x263ec7[_0x1f2f9e(0xc5)]();return Charactermancer_Util['pGetImportCompModalFormData']({'comp':_0x263ec7});}static async['pApplyFormDataToActor'](_0x2f1d2c,_0x2498cf,_0x3f4c6d){const _0x3a3bdc=_0x10cd18;_0x3f4c6d=_0x3f4c6d||{};if(!_0x2498cf||!_0x2498cf?.[_0x3a3bdc(0xa8)]?.[_0x3a3bdc(0xdb)])return;const _0x46952d=(_0x3f4c6d['abilityAbv']==='inherit'?_0x3f4c6d[_0x3a3bdc(0x87)]:_0x3f4c6d['abilityAbv'])||_0x2498cf[_0x3a3bdc(0x8c)];await DataConverterSpell['pGetSpellHashToItemPosMapAndFillSpellsFromTagIds'](_0x2f1d2c,_0x2498cf[_0x3a3bdc(0xa8)],{'optsGetSpellItem':{'casterLevel':_0x3f4c6d[_0x3a3bdc(0xc9)],'abilityAbv':_0x46952d},'hashToIdMap':_0x3f4c6d[_0x3a3bdc(0xd5)]});}constructor(_0x2860d8){const _0x573dfc=_0x10cd18;_0x2860d8=_0x2860d8||{},super(),this['_additionalSpells']=_0x2860d8[_0x573dfc(0xc0)],this[_0x573dfc(0xd8)]=_0x2860d8['sourceHintText'],this[_0x573dfc(0x9f)]=_0x2860d8[_0x573dfc(0x94)],this[_0x573dfc(0x79)]=Charactermancer_AdditionalSpellsUtil['getFlatData'](_0x2860d8['additionalSpells']);}get[_0x10cd18(0x95)](){const _0x3255b0=_0x10cd18;return _0x3255b0(0xdc)+(this[_0x3255b0(0xd8)]?'\x20('+this['_sourceHintText']+')':'');}set['currentLevel'](_0x20ee09){const _0x123f33=_0x10cd18;this[_0x123f33(0x88)]['currentLevel']=_0x20ee09;}set['targetLevel'](_0x50bb91){const _0x11f385=_0x10cd18;this[_0x11f385(0x88)][_0x11f385(0xcd)]=_0x50bb91;}set['spellLevelLow'](_0x92865c){const _0x4eccf9=_0x10cd18;this[_0x4eccf9(0x88)]['spellLevelLow']=_0x92865c;}set[_0x10cd18(0xb0)](_0x2d9f3d){const _0xe4be08=_0x10cd18;this[_0xe4be08(0x88)][_0xe4be08(0xb0)]=_0x2d9f3d;}[_0x10cd18(0xe5)](_0x5db248){const _0x3574fe=_0x10cd18;this[_0x3574fe(0x84)]('spellsExpanded',_0x5db248);}get[_0x10cd18(0x80)](){const _0x5b8476=_0x10cd18;return this[_0x5b8476(0x88)][_0x5b8476(0x80)];}[_0x10cd18(0xc7)](){const _0x382011=_0x10cd18,_0x4d3390=()=>{const _0x7140eb=_0x1691,_0x1fd4dc=this[_0x7140eb(0xca)](),_0x4c0f8d=_0x1fd4dc['data'][_0x7140eb(0xa4)](_0x57a4de=>_0x57a4de[_0x7140eb(0xc2)])[_0x7140eb(0xda)](_0x45413d=>_0x45413d[_0x7140eb(0xa5)][_0x7140eb(0xae)]()),_0x119b38=new Set(this[_0x7140eb(0x88)][_0x7140eb(0x80)]),_0x2a13ec=new Set(_0x4c0f8d);if(!CollectionUtil[_0x7140eb(0x96)](_0x119b38,_0x2a13ec))this[_0x7140eb(0x88)][_0x7140eb(0x80)]=_0x4c0f8d;};this[_0x382011(0x84)](_0x382011(0x78),_0x4d3390),this[_0x382011(0x84)]('currentLevel',_0x4d3390),this[_0x382011(0x84)]('targetLevel',_0x4d3390),this[_0x382011(0x84)](_0x382011(0xba),_0x4d3390),this[_0x382011(0x84)]('spellLevelHigh',_0x4d3390),_0x4d3390();}[_0x10cd18(0xd4)](_0x405108){const _0x3f52c2=_0x10cd18;this[_0x3f52c2(0xc7)]();const _0x758dc9=$(_0x3f52c2(0x86));for(let _0x10b806=0x0;_0x10b806<this[_0x3f52c2(0x79)][_0x3f52c2(0xdb)];++_0x10b806)this[_0x3f52c2(0xa6)](_0x758dc9,_0x10b806);$$(_0x405108)`
			${_0x758dc9}
		`;}['_render_renderOptions'](_0x140467,_0x6d1e48){const _0xebaff4=_0x10cd18,_0x4c2e9e=this['_additionalSpellsFlat'][_0x6d1e48];if(_0x6d1e48>0x0)_0x140467['append'](_0xebaff4(0xce));const _0x5440cf=this['_additionalSpellsFlat'][_0xebaff4(0xdb)]===0x1?null:$('<button\x20class=\x22btn\x20btn-xs\x20mb-1\x20mr-auto\x22\x20title=\x22Select\x20Spell\x20Set\x22>Spell\x20Set\x20'+(_0x6d1e48+0x1)+_0xebaff4(0x70))[_0xebaff4(0xde)](()=>this[_0xebaff4(0x88)][_0xebaff4(0x78)]=_0x6d1e48);if(this[_0xebaff4(0x79)][_0xebaff4(0xdb)]!==0x1){const _0x2fff87=()=>_0x5440cf[_0xebaff4(0x9e)](_0xebaff4(0x6e),this[_0xebaff4(0x88)][_0xebaff4(0x78)]===_0x6d1e48);this[_0xebaff4(0x84)](_0xebaff4(0x78),_0x2fff87),_0x2fff87();}const _0x1ee47b=this[_0xebaff4(0x7b)](_0x6d1e48),_0x4cdc51=this[_0xebaff4(0x74)](_0x6d1e48),_0x8d1962=Object[_0xebaff4(0x93)](_0x4c2e9e[_0xebaff4(0x8a)])[_0xebaff4(0xb3)]((_0x1e6c0c,_0x15d394)=>SortUtil[_0xebaff4(0xe3)](_0x1e6c0c[_0xebaff4(0xc3)]||0x0,_0x15d394[_0xebaff4(0xc3)]||0x0)||SortUtil[_0xebaff4(0xe3)](_0x1e6c0c['requiredCasterLevel']||0x0,_0x15d394[_0xebaff4(0xd9)]||0x0)),_0x4ffb4b=_0x1ee47b?$(_0xebaff4(0xd6)):null,_0xf6905=_0x4cdc51?$(_0xebaff4(0xe6)):null,_0x4998b3=_0x1ee47b?this[_0xebaff4(0x75)](_0x8d1962,{'isExpandedMatch':![]}):null,_0x2a43c7=_0x4cdc51?this[_0xebaff4(0x75)](_0x8d1962,{'isExpandedMatch':!![]}):null,_0x1f6999=_0x1ee47b?$(_0xebaff4(0xdd)):null,_0x49abd2=_0x4cdc51?$(_0xebaff4(0xdd)):null,_0x32270f=()=>{const _0xdbd39b=_0xebaff4,_0x19e1d5=!!this[_0xdbd39b(0x99)](_0x6d1e48)[_0xdbd39b(0xdb)];if(_0x4ffb4b)_0x4ffb4b[_0xdbd39b(0xbd)](_0x19e1d5);if(_0x1f6999)_0x1f6999['toggleVe'](!_0x19e1d5);const _0x45823a=!!this[_0xdbd39b(0x8d)](_0x6d1e48)[_0xdbd39b(0xdb)];if(_0xf6905)_0xf6905['toggleVe'](_0x45823a);if(_0x49abd2)_0x49abd2[_0xdbd39b(0xbd)](!_0x45823a);};this[_0xebaff4(0x84)](_0xebaff4(0xba),_0x32270f),this[_0xebaff4(0x84)](_0xebaff4(0xb0),_0x32270f),this[_0xebaff4(0x84)](_0xebaff4(0xe8),_0x32270f),this[_0xebaff4(0x84)](_0xebaff4(0xcd),_0x32270f),this[_0xebaff4(0x84)](_0xebaff4(0x78),_0x32270f),_0x32270f();const _0x150608=_0x1ee47b?$$`<div class="flex-col">
			<h3 class="bold my-0">Innate/Prepared Spells</h3>
			${_0x4ffb4b}
			${_0x4998b3}
			${_0x1f6999}
		</div>`:null,_0x463399=_0x4cdc51?$$`<div class="flex-col">
			<h3 class="bold my-0">Expanded Spell List</h3>
			${_0xf6905}
			${_0x2a43c7}
			${_0x49abd2}
		</div>`:null,_0x56330e=this[_0xebaff4(0xa2)](_0x6d1e48),_0x203691=_0x56330e?this[_0xebaff4(0xe4)](_0x6d1e48):null,_0x5c70f2=_0x56330e?$$`<div class="split-v-center">
			<h3 class="bold my-0 no-shrink mr-2">Ability Score</h3>
			${_0x203691}
		</div>`:null;$$`<div class="flex-col">
			${_0x5440cf}
			${_0x150608}
			${_0x463399}
			${_0x5c70f2}
		</div>`['appendTo'](_0x140467);}[_0x10cd18(0x75)](_0x2b65eb,{isExpandedMatch:_0x52ca2c}){const _0x4d5345=_0x10cd18;if(!_0x2b65eb[_0x4d5345(0xdb)])return null;const _0x41ec66={};return _0x2b65eb[_0x4d5345(0x8e)](_0x2c2d24=>{const _0x26299e=_0x4d5345;if(_0x2c2d24['isExpanded']!==_0x52ca2c)return;const _0x527c91=_0x2c2d24[_0x26299e(0xd9)]||_0x2c2d24[_0x26299e(0xc3)];(_0x41ec66[_0x527c91]=_0x41ec66[_0x527c91]||[])[_0x26299e(0xb7)](_0x2c2d24);}),Object[_0x4d5345(0x77)](_0x41ec66)[_0x4d5345(0xb3)](([_0xecf3b2],[_0x4e53f7])=>SortUtil['ascSort'](Number(_0xecf3b2),Number(_0x4e53f7)))[_0x4d5345(0xda)](([,_0x3312aa])=>{const _0x564d10=_0x4d5345,_0x2c3f75=_0x3312aa[0x0][_0x564d10(0xd9)]!=null,[_0x30cb02,_0x4e8007]=_0x3312aa[_0x564d10(0xbf)](_0x3c70ed=>!_0x3c70ed[_0x564d10(0xe0)]);_0x30cb02[_0x564d10(0xb3)]((_0x24524f,_0x5e6623)=>SortUtil[_0x564d10(0xa0)](_0x24524f[_0x564d10(0xa5)],_0x5e6623['uid'])),_0x4e8007[_0x564d10(0xb3)]((_0x57d8d0,_0x4f4472)=>SortUtil[_0x564d10(0xa0)](_0x57d8d0['filterExpression'],_0x4f4472[_0x564d10(0xe0)]));const _0x2533de=$$`<div class="col-9 flex-v-center">
					<div>${Renderer[_0x564d10(0x7e)]()[_0x564d10(0xd4)](_0x30cb02[_0x564d10(0xda)](_0x5c3149=>'{@spell\x20'+_0x5c3149[_0x564d10(0xa5)][_0x564d10(0x6d)]()+'}')[_0x564d10(0xa3)](',\x20'))}</div>
				</div>`;_0x4e8007[_0x564d10(0x8e)]((_0x42d6c2,_0x2ba533)=>{const _0x423912=_0x564d10,_0x378033=$(_0x423912(0x81)),_0x37897d=()=>{const _0x3b4a82=_0x423912;_0x378033['html'](this[_0x3b4a82(0x88)][_0x42d6c2[_0x3b4a82(0xb5)]]!=null?_0x3b4a82(0x76)+Renderer[_0x3b4a82(0x7e)]()[_0x3b4a82(0xd4)](_0x3b4a82(0xc1)+this[_0x3b4a82(0x88)][_0x42d6c2['key']][_0x3b4a82(0xae)]()+'}')+'</div>':'<div\x20class=\x22italic\x20ve-muted\x22>(select\x20a\x20spell)</div>');};this[_0x423912(0x84)](_0x42d6c2['key'],_0x37897d),_0x37897d();const _0x1afd0c=$(_0x423912(0x71))['click'](async()=>{const _0x1a52e2=_0x423912,_0x2c61b1=await this[_0x1a52e2(0x9f)][_0x1a52e2(0xb1)]({'filterExpression':_0x42d6c2['filterExpression']});if(_0x2c61b1==null||!_0x2c61b1[_0x1a52e2(0xdb)])return;const _0xf04ceb=_0x2c61b1[0x0];this[_0x1a52e2(0x88)][_0x42d6c2[_0x1a52e2(0xb5)]]=_0xf04ceb['name']+'|'+_0xf04ceb[_0x1a52e2(0x93)]['sourceJson'];});if(_0x30cb02[_0x423912(0xdb)]||_0x2ba533)_0x2533de[_0x423912(0x73)]('<div\x20class=\x22mr-2\x22>,</div>');$$`<div class="flex-v-center">${_0x1afd0c}${_0x378033}</div>`[_0x423912(0x6f)](_0x2533de);});const _0x494876=$$`<div class="py-1 flex-v-center stripe-even">
					<div class="col-3 text-center">${Parser[_0x564d10(0xa7)](_0x3312aa[0x0]['requiredCasterLevel']||_0x3312aa[0x0][_0x564d10(0xc3)])}</div>
					${_0x2533de}
				</div>`;if(_0x2c3f75){const _0x2e4fea=()=>_0x494876['toggleVe'](this[_0x564d10(0xe7)](_0x3312aa[0x0][_0x564d10(0xd9)]));this[_0x564d10(0x84)]('spellLevelLow',_0x2e4fea),this['_addHookBase'](_0x564d10(0xb0),_0x2e4fea),_0x2e4fea();}else{const _0x3dc084=()=>_0x494876[_0x564d10(0xbd)](this[_0x564d10(0xb6)](_0x3312aa[0x0]['requiredLevel']));this['_addHookBase']('currentLevel',_0x3dc084),this[_0x564d10(0x84)](_0x564d10(0xcd),_0x3dc084),_0x3dc084();}return _0x494876;});}[_0x10cd18(0xe4)](_0x2d1565){const _0x1e701b=_0x10cd18;return ComponentUiUtil[_0x1e701b(0xe2)](this,_0x1e701b(0x9d),{'values':this['_additionalSpells'][_0x2d1565][_0x1e701b(0x9d)][_0x1e701b(0x7f)],'fnDisplay':_0x4bab8f=>Parser[_0x1e701b(0x98)](_0x4bab8f),'isAllowNull':!![]});}['_isRequiredLevelInRange'](_0x41e6eb){const _0x4eb55b=_0x10cd18;return _0x41e6eb>(this['_state']['currentLevel']??Number['MAX_SAFE_INTEGER'])&&_0x41e6eb<=(this[_0x4eb55b(0x88)][_0x4eb55b(0xcd)]==null?Number[_0x4eb55b(0xd7)]:this[_0x4eb55b(0x88)][_0x4eb55b(0xcd)]);}[_0x10cd18(0xe7)](_0xb537e){const _0x3e72c4=_0x10cd18;return _0xb537e>=(this[_0x3e72c4(0x88)][_0x3e72c4(0xba)]??Number['MAX_SAFE_INTEGER'])&&_0xb537e<=(this['_state'][_0x3e72c4(0xb0)]==null?Number['MIN_SAFE_INTEGER']:this[_0x3e72c4(0x88)][_0x3e72c4(0xb0)]);}[_0x10cd18(0xab)](_0x3382d8,{isExpandedMatch:isExpandedMatch=null}={}){const _0x33b6ea=_0x10cd18;if(_0x3382d8==null)_0x3382d8=this[_0x33b6ea(0x88)]['ixSet'];return Object[_0x33b6ea(0x93)]((this['_additionalSpellsFlat'][_0x3382d8]||{'spells':[]})[_0x33b6ea(0x8a)])[_0x33b6ea(0xa4)](_0x346046=>{const _0x272ecb=_0x33b6ea;if(isExpandedMatch!=null){if(_0x346046['isExpanded']!==isExpandedMatch)return![];}if(_0x346046[_0x272ecb(0xd9)]!=null)return this[_0x272ecb(0xe7)](_0x346046[_0x272ecb(0xd9)]);else return this[_0x272ecb(0xb6)](_0x346046[_0x272ecb(0xc3)]);});}[_0x10cd18(0x99)](_0x3a7fef){const _0x336cc1=_0x10cd18;return this[_0x336cc1(0xab)](_0x3a7fef,{'isExpandedMatch':![]});}['_getFlatExpandedSpellsInRange'](_0x30e606){const _0x4e9355=_0x10cd18;return this[_0x4e9355(0xab)](_0x30e606,{'isExpandedMatch':!![]});}[_0x10cd18(0x7b)](_0x33097f){return this['_isAnyInnatePreparedExpanded'](_0x33097f,{'isExpandedMatch':![]});}[_0x10cd18(0x74)](_0x425a17){const _0x51dd52=_0x10cd18;return this[_0x51dd52(0x83)](_0x425a17,{'isExpandedMatch':!![]});}[_0x10cd18(0x83)](_0x36eaba,{isExpandedMatch:_0x86d0fc}){const _0x5b98c3=_0x10cd18;if(_0x36eaba==null)_0x36eaba=this[_0x5b98c3(0x88)][_0x5b98c3(0x78)];return Object[_0x5b98c3(0x93)]((this[_0x5b98c3(0x79)][_0x36eaba]||{'spells':[]})[_0x5b98c3(0x8a)])[_0x5b98c3(0xcc)](_0x4ac302=>_0x4ac302[_0x5b98c3(0xc2)]===_0x86d0fc);}[_0x10cd18(0xa2)](_0x38b542){const _0x4b8fe3=_0x10cd18;if(_0x38b542==null)_0x38b542=this[_0x4b8fe3(0x88)][_0x4b8fe3(0x78)];return(this[_0x4b8fe3(0xc4)][_0x38b542]?.[_0x4b8fe3(0x9d)]?.[_0x4b8fe3(0x7f)]?.[_0x4b8fe3(0xdb)]??0x0)>0x1;}[_0x10cd18(0x8b)](){const _0x2a58db=_0x10cd18;if(this[_0x2a58db(0xc4)][_0x2a58db(0xdb)]!==0x1)return![];return!this[_0x2a58db(0x79)]['some'](_0x458bb2=>_0x458bb2[_0x2a58db(0xe1)][_0x2a58db(0x9d)]?.[_0x2a58db(0x7f)]||Object[_0x2a58db(0x93)](_0x458bb2['spells'])[_0x2a58db(0xcc)](_0x536c52=>_0x536c52['filterExpression']));}[_0x10cd18(0xca)](){const _0x255de9=_0x10cd18;let _0x42913c=MiscUtil[_0x255de9(0xc8)](this['_getFlatSpellsInRange']()),_0x1ff62a=0x0;_0x42913c=_0x42913c['filter'](_0x4c2da3=>{const _0x3e7b49=_0x255de9;if(_0x4c2da3['filterExpression']){const _0xe464a=this[_0x3e7b49(0x88)][_0x4c2da3[_0x3e7b49(0xb5)]];if(!_0xe464a)return _0x1ff62a++,![];delete _0x4c2da3['filterExpression'],_0x4c2da3[_0x3e7b49(0xa5)]=this['_state'][_0x4c2da3[_0x3e7b49(0xb5)]];}return!![];});let _0x669540;if(this[_0x255de9(0xa2)](this[_0x255de9(0x88)][_0x255de9(0x78)])){_0x669540=this[_0x255de9(0x88)][_0x255de9(0x9d)];if(_0x669540==null)_0x1ff62a++;}else _0x669540=(this[_0x255de9(0x79)][this[_0x255de9(0x88)][_0x255de9(0x78)]]||{'meta':{}})[_0x255de9(0xe1)][_0x255de9(0x9d)];return{'isFormComplete':_0x1ff62a===0x0,'data':_0x42913c,'abilityAbv':_0x669540};}['pGetFormData'](){const _0x4213ec=_0x10cd18;return this[_0x4213ec(0xca)]();}[_0x10cd18(0x92)](){return{'ixSet':0x0,'currentLevel':null,'targetLevel':null,'spellLevelLow':null,'spellLevelHigh':null,'spellsExpanded':[],'ability':null};}}export{Charactermancer_AdditionalSpellsSelect};