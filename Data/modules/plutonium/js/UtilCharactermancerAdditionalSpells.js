const _0x4169=['pGetUserSelection','prepared','addHookExpandedSpells','toSpellCase','render','ascSortLower','filter','forEach','<div\x20class=\x22ve-small\x20flex-v-center\x20my-1\x20w-100\x20italic\x20ve-muted\x22>No\x20spells\x20at\x20this\x20level</div>','data','</div>','type','pGetUserInput','isExpanded','<button\x20class=\x22btn\x20btn-xs\x20mb-1\x20mr-auto\x22\x20title=\x22Select\x20Spell\x20Set\x22>Spell\x20Set\x20','_isAnyInnatePrepared','sort','ability','_getFlatInnatePreparedSpellsInRange','pApplyFormDataToActor','toggleClass','Unhandled\x20spell\x20recharge\x20type\x20\x22','_isRequiredCasterLevelInRange','appendTo','filterExpression','setEq','_getFlatData_doProcessSpellItem','abilityAbv','getFormData','6amHARi','_sourceHintText','1JzLwOl','_modalFilterSpells','active','_addHookBase','_getFlatExpandedSpellsInRange','ixSet','stringify','getFlatData','<div\x20class=\x22mr-2\x22>,</div>','expanded','_render_$getRows','_additionalSpellsFlat','get','114883soIiIj','436462TdYifp','Choose\x20Additional\x20Spell\x20Set','sourceHintText','spellsExpanded','innate','name','_getFlatSpellsInRange','modalFilterSpells','isPrepared','<button\x20class=\x22btn\x20btn-default\x20btn-xxs\x20mr-1\x22\x20title=\x22Choose\x20a\x20Spell\x22><span\x20class=\x22fas\x20fa-search\x22></span></button>','click','_getFlatData_doProcessAdditionMeta','join','toggleVe','1671713wWQpeP','spell','currentLevel','<div\x20class=\x22italic\x20ve-muted\x22>(select\x20a\x20spell)</div>','6oyfPmy','requiredCasterLevel','1DmJMkO','_isAnyExpanded','_getDefaultState','modalTitle','FlatSpell','214072dYmBqA','count','_additionalSpells','replace','MAX_SAFE_INTEGER','1500300sCjCOF','pGetFormData','{@spell\x20','copy','MIN_SAFE_INTEGER','Unhandled\x20additional\x20spell\x20format:\x20\x22','_getFlatData_doProcessSpellRechargeBlock','isNoChoice','map','key','casterLevel','pGetImportCompModalFormData','spellLevelHigh','spells','usesPer','push','rest','uses','append','_render_addLastExpandedSpellsHook','length','Charactermancer_AdditionalSpellsSelect.spells','daily','spellLevelLow','_isAnyInnatePreparedExpanded','934197FFxHyh','1202226IUiBDx','values','requiredLevel','ascSort','segregate','<div>','choose','preparationMode','_isRequiredLevelInRange','_state','some','toLowerCase','string','hashToIdMap','sourceJson','uid','pop','will','_render_renderOptions','parentAbilityAbv','Unhandled\x20spell\x20addition\x20type\x20\x22','html','targetLevel','ritual','entries'];const _0x362f=function(_0x378f1b,_0x497db1){_0x378f1b=_0x378f1b-0xcf;let _0x41694a=_0x4169[_0x378f1b];return _0x41694a;};const _0x1f4951=_0x362f;(function(_0x17c1de,_0x37e9f6){const _0x4cbe0f=_0x362f;while(!![]){try{const _0x443bc0=parseInt(_0x4cbe0f(0xf0))+parseInt(_0x4cbe0f(0xd7))+parseInt(_0x4cbe0f(0x137))*-parseInt(_0x4cbe0f(0x129))+-parseInt(_0x4cbe0f(0x136))*-parseInt(_0x4cbe0f(0x127))+-parseInt(_0x4cbe0f(0x145))*parseInt(_0x4cbe0f(0x14b))+parseInt(_0x4cbe0f(0xf1))+-parseInt(_0x4cbe0f(0x149))*parseInt(_0x4cbe0f(0xd2));if(_0x443bc0===_0x37e9f6)break;else _0x17c1de['push'](_0x17c1de['shift']());}catch(_0x1a811d){_0x17c1de['push'](_0x17c1de['shift']());}}}(_0x4169,0xe3e26));import{Charactermancer_Util}from'./UtilCharactermancer.js';import{DataConverterSpell}from'./DataConverterSpell.js';class Charactermancer_AdditionalSpellsUtil{static[_0x1f4951(0x130)](_0x4dda87){const _0x5dd44a=_0x1f4951;return _0x4dda87=MiscUtil[_0x5dd44a(0xda)](_0x4dda87),_0x4dda87[_0x5dd44a(0xdf)](_0x640f1f=>{const _0x499d2a=_0x5dd44a,_0x598669={},_0x131400={},_0x10cb3e=[];return Object[_0x499d2a(0x109)](_0x640f1f)[_0x499d2a(0x111)](([_0x4e7f70,_0x25074f])=>{const _0x443121=_0x499d2a;_0x10cb3e['push'](_0x4e7f70);switch(_0x4e7f70){case'ability':_0x598669[_0x4e7f70]=_0x25074f;break;case _0x443121(0x13b):case'prepared':case _0x443121(0x132):{this['_getFlatData_doProcessAdditionMeta']({'additionType':_0x4e7f70,'additionMeta':_0x25074f,'outSpells':_0x131400,'keyPath':_0x10cb3e});break;}default:throw new Error(_0x443121(0x105)+_0x4e7f70+'\x22');}_0x10cb3e['pop']();}),{'meta':_0x598669,'spells':_0x131400};});}static[_0x1f4951(0x142)](_0x27ee6e){const _0x28f82a=_0x1f4951,{additionMeta:_0x55c710,keyPath:_0x46f525}=_0x27ee6e;Object[_0x28f82a(0x109)](_0x55c710)[_0x28f82a(0x111)](([_0x5f4181,_0x36e13f])=>{const _0x32537d=_0x28f82a;_0x46f525[_0x32537d(0xe6)](_0x5f4181),_0x36e13f instanceof Array?_0x36e13f[_0x32537d(0x111)]((_0x4fd07f,_0x45ea78)=>this[_0x32537d(0x124)]({..._0x27ee6e,'levelOrCasterLevel':_0x5f4181,'spellItem':_0x4fd07f,'ix':_0x45ea78})):Object[_0x32537d(0x109)](_0x36e13f)['forEach'](([_0x2f4cb9,_0x2cf6bf])=>{const _0x45876a=_0x32537d;this[_0x45876a(0xdd)]({..._0x27ee6e,'levelOrCasterLevel':_0x5f4181,'rechargeType':_0x2f4cb9,'levelMetaInner':_0x2cf6bf});}),_0x46f525[_0x32537d(0x101)]();});}static['_getFlatData_doProcessSpellItem'](_0x101553){const _0x4aaa51=_0x1f4951,{additionType:_0x1616f5,additionMeta:_0x32c9b3,outSpells:_0x362e94,keyPath:_0x54b063,spellItem:_0x206217,ix:_0x12defc,rechargeType:_0xe139b6,uses:_0x3a4893,usesPer:_0x22d06f,levelOrCasterLevel:_0x1c3eaf}=_0x101553;_0x54b063[_0x4aaa51(0xe6)](_0x12defc);const _0x30d452={'isExpanded':_0x1616f5==='expanded','isPrepared':_0x1616f5===_0x4aaa51(0x10b)||_0x1616f5===_0x4aaa51(0x13b),'preparationMode':_0x1616f5===_0x4aaa51(0x10b)?'always':_0x4aaa51(0x13b)},_0x2bb397=/^s(\d+)$/['exec'](_0x1c3eaf);if(_0x2bb397)_0x30d452[_0x4aaa51(0x14a)]=Number(_0x2bb397[0x1]);else _0x30d452['requiredLevel']=Number(_0x1c3eaf);if(_0xe139b6)switch(_0xe139b6){case _0x4aaa51(0xe7):case _0x4aaa51(0xed):break;case _0x4aaa51(0x102):case _0x4aaa51(0x108):{_0x30d452[_0x4aaa51(0xf8)]='atwill',_0x30d452['isPrepared']=_0xe139b6!==_0x4aaa51(0x108);break;}case'_':break;default:throw new Error('Unhandled\x20recharge\x20type\x20\x22'+_0xe139b6+'\x22');}if(_0x3a4893)_0x30d452[_0x4aaa51(0xe8)]=_0x3a4893;if(_0x22d06f)_0x30d452[_0x4aaa51(0xe5)]=_0x22d06f;if(typeof _0x206217===_0x4aaa51(0xfd)){const _0x33eede=_0x54b063[_0x4aaa51(0x143)]('__');_0x362e94[_0x33eede]=new Charactermancer_AdditionalSpellsUtil['FlatSpell']({'type':_0x4aaa51(0x146),'key':_0x33eede,..._0x30d452,'uid':_0x206217});}else{if(_0x206217[_0x4aaa51(0xf7)]){const _0x10b7c7=_0x206217[_0x4aaa51(0xd3)]||0x1;for(let _0x1aa5ea=0x0;_0x1aa5ea<_0x10b7c7;++_0x1aa5ea){_0x54b063[_0x4aaa51(0xe6)](_0x1aa5ea);const _0x1d6ed8=_0x54b063[_0x4aaa51(0x143)]('__');_0x362e94[_0x1d6ed8]=new Charactermancer_AdditionalSpellsUtil['FlatSpell']({'type':'choose','key':_0x1d6ed8,..._0x30d452,'filterExpression':_0x206217[_0x4aaa51(0xf7)]}),_0x54b063[_0x4aaa51(0x101)]();}}else throw new Error(_0x4aaa51(0xdc)+JSON[_0x4aaa51(0x12f)](_0x206217)+'\x22');}_0x54b063['pop']();}static[_0x1f4951(0xdd)](_0x1b65cc){const _0x5d2d51=_0x1f4951,{additionType:_0x3d32fa,additionMeta:_0x3cb710,outSpells:_0x5a51d4,keyPath:_0x3d1bbb,levelOrCasterLevel:_0x5a435c,rechargeType:_0x2f9d91,levelMetaInner:_0x223d09}=_0x1b65cc;_0x3d1bbb[_0x5d2d51(0xe6)](_0x2f9d91);switch(_0x2f9d91){case _0x5d2d51(0xe7):case _0x5d2d51(0xed):{const _0x18bb80=_0x2f9d91===_0x5d2d51(0xe7)?'sr':'lr';Object[_0x5d2d51(0x109)](_0x223d09)[_0x5d2d51(0x111)](([_0x5026ff,_0x8d9ada])=>{const _0x1ceb5c=_0x5d2d51;_0x3d1bbb['push'](_0x5026ff),_0x5026ff=_0x5026ff[_0x1ceb5c(0xd5)](/^(\d+)e$/,'$1');const _0x2c3087=Number(_0x5026ff);_0x8d9ada[_0x1ceb5c(0x111)]((_0x329823,_0x17bca2)=>this[_0x1ceb5c(0x124)]({..._0x1b65cc,'spellItem':_0x329823,'ix':_0x17bca2,'uses':_0x2c3087,'usesPer':_0x18bb80})),_0x3d1bbb[_0x1ceb5c(0x101)]();});break;}case'will':case _0x5d2d51(0x108):case'_':{_0x223d09['forEach']((_0x52112e,_0x1d0b1f)=>this['_getFlatData_doProcessSpellItem']({..._0x1b65cc,'spellItem':_0x52112e,'ix':_0x1d0b1f}));break;}default:throw new Error(_0x5d2d51(0x11f)+_0x2f9d91+'\x22');}_0x3d1bbb[_0x5d2d51(0x101)]();}}Charactermancer_AdditionalSpellsUtil[_0x1f4951(0xd1)]=class{constructor(_0x3509a6){const _0x528a36=_0x1f4951;this[_0x528a36(0x115)]=_0x3509a6[_0x528a36(0x115)],this[_0x528a36(0xe0)]=_0x3509a6[_0x528a36(0xe0)],this[_0x528a36(0x117)]=_0x3509a6[_0x528a36(0x117)],this[_0x528a36(0x13f)]=_0x3509a6[_0x528a36(0x13f)],this[_0x528a36(0xf8)]=_0x3509a6[_0x528a36(0xf8)],this[_0x528a36(0x14a)]=_0x3509a6[_0x528a36(0x14a)],this['requiredLevel']=_0x3509a6['requiredLevel'],this['uses']=_0x3509a6[_0x528a36(0xe8)],this[_0x528a36(0xe5)]=_0x3509a6[_0x528a36(0xe5)];const [_0x5dc4ab,_0x440112=SRC_PHB[_0x528a36(0xfc)]()]=Renderer['splitTagByPipe'](_0x3509a6['uid'][_0x528a36(0xfc)]());this[_0x528a36(0x100)]=_0x5dc4ab+'|'+_0x440112,this[_0x528a36(0x122)]=_0x3509a6[_0x528a36(0x122)];}};class Charactermancer_AdditionalSpellsSelect extends BaseComponent{static async[_0x1f4951(0x116)](_0x56d137){const _0x23c7e6=_0x1f4951;_0x56d137=_0x56d137||{};const {additionalSpells:_0xe55c8}=_0x56d137;if(!_0xe55c8||!_0xe55c8['length'])return{'isFormComplete':!![],'data':[]};const _0x4881c9=new ModalFilterSpells({'namespace':_0x23c7e6(0xec),'isRadio':!![]}),_0xa0fef9=new this({..._0x56d137,'modalFilterSpells':_0x4881c9});_0xa0fef9['currentLevel']=_0x56d137['currentLevel'],_0xa0fef9['targetLevel']=_0x56d137['targetLevel'],_0xa0fef9[_0x23c7e6(0xee)]=_0x56d137[_0x23c7e6(0xee)],_0xa0fef9['spellLevelHigh']=_0x56d137[_0x23c7e6(0xe3)];if(_0xa0fef9[_0x23c7e6(0xde)]())return _0xa0fef9['pGetFormData']();return Charactermancer_Util[_0x23c7e6(0xe2)]({'comp':_0xa0fef9});}static async[_0x1f4951(0x11d)](_0xb0318b,_0x413da6,_0x350640){const _0x513956=_0x1f4951;_0x350640=_0x350640||{};if(!_0x413da6||!_0x413da6?.['data']?.['length'])return;const _0x1ce4a9=_0x350640[_0x513956(0x125)]==='inherit'?_0x350640[_0x513956(0x104)]:_0x350640['abilityAbv'];await DataConverterSpell['pGetSpellHashToItemPosMapAndFillSpellsFromTagIds'](_0xb0318b,_0x413da6[_0x513956(0x113)],{'optsGetSpellItem':{'casterLevel':_0x350640[_0x513956(0xe1)],'abilityAbv':_0x1ce4a9},'hashToIdMap':_0x350640[_0x513956(0xfe)]});}constructor(_0x49e6c5){const _0x212b6e=_0x1f4951;_0x49e6c5=_0x49e6c5||{},super(),this[_0x212b6e(0xd4)]=_0x49e6c5['additionalSpells'],this[_0x212b6e(0x128)]=_0x49e6c5[_0x212b6e(0x139)],this[_0x212b6e(0x12a)]=_0x49e6c5[_0x212b6e(0x13e)],this[_0x212b6e(0x134)]=Charactermancer_AdditionalSpellsUtil[_0x212b6e(0x130)](_0x49e6c5['additionalSpells']);}get[_0x1f4951(0xd0)](){const _0xf018fd=_0x1f4951;return _0xf018fd(0x138)+(this[_0xf018fd(0x128)]?'\x20('+this[_0xf018fd(0x128)]+')':'');}set[_0x1f4951(0x147)](_0x1b767b){const _0x706805=_0x1f4951;this[_0x706805(0xfa)][_0x706805(0x147)]=_0x1b767b;}set['targetLevel'](_0x2041d3){const _0x5a9f74=_0x1f4951;this[_0x5a9f74(0xfa)]['targetLevel']=_0x2041d3;}set['spellLevelLow'](_0x24e08b){const _0x5abfc4=_0x1f4951;this[_0x5abfc4(0xfa)][_0x5abfc4(0xee)]=_0x24e08b;}set['spellLevelHigh'](_0x41cfbb){const _0x364466=_0x1f4951;this[_0x364466(0xfa)][_0x364466(0xe3)]=_0x41cfbb;}[_0x1f4951(0x10c)](_0x2f8a3d){const _0x4763cd=_0x1f4951;this[_0x4763cd(0x12c)]('spellsExpanded',_0x2f8a3d);}get['spellsExpanded'](){const _0x4f4ae5=_0x1f4951;return this[_0x4f4ae5(0xfa)]['spellsExpanded'];}[_0x1f4951(0xea)](){const _0x48e0f1=_0x1f4951,_0x56ec71=()=>{const _0x2bf7c6=_0x362f,_0x53a8e4=this[_0x2bf7c6(0x126)](),_0x4e91a1=_0x53a8e4[_0x2bf7c6(0x113)][_0x2bf7c6(0x110)](_0x4db644=>_0x4db644[_0x2bf7c6(0x117)])[_0x2bf7c6(0xdf)](_0x3b8f61=>_0x3b8f61['uid'][_0x2bf7c6(0xfc)]()),_0x401141=new Set(this[_0x2bf7c6(0xfa)][_0x2bf7c6(0x13a)]),_0x197a77=new Set(_0x4e91a1);if(!CollectionUtil[_0x2bf7c6(0x123)](_0x401141,_0x197a77))this[_0x2bf7c6(0xfa)][_0x2bf7c6(0x13a)]=_0x4e91a1;};this[_0x48e0f1(0x12c)](_0x48e0f1(0x12e),_0x56ec71),this['_addHookBase'](_0x48e0f1(0x147),_0x56ec71),this[_0x48e0f1(0x12c)]('targetLevel',_0x56ec71),this[_0x48e0f1(0x12c)](_0x48e0f1(0xee),_0x56ec71),this[_0x48e0f1(0x12c)](_0x48e0f1(0xe3),_0x56ec71),_0x56ec71();}[_0x1f4951(0x10e)](_0x4a1651){const _0x394a7e=_0x1f4951;this[_0x394a7e(0xea)]();const _0x2075f3=$('<div\x20class=\x22flex-col\x20w-100\x22></div>');for(let _0x17398a=0x0;_0x17398a<this[_0x394a7e(0x134)][_0x394a7e(0xeb)];++_0x17398a)this[_0x394a7e(0x103)](_0x2075f3,_0x17398a);$$(_0x4a1651)`
			${_0x2075f3}
		`;}[_0x1f4951(0x103)](_0x2faa93,_0x57c9cb){const _0x1b22c9=_0x1f4951,_0x2ceb9f=this[_0x1b22c9(0x134)][_0x57c9cb];if(_0x57c9cb>0x0)_0x2faa93[_0x1b22c9(0xe9)]('<hr\x20class=\x22hr-1\x22>');const _0x1eee50=this[_0x1b22c9(0x134)][_0x1b22c9(0xeb)]===0x1?null:$(_0x1b22c9(0x118)+(_0x57c9cb+0x1)+'</button>')[_0x1b22c9(0x141)](()=>this[_0x1b22c9(0xfa)][_0x1b22c9(0x12e)]=_0x57c9cb);if(this['_additionalSpellsFlat'][_0x1b22c9(0xeb)]!==0x1){const _0x4ed42b=()=>_0x1eee50[_0x1b22c9(0x11e)](_0x1b22c9(0x12b),this['_state'][_0x1b22c9(0x12e)]===_0x57c9cb);this['_addHookBase'](_0x1b22c9(0x12e),_0x4ed42b),_0x4ed42b();}const _0x4b55a5=this[_0x1b22c9(0x119)](_0x57c9cb),_0x5aa580=this[_0x1b22c9(0x14c)](_0x57c9cb),_0x464213=Object[_0x1b22c9(0xf2)](_0x2ceb9f['spells'])[_0x1b22c9(0x11a)]((_0x493ea7,_0x198182)=>SortUtil[_0x1b22c9(0xf4)](_0x493ea7[_0x1b22c9(0xf3)]||0x0,_0x198182[_0x1b22c9(0xf3)]||0x0)||SortUtil[_0x1b22c9(0xf4)](_0x493ea7[_0x1b22c9(0x14a)]||0x0,_0x198182[_0x1b22c9(0x14a)]||0x0)),_0x29152d=_0x4b55a5?$('<div\x20class=\x22flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>'):null,_0x2c3a64=_0x5aa580?$('<div\x20class=\x22flex-v-center\x20py-1\x22>\x0a\x09\x09\x09<div\x20class=\x22col-3\x20text-center\x22>Spell\x20Level</div>\x0a\x09\x09\x09<div\x20class=\x22col-9\x22>Spells</div>\x0a\x09\x09</div>'):null,_0x22406d=_0x4b55a5?this[_0x1b22c9(0x133)](_0x464213,{'isExpandedMatch':![]}):null,_0x501058=_0x5aa580?this['_render_$getRows'](_0x464213,{'isExpandedMatch':!![]}):null,_0x2044ae=_0x4b55a5?$(_0x1b22c9(0x112)):null,_0x4a9a4b=_0x5aa580?$(_0x1b22c9(0x112)):null,_0x7f70bf=()=>{const _0x349419=_0x1b22c9,_0x5d2a74=!!this[_0x349419(0x11c)](_0x57c9cb)[_0x349419(0xeb)];if(_0x29152d)_0x29152d[_0x349419(0x144)](_0x5d2a74);if(_0x2044ae)_0x2044ae[_0x349419(0x144)](!_0x5d2a74);const _0x1ded1c=!!this[_0x349419(0x12d)](_0x57c9cb)['length'];if(_0x2c3a64)_0x2c3a64[_0x349419(0x144)](_0x1ded1c);if(_0x4a9a4b)_0x4a9a4b[_0x349419(0x144)](!_0x1ded1c);};this[_0x1b22c9(0x12c)](_0x1b22c9(0xee),_0x7f70bf),this[_0x1b22c9(0x12c)](_0x1b22c9(0xe3),_0x7f70bf),this[_0x1b22c9(0x12c)]('currentLevel',_0x7f70bf),this[_0x1b22c9(0x12c)](_0x1b22c9(0x107),_0x7f70bf),this['_addHookBase']('ixSet',_0x7f70bf),_0x7f70bf();const _0x36539e=_0x4b55a5?$$`<div class="flex-col">
			<h3 class="bold my-0">Innate/Prepared Spells</h3>
			${_0x29152d}
			${_0x22406d}
			${_0x2044ae}
		</div>`:null,_0x420113=_0x5aa580?$$`<div class="flex-col">
			<h3 class="bold my-0">Expanded Spell List</h3>
			${_0x2c3a64}
			${_0x501058}
			${_0x4a9a4b}
		</div>`:null;$$`<div class="flex-col">
			${_0x1eee50}
			${_0x36539e}
			${_0x420113}
		</div>`[_0x1b22c9(0x121)](_0x2faa93);}[_0x1f4951(0x133)](_0x56e741,{isExpandedMatch:_0x366911}){const _0x52b33d=_0x1f4951;if(!_0x56e741[_0x52b33d(0xeb)])return null;const _0x390af5={};return _0x56e741[_0x52b33d(0x111)](_0x161c92=>{const _0x26709f=_0x52b33d;if(_0x161c92[_0x26709f(0x117)]!==_0x366911)return;const _0x563595=_0x161c92[_0x26709f(0x14a)]||_0x161c92['requiredLevel'];(_0x390af5[_0x563595]=_0x390af5[_0x563595]||[])[_0x26709f(0xe6)](_0x161c92);}),Object[_0x52b33d(0x109)](_0x390af5)['sort'](([_0x2c20ca],[_0x4aaf47])=>SortUtil[_0x52b33d(0xf4)](Number(_0x2c20ca),Number(_0x4aaf47)))[_0x52b33d(0xdf)](([,_0x550474])=>{const _0x425967=_0x52b33d,_0x53aecf=_0x550474[0x0]['requiredCasterLevel']!=null,[_0x1d3c1a,_0x5ebda8]=_0x550474[_0x425967(0xf5)](_0x4914e5=>!_0x4914e5[_0x425967(0x122)]);_0x1d3c1a[_0x425967(0x11a)]((_0x86433c,_0x558f39)=>SortUtil['ascSortLower'](_0x86433c[_0x425967(0x100)],_0x558f39[_0x425967(0x100)])),_0x5ebda8[_0x425967(0x11a)]((_0x5648c1,_0xb21159)=>SortUtil[_0x425967(0x10f)](_0x5648c1[_0x425967(0x122)],_0xb21159[_0x425967(0x122)]));const _0x16514b=$$`<div class="col-9 flex-v-center">
					<div>${Renderer[_0x425967(0x135)]()[_0x425967(0x10e)](_0x1d3c1a[_0x425967(0xdf)](_0x115c4f=>_0x425967(0xd9)+_0x115c4f[_0x425967(0x100)][_0x425967(0x10d)]()+'}')['join'](',\x20'))}</div>
				</div>`;_0x5ebda8['forEach']((_0x262319,_0x5bb2cd)=>{const _0x47ee0d=_0x425967,_0x3eb62b=$('<div\x20class=\x22flex-v-center\x22></div>'),_0x9d83d7=()=>{const _0x4b2e15=_0x362f;_0x3eb62b[_0x4b2e15(0x106)](this[_0x4b2e15(0xfa)][_0x262319[_0x4b2e15(0xe0)]]!=null?_0x4b2e15(0xf6)+Renderer[_0x4b2e15(0x135)]()[_0x4b2e15(0x10e)](_0x4b2e15(0xd9)+this[_0x4b2e15(0xfa)][_0x262319[_0x4b2e15(0xe0)]][_0x4b2e15(0xfc)]()+'}')+_0x4b2e15(0x114):_0x4b2e15(0x148));};this[_0x47ee0d(0x12c)](_0x262319[_0x47ee0d(0xe0)],_0x9d83d7),_0x9d83d7();const _0x5a9807=$(_0x47ee0d(0x140))[_0x47ee0d(0x141)](async()=>{const _0x13fdb8=_0x47ee0d,_0x1cb847=await this[_0x13fdb8(0x12a)][_0x13fdb8(0x10a)]({'filterExpression':_0x262319[_0x13fdb8(0x122)]});if(_0x1cb847==null||!_0x1cb847[_0x13fdb8(0xeb)])return;const _0x3bbb51=_0x1cb847[0x0];this[_0x13fdb8(0xfa)][_0x262319[_0x13fdb8(0xe0)]]=_0x3bbb51[_0x13fdb8(0x13c)]+'|'+_0x3bbb51['values'][_0x13fdb8(0xff)];});if(_0x1d3c1a[_0x47ee0d(0xeb)]||_0x5bb2cd)_0x16514b[_0x47ee0d(0xe9)](_0x47ee0d(0x131));$$`<div class="flex-v-center">${_0x5a9807}${_0x3eb62b}</div>`[_0x47ee0d(0x121)](_0x16514b);});const _0x1d4f48=$$`<div class="py-1 flex-v-center stripe-even">
					<div class="col-3 text-center">${Parser['getOrdinalForm'](_0x550474[0x0][_0x425967(0x14a)]||_0x550474[0x0][_0x425967(0xf3)])}</div>
					${_0x16514b}
				</div>`;if(_0x53aecf){const _0xe9a8f0=()=>_0x1d4f48[_0x425967(0x144)](this[_0x425967(0x120)](_0x550474[0x0]['requiredCasterLevel']));this[_0x425967(0x12c)](_0x425967(0xee),_0xe9a8f0),this[_0x425967(0x12c)](_0x425967(0xe3),_0xe9a8f0),_0xe9a8f0();}else{const _0x5792e4=()=>_0x1d4f48['toggleVe'](this[_0x425967(0xf9)](_0x550474[0x0][_0x425967(0xf3)]));this[_0x425967(0x12c)](_0x425967(0x147),_0x5792e4),this['_addHookBase']('targetLevel',_0x5792e4),_0x5792e4();}return _0x1d4f48;});}[_0x1f4951(0xf9)](_0x4c9dac){const _0x267d81=_0x1f4951;return _0x4c9dac>(this[_0x267d81(0xfa)][_0x267d81(0x147)]??Number['MAX_SAFE_INTEGER'])&&_0x4c9dac<=(this[_0x267d81(0xfa)]['targetLevel']==null?Number[_0x267d81(0xdb)]:this['_state'][_0x267d81(0x107)]);}[_0x1f4951(0x120)](_0x4f0929){const _0xd1b43=_0x1f4951;return _0x4f0929>=(this[_0xd1b43(0xfa)][_0xd1b43(0xee)]??Number[_0xd1b43(0xd6)])&&_0x4f0929<=(this[_0xd1b43(0xfa)]['spellLevelHigh']==null?Number[_0xd1b43(0xdb)]:this[_0xd1b43(0xfa)][_0xd1b43(0xe3)]);}[_0x1f4951(0x13d)](_0x3ba206,{isExpandedMatch:isExpandedMatch=null}={}){const _0x37104c=_0x1f4951;if(_0x3ba206==null)_0x3ba206=this[_0x37104c(0xfa)]['ixSet'];return Object[_0x37104c(0xf2)]((this['_additionalSpellsFlat'][_0x3ba206]||{'spells':[]})[_0x37104c(0xe4)])[_0x37104c(0x110)](_0x40d7cd=>{const _0x12994c=_0x37104c;if(isExpandedMatch!=null){if(_0x40d7cd[_0x12994c(0x117)]!==isExpandedMatch)return![];}if(_0x40d7cd[_0x12994c(0x14a)]!=null)return this[_0x12994c(0x120)](_0x40d7cd['requiredCasterLevel']);else return this[_0x12994c(0xf9)](_0x40d7cd[_0x12994c(0xf3)]);});}[_0x1f4951(0x11c)](_0x515c3f){return this['_getFlatSpellsInRange'](_0x515c3f,{'isExpandedMatch':![]});}['_getFlatExpandedSpellsInRange'](_0x5efc66){return this['_getFlatSpellsInRange'](_0x5efc66,{'isExpandedMatch':!![]});}['_isAnyInnatePrepared'](_0x4c0abd){const _0x191a2d=_0x1f4951;return this[_0x191a2d(0xef)](_0x4c0abd,{'isExpandedMatch':![]});}[_0x1f4951(0x14c)](_0x5b1a35){return this['_isAnyInnatePreparedExpanded'](_0x5b1a35,{'isExpandedMatch':!![]});}[_0x1f4951(0xef)](_0x2f8bce,{isExpandedMatch:_0x1ce17a}){const _0x5b9238=_0x1f4951;if(_0x2f8bce==null)_0x2f8bce=this[_0x5b9238(0xfa)][_0x5b9238(0x12e)];return Object[_0x5b9238(0xf2)]((this['_additionalSpellsFlat'][_0x2f8bce]||{'spells':[]})['spells'])['some'](_0x25d745=>_0x25d745[_0x5b9238(0x117)]===_0x1ce17a);}[_0x1f4951(0xde)](){const _0x3dcf61=_0x1f4951;if(this[_0x3dcf61(0xd4)]['length']!==0x1)return![];return!this[_0x3dcf61(0x134)][_0x3dcf61(0xfb)](_0x4c6153=>Object['values'](_0x4c6153[_0x3dcf61(0xe4)])[_0x3dcf61(0xfb)](_0x4f6225=>_0x4f6225[_0x3dcf61(0x122)]));}[_0x1f4951(0x126)](){const _0x3ccdeb=_0x1f4951;let _0x320107=MiscUtil[_0x3ccdeb(0xda)](this['_getFlatSpellsInRange']()),_0x287faf=0x0;return _0x320107=_0x320107[_0x3ccdeb(0x110)](_0x1a4753=>{const _0x2395d6=_0x3ccdeb;if(_0x1a4753[_0x2395d6(0x122)]){const _0x57b63e=this[_0x2395d6(0xfa)][_0x1a4753[_0x2395d6(0xe0)]];if(!_0x57b63e)return _0x287faf++,![];delete _0x1a4753[_0x2395d6(0x122)],_0x1a4753[_0x2395d6(0x100)]=this[_0x2395d6(0xfa)][_0x1a4753[_0x2395d6(0xe0)]];}return!![];}),{'isFormComplete':_0x287faf===0x0,'data':_0x320107,'abilityAbv':(this['_additionalSpellsFlat'][this['_state']['ixSet']]||{'meta':{}})['meta'][_0x3ccdeb(0x11b)]};}[_0x1f4951(0xd8)](){const _0xadcac=_0x1f4951;return this[_0xadcac(0x126)]();}[_0x1f4951(0xcf)](){return{'ixSet':0x0,'currentLevel':null,'targetLevel':null,'spellLevelLow':null,'spellLevelHigh':null,'spellsExpanded':[]};}}export{Charactermancer_AdditionalSpellsSelect};