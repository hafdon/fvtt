const _0x277c=['fluff','sourceJsonToAbv','isSplitPacksActor','bind','isToken','getItemsFromHomebrew','_actor','1-4','Weight','pGetSources','pCacheAndGet','1-5','_pImportEntry_pGetFolderId','Rarity','getFolderPathMeta','items','wondrous','typeText','0-5','weightValueToNumber','mutateForFilters','log','uppercaseFirst','srd','sort','\x22\x20(from\x20\x22','Type','toTitleCase','_content','poison','itemFluff','_vType','DataSourceSpecial','rarity','folder','quantity','Unknown','Unknown\x20Type','_pack','Custom\x20URL','SOURCE_TYP_BREW','itemValueToFull','notifications','Items','_titleSearch','importEntity','type','Error(s)\x20when\x20breaking\x20','_pImportEntry_pImportToActor','itemTypeToFull','Item','SOURCE_TYP_CUSTOM','attunement','Upload\x20File','createEmbeddedEntity','sheetItemsAmmo','replace','item','sheet','value','filter','_list','source','PG_ITEMS','isTemp','_pageFilter','getData','map','SRD','DataSourceUrl','insert','all','join','cost','packContents','itemWeightToFull','weight','OwnedItem','sourceJsonToFull','forEach','sortEntries','special','pGetItems','create','name','absorbFnBindListeners','Wondrous\x20Item','error','_activateListeners_absorbListItems','importItem','length','string','_pImportEntry_pImportToItems','pGetItemFluff','get','populatePropertyAndTypeReference','doAbsorbItems','data','SOURCE_TYP_OFFICIAL_ALL','text-center','Item\x20\x22','Unhandled\x20pack\x20contents\x20type\x20\x22','split','ammo','page','5etools','Poison','ascSortLower','_titleButtonRun','pGetItemItem','_attunementCategory','ammoType','_fluffLookup','_pImportEntry_getSheetItemsAmmo','enhanceItem','consumableType','pGetHomebrewSources','consumable'];(function(_0x545048,_0x277cbb){const _0x1f8548=function(_0x24ccae){while(--_0x24ccae){_0x545048['push'](_0x545048['shift']());}};_0x1f8548(++_0x277cbb);}(_0x277c,0x7a));const _0x1f85=function(_0x545048,_0x277cbb){_0x545048=_0x545048-0x0;let _0x1f8548=_0x277c[_0x545048];return _0x1f8548;};'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';class ImportListItem extends ImportList{constructor(_0x47eaba){_0x47eaba=_0x47eaba||{},super({'title':'Import\x20Items'},_0x47eaba,{'namespace':_0x1f85('0x35'),'titleSearch':_0x1f85('0xb'),'sidebarTab':'items','gameProp':'items','defaultFolderPath':[_0x1f85('0x27')],'folderType':_0x1f85('0x2e'),'fnListSort':PageFilterItems['sortItems'],'pageFilter':new PageFilterItems(),'pFnPostProcessEntries':ImportListItem[_0x1f85('0x4c')][_0x1f85('0x75')](ImportListItem),'page':UrlUtil[_0x1f85('0x3b')],'isPreviewable':!![]}),this[_0x1f85('0x6c')]=null;}async[_0x1f85('0x5')](){const _0x39eff1={'pPostLoad':async _0x5a8f46=>{return Renderer['item'][_0x1f85('0x1')](_0x5a8f46);}};return[new ImportList[(_0x1f85('0x1c'))](Config['get']('ui','isStreamerMode')?_0x1f85('0x40'):_0x1f85('0x65'),async()=>(await Vetools[_0x1f85('0x4e')]())[_0x1f85('0x35')],{'cacheKey':'5etools-items','filterTypes':[ImportList[_0x1f85('0x5e')]],'isDefault':!![]}),new ImportList[(_0x1f85('0x41'))](_0x1f85('0x23'),'',{..._0x39eff1,'filterTypes':[ImportList[_0x1f85('0x2f')]]}),new ImportList['DataSourceFile'](_0x1f85('0x31'),{..._0x39eff1,'filterTypes':[ImportList[_0x1f85('0x2f')]]}),...(await Vetools[_0x1f85('0x70')](_0x1f85('0x35')))[_0x1f85('0x3f')](({name,url})=>new ImportList[(_0x1f85('0x41'))](name,url,{..._0x39eff1,'filterTypes':[ImportList[_0x1f85('0x24')]]}))];}[_0x1f85('0x3e')](){return{'isPreviewable':this['_isPreviewable'],'titleButtonRun':this[_0x1f85('0x68')],'titleSearch':this[_0x1f85('0x28')],'cols':[{'name':'Name','width':0x3,'field':'name'},{'name':'Type','width':'3-2','field':_0x1f85('0x2a')},{'name':'Cost','width':'1-4','field':_0x1f85('0x45'),'rowClassName':_0x1f85('0x5f')},{'name':_0x1f85('0x4'),'width':_0x1f85('0x3'),'field':'weight','rowClassName':_0x1f85('0x5f')},{'name':'A.','width':_0x1f85('0xe'),'field':_0x1f85('0x30'),'rowClassName':_0x1f85('0x5f')},{'name':_0x1f85('0x9'),'width':_0x1f85('0x7'),'field':_0x1f85('0x1d')},{'name':'Source','width':0x1,'field':_0x1f85('0x3a'),'titleProp':'sourceLong','displayProp':'sourceShort','rowClassName':_0x1f85('0x5f')}],'rows':this[_0x1f85('0x18')][_0x1f85('0x3f')]((_0x3861e8,_0x1a9888)=>{return this[_0x1f85('0x3d')][_0x1f85('0x10')](_0x3861e8),_0x3861e8['_vType']=_0x3861e8['_typeListText'][_0x1f85('0x44')](',\x20')[_0x1f85('0x12')](),{'name':_0x3861e8[_0x1f85('0x50')],'type':_0x3861e8[_0x1f85('0x1b')],'cost':_0x3861e8['value']||_0x3861e8['valueMult']?Parser[_0x1f85('0x25')](_0x3861e8,!![])[_0x1f85('0x34')](/ +/g,'\u00a0'):'—','weight':Parser[_0x1f85('0x47')](_0x3861e8,!![])||'—','rarity':(_0x3861e8['rarity']||_0x1f85('0x20'))[_0x1f85('0x17')](),'attunement':_0x3861e8[_0x1f85('0x6a')]==='No'?'':'×','source':_0x3861e8['source'],'sourceShort':Parser[_0x1f85('0x73')](_0x3861e8[_0x1f85('0x3a')]),'sourceLong':Parser['sourceJsonToFull'](_0x3861e8[_0x1f85('0x3a')]),'ix':_0x1a9888};})};}[_0x1f85('0x54')](){this[_0x1f85('0x39')][_0x1f85('0x5c')](this[_0x1f85('0x18')],{'fnGetName':_0x3435ed=>_0x3435ed['name'],'fnGetValues':_0x2599b8=>({'source':_0x2599b8[_0x1f85('0x3a')],'type':_0x2599b8[_0x1f85('0x1b')],'cost':_0x2599b8[_0x1f85('0x37')]||0x0,'rarity':_0x2599b8[_0x1f85('0x1d')],'attunement':_0x2599b8['_attunementCategory']!=='No','weight':Parser[_0x1f85('0xf')](_0x2599b8[_0x1f85('0x48')]),'hash':UrlUtil['URL_TO_HASH_BUILDER'][this['_page']](_0x2599b8)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x1b2b0b=>UtilList2[_0x1f85('0x51')](this[_0x1f85('0x39')],_0x1b2b0b)});}async['pInit'](){await super['pInit'](),this[_0x1f85('0x6c')]={};const _0xc1fc19=await Vetools[_0x1f85('0x59')]();_0xc1fc19[_0x1f85('0x1a')][_0x1f85('0x4b')](_0x5b4873=>(this['_fluffLookup'][_0x5b4873[_0x1f85('0x3a')]]=this['_fluffLookup'][_0x5b4873[_0x1f85('0x3a')]]||{})[_0x5b4873[_0x1f85('0x50')]]=_0x5b4873),await Renderer[_0x1f85('0x35')][_0x1f85('0x5b')]();}[_0x1f85('0xa')](){return{...super[_0x1f85('0xa')](),'rarity':{'label':_0x1f85('0x9'),'getter':_0x745289=>(!_0x745289[_0x1f85('0x1d')]||_0x745289[_0x1f85('0x1d')]===_0x1f85('0x20')?'Unknown\x20Rarity':_0x745289['rarity'])['toTitleCase']()},'type':{'label':_0x1f85('0x16'),'getter':_0x535a33=>{if(_0x535a33[_0x1f85('0x2a')])return Parser[_0x1f85('0x2d')](_0x535a33[_0x1f85('0x2a')])[_0x1f85('0x17')]();else{if(_0x535a33[_0x1f85('0xd')])return _0x535a33[_0x1f85('0xd')];else{if(_0x535a33[_0x1f85('0xc')])return _0x1f85('0x52');else{if(_0x535a33[_0x1f85('0x19')])return _0x1f85('0x66');else return _0x1f85('0x21');}}}}}};}async['pImportEntry'](_0x58b700,_0xf125b7){_0xf125b7=_0xf125b7||{},console[_0x1f85('0x11')](...LGT,'Importing\x20item\x20\x22'+_0x58b700[_0x1f85('0x50')]+'\x22\x20(from\x20\x22'+Parser['sourceJsonToAbv'](_0x58b700[_0x1f85('0x3a')])+'\x22)');const _0x3d2498=_0x58b700[_0x1f85('0x72')]||MiscUtil['get'](this[_0x1f85('0x6c')],_0x58b700['source'],_0x58b700[_0x1f85('0x50')]),_0x59c75d={'fluff':_0x3d2498};if(_0xf125b7[_0x1f85('0x3c')])return this[_0x1f85('0x58')](_0x58b700,_0xf125b7,_0x59c75d);else{if(this[_0x1f85('0x2')])return this[_0x1f85('0x2c')](_0x58b700,_0xf125b7,_0x59c75d);else return this[_0x1f85('0x58')](_0x58b700,_0xf125b7,_0x59c75d);}}async[_0x1f85('0x2c')](_0x165002,_0x3779f1,_0xc1aeac){_0xc1aeac={..._0xc1aeac||{}},_0xc1aeac[_0x1f85('0x33')]=this[_0x1f85('0x6d')](_0x165002);if(_0x165002[_0x1f85('0x46')]&&Config[_0x1f85('0x5a')](_0x1f85('0x55'),_0x1f85('0x74'))){const _0xe0d0f4=[],_0x1f342d=await Promise[_0x1f85('0x43')](_0x165002['packContents'][_0x1f85('0x3f')](async _0xbf9800=>{const _0x439e95=_0xbf9800[_0x1f85('0x1f')]||0x1;if(_0xbf9800[_0x1f85('0x35')]||typeof _0xbf9800===_0x1f85('0x57')){let [_0x5a0598,_0x525ffd]=(_0xbf9800['item']||_0xbf9800)[_0x1f85('0x62')]('|');if(!_0x525ffd)_0x525ffd=SRC_DMG;const _0x3a4002=UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil['PG_ITEMS']]({'name':_0x5a0598,'source':_0x525ffd}),_0x43f6cb=await Renderer['hover'][_0x1f85('0x6')](UrlUtil[_0x1f85('0x3b')],_0x525ffd,_0x3a4002);return DataConverterItem[_0x1f85('0x69')](_0x43f6cb,{..._0xc1aeac,'quantity':_0x439e95});}else{if(_0xbf9800[_0x1f85('0x4d')]){const _0x4acda3={'name':_0xbf9800['special']['toTitleCase'](),'type':'G','source':_0x165002[_0x1f85('0x3a')],'page':_0x165002[_0x1f85('0x64')],'srd':_0x165002[_0x1f85('0x13')]};return Renderer[_0x1f85('0x35')][_0x1f85('0x6e')](_0x4acda3),DataConverterItem[_0x1f85('0x69')](_0x4acda3,{..._0xc1aeac,'quantity':_0x439e95});}else _0xe0d0f4['push'](_0x1f85('0x61')+JSON['stringify'](_0xbf9800)+'\x22');}}));await this[_0x1f85('0x2')][_0x1f85('0x32')]('OwnedItem',_0x1f342d['filter'](Boolean),{}),_0xe0d0f4[_0x1f85('0x56')]&&(ui[_0x1f85('0x26')][_0x1f85('0x53')](_0x1f85('0x60')+_0x165002[_0x1f85('0x50')]+_0x1f85('0x15')+Parser[_0x1f85('0x73')](_0x165002[_0x1f85('0x3a')])+'\x22)\x20imported\x20with\x20errors!\x20'+VeCt['STR_SEE_CONSOLE']),console['error'](...LGT,_0x1f85('0x2b')+_0x165002['name']+'\x20('+_0x165002[_0x1f85('0x3a')]+')\x20into\x20constituent\x20items:\x20'+_0xe0d0f4['join'](';\x20')));}else await this[_0x1f85('0x2')][_0x1f85('0x32')](_0x1f85('0x49'),await DataConverterItem['pGetItemItem'](_0x165002,_0xc1aeac),{});if(this[_0x1f85('0x2')][_0x1f85('0x0')])this[_0x1f85('0x2')][_0x1f85('0x36')]['render']();return{'name':_0x165002[_0x1f85('0x50')],'actor':this[_0x1f85('0x2')]};}async[_0x1f85('0x58')](_0x337b27,_0x287163,_0x31f35f){_0x31f35f['isAddPermission']=!![];const _0x4af972=await DataConverterItem['pGetItemItem'](_0x337b27,_0x31f35f);if(_0x287163['isTemp']||!this[_0x1f85('0x22')]){if(!_0x287163['isTemp']){const _0x476b4e=await this[_0x1f85('0x8')](_0x337b27);if(_0x476b4e)_0x4af972[_0x1f85('0x1e')]=_0x476b4e;}const _0x2e6155=await Item[_0x1f85('0x4f')](_0x4af972,{'renderSheet':!!_0x287163[_0x1f85('0x3c')],'temporary':!!_0x287163[_0x1f85('0x3c')]});if(!_0x287163[_0x1f85('0x3c')])await game[_0x1f85('0xb')][_0x1f85('0x42')](_0x2e6155);return _0x2e6155;}else{const _0x12d7ae=new Item(_0x4af972);return await this[_0x1f85('0x22')][_0x1f85('0x29')](_0x12d7ae),_0x12d7ae;}}[_0x1f85('0x6d')](_0x6c7ce6){if(!_0x6c7ce6[_0x1f85('0x6b')])return null;if(!this[_0x1f85('0x2')])return null;return(this[_0x1f85('0x2')][_0x1f85('0x5d')][_0x1f85('0xb')]||[])[_0x1f85('0x38')](_0x368f85=>_0x368f85['type']===_0x1f85('0x71')&&_0x368f85['data'][_0x1f85('0x6f')]===_0x1f85('0x63'));}static[_0x1f85('0x4c')](_0x3d0aa9){return _0x3d0aa9[_0x1f85('0x14')]((_0x136c77,_0x472f4f)=>{if(_0x136c77[_0x1f85('0x6b')]&&!_0x472f4f[_0x1f85('0x6b')])return 0x1;if(!_0x136c77['ammoType']&&_0x472f4f['ammoType'])return-0x1;return SortUtil['ascSortLower'](_0x136c77[_0x1f85('0x50')],_0x472f4f[_0x1f85('0x50')])||SortUtil[_0x1f85('0x67')](Parser[_0x1f85('0x4a')](_0x136c77[_0x1f85('0x3a')]),Parser['sourceJsonToFull'](_0x472f4f[_0x1f85('0x3a')]));});}}export{ImportListItem};