const _0xb612=['weightValueToNumber','URL_TO_HASH_BUILDER','packContents','Error(s)\x20when\x20breaking\x20','cost','_list','Type','item','_pImportEntry_pImportToDirectoryGeneric','isStreamerMode','Custom\x20URL','sourceJsonToColor','enhanceItem','SRD','weight','pCacheAndGet','SOURCE_TYP_BREW','type','_pImportEntry_pImportToActor','getItemsFromHomebrew','pGetItemFluff','\x22\x20(from\x20\x22','data','_actor','DataSourceFile','Wondrous\x20Item','itemFluff','render','Cost','error','pGetSources','Source','page','pGetItemItem','1-4','importItem','valueMult','1-5','getData','doAbsorbItems','SOURCE_TYP_CUSTOM','attunement','_titleSearch','notifications','all','ammo','toTitleCase','length','_titleButtonRun','_isPreviewable','pGetHomebrewSources','filter','Unknown\x20Type','source','ammoType','pInit','rarity','special','_pageFilter','sourceJsonToFull','fluff','text-center','Weight','constructor','DataSourceUrl','forEach','_fluffLookup','populatePropertyAndTypeReference','Items','stringify','sourceClassName','getItemTypeName','isToken','map','sheet','value','STR_SEE_CONSOLE','_activateListeners_absorbListItems','typeText','wondrous','quantity','createEmbeddedEntity','TASK_EXIT_COMPLETE','Item','Unhandled\x20pack\x20contents\x20type\x20\x22','_attunementCategory','poison','OwnedItem','sourceShort','Import\x20Items','isSplitPacksActor','get','0-5','consumable','3-2','_pImportEntry_getSheetItemsAmmo','PG_ITEMS','itemWeightToFull','_vType','ascSortLower','sourceLong','sheetItemsAmmo','_page','push','Poison','sortItems','_content','Rarity','Unknown','getFolderPathMeta','consumableType','join','items','name','pImportEntry','mutateForFilters','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'];(function(_0x2eb9de,_0xb612a8){const _0x253d2f=function(_0x349f67){while(--_0x349f67){_0x2eb9de['push'](_0x2eb9de['shift']());}};_0x253d2f(++_0xb612a8);}(_0xb612,0xce));const _0x253d=function(_0x2eb9de,_0xb612a8){_0x2eb9de=_0x2eb9de-0x0;let _0x253d2f=_0xb612[_0x2eb9de];return _0x253d2f;};const _0x140170=_0x253d;'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';class ImportListItem extends ImportList{constructor(_0x349f67){const _0x1576ea=_0x253d;_0x349f67=_0x349f67||{},super({'title':_0x1576ea('0x0')},_0x349f67,{'namespace':_0x1576ea('0x23'),'titleSearch':_0x1576ea('0x17'),'sidebarTab':_0x1576ea('0x17'),'gameProp':_0x1576ea('0x17'),'defaultFolderPath':[_0x1576ea('0x60')],'folderType':_0x1576ea('0x6f'),'fnListSort':PageFilterItems[_0x1576ea('0x10')],'pageFilter':new PageFilterItems(),'page':UrlUtil[_0x1576ea('0x7')],'isPreviewable':!![]}),this[_0x1576ea('0x5e')]=null;}async[_0x140170('0x3a')](){const _0x17464d=_0x140170;return this[_0x17464d('0x5b')][_0x17464d('0x3a')]();}static async[_0x140170('0x3a')](){const _0x739b18=_0x140170,_0x40da89={'pPostLoad':async _0x4d9367=>{const _0x39533c=_0x253d;return Renderer[_0x39533c('0x23')][_0x39533c('0x2f')](_0x4d9367);}};return[new ImportList['DataSourceSpecial'](Config['get']('ui',_0x739b18('0x25'))?_0x739b18('0x29'):'5etools',async()=>(await Vetools['pGetItems']())[_0x739b18('0x23')],{'cacheKey':'5etools-items','filterTypes':[ImportList['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new ImportList[(_0x739b18('0x5c'))](_0x739b18('0x26'),'',{..._0x40da89,'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),new ImportList[(_0x739b18('0x34'))]('Upload\x20File',{..._0x40da89,'filterTypes':[ImportList[_0x739b18('0x44')]]}),...(await Vetools[_0x739b18('0x4e')]('item'))[_0x739b18('0x65')](({name:_0x1ee995,url:_0x5e9e0e})=>new ImportList['DataSourceUrl'](_0x1ee995,_0x5e9e0e,{..._0x40da89,'filterTypes':[ImportList[_0x739b18('0x2c')]]}))];}[_0x140170('0x42')](){const _0x239c1a=_0x140170;return{'isPreviewable':this[_0x239c1a('0x4d')],'titleButtonRun':this[_0x239c1a('0x4c')],'titleSearch':this[_0x239c1a('0x46')],'cols':[{'name':'Name','width':0x3,'field':_0x239c1a('0x18')},{'name':_0x239c1a('0x22'),'width':_0x239c1a('0x5'),'field':_0x239c1a('0x2d')},{'name':_0x239c1a('0x38'),'width':_0x239c1a('0x3e'),'field':_0x239c1a('0x20'),'rowClassName':_0x239c1a('0x59')},{'name':_0x239c1a('0x5a'),'width':_0x239c1a('0x3e'),'field':_0x239c1a('0x2a'),'rowClassName':'text-center'},{'name':'A.','width':_0x239c1a('0x3'),'field':_0x239c1a('0x45'),'rowClassName':_0x239c1a('0x59')},{'name':_0x239c1a('0x12'),'width':_0x239c1a('0x41'),'field':_0x239c1a('0x54')},{'name':_0x239c1a('0x3b'),'width':0x1,'field':'source','titleProp':_0x239c1a('0xb'),'displayProp':_0x239c1a('0x74'),'classNameProp':_0x239c1a('0x62'),'rowClassName':_0x239c1a('0x59')}],'rows':this['_content'][_0x239c1a('0x65')]((_0xd9512,_0x4a9e99)=>{const _0x4a07d0=_0x239c1a;return this[_0x4a07d0('0x56')][_0x4a07d0('0x1a')](_0xd9512),_0xd9512[_0x4a07d0('0x9')]=_0xd9512['_typeListText'][_0x4a07d0('0x16')](',\x20')['uppercaseFirst'](),{'name':_0xd9512[_0x4a07d0('0x18')],'type':_0xd9512['_vType'],'cost':_0xd9512[_0x4a07d0('0x67')]||_0xd9512[_0x4a07d0('0x40')]?Parser['itemValueToFull'](_0xd9512,{'isShortForm':!![]})['replace'](/ +/g,'\u00a0'):'—','weight':Parser[_0x4a07d0('0x8')](_0xd9512,!![])||'—','rarity':(_0xd9512[_0x4a07d0('0x54')]||_0x4a07d0('0x13'))['toTitleCase'](),'attunement':_0xd9512['_attunementCategory']==='No'?'':'×','source':_0xd9512['source'],'sourceShort':Parser['sourceJsonToAbv'](_0xd9512[_0x4a07d0('0x51')]),'sourceLong':Parser[_0x4a07d0('0x57')](_0xd9512['source']),'sourceClassName':Parser[_0x4a07d0('0x27')](_0xd9512[_0x4a07d0('0x51')]),'ix':_0x4a9e99};})};}[_0x140170('0x69')](){const _0x2d7966=_0x140170;this['_list'][_0x2d7966('0x43')](this[_0x2d7966('0x11')],{'fnGetName':_0x322953=>_0x322953[_0x2d7966('0x18')],'fnGetValues':_0x5e61d4=>({'source':_0x5e61d4[_0x2d7966('0x51')],'type':_0x5e61d4[_0x2d7966('0x9')],'cost':_0x5e61d4[_0x2d7966('0x67')]||0x0,'rarity':_0x5e61d4[_0x2d7966('0x54')],'attunement':_0x5e61d4[_0x2d7966('0x71')]!=='No','weight':Parser[_0x2d7966('0x1c')](_0x5e61d4[_0x2d7966('0x2a')]),'hash':UrlUtil['URL_TO_HASH_BUILDER'][this[_0x2d7966('0xd')]](_0x5e61d4)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x3471ec=>UtilList2['absorbFnBindListeners'](this[_0x2d7966('0x21')],_0x3471ec)});}async[_0x140170('0x53')](){const _0x13b21d=_0x140170;await super[_0x13b21d('0x53')](),this[_0x13b21d('0x5e')]={};const _0x5284b4=await Vetools[_0x13b21d('0x30')]();_0x5284b4[_0x13b21d('0x36')][_0x13b21d('0x5d')](_0x3fe32d=>(this[_0x13b21d('0x5e')][_0x3fe32d[_0x13b21d('0x51')]]=this[_0x13b21d('0x5e')][_0x3fe32d[_0x13b21d('0x51')]]||{})[_0x3fe32d[_0x13b21d('0x18')]]=_0x3fe32d),await Renderer['item'][_0x13b21d('0x5f')]();}['getFolderPathMeta'](){const _0x22816e=_0x140170;return{...super[_0x22816e('0x14')](),'rarity':{'label':_0x22816e('0x12'),'getter':_0x538cee=>(!_0x538cee[_0x22816e('0x54')]||_0x538cee[_0x22816e('0x54')]===_0x22816e('0x13')?'Unknown\x20Rarity':_0x538cee[_0x22816e('0x54')])[_0x22816e('0x4a')]()},'type':{'label':_0x22816e('0x22'),'getter':_0x4d7a31=>{const _0x141625=_0x22816e;if(_0x4d7a31[_0x141625('0x2d')])return Renderer['item'][_0x141625('0x63')](_0x4d7a31['type'])[_0x141625('0x4a')]();else{if(_0x4d7a31['typeText'])return _0x4d7a31[_0x141625('0x6a')];else{if(_0x4d7a31[_0x141625('0x6b')])return _0x141625('0x35');else{if(_0x4d7a31[_0x141625('0x72')])return _0x141625('0xf');else return _0x141625('0x50');}}}}}};}async[_0x140170('0x19')](_0x13b50c,_0x9679ad){const _0xd90ad7=_0x140170;_0x9679ad=_0x9679ad||{},console['log'](...LGT,'Importing\x20item\x20\x22'+_0x13b50c[_0xd90ad7('0x18')]+_0xd90ad7('0x31')+Parser['sourceJsonToAbv'](_0x13b50c[_0xd90ad7('0x51')])+'\x22)');const _0x18ead1=_0x13b50c[_0xd90ad7('0x58')]||MiscUtil['get'](this[_0xd90ad7('0x5e')],_0x13b50c[_0xd90ad7('0x51')],_0x13b50c[_0xd90ad7('0x18')]),_0x27ff2b={'fluff':_0x18ead1};if(_0x9679ad[_0xd90ad7('0x6c')]!=null)_0x27ff2b[_0xd90ad7('0x6c')]=_0x9679ad[_0xd90ad7('0x6c')];if(_0x9679ad['isTemp'])return this[_0xd90ad7('0x24')](_0x13b50c,_0x9679ad,_0x27ff2b);else{if(this[_0xd90ad7('0x33')])return this[_0xd90ad7('0x2e')](_0x13b50c,_0x9679ad,_0x27ff2b);else return this['_pImportEntry_pImportToDirectoryGeneric'](_0x13b50c,_0x9679ad,_0x27ff2b);}}async[_0x140170('0x2e')](_0x3c2979,_0x28db61,_0x2c0b05){const _0x440603=_0x140170;_0x2c0b05={..._0x2c0b05||{}},_0x2c0b05[_0x440603('0xc')]=this[_0x440603('0x6')](_0x3c2979);if(_0x3c2979[_0x440603('0x1e')]&&Config[_0x440603('0x2')](_0x440603('0x3f'),_0x440603('0x1'))){const _0x1610a9=[],_0x1a351f=await Promise[_0x440603('0x48')](_0x3c2979[_0x440603('0x1e')][_0x440603('0x65')](async _0x5cd4f9=>{const _0x5d9cc0=_0x440603,_0x4df593=_0x5cd4f9[_0x5d9cc0('0x6c')]||0x1;if(_0x5cd4f9[_0x5d9cc0('0x23')]||typeof _0x5cd4f9==='string'){let [_0x226278,_0x386622]=(_0x5cd4f9[_0x5d9cc0('0x23')]||_0x5cd4f9)['split']('|');if(!_0x386622)_0x386622=SRC_DMG;const _0x3ca68a=UrlUtil[_0x5d9cc0('0x1d')][UrlUtil[_0x5d9cc0('0x7')]]({'name':_0x226278,'source':_0x386622}),_0xb737c8=await Renderer['hover'][_0x5d9cc0('0x2b')](UrlUtil[_0x5d9cc0('0x7')],_0x386622,_0x3ca68a);return DataConverterItem[_0x5d9cc0('0x3d')](_0xb737c8,{..._0x2c0b05,'quantity':_0x4df593});}else{if(_0x5cd4f9[_0x5d9cc0('0x55')]){const _0x1f124c={'name':_0x5cd4f9[_0x5d9cc0('0x55')][_0x5d9cc0('0x4a')](),'type':'G','source':_0x3c2979['source'],'page':_0x3c2979[_0x5d9cc0('0x3c')],'srd':_0x3c2979['srd']};return Renderer['item'][_0x5d9cc0('0x28')](_0x1f124c),DataConverterItem[_0x5d9cc0('0x3d')](_0x1f124c,{..._0x2c0b05,'quantity':_0x4df593});}else _0x1610a9[_0x5d9cc0('0xe')](_0x5d9cc0('0x70')+JSON[_0x5d9cc0('0x61')](_0x5cd4f9)+'\x22');}}));await this[_0x440603('0x33')][_0x440603('0x6d')]('OwnedItem',_0x1a351f[_0x440603('0x4f')](Boolean),{}),_0x1610a9[_0x440603('0x4b')]&&(ui[_0x440603('0x47')][_0x440603('0x39')]('Item\x20\x22'+_0x3c2979[_0x440603('0x18')]+_0x440603('0x31')+Parser['sourceJsonToAbv'](_0x3c2979['source'])+'\x22)\x20imported\x20with\x20errors!\x20'+VeCt[_0x440603('0x68')]),console[_0x440603('0x39')](...LGT,_0x440603('0x1f')+_0x3c2979['name']+'\x20('+_0x3c2979['source']+')\x20into\x20constituent\x20items:\x20'+_0x1610a9[_0x440603('0x16')](';\x20')));}else await this[_0x440603('0x33')]['createEmbeddedEntity'](_0x440603('0x73'),await DataConverterItem[_0x440603('0x3d')](_0x3c2979,_0x2c0b05),{});if(this[_0x440603('0x33')][_0x440603('0x64')])this['_actor'][_0x440603('0x66')][_0x440603('0x37')]();return{'imported':{'name':_0x3c2979['name'],'actor':this['_actor']},'status':UtilApplications[_0x440603('0x6e')]};}[_0x140170('0x1b')](_0x15c529,_0x4f123e){const _0x3f0b03=_0x140170;return DataConverterItem[_0x3f0b03('0x3d')](_0x15c529,_0x4f123e);}[_0x140170('0x6')](_0x4a6d56){const _0x1c2b65=_0x140170;if(!_0x4a6d56[_0x1c2b65('0x52')])return null;if(!this[_0x1c2b65('0x33')])return null;return(this['_actor'][_0x1c2b65('0x32')][_0x1c2b65('0x17')]||[])[_0x1c2b65('0x4f')](_0x7e5a13=>_0x7e5a13['type']===_0x1c2b65('0x4')&&_0x7e5a13[_0x1c2b65('0x32')][_0x1c2b65('0x15')]===_0x1c2b65('0x49'));}static['sortEntries'](_0x160745,_0x320987){const _0x4fc1e8=_0x140170;if(_0x160745[_0x4fc1e8('0x52')]&&!_0x320987[_0x4fc1e8('0x52')])return 0x1;if(!_0x160745[_0x4fc1e8('0x52')]&&_0x320987['ammoType'])return-0x1;return SortUtil['ascSortLower'](_0x160745['name'],_0x320987[_0x4fc1e8('0x18')])||SortUtil[_0x4fc1e8('0xa')](Parser[_0x4fc1e8('0x57')](_0x160745[_0x4fc1e8('0x51')]),Parser[_0x4fc1e8('0x57')](_0x320987['source']));}}export{ImportListItem};