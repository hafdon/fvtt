const _0x415b=['join','itemFluff','1123285SeBuyX','\x22\x20(from\x20\x22','Unknown','SOURCE_TYP_CUSTOM','length','Cost','\x22)\x20could\x20not\x20be\x20broken\x20down\x20into\x20constituent\x20items!\x20','pCacheAndGet','245972gORlfC','sheetItemsAmmo','934727IcZCbn','cost','toLowerCase','SRD','TASK_EXIT_COMPLETE_DATA_ONLY','_pImportEntry_getSheetItemsAmmo','Type','type','SOURCE_TYP_OFFICIAL_ALL','_titleSearch','Item','source','sourceShort','_initCreateSheetItemHook','split','itemValueToFull','isToken','Rarity','Weight','_isPreviewable','HOMEBREW_INDEX__SOURCE','Name','_pImportEntry_pImportToActor_pAddItem','weight','sourceClassName','get','Error(s)\x20when\x20breaking\x20','_pImportEntry_pImportToDirectoryGeneric','sourceJsonToFull','2NazTUx','getFolderPathMeta','pGetItemsFromHomebrew','_vType','getData','ascSortLower','isSiteSource','filter','488031dLqefH','_list','importItem','isSplitPacksActor','weightValueToNumber','rarity','sheet','5etools','data','createEmbeddedDocuments','has','1371517BcMsiA','ammo','log','pGetItemItem','ammoType','pGetSources','absorbFnBindListenersRadio','DataSourceSpecial','Unhandled\x20pack\x20contents\x20type\x20\x22','mutateForFilters','Unknown\x20Type','URL_TO_HASH_BUILDER','TASK_EXIT_COMPLETE','_isRadio','STR_SEE_CONSOLE','sortItems','typeText','_titleButtonRun','2817574uIRbAb','absorbFnGetData','special','989389ZDnzzv','replace','valueMult','trim','3-2','Source','_content','Custom\x20URL','Item\x20\x22','sourceJsonToColor','_pImportEntry_pImportToActor_pImportPackItem','string','text-center','updateEmbeddedDocuments','_actor','constructor','forEach','1-4','_isPackSplitImport','getCurrentPage','srd','atomicPackContents','loadJSON','map','_pImportEntry_pImportToDataOnly','_pImportEntry_pDoLoadBrewMeta','PG_ITEMS','toTitleCase','filterValues','1-5','page','_attunementCategory','getFileUrl','pGetItemFluff',')\x20into\x20constituent\x20items:\x20','Import\x20Items','1QgeUKS','all','_fluffLookup','stringify','enhanceItem','baseBrewUrl','_pImportEntry_pImportToActor','isStreamerMode','name','5etools-items','_page','value','consumableType','Importing\x20item\x20\x22','_pGetPackItems','Poison','hover','DataSourceFile','init','_typeListText','packContents','_pageFilter','item','hasSourceJson','itemWeightToFull','getItemTypeName','error','DataSourceUrl','throwables','sourceJsonToAbv','_activateListeners_absorbListItems','items','quantity','SOURCE_TYP_BREW','doAbsorbItems'];const _0x3339=function(_0x1b6d5f,_0x5574ff){_0x1b6d5f=_0x1b6d5f-0x12a;let _0x415be8=_0x415b[_0x1b6d5f];return _0x415be8;};const _0x288c1c=_0x3339;(function(_0x365c50,_0x54f31d){const _0x52671d=_0x3339;while(!![]){try{const _0x2e7f36=parseInt(_0x52671d(0x196))+parseInt(_0x52671d(0x1a0))+parseInt(_0x52671d(0x171))*parseInt(_0x52671d(0x19e))+-parseInt(_0x52671d(0x14d))+-parseInt(_0x52671d(0x1bd))*-parseInt(_0x52671d(0x12d))+parseInt(_0x52671d(0x138))+-parseInt(_0x52671d(0x14a));if(_0x2e7f36===_0x54f31d)break;else _0x365c50['push'](_0x365c50['shift']());}catch(_0x39370f){_0x365c50['push'](_0x365c50['shift']());}}}(_0x415b,0xce338));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListItem extends ImportList{static[_0x288c1c(0x183)](){const _0x3ae358=_0x288c1c;this[_0x3ae358(0x1ad)]({'prop':_0x3ae358(0x187),'importerName':'Item'});}constructor(_0x361965){const _0x28b20e=_0x288c1c;_0x361965=_0x361965||{},super({'title':_0x28b20e(0x170)},_0x361965,{'namespace':_0x28b20e(0x187),'titleSearch':_0x28b20e(0x190),'sidebarTab':_0x28b20e(0x190),'gameProp':_0x28b20e(0x190),'defaultFolderPath':['Items'],'folderType':'Item','fnListSort':PageFilterItems[_0x28b20e(0x147)],'pageFilter':new PageFilterItems(),'page':UrlUtil[_0x28b20e(0x167)],'isPreviewable':!![],'isDedupable':!![]}),this[_0x28b20e(0x173)]=null;}async['pGetSources'](){const _0x49c4fc=_0x288c1c;return this[_0x49c4fc(0x15c)][_0x49c4fc(0x13d)]();}static async[_0x288c1c(0x13d)](){const _0x588b4c=_0x288c1c,_0x3e8195={'pPostLoad':async _0x208afc=>{const _0x40be9a=_0x3339;return Renderer[_0x40be9a(0x187)][_0x40be9a(0x1bf)](_0x208afc);}};return[new UtilDataSource[(_0x588b4c(0x13f))](Config['get']('ui',_0x588b4c(0x178))?_0x588b4c(0x1a3):_0x588b4c(0x134),async()=>(await Vetools['pGetItems']())[_0x588b4c(0x187)],{'cacheKey':_0x588b4c(0x17a),'filterTypes':[UtilDataSource[_0x588b4c(0x1a8)]],'isDefault':!![]}),new UtilDataSource['DataSourceUrl'](_0x588b4c(0x154),'',{..._0x3e8195,'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),new UtilDataSource[(_0x588b4c(0x182))]('Upload\x20File',{..._0x3e8195,'filterTypes':[UtilDataSource[_0x588b4c(0x199)]]}),...(await Vetools['pGetHomebrewSources'](_0x588b4c(0x187)))[_0x588b4c(0x164)](({name:_0x96b5,url:_0x2cae73})=>new UtilDataSource[(_0x588b4c(0x18c))](_0x96b5,_0x2cae73,{..._0x3e8195,'filterTypes':[UtilDataSource[_0x588b4c(0x192)]]}))];}[_0x288c1c(0x1c1)](){const _0x15b6d6=_0x288c1c;return{'isPreviewable':this[_0x15b6d6(0x1b3)],'titleButtonRun':this[_0x15b6d6(0x149)],'titleSearch':this[_0x15b6d6(0x1a9)],'cols':[{'name':_0x15b6d6(0x1b5),'width':0x3,'field':_0x15b6d6(0x179)},{'name':_0x15b6d6(0x1a6),'width':_0x15b6d6(0x151),'field':_0x15b6d6(0x1a7)},{'name':_0x15b6d6(0x19b),'width':_0x15b6d6(0x15e),'field':_0x15b6d6(0x1a1),'rowClassName':_0x15b6d6(0x159)},{'name':_0x15b6d6(0x1b2),'width':_0x15b6d6(0x15e),'field':_0x15b6d6(0x1b7),'rowClassName':_0x15b6d6(0x159)},{'name':'A.','width':'0-5','field':'attunement','rowClassName':'text-center'},{'name':_0x15b6d6(0x1b1),'width':_0x15b6d6(0x16a),'field':_0x15b6d6(0x132),'rowClassName':_0x15b6d6(0x159)},{'name':_0x15b6d6(0x152),'width':0x1,'field':_0x15b6d6(0x1ab),'titleProp':'sourceLong','displayProp':_0x15b6d6(0x1ac),'classNameProp':_0x15b6d6(0x1b8),'rowClassName':_0x15b6d6(0x159)}],'rows':this[_0x15b6d6(0x153)][_0x15b6d6(0x164)]((_0x4c2eb3,_0x3a1889)=>{const _0x6c834c=_0x15b6d6;return this[_0x6c834c(0x186)][_0x6c834c(0x15c)][_0x6c834c(0x141)](_0x4c2eb3),_0x4c2eb3[_0x6c834c(0x1c0)]=_0x4c2eb3[_0x6c834c(0x184)][_0x6c834c(0x194)](',\x20')['uppercaseFirst'](),{'name':_0x4c2eb3[_0x6c834c(0x179)],'type':_0x4c2eb3[_0x6c834c(0x1c0)],'cost':_0x4c2eb3[_0x6c834c(0x17c)]||_0x4c2eb3[_0x6c834c(0x14f)]?Parser[_0x6c834c(0x1af)](_0x4c2eb3,{'isShortForm':!![]})[_0x6c834c(0x14e)](/ +/g,'\u00a0'):'—','weight':Parser[_0x6c834c(0x189)](_0x4c2eb3,!![])||'—','rarity':(_0x4c2eb3['rarity']||_0x6c834c(0x198))['toTitleCase'](),'attunement':_0x4c2eb3['_attunementCategory']==='No'?'':'×','source':_0x4c2eb3[_0x6c834c(0x1ab)],'sourceShort':Parser[_0x6c834c(0x18e)](_0x4c2eb3[_0x6c834c(0x1ab)]),'sourceLong':Parser[_0x6c834c(0x1bc)](_0x4c2eb3[_0x6c834c(0x1ab)]),'sourceClassName':Parser[_0x6c834c(0x156)](_0x4c2eb3['source']),'ix':_0x3a1889};})};}[_0x288c1c(0x18f)](){const _0x29b380=_0x288c1c;this[_0x29b380(0x12e)][_0x29b380(0x193)](this['_content'],{'fnGetName':_0x4612cb=>_0x4612cb[_0x29b380(0x179)],'fnGetValues':_0x1345f1=>({'source':_0x1345f1['source'],'type':_0x1345f1[_0x29b380(0x1c0)],'cost':_0x1345f1[_0x29b380(0x17c)]||0x0,'rarity':_0x1345f1['rarity'],'attunement':_0x1345f1[_0x29b380(0x16c)]!=='No','weight':Parser[_0x29b380(0x131)](_0x1345f1[_0x29b380(0x1b7)]),'hash':UrlUtil[_0x29b380(0x143)][this[_0x29b380(0x17b)]](_0x1345f1)}),'fnGetData':UtilList2[_0x29b380(0x14b)],'fnBindListeners':_0x12d831=>this[_0x29b380(0x145)]?UtilList2[_0x29b380(0x13e)](this[_0x29b380(0x12e)],_0x12d831):UtilList2['absorbFnBindListeners'](this['_list'],_0x12d831)});}async['pInit'](){const _0x4ff711=_0x288c1c;await super['pInit'](),this['_fluffLookup']={};const _0x4ccf8d=await Vetools[_0x4ff711(0x16e)]();_0x4ccf8d[_0x4ff711(0x195)][_0x4ff711(0x15d)](_0x5615fb=>(this[_0x4ff711(0x173)][_0x5615fb['source']]=this[_0x4ff711(0x173)][_0x5615fb[_0x4ff711(0x1ab)]]||{})[_0x5615fb['name']]=_0x5615fb),await Renderer[_0x4ff711(0x187)]['populatePropertyAndTypeReference']();}['getFolderPathMeta'](){const _0x346146=_0x288c1c;return{...super[_0x346146(0x1be)](),'rarity':{'label':_0x346146(0x1b1),'getter':_0x5d441c=>(!_0x5d441c[_0x346146(0x132)]||_0x5d441c[_0x346146(0x132)]==='Unknown'?'Unknown\x20Rarity':_0x5d441c[_0x346146(0x132)])[_0x346146(0x168)]()},'type':{'label':_0x346146(0x1a6),'getter':_0x590adb=>{const _0x5b4cfc=_0x346146;if(_0x590adb['type'])return Renderer[_0x5b4cfc(0x187)][_0x5b4cfc(0x18a)](_0x590adb[_0x5b4cfc(0x1a7)])[_0x5b4cfc(0x168)]();else{if(_0x590adb['typeText'])return _0x590adb[_0x5b4cfc(0x148)];else{if(_0x590adb['wondrous'])return'Wondrous\x20Item';else{if(_0x590adb['poison'])return _0x5b4cfc(0x180);else return _0x5b4cfc(0x142);}}}}}};}async['pImportEntry'](_0x3db324,_0x416980){const _0x12c02b=_0x288c1c;_0x416980=_0x416980||{},console[_0x12c02b(0x13a)](...LGT,_0x12c02b(0x17e)+_0x3db324[_0x12c02b(0x179)]+'\x22\x20(from\x20\x22'+Parser[_0x12c02b(0x18e)](_0x3db324['source'])+'\x22)');const _0x55d22e=_0x3db324['fluff']||MiscUtil[_0x12c02b(0x1b9)](this[_0x12c02b(0x173)],_0x3db324[_0x12c02b(0x1ab)],_0x3db324[_0x12c02b(0x179)]),_0x336837={'fluff':_0x55d22e};if(_0x416980[_0x12c02b(0x191)]!=null)_0x336837['quantity']=_0x416980['quantity'];await this[_0x12c02b(0x166)](_0x3db324);if(_0x416980['isDataOnly'])return{'imported':[await this[_0x12c02b(0x165)](_0x3db324,_0x416980,_0x336837)],'status':UtilApplications[_0x12c02b(0x1a4)]};if(_0x416980['isTemp'])return this[_0x12c02b(0x1bb)](_0x3db324,_0x416980,_0x336837);else{if(this[_0x12c02b(0x15b)])return this['_pImportEntry_pImportToActor'](_0x3db324,_0x416980,_0x336837);else return this['_pImportEntry_pImportToDirectoryGeneric'](_0x3db324,_0x416980,_0x336837);}}async[_0x288c1c(0x166)](_0x3f64ed){const _0x449211=_0x288c1c;if(BrewUtil[_0x449211(0x188)](_0x3f64ed[_0x449211(0x1ab)]))return;if(SourceUtil[_0x449211(0x12b)](_0x3f64ed[_0x449211(0x1ab)]))return;if(!Vetools[_0x449211(0x1b4)][_0x3f64ed[_0x449211(0x1ab)]])return;const _0x1da7ba=DataUtil['brew'][_0x449211(0x16d)](Vetools[_0x449211(0x1b4)][_0x3f64ed[_0x449211(0x1ab)]],Config[_0x449211(0x1b9)]('import',_0x449211(0x176)));await BrewUtil['pDoHandleBrewJson'](await DataUtil['loadJSON'](_0x1da7ba),UrlUtil[_0x449211(0x160)]()),await Renderer[_0x449211(0x187)]['pGetItemsFromHomebrew'](await DataUtil[_0x449211(0x163)](_0x1da7ba));}async['_pImportEntry_pImportToDataOnly'](_0x2511d9,_0x11d205,_0x4ee229){const _0x293d5f=_0x288c1c;if(!this[_0x293d5f(0x15b)]||!this[_0x293d5f(0x15f)](_0x2511d9))return[await DataConverterItem['pGetItemItem'](_0x2511d9)];return this[_0x293d5f(0x17f)](_0x2511d9,_0x11d205,_0x4ee229);}['_isPackSplitImport'](_0x49ec0c){const _0x5dbdd6=_0x288c1c;return _0x49ec0c[_0x5dbdd6(0x185)]&&Config['get'](_0x5dbdd6(0x12f),_0x5dbdd6(0x130))&&(!_0x49ec0c[_0x5dbdd6(0x162)]||Config['get']('importItem','isSplitAtomicPacksActor'));}async[_0x288c1c(0x177)](_0x1b2a77,_0x2657cd,_0xe844bd){const _0x5d5cae=_0x288c1c;_0xe844bd={..._0xe844bd,'isActorItem':!![]},_0xe844bd['filterValues']=_0x2657cd[_0x5d5cae(0x169)],_0xe844bd[_0x5d5cae(0x19f)]=this[_0x5d5cae(0x1a5)](_0x1b2a77);if(this[_0x5d5cae(0x15f)](_0x1b2a77))await this[_0x5d5cae(0x157)](_0x1b2a77,_0x2657cd,_0xe844bd);else{const _0x333a78=await DataConverterItem[_0x5d5cae(0x13b)](_0x1b2a77,_0xe844bd);await this[_0x5d5cae(0x1b6)](_0x333a78);}if(this[_0x5d5cae(0x15b)][_0x5d5cae(0x1b0)])this[_0x5d5cae(0x15b)][_0x5d5cae(0x133)]['render']();return{'imported':[{'name':_0x1b2a77['name'],'actor':this[_0x5d5cae(0x15b)]}],'status':UtilApplications[_0x5d5cae(0x144)]};}async[_0x288c1c(0x17f)](_0xd52316,_0x10c402,_0x361565){const _0x5387f6=_0x288c1c,_0xdd69bc=[],_0x513f05=await Promise[_0x5387f6(0x172)](_0xd52316[_0x5387f6(0x185)][_0x5387f6(0x164)](async _0xd43297=>{const _0x4aa737=_0x5387f6,_0x2aaf37=_0xd43297[_0x4aa737(0x191)]||0x1;if(_0xd43297['item']||typeof _0xd43297===_0x4aa737(0x158)){let [_0x5ab3d1,_0x1f9eab]=(_0xd43297[_0x4aa737(0x187)]||_0xd43297)[_0x4aa737(0x1ae)]('|');if(!_0x1f9eab)_0x1f9eab=SRC_DMG;const _0x23dbd4=UrlUtil[_0x4aa737(0x143)][UrlUtil[_0x4aa737(0x167)]]({'name':_0x5ab3d1,'source':_0x1f9eab}),_0x5877a7=await Renderer[_0x4aa737(0x181)][_0x4aa737(0x19d)](UrlUtil[_0x4aa737(0x167)],_0x1f9eab,_0x23dbd4);return DataConverterItem['pGetItemItem'](_0x5877a7,{'filterValues':_0x10c402[_0x4aa737(0x169)],..._0x361565,'quantity':_0x2aaf37});}else{if(_0xd43297['special']){const _0x598726={'name':_0xd43297[_0x4aa737(0x14c)][_0x4aa737(0x168)](),'type':'G','source':_0xd52316[_0x4aa737(0x1ab)],'page':_0xd52316[_0x4aa737(0x16b)],'srd':_0xd52316[_0x4aa737(0x161)]};return Renderer['item'][_0x4aa737(0x175)](_0x598726),DataConverterItem[_0x4aa737(0x13b)](_0x598726,{'filterValues':_0x10c402[_0x4aa737(0x169)],..._0x361565,'quantity':_0x2aaf37});}else _0xdd69bc['push'](_0x4aa737(0x140)+JSON[_0x4aa737(0x174)](_0xd43297)+'\x22');}}));return _0xdd69bc[_0x5387f6(0x19a)]&&(ui['notifications'][_0x5387f6(0x18b)](_0x5387f6(0x155)+_0xd52316[_0x5387f6(0x179)]+_0x5387f6(0x197)+Parser[_0x5387f6(0x18e)](_0xd52316[_0x5387f6(0x1ab)])+_0x5387f6(0x19c)+VeCt[_0x5387f6(0x146)]),console[_0x5387f6(0x18b)](...LGT,_0x5387f6(0x1ba)+_0xd52316[_0x5387f6(0x179)]+'\x20('+_0xd52316['source']+_0x5387f6(0x16f)+_0xdd69bc[_0x5387f6(0x194)](';\x20'))),_0x513f05[_0x5387f6(0x12c)](Boolean);}async[_0x288c1c(0x157)](_0x44d1f7,_0x29c980,_0x75369d){const _0x277a75=_0x288c1c,_0x4d31b9=await this[_0x277a75(0x17f)](_0x44d1f7,_0x29c980,_0x75369d);for(const _0x5a5926 of _0x4d31b9){await this[_0x277a75(0x1b6)](_0x5a5926);}}async[_0x288c1c(0x1b6)](_0x1b59ca){const _0x15e527=_0x288c1c,_0x3561e8=await this[_0x15e527(0x15b)][_0x15e527(0x136)](_0x15e527(0x1aa),[_0x1b59ca],{}),_0x367f45=new Set((Config[_0x15e527(0x1b9)](_0x15e527(0x12f),_0x15e527(0x18d))||[])[_0x15e527(0x164)](_0x1fffa3=>_0x1fffa3[_0x15e527(0x150)]()[_0x15e527(0x1a2)]()));_0x367f45[_0x15e527(0x137)]((_0x1b59ca[_0x15e527(0x179)]||'')['toLowerCase']()[_0x15e527(0x150)]())&&await this[_0x15e527(0x15b)][_0x15e527(0x15a)]('Item',[{'_id':_0x3561e8[0x0]['id'],'data':{'consume':{'type':_0x15e527(0x139),'target':_0x3561e8[0x0]['id'],'amount':0x1}}}]);}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0xd6b090,_0x49fd86){const _0x40bd41=_0x288c1c;return DataConverterItem[_0x40bd41(0x13b)](_0xd6b090,_0x49fd86);}[_0x288c1c(0x1a5)](_0x6d7b81){const _0x5d2b8a=_0x288c1c;if(!_0x6d7b81[_0x5d2b8a(0x13c)])return null;if(!this[_0x5d2b8a(0x15b)])return null;return this[_0x5d2b8a(0x15b)][_0x5d2b8a(0x190)][_0x5d2b8a(0x12c)](_0x41a851=>_0x41a851[_0x5d2b8a(0x1a7)]==='consumable'&&_0x41a851[_0x5d2b8a(0x135)][_0x5d2b8a(0x135)][_0x5d2b8a(0x17d)]===_0x5d2b8a(0x139));}static['sortEntries'](_0x4a7a90,_0x4ef2c6){const _0x483c15=_0x288c1c;if(_0x4a7a90[_0x483c15(0x13c)]&&!_0x4ef2c6['ammoType'])return 0x1;if(!_0x4a7a90[_0x483c15(0x13c)]&&_0x4ef2c6['ammoType'])return-0x1;return SortUtil['ascSortLower'](_0x4a7a90[_0x483c15(0x179)],_0x4ef2c6['name'])||SortUtil[_0x483c15(0x12a)](Parser[_0x483c15(0x1bc)](_0x4a7a90[_0x483c15(0x1ab)]),Parser[_0x483c15(0x1bc)](_0x4ef2c6[_0x483c15(0x1ab)]));}}export{ImportListItem};