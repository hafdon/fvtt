'use strict';const _0x1378=['pGetSources','Type','208438tgRshj','Unhandled\x20pack\x20contents\x20type\x20\x22','srd','quantity','pGetHomebrewSources','constructor','5etools','ammo','updateEmbeddedEntity','83914jjnFQJ','_pImportEntry_pImportToDirectoryGeneric','Import\x20Items','3-2','Upload\x20File','Importing\x20item\x20\x22','325357DKsBso','892GvIlkl','ascSortLower','Items','isSplitPacksActor','STR_SEE_CONSOLE','_pImportEntry_getSheetItemsAmmo','importItem','232gHiIvN','filterValues','pGetItemItem','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','data','_list','consumable','value','getData','split','sourceJsonToColor','replace','valueMult','pGetItemFluff','doAbsorbItems','ammoType','Custom\x20URL','hover','sourceShort','special','length','DataSourceSpecial','log','text-center','absorbFnBindListeners','isTemp','sourceClassName','isToken','_vType','302184rEgkkN','Item','1-5','getFolderPathMeta','poison','_titleSearch','_content','1-4','throwables','populatePropertyAndTypeReference','source','8YetZHp','push','rarity','_activateListeners_absorbListItems','forEach',')\x20into\x20constituent\x20items:\x20','sheet','init','render','has','equipped','createEmbeddedEntity','_typeListText','error','_attunementCategory','_titleButtonRun','items','pInit','_actor','Poison','Rarity','Unknown','\x22\x20(from\x20\x22','mutateForFilters','notifications','249786ZbGtxY','sortEntries','0-5','typeText','_fluffLookup','map','_pImportEntry_pImportToActor','get','Unknown\x20Type','itemValueToFull','SOURCE_TYP_BREW','sourceJsonToFull','sortItems','getItemTypeName','name','_pImportEntry_pImportToActor_pAddItem','1LlJejd','PG_ITEMS','string','item','all','_id','_isPreviewable','sourceJsonToAbv','Source','5etools-items','\x22)\x20imported\x20with\x20errors!\x20','OwnedItem','trim','join','packContents','attunement','_initCreateSheetItemHook','absorbFnGetData','itemFluff','pCacheAndGet','Item\x20\x22','wondrous','_pImportEntry_pImportToActor_pImportPackItem','weightValueToNumber','enhanceItem','page','type','toTitleCase','Wondrous\x20Item','URL_TO_HASH_BUILDER','325823MdODmi'];const _0x2045=function(_0x944209,_0x50d3ae){_0x944209=_0x944209-0xb4;let _0x137877=_0x1378[_0x944209];return _0x137877;};const _0x262fba=_0x2045;(function(_0x564ce4,_0x59d0e2){const _0x3cad22=_0x2045;while(!![]){try{const _0x5ea920=-parseInt(_0x3cad22(0x11a))+parseInt(_0x3cad22(0x11b))*-parseInt(_0x3cad22(0x122))+-parseInt(_0x3cad22(0xda))+parseInt(_0x3cad22(0x108))*-parseInt(_0x3cad22(0xea))+-parseInt(_0x3cad22(0xb6))+-parseInt(_0x3cad22(0x114))+parseInt(_0x3cad22(0x10b))*parseInt(_0x3cad22(0xc1));if(_0x5ea920===_0x59d0e2)break;else _0x564ce4['push'](_0x564ce4['shift']());}catch(_0x110d14){_0x564ce4['push'](_0x564ce4['shift']());}}}(_0x1378,0x2a5b8));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';class ImportListItem extends ImportList{static[_0x262fba(0xc8)](){const _0xb2fb3a=_0x262fba;this[_0xb2fb3a(0xfa)]({'prop':_0xb2fb3a(0xed),'importerName':_0xb2fb3a(0xb7)});}constructor(_0x542aab){const _0x3d1c7c=_0x262fba;_0x542aab=_0x542aab||{},super({'title':_0x3d1c7c(0x116)},_0x542aab,{'namespace':_0x3d1c7c(0xed),'titleSearch':'items','sidebarTab':_0x3d1c7c(0xd1),'gameProp':_0x3d1c7c(0xd1),'defaultFolderPath':[_0x3d1c7c(0x11d)],'folderType':_0x3d1c7c(0xb7),'fnListSort':PageFilterItems[_0x3d1c7c(0xe6)],'pageFilter':new PageFilterItems(),'page':UrlUtil[_0x3d1c7c(0xeb)],'isPreviewable':!![],'isDedupable':!![]}),this[_0x3d1c7c(0xde)]=null;}async[_0x262fba(0x109)](){const _0x3f0be7=_0x262fba;return this['constructor'][_0x3f0be7(0x109)]();}static async[_0x262fba(0x109)](){const _0x361489=_0x262fba,_0xbc6818={'pPostLoad':async _0x3008c4=>{const _0xb35e4c=_0x2045;return Renderer[_0xb35e4c(0xed)]['getItemsFromHomebrew'](_0x3008c4);}};return[new ImportList[(_0x361489(0x137))](Config[_0x361489(0xe1)]('ui','isStreamerMode')?'SRD':_0x361489(0x111),async()=>(await Vetools['pGetItems']())[_0x361489(0xed)],{'cacheKey':_0x361489(0xf3),'filterTypes':[ImportList['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new ImportList['DataSourceUrl'](_0x361489(0x132),'',{..._0xbc6818,'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),new ImportList['DataSourceFile'](_0x361489(0x118),{..._0xbc6818,'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...(await Vetools[_0x361489(0x10f)](_0x361489(0xed)))['map'](({name:_0x52c455,url:_0x52dc51})=>new ImportList['DataSourceUrl'](_0x52c455,_0x52dc51,{..._0xbc6818,'filterTypes':[ImportList[_0x361489(0xe4)]]}))];}[_0x262fba(0x12a)](){const _0x5144e8=_0x262fba;return{'isPreviewable':this[_0x5144e8(0xf0)],'titleButtonRun':this[_0x5144e8(0xd0)],'titleSearch':this[_0x5144e8(0xbb)],'cols':[{'name':'Name','width':0x3,'field':_0x5144e8(0xe8)},{'name':_0x5144e8(0x10a),'width':_0x5144e8(0x117),'field':_0x5144e8(0x104)},{'name':'Cost','width':_0x5144e8(0xbd),'field':'cost','rowClassName':'text-center'},{'name':'Weight','width':'1-4','field':'weight','rowClassName':_0x5144e8(0x139)},{'name':'A.','width':_0x5144e8(0xdc),'field':_0x5144e8(0xf9),'rowClassName':_0x5144e8(0x139)},{'name':_0x5144e8(0xd5),'width':_0x5144e8(0xb8),'field':_0x5144e8(0xc3)},{'name':_0x5144e8(0xf2),'width':0x1,'field':_0x5144e8(0xc0),'titleProp':'sourceLong','displayProp':_0x5144e8(0x134),'classNameProp':_0x5144e8(0x13c),'rowClassName':_0x5144e8(0x139)}],'rows':this[_0x5144e8(0xbc)][_0x5144e8(0xdf)]((_0x417767,_0x2363d4)=>{const _0x427e8c=_0x5144e8;return this['_pageFilter'][_0x427e8c(0x110)][_0x427e8c(0xd8)](_0x417767),_0x417767['_vType']=_0x417767[_0x427e8c(0xcd)][_0x427e8c(0xf7)](',\x20')['uppercaseFirst'](),{'name':_0x417767[_0x427e8c(0xe8)],'type':_0x417767[_0x427e8c(0xb5)],'cost':_0x417767[_0x427e8c(0x129)]||_0x417767[_0x427e8c(0x12e)]?Parser[_0x427e8c(0xe3)](_0x417767,{'isShortForm':!![]})[_0x427e8c(0x12d)](/ +/g,'\u00a0'):'—','weight':Parser['itemWeightToFull'](_0x417767,!![])||'—','rarity':(_0x417767[_0x427e8c(0xc3)]||_0x427e8c(0xd6))['toTitleCase'](),'attunement':_0x417767[_0x427e8c(0xcf)]==='No'?'':'×','source':_0x417767[_0x427e8c(0xc0)],'sourceShort':Parser[_0x427e8c(0xf1)](_0x417767['source']),'sourceLong':Parser[_0x427e8c(0xe5)](_0x417767['source']),'sourceClassName':Parser[_0x427e8c(0x12c)](_0x417767[_0x427e8c(0xc0)]),'ix':_0x2363d4};})};}[_0x262fba(0xc4)](){const _0x46b2db=_0x262fba;this[_0x46b2db(0x127)][_0x46b2db(0x130)](this[_0x46b2db(0xbc)],{'fnGetName':_0x5f0fa3=>_0x5f0fa3[_0x46b2db(0xe8)],'fnGetValues':_0x59e5b9=>({'source':_0x59e5b9[_0x46b2db(0xc0)],'type':_0x59e5b9['_vType'],'cost':_0x59e5b9[_0x46b2db(0x129)]||0x0,'rarity':_0x59e5b9[_0x46b2db(0xc3)],'attunement':_0x59e5b9[_0x46b2db(0xcf)]!=='No','weight':Parser[_0x46b2db(0x101)](_0x59e5b9['weight']),'hash':UrlUtil[_0x46b2db(0x107)][this['_page']](_0x59e5b9)}),'fnGetData':UtilList2[_0x46b2db(0xfb)],'fnBindListeners':_0x2dc70f=>UtilList2[_0x46b2db(0x13a)](this[_0x46b2db(0x127)],_0x2dc70f)});}async[_0x262fba(0xd2)](){const _0x5c83c9=_0x262fba;await super[_0x5c83c9(0xd2)](),this[_0x5c83c9(0xde)]={};const _0x29a08b=await Vetools[_0x5c83c9(0x12f)]();_0x29a08b[_0x5c83c9(0xfc)][_0x5c83c9(0xc5)](_0x128033=>(this['_fluffLookup'][_0x128033['source']]=this[_0x5c83c9(0xde)][_0x128033[_0x5c83c9(0xc0)]]||{})[_0x128033[_0x5c83c9(0xe8)]]=_0x128033),await Renderer[_0x5c83c9(0xed)][_0x5c83c9(0xbf)]();}[_0x262fba(0xb9)](){const _0x1a0b66=_0x262fba;return{...super['getFolderPathMeta'](),'rarity':{'label':'Rarity','getter':_0x343054=>(!_0x343054[_0x1a0b66(0xc3)]||_0x343054[_0x1a0b66(0xc3)]===_0x1a0b66(0xd6)?'Unknown\x20Rarity':_0x343054[_0x1a0b66(0xc3)])[_0x1a0b66(0x105)]()},'type':{'label':'Type','getter':_0x3fdfb6=>{const _0x3468a4=_0x1a0b66;if(_0x3fdfb6['type'])return Renderer[_0x3468a4(0xed)][_0x3468a4(0xe7)](_0x3fdfb6[_0x3468a4(0x104)])['toTitleCase']();else{if(_0x3fdfb6['typeText'])return _0x3fdfb6[_0x3468a4(0xdd)];else{if(_0x3fdfb6[_0x3468a4(0xff)])return _0x3468a4(0x106);else{if(_0x3fdfb6[_0x3468a4(0xba)])return _0x3468a4(0xd4);else return _0x3468a4(0xe2);}}}}}};}async['pImportEntry'](_0x134e66,_0x20f4fe){const _0x49f443=_0x262fba;_0x20f4fe=_0x20f4fe||{},console[_0x49f443(0x138)](...LGT,_0x49f443(0x119)+_0x134e66[_0x49f443(0xe8)]+_0x49f443(0xd7)+Parser['sourceJsonToAbv'](_0x134e66[_0x49f443(0xc0)])+'\x22)');const _0x579190=_0x134e66['fluff']||MiscUtil[_0x49f443(0xe1)](this[_0x49f443(0xde)],_0x134e66['source'],_0x134e66[_0x49f443(0xe8)]),_0x2eaba0={'fluff':_0x579190};if(_0x20f4fe[_0x49f443(0x10e)]!=null)_0x2eaba0[_0x49f443(0x10e)]=_0x20f4fe[_0x49f443(0x10e)];if(_0x20f4fe[_0x49f443(0x13b)])return this[_0x49f443(0x115)](_0x134e66,_0x20f4fe,_0x2eaba0);else{if(this[_0x49f443(0xd3)])return this[_0x49f443(0xe0)](_0x134e66,_0x20f4fe,_0x2eaba0);else return this[_0x49f443(0x115)](_0x134e66,_0x20f4fe,_0x2eaba0);}}async[_0x262fba(0xe0)](_0x2435d4,_0x5157c4,_0x2543d7){const _0x7d2883=_0x262fba;_0x2543d7={..._0x2543d7||{}},_0x2543d7['filterValues']=_0x5157c4['filterValues'],_0x2543d7['sheetItemsAmmo']=this[_0x7d2883(0x120)](_0x2435d4);if(_0x2435d4[_0x7d2883(0xf8)]&&Config[_0x7d2883(0xe1)](_0x7d2883(0x121),_0x7d2883(0x11e)))await this[_0x7d2883(0x100)](_0x2435d4,_0x5157c4,_0x2543d7);else{const _0xa43d19=await DataConverterItem[_0x7d2883(0x124)](_0x2435d4,_0x2543d7);await this[_0x7d2883(0xe9)](_0xa43d19);}if(this[_0x7d2883(0xd3)][_0x7d2883(0xb4)])this[_0x7d2883(0xd3)][_0x7d2883(0xc7)][_0x7d2883(0xc9)]();return{'imported':{'name':_0x2435d4[_0x7d2883(0xe8)],'actor':this[_0x7d2883(0xd3)]},'status':UtilApplications['TASK_EXIT_COMPLETE']};}async[_0x262fba(0x100)](_0x1852c0,_0x17122f,_0x17823f){const _0x423fb2=_0x262fba,_0x33da5c=[],_0x30ee31=await Promise[_0x423fb2(0xee)](_0x1852c0[_0x423fb2(0xf8)][_0x423fb2(0xdf)](async _0x1d8b85=>{const _0x1d8d43=_0x423fb2,_0x24eacd=_0x1d8b85['quantity']||0x1;if(_0x1d8b85[_0x1d8d43(0xed)]||typeof _0x1d8b85===_0x1d8d43(0xec)){let [_0x5c8566,_0xb759e3]=(_0x1d8b85[_0x1d8d43(0xed)]||_0x1d8b85)[_0x1d8d43(0x12b)]('|');if(!_0xb759e3)_0xb759e3=SRC_DMG;const _0x4f758a=UrlUtil[_0x1d8d43(0x107)][UrlUtil[_0x1d8d43(0xeb)]]({'name':_0x5c8566,'source':_0xb759e3}),_0x2885d9=await Renderer[_0x1d8d43(0x133)][_0x1d8d43(0xfd)](UrlUtil[_0x1d8d43(0xeb)],_0xb759e3,_0x4f758a);return DataConverterItem['pGetItemItem'](_0x2885d9,{'filterValues':_0x17122f[_0x1d8d43(0x123)],..._0x17823f,'quantity':_0x24eacd});}else{if(_0x1d8b85[_0x1d8d43(0x135)]){const _0x4eb9cd={'name':_0x1d8b85[_0x1d8d43(0x135)][_0x1d8d43(0x105)](),'type':'G','source':_0x1852c0[_0x1d8d43(0xc0)],'page':_0x1852c0[_0x1d8d43(0x103)],'srd':_0x1852c0[_0x1d8d43(0x10d)]};return Renderer[_0x1d8d43(0xed)][_0x1d8d43(0x102)](_0x4eb9cd),DataConverterItem['pGetItemItem'](_0x4eb9cd,{'filterValues':_0x17122f[_0x1d8d43(0x123)],..._0x17823f,'quantity':_0x24eacd});}else _0x33da5c[_0x1d8d43(0xc2)](_0x1d8d43(0x10c)+JSON['stringify'](_0x1d8b85)+'\x22');}}));for(const _0x3e9c0f of _0x30ee31['filter'](Boolean)){await this['_pImportEntry_pImportToActor_pAddItem'](_0x3e9c0f);}_0x33da5c[_0x423fb2(0x136)]&&(ui[_0x423fb2(0xd9)]['error'](_0x423fb2(0xfe)+_0x1852c0[_0x423fb2(0xe8)]+'\x22\x20(from\x20\x22'+Parser[_0x423fb2(0xf1)](_0x1852c0[_0x423fb2(0xc0)])+_0x423fb2(0xf4)+VeCt[_0x423fb2(0x11f)]),console[_0x423fb2(0xce)](...LGT,'Error(s)\x20when\x20breaking\x20'+_0x1852c0[_0x423fb2(0xe8)]+'\x20('+_0x1852c0['source']+_0x423fb2(0xc6)+_0x33da5c[_0x423fb2(0xf7)](';\x20')));}async[_0x262fba(0xe9)](_0x4888f7){const _0x218068=_0x262fba,_0x1788e4=_0x4888f7?.[_0x218068(0x126)]?.[_0x218068(0xcb)],_0xc73b6c=await this[_0x218068(0xd3)][_0x218068(0xcc)](_0x218068(0xf5),_0x4888f7,{});if(!_0xc73b6c?.[_0x218068(0x126)]?.['equipped']&&_0x1788e4)await this[_0x218068(0xd3)]['updateEmbeddedEntity'](_0x218068(0xf5),{'_id':_0xc73b6c['_id'],'data':{'equipped':!![]}});const _0x47e29f=new Set((Config['get'](_0x218068(0x121),_0x218068(0xbe))||[])[_0x218068(0xdf)](_0x412f74=>_0x412f74[_0x218068(0xf6)]()['toLowerCase']()));_0x47e29f[_0x218068(0xca)]((_0x4888f7[_0x218068(0xe8)]||'')['toLowerCase']()[_0x218068(0xf6)]())&&await this[_0x218068(0xd3)][_0x218068(0x113)](_0x218068(0xf5),{'_id':_0xc73b6c['_id'],'data':{'consume':{'type':_0x218068(0x112),'target':_0xc73b6c[_0x218068(0xef)],'amount':0x1}}});}[_0x262fba(0x125)](_0xffc398,_0xdc7ed1){const _0x99f02=_0x262fba;return DataConverterItem[_0x99f02(0x124)](_0xffc398,_0xdc7ed1);}[_0x262fba(0x120)](_0x2608d1){const _0x26444f=_0x262fba;if(!_0x2608d1[_0x26444f(0x131)])return null;if(!this[_0x26444f(0xd3)])return null;return(this['_actor']['data'][_0x26444f(0xd1)]||[])['filter'](_0x58d954=>_0x58d954['type']===_0x26444f(0x128)&&_0x58d954[_0x26444f(0x126)]['consumableType']===_0x26444f(0x112));}static[_0x262fba(0xdb)](_0x2ff42e,_0x514fce){const _0x1479e3=_0x262fba;if(_0x2ff42e[_0x1479e3(0x131)]&&!_0x514fce['ammoType'])return 0x1;if(!_0x2ff42e[_0x1479e3(0x131)]&&_0x514fce[_0x1479e3(0x131)])return-0x1;return SortUtil['ascSortLower'](_0x2ff42e[_0x1479e3(0xe8)],_0x514fce[_0x1479e3(0xe8)])||SortUtil[_0x1479e3(0x11c)](Parser[_0x1479e3(0xe5)](_0x2ff42e[_0x1479e3(0xc0)]),Parser[_0x1479e3(0xe5)](_0x514fce['source']));}}export{ImportListItem};