const _0x2e21=['error','constructor','join','_isRadio','_typeListText','77fYFJwI','itemWeightToFull','data','_page','\x22\x20(from\x20\x22','_pImportEntry_pImportToActor_pImportPackItem','notifications','toLowerCase','page','_pImportEntry_pImportToActor','weightValueToNumber','pGetItemFluff','OwnedItem','_pImportEntry_getSheetItemsAmmo','_attunementCategory','pImportEntry','Custom\x20URL','value','1862366VcyWat','sortItems','sheetItemsAmmo','_content','_id','Unknown\x20Type','mutateForFilters','Cost','Weight','filterValues','SOURCE_TYP_OFFICIAL_ALL','importItem','pGetHomebrewSources','sortEntries','703936TvLCuV','replace','length','ammo','ascSortLower','special','_pImportEntry_pImportToActor_pAddItem','1098246QtnemU','_pageFilter','render','type','map','791306PrZUkB','Items','rarity','sheet','Rarity','updateEmbeddedEntity','getItemTypeName','DataSourceSpecial','DataSourceFile','srd','isSplitAtomicPacksActor','Source','equipped','getItemsFromHomebrew','pCacheAndGet','5etools','Unhandled\x20pack\x20contents\x20type\x20\x22','8629tocVCz','push','getData','pInit','Import\x20Items','_fluffLookup','SOURCE_TYP_BREW','items','1681479fsfIbn','5etools-items','filter','toTitleCase','stringify','pGetItems','_pImportEntry_pImportToDirectoryGeneric','cost','0-5','sourceJsonToAbv','2846869fhrMct','uppercaseFirst','packContents','name','consumable','item','trim','consumableType','Name','Upload\x20File','sourceJsonToFull','URL_TO_HASH_BUILDER','Poison','_vType','3-2','1OROdFp','text-center','Type','pGetItemItem','enhanceItem','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','Item','SOURCE_TYP_CUSTOM','1-4','sourceJsonToColor','weight','get','createEmbeddedEntity','split','sourceShort','DataSourceUrl','isToken','all','sourceLong','absorbFnGetData','Unknown','fluff','ammoType','_activateListeners_absorbListItems','_list','_actor','hover','getFolderPathMeta','_titleButtonRun','pGetSources','quantity','source','Unknown\x20Rarity'];const _0x3284=function(_0xc1edbd,_0xf67949){_0xc1edbd=_0xc1edbd-0x199;let _0x2e2141=_0x2e21[_0xc1edbd];return _0x2e2141;};const _0x3e10c0=_0x3284;(function(_0x192e91,_0x507b36){const _0x4dc4b1=_0x3284;while(!![]){try{const _0x3ecd01=-parseInt(_0x4dc4b1(0x1a5))+parseInt(_0x4dc4b1(0x209))*parseInt(_0x4dc4b1(0x1c2))+parseInt(_0x4dc4b1(0x1ca))+parseInt(_0x4dc4b1(0x1ac))*parseInt(_0x4dc4b1(0x1e3))+-parseInt(_0x4dc4b1(0x1b1))+parseInt(_0x4dc4b1(0x21b))+-parseInt(_0x4dc4b1(0x1d4));if(_0x3ecd01===_0x507b36)break;else _0x192e91['push'](_0x192e91['shift']());}catch(_0x376e32){_0x192e91['push'](_0x192e91['shift']());}}}(_0x2e21,0xeb73d));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListItem extends ImportList{static['init'](){const _0x2ddc46=_0x3284;this['_initCreateSheetItemHook']({'prop':_0x2ddc46(0x1d9),'importerName':_0x2ddc46(0x1e9)});}constructor(_0x20ee4a){const _0x3208c7=_0x3284;_0x20ee4a=_0x20ee4a||{},super({'title':_0x3208c7(0x1c6)},_0x20ee4a,{'namespace':_0x3208c7(0x1d9),'titleSearch':_0x3208c7(0x1c9),'sidebarTab':_0x3208c7(0x1c9),'gameProp':_0x3208c7(0x1c9),'defaultFolderPath':[_0x3208c7(0x1b2)],'folderType':_0x3208c7(0x1e9),'fnListSort':PageFilterItems[_0x3208c7(0x21c)],'pageFilter':new PageFilterItems(),'page':UrlUtil['PG_ITEMS'],'isPreviewable':!![],'isDedupable':!![]}),this[_0x3208c7(0x1c7)]=null;}async[_0x3e10c0(0x200)](){const _0x27df2d=_0x3e10c0;return this[_0x27df2d(0x205)][_0x27df2d(0x200)]();}static async[_0x3e10c0(0x200)](){const _0x4feb23=_0x3e10c0,_0x3efb2f={'pPostLoad':async _0x3bde1e=>{const _0x232d7d=_0x3284;return Renderer[_0x232d7d(0x1d9)][_0x232d7d(0x1be)](_0x3bde1e);}};return[new UtilDataSource[(_0x4feb23(0x1b8))](Config[_0x4feb23(0x1ee)]('ui','isStreamerMode')?'SRD':_0x4feb23(0x1c0),async()=>(await Vetools[_0x4feb23(0x1cf)]())['item'],{'cacheKey':_0x4feb23(0x1cb),'filterTypes':[UtilDataSource[_0x4feb23(0x1a1)]],'isDefault':!![]}),new UtilDataSource[(_0x4feb23(0x1f2))](_0x4feb23(0x219),'',{..._0x3efb2f,'filterTypes':[UtilDataSource[_0x4feb23(0x1ea)]]}),new UtilDataSource[(_0x4feb23(0x1b9))](_0x4feb23(0x1dd),{..._0x3efb2f,'filterTypes':[UtilDataSource[_0x4feb23(0x1ea)]]}),...(await Vetools[_0x4feb23(0x1a3)](_0x4feb23(0x1d9)))['map'](({name:_0x3827ec,url:_0x48ff97})=>new UtilDataSource[(_0x4feb23(0x1f2))](_0x3827ec,_0x48ff97,{..._0x3efb2f,'filterTypes':[UtilDataSource[_0x4feb23(0x1c8)]]}))];}[_0x3e10c0(0x1c4)](){const _0x5c9b61=_0x3e10c0;return{'isPreviewable':this['_isPreviewable'],'titleButtonRun':this[_0x5c9b61(0x1ff)],'titleSearch':this['_titleSearch'],'cols':[{'name':_0x5c9b61(0x1dc),'width':0x3,'field':'name'},{'name':_0x5c9b61(0x1e5),'width':_0x5c9b61(0x1e2),'field':_0x5c9b61(0x1af)},{'name':_0x5c9b61(0x19e),'width':'1-4','field':_0x5c9b61(0x1d1),'rowClassName':_0x5c9b61(0x1e4)},{'name':_0x5c9b61(0x19f),'width':_0x5c9b61(0x1eb),'field':'weight','rowClassName':_0x5c9b61(0x1e4)},{'name':'A.','width':_0x5c9b61(0x1d2),'field':'attunement','rowClassName':_0x5c9b61(0x1e4)},{'name':_0x5c9b61(0x1b5),'width':'1-5','field':_0x5c9b61(0x1b3)},{'name':_0x5c9b61(0x1bc),'width':0x1,'field':_0x5c9b61(0x202),'titleProp':_0x5c9b61(0x1f5),'displayProp':_0x5c9b61(0x1f1),'classNameProp':'sourceClassName','rowClassName':'text-center'}],'rows':this['_content'][_0x5c9b61(0x1b0)]((_0x7f2c15,_0x1f64e5)=>{const _0x49a24e=_0x5c9b61;return this[_0x49a24e(0x1ad)][_0x49a24e(0x205)][_0x49a24e(0x19d)](_0x7f2c15),_0x7f2c15[_0x49a24e(0x1e1)]=_0x7f2c15[_0x49a24e(0x208)][_0x49a24e(0x206)](',\x20')[_0x49a24e(0x1d5)](),{'name':_0x7f2c15[_0x49a24e(0x1d7)],'type':_0x7f2c15[_0x49a24e(0x1e1)],'cost':_0x7f2c15['value']||_0x7f2c15['valueMult']?Parser['itemValueToFull'](_0x7f2c15,{'isShortForm':!![]})[_0x49a24e(0x1a6)](/ +/g,'\u00a0'):'—','weight':Parser[_0x49a24e(0x20a)](_0x7f2c15,!![])||'—','rarity':(_0x7f2c15[_0x49a24e(0x1b3)]||_0x49a24e(0x1f7))[_0x49a24e(0x1cd)](),'attunement':_0x7f2c15['_attunementCategory']==='No'?'':'×','source':_0x7f2c15[_0x49a24e(0x202)],'sourceShort':Parser[_0x49a24e(0x1d3)](_0x7f2c15['source']),'sourceLong':Parser['sourceJsonToFull'](_0x7f2c15[_0x49a24e(0x202)]),'sourceClassName':Parser[_0x49a24e(0x1ec)](_0x7f2c15[_0x49a24e(0x202)]),'ix':_0x1f64e5};})};}[_0x3e10c0(0x1fa)](){const _0x3614ac=_0x3e10c0;this[_0x3614ac(0x1fb)]['doAbsorbItems'](this[_0x3614ac(0x19a)],{'fnGetName':_0x23fc29=>_0x23fc29[_0x3614ac(0x1d7)],'fnGetValues':_0x328fd4=>({'source':_0x328fd4[_0x3614ac(0x202)],'type':_0x328fd4['_vType'],'cost':_0x328fd4[_0x3614ac(0x21a)]||0x0,'rarity':_0x328fd4['rarity'],'attunement':_0x328fd4[_0x3614ac(0x217)]!=='No','weight':Parser[_0x3614ac(0x213)](_0x328fd4[_0x3614ac(0x1ed)]),'hash':UrlUtil[_0x3614ac(0x1df)][this[_0x3614ac(0x20c)]](_0x328fd4)}),'fnGetData':UtilList2[_0x3614ac(0x1f6)],'fnBindListeners':_0x599c84=>this[_0x3614ac(0x207)]?UtilList2['absorbFnBindListenersRadio'](this[_0x3614ac(0x1fb)],_0x599c84):UtilList2['absorbFnBindListeners'](this[_0x3614ac(0x1fb)],_0x599c84)});}async['pInit'](){const _0x48bff8=_0x3e10c0;await super[_0x48bff8(0x1c5)](),this['_fluffLookup']={};const _0x2b6048=await Vetools[_0x48bff8(0x214)]();_0x2b6048['itemFluff']['forEach'](_0x1d8fd4=>(this[_0x48bff8(0x1c7)][_0x1d8fd4[_0x48bff8(0x202)]]=this[_0x48bff8(0x1c7)][_0x1d8fd4['source']]||{})[_0x1d8fd4[_0x48bff8(0x1d7)]]=_0x1d8fd4),await Renderer['item']['populatePropertyAndTypeReference']();}[_0x3e10c0(0x1fe)](){const _0x31980b=_0x3e10c0;return{...super[_0x31980b(0x1fe)](),'rarity':{'label':'Rarity','getter':_0xa071a6=>(!_0xa071a6[_0x31980b(0x1b3)]||_0xa071a6['rarity']==='Unknown'?_0x31980b(0x203):_0xa071a6['rarity'])['toTitleCase']()},'type':{'label':_0x31980b(0x1e5),'getter':_0x314a67=>{const _0x15b4f0=_0x31980b;if(_0x314a67[_0x15b4f0(0x1af)])return Renderer[_0x15b4f0(0x1d9)][_0x15b4f0(0x1b7)](_0x314a67[_0x15b4f0(0x1af)])[_0x15b4f0(0x1cd)]();else{if(_0x314a67['typeText'])return _0x314a67['typeText'];else{if(_0x314a67['wondrous'])return'Wondrous\x20Item';else{if(_0x314a67['poison'])return _0x15b4f0(0x1e0);else return _0x15b4f0(0x19c);}}}}}};}async[_0x3e10c0(0x218)](_0x10ce9c,_0x136c8e){const _0x4b8683=_0x3e10c0;_0x136c8e=_0x136c8e||{},console['log'](...LGT,'Importing\x20item\x20\x22'+_0x10ce9c[_0x4b8683(0x1d7)]+_0x4b8683(0x20d)+Parser[_0x4b8683(0x1d3)](_0x10ce9c[_0x4b8683(0x202)])+'\x22)');const _0x4a67b0=_0x10ce9c[_0x4b8683(0x1f8)]||MiscUtil[_0x4b8683(0x1ee)](this[_0x4b8683(0x1c7)],_0x10ce9c[_0x4b8683(0x202)],_0x10ce9c[_0x4b8683(0x1d7)]),_0x5caa04={'fluff':_0x4a67b0};if(_0x136c8e[_0x4b8683(0x201)]!=null)_0x5caa04[_0x4b8683(0x201)]=_0x136c8e[_0x4b8683(0x201)];if(_0x136c8e['isTemp'])return this[_0x4b8683(0x1d0)](_0x10ce9c,_0x136c8e,_0x5caa04);else{if(this['_actor'])return this[_0x4b8683(0x212)](_0x10ce9c,_0x136c8e,_0x5caa04);else return this[_0x4b8683(0x1d0)](_0x10ce9c,_0x136c8e,_0x5caa04);}}async['_pImportEntry_pImportToActor'](_0x2ff00f,_0x2b8f87,_0x590e6f){const _0x3a65af=_0x3e10c0;_0x590e6f={..._0x590e6f||{}},_0x590e6f[_0x3a65af(0x1a0)]=_0x2b8f87['filterValues'],_0x590e6f[_0x3a65af(0x199)]=this['_pImportEntry_getSheetItemsAmmo'](_0x2ff00f);if(_0x2ff00f[_0x3a65af(0x1d6)]&&Config[_0x3a65af(0x1ee)](_0x3a65af(0x1a2),'isSplitPacksActor')&&(!_0x2ff00f['atomicPackContents']||Config[_0x3a65af(0x1ee)](_0x3a65af(0x1a2),_0x3a65af(0x1bb))))await this[_0x3a65af(0x20e)](_0x2ff00f,_0x2b8f87,_0x590e6f);else{const _0x4c6da4=await DataConverterItem[_0x3a65af(0x1e6)](_0x2ff00f,_0x590e6f);await this[_0x3a65af(0x1ab)](_0x4c6da4);}if(this[_0x3a65af(0x1fc)][_0x3a65af(0x1f3)])this[_0x3a65af(0x1fc)][_0x3a65af(0x1b4)][_0x3a65af(0x1ae)]();return{'imported':{'name':_0x2ff00f[_0x3a65af(0x1d7)],'actor':this[_0x3a65af(0x1fc)]},'status':UtilApplications['TASK_EXIT_COMPLETE']};}async[_0x3e10c0(0x20e)](_0x39b5aa,_0x1bcf14,_0x1d5fc8){const _0x2dbce3=_0x3e10c0,_0x14c213=[],_0x301217=await Promise[_0x2dbce3(0x1f4)](_0x39b5aa[_0x2dbce3(0x1d6)][_0x2dbce3(0x1b0)](async _0x2143a0=>{const _0x999a6f=_0x2dbce3,_0x1396c5=_0x2143a0[_0x999a6f(0x201)]||0x1;if(_0x2143a0[_0x999a6f(0x1d9)]||typeof _0x2143a0==='string'){let [_0x5830f8,_0x46aaaf]=(_0x2143a0[_0x999a6f(0x1d9)]||_0x2143a0)[_0x999a6f(0x1f0)]('|');if(!_0x46aaaf)_0x46aaaf=SRC_DMG;const _0x1a4c78=UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil['PG_ITEMS']]({'name':_0x5830f8,'source':_0x46aaaf}),_0xd5e89b=await Renderer[_0x999a6f(0x1fd)][_0x999a6f(0x1bf)](UrlUtil['PG_ITEMS'],_0x46aaaf,_0x1a4c78);return DataConverterItem[_0x999a6f(0x1e6)](_0xd5e89b,{'filterValues':_0x1bcf14[_0x999a6f(0x1a0)],..._0x1d5fc8,'quantity':_0x1396c5});}else{if(_0x2143a0[_0x999a6f(0x1aa)]){const _0x108ac8={'name':_0x2143a0[_0x999a6f(0x1aa)][_0x999a6f(0x1cd)](),'type':'G','source':_0x39b5aa[_0x999a6f(0x202)],'page':_0x39b5aa[_0x999a6f(0x211)],'srd':_0x39b5aa[_0x999a6f(0x1ba)]};return Renderer['item'][_0x999a6f(0x1e7)](_0x108ac8),DataConverterItem[_0x999a6f(0x1e6)](_0x108ac8,{'filterValues':_0x1bcf14[_0x999a6f(0x1a0)],..._0x1d5fc8,'quantity':_0x1396c5});}else _0x14c213[_0x999a6f(0x1c3)](_0x999a6f(0x1c1)+JSON[_0x999a6f(0x1ce)](_0x2143a0)+'\x22');}}));for(const _0xf63798 of _0x301217[_0x2dbce3(0x1cc)](Boolean)){await this['_pImportEntry_pImportToActor_pAddItem'](_0xf63798);}_0x14c213[_0x2dbce3(0x1a7)]&&(ui[_0x2dbce3(0x20f)][_0x2dbce3(0x204)]('Item\x20\x22'+_0x39b5aa['name']+_0x2dbce3(0x20d)+Parser[_0x2dbce3(0x1d3)](_0x39b5aa[_0x2dbce3(0x202)])+'\x22)\x20imported\x20with\x20errors!\x20'+VeCt['STR_SEE_CONSOLE']),console[_0x2dbce3(0x204)](...LGT,'Error(s)\x20when\x20breaking\x20'+_0x39b5aa['name']+'\x20('+_0x39b5aa[_0x2dbce3(0x202)]+')\x20into\x20constituent\x20items:\x20'+_0x14c213[_0x2dbce3(0x206)](';\x20')));}async[_0x3e10c0(0x1ab)](_0xd655be){const _0x3dfacf=_0x3e10c0,_0x444aa4=_0xd655be?.['data']?.[_0x3dfacf(0x1bd)],_0x1a16a7=await this[_0x3dfacf(0x1fc)][_0x3dfacf(0x1ef)]('OwnedItem',_0xd655be,{});if(!_0x1a16a7?.['data']?.[_0x3dfacf(0x1bd)]&&_0x444aa4)await this['_actor'][_0x3dfacf(0x1b6)](_0x3dfacf(0x215),{'_id':_0x1a16a7['_id'],'data':{'equipped':!![]}});const _0x471af0=new Set((Config['get'](_0x3dfacf(0x1a2),'throwables')||[])[_0x3dfacf(0x1b0)](_0x442959=>_0x442959[_0x3dfacf(0x1da)]()[_0x3dfacf(0x210)]()));_0x471af0['has']((_0xd655be[_0x3dfacf(0x1d7)]||'')[_0x3dfacf(0x210)]()[_0x3dfacf(0x1da)]())&&await this['_actor'][_0x3dfacf(0x1b6)](_0x3dfacf(0x215),{'_id':_0x1a16a7[_0x3dfacf(0x19b)],'data':{'consume':{'type':'ammo','target':_0x1a16a7[_0x3dfacf(0x19b)],'amount':0x1}}});}[_0x3e10c0(0x1e8)](_0x1a208a,_0xbd2ffe){const _0x97eac9=_0x3e10c0;return DataConverterItem[_0x97eac9(0x1e6)](_0x1a208a,_0xbd2ffe);}[_0x3e10c0(0x216)](_0x1ea799){const _0x8fc97e=_0x3e10c0;if(!_0x1ea799['ammoType'])return null;if(!this['_actor'])return null;return(this['_actor'][_0x8fc97e(0x20b)][_0x8fc97e(0x1c9)]||[])[_0x8fc97e(0x1cc)](_0x20a713=>_0x20a713[_0x8fc97e(0x1af)]===_0x8fc97e(0x1d8)&&_0x20a713[_0x8fc97e(0x20b)][_0x8fc97e(0x1db)]===_0x8fc97e(0x1a8));}static[_0x3e10c0(0x1a4)](_0x3a6851,_0x35f043){const _0x16b276=_0x3e10c0;if(_0x3a6851[_0x16b276(0x1f9)]&&!_0x35f043[_0x16b276(0x1f9)])return 0x1;if(!_0x3a6851[_0x16b276(0x1f9)]&&_0x35f043[_0x16b276(0x1f9)])return-0x1;return SortUtil[_0x16b276(0x1a9)](_0x3a6851[_0x16b276(0x1d7)],_0x35f043[_0x16b276(0x1d7)])||SortUtil[_0x16b276(0x1a9)](Parser[_0x16b276(0x1de)](_0x3a6851[_0x16b276(0x202)]),Parser[_0x16b276(0x1de)](_0x35f043[_0x16b276(0x202)]));}}export{ImportListItem};