const _0x27b4=['sortSpells','DataSourceUrl','absorbFnGetData','_l_time','render','pGetSpellItem','\x22\x20(from\x20\x22','5etools-spells','pImportEntry','range','_pageFilter','map','folder','SRD','text-right','Level','source','\x20Spell\x20Points','Importing\x20spell\x20\x22','sourceJsonToFull','_list','_pImportEntry_pImportToItems','getTblTimeStr','sourceLong','doAbsorbItems','_isPreviewable','sheet','mutateForFilters','URL_TO_HASH_BUILDER','prepareActorSpells','getActorSpellItemOpts','_pack','spell','isNonstandardSource','time','spells','OwnedItem','_page','spLevelToFull','Source','name','pGetSpellIndex','text-center','PG_SPELLS','DataSourceFile','_normalisedTime','SOURCE_TYP_OFFICIAL_SINGLE','Spells','importEntity','isTemp','_content','_titleSearch','meta','_titleButtonRun','items','spRangeToFull','_actor','Name','importSpell','5etools','technomagic','DataSourceSpecial','Range','level','_pImportEntry_pGetFolderId','sourceShort','pGetAllSpells','\x20(tec.)','getSpellUrl','getData','sourceJsonToAbv','_pImportEntry_pImportToActor','getFolderPathMeta','SOURCE_TYP_CUSTOM'];(function(_0xd9e9d0,_0x27b479){const _0x15f8ce=function(_0x318e45){while(--_0x318e45){_0xd9e9d0['push'](_0xd9e9d0['shift']());}};_0x15f8ce(++_0x27b479);}(_0x27b4,0x9d));const _0x15f8=function(_0xd9e9d0,_0x27b479){_0xd9e9d0=_0xd9e9d0-0x0;let _0x15f8ce=_0x27b4[_0xd9e9d0];return _0x15f8ce;};'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';class ImportListSpell extends ImportList{constructor(_0x1f1913){_0x1f1913=_0x1f1913||{},super({'title':'Import\x20Spells'},_0x1f1913,{'props':[_0x15f8('0x17')],'titleSearch':_0x15f8('0x1a'),'sidebarTab':'items','gameProp':_0x15f8('0x2d'),'defaultFolderPath':[_0x15f8('0x26')],'folderType':'Item','fnListSort':PageFilterSpells[_0x15f8('0x41')],'pageFilter':new PageFilterSpells(),'page':UrlUtil[_0x15f8('0x22')],'isPreviewable':!![]});}async['pGetSources'](){const _0x42bf81=await Vetools[_0x15f8('0x20')]();return[new ImportList[(_0x15f8('0x34'))](Config['get']('ui','isStreamerMode')?_0x15f8('0x4'):_0x15f8('0x32'),async()=>(await Vetools[_0x15f8('0x39')]())[_0x15f8('0x17')],{'cacheKey':_0x15f8('0x48'),'filterTypes':[ImportList['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new ImportList[(_0x15f8('0x42'))]('Custom\x20URL','',{'filterTypes':[ImportList[_0x15f8('0x40')]]}),new ImportList[(_0x15f8('0x23'))]('Upload\x20File',{'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...Object['entries'](_0x42bf81)[_0x15f8('0x2')](([_0x132984,_0x271405])=>new ImportList[(_0x15f8('0x42'))](Parser[_0x15f8('0xa')](_0x132984),Vetools[_0x15f8('0x3b')](_0x271405),{'source':_0x132984,'filterTypes':SourceUtil[_0x15f8('0x18')](_0x132984)?[ImportList['SOURCE_TYP_ARCANA']]:[ImportList[_0x15f8('0x25')]]})),...(await Vetools['pGetHomebrewSources'](_0x15f8('0x17')))[_0x15f8('0x2')](({name,url})=>new ImportList[(_0x15f8('0x42'))](name,url,{'filterTypes':[ImportList['SOURCE_TYP_BREW']]}))];}[_0x15f8('0x3f')](){return{...super[_0x15f8('0x3f')](),'level':{'label':_0x15f8('0x6'),'getter':_0x1d20b2=>''+Parser[_0x15f8('0x1d')](_0x1d20b2[_0x15f8('0x36')])+(_0x1d20b2['level']?'\x20level':'')},'spellPoints':{'label':'Spell\x20Points','getter':_0xf9f39c=>{const _0x50e4a4=(()=>{switch(_0xf9f39c[_0x15f8('0x36')]){case 0x1:return 0x2;case 0x2:return 0x3;case 0x3:return 0x5;case 0x4:return 0x6;case 0x5:return 0x7;case 0x6:return 0x8;case 0x7:return 0xa;case 0x8:return 0xb;case 0x9:return 0xd;case 0x0:default:return 0x0;}})();return _0x50e4a4+_0x15f8('0x8');}}};}[_0x15f8('0x3c')](){return{'isPreviewable':this[_0x15f8('0x10')],'titleButtonRun':this[_0x15f8('0x2c')],'titleSearch':this[_0x15f8('0x2a')],'cols':[{'name':_0x15f8('0x30'),'width':0x4,'field':_0x15f8('0x1f')},{'name':_0x15f8('0x6'),'width':0x1,'field':_0x15f8('0x36'),'rowClassName':_0x15f8('0x21')},{'name':'Time','width':0x2,'field':_0x15f8('0x19'),'rowClassName':_0x15f8('0x21')},{'name':_0x15f8('0x35'),'width':0x3,'field':'range','rowClassName':_0x15f8('0x5')},{'name':_0x15f8('0x1e'),'width':0x1,'field':'source','titleProp':_0x15f8('0xe'),'displayProp':_0x15f8('0x38'),'rowClassName':'text-center'}],'rows':this[_0x15f8('0x29')]['map']((_0x2d6008,_0x34e2d8)=>{return this[_0x15f8('0x1')][_0x15f8('0x12')](_0x2d6008),_0x2d6008['_l_time']=PageFilterSpells[_0x15f8('0xd')](_0x2d6008['time'][0x0]),{'name':_0x2d6008[_0x15f8('0x1f')],'level':''+Parser[_0x15f8('0x1d')](_0x2d6008[_0x15f8('0x36')])+(_0x2d6008['meta']&&_0x2d6008[_0x15f8('0x2b')]['ritual']?'\x20(rit.)':'')+(_0x2d6008[_0x15f8('0x2b')]&&_0x2d6008[_0x15f8('0x2b')][_0x15f8('0x33')]?_0x15f8('0x3a'):''),'time':_0x2d6008[_0x15f8('0x44')],'range':Parser[_0x15f8('0x2e')](_0x2d6008[_0x15f8('0x0')]),'source':_0x2d6008[_0x15f8('0x7')],'sourceShort':Parser[_0x15f8('0x3d')](_0x2d6008[_0x15f8('0x7')]),'sourceLong':Parser[_0x15f8('0xa')](_0x2d6008[_0x15f8('0x7')]),'ix':_0x34e2d8};})};}['_activateListeners_absorbListItems'](){this[_0x15f8('0xb')][_0x15f8('0xf')](this['_content'],{'fnGetName':_0x14d31c=>_0x14d31c[_0x15f8('0x1f')],'fnGetValues':_0x218274=>({'source':_0x218274['source'],'level':_0x218274['level'],'time':_0x218274['_l_time'],'normalisedTime':_0x218274[_0x15f8('0x24')],'normalisedRange':_0x218274['_normalisedRange'],'hash':UrlUtil[_0x15f8('0x13')][this[_0x15f8('0x1c')]](_0x218274)}),'fnGetData':UtilList2[_0x15f8('0x43')],'fnBindListeners':_0x3ee3d8=>UtilList2['absorbFnBindListeners'](this['_list'],_0x3ee3d8)});}async[_0x15f8('0x49')](_0x240e58,_0x26c6b1){_0x26c6b1=_0x26c6b1||{},console['log'](...LGT,_0x15f8('0x9')+_0x240e58[_0x15f8('0x1f')]+_0x15f8('0x47')+Parser[_0x15f8('0x3d')](_0x240e58['source'])+'\x22)');if(_0x26c6b1[_0x15f8('0x28')])return this[_0x15f8('0xc')](_0x240e58,_0x26c6b1);else{if(this[_0x15f8('0x2f')])return this[_0x15f8('0x3e')](_0x240e58,_0x26c6b1);else return this[_0x15f8('0xc')](_0x240e58,_0x26c6b1);}}async['_pImportEntry_pImportToActor'](_0x538ad7,_0x5b5075){const _0x3fb62e=UtilActors[_0x15f8('0x15')](this[_0x15f8('0x2f')],Config['get'](_0x15f8('0x31'),_0x15f8('0x14'))),_0x90e6cd=await this[_0x15f8('0x2f')]['createEmbeddedEntity'](_0x15f8('0x1b'),await DataConverterSpell[_0x15f8('0x46')](_0x538ad7,_0x3fb62e),{});if(this[_0x15f8('0x2f')]['isToken'])this[_0x15f8('0x2f')][_0x15f8('0x11')][_0x15f8('0x45')]();return{'name':_0x538ad7['name'],'actor':this[_0x15f8('0x2f')],'embeddedEntity':_0x90e6cd};}async[_0x15f8('0xc')](_0x246c12,_0x50c4d6){const _0x2af38b=await DataConverterSpell[_0x15f8('0x46')](_0x246c12,{'isAddPermission':!![]});if(_0x50c4d6['isTemp']||!this['_pack']){if(!_0x50c4d6[_0x15f8('0x28')]&&!this['_pack']){const _0x3cd3b0=await this[_0x15f8('0x37')](_0x246c12);if(_0x3cd3b0)_0x2af38b[_0x15f8('0x3')]=_0x3cd3b0;}const _0x112c68=await Item['create'](_0x2af38b,{'renderSheet':!!_0x50c4d6[_0x15f8('0x28')],'temporary':!!_0x50c4d6[_0x15f8('0x28')]});if(!_0x50c4d6['isTemp'])await game[_0x15f8('0x2d')]['insert'](_0x112c68);return _0x112c68;}else{const _0x52e6a5=new Item(_0x2af38b);return await this[_0x15f8('0x16')][_0x15f8('0x27')](_0x52e6a5),_0x52e6a5;}}}export{ImportListSpell};