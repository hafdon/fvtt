const _0x9c62=['452QKVPGo','2igSSMm','_pFnPostProcessEntries','ritual','spSchoolAbvToFull','\x20Spell\x20Points','sourceJsonToFull','_resolve','[name=\x22btn-run\x22]','activateListeners','spell','reset','_isPreviewable','_page','doAbsorbItems','DataSourceUrl','items','spLevelToFull','SOURCE_TYP_BREW','SOURCE_TYP_ARCANA','sourceClassName','_dataList','\x20level','constructor','MODULE_LOCATION','Upload\x20File','titleSearch','TASK_EXIT_COMPLETE','isTemp','3WyqilD','_$btnReset','concentration','350262BxyGxi','pGetHomebrewSources','Range','\x20(tec.)','spRangeToFull','[name=\x22sel-preparation-mode\x22]','source','click','schoolClassName','pGetSources','SRD','technomagic','URL_TO_HASH_BUILDER','sourceShort','absorbFnBindListenersRadio','schoolLong','_activateListeners_absorbListItems','getData','getFolderPathMeta','SOURCE_TYP_CUSTOM','788924PfrliY','copy','_isConc','text-center','677988eBqiRI','OwnedItem','Import\x20and\x20Set\x20Preparation\x20Details','getTblTimeStr','school','sourceJsonToAbv','pImportEntry','81749Zfwyal','text-right','init','preparation.prepared','subschools','_l_time','Time','sourceJsonToColor','close','schoolShort','Set\x20Preparation\x20Details','Importing\x20spell\x20\x22','_normalisedTime','getListDisplayLevel','map','/template/ImportListSpellDetailPreparation.handlebars','pGetSpellIndex','name','\x20(rit.)','Spells','DataSourceFile','Spell\x20Points','_titleSearch','sp__school-','preparation.mode','.search','Level','[data-name=\x22wrp-btns-sort\x22]','2-5','pGetSpellItem','val','meta','158732IDdLOR','173919oKvikY','absorbFnGetData','range','SOURCE_TYP_OFFICIAL_ALL','isToken','sheet','level','render','5etools-spells','5kpaweC','DetailPreparation','2667BRpINV','_content','Import\x20Spells','_l_school','_pImportEntry_pImportToActor','\x22\x20(from\x20\x22','_isUseMods','get','find','Concentration','_actor','initBtnSortHandlers','getActorSpellItemOpts','Item','createEmbeddedEntity','_pImportEntry_pImportToDirectoryGeneric','mutateForFilters','getMaxWindowHeight','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','foundryData','3-2','isNonstandardSource','_list','Name','ele'];const _0x6fff=function(_0x243b51,_0x5b1119){_0x243b51=_0x243b51-0x1d5;let _0x9c62e6=_0x9c62[_0x243b51];return _0x9c62e6;};const _0xcb0a90=_0x6fff;(function(_0x3ec657,_0x4be7f5){const _0x58af93=_0x6fff;while(!![]){try{const _0x1fcf45=parseInt(_0x58af93(0x20f))+-parseInt(_0x58af93(0x23a))*parseInt(_0x58af93(0x1dc))+parseInt(_0x58af93(0x1f8))*parseInt(_0x58af93(0x21a))+parseInt(_0x58af93(0x213))+-parseInt(_0x58af93(0x1fb))+parseInt(_0x58af93(0x23b))*parseInt(_0x58af93(0x244))+-parseInt(_0x58af93(0x1db))*parseInt(_0x58af93(0x246));if(_0x1fcf45===_0x4be7f5)break;else _0x3ec657['push'](_0x3ec657['shift']());}catch(_0x280012){_0x3ec657['push'](_0x3ec657['shift']());}}}(_0x9c62,0xacfc0));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT,Util}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListSpell extends ImportList{constructor(_0x14fec4){const _0x3f55b9=_0x6fff;_0x14fec4=_0x14fec4||{},super({'title':_0x3f55b9(0x248)},_0x14fec4,{'props':[_0x3f55b9(0x1e5)],'titleSearch':'spells','sidebarTab':_0x3f55b9(0x1eb),'gameProp':_0x3f55b9(0x1eb),'defaultFolderPath':[_0x3f55b9(0x22d)],'folderType':_0x3f55b9(0x253),'fnListSort':PageFilterSpells['sortSpells'],'pageFilter':new PageFilterSpells(),'page':UrlUtil['PG_SPELLS'],'isPreviewable':!![],'isModdable':!![],'isDedupable':!![]});}async[_0xcb0a90(0x204)](){const _0xa917bc=_0xcb0a90,_0x1c6a58=await Vetools[_0xa917bc(0x22a)]();return[new UtilDataSource['DataSourceSpecial'](Config[_0xa917bc(0x24d)]('ui','isStreamerMode')?_0xa917bc(0x205):'5etools',async()=>(await Vetools['pGetAllSpells']())[_0xa917bc(0x1e5)],{'cacheKey':_0xa917bc(0x243),'filterTypes':[UtilDataSource[_0xa917bc(0x23e)]],'isDefault':!![]}),new UtilDataSource['DataSourceUrl']('Custom\x20URL','',{'filterTypes':[UtilDataSource[_0xa917bc(0x20e)]]}),new UtilDataSource[(_0xa917bc(0x22e))](_0xa917bc(0x1f4),{'filterTypes':[UtilDataSource[_0xa917bc(0x20e)]]}),...Object['entries'](_0x1c6a58)['map'](([_0x39c5ba,_0x2560e0])=>new UtilDataSource['DataSourceUrl'](Parser[_0xa917bc(0x1e1)](_0x39c5ba),Vetools['getSpellUrl'](_0x2560e0),{'source':_0x39c5ba,'filterTypes':SourceUtil[_0xa917bc(0x1d7)](_0x39c5ba)?[UtilDataSource[_0xa917bc(0x1ee)]]:[UtilDataSource['SOURCE_TYP_OFFICIAL_SINGLE']]})),...(await Vetools[_0xa917bc(0x1fc)](_0xa917bc(0x1e5)))[_0xa917bc(0x228)](({name:_0x13f684,url:_0x56e21e})=>new UtilDataSource[(_0xa917bc(0x1ea))](_0x13f684,_0x56e21e,{'filterTypes':[UtilDataSource[_0xa917bc(0x1ed)]]}))];}[_0xcb0a90(0x20d)](){const _0x4d1ec9=_0xcb0a90;return{...super[_0x4d1ec9(0x20d)](),'level':{'label':_0x4d1ec9(0x234),'getter':_0x10acb1=>''+Parser[_0x4d1ec9(0x1ec)](_0x10acb1[_0x4d1ec9(0x241)])+(_0x10acb1[_0x4d1ec9(0x241)]?_0x4d1ec9(0x1f1):'')},'spellPoints':{'label':_0x4d1ec9(0x22f),'getter':_0x274168=>{const _0x21f1d3=_0x4d1ec9,_0x11a89f=(()=>{const _0xf2dfa4=_0x6fff;switch(_0x274168[_0xf2dfa4(0x241)]){case 0x1:return 0x2;case 0x2:return 0x3;case 0x3:return 0x5;case 0x4:return 0x6;case 0x5:return 0x7;case 0x6:return 0x8;case 0x7:return 0xa;case 0x8:return 0xb;case 0x9:return 0xd;case 0x0:default:return 0x0;}})();return _0x11a89f+_0x21f1d3(0x1e0);}}};}['getData'](){const _0x1dfdf=_0xcb0a90;return{'isPreviewable':this[_0x1dfdf(0x1e7)],'titleButtonRun':this['_titleButtonRun'],'titleSearch':this[_0x1dfdf(0x230)],'buttonsAdditional':[{'name':'btn-run-mods','text':_0x1dfdf(0x215)}],'cols':[{'name':_0x1dfdf(0x1d9),'width':_0x1dfdf(0x1d6),'field':_0x1dfdf(0x22b)},{'name':_0x1dfdf(0x234),'width':0x1,'field':_0x1dfdf(0x241),'rowClassName':_0x1dfdf(0x212)},{'name':_0x1dfdf(0x220),'width':0x2,'field':'time','rowClassName':_0x1dfdf(0x212)},{'name':'School','width':0x1,'field':_0x1dfdf(0x217),'titleProp':_0x1dfdf(0x20a),'displayProp':_0x1dfdf(0x223),'classNameProp':_0x1dfdf(0x203),'rowClassName':'text-center'},{'name':'C.','width':'0-3','field':_0x1dfdf(0x1fa),'rowClassName':_0x1dfdf(0x212),'title':_0x1dfdf(0x24f)},{'name':_0x1dfdf(0x1fd),'width':_0x1dfdf(0x236),'field':_0x1dfdf(0x23d),'rowClassName':_0x1dfdf(0x21b)},{'name':'Source','width':0x1,'field':_0x1dfdf(0x201),'titleProp':'sourceLong','displayProp':_0x1dfdf(0x208),'classNameProp':_0x1dfdf(0x1ef),'rowClassName':_0x1dfdf(0x212)}],'rows':this['_content']['map']((_0x4b2473,_0x233537)=>{const _0x3901f9=_0x1dfdf;return this['_pageFilter']['constructor'][_0x3901f9(0x256)](_0x4b2473),_0x4b2473['_l_time']=PageFilterSpells[_0x3901f9(0x216)](_0x4b2473['time'][0x0]),_0x4b2473[_0x3901f9(0x249)]=Parser[_0x3901f9(0x1df)](_0x4b2473['school'],_0x4b2473[_0x3901f9(0x21e)]),{'name':_0x4b2473[_0x3901f9(0x22b)],'level':this[_0x3901f9(0x1f2)][_0x3901f9(0x227)](_0x4b2473),'time':_0x4b2473['_l_time'],'range':Parser[_0x3901f9(0x1ff)](_0x4b2473['range']),'source':_0x4b2473[_0x3901f9(0x201)],'sourceShort':Parser[_0x3901f9(0x218)](_0x4b2473[_0x3901f9(0x201)]),'sourceLong':Parser[_0x3901f9(0x1e1)](_0x4b2473[_0x3901f9(0x201)]),'sourceClassName':Parser[_0x3901f9(0x221)](_0x4b2473[_0x3901f9(0x201)]),'school':_0x4b2473[_0x3901f9(0x217)],'schoolShort':Parser['spSchoolAndSubschoolsAbvsShort'](_0x4b2473[_0x3901f9(0x217)],_0x4b2473['subschools']),'schoolLong':_0x4b2473[_0x3901f9(0x249)],'schoolClassName':_0x3901f9(0x231)+_0x4b2473['school'],'concentration':_0x4b2473[_0x3901f9(0x211)]?'Ã—':'','ix':_0x233537};})};}[_0xcb0a90(0x20b)](){const _0x234453=_0xcb0a90;this[_0x234453(0x1d8)]['doAbsorbItems'](this[_0x234453(0x247)],{'fnGetName':_0x2addb4=>_0x2addb4[_0x234453(0x22b)],'fnGetValues':_0x7c4055=>({'source':_0x7c4055[_0x234453(0x201)],'level':_0x7c4055['level'],'time':_0x7c4055[_0x234453(0x21f)],'normalisedTime':_0x7c4055[_0x234453(0x226)],'normalisedRange':_0x7c4055['_normalisedRange'],'school':_0x7c4055['_l_school'],'concentration':_0x7c4055[_0x234453(0x211)],'hash':UrlUtil[_0x234453(0x207)][this[_0x234453(0x1e8)]](_0x7c4055)}),'fnGetData':UtilList2[_0x234453(0x23c)],'fnBindListeners':_0x125f71=>this['_isRadio']?UtilList2[_0x234453(0x209)](this['_list'],_0x125f71):UtilList2['absorbFnBindListeners'](this[_0x234453(0x1d8)],_0x125f71)});}[_0xcb0a90(0x1dd)](_0x3d7d6e){const _0x4c9d33=_0xcb0a90;if(!this[_0x4c9d33(0x24c)])return _0x3d7d6e;return new Promise(_0xf9304=>{const _0x54a7af=_0x4c9d33,_0x558a3c=new ImportListSpell[(_0x54a7af(0x245))](_0x3d7d6e,_0xf9304,{'titleSearch':this[_0x54a7af(0x230)]});_0x558a3c[_0x54a7af(0x242)](!![]);});}async[_0xcb0a90(0x219)](_0x22be0b,_0x127a29){const _0x4a81fa=_0xcb0a90;_0x127a29=_0x127a29||{},console['log'](...LGT,_0x4a81fa(0x225)+_0x22be0b[_0x4a81fa(0x22b)]+_0x4a81fa(0x24b)+Parser[_0x4a81fa(0x218)](_0x22be0b[_0x4a81fa(0x201)])+'\x22)');if(_0x127a29[_0x4a81fa(0x1f7)])return this[_0x4a81fa(0x255)](_0x22be0b,_0x127a29);else{if(this[_0x4a81fa(0x250)])return this[_0x4a81fa(0x24a)](_0x22be0b,_0x127a29);else return this[_0x4a81fa(0x255)](_0x22be0b,_0x127a29);}}async[_0xcb0a90(0x24a)](_0x19fa6f,_0x3f709b){const _0x535e70=_0xcb0a90,_0x1aa250=await this[_0x535e70(0x250)][_0x535e70(0x254)](_0x535e70(0x214),await DataConverterSpell[_0x535e70(0x237)](_0x19fa6f,UtilActors[_0x535e70(0x252)](this[_0x535e70(0x250)])),{});if(this[_0x535e70(0x250)][_0x535e70(0x23f)])this[_0x535e70(0x250)][_0x535e70(0x240)]['render']();return{'imported':{'name':_0x19fa6f[_0x535e70(0x22b)],'actor':this['_actor'],'embeddedEntity':_0x1aa250},'status':UtilApplications[_0x535e70(0x1f6)]};}[_0xcb0a90(0x258)](_0x32d622,_0x47f510){const _0x1ffa04=_0xcb0a90;return DataConverterSpell[_0x1ffa04(0x237)](_0x32d622,{...UtilActors['getSpellItemItemOpts'](),..._0x47f510});}static[_0xcb0a90(0x227)](_0x363e8b){const _0x12cceb=_0xcb0a90;return''+Parser[_0x12cceb(0x1ec)](_0x363e8b[_0x12cceb(0x241)])+(_0x363e8b[_0x12cceb(0x239)]&&_0x363e8b[_0x12cceb(0x239)][_0x12cceb(0x1de)]?_0x12cceb(0x22c):'')+(_0x363e8b[_0x12cceb(0x239)]&&_0x363e8b[_0x12cceb(0x239)][_0x12cceb(0x206)]?_0x12cceb(0x1fe):'');}}ImportListSpell[_0xcb0a90(0x245)]=class extends Application{constructor(_0x53a6a3,_0x5a6d4a,_0x821203){const _0x176d19=_0xcb0a90;super({'title':_0x176d19(0x224),'template':SharedConsts[_0x176d19(0x1f3)]+_0x176d19(0x229),'width':0x3c0,'height':Util[_0x176d19(0x257)](),'resizable':!![]}),this[_0x176d19(0x1f0)]=_0x53a6a3,this[_0x176d19(0x1e2)]=_0x5a6d4a,this['_titleSearch']=_0x821203[_0x176d19(0x1f5)],this['_list']=null,this[_0x176d19(0x1f9)]=null;}[_0xcb0a90(0x20c)](){const _0x152e10=_0xcb0a90;return{'titleSearch':this[_0x152e10(0x230)],'rows':this[_0x152e10(0x1f0)]['map']((_0x2c06f5,_0x874e63)=>({'name':_0x2c06f5['name'],'level':ImportListSpell['getListDisplayLevel'](_0x2c06f5),'source':_0x2c06f5[_0x152e10(0x201)],'sourceShort':Parser['sourceJsonToAbv'](_0x2c06f5[_0x152e10(0x201)]),'sourceLong':Parser[_0x152e10(0x1e1)](_0x2c06f5[_0x152e10(0x201)]),'sourceClassName':Parser[_0x152e10(0x221)](_0x2c06f5[_0x152e10(0x201)]),'ix':_0x874e63}))};}[_0xcb0a90(0x1e4)](_0x181d77){const _0x2355d3=_0xcb0a90;super[_0x2355d3(0x1e4)](_0x181d77),this[_0x2355d3(0x1d8)]=new List({'$iptSearch':_0x181d77[_0x2355d3(0x24e)]('.search'),'$wrpList':_0x181d77[_0x2355d3(0x24e)]('.veapp__list'),'valueNames':[_0x2355d3(0x22b),_0x2355d3(0x201),_0x2355d3(0x241),'ix']}),SortUtil[_0x2355d3(0x251)](_0x181d77[_0x2355d3(0x24e)](_0x2355d3(0x235)),this[_0x2355d3(0x1d8)]),this[_0x2355d3(0x1d8)][_0x2355d3(0x1e9)](this[_0x2355d3(0x1f0)],{'fnGetName':_0x3fe5bb=>_0x3fe5bb[_0x2355d3(0x22b)],'fnGetValues':_0x17f6a2=>({'source':_0x17f6a2[_0x2355d3(0x201)],'level':_0x17f6a2[_0x2355d3(0x241)]})}),this[_0x2355d3(0x1d8)][_0x2355d3(0x21c)](),this[_0x2355d3(0x1f9)]=_0x181d77[_0x2355d3(0x24e)]('[name=\x22btn-reset\x22]')[_0x2355d3(0x202)](()=>{const _0x2a9e4a=_0x2355d3;_0x181d77[_0x2a9e4a(0x24e)](_0x2a9e4a(0x233))[_0x2a9e4a(0x238)]('');if(this['_list'])this['_list'][_0x2a9e4a(0x1e6)]();}),_0x181d77['find'](_0x2355d3(0x1e3))[_0x2355d3(0x202)](async()=>{const _0x3afcb9=_0x2355d3,_0x53d292=this['_list'][_0x3afcb9(0x1eb)][_0x3afcb9(0x228)](_0x4380db=>{const _0x45d312=_0x3afcb9,_0x456887=$(_0x4380db[_0x45d312(0x1da)]),_0x281ee8=_0x456887[_0x45d312(0x24e)]('[name=\x22sel-is-prepared\x22]')[_0x45d312(0x238)](),_0x3bc166=_0x456887['find'](_0x45d312(0x200))[_0x45d312(0x238)](),_0x92bc8b=_0x281ee8&&_0x281ee8!=='-1',_0x73eacf=_0x3bc166&&_0x3bc166!=='-1';if(!_0x92bc8b&&!_0x73eacf)return this[_0x45d312(0x1f0)][_0x4380db['ix']];const _0x4d5c94=MiscUtil[_0x45d312(0x210)](this[_0x45d312(0x1f0)][_0x4380db['ix']]);_0x4d5c94[_0x45d312(0x1d5)]={};if(_0x92bc8b)_0x4d5c94[_0x45d312(0x1d5)][_0x45d312(0x21d)]=!!Number(_0x281ee8);if(_0x73eacf)_0x4d5c94['foundryData'][_0x45d312(0x232)]=_0x3bc166;return _0x4d5c94;});this['_resolve'](_0x53d292),this[_0x3afcb9(0x222)]();});if(this[_0x2355d3(0x1f9)])this[_0x2355d3(0x1f9)][_0x2355d3(0x202)]();}async[_0xcb0a90(0x222)](){const _0x461b9e=_0xcb0a90;return this[_0x461b9e(0x1e2)](null),super['close']();}};export{ImportListSpell};