const _0x3527=['getFolderPathMeta','sourceJsonToColor','Set\x20Preparation\x20Details','getSpellUrl','Level','name','activateListeners','Concentration','sortSpells','\x20(tec.)','sourceJsonToAbv','isTemp','3-2','OwnedItem','_pImportEntry_pImportToDirectoryGeneric','pGetHomebrewSources','Custom\x20URL','5etools-spells','SRD','Source','_isConc','_pFnPostProcessEntries','technomagic','School','2-5','_isUseMods','_l_school','pImportEntry','ritual','_titleButtonRun','doAbsorbItems','DataSourceFile','DataSourceUrl','5etools','SOURCE_TYP_CUSTOM','.veapp__list','text-right','preparation.prepared','titleSearch','_isPreviewable','\x20Spell\x20Points','Upload\x20File','Name','[data-name=\x22wrp-btns-sort\x22]','render','_activateListeners_absorbListItems','URL_TO_HASH_BUILDER','log','PG_SPELLS','sourceJsonToFull','source','level','click','SOURCE_TYP_OFFICIAL_SINGLE','_normalisedRange','absorbFnGetData','init','[name=\x22sel-preparation-mode\x22]','spSchoolAndSubschoolsAbvsShort','spell','\x20(rit.)','subschools','foundryData','_actor','entries','getSpellItemItemOpts','concentration','getData','DetailPreparation','_content','ele','Time','schoolClassName','find','_$btnReset','Spells','[name=\x22btn-run\x22]','_page','items','time','sourceShort','_l_time','preparation.mode','getActorSpellItemOpts','MODULE_LOCATION','_dataList','pGetSpellIndex','/template/ImportListSpellDetailPreparation.handlebars','_normalisedTime','meta','val','\x22\x20(from\x20\x22','getListDisplayLevel','.search','DataSourceSpecial','schoolShort','createEmbeddedEntity','spSchoolAbvToFull','absorbFnBindListeners','spRangeToFull','SOURCE_TYP_OFFICIAL_ALL','_list','spells','SOURCE_TYP_BREW','pGetSources','spLevelToFull','range','sourceClassName','get','close','sourceLong','constructor','_titleSearch','map','text-center','getMaxWindowHeight','school','sheet','mutateForFilters','_resolve','\x20level'];(function(_0x1aec5b,_0x352759){const _0x41e1f6=function(_0x2b0cf3){while(--_0x2b0cf3){_0x1aec5b['push'](_0x1aec5b['shift']());}};_0x41e1f6(++_0x352759);}(_0x3527,0x18e));const _0x41e1=function(_0x1aec5b,_0x352759){_0x1aec5b=_0x1aec5b-0x0;let _0x41e1f6=_0x3527[_0x1aec5b];return _0x41e1f6;};const _0x3a11a0=_0x41e1;'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT,Util}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{SharedConsts}from'../shared/SharedConsts.js';import{ImportListCreature}from'./ImportListCreature.js';import{UtilApplications}from'./UtilApplications.js';class ImportListSpell extends ImportList{constructor(_0x2b0cf3){const _0x2c0121=_0x41e1;_0x2b0cf3=_0x2b0cf3||{},super({'title':'Import\x20Spells'},_0x2b0cf3,{'props':[_0x2c0121('0x18')],'titleSearch':_0x2c0121('0x43'),'sidebarTab':_0x2c0121('0x2b'),'gameProp':_0x2c0121('0x2b'),'defaultFolderPath':[_0x2c0121('0x28')],'folderType':'Item','fnListSort':PageFilterSpells[_0x2c0121('0x5e')],'pageFilter':new PageFilterSpells(),'page':UrlUtil[_0x2c0121('0xd')],'isPreviewable':!![],'isModdable':!![]});}async[_0x3a11a0('0x45')](){const _0x218aa5=_0x3a11a0,_0x5491aa=await Vetools[_0x218aa5('0x33')]();return[new ImportList[(_0x218aa5('0x3b'))](Config[_0x218aa5('0x49')]('ui','isStreamerMode')?_0x218aa5('0x68'):_0x218aa5('0x77'),async()=>(await Vetools['pGetAllSpells']())['spell'],{'cacheKey':_0x218aa5('0x67'),'filterTypes':[ImportList[_0x218aa5('0x41')]],'isDefault':!![]}),new ImportList[(_0x218aa5('0x76'))](_0x218aa5('0x66'),'',{'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),new ImportList[(_0x218aa5('0x75'))](_0x218aa5('0x6'),{'filterTypes':[ImportList[_0x218aa5('0x78')]]}),...Object[_0x218aa5('0x1d')](_0x5491aa)[_0x218aa5('0x4e')](([_0x31f5bf,_0x2a42dc])=>new ImportList[(_0x218aa5('0x76'))](Parser[_0x218aa5('0xe')](_0x31f5bf),Vetools[_0x218aa5('0x59')](_0x2a42dc),{'source':_0x31f5bf,'filterTypes':SourceUtil['isNonstandardSource'](_0x31f5bf)?[ImportList['SOURCE_TYP_ARCANA']]:[ImportList[_0x218aa5('0x12')]]})),...(await Vetools[_0x218aa5('0x65')](_0x218aa5('0x18')))[_0x218aa5('0x4e')](({name:_0x52dd9a,url:_0x5d8dba})=>new ImportList['DataSourceUrl'](_0x52dd9a,_0x5d8dba,{'filterTypes':[ImportList[_0x218aa5('0x44')]]}))];}[_0x3a11a0('0x56')](){const _0x4dbd7a=_0x3a11a0;return{...super[_0x4dbd7a('0x56')](),'level':{'label':_0x4dbd7a('0x5a'),'getter':_0x58bac1=>''+Parser[_0x4dbd7a('0x46')](_0x58bac1['level'])+(_0x58bac1['level']?_0x4dbd7a('0x55'):'')},'spellPoints':{'label':'Spell\x20Points','getter':_0x1541d8=>{const _0x491e3b=_0x4dbd7a,_0x2fe79d=(()=>{const _0x2457f7=_0x41e1;switch(_0x1541d8[_0x2457f7('0x10')]){case 0x1:return 0x2;case 0x2:return 0x3;case 0x3:return 0x5;case 0x4:return 0x6;case 0x5:return 0x7;case 0x6:return 0x8;case 0x7:return 0xa;case 0x8:return 0xb;case 0x9:return 0xd;case 0x0:default:return 0x0;}})();return _0x2fe79d+_0x491e3b('0x5');}}};}['getData'](){const _0x3fdfe3=_0x3a11a0;return{'isPreviewable':this[_0x3fdfe3('0x4')],'titleButtonRun':this[_0x3fdfe3('0x73')],'titleSearch':this[_0x3fdfe3('0x4d')],'buttonsAdditional':[{'name':'btn-run-mods','text':'Import\x20and\x20Set\x20Preparation\x20Details'}],'cols':[{'name':_0x3fdfe3('0x7'),'width':_0x3fdfe3('0x62'),'field':_0x3fdfe3('0x5b')},{'name':_0x3fdfe3('0x5a'),'width':0x1,'field':_0x3fdfe3('0x10'),'rowClassName':'text-center'},{'name':_0x3fdfe3('0x24'),'width':0x2,'field':_0x3fdfe3('0x2c'),'rowClassName':_0x3fdfe3('0x4f')},{'name':_0x3fdfe3('0x6d'),'width':0x1,'field':_0x3fdfe3('0x51'),'titleProp':'schoolLong','displayProp':_0x3fdfe3('0x3c'),'classNameProp':_0x3fdfe3('0x25'),'rowClassName':'text-center'},{'name':'C.','width':'0-3','field':_0x3fdfe3('0x1f'),'rowClassName':_0x3fdfe3('0x4f'),'title':_0x3fdfe3('0x5d')},{'name':'Range','width':_0x3fdfe3('0x6e'),'field':_0x3fdfe3('0x47'),'rowClassName':_0x3fdfe3('0x1')},{'name':_0x3fdfe3('0x69'),'width':0x1,'field':_0x3fdfe3('0xf'),'titleProp':_0x3fdfe3('0x4b'),'displayProp':_0x3fdfe3('0x2d'),'classNameProp':_0x3fdfe3('0x48'),'rowClassName':_0x3fdfe3('0x4f')}],'rows':this[_0x3fdfe3('0x22')][_0x3fdfe3('0x4e')]((_0x3c89a3,_0x1993e2)=>{const _0x4bfca6=_0x3fdfe3;return this['_pageFilter'][_0x4bfca6('0x53')](_0x3c89a3),_0x3c89a3['_l_time']=PageFilterSpells['getTblTimeStr'](_0x3c89a3['time'][0x0]),_0x3c89a3[_0x4bfca6('0x70')]=Parser[_0x4bfca6('0x3e')](_0x3c89a3[_0x4bfca6('0x51')],_0x3c89a3[_0x4bfca6('0x1a')]),{'name':_0x3c89a3[_0x4bfca6('0x5b')],'level':this[_0x4bfca6('0x4c')][_0x4bfca6('0x39')](_0x3c89a3),'time':_0x3c89a3[_0x4bfca6('0x2e')],'range':Parser[_0x4bfca6('0x40')](_0x3c89a3[_0x4bfca6('0x47')]),'source':_0x3c89a3[_0x4bfca6('0xf')],'sourceShort':Parser['sourceJsonToAbv'](_0x3c89a3[_0x4bfca6('0xf')]),'sourceLong':Parser[_0x4bfca6('0xe')](_0x3c89a3[_0x4bfca6('0xf')]),'sourceClassName':Parser[_0x4bfca6('0x57')](_0x3c89a3[_0x4bfca6('0xf')]),'school':_0x3c89a3[_0x4bfca6('0x51')],'schoolShort':Parser[_0x4bfca6('0x17')](_0x3c89a3[_0x4bfca6('0x51')],_0x3c89a3[_0x4bfca6('0x1a')]),'schoolLong':_0x3c89a3[_0x4bfca6('0x70')],'schoolClassName':'sp__school-'+_0x3c89a3[_0x4bfca6('0x51')],'concentration':_0x3c89a3['_isConc']?'Ã—':'','ix':_0x1993e2};})};}[_0x3a11a0('0xa')](){const _0x1c17bc=_0x3a11a0;this['_list']['doAbsorbItems'](this[_0x1c17bc('0x22')],{'fnGetName':_0x546155=>_0x546155[_0x1c17bc('0x5b')],'fnGetValues':_0x5e4e98=>({'source':_0x5e4e98[_0x1c17bc('0xf')],'level':_0x5e4e98[_0x1c17bc('0x10')],'time':_0x5e4e98[_0x1c17bc('0x2e')],'normalisedTime':_0x5e4e98[_0x1c17bc('0x35')],'normalisedRange':_0x5e4e98[_0x1c17bc('0x13')],'school':_0x5e4e98[_0x1c17bc('0x70')],'concentration':_0x5e4e98[_0x1c17bc('0x6a')],'hash':UrlUtil[_0x1c17bc('0xb')][this[_0x1c17bc('0x2a')]](_0x5e4e98)}),'fnGetData':UtilList2[_0x1c17bc('0x14')],'fnBindListeners':_0x206e20=>UtilList2[_0x1c17bc('0x3f')](this['_list'],_0x206e20)});}[_0x3a11a0('0x6b')](_0x13d711){const _0x3f7dac=_0x3a11a0;if(!this[_0x3f7dac('0x6f')])return _0x13d711;return new Promise(_0xaab464=>{const _0x2ac12c=_0x3f7dac,_0x4e5df9=new ImportListSpell[(_0x2ac12c('0x21'))](_0x13d711,_0xaab464,{'titleSearch':this[_0x2ac12c('0x4d')]});_0x4e5df9[_0x2ac12c('0x9')](!![]);});}async[_0x3a11a0('0x71')](_0x47e324,_0x416587){const _0x455238=_0x3a11a0;_0x416587=_0x416587||{},console[_0x455238('0xc')](...LGT,'Importing\x20spell\x20\x22'+_0x47e324[_0x455238('0x5b')]+_0x455238('0x38')+Parser['sourceJsonToAbv'](_0x47e324[_0x455238('0xf')])+'\x22)');if(_0x416587[_0x455238('0x61')])return this[_0x455238('0x64')](_0x47e324,_0x416587);else{if(this[_0x455238('0x1c')])return this['_pImportEntry_pImportToActor'](_0x47e324,_0x416587);else return this['_pImportEntry_pImportToDirectoryGeneric'](_0x47e324,_0x416587);}}async['_pImportEntry_pImportToActor'](_0x51f79a,_0x5d8cde){const _0x32ac82=_0x3a11a0,_0x3429eb=await this[_0x32ac82('0x1c')][_0x32ac82('0x3d')](_0x32ac82('0x63'),await DataConverterSpell['pGetSpellItem'](_0x51f79a,UtilActors[_0x32ac82('0x30')](this[_0x32ac82('0x1c')])),{});if(this['_actor']['isToken'])this[_0x32ac82('0x1c')][_0x32ac82('0x52')][_0x32ac82('0x9')]();return{'imported':{'name':_0x51f79a['name'],'actor':this[_0x32ac82('0x1c')],'embeddedEntity':_0x3429eb},'status':UtilApplications['TASK_EXIT_COMPLETE']};}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x3cd069,_0x5c4c2e){const _0x47ba5b=_0x3a11a0;return DataConverterSpell['pGetSpellItem'](_0x3cd069,{...UtilActors[_0x47ba5b('0x1e')](),..._0x5c4c2e});}static['getListDisplayLevel'](_0x1af9ba){const _0xed56bb=_0x3a11a0;return''+Parser[_0xed56bb('0x46')](_0x1af9ba[_0xed56bb('0x10')])+(_0x1af9ba[_0xed56bb('0x36')]&&_0x1af9ba['meta'][_0xed56bb('0x72')]?_0xed56bb('0x19'):'')+(_0x1af9ba['meta']&&_0x1af9ba[_0xed56bb('0x36')][_0xed56bb('0x6c')]?_0xed56bb('0x5f'):'');}}ImportListSpell['DetailPreparation']=class extends Application{constructor(_0x455431,_0x446cd5,_0x1d2b58){const _0xdee1ba=_0x3a11a0;super({'title':_0xdee1ba('0x58'),'template':SharedConsts[_0xdee1ba('0x31')]+_0xdee1ba('0x34'),'width':0x3c0,'height':Util[_0xdee1ba('0x50')](),'resizable':!![]}),this['_dataList']=_0x455431,this[_0xdee1ba('0x54')]=_0x446cd5,this['_titleSearch']=_0x1d2b58[_0xdee1ba('0x3')],this[_0xdee1ba('0x42')]=null,this['_$btnReset']=null;}[_0x3a11a0('0x20')](){const _0x48d3ff=_0x3a11a0;return{'titleSearch':this['_titleSearch'],'rows':this[_0x48d3ff('0x32')][_0x48d3ff('0x4e')]((_0x16ed46,_0xf88a96)=>({'name':_0x16ed46[_0x48d3ff('0x5b')],'level':ImportListSpell[_0x48d3ff('0x39')](_0x16ed46),'source':_0x16ed46[_0x48d3ff('0xf')],'sourceShort':Parser[_0x48d3ff('0x60')](_0x16ed46['source']),'sourceLong':Parser[_0x48d3ff('0xe')](_0x16ed46['source']),'sourceClassName':Parser[_0x48d3ff('0x57')](_0x16ed46['source']),'ix':_0xf88a96}))};}[_0x3a11a0('0x5c')](_0x371934){const _0x37458b=_0x3a11a0;super[_0x37458b('0x5c')](_0x371934),this[_0x37458b('0x42')]=new List({'$iptSearch':_0x371934[_0x37458b('0x26')](_0x37458b('0x3a')),'$wrpList':_0x371934[_0x37458b('0x26')](_0x37458b('0x0')),'valueNames':[_0x37458b('0x5b'),'source',_0x37458b('0x10'),'ix']}),SortUtil['initBtnSortHandlers'](_0x371934[_0x37458b('0x26')](_0x37458b('0x8')),this[_0x37458b('0x42')]),this[_0x37458b('0x42')][_0x37458b('0x74')](this[_0x37458b('0x32')],{'fnGetName':_0x16d2dd=>_0x16d2dd['name'],'fnGetValues':_0x503d0e=>({'source':_0x503d0e[_0x37458b('0xf')],'level':_0x503d0e[_0x37458b('0x10')]})}),this[_0x37458b('0x42')][_0x37458b('0x15')](),this['_$btnReset']=_0x371934[_0x37458b('0x26')]('[name=\x22btn-reset\x22]')['click'](()=>{const _0x188cef=_0x37458b;_0x371934['find'](_0x188cef('0x3a'))[_0x188cef('0x37')]('');if(this[_0x188cef('0x42')])this[_0x188cef('0x42')]['reset']();}),_0x371934[_0x37458b('0x26')](_0x37458b('0x29'))['click'](async()=>{const _0xe4bbf9=_0x37458b,_0x24ed5=this[_0xe4bbf9('0x42')][_0xe4bbf9('0x2b')][_0xe4bbf9('0x4e')](_0x444766=>{const _0x2b0353=_0xe4bbf9,_0x3f71ee=$(_0x444766[_0x2b0353('0x23')]),_0x3c3046=_0x3f71ee[_0x2b0353('0x26')]('[name=\x22sel-is-prepared\x22]')[_0x2b0353('0x37')](),_0x52fd6c=_0x3f71ee[_0x2b0353('0x26')](_0x2b0353('0x16'))[_0x2b0353('0x37')](),_0x3bbf3a=_0x3c3046&&_0x3c3046!=='-1',_0x5b421c=_0x52fd6c&&_0x52fd6c!=='-1';if(!_0x3bbf3a&&!_0x5b421c)return this[_0x2b0353('0x32')][_0x444766['ix']];const _0x4899cd=MiscUtil['copy'](this[_0x2b0353('0x32')][_0x444766['ix']]);_0x4899cd[_0x2b0353('0x1b')]={};if(_0x3bbf3a)_0x4899cd[_0x2b0353('0x1b')][_0x2b0353('0x2')]=!!Number(_0x3c3046);if(_0x5b421c)_0x4899cd[_0x2b0353('0x1b')][_0x2b0353('0x2f')]=_0x52fd6c;return _0x4899cd;});this[_0xe4bbf9('0x54')](_0x24ed5),this[_0xe4bbf9('0x4a')]();});if(this[_0x37458b('0x27')])this['_$btnReset'][_0x37458b('0x11')]();}async[_0x3a11a0('0x4a')](){const _0x44c2cf=_0x3a11a0;return this[_0x44c2cf('0x54')](null),super[_0x44c2cf('0x4a')]();}};export{ImportListSpell};