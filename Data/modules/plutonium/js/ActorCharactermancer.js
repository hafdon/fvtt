const _0x579a=['Equipment\x20Shop','Set\x20ability\x20scores.','pGetWithCache','Feats','compRaceToolProficiencies','pLoad','_actor','MODULE_LOCATION','abilityChosen','feat_ixMaxRace','getCurrentAbilityScores','_foundryIsSkipImportPreparedSpells','isStreamerMode','currency','_foundryIsSkipCustomizeSkills','_pHandleSaveClick_postSave','length','_doSwitchToNextTab','weaponProficiencies','Imported\x20equipment.','_compFeat','_render_pRenderTabEquipmentShop','_pHandleSaveClick_spells','116207rPWoGR','_foundryAllFeatures','additionalSpells','Importing\x20equipment...','background','disabled','entity','update','filterBox','compBackgroundLanguageToolProficiencies','Charactermancer','_pHandleSaveClick','_postProcessAllSelectedData','DATA_URL_BACKGROUNDS','_foundryConInitial','Spells','compRaceLanguageProficiencies','AdditionalSaveState','bind','Imported\x20race.','custom','_doSwitchToPrevTab','_conInitialWithModifiers','Are\x20You\x20Sure?','5ykWMMa','classFeature','copy','feat_ixMaxCustom','compStatgen','compsClassSkillProficiencies','TaskRunner','namespace','ptrTaskProgress','featMetas','sort','<hr\x20class=\x22hr-1\x20w-100\x22>','_pHandleSaveClick_pDoImportAdditionalSpells','background_ixBackground','_foundryHpIncreaseMode','pInit','compsClassFeatureOptionsSelect','compBackgroundSkillProficiencies','forEach','_pRender_renderTabAbilities','compsFeatLanguageProficiencies','Race','MODE_MULTICLASS','_foundryConFinal','race','pRenderShop','doApplyProficiencyFormDataToActorUpdate','pGetUserBoolean','ActorCharactermancerSourceSelector_savedSelection','vulnerable','find','33CSBhTr','flat','compsClassHpIncreaseMode','has','last','multiclassing','ActorCharactermancerSourceSelector_filter','get','click','isCancelled','_hasPrevTab','Building...','skillProficiencies','_pHandleSaveClick_equipment','Setting\x20ability\x20scores...','push','append','startingProficiencies','SOURCE_TYP_OFFICIAL_ALL','_render_loading','_featureSourceTracker','spells','Running\x20post-build\x20step...','compFeat','ability','pGetRaces','progressWidget','mergeAbilityIncrease','compsFeatWeaponProficiencies','ascSort','pHandleButtonClick','entries','map','$btnTab','_compEquipment','_pHandleSaveClick_pDoApplySkills','ABIL_ABVS','425349ZtmJHE','193433JtDBXi','getClass_','pageFilter','getFormDataAsi','_pHandleSaveClick_class','class_ixMax','getSubclass_','Build\x20complete!','prop','_setActiveTab','compsSpellSpells','DataSourceSpecial','filterBoxSpells','SOURCE_TYP_CUSTOM','class_getTotalLevels','pImportEquipmentItemEntries','_pHandleSaveClick_feats','_compBackground','feat_getActiveFeatIxProps','pRender','addClass','compsSpellAdditionalSpellSubclass','_foundryIsSkipCustomizeLanguagesTools','Build\x20Complete','pGetHomebrewSources','_conFinalWithModifiers','class','_foundrySelectedLevelIndices','compEquipmentStartingDefault','_pRender_pRenderTabSpells','/template/Charactermancer.hbs','subclassFeature','Failed\x20to\x20load!\x20','keys','DATA_URL_FEATS','actor','compBackgroundCharacteristics','compEquipmentShopGold','_pHandleSaveClick_abilities','max','class_getProps','feat_ixMaxAbility','toolProficiencies','Build\x20cancelled.','pDoApplyAdditionalSpellsFormDataToActor','pPostLoadBrew','size','Abilities','pPostLoad','365NsdCCE','feats','458937BmjBUI','setProgress','compRaceSize','compsFeatSkillProficiencies','slice','186967fykAIg','compBackgroundFeatures','_data','compBackgroundToolProficiencies','_pRender_renderTabClass','class_ixPrimaryClass','_pHandleSaveClick_pDoApplyTraitLike','name','mergeMap','feat_getProps','Importing\x20race...','pApplyFormDataToActor','then','languageProficiencies','getRace_','getValues','compsSpellAdditionalSpellFeat','modalFilterClasses','STR_SEE_CONSOLE','equipmentItemEntries','isCustomizeLanguagesTools','conditionImmune','$wrpTab','<button\x20class=\x22btn\x20btn-5et\x20btn-primary\x22>Finalize</button>','compClass','Importing\x20background...','error','empty','compsClassLevelSelect','render','data','cbPostSave','_isLevelUp','_tabs','1HIwHxf','_pHandleSaveClick_','_pGetSources','_addHookActiveTab','compRaceDamageResistance','subclasses','filter','proficienciesGained','Importing\x20spells...','Imported\x20feats.','compRaceConditionImmunity','Class','5etools','compRaceDamageImmunity','features','_cbPostSave','_renderTabs','_pLoadVetoolsSource','Custom\x20URL','state','immune','_pRender_renderTabBackground','SKILL_TO_ATB_ABV','pImportEntry','set','Component','_compSpell','subrace','_pRender_renderTabRace','_comp','DATA_URL_OPTIONALFEATURES','SRD','_foundryFormDataFeatures','source','getCurrentLevel','item','close','_pLoad','compRaceSkillProficiencies','filterValuesSpellsCache','delete','addFauxOptionalFeatureFeatures','appendTo','compsFeatToolProficiencies','getMaxWindowWidth','activateListeners','btn-sm','_pHandleSaveClick_race','Upload\x20File','_pPostLoad','_pHandleSaveClick_background','TabMeta','Imported\x20spells.','spellcastingAbility','pGetFormData','compBackground','DataSourceUrl','getTotals','pGetItems','totals','209807JPCpty','Starting\x20Equipment','subclass','activeTab_','startingEquipment','Importing\x20classes\x20and\x20subclasses...','compRace','_compClass','feat','_pRender_renderTabFeats','optionalfeature','_pRender','_cons_initTabs','notifications','_BREW_DIRS','Importing\x20feats...','_foundryStartingProficiencyMode','compSpell','Select\x20Sources','_compRace','mutateForFilters','_render_pRenderTabEquipmentStarting','skills','catch','resist','compBackgroundLanguageProficiencies','decorate','_compAbility'];const _0x40d1=function(_0x519421,_0x59d127){_0x519421=_0x519421-0xad;let _0x579a35=_0x579a[_0x519421];return _0x579a35;};const _0xd54096=_0x40d1;(function(_0x169e70,_0x530bfb){const _0x53030f=_0x40d1;while(!![]){try{const _0x2a1569=-parseInt(_0x53030f(0x1b2))*-parseInt(_0x53030f(0xe3))+-parseInt(_0x53030f(0xb1))+parseInt(_0x53030f(0x148))*parseInt(_0x53030f(0x10c))+parseInt(_0x53030f(0x17b))+-parseInt(_0x53030f(0xe5))+-parseInt(_0x53030f(0xea))+-parseInt(_0x53030f(0xb2))*-parseInt(_0x53030f(0x193));if(_0x2a1569===_0x530bfb)break;else _0x169e70['push'](_0x169e70['shift']());}catch(_0x496570){_0x169e70['push'](_0x169e70['shift']());}}}(_0x579a,0x391f3));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportListRace}from'./ImportListRace.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{ImportListClass}from'./ImportListClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{ImportListBackground}from'./ImportListBackground.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListSpell}from'./ImportListSpell.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerRace}from'./ActorCharactermancerRace.js';import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ActorCharactermancerEquipment}from'./ActorCharactermancerEquipment.js';import{ActorCharactermancerBackground}from'./ActorCharactermancerBackground.js';import{ActorCharactermancerClass}from'./ActorCharactermancerClass.js';import{ActorCharactermancerFeat}from'./ActorCharactermancerFeat.js';import{ActorCharactermancerSpell}from'./ActorCharactermancerSpell.js';import{ActorCharactermancerAbility}from'./ActorCharactermancerAbility.js';import{UtilDataSource}from'./UtilDataSource.js';import{Charactermancer_FeatureSourceTracker,Charactermancer_Util}from'./UtilCharactermancer.js';import{Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';class ActorCharactermancerSourceSelector extends AppSourceSelectorMulti{static async[_0xd54096(0x1d0)](_0x513682,_0x3d4780,_0x175b53,_0x26b464){const _0x57af22=_0xd54096,_0x1ab31e=await this['_pGetSources'](),_0x442888=new ActorCharactermancerSourceSelector({'title':_0x57af22(0x15a),'filterNamespace':_0x57af22(0x1b8),'savedSelectionKey':_0x57af22(0x1af),'sourcesToDisplay':_0x1ab31e});_0x442888[_0x57af22(0x107)](!![]);const _0x245b00=await _0x442888['pWaitForUserInput']();if(_0x245b00==null)return;this[_0x57af22(0x187)](_0x245b00);const _0x39fa63=new ActorCharactermancer({'actor':_0x3d4780['actor'],'data':_0x245b00});_0x39fa63[_0x57af22(0x107)](!![]);}static[_0xd54096(0x187)](_0x1135b1){const _0x34fe5c=_0xd54096;_0x1135b1['forEach']((_0x1ab1a5,_0x1923ba)=>{const _0xaa5579=_0x40d1;if(!_0x1ab1a5[_0xaa5579(0xcc)]||!_0x1ab1a5[_0xaa5579(0xcc)][_0xaa5579(0x174)])return;const _0x53a800=_0x1135b1[_0xaa5579(0xe9)](0x0,_0x1923ba)[_0xaa5579(0x112)](_0x1a2c4d=>_0x1a2c4d[_0xaa5579(0xcc)]);if(!_0x53a800['length'])return;_0x1ab1a5[_0xaa5579(0xcc)]=_0x1ab1a5[_0xaa5579(0xcc)]['filter'](_0x521921=>{const _0x29420e=_0xaa5579,_0xaec12f=_0x53a800['find'](_0x51d30c=>_0x51d30c[_0x29420e(0xcc)]&&_0x51d30c[_0x29420e(0xcc)][_0x29420e(0x1b1)](_0x377734=>_0x521921['name']===_0x377734[_0x29420e(0xf1)]&&_0x521921[_0x29420e(0x12d)]===_0x377734[_0x29420e(0x12d)]));if(!_0xaec12f)return!![];const _0x1d8eaf=_0xaec12f[_0x29420e(0xcc)][_0x29420e(0x1b1)](_0x1973a9=>_0x521921[_0x29420e(0xf1)]===_0x1973a9[_0x29420e(0xf1)]&&_0x521921[_0x29420e(0x12d)]===_0x1973a9['source']);return _0x1d8eaf[_0x29420e(0x111)]=[..._0x1d8eaf['subclasses']||[],..._0x521921[_0x29420e(0x111)]||[]],![];});});const _0x392ae4=_0x1135b1[_0x34fe5c(0x1d2)](_0x26ce9f=>_0x26ce9f[_0x34fe5c(0xcc)]||[])[_0x34fe5c(0x1b3)](),_0x202ed3=_0x1135b1[_0x34fe5c(0x1d2)](_0xf78762=>_0xf78762[_0x34fe5c(0x152)]||[])['flat']();Charactermancer_Class_Util[_0x34fe5c(0x135)](_0x392ae4,_0x202ed3);}static async[_0xd54096(0x10e)](){const _0x2e443c=_0xd54096;return[new UtilDataSource[(_0x2e443c(0xbd))](Config['get']('ui',_0x2e443c(0x170))?_0x2e443c(0x12b):'5etools',this['_pLoadVetoolsSource'][_0x2e443c(0x18d)](this),{'cacheKey':_0x2e443c(0x118),'filterTypes':[UtilDataSource[_0x2e443c(0x1c4)]],'isDefault':!![],'pPostLoad':this['_pPostLoad'][_0x2e443c(0x18d)](this,!![])}),new UtilDataSource[(_0x2e443c(0x144))](_0x2e443c(0x11e),'',{'pPostLoad':this[_0x2e443c(0x13d)][_0x2e443c(0x18d)](this,![]),'filterTypes':[UtilDataSource[_0x2e443c(0xbf)]]}),new UtilDataSource['DataSourceFile'](_0x2e443c(0x13c),{'pPostLoad':this['_pPostLoad'][_0x2e443c(0x18d)](this,![]),'filterTypes':[UtilDataSource[_0x2e443c(0xbf)]]}),...(await Vetools[_0x2e443c(0xca)](...ActorCharactermancerSourceSelector[_0x2e443c(0x156)]))[_0x2e443c(0x1d2)](({name:_0x4854e4,url:_0x5ef2a2})=>new UtilDataSource['DataSourceUrl'](_0x4854e4,_0x5ef2a2,{'pPostLoad':this[_0x2e443c(0x13d)][_0x2e443c(0x18d)](this,![]),'filterTypes':[UtilDataSource['SOURCE_TYP_BREW']]}))];}static async[_0xd54096(0x11d)](){const _0x1fa478=_0xd54096,_0x5c1c62={},[_0x3e0aab,_0x1dc9a1,_0x515478,_0x31b786,_0x1866dc,_0x28149e,_0x2a601d]=await Promise['all']([Vetools['pGetClasses'](),Vetools[_0x1fa478(0x1cb)](),Vetools[_0x1fa478(0x166)](Vetools[_0x1fa478(0x188)]),Vetools[_0x1fa478(0x146)](),Vetools['pGetAllSpells'](),Vetools[_0x1fa478(0x166)](Vetools[_0x1fa478(0xd4)]),Vetools[_0x1fa478(0x166)](Vetools[_0x1fa478(0x12a)])]);return Object['assign'](_0x5c1c62,_0x3e0aab),_0x5c1c62[_0x1fa478(0x1ab)]=_0x1dc9a1[_0x1fa478(0x1ab)],_0x5c1c62[_0x1fa478(0x17f)]=_0x515478[_0x1fa478(0x17f)],_0x5c1c62[_0x1fa478(0x12f)]=_0x31b786[_0x1fa478(0x12f)],_0x5c1c62['spell']=_0x1866dc['spell'],_0x5c1c62[_0x1fa478(0x150)]=_0x28149e[_0x1fa478(0x150)],_0x5c1c62[_0x1fa478(0x152)]=_0x2a601d[_0x1fa478(0x152)],_0x5c1c62;}static async[_0xd54096(0x13d)](_0xd2132,_0x200be9){const _0x2a3660=_0xd54096;return _0x200be9={..._0x200be9},!_0xd2132&&(_0x200be9[_0x2a3660(0x1ab)]||_0x200be9['subrace'])&&(_0x200be9['race']=MiscUtil[_0x2a3660(0x195)](_0x200be9[_0x2a3660(0x1ab)]),_0x200be9[_0x2a3660(0x1ab)]=await Charactermancer_Race_Util[_0x2a3660(0xdf)](_0x200be9)),_0x200be9['class']&&(_0x200be9['class']=await PageFilterClassesFoundry[_0x2a3660(0xe2)]({'class':_0x200be9['class'],'subclass':_0x200be9[_0x2a3660(0x14a)],'classFeature':_0x200be9[_0x2a3660(0x194)],'subclassFeature':_0x200be9[_0x2a3660(0xd1)]}),_0x200be9[_0x2a3660(0xcc)]['forEach'](_0x1652ea=>PageFilterClasses[_0x2a3660(0x15c)](_0x1652ea))),_0x200be9;}}ActorCharactermancerSourceSelector[_0xd54096(0x156)]=[_0xd54096(0xcc),_0xd54096(0x14a),_0xd54096(0x1ab),_0xd54096(0x127),_0xd54096(0x12f),_0xd54096(0x17f),_0xd54096(0x12f),'spell',_0xd54096(0x150),_0xd54096(0x152)];class ActorCharactermancer extends Application{constructor(_0x3058b5){const _0x5139fb=_0xd54096;_0x3058b5=_0x3058b5||{},super({'title':_0x5139fb(0x185),'template':SharedConsts[_0x5139fb(0x16b)]+_0x5139fb(0xd0),'width':Util[_0x5139fb(0x138)](0x4b0),'height':Util['getMaxWindowHeight'](),'resizable':!![]});const _0x52f198={};_0x3058b5[_0x5139fb(0x108)][_0x5139fb(0x1a5)](_0x4cc755=>{const _0x18efa8=_0x5139fb;Object[_0x18efa8(0x1d1)](_0x4cc755)[_0x18efa8(0x1a5)](([_0x457cd6,_0x4e6559])=>{const _0x1b76e3=_0x18efa8;if(!_0x4e6559||!(_0x4e6559 instanceof Array))return;if(_0x52f198[_0x457cd6])_0x52f198[_0x457cd6]=[..._0x52f198[_0x457cd6],...MiscUtil['copy'](_0x4e6559)];else _0x52f198[_0x457cd6]=MiscUtil[_0x1b76e3(0x195)](_0x4e6559);});}),this[_0x5139fb(0x129)]=new ActorCharactermancer[(_0x5139fb(0x125))]({'actor':_0x3058b5[_0x5139fb(0xd5)],'data':_0x52f198,'cbPostSave':this[_0x5139fb(0x130)][_0x5139fb(0x18d)](this)});}[_0xd54096(0x139)](_0x3d4b1f){const _0x33d62f=_0xd54096;this['_comp'][_0x33d62f(0x107)](_0x3d4b1f);}}ActorCharactermancer['Component']=class extends ActorCharactermancerBaseComponent{constructor(_0x43baa2){const _0x57e5d7=_0xd54096;_0x43baa2=_0x43baa2||{},super(),TabUiUtil[_0x57e5d7(0x162)](this),this[_0x57e5d7(0x16a)]=_0x43baa2[_0x57e5d7(0xd5)],this[_0x57e5d7(0xec)]=_0x43baa2['data'],this[_0x57e5d7(0x11b)]=_0x43baa2[_0x57e5d7(0x109)],this['_featureSourceTracker']=new Charactermancer_FeatureSourceTracker(),this[_0x57e5d7(0x10a)]=Charactermancer_Util[_0x57e5d7(0x12e)](this['_actor'])>0x0,this[_0x57e5d7(0x10b)]=null;const {tabClass:_0x45cf9a,tabRace:_0x428534,tabAbilities:_0x3bca9f,tabBackground:_0x454d20,tabEquipment:_0x53b1a9,tabShop:_0x547691,tabSpells:_0x30426d,tabFeats:_0x385285}=this['_cons_initTabs']();this[_0x57e5d7(0x14f)]=new ActorCharactermancerClass({'actor':_0x43baa2[_0x57e5d7(0xd5)],'data':_0x43baa2['data'],'parent':this,'tabClass':_0x45cf9a}),this[_0x57e5d7(0x15b)]=new ActorCharactermancerRace({'actor':_0x43baa2[_0x57e5d7(0xd5)],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabRace':_0x428534}),this['_compAbility']=new ActorCharactermancerAbility({'actor':_0x43baa2['actor'],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabAbilities':_0x3bca9f}),this[_0x57e5d7(0xc3)]=new ActorCharactermancerBackground({'actor':_0x43baa2['actor'],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabBackground':_0x454d20}),this[_0x57e5d7(0xae)]=new ActorCharactermancerEquipment({'actor':_0x43baa2[_0x57e5d7(0xd5)],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabEquipment':_0x53b1a9,'tabShop':_0x547691}),this[_0x57e5d7(0x126)]=new ActorCharactermancerSpell({'actor':_0x43baa2['actor'],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabSpells':_0x30426d}),this['_compFeat']=new ActorCharactermancerFeat({'actor':_0x43baa2[_0x57e5d7(0xd5)],'data':_0x43baa2[_0x57e5d7(0x108)],'parent':this,'tabFeats':_0x385285}),this[_0x57e5d7(0x191)]=null,this['_conFinalWithModifiers']=null;}[_0xd54096(0x154)](){const _0x4fcf17=_0xd54096;this['_isLevelUp']?this['_tabs']=this[_0x4fcf17(0x11c)]([new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x117),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':'Abilities','hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x4fcf17(0x18a),'hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x4fcf17(0x167),'hasBorder':!![]})],{'propProxy':_0x4fcf17(0x11f)}):this[_0x4fcf17(0x10b)]=this[_0x4fcf17(0x11c)]([new TabUiUtil['TabMeta']({'name':_0x4fcf17(0x117),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x1a8),'hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x4fcf17(0xe1),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':'Background','hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x149),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x164),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x18a),'hasBorder':!![]}),new TabUiUtil[(_0x4fcf17(0x13f))]({'name':_0x4fcf17(0x167),'hasBorder':!![]})],{'propProxy':_0x4fcf17(0x11f)});if(this[_0x4fcf17(0x10a)]){const [_0x13ded7,_0x7ebd61,_0x52d6aa,_0x4cc9e9]=this[_0x4fcf17(0x10b)];return{'tabClass':_0x13ded7,'tabAbilities':_0x7ebd61,'tabSpells':_0x52d6aa,'tabFeats':_0x4cc9e9};}else{const [_0x94ecb8,_0x1301ff,_0xf580f4,_0x55418a,_0x4f4ddc,_0x4d88ab,_0x3f496e,_0x3a9bcf]=this['_tabs'];return{'tabClass':_0x94ecb8,'tabRace':_0x1301ff,'tabAbilities':_0xf580f4,'tabBackground':_0x55418a,'tabEquipment':_0x4f4ddc,'tabShop':_0x4d88ab,'tabSpells':_0x3f496e,'tabFeats':_0x3a9bcf};}}get['featureSourceTracker_'](){const _0x10c476=_0xd54096;return this[_0x10c476(0x1c6)];}get[_0xd54096(0x102)](){return this['_compClass'];}get[_0xd54096(0x14e)](){const _0x5c96cc=_0xd54096;return this[_0x5c96cc(0x15b)];}get[_0xd54096(0x143)](){return this['_compBackground'];}get['compEquipment'](){const _0x4a0d91=_0xd54096;return this[_0x4a0d91(0xae)];}get[_0xd54096(0x159)](){return this['_compSpell'];}get[_0xd54096(0x1c9)](){return this['_compFeat'];}get['compAbility'](){return this['_compAbility'];}set[_0xd54096(0x14b)](_0x45c4c8){const _0x2d547e=_0xd54096;this[_0x2d547e(0xbb)](_0x45c4c8);}[_0xd54096(0x107)](_0x27743d){const _0x52fc4e=_0xd54096;this['_render_loading'](_0x27743d),this[_0x52fc4e(0x131)]()[_0x52fc4e(0xf6)](()=>this[_0x52fc4e(0x153)](_0x27743d))[_0x52fc4e(0x15f)](_0x35751d=>{const _0x52b60a=_0x52fc4e;ui[_0x52b60a(0x155)][_0x52b60a(0x104)](_0x52b60a(0xd2)+VeCt[_0x52b60a(0xfc)]);throw _0x35751d;});}[_0xd54096(0x1c5)](_0x9f837e){const _0xe01eec=_0xd54096;_0x9f837e[_0xe01eec(0x1c2)]('<div\x20class=\x22flex-vh-center\x20w-100\x20h-100\x22><i>Loading...</i></div>');}async['_pLoad'](){const _0x1d522d=_0xd54096;await this[_0x1d522d(0x15b)][_0x1d522d(0x169)](),await this[_0x1d522d(0xc3)]['pLoad'](),await this[_0x1d522d(0x14f)]['pLoad'](),await this[_0x1d522d(0x126)][_0x1d522d(0x169)](),await this[_0x1d522d(0x178)]['pLoad']();}async[_0xd54096(0x153)](_0x47f11b){const _0xd10061=_0xd54096;_0x47f11b[_0xd10061(0x105)]();const _0x33f7d7=$('<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Previous</button>')[_0xd10061(0x1ba)](()=>this[_0xd10061(0x190)]({'propProxy':_0xd10061(0x11f)})),_0x292b21=$('<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Next</button>')['click'](()=>this[_0xd10061(0x175)]({'propProxy':_0xd10061(0x11f)})),_0x5c6cfe=()=>{const _0x366a6f=_0xd10061;_0x33f7d7[_0x366a6f(0xba)]('disabled',!this[_0x366a6f(0x1bc)]({'propProxy':'state'})),_0x292b21[_0x366a6f(0xba)]('disabled',!this['_hasNextTab']({'propProxy':'state'}));};this[_0xd10061(0x10f)](_0x5c6cfe,{'propProxy':_0xd10061(0x11f)}),_0x5c6cfe();const _0x47e848=$(_0xd10061(0x101))[_0xd10061(0x1ba)](()=>{const _0x23d790=_0xd10061;_0x47e848[_0x23d790(0xba)]('disabled',!![]);try{this[_0x23d790(0x186)]();}finally{_0x47e848[_0x23d790(0xba)](_0x23d790(0x180),![]);}});$$`<div class="w-100 no-shrink ui-tab__wrp-tab-heads--border">
			${this[_0xd10061(0x10b)][_0xd10061(0x1d2)](_0xc4fb37=>_0xc4fb37[_0xd10061(0xad)][_0xd10061(0xc6)](_0xd10061(0x13a)))}
		</div>`[_0xd10061(0x136)](_0x47f11b),this['_tabs'][_0xd10061(0x1a5)](_0x3fec6a=>_0x3fec6a[_0xd10061(0x100)][_0xd10061(0x136)](_0x47f11b)),_0x47f11b[_0xd10061(0x1c2)](_0xd10061(0x19e)),$$`<div class="w-100 no-shrink flex-h-right pr-3">
			<div class="flex-v-center btn-group">${_0x33f7d7}${_0x292b21}</div>
			<div class="vr-2"></div>
			${_0x47e848}
		</div>`[_0xd10061(0x136)](_0x47f11b),this[_0xd10061(0xee)](),this[_0xd10061(0x128)](),this[_0xd10061(0x1a6)](),this[_0xd10061(0x121)](),await this[_0xd10061(0x15d)](),await this[_0xd10061(0x179)](),await this[_0xd10061(0xcf)](),this[_0xd10061(0x151)]();}[_0xd54096(0xee)](){const _0x2bd4c7=_0xd54096;this['_compClass'][_0x2bd4c7(0x107)]();}[_0xd54096(0x128)](){const _0x3fb9e0=_0xd54096;this[_0x3fb9e0(0x15b)]['render']();}[_0xd54096(0x1a6)](){const _0x4f84bd=_0xd54096;this[_0x4f84bd(0x163)][_0x4f84bd(0x107)]();}[_0xd54096(0x121)](){const _0x15ab33=_0xd54096;this[_0x15ab33(0xc3)][_0x15ab33(0x107)]();}async[_0xd54096(0x15d)](){const _0x4bb654=_0xd54096;await this[_0x4bb654(0xae)]['pRenderStarting']();}async[_0xd54096(0x179)](){const _0x80c020=_0xd54096;await this[_0x80c020(0xae)][_0x80c020(0x1ac)]();}async[_0xd54096(0xcf)](){const _0x570536=_0xd54096;await this[_0x570536(0x126)][_0x570536(0xc5)]();}[_0xd54096(0x151)](){const _0x39ee85=_0xd54096;this[_0x39ee85(0x178)][_0x39ee85(0x107)]();}async[_0xd54096(0x186)](){const _0xe5c350=_0xd54096,_0x15b67d=await InputUiUtil[_0xe5c350(0x1ae)]({'title':_0xe5c350(0x192)});if(!_0x15b67d)return;const _0x5b7292=[this[_0xe5c350(0xd8)][_0xe5c350(0x18d)](this),this[_0xe5c350(0x10a)]?null:this[_0xe5c350(0x13b)][_0xe5c350(0x18d)](this),this[_0xe5c350(0xb6)][_0xe5c350(0x18d)](this),this[_0xe5c350(0x10a)]?null:this[_0xe5c350(0x13e)]['bind'](this),this[_0xe5c350(0xc2)][_0xe5c350(0x18d)](this),this[_0xe5c350(0x17a)][_0xe5c350(0x18d)](this),this[_0xe5c350(0x10a)]?null:this[_0xe5c350(0x1bf)][_0xe5c350(0x18d)](this),this[_0xe5c350(0x173)][_0xe5c350(0x18d)](this)][_0xe5c350(0x112)](Boolean),_0x270adb=new UtilApplications[(_0xe5c350(0x199))]({'titleInitial':_0xe5c350(0x1bd),'titleComplete':_0xe5c350(0xc9),'totalTasks':_0x5b7292[_0xe5c350(0x174)]});await _0x270adb['pInit']();const _0xb9ef01={'_':0x0};try{await this[_0xe5c350(0x10d)](_0x5b7292,_0x270adb,_0xb9ef01);}catch(_0x3459c9){_0x270adb[_0xe5c350(0xe6)]({'message':'Build\x20failed!\x20'+VeCt[_0xe5c350(0xfc)],'count':_0xb9ef01['_'],'isError':!![]});throw _0x3459c9;}}async[_0xd54096(0x10d)](_0x3fed3e,_0x57ba2d,_0xd40a62){const _0x5b1045=_0xd54096,_0x4f3428=new ActorCharactermancer[(_0x5b1045(0x125))][(_0x5b1045(0x18c))]({'progressWidget':_0x57ba2d,'ptrTaskProgress':_0xd40a62});for(const _0x3548ac of _0x3fed3e)await _0x3548ac(_0x4f3428);_0x57ba2d[_0x5b1045(0xe6)]({'message':_0x5b1045(0xb9),'count':_0xd40a62['_']});}async[_0xd54096(0xd8)](_0x3e4487){const _0x270431=_0xd54096,{progressWidget:_0x357281,ptrTaskProgress:_0xb58a4d}=_0x3e4487;_0x357281[_0x270431(0xe6)]({'message':_0x270431(0x1c0),'count':++_0xb58a4d['_']});if(_0x357281['isCancelled'])return _0x357281['setProgress']({'message':_0x270431(0xdd)});if(this[_0x270431(0x10a)]){const {con:_0x4808d4}=Charactermancer_Util[_0x270431(0x16e)](this[_0x270431(0x16a)]);this[_0x270431(0x191)]=_0x4808d4;}const _0x115ff7=this['_compAbility'][_0x270431(0x197)][_0x270431(0x145)](),_0x347d25={'data':{'abilities':{...Parser[_0x270431(0xb0)][_0x270431(0xf2)](_0x210123=>({[_0x210123]:{'value':_0x115ff7?.[_0x270431(0x147)]?.[_0x115ff7['mode']]?.[_0x210123]||0x0}}))}}};await this[_0x270431(0x16a)]['update'](_0x347d25);if(this['_isLevelUp']){const {con:_0x3d60e8}=Charactermancer_Util['getCurrentAbilityScores'](this[_0x270431(0x16a)]);this[_0x270431(0xcb)]=_0x3d60e8;}_0x357281['setProgress']({'message':_0x270431(0x165),'count':_0xb58a4d['_']});if(_0x357281[_0x270431(0x1bb)])return _0x357281[_0x270431(0xe6)]({'message':_0x270431(0xdd),'count':_0xb58a4d['_']});}async[_0xd54096(0x13b)](_0x8eeafe){const _0x5e00b1=_0xd54096,{progressWidget:_0x364a7f,ptrTaskProgress:_0x4fac49}=_0x8eeafe;_0x364a7f[_0x5e00b1(0xe6)]({'message':_0x5e00b1(0xf4),'count':++_0x4fac49['_']});const _0x33d8a5=this[_0x5e00b1(0x15b)][_0x5e00b1(0xf8)]();if(_0x33d8a5){const _0x54acbd=new ImportListRace({'actor':this['_actor']});await _0x54acbd[_0x5e00b1(0x1a2)]();const _0x577c1b=MiscUtil[_0x5e00b1(0x195)](_0x33d8a5);delete _0x577c1b[_0x5e00b1(0x1ca)],delete _0x577c1b[_0x5e00b1(0xe4)],delete _0x577c1b[_0x5e00b1(0x17d)];if(this[_0x5e00b1(0x15b)][_0x5e00b1(0xe7)])_0x577c1b[_0x5e00b1(0xe0)]=[(await this['_compRace']['compRaceSize'][_0x5e00b1(0x142)]())[_0x5e00b1(0x108)]];else delete _0x577c1b[_0x5e00b1(0xe0)];await this[_0x5e00b1(0xaf)](this['_compRace'][_0x5e00b1(0x132)],_0x577c1b,_0x5e00b1(0x1be)),await this[_0x5e00b1(0xf0)]({'comp':this['_compRace'][_0x5e00b1(0x18b)],'toObj':_0x577c1b,'path':[_0x5e00b1(0xf7)]}),await this[_0x5e00b1(0xf0)]({'comp':this[_0x5e00b1(0x15b)][_0x5e00b1(0x168)],'toObj':_0x577c1b,'path':[_0x5e00b1(0xdc)]}),await this[_0x5e00b1(0xf0)]({'comp':this[_0x5e00b1(0x15b)]['compRaceArmorProficiencies'],'toObj':_0x577c1b,'path':['armorProficiencies']}),await this[_0x5e00b1(0xf0)]({'comp':this[_0x5e00b1(0x15b)]['compRaceWeaponProficiencies'],'toObj':_0x577c1b,'path':[_0x5e00b1(0x176)]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comp':this[_0x5e00b1(0x15b)][_0x5e00b1(0x119)],'toObj':_0x577c1b,'path':[_0x5e00b1(0x120)],'isLegacy':!![]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comp':this[_0x5e00b1(0x15b)][_0x5e00b1(0x110)],'toObj':_0x577c1b,'path':[_0x5e00b1(0x160)],'isLegacy':!![]}),await this[_0x5e00b1(0xf0)]({'comp':this[_0x5e00b1(0x15b)]['compRaceDamageVulnerability'],'toObj':_0x577c1b,'path':[_0x5e00b1(0x1b0)],'isLegacy':!![]}),await this[_0x5e00b1(0xf0)]({'comp':this[_0x5e00b1(0x15b)][_0x5e00b1(0x116)],'toObj':_0x577c1b,'path':[_0x5e00b1(0xff)],'isLegacy':!![]}),await _0x54acbd['pImportEntry'](_0x577c1b,{'isCharactermancer':!![]});}_0x364a7f['setProgress']({'message':_0x5e00b1(0x18e),'count':_0x4fac49['_']});if(_0x364a7f[_0x5e00b1(0x1bb)])return _0x364a7f[_0x5e00b1(0xe6)]({'message':'Build\x20cancelled.','count':_0x4fac49['_']});}async[_0xd54096(0xb6)](_0x43e1bd){const _0x20ef49=_0xd54096,{progressWidget:_0x5c3494,ptrTaskProgress:_0x68c3bb}=_0x43e1bd;_0x5c3494[_0x20ef49(0xe6)]({'message':_0x20ef49(0x14d),'count':++_0x68c3bb['_']});const _0x380212=[];for(let _0x2cf2a7=0x0;_0x2cf2a7<this['_compClass'][_0x20ef49(0x11f)]['class_ixMax']+0x1;++_0x2cf2a7){const {propIxClass:_0x5091d6,propIxSubclass:_0x41118a}=ActorCharactermancerBaseComponent[_0x20ef49(0xda)](_0x2cf2a7),_0x18a059=this[_0x20ef49(0x14f)][_0x20ef49(0xb3)]({'propIxClass':_0x5091d6});if(!_0x18a059)continue;const _0xbfbce5=this[_0x20ef49(0x14f)]['getSubclass_']({'cls':_0x18a059,'propIxSubclass':_0x41118a});_0x380212[_0x20ef49(0x1c1)]({'ix':_0x2cf2a7,'cls':_0x18a059,'sc':_0xbfbce5,'isPrimary':this[_0x20ef49(0x14f)][_0x20ef49(0x11f)][_0x20ef49(0xef)]===_0x2cf2a7});}if(_0x380212[_0x20ef49(0x174)]){_0x380212[_0x20ef49(0x19d)]((_0x2a8ce3,_0x1f13bb)=>SortUtil[_0x20ef49(0x1cf)](Number(_0x1f13bb['isPrimary']),Number(_0x2a8ce3['isPrimary']))||SortUtil[_0x20ef49(0x1cf)](_0x2a8ce3['cls'][_0x20ef49(0xf1)],_0x1f13bb['cls'][_0x20ef49(0xf1)]));const _0x476b2d=new ImportListClass({'actor':this[_0x20ef49(0x16a)]});await _0x476b2d[_0x20ef49(0x1a2)]();const _0x5c182f=this[_0x20ef49(0x14f)][_0x20ef49(0xfb)][_0x20ef49(0xb4)][_0x20ef49(0x183)]['getValues']();for(let _0xcf24ee=0x0;_0xcf24ee<_0x380212[_0x20ef49(0x174)];++_0xcf24ee){const {ix:_0x2efc27,cls:_0x4b8aed,sc:_0x53a66b,isPrimary:_0x1e0955}=_0x380212[_0xcf24ee],_0x386168=MiscUtil[_0x20ef49(0x195)](_0x4b8aed),_0x446ca3=_0x53a66b?MiscUtil[_0x20ef49(0x195)](_0x53a66b):null;if(_0x446ca3)delete _0x446ca3[_0x20ef49(0x17d)];if(_0x446ca3)_0x386168[_0x20ef49(0x111)]=[_0x446ca3];else _0x386168['subclasses']=[];_0x386168[_0x20ef49(0xcd)]=await this[_0x20ef49(0x14f)][_0x20ef49(0x106)][_0x2efc27]['pGetFormData']()[_0x20ef49(0x108)];if(!_0x386168[_0x20ef49(0xcd)][_0x20ef49(0x174)])continue;const _0x4eb334=Math[_0x20ef49(0xd9)](..._0x386168[_0x20ef49(0xcd)])+0x1;_0x386168[_0x20ef49(0x158)]=_0x1e0955?Charactermancer_Class_ProficiencyImportModeSelect['MODE_PRIMARY']:Charactermancer_Class_ProficiencyImportModeSelect[_0x20ef49(0x1a9)];if(this[_0x20ef49(0x14f)][_0x20ef49(0x1b4)][_0x2efc27])_0x386168[_0x20ef49(0x1a1)]=await this[_0x20ef49(0x14f)][_0x20ef49(0x1b4)][_0x2efc27][_0x20ef49(0x142)]()['data'];_0x386168[_0x20ef49(0x17c)]=[];for(const _0x1c79e8 of this[_0x20ef49(0x14f)][_0x20ef49(0x1a3)][_0x2efc27]){const _0xdf9d1c=await _0x1c79e8[_0x20ef49(0x142)]();if(_0xdf9d1c?.['data']?.[_0x20ef49(0x11a)]?.[_0x20ef49(0x174)])_0x386168[_0x20ef49(0x17c)][_0x20ef49(0x1c1)](..._0xdf9d1c[_0x20ef49(0x108)][_0x20ef49(0x11a)]);const _0x12273d={'data':{}};Charactermancer_Class_FeatureOptionsSelect[_0x20ef49(0x1ad)](this[_0x20ef49(0x16a)],_0x12273d,_0xdf9d1c);if(Object['keys'](_0x12273d[_0x20ef49(0x108)])[_0x20ef49(0x174)])await this['_actor'][_0x20ef49(0x182)](_0x12273d);await Charactermancer_Class_FeatureOptionsSelect[_0x20ef49(0xde)]({'actor':this['_actor'],'formData':_0xdf9d1c,'abilityAbv':_0x53a66b?.[_0x20ef49(0x141)]||_0x4b8aed[_0x20ef49(0x141)],'targetLevel':_0x4eb334});}_0x386168[_0x20ef49(0x17c)][_0x20ef49(0x1a5)](_0x51768a=>delete _0x51768a?.[_0x20ef49(0x181)]?.[_0x20ef49(0x17d)]);this['_isLevelUp']&&(_0x386168[_0x20ef49(0x189)]=this[_0x20ef49(0x191)],_0x386168[_0x20ef49(0x1aa)]=this['_conFinalWithModifiers']);_0x386168[_0x20ef49(0x16f)]=!![];const _0x20ba79=_0x1e0955?[_0x20ef49(0x1c3),'skills']:[_0x20ef49(0x1b7),_0x20ef49(0x113),_0x20ef49(0x15e)];await this['_pHandleSaveClick_pDoApplySkills'](this[_0x20ef49(0x14f)][_0x20ef49(0x198)][_0x2efc27],_0x386168,..._0x20ba79),delete _0x386168[_0x20ef49(0x14c)],await _0x476b2d['pImportClass'](_0x386168,{'filterValues':_0x5c182f,'isCharactermancer':!![]});}}_0x5c3494[_0x20ef49(0xe6)]({'message':'Imported\x20classes\x20and\x20subclasses.','count':_0x68c3bb['_']});if(_0x5c3494[_0x20ef49(0x1bb)])return _0x5c3494['setProgress']({'message':'Build\x20cancelled.','count':_0x68c3bb['_']});}async[_0xd54096(0x13e)](_0x1276e8){const _0x57d5e6=_0xd54096,{progressWidget:_0x410dd4,ptrTaskProgress:_0x244fc6}=_0x1276e8;_0x410dd4[_0x57d5e6(0xe6)]({'message':_0x57d5e6(0x103),'count':++_0x244fc6['_']});const _0x4c3408=this[_0x57d5e6(0xec)][_0x57d5e6(0x17f)][this[_0x57d5e6(0xc3)]['state'][_0x57d5e6(0x1a0)]];if(_0x4c3408){const _0x41bf28=new ImportListBackground({'actor':this['_actor']});await _0x41bf28[_0x57d5e6(0x1a2)]();const _0x4adc8d=MiscUtil[_0x57d5e6(0x195)](_0x4c3408);if(this[_0x57d5e6(0xc3)][_0x57d5e6(0xeb)])_0x4adc8d[_0x57d5e6(0x12c)]=await this[_0x57d5e6(0xc3)][_0x57d5e6(0xeb)][_0x57d5e6(0x142)]();else _0x4adc8d['_foundryFormDataFeatures']={'isFormComplete':!![]};_0x4adc8d[_0x57d5e6(0x172)]=!![],_0x4adc8d[_0x57d5e6(0xc8)]=!![],await this[_0x57d5e6(0xaf)](this[_0x57d5e6(0xc3)][_0x57d5e6(0x1a4)],_0x4adc8d,_0x57d5e6(0x1be)),await this[_0x57d5e6(0xf0)]({'comp':this['_compBackground']['isCustomizeLanguagesTools']?this[_0x57d5e6(0xc3)][_0x57d5e6(0x184)]:this[_0x57d5e6(0xc3)][_0x57d5e6(0x161)],'toObj':_0x4adc8d,'path':[_0x57d5e6(0xf7)]}),await this[_0x57d5e6(0xf0)]({'comp':this[_0x57d5e6(0xc3)][_0x57d5e6(0xfe)]?this[_0x57d5e6(0xc3)][_0x57d5e6(0x184)]:this[_0x57d5e6(0xc3)][_0x57d5e6(0xed)],'toObj':_0x4adc8d,'path':['toolProficiencies']}),this['_compBackground'][_0x57d5e6(0xd6)]?_0x4adc8d['_foundryFormDataCharacteristics']=await this[_0x57d5e6(0xc3)][_0x57d5e6(0xd6)][_0x57d5e6(0x142)]():_0x4adc8d['_foundryIsSkipImportCharacteristics']=!![],delete _0x4adc8d[_0x57d5e6(0x14c)],await _0x41bf28['pImportEntry'](_0x4adc8d,{'isCharactermancer':!![]});}_0x410dd4[_0x57d5e6(0xe6)]({'message':'Imported\x20background.','count':_0x244fc6['_']});if(_0x410dd4[_0x57d5e6(0x1bb)])return _0x410dd4[_0x57d5e6(0xe6)]({'message':'Build\x20cancelled.','count':_0x244fc6['_']});}async[_0xd54096(0xc2)](_0x1e2236){const _0x16ba5f=_0xd54096,{progressWidget:_0x1d1fed,ptrTaskProgress:_0x24f2bc}=_0x1e2236;_0x1d1fed[_0x16ba5f(0xe6)]({'message':_0x16ba5f(0x157),'count':++_0x24f2bc['_']}),_0x1e2236[_0x16ba5f(0x19c)]=[];const _0x17926d=new Set(this['_compFeat'][_0x16ba5f(0xc4)]());for(let _0x3a185d=0x0;_0x3a185d<this['_compFeat'][_0x16ba5f(0x11f)][_0x16ba5f(0xdb)]+0x1;++_0x3a185d){const {propIxFeat:_0xe6cf59}=ActorCharactermancerBaseComponent[_0x16ba5f(0xf3)](_0x3a185d,'ability');if(!_0x17926d['has'](_0xe6cf59))continue;_0x1e2236[_0x16ba5f(0x19c)][_0x16ba5f(0x1c1)]({'propIxFeat':_0xe6cf59,'namespace':_0x16ba5f(0x1ca),'ix':_0x3a185d});}for(let _0xcfa276=0x0;_0xcfa276<this[_0x16ba5f(0x178)][_0x16ba5f(0x11f)][_0x16ba5f(0x16d)]+0x1;++_0xcfa276){const {propIxFeat:_0x452ef2}=ActorCharactermancerBaseComponent['feat_getProps'](_0xcfa276,_0x16ba5f(0x1ab));if(!_0x17926d[_0x16ba5f(0x1b5)](_0x452ef2))continue;_0x1e2236[_0x16ba5f(0x19c)][_0x16ba5f(0x1c1)]({'propIxFeat':_0x452ef2,'namespace':'race','ix':_0xcfa276});}for(let _0xfac9b1=0x0;_0xfac9b1<this[_0x16ba5f(0x178)]['state'][_0x16ba5f(0x196)]+0x1;++_0xfac9b1){const {propIxFeat:_0x2abb94}=ActorCharactermancerBaseComponent['feat_getProps'](_0xfac9b1,_0x16ba5f(0x18f));if(!_0x17926d['has'](_0x2abb94))continue;_0x1e2236[_0x16ba5f(0x19c)][_0x16ba5f(0x1c1)]({'propIxFeat':_0x2abb94,'namespace':_0x16ba5f(0x18f),'ix':_0xfac9b1});}const _0x33f6b1=this[_0x16ba5f(0x163)]['compStatgen'][_0x16ba5f(0xb5)]();if(_0x1e2236['featMetas'][_0x16ba5f(0x174)]){const _0x355659=new ImportListFeat({'actor':this[_0x16ba5f(0x16a)]});await _0x355659[_0x16ba5f(0x1a2)]();for(const _0x2e87de of _0x1e2236[_0x16ba5f(0x19c)]){const _0x49fc5d=this[_0x16ba5f(0xec)]['feat'][this[_0x16ba5f(0x178)][_0x16ba5f(0x11f)][_0x2e87de['propIxFeat']]];if(!_0x49fc5d)continue;const _0x1ab3d3=MiscUtil[_0x16ba5f(0x195)](_0x49fc5d);if(_0x33f6b1[_0x16ba5f(0xe4)][_0x2e87de[_0x16ba5f(0x19a)]]?.[_0x2e87de['ix']]){const _0x53846f=_0x33f6b1['feats'][_0x2e87de['namespace']][_0x2e87de['ix']];_0x1ab3d3['ability']=[_0x53846f[_0x16ba5f(0x16c)]]['filter'](Boolean),_0x1ab3d3['_foundryChosenAbilityScoreIncrease']=_0x1ab3d3[_0x16ba5f(0x1ca)][0x0]||{},Renderer['feat'][_0x16ba5f(0x1cd)](_0x1ab3d3);}delete _0x1ab3d3['ability'],delete _0x1ab3d3[_0x16ba5f(0x17d)],await this[_0x16ba5f(0xaf)](this[_0x16ba5f(0x178)][_0x16ba5f(0xe8)][_0x2e87de['ix']],_0x1ab3d3,_0x16ba5f(0x1be)),await this[_0x16ba5f(0xf0)]({'comp':this[_0x16ba5f(0x178)][_0x16ba5f(0x1a7)][_0x2e87de['ix']],'toObj':_0x1ab3d3,'path':['languageProficiencies']}),await this[_0x16ba5f(0xf0)]({'comp':this['_compFeat'][_0x16ba5f(0x137)][_0x2e87de['ix']],'toObj':_0x1ab3d3,'path':[_0x16ba5f(0xdc)]}),await this[_0x16ba5f(0xf0)]({'comp':this[_0x16ba5f(0x178)]['compsFeatArmorProficiencies'][_0x2e87de['ix']],'toObj':_0x1ab3d3,'path':['armorProficiencies']}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comp':this['_compFeat'][_0x16ba5f(0x1ce)][_0x2e87de['ix']],'toObj':_0x1ab3d3,'path':[_0x16ba5f(0x176)]}),await _0x355659[_0x16ba5f(0x123)](_0x1ab3d3,{'isCharactermancer':!![]});}}_0x1d1fed[_0x16ba5f(0xe6)]({'message':_0x16ba5f(0x115),'count':_0x24f2bc['_']});if(_0x1d1fed[_0x16ba5f(0x1bb)])return _0x1d1fed['setProgress']({'message':_0x16ba5f(0xdd),'count':_0x24f2bc['_']});}async[_0xd54096(0x17a)](_0x53c241){const _0x56162=_0xd54096,{progressWidget:_0x245aec,ptrTaskProgress:_0x4c0b9e}=_0x53c241;_0x245aec[_0x56162(0xe6)]({'message':_0x56162(0x114),'count':++_0x4c0b9e['_']});const _0x14c841=this[_0x56162(0x14f)][_0x56162(0xc0)]();let _0x447201;const _0x2ff035=this[_0x56162(0x126)][_0x56162(0x133)]||this['_compSpell'][_0x56162(0xbe)][_0x56162(0xf9)]();for(let _0x4f37c2=0x0;_0x4f37c2<this[_0x56162(0x14f)][_0x56162(0x11f)][_0x56162(0xb7)]+0x1;++_0x4f37c2){const {propIxClass:_0x5e54b4,propIxSubclass:_0x15ac58}=ActorCharactermancerBaseComponent[_0x56162(0xda)](_0x4f37c2),_0x44ef0c=this[_0x56162(0x14f)][_0x56162(0xb3)]({'propIxClass':_0x5e54b4});if(!_0x44ef0c)continue;const _0x48e680=this[_0x56162(0x14f)][_0x56162(0xb8)]({'cls':_0x44ef0c,'propIxSubclass':_0x15ac58}),_0x46c017=await this[_0x56162(0x14f)][_0x56162(0x106)][_0x4f37c2][_0x56162(0x142)]()[_0x56162(0x108)],_0x4fd982=Math[_0x56162(0xd9)](..._0x46c017)+0x1;if(this['_compSpell'][_0x56162(0xbc)][_0x4f37c2]){const _0x530a18=await this[_0x56162(0x126)]['compsSpellSpells'][_0x4f37c2][_0x56162(0x142)](_0x2ff035),_0x8f1e88=_0x530a18?.[_0x56162(0x108)]?.[_0x56162(0x1c7)]||[];for(let _0x3d7d81=0x0;_0x3d7d81<_0x8f1e88[_0x56162(0x174)];++_0x3d7d81){const {spell:_0x51e633,isPrepared:_0x431530,isUpdateOnly:_0x12ea37,existingItemId:_0x5d7f18,preparationMode:_0xa5d26f,usesCurrent:_0x209b3a,usesMax:_0x92fe2a,usesPer:_0x2ce5e9,castAtLevel:_0x2a6b32}=_0x8f1e88[_0x3d7d81];if(_0x12ea37&&_0x5d7f18){await DataConverterSpell['pSetSpellItemIsPrepared'](this['_actor']['items'][_0x56162(0x1b9)](_0x5d7f18),_0x431530);continue;}!_0x447201&&(_0x447201=new ImportListSpell({'actor':this[_0x56162(0x16a)]}),await _0x447201['pInit']()),await _0x447201[_0x56162(0x123)](_0x51e633,{'isCharactermancer':!![],'opts_pGetSpellItem':{'isActorItem':!![],'isPrepared':_0x431530,'abilityAbv':_0x48e680?.['spellcastingAbility']||_0x44ef0c['spellcastingAbility'],'preparationMode':_0xa5d26f,'usesCurrent':_0x209b3a,'usesMax':_0x92fe2a,'usesPer':_0x2ce5e9,'castAtLevel':_0x2a6b32,'parentClassName':_0x44ef0c['name'],'parentClassSource':_0x44ef0c['source'],'parentSubclassName':_0x48e680?.[_0x56162(0xf1)],'parentSubclassSource':_0x48e680?.[_0x56162(0x12d)]}});}}if(this[_0x56162(0x126)]['compsSpellAdditionalSpellClass'][_0x4f37c2]){const _0x7bf774=await this['_compSpell']['compsSpellAdditionalSpellClass'][_0x4f37c2][_0x56162(0x142)]();await this[_0x56162(0x19f)]({'formData':_0x7bf774,'abilityAbv':_0x44ef0c[_0x56162(0x141)]});}if(!_0x48e680)continue;if(this['_compSpell'][_0x56162(0xc7)][_0x4f37c2]){const _0x3ba15c=await this[_0x56162(0x126)][_0x56162(0xc7)][_0x4f37c2][_0x56162(0x142)]();await this[_0x56162(0x19f)]({'formData':_0x3ba15c,'abilityAbv':_0x48e680?.['spellcastingAbility']||_0x44ef0c[_0x56162(0x141)]});}}if(this['_compSpell']['compSpellAdditionalSpellRace']){const _0x1bccf8=await this[_0x56162(0x126)]['compSpellAdditionalSpellRace'][_0x56162(0x142)]();await this[_0x56162(0x19f)]({'formData':_0x1bccf8});}const _0x104b8b=this[_0x56162(0x163)][_0x56162(0x197)][_0x56162(0xb5)]();for(const _0x5d319a of _0x53c241['featMetas']){const _0x325f02=this['_compSpell'][_0x56162(0xfa)][_0x5d319a[_0x56162(0x19a)]][_0x5d319a['ix']];if(_0x325f02){let _0x4596f7=null;if(_0x104b8b[_0x56162(0xe4)][_0x5d319a[_0x56162(0x19a)]]?.[_0x5d319a['ix']]){const _0x1a65a2=_0x104b8b[_0x56162(0xe4)][_0x5d319a[_0x56162(0x19a)]][_0x5d319a['ix']];_0x4596f7=Object[_0x56162(0xd3)](_0x1a65a2['abilityChosen']||{})[0x0];}const _0xd8a54d=await _0x325f02[_0x56162(0x142)]();await this['_pHandleSaveClick_pDoImportAdditionalSpells']({'formData':_0xd8a54d,'parentAbilityAbv':_0x4596f7});}}_0x245aec['setProgress']({'message':_0x56162(0x140),'count':_0x4c0b9e['_']});if(_0x245aec[_0x56162(0x1bb)])return _0x245aec['setProgress']({'message':'Build\x20cancelled.','count':_0x4c0b9e['_']});}async['_pHandleSaveClick_equipment'](_0x4a91f7){const _0x334f7d=_0xd54096,{progressWidget:_0x4f4adf,ptrTaskProgress:_0x151ac3}=_0x4a91f7;_0x4f4adf[_0x334f7d(0xe6)]({'message':_0x334f7d(0x17e),'count':++_0x151ac3['_']});const _0x5b1fda=await this['_compEquipment']['compEquipmentCurrency'][_0x334f7d(0x142)](),_0x107bb7=await this[_0x334f7d(0xae)][_0x334f7d(0xce)][_0x334f7d(0x142)](),_0xf1f909=await this[_0x334f7d(0xae)][_0x334f7d(0xd7)][_0x334f7d(0x142)]();if(_0x5b1fda?.[_0x334f7d(0x108)]?.[_0x334f7d(0x171)])await Charactermancer_StartingEquipment['pUpdateActorCurrency'](this[_0x334f7d(0x16a)],_0x5b1fda);if(_0x107bb7?.[_0x334f7d(0x108)]?.['equipmentItemEntries'])await Charactermancer_StartingEquipment[_0x334f7d(0xc1)](this[_0x334f7d(0x16a)],_0x107bb7);if(_0xf1f909?.[_0x334f7d(0x108)]?.[_0x334f7d(0xfd)])await Charactermancer_StartingEquipment[_0x334f7d(0xc1)](this['_actor'],_0xf1f909);_0x4f4adf[_0x334f7d(0xe6)]({'message':_0x334f7d(0x177),'count':_0x151ac3['_']});if(_0x4f4adf[_0x334f7d(0x1bb)])return _0x4f4adf[_0x334f7d(0xe6)]({'message':_0x334f7d(0xdd),'count':_0x151ac3['_']});}async[_0xd54096(0xaf)](_0x30e1d0,_0x37e4bc,..._0xa6c0d6){const _0x1c28ee=_0xd54096;MiscUtil[_0x1c28ee(0x134)](_0x37e4bc,..._0xa6c0d6);if(_0x30e1d0){const _0x41664e=await _0x30e1d0[_0x1c28ee(0x142)](),_0x2e2319={};Object[_0x1c28ee(0xd3)](Parser[_0x1c28ee(0x122)])[_0x1c28ee(0x112)](_0x3ddebb=>_0x41664e[_0x1c28ee(0x108)]?.[_0x1c28ee(0x1be)][_0x3ddebb])[_0x1c28ee(0x1a5)](_0x5d7d76=>_0x2e2319[_0x5d7d76]=!![]),Object[_0x1c28ee(0xd3)](_0x2e2319)[_0x1c28ee(0x174)]&&MiscUtil[_0x1c28ee(0x124)](_0x37e4bc,..._0xa6c0d6,[_0x2e2319]);}}async[_0xd54096(0xf0)]({comp:_0x29007c,toObj:_0x1bebe5,path:_0x5c6b9a,isLegacy:isLegacy=![]}){const _0xfcdc86=_0xd54096,_0x5bad15=_0x5c6b9a[_0xfcdc86(0x1b6)]();MiscUtil[_0xfcdc86(0x134)](_0x1bebe5,..._0x5c6b9a);if(!_0x29007c)return;const _0x4de569=await _0x29007c['pGetFormData'](),_0x45f55d=_0x4de569?.[_0xfcdc86(0x108)]?.[_0x5bad15];if(!_0x45f55d)return;if(isLegacy){const _0x357be0=Object['keys'](_0x45f55d);if(_0x357be0[_0xfcdc86(0x174)])MiscUtil[_0xfcdc86(0x124)](_0x1bebe5,..._0x5c6b9a,_0x357be0);}else{const _0x2983be={..._0x45f55d};if(Object[_0xfcdc86(0xd3)](_0x2983be)['length'])MiscUtil[_0xfcdc86(0x124)](_0x1bebe5,..._0x5c6b9a,[_0x2983be]);}}async[_0xd54096(0x19f)]({formData:_0x4bed50,abilityAbv:_0x5cabf5,parentAbilityAbv:_0x2b6496}){const _0x419642=_0xd54096;await Charactermancer_AdditionalSpellsSelect[_0x419642(0xf5)](this[_0x419642(0x16a)],_0x4bed50,{'abilityAbv':_0x5cabf5,'parentAbilityAbv':_0x2b6496});}async[_0xd54096(0x173)](_0x15e2ab){const _0x326f0=_0xd54096,{progressWidget:_0x497f35,ptrTaskProgress:_0x1ca80b}=_0x15e2ab;_0x497f35['setProgress']({'message':_0x326f0(0x1c8),'count':++_0x1ca80b['_']});if(this[_0x326f0(0x11b)])this['_cbPostSave']();}},ActorCharactermancer[_0xd54096(0x125)]['AdditionalSaveState']=class{constructor({progressWidget:_0x36d731,ptrTaskProgress:_0x2d0e9b}){const _0x129f6d=_0xd54096;this[_0x129f6d(0x1cc)]=_0x36d731,this[_0x129f6d(0x19b)]=_0x2d0e9b,this[_0x129f6d(0x19c)]=null;}};export{ActorCharactermancerSourceSelector,ActorCharactermancerBaseComponent};