const _0x5004=['_getListItem','manc-sp__btn-learn-cantrip','getSpellsKnown','appendTo','4758443HxbmgK','_isConc','expandedSpellsRace','_isAvailableExpandedSpell','_state','</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20sp__school-','[‒]','btn-learn-cantrip','add','preventDefault','findLastIndex','handleFilterChange','cntPrepared','1233573mdyTKN','maxLearned','getFormSubData','\x0a\x09\x09\x09</div>\x0a\x09\x09','_list','btn-prepare','empty','usesPer','source','ix_prepared_','fromClassList','addHookIsMaxPrepared','addHookIsPreparedCaster','addHookIsMaxLearnedCantrips','text','isPrepared','MAX_SAFE_INTEGER','prepared','active','_spellDatas','_getProps','visibleItems','canLearnMoreFixedSpellsOfLevel','canLearnMoreCantrips','_$wrpPreparedLearned','manc-sp__is-learn-caster','spell','manc-sp__btn-learn-spell','manc-sp__is-max-learned-spells','spSchoolAndSubschoolsAbvsToFull','cntLearnedCantrips','flex-v-center\x20manc__list-row\x20clickable\x20veapp__list-row','name','getTblTimeStr','_handleListItemBtnLearnClick_doFixed','<div\x20class=\x22flex-vh-center\x20italic\x20ve-muted\x20ve-small\x20mt-1\x22>No\x20matching\x20spells</div>','spellLevelLow','usesCurrent','spSchoolAndSubschoolsAbvsShort','_classSource','isOverLearnSpellsLimitAtLevel','_addHookBase','addItem','MIN_SAFE_INTEGER','181397GVplMU','PG_SPELLS','html','fixedLearnedProgression','search','click','dataset','className','createElement','_$wrpRows','addHookSpellLevelHigh','initBtnSortHandlers','querySelectorAll','5ueNSSD','isOverLearnCantripsLimit','_isWithinLevelRange','spellLevel','</div>\x0a\x0a\x09\x09\x09<div\x20class=\x22flex-vh-center\x20col-1-6\x20pr-0\x22>\x0a\x09\x09\x09\x09<button\x20class=\x22btn\x20manc__list-row-button\x20','spellDatas','range','canPrepareMore','\x20text-center\x22\x20title=\x22','<div\x20class=\x22flex-v-stretch\x20input-group\x20no-shrink\x22>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-3-6\x20pr-1\x20sort\x22\x20data-sort=\x22name\x22>Name</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-4\x20px-1\x20sort\x22\x20data-sort=\x22time\x22>Time</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22school\x22>School</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-6\x20px-1\x20sort\x22\x20data-sort=\x22concentration\x22\x20title=\x22Concentration\x22>C.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-6\x20px-1\x20sort\x22\x20data-sort=\x22range\x22>Range</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-6\x20pl-1\x22\x20disabled>&nbsp;</button>\x0a\x09\x09</div>','contains','addHookMaxLearnedCantrips','map','isOverLearnFixedSpellsLimitOfLevel','maxLearnedSpells','_cacheFilterValues','294141jAnOmF','append','init','4TRyhbz','326266AeNpBt','$getHoverContent_stats','addEventListener','some','isLearnedSpellCasterAtLevel','<button\x20class=\x22btn\x20manc__list-row-button\x20manc-sp__btn-prepare\x20','sortSpells','school','Cantrips\x20learned:\x20','_normalisedTime','getCombinedClasses','2UqgbNS','isLearnedFixedSpellCasterAtLevel','getMaxSpellLevelAtLevel','_parent','pGetFormData','forEach','.manc-sp__btn-learn-spell','list-multi-selected','ixViewedSpell','filter','918314apQByw','sourceJsonToAbv','manc-sp__is-max-prepared-spells--is-over-limit','toggleClass','length','Prepared:\x20','remove','constructor','atwill','[+]','Unhandled\x20button\x20name:\x20\x22','1oWVyrp','cntLearnedSpells','</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-4\x20text-center\x22>','304772OTbrcH','_isAvailableClassSpell','innerHTML','render','manc-sp__is-max-learned-cantrips','toggle','_proxyAssignSimple','_$dispNoRows','toggleVe','_pageFilter','copy','_cacheSelectedListItem','_className','manc-sp__is-max-prepared-spells','_spellLevel','btn-learn-spell','canLearnMoreSpellsOfLevel','_getFormSubData_getSpellImportOpts','\x22\x20name=\x22btn-prepare\x22\x20title=\x22Prepare\x22>Prep.</button>','stopPropagation','CASTER_TYPE_TO_PROGRESSION','hideVe','4OQlLpa','flat','pulseFixedLearned','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','toLowerCase','level','toDisplay','Spells\x20learned:\x20','_isAvailableSpell','isOverPrepareLimit','maxLearnedCantrips','ix_learned_','classSource','expandedSpellsSubclass','always','_render_bindLevelledSpellHooks','searchText','_handleListItemBtnLearnClick_do','Attempted\x20to\x20learn\x20spell\x20when\x20neither\x20a\x20learned\x20caster\x20nor\x20a\x20fixed\x20caster\x20at\x20spell\x20level\x20','\x22\x20name=\x22','cacheSelectedListItem','addHookSpellLevelLow','\x22>Learn</button>\x0a\x0a\x09\x09\x09\x09','classList','manc-sp__is-prepared-caster','maxPrepared','addHookFixedLearnedProgression','pageFilter','usesMax','$wrpPreparedLearned','spellLevelHigh','isPreparedCaster','_compsLevel','hover','_render_bindCantripHooks','parent','_resetLevelSpells','_handleListItemBtnLearnClick_do_doLearn','casterProgression','preparationMode','handleSearch'];const _0x51ea=function(_0x2815a4,_0x2fa682){_0x2815a4=_0x2815a4-0x187;let _0x5004ba=_0x5004[_0x2815a4];return _0x5004ba;};const _0x4ae93c=_0x51ea;(function(_0x5cef02,_0x50fa7a){const _0x25efad=_0x51ea;while(!![]){try{const _0x1407c8=parseInt(_0x25efad(0x1ff))*-parseInt(_0x25efad(0x1a5))+-parseInt(_0x25efad(0x239))+-parseInt(_0x25efad(0x1db))+parseInt(_0x25efad(0x1c6))*-parseInt(_0x25efad(0x1b2))+-parseInt(_0x25efad(0x1c5))*-parseInt(_0x25efad(0x1e9))+-parseInt(_0x25efad(0x1d1))*parseInt(_0x25efad(0x1c2))+parseInt(_0x25efad(0x22c))*parseInt(_0x25efad(0x1e6));if(_0x1407c8===_0x50fa7a)break;else _0x5cef02['push'](_0x5cef02['shift']());}catch(_0x3f81f8){_0x5cef02['push'](_0x5cef02['shift']());}}}(_0x5004,0xd6f3c));import{UtilActors}from'./UtilActors.js';class Charactermancer_Spell_Util{static[_0x4ae93c(0x1d3)](_0x1c92c8,_0x26d943){const _0x59c47a=_0x4ae93c,_0x420a43=UtilActors[_0x59c47a(0x1fd)][_0x1c92c8];if(!_0x420a43)return 0x0;const _0x586dfc=_0x420a43[_0x26d943-0x1];if(!_0x586dfc)return 0x0;return _0x586dfc[_0x59c47a(0x236)](_0x4d33bb=>_0x4d33bb)+0x1;}}class Charactermancer_Spell_SpellMeta{constructor({ix:_0x315bf9,spell:_0x41d64a,isPrepared:_0x6567ca,isLearned:_0x178d85,preparationMode:_0x30cecf,usesCurrent:_0x3833e6,usesMax:_0x2ff9e1,usesPer:_0xdae5fa}){const _0x5b6084=_0x4ae93c;this['ix']=_0x315bf9,this[_0x5b6084(0x193)]=_0x41d64a,this[_0x5b6084(0x188)]=_0x6567ca,this['isLearned']=_0x178d85,this[_0x5b6084(0x226)]=_0x30cecf,this[_0x5b6084(0x19e)]=_0x3833e6,this[_0x5b6084(0x21b)]=_0x2ff9e1,this[_0x5b6084(0x240)]=_0xdae5fa;}}class Charactermancer_Spell extends BaseComponent{constructor(_0x2f4495){const _0x3b7bb9=_0x4ae93c;_0x2f4495=_0x2f4495||{},super(),this[_0x3b7bb9(0x18c)]=_0x2f4495[_0x3b7bb9(0x1b7)],this[_0x3b7bb9(0x1f5)]=_0x2f4495[_0x3b7bb9(0x1ac)],this[_0x3b7bb9(0x1a0)]=_0x2f4495['classSource'],this[_0x3b7bb9(0x21f)]=[...new Array(0xa)][_0x3b7bb9(0x1be)]((_0x34e4f7,_0x2fae0f)=>new Charactermancer_Spell_Level({'spellDatas':_0x2f4495[_0x3b7bb9(0x1b7)],'spellLevel':_0x2fae0f,'parent':this})),this[_0x3b7bb9(0x1f2)]=_0x2f4495[_0x3b7bb9(0x21a)],this[_0x3b7bb9(0x191)]=_0x2f4495[_0x3b7bb9(0x21c)],this[_0x3b7bb9(0x1f4)]=null,this['_cacheFilterValues']=null;}get[_0x4ae93c(0x1ac)](){const _0x4102dc=_0x4ae93c;return this[_0x4102dc(0x1f5)];}get[_0x4ae93c(0x20b)](){const _0x59f01f=_0x4ae93c;return this[_0x59f01f(0x1a0)];}get[_0x4ae93c(0x21a)](){return this['_pageFilter'];}get['cacheSelectedListItem'](){return this['_cacheSelectedListItem'];}set[_0x4ae93c(0x213)](_0x2c474e){this['_cacheSelectedListItem']=_0x2c474e;}get[_0x4ae93c(0x21e)](){const _0x57f123=_0x4ae93c;return this[_0x57f123(0x230)][_0x57f123(0x218)]!=null;}set[_0x4ae93c(0x19d)](_0x3f4453){const _0x4bc035=_0x4ae93c;this[_0x4bc035(0x230)]['spellLevelLow']=_0x3f4453;}get[_0x4ae93c(0x19d)](){const _0x5a12b3=_0x4ae93c;return this[_0x5a12b3(0x230)][_0x5a12b3(0x19d)];}set[_0x4ae93c(0x21d)](_0x18cf87){const _0x35bb7d=_0x4ae93c;this[_0x35bb7d(0x230)][_0x35bb7d(0x21d)]=_0x18cf87;}get[_0x4ae93c(0x21d)](){const _0x2d60c8=_0x4ae93c;return this[_0x2d60c8(0x230)][_0x2d60c8(0x21d)];}get[_0x4ae93c(0x1d9)](){const _0x34d629=_0x4ae93c;return this[_0x34d629(0x230)][_0x34d629(0x1d9)];}set[_0x4ae93c(0x1d9)](_0x2364bc){const _0x5b0f46=_0x4ae93c;this[_0x5b0f46(0x230)][_0x5b0f46(0x1d9)]=_0x2364bc;}get['maxLearnedCantrips'](){const _0x3b8014=_0x4ae93c;return this[_0x3b8014(0x230)][_0x3b8014(0x209)];}set[_0x4ae93c(0x209)](_0x119ba6){const _0x1bdc05=_0x4ae93c;this[_0x1bdc05(0x230)]['maxLearnedCantrips']=_0x119ba6;}set[_0x4ae93c(0x1c0)](_0x48f7db){const _0x2d45d8=_0x4ae93c;this[_0x2d45d8(0x230)][_0x2d45d8(0x1c0)]=_0x48f7db;if(_0x48f7db!=null)this[_0x2d45d8(0x230)][_0x2d45d8(0x218)]=null;}get[_0x4ae93c(0x1a8)](){const _0x1a7592=_0x4ae93c;return this[_0x1a7592(0x230)][_0x1a7592(0x1a8)];}set[_0x4ae93c(0x1a8)](_0x1d1954){const _0x36be6e=_0x4ae93c;this[_0x36be6e(0x230)][_0x36be6e(0x1a8)]=_0x1d1954;}get[_0x4ae93c(0x201)](){const _0x4ffe40=_0x4ae93c;return this[_0x4ffe40(0x230)][_0x4ffe40(0x201)];}set['pulseFixedLearned'](_0x5d6c6c){const _0x3c1bf4=_0x4ae93c;this[_0x3c1bf4(0x230)]['pulseFixedLearned']=_0x5d6c6c;}set[_0x4ae93c(0x218)](_0xdc7d39){const _0x2fab07=_0x4ae93c;this[_0x2fab07(0x230)][_0x2fab07(0x218)]=_0xdc7d39;if(_0xdc7d39!=null)this[_0x2fab07(0x230)][_0x2fab07(0x23a)]=null;}get[_0x4ae93c(0x1e7)](){return this['_state']['cntLearnedSpells'];}set['cntLearnedSpells'](_0x44f84d){const _0x289126=_0x4ae93c;this['_state'][_0x289126(0x1e7)]=_0x44f84d;}get[_0x4ae93c(0x197)](){const _0x311764=_0x4ae93c;return this[_0x311764(0x230)][_0x311764(0x197)];}set['cntLearnedCantrips'](_0x366063){const _0x186139=_0x4ae93c;this['_state'][_0x186139(0x197)]=_0x366063;}get[_0x4ae93c(0x238)](){const _0x818415=_0x4ae93c;return this['_state'][_0x818415(0x238)];}set['cntPrepared'](_0x29d0f3){const _0x421f31=_0x4ae93c;this[_0x421f31(0x230)][_0x421f31(0x238)]=_0x29d0f3;}get['casterProgression'](){const _0x10e984=_0x4ae93c;return this[_0x10e984(0x230)][_0x10e984(0x225)];}set['casterProgression'](_0x4f62bf){const _0x15c394=_0x4ae93c;this[_0x15c394(0x230)][_0x15c394(0x225)]=_0x4f62bf;}[_0x4ae93c(0x1bd)](_0x202d6d){const _0x53f25e=_0x4ae93c;this[_0x53f25e(0x1a2)](_0x53f25e(0x209),_0x202d6d);}[_0x4ae93c(0x214)](_0x5e5ef7){const _0x1ad2d8=_0x4ae93c;this[_0x1ad2d8(0x1a2)](_0x1ad2d8(0x19d),_0x5e5ef7);}[_0x4ae93c(0x1af)](_0x4182bd){this['_addHookBase']('spellLevelHigh',_0x4182bd);}[_0x4ae93c(0x219)](_0x4ecb8f){const _0x58a979=_0x4ae93c;this['_addHookBase'](_0x58a979(0x1a8),_0x4ecb8f);}[_0x4ae93c(0x245)](_0x11d7db){const _0x26f8b8=_0x4ae93c;this['_addHookBase'](_0x26f8b8(0x218),_0x11d7db);}['addHookIsMaxLearnedSpells'](_0x53ea10){const _0x464c91=_0x4ae93c;this[_0x464c91(0x1a2)]('cntLearnedSpells',_0x53ea10),this[_0x464c91(0x1a2)](_0x464c91(0x1c0),_0x53ea10),this[_0x464c91(0x1a2)](_0x464c91(0x1a8),_0x53ea10),this[_0x464c91(0x1a2)]('pulseFixedLearned',_0x53ea10),this[_0x464c91(0x1a2)]('spellLevelLow',_0x53ea10),this[_0x464c91(0x1a2)](_0x464c91(0x21d),_0x53ea10);}[_0x4ae93c(0x246)](_0x4fa4ed){const _0x2088e9=_0x4ae93c;this[_0x2088e9(0x1a2)](_0x2088e9(0x197),_0x4fa4ed),this[_0x2088e9(0x1a2)]('maxLearnedCantrips',_0x4fa4ed);}[_0x4ae93c(0x244)](_0x1a86db){const _0x382cef=_0x4ae93c;this['_addHookBase'](_0x382cef(0x238),_0x1a86db),this[_0x382cef(0x1a2)](_0x382cef(0x218),_0x1a86db);}[_0x4ae93c(0x1ca)](_0xfda653){const _0x12afb3=_0x4ae93c;return this['_state']['maxLearnedSpells']!=null&&_0xfda653>=(this['_state'][_0x12afb3(0x19d)]??Number['MAX_SAFE_INTEGER'])&&_0xfda653<=(this[_0x12afb3(0x230)][_0x12afb3(0x21d)]||Number[_0x12afb3(0x1a4)]);}['isLearnedFixedSpellCasterAtLevel'](_0x54cae5){const _0x3b7437=_0x4ae93c;return _0x54cae5>0x0&&this[_0x3b7437(0x230)][_0x3b7437(0x1a8)]!=null&&this[_0x3b7437(0x230)][_0x3b7437(0x1a8)][_0x54cae5-0x1]>0x0;}[_0x4ae93c(0x1f9)](_0x4cf217){const _0x265359=_0x4ae93c;return this[_0x265359(0x230)][_0x265359(0x1e7)]<(this['_state'][_0x265359(0x1c0)]||0x0)&&_0x4cf217>=(this[_0x265359(0x230)][_0x265359(0x19d)]??Number[_0x265359(0x189)])&&_0x4cf217<=(this[_0x265359(0x230)][_0x265359(0x21d)]||Number['MIN_SAFE_INTEGER']);}[_0x4ae93c(0x1a1)](_0x3f8a8b){const _0x14ec8c=_0x4ae93c;return this[_0x14ec8c(0x230)][_0x14ec8c(0x1e7)]>(this[_0x14ec8c(0x230)][_0x14ec8c(0x1c0)]||0x0)&&_0x3f8a8b>=(this[_0x14ec8c(0x230)]['spellLevelLow']??Number['MAX_SAFE_INTEGER'])&&_0x3f8a8b<=(this[_0x14ec8c(0x230)][_0x14ec8c(0x21d)]||Number['MIN_SAFE_INTEGER']);}[_0x4ae93c(0x18f)](_0x3c2122){const _0x50449a=_0x4ae93c;if(!this['_state'][_0x50449a(0x1a8)])return![];if(!this[_0x50449a(0x230)]['fixedLearnedProgression'][_0x3c2122-0x1])return![];const _0x398cfd=this[_0x50449a(0x21f)][_0x3c2122][_0x50449a(0x22a)]();return _0x398cfd[_0x50449a(0x1df)]<this[_0x50449a(0x230)][_0x50449a(0x1a8)][_0x3c2122-0x1];}[_0x4ae93c(0x1bf)](_0x233f01){const _0x487819=_0x4ae93c;if(!this[_0x487819(0x230)][_0x487819(0x1a8)])return![];if(!this[_0x487819(0x230)][_0x487819(0x1a8)][_0x233f01-0x1])return![];const _0x45966d=this[_0x487819(0x21f)][_0x233f01]['getSpellsKnown']();return _0x45966d[_0x487819(0x1df)]>this[_0x487819(0x230)][_0x487819(0x1a8)][_0x233f01-0x1];}[_0x4ae93c(0x190)](){const _0x18db66=_0x4ae93c;return this[_0x18db66(0x230)][_0x18db66(0x197)]<(this['_state'][_0x18db66(0x209)]||0x0);}[_0x4ae93c(0x1b3)](){const _0x133345=_0x4ae93c;return this['_state'][_0x133345(0x197)]>(this['_state'][_0x133345(0x209)]||0x0);}[_0x4ae93c(0x1b9)](){const _0x3e7bb8=_0x4ae93c;return this[_0x3e7bb8(0x230)][_0x3e7bb8(0x238)]<(this[_0x3e7bb8(0x230)][_0x3e7bb8(0x218)]||0x0);}[_0x4ae93c(0x208)](){const _0x2f0bbd=_0x4ae93c;return this['_state'][_0x2f0bbd(0x238)]>(this[_0x2f0bbd(0x230)][_0x2f0bbd(0x218)]||0x0);}[_0x4ae93c(0x1ec)](_0x2c9346,_0x646993){const _0x3d3c36=_0x4ae93c,_0x283b78=()=>{const _0x5f3b2c=_0x51ea,_0x1584a1=[this[_0x5f3b2c(0x230)][_0x5f3b2c(0x209)]?_0x5f3b2c(0x1ce)+this['_state'][_0x5f3b2c(0x197)]+'/'+this[_0x5f3b2c(0x230)][_0x5f3b2c(0x209)]:null,this[_0x5f3b2c(0x230)][_0x5f3b2c(0x1c0)]?_0x5f3b2c(0x206)+this[_0x5f3b2c(0x230)][_0x5f3b2c(0x1e7)]+'/'+this[_0x5f3b2c(0x230)]['maxLearnedSpells']:null,this[_0x5f3b2c(0x230)][_0x5f3b2c(0x218)]?_0x5f3b2c(0x1e0)+this['_state'][_0x5f3b2c(0x238)]+'/'+this['_state'][_0x5f3b2c(0x218)]:null][_0x5f3b2c(0x1da)](Boolean);this[_0x5f3b2c(0x191)][_0x5f3b2c(0x1f1)](_0x1584a1[_0x5f3b2c(0x1df)])[_0x5f3b2c(0x1a7)](_0x1584a1['join']('<div\x20class=\x22mx-1\x22>—</div>'));};this[_0x3d3c36(0x1a2)](_0x3d3c36(0x238),_0x283b78),this['_addHookBase'](_0x3d3c36(0x218),_0x283b78),this[_0x3d3c36(0x1a2)](_0x3d3c36(0x1e7),_0x283b78),this[_0x3d3c36(0x1a2)](_0x3d3c36(0x1c0),_0x283b78),this[_0x3d3c36(0x1a2)](_0x3d3c36(0x197),_0x283b78),this[_0x3d3c36(0x1a2)](_0x3d3c36(0x209),_0x283b78),_0x283b78();const _0x30e35d=()=>this[_0x3d3c36(0x237)]();this[_0x3d3c36(0x1a2)](_0x3d3c36(0x22e),_0x30e35d),this[_0x3d3c36(0x1a2)]('expandedSpellsSubclass',_0x30e35d),_0x30e35d(),this['_compsLevel'][_0x3d3c36(0x1d6)](_0x2e7853=>_0x2e7853['render'](_0x2c9346));const _0x255b98=()=>{const _0xbf85bb=_0x3d3c36;_0x646993[_0xbf85bb(0x23f)]();const _0x947875=this[_0xbf85bb(0x18c)][this[_0xbf85bb(0x230)][_0xbf85bb(0x1d9)]];if(!_0x947875)return _0x646993[_0xbf85bb(0x1c3)]('<div\x20class=\x22flex-vh-center\x20w-100\x20h-100\x20italic\x20ve-muted\x22>Select\x20a\x20spell\x20to\x20view</div>');_0x646993[_0xbf85bb(0x1c3)](Renderer[_0xbf85bb(0x220)][_0xbf85bb(0x1c7)](UrlUtil[_0xbf85bb(0x1a6)],MiscUtil[_0xbf85bb(0x1f3)](_0x947875)));};this['_addHookBase']('ixViewedSpell',_0x255b98),_0x255b98();}[_0x4ae93c(0x237)](_0x110064){const _0x4c1fe0=_0x4ae93c;this[_0x4c1fe0(0x1c1)]=_0x110064||this['_cacheFilterValues'];if(!this[_0x4c1fe0(0x1c1)])return;this[_0x4c1fe0(0x21f)][_0x4c1fe0(0x1d6)](_0x642b75=>_0x642b75[_0x4c1fe0(0x237)](this[_0x4c1fe0(0x1c1)]));}[_0x4ae93c(0x227)](_0x585afe){const _0x2e9eba=_0x4ae93c;this[_0x2e9eba(0x21f)]['forEach'](_0x23ac4d=>_0x23ac4d[_0x2e9eba(0x227)](_0x585afe));}get[_0x4ae93c(0x22e)](){const _0x502717=_0x4ae93c;return this[_0x502717(0x230)][_0x502717(0x22e)];}set[_0x4ae93c(0x22e)](_0x578565){const _0x49fcce=_0x4ae93c;this[_0x49fcce(0x230)]['expandedSpellsRace']=_0x578565;}get[_0x4ae93c(0x20c)](){return this['_state']['expandedSpellsSubclass'];}set[_0x4ae93c(0x20c)](_0x487438){const _0x35a6c3=_0x4ae93c;this[_0x35a6c3(0x230)][_0x35a6c3(0x20c)]=_0x487438;}async[_0x4ae93c(0x1d5)](_0x142b28){const _0x36a9c3=_0x4ae93c;return{'isFormComplete':(this[_0x36a9c3(0x230)][_0x36a9c3(0x197)]===this[_0x36a9c3(0x230)][_0x36a9c3(0x209)]||0x0)&&(this['_state'][_0x36a9c3(0x1e7)]===this['_state'][_0x36a9c3(0x1c0)]||0x0)&&(this[_0x36a9c3(0x230)]['cntPrepared']===this[_0x36a9c3(0x230)][_0x36a9c3(0x218)]||0x0),'data':{'spells':this[_0x36a9c3(0x21f)][_0x36a9c3(0x1be)](_0x52d3a0=>_0x52d3a0[_0x36a9c3(0x23b)](_0x142b28))[_0x36a9c3(0x200)]()}};}['_getDefaultState'](){return{'spellLevelLow':null,'spellLevelHigh':null,'ixViewedSpell':null,'cntLearnedSpells':0x0,'maxLearnedSpells':null,'cntLearnedCantrips':0x0,'maxLearnedCantrips':null,'fixedLearnedProgression':null,'pulseFixedLearned':![],'cntPrepared':0x0,'maxPrepared':null,'expandedSpellsRace':[],'expandedSpellsSubclass':[],'expandedSpellsFeat':{},'casterProgression':null};}}class Charactermancer_Spell_Level extends BaseComponent{constructor(_0x2cb651){const _0x2b4673=_0x4ae93c;super(),_0x2cb651=_0x2cb651||{},this[_0x2b4673(0x18c)]=_0x2cb651[_0x2b4673(0x1b7)],this[_0x2b4673(0x1f7)]=_0x2cb651[_0x2b4673(0x1b5)],this[_0x2b4673(0x1d4)]=_0x2cb651[_0x2b4673(0x222)],this[_0x2b4673(0x1ae)]=null,this[_0x2b4673(0x1f0)]=null,this[_0x2b4673(0x23d)]=null;}[_0x4ae93c(0x207)](_0x18a51d){const _0x4c2b9e=_0x4ae93c;return _0x18a51d[_0x4c2b9e(0x204)]===this[_0x4c2b9e(0x1f7)];}[_0x4ae93c(0x1ea)](_0x29563b){const _0x50b3f0=_0x4ae93c,_0x2efd92=Renderer[_0x50b3f0(0x193)][_0x50b3f0(0x1d0)](_0x29563b,_0x50b3f0(0x243)),_0x1edc54=Renderer[_0x50b3f0(0x193)][_0x50b3f0(0x1d0)](_0x29563b,'fromClassListVariant');if(!_0x2efd92['some'](_0x479a9c=>_0x479a9c[_0x50b3f0(0x199)]===this['_parent']['className']&&_0x479a9c['source']===this['_parent']['classSource'])&&!_0x1edc54[_0x50b3f0(0x1c9)](_0x34a0b2=>_0x34a0b2[_0x50b3f0(0x199)]===this['_parent'][_0x50b3f0(0x1ac)]&&_0x34a0b2[_0x50b3f0(0x241)]===this['_parent']['classSource']))return![];return!![];}[_0x4ae93c(0x22f)](_0x4100b7){const _0x4cba1c=_0x4ae93c,_0x153fdc=_0x4100b7[_0x4cba1c(0x199)][_0x4cba1c(0x203)]()+'|'+_0x4100b7['source']['toLowerCase']();if(this[_0x4cba1c(0x1d4)][_0x4cba1c(0x22e)]['includes'](_0x153fdc))return!![];if(this[_0x4cba1c(0x1d4)]['expandedSpellsSubclass']['includes'](_0x153fdc))return!![];return![];}['render'](_0x1eba1a){const _0xc4da28=_0x4ae93c;this[_0xc4da28(0x1ae)]=$$`<div class="flex-col manc__list mt-1 mb-3"></div>`,this[_0xc4da28(0x1f0)]=$(_0xc4da28(0x19c))[_0xc4da28(0x1fe)]();const _0x2ea839=()=>{const _0x5ce564=_0xc4da28;this[_0x5ce564(0x1f0)][_0x5ce564(0x1f1)](!this[_0x5ce564(0x23d)][_0x5ce564(0x18e)][_0x5ce564(0x1df)]&&_0x389b7c[_0x5ce564(0x187)]()!==_0x5ce564(0x1e4));},_0x44d519=$(_0xc4da28(0x1bb));this[_0xc4da28(0x23d)]=new List({'$wrpList':this[_0xc4da28(0x1ae)],'fnSort':PageFilterSpells[_0xc4da28(0x1cc)],'fnSearch':(_0x255374,_0x42a106)=>{const _0x56a05b=_0xc4da28,{ixLearned:_0x5a632e,ixPrepared:_0x5d663a}=this[_0x56a05b(0x1e2)][_0x56a05b(0x18d)](_0x255374['ix']);if(this[_0x56a05b(0x230)][_0x5a632e]||this['_state'][_0x5d663a])return!![];return _0x255374[_0x56a05b(0x20f)]['includes'](_0x42a106);}}),SortUtil[_0xc4da28(0x1b0)](_0x44d519,this[_0xc4da28(0x23d)]),this['_list']['on']('updated',()=>_0x2ea839());const _0x389b7c=$(_0xc4da28(0x202))['click'](()=>{const _0x5cdd7f=_0xc4da28;_0x389b7c[_0x5cdd7f(0x187)](_0x389b7c[_0x5cdd7f(0x187)]()==='[+]'?_0x5cdd7f(0x232):_0x5cdd7f(0x1e4)),this[_0x5cdd7f(0x1ae)]['toggleVe'](),_0x44d519[_0x5cdd7f(0x1f1)](),_0x2ea839();}),_0x571b81=$$`<div class="flex-col w-100">
			<div class="split-v-center">
				<div class="bold">${Parser['spLevelToFullLevelText'](this[_0xc4da28(0x1f7)])}</div>
				${_0x389b7c}
			</div>
			${_0x44d519}
			${this['_$dispNoRows']}
			${this['_$wrpRows']}
		</div>`[_0xc4da28(0x22b)](_0x1eba1a),_0x244db4=this[_0xc4da28(0x18c)][_0xc4da28(0x1df)];for(let _0x3ba4ef=0x0;_0x3ba4ef<_0x244db4;++_0x3ba4ef){const _0x48e5d6=this['_spellDatas'][_0x3ba4ef];if(!this[_0xc4da28(0x207)](_0x48e5d6))continue;const _0x4ca9fd=this['_getListItem'](_0x48e5d6,_0x3ba4ef);if(!_0x4ca9fd)continue;this[_0xc4da28(0x23d)][_0xc4da28(0x1a3)](_0x4ca9fd);}this[_0xc4da28(0x23d)][_0xc4da28(0x1c4)]();const _0x5b30e1=()=>{const _0x2dbdb8=_0xc4da28,_0x3d2b84=this[_0x2dbdb8(0x1b4)]();_0x571b81[_0x2dbdb8(0x1f1)](_0x3d2b84);if(!_0x3d2b84)this[_0x2dbdb8(0x223)]();};this[_0xc4da28(0x1d4)][_0xc4da28(0x1bd)](_0x5b30e1),this[_0xc4da28(0x1d4)][_0xc4da28(0x214)](_0x5b30e1),this[_0xc4da28(0x1d4)][_0xc4da28(0x1af)](_0x5b30e1),this[_0xc4da28(0x1d4)]['addHookFixedLearnedProgression'](_0x5b30e1),_0x5b30e1();if(this['_spellLevel']===0x0)this[_0xc4da28(0x221)]();else this[_0xc4da28(0x20e)]();}[_0x4ae93c(0x221)](){const _0x53ea07=_0x4ae93c,_0x2d2032=()=>{const _0x1b50b8=_0x51ea;this[_0x1b50b8(0x1ae)][_0x1b50b8(0x1de)](_0x1b50b8(0x1ed),!this[_0x1b50b8(0x1d4)]['canLearnMoreCantrips']()),this[_0x1b50b8(0x1ae)]['toggleClass']('manc-sp__is-max-learned-cantrips--is-over-limit',this['_parent'][_0x1b50b8(0x1b3)]());};this[_0x53ea07(0x1d4)][_0x53ea07(0x246)](_0x2d2032),_0x2d2032();}['_render_bindLevelledSpellHooks'](){const _0x45de56=_0x4ae93c,_0x4036bb=()=>this[_0x45de56(0x1ae)][_0x45de56(0x1de)](_0x45de56(0x217),this[_0x45de56(0x1d4)][_0x45de56(0x21e)]);this[_0x45de56(0x1d4)]['addHookIsPreparedCaster'](_0x4036bb),_0x4036bb();const _0x3468ed=()=>{const _0x31d2d4=_0x45de56;let _0x38f61c=![],_0x296c22=!![],_0x33efe0=!![];if(this[_0x31d2d4(0x1d4)][_0x31d2d4(0x1d2)](this[_0x31d2d4(0x1f7)])){_0x38f61c=!![];if(this['_parent'][_0x31d2d4(0x18f)](this[_0x31d2d4(0x1f7)]))_0x296c22=![];if(!this['_parent']['isOverLearnFixedSpellsLimitOfLevel'](this[_0x31d2d4(0x1f7)]))_0x33efe0=![];}else{if(this['_parent'][_0x31d2d4(0x1ca)](this[_0x31d2d4(0x1f7)])){_0x38f61c=!![];if(this[_0x31d2d4(0x1d4)][_0x31d2d4(0x1f9)](this['_spellLevel']))_0x296c22=![];if(!this[_0x31d2d4(0x1d4)][_0x31d2d4(0x1a1)](this[_0x31d2d4(0x1f7)]))_0x33efe0=![];}}this[_0x31d2d4(0x1ae)][_0x31d2d4(0x1de)](_0x31d2d4(0x192),_0x38f61c),this[_0x31d2d4(0x1ae)][_0x31d2d4(0x1de)](_0x31d2d4(0x195),_0x38f61c&&_0x296c22),this[_0x31d2d4(0x1ae)][_0x31d2d4(0x1de)]('manc-sp__is-max-learned-spells--is-over-limit',_0x38f61c&&_0x33efe0);};this[_0x45de56(0x1d4)]['addHookIsMaxLearnedSpells'](_0x3468ed),_0x3468ed();const _0x30b062=()=>{const _0x27b7b9=_0x45de56;this[_0x27b7b9(0x1ae)][_0x27b7b9(0x1de)](_0x27b7b9(0x1f6),!this[_0x27b7b9(0x1d4)][_0x27b7b9(0x1b9)]()),this[_0x27b7b9(0x1ae)][_0x27b7b9(0x1de)](_0x27b7b9(0x1dd),this[_0x27b7b9(0x1d4)][_0x27b7b9(0x208)]());};this[_0x45de56(0x1d4)][_0x45de56(0x244)](_0x30b062),_0x30b062();}[_0x4ae93c(0x1b4)](){const _0x10649f=_0x4ae93c;if(this[_0x10649f(0x1f7)]!==0x0&&this['_parent']['fixedLearnedProgression']!=null&&this['_parent']['fixedLearnedProgression'][this[_0x10649f(0x1f7)]-0x1])return!![];return(this[_0x10649f(0x1f7)]===0x0&&this['_parent'][_0x10649f(0x209)]||this['_spellLevel']!==0x0)&&this['_spellLevel']>=(this[_0x10649f(0x1d4)][_0x10649f(0x19d)]??Number[_0x10649f(0x189)])&&this[_0x10649f(0x1f7)]<=(this['_parent'][_0x10649f(0x21d)]??Number[_0x10649f(0x1a4)]);}[_0x4ae93c(0x228)](_0x25976d,_0x546864){const _0x10ac14=_0x4ae93c,{ixLearned:_0x556979,ixPrepared:_0x239d36}=this[_0x10ac14(0x1e2)][_0x10ac14(0x18d)](_0x546864),_0x45d468=document[_0x10ac14(0x1ad)]('div');_0x45d468['className']=_0x10ac14(0x198),_0x45d468[_0x10ac14(0x1ab)]['ix']=_0x546864;const _0x42ad02=Parser[_0x10ac14(0x1dc)](_0x25976d[_0x10ac14(0x241)]),_0x40e08f=PageFilterSpells[_0x10ac14(0x19a)](_0x25976d['time'][0x0]),_0x5a809a=Parser[_0x10ac14(0x19f)](_0x25976d[_0x10ac14(0x1cd)],_0x25976d['subschools']),_0x4d8ed5=_0x25976d[_0x10ac14(0x22d)]?'×':'',_0x3b7202=Parser['spRangeToFull'](_0x25976d[_0x10ac14(0x1b8)]);_0x45d468[_0x10ac14(0x1eb)]='\x0a\x09\x09\x09<div\x20class=\x22col-3-6\x20pl-0\x22>'+_0x25976d[_0x10ac14(0x199)]+_0x10ac14(0x1e8)+_0x40e08f+_0x10ac14(0x231)+_0x25976d[_0x10ac14(0x1cd)]+_0x10ac14(0x1ba)+Parser[_0x10ac14(0x196)](_0x25976d['school'],_0x25976d['subschools'])+'\x22\x20'+Parser['spSchoolAbvToStyle'](_0x25976d['school'])+'>'+_0x5a809a+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-6\x20text-center\x22\x20title=\x22Concentration\x22>'+_0x4d8ed5+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-6\x20text-right\x22>'+_0x3b7202+_0x10ac14(0x1b6)+(this['_spellLevel']===0x0?_0x10ac14(0x229):_0x10ac14(0x194))+'\x20'+(this[_0x10ac14(0x230)][_0x556979]?_0x10ac14(0x18b):'')+_0x10ac14(0x212)+(this['_spellLevel']===0x0?_0x10ac14(0x233):'btn-learn-spell')+_0x10ac14(0x215)+(this['_spellLevel']!==0x0?_0x10ac14(0x1cb)+(this['_state'][_0x239d36]?_0x10ac14(0x18b):'')+_0x10ac14(0x1fb):'')+_0x10ac14(0x23c);const _0x1da617=new ListItem(_0x546864,_0x45d468,_0x25976d[_0x10ac14(0x199)],{'source':_0x42ad02,'level':_0x25976d['level'],'time':_0x40e08f,'school':Parser['spSchoolAbvToFull'](_0x25976d['school']),'concentration':_0x4d8ed5,'normalisedTime':_0x25976d[_0x10ac14(0x1cf)],'normalisedRange':_0x25976d['_normalisedRange']}),_0xfca7d7=_0x45d468[_0x10ac14(0x1b1)]('button'),[_0x54741f]=_0xfca7d7;return _0xfca7d7['forEach'](_0x47713b=>{const _0x213668=_0x10ac14;_0x47713b['addEventListener'](_0x213668(0x1aa),_0x452719=>{const _0x2c209e=_0x213668;_0x452719[_0x2c209e(0x1fc)](),_0x452719[_0x2c209e(0x235)]();const _0x206479=_0x47713b[_0x2c209e(0x216)][_0x2c209e(0x1bc)](_0x2c209e(0x18b));switch(_0x47713b[_0x2c209e(0x199)]){case _0x2c209e(0x233):{if(!_0x206479&&!this[_0x2c209e(0x1d4)][_0x2c209e(0x190)]())return;_0x47713b[_0x2c209e(0x216)][_0x2c209e(0x1ee)]('active'),this[_0x2c209e(0x230)][_0x556979]=!this[_0x2c209e(0x230)][_0x556979];if(this[_0x2c209e(0x230)][_0x556979])this[_0x2c209e(0x1d4)]['cntLearnedCantrips']++;else this[_0x2c209e(0x1d4)][_0x2c209e(0x197)]--;break;}case _0x2c209e(0x1f8):{if(this['_parent']['isLearnedFixedSpellCasterAtLevel'](this[_0x2c209e(0x1f7)]))this[_0x2c209e(0x19b)]({'btn':_0x47713b,'isActive':_0x206479,'ixPrepared':_0x239d36,'ixLearned':_0x556979});else{if(this[_0x2c209e(0x1d4)][_0x2c209e(0x1ca)](this[_0x2c209e(0x1f7)]))this['_handleListItemBtnLearnClick_do']({'btn':_0x47713b,'isActive':_0x206479,'ixPrepared':_0x239d36,'ixLearned':_0x556979});else throw new Error(_0x2c209e(0x211)+this[_0x2c209e(0x1f7)]);}break;}case _0x2c209e(0x23e):{if(!_0x206479&&!this[_0x2c209e(0x1d4)]['canPrepareMore']())return;if(!_0x206479&&(this[_0x2c209e(0x1d4)]['isLearnedSpellCasterAtLevel'](this[_0x2c209e(0x1f7)])||this[_0x2c209e(0x1d4)][_0x2c209e(0x1d2)](this[_0x2c209e(0x1f7)]))&&!this['_state'][_0x556979]){if(this[_0x2c209e(0x1d4)][_0x2c209e(0x1d2)](this[_0x2c209e(0x1f7)])){const _0x524c88=this['_handleListItemBtnLearnClick_doFixed']({'btn':_0x54741f,'isActive':this[_0x2c209e(0x230)][_0x556979],'ixPrepared':_0x239d36,'ixLearned':_0x556979});if(!_0x524c88)return;}else{if(this[_0x2c209e(0x1d4)]['isLearnedSpellCasterAtLevel'](this['_spellLevel'])){const _0xbc2cf1=this['_handleListItemBtnLearnClick_do']({'btn':_0x54741f,'isActive':this['_state'][_0x556979],'ixPrepared':_0x239d36,'ixLearned':_0x556979});if(!_0xbc2cf1)return;}}}_0x47713b['classList']['toggle'](_0x2c209e(0x18b)),this[_0x2c209e(0x230)][_0x239d36]=!this[_0x2c209e(0x230)][_0x239d36];if(this[_0x2c209e(0x230)][_0x239d36])this[_0x2c209e(0x1d4)][_0x2c209e(0x238)]++;else this[_0x2c209e(0x1d4)][_0x2c209e(0x238)]--;break;}default:throw new Error(_0x2c209e(0x1e5)+_0x47713b[_0x2c209e(0x199)]+'\x22');}});}),_0x45d468[_0x10ac14(0x1c8)](_0x10ac14(0x1aa),_0xdf6b8f=>{const _0x5a647d=_0x10ac14;_0xdf6b8f[_0x5a647d(0x1fc)](),_0xdf6b8f['preventDefault']();if(this[_0x5a647d(0x1d4)][_0x5a647d(0x213)])this['_parent'][_0x5a647d(0x213)]['ele'][_0x5a647d(0x216)][_0x5a647d(0x1e1)]('list-multi-selected');_0x45d468[_0x5a647d(0x216)][_0x5a647d(0x234)](_0x5a647d(0x1d8)),this[_0x5a647d(0x1d4)][_0x5a647d(0x1d9)]=_0x546864,this[_0x5a647d(0x1d4)]['cacheSelectedListItem']=_0x1da617;}),_0x1da617;}[_0x4ae93c(0x210)]({btn:_0xdaa974,isActive:_0x6885e4,ixPrepared:_0x512e6e,ixLearned:_0x190b5c}){const _0x4f94d0=_0x4ae93c;if(!_0x6885e4&&!this[_0x4f94d0(0x1d4)][_0x4f94d0(0x1f9)](this['_spellLevel']))return![];this[_0x4f94d0(0x224)]({'btn':_0xdaa974,'isActive':_0x6885e4,'ixPrepared':_0x512e6e,'ixLearned':_0x190b5c});if(this[_0x4f94d0(0x230)][_0x190b5c])this[_0x4f94d0(0x1d4)]['cntLearnedSpells']++;else this[_0x4f94d0(0x1d4)][_0x4f94d0(0x1e7)]--;}['_handleListItemBtnLearnClick_do_doLearn']({btn:_0x2ae6c5,isActive:_0x59d97e,ixPrepared:_0xf5cd7,ixLearned:_0x5b6b6e}){const _0x285ccb=_0x4ae93c;_0x59d97e&&this[_0x285ccb(0x1d4)]['isPreparedCaster']&&this[_0x285ccb(0x230)][_0xf5cd7]&&(this['_state'][_0xf5cd7]=![],this[_0x285ccb(0x1d4)][_0x285ccb(0x238)]--),_0x2ae6c5[_0x285ccb(0x216)]['toggle'](_0x285ccb(0x18b)),this[_0x285ccb(0x230)][_0x5b6b6e]=!this['_state'][_0x5b6b6e];}[_0x4ae93c(0x19b)]({btn:_0x37c401,isActive:_0x5f8dff,ixPrepared:_0x3338fe,ixLearned:_0x5d098a}){const _0x2a7ee1=_0x4ae93c;if(!_0x5f8dff&&!this[_0x2a7ee1(0x1d4)]['canLearnMoreFixedSpellsOfLevel'](this['_spellLevel']))return![];this['_handleListItemBtnLearnClick_do_doLearn']({'btn':_0x37c401,'isActive':_0x5f8dff,'ixPrepared':_0x3338fe,'ixLearned':_0x5d098a}),this[_0x2a7ee1(0x1d4)][_0x2a7ee1(0x201)]=!this[_0x2a7ee1(0x1d4)][_0x2a7ee1(0x201)];}[_0x4ae93c(0x237)](_0x26a5a9){const _0x5b4da1=_0x4ae93c;this[_0x5b4da1(0x23d)][_0x5b4da1(0x1da)](_0x1a4579=>{const _0x529795=_0x5b4da1,_0x41e38e=this[_0x529795(0x18c)][_0x1a4579['ix']];if(!this['_isAvailableClassSpell'](_0x41e38e)&&!this[_0x529795(0x22f)](_0x41e38e))return![];const {ixLearned:_0x324ed9,ixPrepared:_0x477ee8}=this[_0x529795(0x1e2)][_0x529795(0x18d)](_0x1a4579['ix']);if(this[_0x529795(0x230)][_0x324ed9]||this['_state'][_0x477ee8])return!![];return this[_0x529795(0x1d4)][_0x529795(0x21a)][_0x529795(0x205)](_0x26a5a9,_0x41e38e);});}['handleSearch'](_0xcf75ed){const _0x2a626f=_0x4ae93c;this[_0x2a626f(0x23d)][_0x2a626f(0x1a9)](_0xcf75ed);}static['_getProps'](_0x1d15af){const _0xcf3cd6=_0x4ae93c;return{'ixLearned':_0xcf3cd6(0x20a)+_0x1d15af,'ixPrepared':_0xcf3cd6(0x242)+_0x1d15af};}[_0x4ae93c(0x223)](){const _0xc0f8e0=_0x4ae93c;let _0x5eea56=0x0,_0x50949a=0x0;const _0x5d720c={},_0x50c862=this[_0xc0f8e0(0x18c)][_0xc0f8e0(0x1df)];for(let _0x1aa83a=0x0;_0x1aa83a<_0x50c862;++_0x1aa83a){const _0x5ddd70=this[_0xc0f8e0(0x18c)][_0x1aa83a];if(!this[_0xc0f8e0(0x207)](_0x5ddd70))continue;const {ixLearned:_0x310cf9,ixPrepared:_0x361c49}=this[_0xc0f8e0(0x1e2)][_0xc0f8e0(0x18d)](_0x1aa83a);this['_state'][_0x310cf9]&&(_0x5d720c[_0x310cf9]=![],_0x5eea56++),this[_0xc0f8e0(0x230)][_0x361c49]&&(_0x5d720c[_0x361c49]=![],_0x50949a++);}this[_0xc0f8e0(0x1ef)]('state',_0x5d720c),_0x5eea56&&(this[_0xc0f8e0(0x1f7)]===0x0?(this[_0xc0f8e0(0x1d4)][_0xc0f8e0(0x197)]-=_0x5eea56,this[_0xc0f8e0(0x1ae)][0x0][_0xc0f8e0(0x1b1)]('.manc-sp__btn-learn-cantrip')[_0xc0f8e0(0x1d6)](_0x2f27c6=>_0x2f27c6['classList'][_0xc0f8e0(0x1e1)](_0xc0f8e0(0x18b)))):(this[_0xc0f8e0(0x1d4)]['cntLearnedSpells']-=_0x5eea56,this['_$wrpRows'][0x0][_0xc0f8e0(0x1b1)](_0xc0f8e0(0x1d7))[_0xc0f8e0(0x1d6)](_0x50f387=>_0x50f387['classList'][_0xc0f8e0(0x1e1)](_0xc0f8e0(0x18b))))),_0x50949a&&(this['_parent'][_0xc0f8e0(0x238)]-=_0x50949a,this[_0xc0f8e0(0x1ae)][0x0][_0xc0f8e0(0x1b1)]('.manc-sp__btn-prepare')[_0xc0f8e0(0x1d6)](_0x115301=>_0x115301[_0xc0f8e0(0x216)][_0xc0f8e0(0x1e1)]('active')));}[_0x4ae93c(0x22a)](){const _0x64fd9d=_0x4ae93c;if(!this[_0x64fd9d(0x1b4)]()||this[_0x64fd9d(0x1f7)]===0x0)return[];const _0x5ccc81=[],_0x302add=this[_0x64fd9d(0x18c)]['length'];for(let _0xa886f5=0x0;_0xa886f5<_0x302add;++_0xa886f5){const _0x47cfbc=this[_0x64fd9d(0x18c)][_0xa886f5];if(!this['_isAvailableSpell'](_0x47cfbc))continue;if(!this[_0x64fd9d(0x1ea)](_0x47cfbc)&&!this[_0x64fd9d(0x22f)](_0x47cfbc))continue;const {ixLearned:_0x420bd9}=this[_0x64fd9d(0x1e2)][_0x64fd9d(0x18d)](_0xa886f5);if(!this[_0x64fd9d(0x230)][_0x420bd9])continue;_0x5ccc81['push']({'ix':_0xa886f5,'spell':this['_spellDatas'][_0xa886f5]});}return _0x5ccc81;}[_0x4ae93c(0x23b)](_0x3c57da){const _0x136889=_0x4ae93c;if(!this[_0x136889(0x1b4)]())return[];const _0x54174e=[],_0x1991c7=this['_spellDatas']['length'];for(let _0x2db0e0=0x0;_0x2db0e0<_0x1991c7;++_0x2db0e0){const _0x55eb81=this[_0x136889(0x18c)][_0x2db0e0];if(!this[_0x136889(0x207)](_0x55eb81))continue;if(!this['_isAvailableClassSpell'](_0x55eb81)&&!this[_0x136889(0x22f)](_0x55eb81))continue;const {ixLearned:_0x2dd622,ixPrepared:_0x44991e}=this[_0x136889(0x1e2)][_0x136889(0x18d)](_0x2db0e0),_0x557766=this[_0x136889(0x230)][_0x2dd622],_0x407f3a=this['_state'][_0x44991e]||this[_0x136889(0x1f7)]===0x0&&_0x557766;if(this[_0x136889(0x1f7)]===0x0&&!_0x557766)continue;if(!_0x557766&&(this[_0x136889(0x1d4)][_0x136889(0x1d2)](this['_spellLevel'])||this[_0x136889(0x1d4)][_0x136889(0x1ca)](this[_0x136889(0x1f7)])))continue;if(this[_0x136889(0x1d4)][_0x136889(0x21e)]&&!_0x557766&&!_0x407f3a&&!this['_parent'][_0x136889(0x21a)]['toDisplay'](_0x3c57da,_0x55eb81))continue;const _0xab6fdc=this[_0x136889(0x1fa)]({'isLearned':_0x557766});_0x54174e['push'](new Charactermancer_Spell_SpellMeta({..._0xab6fdc,'ix':_0x2db0e0,'spell':this[_0x136889(0x18c)][_0x2db0e0],'isPrepared':_0x407f3a,'isLearned':_0x557766}));}return _0x54174e;}['_getFormSubData_getSpellImportOpts']({isLearned:_0x23fa78}){const _0xf43c09=_0x4ae93c;let _0x4809e9=_0xf43c09(0x20d),_0x273195=null,_0x27bd4f=null,_0x566514=null;if(this['_parent']['casterProgression']==='pact'){if(_0x23fa78){if(!this[_0xf43c09(0x1d4)]['isLearnedSpellCasterAtLevel'](this[_0xf43c09(0x1f7)])&&this['_parent']['isLearnedFixedSpellCasterAtLevel'](this[_0xf43c09(0x1f7)]))_0x4809e9=_0xf43c09(0x1e3),_0x273195=0x1,_0x27bd4f=0x1,_0x566514='lr';else _0x4809e9='pact';}}else _0x4809e9=this[_0xf43c09(0x1d4)][_0xf43c09(0x21e)]?_0xf43c09(0x18a):_0xf43c09(0x20d);return{'preparationMode':_0x4809e9,'usesCurrent':_0x273195,'usesMax':_0x27bd4f,'usesPer':_0x566514};}}export{Charactermancer_Spell_Util,Charactermancer_Spell};