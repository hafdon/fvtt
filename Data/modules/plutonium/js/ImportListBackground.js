'use strict';const _0xa9c9=['mutateForFilters','toolProficiencies','4726wEPXqS','set','SOURCE_TYP_BREW','_pImportEntry_pFillProficiencies','update','MODULE_NAME','PG_BACKGROUNDS','absorbFnBindListenersRadio','pGetHomebrewSources','Import\x20Backgrounds','sourceShort','backgrounds','61KBjKCW','360217RcDTRo','log','getItemActorPassive','absorbFnGetData','_normalisedRange','130149zEKbfX','constructor','SOURCE_TYP_OFFICIAL_ALL','pImportEquipmentItemEntries','isTemp','isFeature','entries','traits','Source','_actor','currency','_isPreviewable','_pImportEntry_pImportToActor_pImportStartingEquipment','1qMcbzX','push','_titleButtonRun','forEach','sourceJsonToAbv','feat','TASK_EXIT_CANCELLED','ImportEntryOpts','sourceLong','DATA_URL_BACKGROUNDS','init','319767UveWkz','Name','Upload\x20File','skills','languageProficiencies','_list','languages','getData','_pImportEntry_pImportToDirectoryGeneric','_content','Item','sourceJsonToColor','isCancelled','373745cmVIHh','map','source','pFillActorToolData','replace','skillProficiencies','DataSourceUrl','startingEquipment','page','_pImportEntry_pFillDetails','_pageFilter','5etools','_pImportEntry_pFillItems','pWaitForUserInput','get','sourceJsonToFull','DataSourceFile','_activateListeners_absorbListItems','pGetSources','sheet','doAbsorbItems','Custom\x20URL','265925PqLZIf','items','getBackgroundItem','/media/icon/mighty-force.svg','_skillDisplay','pFillActorLanguageData','pAddActorItems','TASK_EXIT_COMPLETE','name','isStreamerMode','data','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','14LcNSym','text-center','_foundryFormDataCharacteristics','2117kYJYQM','render','_normalisedTime','absorbFnBindListeners','player','Background','Skills','applyFormDataToActorUpdate','length','URL_TO_HASH_BUILDER','Importing\x20background\x20\x22','background','Backgrounds','copy','_pImportEntry_pImportToActor','_initCreateSheetItemHook'];const _0x43d7=function(_0x2dbc80,_0x3cef62){_0x2dbc80=_0x2dbc80-0x17d;let _0xa9c9bc=_0xa9c9[_0x2dbc80];return _0xa9c9bc;};const _0x58cf53=_0x43d7;(function(_0x1e3e13,_0x568e60){const _0xd47fd5=_0x43d7;while(!![]){try{const _0x2096f5=parseInt(_0xd47fd5(0x1c0))*-parseInt(_0xd47fd5(0x180))+parseInt(_0xd47fd5(0x1ae))+parseInt(_0xd47fd5(0x1cb))+-parseInt(_0xd47fd5(0x1d8))+-parseInt(_0xd47fd5(0x1a1))*-parseInt(_0xd47fd5(0x1ad))+-parseInt(_0xd47fd5(0x18f))*-parseInt(_0xd47fd5(0x18c))+-parseInt(_0xd47fd5(0x1b3));if(_0x2096f5===_0x568e60)break;else _0x1e3e13['push'](_0x1e3e13['shift']());}catch(_0x25b80f){_0x1e3e13['push'](_0x1e3e13['shift']());}}}(_0xa9c9,0x37af9));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{DataConverterBackground}from'./DataConverterBackground.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{Charactermancer_Background_Characteristics}from'./UtilCharactermancerBackground.js';class ImportListBackground extends ImportListCharacter{static[_0x58cf53(0x1ca)](){const _0x5dfa0c=_0x58cf53;this[_0x5dfa0c(0x19e)]({'prop':'background','importerName':_0x5dfa0c(0x194)});}constructor(_0x1b6224){const _0x22b587=_0x58cf53;_0x1b6224=_0x1b6224||{},super({'title':_0x22b587(0x1aa)},_0x1b6224,{'props':['background'],'titleSearch':_0x22b587(0x1ac),'sidebarTab':'items','gameProp':_0x22b587(0x181),'defaultFolderPath':[_0x22b587(0x19b)],'folderType':_0x22b587(0x1d5),'pageFilter':new PageFilterBackgrounds(),'isActorRadio':!![],'page':UrlUtil[_0x22b587(0x1a7)],'isPreviewable':!![],'isDedupable':!![]});}async[_0x58cf53(0x1ea)](){const _0x31488c=_0x58cf53;return[new ImportList[(_0x31488c(0x1de))](Config[_0x31488c(0x1e6)]('ui',_0x31488c(0x189))?'SRD':_0x31488c(0x1e3),Vetools[_0x31488c(0x1c9)],{'filterTypes':[ImportList[_0x31488c(0x1b5)]],'isDefault':!![]}),new ImportList['DataSourceUrl'](_0x31488c(0x17f),'',{'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),new ImportList[(_0x31488c(0x1e8))](_0x31488c(0x1cd),{'filterTypes':[ImportList['SOURCE_TYP_CUSTOM']]}),...(await Vetools[_0x31488c(0x1a9)](_0x31488c(0x19a)))['map'](({name:_0x331033,url:_0x29a03f})=>new ImportList['DataSourceUrl'](_0x331033,_0x29a03f,{'filterTypes':[ImportList[_0x31488c(0x1a3)]]}))];}[_0x58cf53(0x1d2)](){const _0x5bee26=_0x58cf53,_0x54ff8a={'isPreviewable':this[_0x5bee26(0x1be)],'titleButtonRun':this[_0x5bee26(0x1c2)],'titleSearch':this['_titleSearch'],'cols':[{'name':_0x5bee26(0x1cc),'width':0x4,'field':_0x5bee26(0x188)},{'name':_0x5bee26(0x195),'width':0x6,'field':'skills'},{'name':_0x5bee26(0x1bb),'width':0x1,'field':_0x5bee26(0x1da),'titleProp':_0x5bee26(0x1c8),'displayProp':_0x5bee26(0x1ab),'classNameProp':'sourceClassName','rowClassName':_0x5bee26(0x18d)}],'rows':this['_content'][_0x5bee26(0x1d9)]((_0x5b952b,_0x4e02cd)=>{const _0x14886a=_0x5bee26;return this[_0x14886a(0x1e2)][_0x14886a(0x1b4)][_0x14886a(0x19f)](_0x5b952b),{'name':_0x5b952b[_0x14886a(0x188)],'skills':_0x5b952b[_0x14886a(0x184)],'source':_0x5b952b[_0x14886a(0x1da)],'sourceShort':Parser['sourceJsonToAbv'](_0x5b952b[_0x14886a(0x1da)]),'sourceLong':Parser[_0x14886a(0x1e7)](_0x5b952b[_0x14886a(0x1da)]),'sourceClassName':Parser[_0x14886a(0x1d6)](_0x5b952b[_0x14886a(0x1da)]),'ix':_0x4e02cd};})};return this[_0x5bee26(0x1bc)]&&(_0x54ff8a['isRadio']=!![]),_0x54ff8a;}[_0x58cf53(0x1e9)](){const _0xcbf4aa=_0x58cf53;this[_0xcbf4aa(0x1d0)][_0xcbf4aa(0x17e)](this[_0xcbf4aa(0x1d4)],{'fnGetName':_0x1e0bae=>_0x1e0bae[_0xcbf4aa(0x188)],'fnGetValues':_0x2457b0=>({'source':_0x2457b0[_0xcbf4aa(0x1da)],'skills':_0x2457b0[_0xcbf4aa(0x184)],'normalisedTime':_0x2457b0[_0xcbf4aa(0x191)],'normalisedRange':_0x2457b0[_0xcbf4aa(0x1b2)],'hash':UrlUtil[_0xcbf4aa(0x198)][this['_page']](_0x2457b0)}),'fnGetData':UtilList2[_0xcbf4aa(0x1b1)],'fnBindListeners':_0x98fb50=>this[_0xcbf4aa(0x1bc)]?UtilList2[_0xcbf4aa(0x1a8)](this[_0xcbf4aa(0x1d0)],_0x98fb50):UtilList2[_0xcbf4aa(0x192)](this[_0xcbf4aa(0x1d0)],_0x98fb50)});}async['pImportEntry'](_0x364a18,_0x404149){const _0x15e29e=_0x58cf53;_0x404149=_0x404149||{},console[_0x15e29e(0x1af)](...LGT,_0x15e29e(0x199)+_0x364a18['name']+'\x22\x20(from\x20\x22'+Parser[_0x15e29e(0x1c4)](_0x364a18[_0x15e29e(0x1da)])+'\x22)');if(_0x404149[_0x15e29e(0x1b7)])return this[_0x15e29e(0x1d3)](_0x364a18,_0x404149);else{if(this['_actor'])return this[_0x15e29e(0x19d)](_0x364a18,_0x404149);else return this[_0x15e29e(0x1d3)](_0x364a18,_0x404149);}}async[_0x58cf53(0x19d)](_0x191902,_0x24d5fd){const _0xf524a5=_0x58cf53,_0x5522a2={'data':{'details':{'background':_0x191902['name']}}},_0x5d3402=new ImportListCharacter[(_0xf524a5(0x1c7))]();await this[_0xf524a5(0x1a4)](_0x191902,_0x5522a2[_0xf524a5(0x18a)],_0x5d3402);if(_0x5d3402[_0xf524a5(0x1d7)])return{'status':UtilApplications[_0xf524a5(0x1c6)]};await this[_0xf524a5(0x1e1)](_0x191902,_0x5522a2,_0x5d3402);if(_0x5d3402[_0xf524a5(0x1d7)])return{'status':UtilApplications[_0xf524a5(0x1c6)]};await this[_0xf524a5(0x1e4)](_0x191902,_0x5522a2,_0x5d3402);const _0x54c5d5=await this[_0xf524a5(0x1bf)](_0x191902,_0x5d3402);if(_0x5d3402['isCancelled'])return{'status':UtilApplications['TASK_EXIT_CANCELLED']};if(_0x54c5d5?.[_0xf524a5(0x18a)]?.['currency'])MiscUtil[_0xf524a5(0x1a2)](_0x5522a2,_0xf524a5(0x18a),_0xf524a5(0x1bd),_0x54c5d5[_0xf524a5(0x18a)][_0xf524a5(0x1bd)]);this[_0xf524a5(0x1bc)][_0xf524a5(0x1a5)](_0x5522a2),await Charactermancer_StartingEquipment[_0xf524a5(0x1b6)](this[_0xf524a5(0x1bc)],_0x54c5d5);if(this[_0xf524a5(0x1bc)]['isToken'])this[_0xf524a5(0x1bc)][_0xf524a5(0x17d)][_0xf524a5(0x190)]();return{'imported':{'name':_0x191902['name'],'actor':this['_actor']},'status':UtilApplications[_0xf524a5(0x187)]};}async[_0x58cf53(0x1bf)](_0x309582,_0x2c9443){const _0x1ea2f9=_0x58cf53;if(!_0x309582[_0x1ea2f9(0x1df)])return;const _0x256439={'defaultData':_0x309582[_0x1ea2f9(0x1df)]},_0x43ed9e=new Charactermancer_StartingEquipment({'actor':this[_0x1ea2f9(0x1bc)],'startingEquipment':_0x256439,'appSubTitle':_0x309582[_0x1ea2f9(0x188)],'equiSpecialSource':_0x309582[_0x1ea2f9(0x1da)],'equiSpecialPage':_0x309582[_0x1ea2f9(0x1e0)]}),_0x334e7b=await _0x43ed9e[_0x1ea2f9(0x1e5)]();if(_0x334e7b==null)return _0x2c9443[_0x1ea2f9(0x1d7)]=!![],null;return _0x334e7b;}[_0x58cf53(0x18b)](_0x1ee2f9,_0xf7c15d){const _0x3f9ba6=_0x58cf53;return DataConverterBackground[_0x3f9ba6(0x182)](_0x1ee2f9,_0xf7c15d);}async[_0x58cf53(0x1a4)](_0x3018fa,_0x485997,_0x20fea8){const _0x5dbf6b=_0x58cf53;await DataConverter['pFillActorSkillData'](MiscUtil['get'](this[_0x5dbf6b(0x1bc)],_0x5dbf6b(0x18a),'data',_0x5dbf6b(0x1ce)),_0x3018fa[_0x5dbf6b(0x1dd)],_0x485997,_0x20fea8);if(_0x20fea8[_0x5dbf6b(0x1d7)])return;await DataConverter[_0x5dbf6b(0x185)](MiscUtil[_0x5dbf6b(0x1e6)](this['_actor'],'data',_0x5dbf6b(0x18a),_0x5dbf6b(0x1ba),_0x5dbf6b(0x1d1)),_0x3018fa[_0x5dbf6b(0x1cf)],_0x485997,_0x20fea8);if(_0x20fea8[_0x5dbf6b(0x1d7)])return;_0x20fea8[_0x5dbf6b(0x1d7)]=await DataConverter[_0x5dbf6b(0x1db)](MiscUtil[_0x5dbf6b(0x1e6)](this[_0x5dbf6b(0x1bc)],_0x5dbf6b(0x18a),_0x5dbf6b(0x18a),_0x5dbf6b(0x1ba),'toolProf'),_0x3018fa[_0x5dbf6b(0x1a0)],_0x485997);}async['_pImportEntry_pFillDetails'](_0x2a690b,_0x56ca13,_0x5eb821){const _0x5dd606=_0x58cf53;if(_0x2a690b['_foundryIsSkipImportCharacteristics'])return;if(_0x2a690b[_0x5dd606(0x18e)])return Charactermancer_Background_Characteristics[_0x5dd606(0x196)](_0x56ca13,_0x2a690b[_0x5dd606(0x18e)]);await Charactermancer_Background_Characteristics['pFillActorCharacteristicsData'](_0x2a690b[_0x5dd606(0x1b9)],_0x56ca13,_0x5eb821);}async[_0x58cf53(0x1e4)](_0x1a67e0,_0x1c16e4,_0x5740f9){const _0xe2b7ab=_0x58cf53;_0x5740f9['items']=[];const _0x379872=(_0x1a67e0[_0xe2b7ab(0x1b9)]||[])['filter'](_0x41273f=>_0x41273f[_0xe2b7ab(0x18a)]&&_0x41273f[_0xe2b7ab(0x18a)][_0xe2b7ab(0x1b8)]);_0x379872[_0xe2b7ab(0x197)]&&_0x379872[_0xe2b7ab(0x1c3)](_0x1fd6e8=>{const _0x59997b=_0xe2b7ab,_0x3390d1=MiscUtil[_0x59997b(0x19c)](_0x1fd6e8);if(_0x3390d1[_0x59997b(0x188)])_0x3390d1['name'][_0x59997b(0x1dc)](/^.*?:\s*/,'');_0x5740f9[_0x59997b(0x181)][_0x59997b(0x1c1)](DataConverter[_0x59997b(0x1b0)](_0x1fd6e8,{'mode':_0x59997b(0x193),'img':'modules/'+SharedConsts[_0x59997b(0x1a6)]+_0x59997b(0x183),'fvttType':_0x59997b(0x1c5),'source':_0x1a67e0[_0x59997b(0x1da)],'actor':this[_0x59997b(0x1bc)]}));});if(_0x5740f9[_0xe2b7ab(0x181)]['length'])await UtilActors[_0xe2b7ab(0x186)](this['_actor'],_0x5740f9[_0xe2b7ab(0x181)]);}}export{ImportListBackground};