const _0x1923=['background','sourceJsonToColor','TASK_EXIT_CANCELLED','isCancelled','modules/','isStreamerMode','_titleButtonRun','log','skillProficiencies','_pImportEntry_pFillItems','_page','source','getData','pFillActorToolData','SOURCE_TYP_CUSTOM','_pImportEntry_pFillProficiencies','items','player','push','get','_skillDisplay','PG_BACKGROUNDS','_isPreviewable','_normalisedRange','sourceLong','Custom\x20URL','mutateForFilters','_content','pImportEntry','/media/icon/mighty-force.svg','SRD','isFeature','absorbFnBindListeners','DATA_URL_BACKGROUNDS','map','_normalisedTime','update','pGetSources','ImportEntryOpts','length','backgrounds','SOURCE_TYP_BREW','Importing\x20background\x20\x22','skills','pAddActorItems','absorbFnGetData','text-center','Import\x20Backgrounds','pImportEquipmentItemEntries','pFillActorLanguageData','_pImportEntry_pImportToDirectoryGeneric','sourceShort','isRadio','Skills','absorbFnBindListenersRadio','forEach','pFillActorSkillData','_list','replace','entries','sourceClassName','filter','doAbsorbItems','_actor','data','getItemActorPassive','Name','render','sourceJsonToAbv','5etools','name','_titleSearch','_pageFilter','feat','copy','DataSourceUrl','URL_TO_HASH_BUILDER','toolProficiencies','_pImportEntry_pImportToActor','traits','page'];(function(_0x3429cf,_0x19239e){const _0x65b3af=function(_0x58e73e){while(--_0x58e73e){_0x3429cf['push'](_0x3429cf['shift']());}};_0x65b3af(++_0x19239e);}(_0x1923,0x9f));const _0x65b3=function(_0x3429cf,_0x19239e){_0x3429cf=_0x3429cf-0x0;let _0x65b3af=_0x1923[_0x3429cf];return _0x65b3af;};const _0x3baef9=_0x65b3;'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{DataConverterBackground}from'./DataConverterBackground.js';class ImportListBackground extends ImportListCharacter{constructor(_0x58e73e){const _0x4763ae=_0x65b3;_0x58e73e=_0x58e73e||{},super({'title':_0x4763ae('0x32')},_0x58e73e,{'props':[_0x4763ae('0x3')],'titleSearch':_0x4763ae('0x2b'),'sidebarTab':_0x4763ae('0x13'),'gameProp':_0x4763ae('0x13'),'defaultFolderPath':['Backgrounds'],'folderType':'Item','pageFilter':new PageFilterBackgrounds(),'isActorRadio':!![],'page':UrlUtil[_0x4763ae('0x18')],'isPreviewable':!![]});}async[_0x3baef9('0x28')](){const _0x34827c=_0x3baef9;return[new ImportList['DataSourceUrl'](Config[_0x34827c('0x16')]('ui',_0x34827c('0x8'))?_0x34827c('0x21'):_0x34827c('0x48'),Vetools[_0x34827c('0x24')],{'filterTypes':[ImportList['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new ImportList[(_0x34827c('0x4e'))](_0x34827c('0x1c'),'',{'filterTypes':[ImportList[_0x34827c('0x11')]]}),new ImportList['DataSourceFile']('Upload\x20File',{'filterTypes':[ImportList[_0x34827c('0x11')]]}),...(await Vetools['pGetHomebrewSources']('background'))['map'](({name:_0x1200ee,url:_0x3c48d9})=>new ImportList[(_0x34827c('0x4e'))](_0x1200ee,_0x3c48d9,{'filterTypes':[ImportList[_0x34827c('0x2c')]]}))];}[_0x3baef9('0xf')](){const _0x2e80f2=_0x3baef9,_0x4fa789={'isPreviewable':this[_0x2e80f2('0x19')],'titleButtonRun':this[_0x2e80f2('0x9')],'titleSearch':this[_0x2e80f2('0x4a')],'cols':[{'name':_0x2e80f2('0x45'),'width':0x4,'field':'name'},{'name':_0x2e80f2('0x38'),'width':0x6,'field':_0x2e80f2('0x2e')},{'name':'Source','width':0x1,'field':_0x2e80f2('0xe'),'titleProp':_0x2e80f2('0x1b'),'displayProp':_0x2e80f2('0x36'),'classNameProp':_0x2e80f2('0x3f'),'rowClassName':_0x2e80f2('0x31')}],'rows':this[_0x2e80f2('0x1e')][_0x2e80f2('0x25')]((_0x469226,_0x103dcc)=>{const _0x157837=_0x2e80f2;return this[_0x157837('0x4b')][_0x157837('0x1d')](_0x469226),{'name':_0x469226[_0x157837('0x49')],'skills':_0x469226[_0x157837('0x17')],'source':_0x469226['source'],'sourceShort':Parser[_0x157837('0x47')](_0x469226[_0x157837('0xe')]),'sourceLong':Parser['sourceJsonToFull'](_0x469226[_0x157837('0xe')]),'sourceClassName':Parser[_0x157837('0x4')](_0x469226[_0x157837('0xe')]),'ix':_0x103dcc};})};return this[_0x2e80f2('0x42')]&&(_0x4fa789[_0x2e80f2('0x37')]=!![]),_0x4fa789;}['_activateListeners_absorbListItems'](){const _0x584cc5=_0x3baef9;this[_0x584cc5('0x3c')][_0x584cc5('0x41')](this[_0x584cc5('0x1e')],{'fnGetName':_0x4bfe58=>_0x4bfe58[_0x584cc5('0x49')],'fnGetValues':_0x23b447=>({'source':_0x23b447['source'],'skills':_0x23b447[_0x584cc5('0x17')],'normalisedTime':_0x23b447[_0x584cc5('0x26')],'normalisedRange':_0x23b447[_0x584cc5('0x1a')],'hash':UrlUtil[_0x584cc5('0x4f')][this[_0x584cc5('0xd')]](_0x23b447)}),'fnGetData':UtilList2[_0x584cc5('0x30')],'fnBindListeners':_0x11e378=>this[_0x584cc5('0x42')]?UtilList2[_0x584cc5('0x39')](this['_list'],_0x11e378):UtilList2[_0x584cc5('0x23')](this['_list'],_0x11e378)});}async[_0x3baef9('0x1f')](_0x53fa0b,_0x511ea3){const _0x47e49b=_0x3baef9;_0x511ea3=_0x511ea3||{},console[_0x47e49b('0xa')](...LGT,_0x47e49b('0x2d')+_0x53fa0b[_0x47e49b('0x49')]+'\x22\x20(from\x20\x22'+Parser[_0x47e49b('0x47')](_0x53fa0b[_0x47e49b('0xe')])+'\x22)');if(_0x511ea3['isTemp'])return this[_0x47e49b('0x35')](_0x53fa0b,_0x511ea3);else{if(this[_0x47e49b('0x42')])return this[_0x47e49b('0x0')](_0x53fa0b,_0x511ea3);else return this[_0x47e49b('0x35')](_0x53fa0b,_0x511ea3);}}async[_0x3baef9('0x0')](_0x479a87,_0x2cfb68){const _0x1088f0=_0x3baef9,_0x57a7d9={'data':{'details':{'background':_0x479a87[_0x1088f0('0x49')]}}},_0x58a64f=new ImportListCharacter[(_0x1088f0('0x29'))]();await this[_0x1088f0('0x12')](_0x479a87,_0x57a7d9[_0x1088f0('0x43')],_0x58a64f);if(_0x58a64f[_0x1088f0('0x6')])return{'status':UtilApplications[_0x1088f0('0x5')]};await this[_0x1088f0('0xc')](_0x479a87,_0x57a7d9,_0x58a64f);if(_0x479a87['startingEquipment']){const _0x5fe05e={'defaultData':_0x479a87['startingEquipment']},_0x1e32d3=new ImportListCharacter['StartingEquipment']({'actor':this[_0x1088f0('0x42')],'startingEquipment':_0x5fe05e,'appSubTitle':_0x479a87[_0x1088f0('0x49')],'importOpts':_0x58a64f,'equiSpecialSource':_0x479a87[_0x1088f0('0xe')],'equiSpecialPage':_0x479a87[_0x1088f0('0x2')]});_0x1e32d3[_0x1088f0('0x46')](!![]),await _0x1e32d3['pWaitForUserInput']();if(_0x58a64f[_0x1088f0('0x6')])return{'status':UtilApplications[_0x1088f0('0x5')]};}this[_0x1088f0('0x42')][_0x1088f0('0x27')](_0x57a7d9),await ImportListCharacter[_0x1088f0('0x33')](this[_0x1088f0('0x42')],_0x58a64f);if(this[_0x1088f0('0x42')]['isToken'])this[_0x1088f0('0x42')]['sheet'][_0x1088f0('0x46')]();return{'imported':{'name':_0x479a87[_0x1088f0('0x49')],'actor':this[_0x1088f0('0x42')]}};}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x1c006a,_0x8e25ab){return DataConverterBackground['getBackgroundItem'](_0x1c006a,_0x8e25ab);}async[_0x3baef9('0x12')](_0x37039d,_0x2dd182,_0x530e1a){const _0x3e61c7=_0x3baef9;await DataConverter[_0x3e61c7('0x3b')](MiscUtil[_0x3e61c7('0x16')](this[_0x3e61c7('0x42')],_0x3e61c7('0x43'),_0x3e61c7('0x43'),_0x3e61c7('0x2e')),_0x37039d[_0x3e61c7('0xb')],_0x2dd182,_0x530e1a);if(_0x530e1a[_0x3e61c7('0x6')])return;await DataConverter[_0x3e61c7('0x34')](MiscUtil[_0x3e61c7('0x16')](this[_0x3e61c7('0x42')],_0x3e61c7('0x43'),_0x3e61c7('0x43'),_0x3e61c7('0x1'),'languages'),_0x37039d['languageProficiencies'],_0x2dd182,_0x530e1a);if(_0x530e1a['isCancelled'])return;_0x530e1a['isCancelled']=await DataConverter[_0x3e61c7('0x10')](MiscUtil[_0x3e61c7('0x16')](this[_0x3e61c7('0x42')],_0x3e61c7('0x43'),'data',_0x3e61c7('0x1'),'toolProf'),_0x37039d[_0x3e61c7('0x50')],_0x2dd182);}async[_0x3baef9('0xc')](_0x577dc8,_0x471152,_0x468f32){const _0x19b451=_0x3baef9;_0x468f32[_0x19b451('0x13')]=[];const _0x166b7d=(_0x577dc8[_0x19b451('0x3e')]||[])[_0x19b451('0x40')](_0x4e006e=>_0x4e006e[_0x19b451('0x43')]&&_0x4e006e[_0x19b451('0x43')][_0x19b451('0x22')]);_0x166b7d[_0x19b451('0x2a')]&&_0x166b7d[_0x19b451('0x3a')](_0x4bcacf=>{const _0x38bf7d=_0x19b451,_0xe03417=MiscUtil[_0x38bf7d('0x4d')](_0x4bcacf);if(_0xe03417[_0x38bf7d('0x49')])_0xe03417[_0x38bf7d('0x49')][_0x38bf7d('0x3d')](/^.*?:\s*/,'');_0x468f32[_0x38bf7d('0x13')][_0x38bf7d('0x15')](DataConverter[_0x38bf7d('0x44')](_0x4bcacf,{'mode':_0x38bf7d('0x14'),'img':_0x38bf7d('0x7')+SharedConsts['MODULE_NAME']+_0x38bf7d('0x20'),'fvttType':_0x38bf7d('0x4c'),'source':_0x577dc8['source'],'actor':this[_0x38bf7d('0x42')]}));});if(_0x468f32[_0x19b451('0x13')][_0x19b451('0x2a')])await UtilActors[_0x19b451('0x2f')](this[_0x19b451('0x42')],_0x468f32['items']);}}export{ImportListBackground};