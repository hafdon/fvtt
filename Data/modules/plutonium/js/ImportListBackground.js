const _0x4873=['feat','custom','pGetSources','_pImportEntry_pFillProficiencies','5etools','pGetHomebrewSources','languageProficiencies','get','DataSourceFile','Upload\x20File','_list','_skillDisplay','_pImportEntry_pFillItems','Source','_pack','getBackgroundItem','name','copy','update','filter','Skills','isCancelled','absorbFnGetData','SRD','DATA_URL_BACKGROUNDS','entries','_normalisedRange','text-center','_activateListeners_absorbListItems','items','_titleSearch','absorbFnBindListeners','sheet','URL_TO_HASH_BUILDER','value','_pageFilter','importEntity','languages','Import\x20Backgrounds','sourceShort','isTemp','_pImportEntry_pImportToItems','pFillActorSkillData','log','sourceJsonToFull','absorbFnBindListenersRadio','isToken','traits','map','source','insert','replace','_actor','_isPreviewable','PG_BACKGROUNDS','_content','toolProf','SOURCE_TYP_BREW','DataSourceUrl','isFeature','mutateForFilters','_page','Backgrounds','sourceJsonToAbv','SOURCE_TYP_CUSTOM','modules/','Item','Custom\x20URL','background','skills','_titleButtonRun','Name','length','Importing\x20background\x20\x22','forEach','create','SOURCE_TYP_OFFICIAL_ALL','pAddActorItems','data','_pImportEntry_pImportToActor','getData','toolProficiencies'];(function(_0x466d2d,_0x487343){const _0x582ec8=function(_0x45756f){while(--_0x45756f){_0x466d2d['push'](_0x466d2d['shift']());}};_0x582ec8(++_0x487343);}(_0x4873,0x18c));const _0x582e=function(_0x466d2d,_0x487343){_0x466d2d=_0x466d2d-0x0;let _0x582ec8=_0x4873[_0x466d2d];return _0x582ec8;};'use strict';import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';class ImportListBackground extends ImportList{constructor(_0x563525){_0x563525=_0x563525||{},super({'title':_0x582e('0x34')},_0x563525,{'props':[_0x582e('0x0')],'titleSearch':'backgrounds','sidebarTab':'items','gameProp':_0x582e('0x2b'),'defaultFolderPath':[_0x582e('0x4c')],'folderType':_0x582e('0x50'),'pageFilter':new PageFilterBackgrounds(),'isActorRadio':!![],'page':UrlUtil[_0x582e('0x44')],'isPreviewable':!![]});}async[_0x582e('0x10')](){return[new ImportList[(_0x582e('0x48'))](Config[_0x582e('0x15')]('ui','isStreamerMode')?_0x582e('0x25'):_0x582e('0x12'),Vetools[_0x582e('0x26')],{'filterTypes':[ImportList[_0x582e('0x8')]],'isDefault':!![]}),new ImportList[(_0x582e('0x48'))](_0x582e('0x51'),'',{'filterTypes':[ImportList[_0x582e('0x4e')]]}),new ImportList[(_0x582e('0x16'))](_0x582e('0x17'),{'filterTypes':[ImportList[_0x582e('0x4e')]]}),...(await Vetools[_0x582e('0x13')](_0x582e('0x0')))[_0x582e('0x3e')](({name,url})=>new ImportList[(_0x582e('0x48'))](name,url,{'filterTypes':[ImportList[_0x582e('0x47')]]}))];}[_0x582e('0xc')](){const _0xe79940={'isPreviewable':this[_0x582e('0x43')],'titleButtonRun':this[_0x582e('0x2')],'titleSearch':this[_0x582e('0x2c')],'cols':[{'name':_0x582e('0x3'),'width':0x4,'field':_0x582e('0x1e')},{'name':_0x582e('0x22'),'width':0x6,'field':_0x582e('0x1')},{'name':_0x582e('0x1b'),'width':0x1,'field':_0x582e('0x3f'),'titleProp':'sourceLong','displayProp':_0x582e('0x35'),'rowClassName':_0x582e('0x29')}],'rows':this[_0x582e('0x45')]['map']((_0x326bbe,_0x4de970)=>{return this[_0x582e('0x31')][_0x582e('0x4a')](_0x326bbe),{'name':_0x326bbe['name'],'skills':_0x326bbe['_skillDisplay'],'source':_0x326bbe['source'],'sourceShort':Parser['sourceJsonToAbv'](_0x326bbe[_0x582e('0x3f')]),'sourceLong':Parser[_0x582e('0x3a')](_0x326bbe[_0x582e('0x3f')]),'ix':_0x4de970};})};return this[_0x582e('0x42')]&&(_0xe79940['isRadio']=!![]),_0xe79940;}[_0x582e('0x2a')](){this[_0x582e('0x18')]['doAbsorbItems'](this[_0x582e('0x45')],{'fnGetName':_0x23a789=>_0x23a789[_0x582e('0x1e')],'fnGetValues':_0x1048c6=>({'source':_0x1048c6[_0x582e('0x3f')],'skills':_0x1048c6[_0x582e('0x19')],'normalisedTime':_0x1048c6['_normalisedTime'],'normalisedRange':_0x1048c6[_0x582e('0x28')],'hash':UrlUtil[_0x582e('0x2f')][this[_0x582e('0x4b')]](_0x1048c6)}),'fnGetData':UtilList2[_0x582e('0x24')],'fnBindListeners':_0x49bc5d=>this[_0x582e('0x42')]?UtilList2[_0x582e('0x3b')](this[_0x582e('0x18')],_0x49bc5d):UtilList2[_0x582e('0x2d')](this[_0x582e('0x18')],_0x49bc5d)});}async['pImportEntry'](_0xf35424,_0x45bd93){_0x45bd93=_0x45bd93||{},console[_0x582e('0x39')](...LGT,_0x582e('0x5')+_0xf35424[_0x582e('0x1e')]+'\x22\x20(from\x20\x22'+Parser[_0x582e('0x4d')](_0xf35424[_0x582e('0x3f')])+'\x22)');if(_0x45bd93[_0x582e('0x36')])return this[_0x582e('0x37')](_0xf35424,_0x45bd93);else{if(this['_actor'])return this[_0x582e('0xb')](_0xf35424,_0x45bd93);else return this[_0x582e('0x37')](_0xf35424,_0x45bd93);}}async['_pImportEntry_pImportToActor'](_0x101ed5,_0x9d7c1a){const _0xecb5e1={'data':{'details':{'background':_0x101ed5[_0x582e('0x1e')]}}},_0x2b80d5={'isCancelled':![]};await this['_pImportEntry_pFillProficiencies'](_0x101ed5,_0xecb5e1['data'],_0x2b80d5);if(_0x2b80d5[_0x582e('0x23')])return;await this[_0x582e('0x1a')](_0x101ed5,_0xecb5e1,_0x2b80d5),this[_0x582e('0x42')][_0x582e('0x20')](_0xecb5e1);if(this[_0x582e('0x42')][_0x582e('0x3c')])this[_0x582e('0x42')][_0x582e('0x2e')]['render']();return{'name':_0x101ed5[_0x582e('0x1e')],'actor':this[_0x582e('0x42')]};}async[_0x582e('0x37')](_0x4af2ac,_0x2e2793){const _0x127f04=DataConverter[_0x582e('0x1d')](_0x4af2ac,{'isAddPermission':!![]});if(_0x2e2793[_0x582e('0x36')]||!this[_0x582e('0x1c')]){if(!_0x2e2793[_0x582e('0x36')]){const _0x135939=await this['_pImportEntry_pGetFolderId'](_0x4af2ac);if(_0x135939)_0x127f04['folder']=_0x135939;}const _0x500fb1=await Item[_0x582e('0x7')](_0x127f04,{'renderSheet':!!_0x2e2793[_0x582e('0x36')],'temporary':!!_0x2e2793['isTemp']});if(!_0x2e2793[_0x582e('0x36')])await game[_0x582e('0x2b')][_0x582e('0x40')](_0x500fb1);return _0x500fb1;}else{const _0x378968=new Item(_0x127f04);return await this['_pack'][_0x582e('0x32')](_0x378968),_0x378968;}}async[_0x582e('0x11')](_0x2c4950,_0xcf2760,_0x2c2c3c){const _0x4eaf0f=await DataConverter[_0x582e('0x38')](MiscUtil[_0x582e('0x15')](this[_0x582e('0x42')],_0x582e('0xa'),_0x582e('0xa'),'skills'),_0x2c4950['skillProficiencies'],_0xcf2760);if(_0x4eaf0f['isCancelled'])_0x2c2c3c[_0x582e('0x23')]=!![];if(_0x2c2c3c['isCancelled'])return;_0x2c2c3c[_0x582e('0x23')]=await DataConverter['pFillActorLanguageData'](MiscUtil['get'](this[_0x582e('0x42')],'data',_0x582e('0xa'),_0x582e('0x3d'),'languages',_0x582e('0x30')),MiscUtil['get'](this['_actor'],_0x582e('0xa'),_0x582e('0xa'),'traits',_0x582e('0x33'),_0x582e('0xf')),_0x2c4950[_0x582e('0x14')],_0xcf2760);if(_0x2c2c3c[_0x582e('0x23')])return;_0x2c2c3c['isCancelled']=await DataConverter['pFillActorToolData'](MiscUtil[_0x582e('0x15')](this[_0x582e('0x42')],_0x582e('0xa'),_0x582e('0xa'),_0x582e('0x3d'),_0x582e('0x46'),_0x582e('0x30')),MiscUtil[_0x582e('0x15')](this[_0x582e('0x42')],_0x582e('0xa'),_0x582e('0xa'),'traits','toolProf','custom'),_0x2c4950[_0x582e('0xd')],_0xcf2760);}async['_pImportEntry_pFillItems'](_0x2fd87d,_0x2c93c8,_0x4f159f){_0x4f159f[_0x582e('0x2b')]=[];const _0x13a009=(_0x2fd87d[_0x582e('0x27')]||[])[_0x582e('0x21')](_0x557894=>_0x557894[_0x582e('0xa')]&&_0x557894[_0x582e('0xa')][_0x582e('0x49')]);_0x13a009['length']&&_0x13a009[_0x582e('0x6')](_0x5efc29=>{const _0x476423=MiscUtil[_0x582e('0x1f')](_0x5efc29);if(_0x476423[_0x582e('0x1e')])_0x476423['name'][_0x582e('0x41')](/^.*?:\s*/,'');_0x4f159f[_0x582e('0x2b')]['push'](DataConverter['getItemActorPassive'](_0x5efc29,{'mode':'player','img':_0x582e('0x4f')+SharedConsts['MODULE_NAME']+'/media/icon/mighty-force.svg','fvttType':_0x582e('0xe'),'source':_0x2fd87d[_0x582e('0x3f')],'actor':this['_actor']}));});if(_0x4f159f['items'][_0x582e('0x4')])await UtilActors[_0x582e('0x9')](this[_0x582e('0x42')],_0x4f159f[_0x582e('0x2b')]);}}export{ImportListBackground};