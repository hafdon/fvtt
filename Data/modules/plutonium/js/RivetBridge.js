const _0x4ce2=['label','log','PG_ITEMS','PG_SPELLS','dice','isWhisper','PG_PSIONICS','val','type','push','PG_BACKGROUNDS','rivet.receive-text','settings','doShowImportedNotificationFailure','notifications','PG_BESTIARY','remove','isTemp','trim','init','rolledBy','PG_FEATS','page','get','Plutonium\x20does\x20not\x20yet\x20support\x20entities\x20from\x20\x22','PG_VARIATNRULES','PG_OPT_FEATURES','last','rivet.receive','error','roll','data','parse','PG_CONDITIONS_DISEASES','collection','PG_TABLES','_handlePacket','PG_VEHICLES','Unhandled\x20Rivet\x20message\x20with\x20type\x20\x22','entity','pImportEntry','_pHandleEntityMessage'];(function(_0x1a0852,_0x4ce278){const _0x446164=function(_0x52b3ff){while(--_0x52b3ff){_0x1a0852['push'](_0x1a0852['shift']());}};_0x446164(++_0x4ce278);}(_0x4ce2,0xd1));const _0x4461=function(_0x1a0852,_0x4ce278){_0x1a0852=_0x1a0852-0x0;let _0x446164=_0x4ce2[_0x1a0852];return _0x446164;};'use strict';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRace}from'./ImportListRace.js';import{ImportListClass}from'./ImportListClass.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{ImportListPsionic}from'./ImportListPsionic.js';import{ImportListOptionalFeature}from'./ImportListOptionalFeature.js';import{ImportListConditionDisease}from'./ImportListConditionDisease.js';import{ImportListVehicle}from'./ImportListVehicle.js';import{Config}from'./Config.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';class RivetBridge{static[_0x4461('0x14')](){window['addEventListener'](_0x4461('0x1d'),_0x56e2fc=>{console[_0x4461('0x2')](...LGT,'Received\x20Rivet\x20message\x20(JSON)'),this[_0x4461('0x25')](_0x56e2fc['detail']);}),window['addEventListener'](_0x4461('0xc'),()=>{console[_0x4461('0x2')](...LGT,'Received\x20Rivet\x20message\x20(text)');const _0x484a96=$('textarea.rivet-transfer'),_0x47e9f0=_0x484a96[_0x4461('0x1c')]()[_0x4461('0x8')]();_0x484a96[_0x4461('0x11')](),this[_0x4461('0x25')](JSON[_0x4461('0x21')](_0x47e9f0));});}static[_0x4461('0x25')](_0x571aa3){switch(_0x571aa3[_0x4461('0x9')]){case'roll':return this['_handleRollMessage'](_0x571aa3);case'entity':return this['_pHandleEntityMessage'](_0x571aa3);default:ui[_0x4461('0xf')]['error'](_0x4461('0x27')+_0x571aa3[_0x4461('0x9')]+'\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.');}}static['_handleRollMessage'](_0x19f144){const _0x1a130e=_0x19f144[_0x4461('0x20')];if(!_0x19f144[_0x4461('0xd')]['isSendRolls'])return;const _0x588b0f=new Roll(_0x1a130e[_0x4461('0x5')]),_0x40d8f6=[];if(_0x19f144[_0x4461('0xd')][_0x4461('0x6')])_0x40d8f6[_0x4461('0xa')](game['userId']);_0x588b0f['toMessage']({'speaker':{'alias':_0x1a130e[_0x4461('0x15')]},'flavor':_0x1a130e[_0x4461('0x1')],'rollMode':_0x4461('0x1f'),'whisper':_0x40d8f6});}static async[_0x4461('0x0')](_0x103591){const _0x40881b=_0x103591[_0x4461('0x20')],_0x1004bc=(Config[_0x4461('0x18')]('rivet','targetActorId')||'')[_0x4461('0x13')](),_0x1fbb3f=_0x1004bc?Actor[_0x4461('0x23')]['get'](_0x1004bc):'',_0x22a102=(()=>{switch(_0x40881b[_0x4461('0x17')]){case UrlUtil[_0x4461('0x16')]:return new ImportListFeat({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x10')]:return new ImportListCreature({});case UrlUtil[_0x4461('0x4')]:return new ImportListSpell({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x3')]:return new ImportListItem({'actor':_0x1fbb3f});case UrlUtil['PG_RACES']:return new ImportListRace({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0xb')]:return new ImportListBackground({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x1a')]:return new ImportListVariantRule({});case UrlUtil[_0x4461('0x24')]:return new ImportListRollableTable({});case UrlUtil[_0x4461('0x7')]:return new ImportListPsionic({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x1b')]:return new ImportListOptionalFeature({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x22')]:return new ImportListConditionDisease({'actor':_0x1fbb3f});case UrlUtil[_0x4461('0x26')]:return new ImportListVehicle({'actor':_0x1fbb3f});default:return null;}})();if(!_0x22a102)return ui['notifications'][_0x4461('0x1e')](_0x4461('0x19')+_0x40881b['page']+'\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.');try{await _0x22a102['pInit']();const _0x517524={};if(_0x40881b[_0x4461('0x12')])_0x517524[_0x4461('0x12')]=!![];const _0x5144cf=await _0x22a102[_0x4461('0x29')](_0x40881b[_0x4461('0x28')],_0x517524);UtilApplications['doShowImportedNotificationSuccess'](_0x5144cf);}catch(_0x233017){UtilApplications[_0x4461('0xe')](_0x40881b),setTimeout(()=>{throw _0x233017;});}}}export{RivetBridge};