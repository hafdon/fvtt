'use strict';const _0x294f=['Unhandled\x20Rivet\x20message\x20with\x20type\x20\x22','rivet.receive-text','93OPcuqE','addEventListener','PG_BESTIARY','isWhisper','rivet.receive','label','TASK_EXIT_FAILED','8WcdZel','isTemp','pInit','158227QpSMmP','import','toMessage','dice','PG_CONDITIONS_DISEASES','data','PG_VEHICLES','user','detail','userId','page','roll','12097JOTYto','7354uFVLrB','get','\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.','364936rPfDDF','1yasRwi','notifications','102794DYqknC','pImportEntry','_handleRollMessage','push','remove','log','init','trim','PG_FEATS','type','Received\x20Rivet\x20message\x20(text)','collection','352049XHlWsV','_pHandleEntityMessage','minimumRole','targetActorId','settings','role','PG_PSIONICS','_handlePacket','311339cTqGLg','error','rolledBy','Plutonium\x20does\x20not\x20yet\x20support\x20entities\x20from\x20\x22','PG_BACKGROUNDS'];const _0x1a5c=function(_0x3bcf67,_0x3fb3f6){_0x3bcf67=_0x3bcf67-0x14d;let _0x294f28=_0x294f[_0x3bcf67];return _0x294f28;};const _0x379c82=_0x1a5c;(function(_0x577237,_0x27e92c){const _0x41b484=_0x1a5c;while(!![]){try{const _0x306593=-parseInt(_0x41b484(0x15f))+-parseInt(_0x41b484(0x160))*-parseInt(_0x41b484(0x16e))+parseInt(_0x41b484(0x162))+-parseInt(_0x41b484(0x176))+parseInt(_0x41b484(0x15b))*-parseInt(_0x41b484(0x184))+-parseInt(_0x41b484(0x14f))+parseInt(_0x41b484(0x15c))*parseInt(_0x41b484(0x17d));if(_0x306593===_0x27e92c)break;else _0x577237['push'](_0x577237['shift']());}catch(_0x6af8e1){_0x577237['push'](_0x577237['shift']());}}}(_0x294f,0x32a7f));import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRace}from'./ImportListRace.js';import{ImportListClass}from'./ImportListClass.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{ImportListPsionic}from'./ImportListPsionic.js';import{ImportListOptionalFeature}from'./ImportListOptionalFeature.js';import{ImportListConditionDisease}from'./ImportListConditionDisease.js';import{ImportListVehicle}from'./ImportListVehicle.js';import{Config}from'./Config.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerSourceSelector}from'./ActorCharactermancer.js';class RivetBridge{static[_0x379c82(0x168)](){const _0x4d7a33=_0x379c82;window['addEventListener'](_0x4d7a33(0x181),_0x5ec167=>{const _0x34297b=_0x4d7a33;console[_0x34297b(0x167)](...LGT,'Received\x20Rivet\x20message\x20(JSON)'),this[_0x34297b(0x175)](_0x5ec167[_0x34297b(0x157)]);}),window[_0x4d7a33(0x17e)](_0x4d7a33(0x17c),()=>{const _0x38e047=_0x4d7a33;console['log'](...LGT,_0x38e047(0x16c));const _0x5791fa=$('textarea.rivet-transfer'),_0xc9f4ce=_0x5791fa['last']()['val']();_0x5791fa[_0x38e047(0x166)](),this[_0x38e047(0x175)](JSON['parse'](_0xc9f4ce));});}static[_0x379c82(0x175)](_0x5e7793){const _0x49e4b1=_0x379c82;switch(_0x5e7793[_0x49e4b1(0x16b)]){case _0x49e4b1(0x15a):return this[_0x49e4b1(0x164)](_0x5e7793);case'entity':return this[_0x49e4b1(0x16f)](_0x5e7793);default:ui['notifications'][_0x49e4b1(0x177)](_0x49e4b1(0x17b)+_0x5e7793[_0x49e4b1(0x16b)]+_0x49e4b1(0x15e));}}static[_0x379c82(0x164)](_0x135dfb){const _0x2a2ef3=_0x379c82,_0x2b03ea=_0x135dfb[_0x2a2ef3(0x154)];if(!_0x135dfb[_0x2a2ef3(0x172)]['isSendRolls'])return;const _0x18280e=new Roll(_0x2b03ea[_0x2a2ef3(0x152)]),_0x39c96b=[];if(_0x135dfb['settings'][_0x2a2ef3(0x180)])_0x39c96b[_0x2a2ef3(0x165)](game[_0x2a2ef3(0x158)]);_0x18280e[_0x2a2ef3(0x151)]({'speaker':{'alias':_0x2b03ea[_0x2a2ef3(0x178)]},'flavor':_0x2b03ea[_0x2a2ef3(0x182)],'rollMode':_0x2a2ef3(0x15a),'whisper':_0x39c96b});}static async[_0x379c82(0x16f)](_0x1d683f){const _0x2a2a7f=_0x379c82,_0x573902=Config[_0x2a2a7f(0x15d)](_0x2a2a7f(0x150),_0x2a2a7f(0x170));if(game[_0x2a2a7f(0x156)][_0x2a2a7f(0x173)]<_0x573902)return;const _0x450e82=_0x1d683f[_0x2a2a7f(0x154)],_0x5ad703=(Config['get']('rivet',_0x2a2a7f(0x171))||'')[_0x2a2a7f(0x169)](),_0x2977e5=_0x5ad703?Actor[_0x2a2a7f(0x16d)][_0x2a2a7f(0x15d)](_0x5ad703):'',_0x42830e=(()=>{const _0x4cf86a=_0x2a2a7f;switch(_0x450e82[_0x4cf86a(0x159)]){case UrlUtil[_0x4cf86a(0x16a)]:return new ImportListFeat({'actor':_0x2977e5});case UrlUtil[_0x4cf86a(0x17f)]:return new ImportListCreature({});case UrlUtil['PG_SPELLS']:return new ImportListSpell({'actor':_0x2977e5});case UrlUtil['PG_ITEMS']:return new ImportListItem({'actor':_0x2977e5});case UrlUtil['PG_RACES']:return new ImportListRace({'actor':_0x2977e5});case UrlUtil[_0x4cf86a(0x17a)]:return new ImportListBackground({'actor':_0x2977e5});case UrlUtil['PG_VARIANTRULES']:return new ImportListVariantRule({});case UrlUtil['PG_TABLES']:return new ImportListRollableTable({});case UrlUtil[_0x4cf86a(0x174)]:return new ImportListPsionic({'actor':_0x2977e5});case UrlUtil['PG_OPT_FEATURES']:return new ImportListOptionalFeature({'actor':_0x2977e5});case UrlUtil[_0x4cf86a(0x153)]:return new ImportListConditionDisease({'actor':_0x2977e5});case UrlUtil[_0x4cf86a(0x155)]:return new ImportListVehicle({});default:return null;}})();if(!_0x42830e)return ui[_0x2a2a7f(0x161)][_0x2a2a7f(0x177)](_0x2a2a7f(0x179)+_0x450e82[_0x2a2a7f(0x159)]+_0x2a2a7f(0x15e));try{await _0x42830e[_0x2a2a7f(0x14e)]();const _0x48ed77={};if(_0x450e82[_0x2a2a7f(0x14d)])_0x48ed77[_0x2a2a7f(0x14d)]=!![];const _0x8a5861=await _0x42830e[_0x2a2a7f(0x163)](_0x450e82['entity'],_0x48ed77);UtilApplications['doShowImportedNotification'](_0x8a5861);}catch(_0x2c302e){UtilApplications['doShowImportedNotification']({'entity':_0x450e82,'status':UtilApplications[_0x2a2a7f(0x183)]}),setTimeout(()=>{throw _0x2c302e;});}}}export{RivetBridge};