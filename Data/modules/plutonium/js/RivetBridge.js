const _0x19ac=['452684geoldh','272468BcdkCP','settings','Received\x20Rivet\x20message\x20(text)','PG_VEHICLES','18199AhuBDc','PG_TABLES','pImportEntry','\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.','textarea.rivet-transfer','page','PG_SPELLS','entity','PG_FEATS','addEventListener','log','label','rivet.receive-text','_handlePacket','_handleRollMessage','isSendRolls','error','import','pInit','push','124756jCCvVj','user','parse','dice','13XULTLi','remove','type','init','Plutonium\x20does\x20not\x20yet\x20support\x20entities\x20from\x20\x22','Received\x20Rivet\x20message\x20(JSON)','trim','rolledBy','get','_pHandleEntityMessage','52533ygcmLY','rivet','roll','last','isTemp','PG_BESTIARY','data','PG_CONDITIONS_DISEASES','PG_OPT_FEATURES','TASK_EXIT_FAILED','isWhisper','notifications','targetActorId','detail','userId','doShowImportedNotification','PG_RACES','343303OICfcV','PG_ITEMS','398979MOcbUj','PG_VARIANTRULES','rivet.receive'];const _0x5c1a=function(_0x3a2703,_0x3f7308){_0x3a2703=_0x3a2703-0xd9;let _0x19ac36=_0x19ac[_0x3a2703];return _0x19ac36;};const _0x403311=_0x5c1a;(function(_0x219aac,_0x51eb35){const _0x3971ca=_0x5c1a;while(!![]){try{const _0x297f55=parseInt(_0x3971ca(0xdf))+-parseInt(_0x3971ca(0xe9))*parseInt(_0x3971ca(0x101))+-parseInt(_0x3971ca(0xe4))+-parseInt(_0x3971ca(0xfd))+parseInt(_0x3971ca(0xe5))+parseInt(_0x3971ca(0x10b))+parseInt(_0x3971ca(0xe1));if(_0x297f55===_0x51eb35)break;else _0x219aac['push'](_0x219aac['shift']());}catch(_0x112719){_0x219aac['push'](_0x219aac['shift']());}}}(_0x19ac,0x3dd48));import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRace}from'./ImportListRace.js';import{ImportListClass}from'./ImportListClass.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{ImportListPsionic}from'./ImportListPsionic.js';import{ImportListOptionalFeature}from'./ImportListOptionalFeature.js';import{ImportListConditionDisease}from'./ImportListConditionDisease.js';import{ImportListVehicle}from'./ImportListVehicle.js';import{Config}from'./Config.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerSourceSelector}from'./ActorCharactermancer.js';class RivetBridge{static[_0x403311(0x104)](){const _0x5b71b0=_0x403311;window[_0x5b71b0(0xf2)](_0x5b71b0(0xe3),_0xab2ee6=>{const _0x504654=_0x5b71b0;return console[_0x504654(0xf3)](...LGT,_0x504654(0x106)),this[_0x504654(0xf6)](_0xab2ee6[_0x504654(0xdb)]);}),window[_0x5b71b0(0xf2)](_0x5b71b0(0xf5),()=>{const _0x57e6b3=_0x5b71b0;console[_0x57e6b3(0xf3)](...LGT,_0x57e6b3(0xe7));const _0x3594df=$(_0x57e6b3(0xed)),_0x51ad58=_0x3594df[_0x57e6b3(0x10e)]()['val']();return _0x3594df[_0x57e6b3(0x102)](),this[_0x57e6b3(0xf6)](JSON[_0x57e6b3(0xff)](_0x51ad58));});}static[_0x403311(0xf6)](_0x34fce9){const _0x25e2c3=_0x403311;switch(_0x34fce9[_0x25e2c3(0x103)]){case _0x25e2c3(0x10d):return this[_0x25e2c3(0xf7)](_0x34fce9);case _0x25e2c3(0xf0):return this[_0x25e2c3(0x10a)](_0x34fce9);default:ui['notifications'][_0x25e2c3(0xf9)]('Unhandled\x20Rivet\x20message\x20with\x20type\x20\x22'+_0x34fce9['type']+_0x25e2c3(0xec));}}static[_0x403311(0xf7)](_0x29ecfb){const _0x360e51=_0x403311,_0x396c4e=_0x29ecfb[_0x360e51(0x111)];if(!_0x29ecfb[_0x360e51(0xe6)][_0x360e51(0xf8)])return;const _0x1b3935=new Roll(_0x396c4e[_0x360e51(0x100)]),_0x4ff524=[];if(_0x29ecfb['settings'][_0x360e51(0x115)])_0x4ff524[_0x360e51(0xfc)](game[_0x360e51(0xdc)]);_0x1b3935['toMessage']({'speaker':{'alias':_0x396c4e[_0x360e51(0x108)]},'flavor':_0x396c4e[_0x360e51(0xf4)],'rollMode':_0x360e51(0x10d),'whisper':_0x4ff524});}static async[_0x403311(0x10a)](_0x6183b5){const _0x29dda7=_0x403311,_0x2dd8fb=Config['get'](_0x29dda7(0xfa),'minimumRole');if(game[_0x29dda7(0xfe)]['role']<_0x2dd8fb)return;const _0x2799e8=_0x6183b5[_0x29dda7(0x111)],_0x46040a=(Config[_0x29dda7(0x109)](_0x29dda7(0x10c),_0x29dda7(0xda))||'')[_0x29dda7(0x107)](),_0x1e7c65=_0x46040a?Actor['collection'][_0x29dda7(0x109)](_0x46040a):'',_0x2945d0=(()=>{const _0xe182d=_0x29dda7;switch(_0x2799e8['page']){case UrlUtil[_0xe182d(0xf1)]:return new ImportListFeat({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0x110)]:return new ImportListCreature({});case UrlUtil[_0xe182d(0xef)]:return new ImportListSpell({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0xe0)]:return new ImportListItem({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0xde)]:return new ImportListRace({'actor':_0x1e7c65});case UrlUtil['PG_BACKGROUNDS']:return new ImportListBackground({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0xe2)]:return new ImportListVariantRule({});case UrlUtil[_0xe182d(0xea)]:return new ImportListRollableTable({});case UrlUtil['PG_PSIONICS']:return new ImportListPsionic({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0x113)]:return new ImportListOptionalFeature({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0x112)]:return new ImportListConditionDisease({'actor':_0x1e7c65});case UrlUtil[_0xe182d(0xe8)]:return new ImportListVehicle({});default:return null;}})();if(!_0x2945d0)return ui[_0x29dda7(0xd9)][_0x29dda7(0xf9)](_0x29dda7(0x105)+_0x2799e8[_0x29dda7(0xee)]+'\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.');try{await _0x2945d0[_0x29dda7(0xfb)]();const _0x5e5e74={};if(_0x2799e8[_0x29dda7(0x10f)])_0x5e5e74['isTemp']=!![];const _0x323195=await _0x2945d0[_0x29dda7(0xeb)](_0x2799e8[_0x29dda7(0xf0)],_0x5e5e74);UtilApplications[_0x29dda7(0xdd)](_0x323195);}catch(_0x2f88a9){UtilApplications[_0x29dda7(0xdd)]({'entity':_0x2799e8,'status':UtilApplications[_0x29dda7(0x114)]}),setTimeout(()=>{throw _0x2f88a9;});}}}export{RivetBridge};