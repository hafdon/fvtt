const _0x4444=['overrides','2zEjCEC','getActiveEffectType','assign','isDebug','size','271498yDMlgu','get','utils','effects','Actor.prototype.applyActiveEffects','26574REgAHc','24891nXEcwd','prepareData','getAdditionalRollDataBase','MODULE_NAME_FAKE','null','_init_tryPatchApplyActiveEffects','mode','_applyActiveEffects_mutValues','error','handleHookApplyActiveEffect','effect','actor','changes','contents','length','1wCreZz','83497ZLRMGq','key','sort','register','CONFIG.Actor.documentClass.prototype.getRollData','forEach','render','1071002HorTrI','LIBWRAPPER_MODE_WRAPPER','concat','LIBWRAPPER_MODE_MIXED','warn','1121653PFpqgn','instance','total','reduce','getProperty','value','_applyActiveEffects','priority','string','apply','sheet','Actor','_getRollData','number','8JGKgUI','isUseExtendedActiveEffectsParser','_init_tryPatchGetRollData','init','1YFXEfi','19uesJcd','Failed\x20to\x20bind\x20getRollData\x20handler!','data.attributes.ac.value','4673nByEnr','getKeyFromCustomKey','boolean','4zdoaVq','_applyActiveEffects_getFullRollData','Unhandled\x20custom\x20active\x20effect\x20key:\x20','_handleConfigUpdate','documentClass','getRollData','data'];const _0x4774=function(_0x16bd03,_0x2c6f01){_0x16bd03=_0x16bd03-0x1a3;let _0x444477=_0x4444[_0x16bd03];return _0x444477;};const _0x5a5a34=_0x4774;(function(_0x2dd1ea,_0x41338b){const _0x40200c=_0x4774;while(!![]){try{const _0x52330e=-parseInt(_0x40200c(0x1cf))+parseInt(_0x40200c(0x1c8))*parseInt(_0x40200c(0x1ad))+parseInt(_0x40200c(0x1ea))*-parseInt(_0x40200c(0x1e7))+parseInt(_0x40200c(0x1d4))*parseInt(_0x40200c(0x1c7))+parseInt(_0x40200c(0x1b8))*parseInt(_0x40200c(0x1a5))+-parseInt(_0x40200c(0x1b2))*-parseInt(_0x40200c(0x1e6))+-parseInt(_0x40200c(0x1b7))*-parseInt(_0x40200c(0x1e2));if(_0x52330e===_0x41338b)break;else _0x2dd1ea['push'](_0x2dd1ea['shift']());}catch(_0x4fd4b1){_0x2dd1ea['push'](_0x2dd1ea['shift']());}}}(_0x4444,0xadf40));import{libWrapper,UtilLibWrapper}from'./PatcherLibWrapper.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{LGT,Util}from'./Util.js';import{PatcherRollData}from'./PatcherRollData.js';class Patcher_Actor{static[_0x5a5a34(0x1e5)](){const _0x2124c7=_0x5a5a34;this[_0x2124c7(0x1e4)](),this[_0x2124c7(0x1bd)]();}static['_init_tryPatchGetRollData'](){const _0x7212b6=_0x5a5a34;try{libWrapper[_0x7212b6(0x1cb)](SharedConsts['MODULE_NAME'],_0x7212b6(0x1cc),function(_0x189224,..._0x56b7e6){const _0xfdd889=_0x7212b6,_0x346733=_0x189224(..._0x56b7e6);return Patcher_Actor[_0xfdd889(0x1e0)](this,_0x346733);},UtilLibWrapper[_0x7212b6(0x1d0)]);}catch(_0x3f6cc7){console[_0x7212b6(0x1c0)](...LGT,_0x7212b6(0x1e8),_0x3f6cc7);}}static[_0x5a5a34(0x1e0)](_0x213b63,_0x1afdf7){const _0x5b75ab=_0x5a5a34;if(!_0x1afdf7)return _0x1afdf7;return Object[_0x5b75ab(0x1af)](_0x1afdf7,PatcherRollData[_0x5b75ab(0x1ba)](_0x213b63)),_0x1afdf7;}static[_0x5a5a34(0x1bd)](){const _0x1de01e=_0x5a5a34;libWrapper[_0x1de01e(0x1cb)](SharedConsts['MODULE_NAME'],_0x1de01e(0x1b6),function(_0x2f0cf2,..._0x4cd627){const _0xb6399e=_0x1de01e;if(!Config[_0xb6399e(0x1b3)]('actor',_0xb6399e(0x1e3)))return _0x2f0cf2(..._0x4cd627);return Patcher_Actor[_0xb6399e(0x1da)](this,..._0x4cd627);},UtilLibWrapper[_0x1de01e(0x1d2)]),Hooks['on']('plutonium.configUpdate',()=>this[_0x1de01e(0x1a8)]());}static[_0x5a5a34(0x1a8)](){const _0x1a7ade=_0x5a5a34;CONFIG['Actor']['collection'][_0x1a7ade(0x1d5)][_0x1a7ade(0x1c5)]['forEach'](_0x51165c=>{const _0x2bb958=_0x1a7ade;_0x51165c[_0x2bb958(0x1b9)]();if(_0x51165c[_0x2bb958(0x1de)]?.['element']?.[_0x2bb958(0x1c6)])_0x51165c[_0x2bb958(0x1de)][_0x2bb958(0x1ce)]();});}static['_applyActiveEffects'](_0x2948a1){const _0x1c2e62=_0x5a5a34;if(!_0x2948a1[_0x1c2e62(0x1b5)]||!_0x2948a1[_0x1c2e62(0x1b5)][_0x1c2e62(0x1b1)]&&!_0x2948a1[_0x1c2e62(0x1b5)][_0x1c2e62(0x1c6)])return;const _0x28bcbe={},_0x5c0b29=_0x2948a1[_0x1c2e62(0x1b5)][_0x1c2e62(0x1d7)]((_0x5902c4,_0xf9adea)=>{const _0x5ac426=_0x1c2e62;if(_0xf9adea[_0x5ac426(0x1ab)]['disabled'])return _0x5902c4;return _0x5902c4[_0x5ac426(0x1d1)](_0xf9adea[_0x5ac426(0x1ab)][_0x5ac426(0x1c4)]['map'](_0x559373=>{const _0x52f1cf=_0x5ac426;return _0x559373=duplicate(_0x559373),_0x559373[_0x52f1cf(0x1c2)]=_0xf9adea,_0x559373[_0x52f1cf(0x1db)]=_0x559373[_0x52f1cf(0x1db)]??_0x559373[_0x52f1cf(0x1be)]*0xa,_0x559373;}));},[]);_0x5c0b29[_0x1c2e62(0x1ca)]((_0x51bc91,_0x1de7a3)=>_0x51bc91[_0x1c2e62(0x1db)]-_0x1de7a3[_0x1c2e62(0x1db)]),Patcher_Actor[_0x1c2e62(0x1bf)](_0x2948a1,_0x5c0b29);for(let _0x1c8f8c of _0x5c0b29){const _0x4ebd7d=_0x1c8f8c[_0x1c2e62(0x1c2)][_0x1c2e62(0x1dd)](_0x2948a1,_0x1c8f8c);if(_0x4ebd7d!==null)_0x28bcbe[_0x1c8f8c[_0x1c2e62(0x1c9)]]=_0x4ebd7d;}_0x2948a1[_0x1c2e62(0x1ac)]=foundry[_0x1c2e62(0x1b4)]['expandObject'](_0x28bcbe);}static[_0x5a5a34(0x1bf)](_0x3783f6,_0x27a766){const _0x5ab47a=_0x5a5a34;if(!_0x27a766['length'])return;let _0x22b9df;const _0x1a24ce=UtilActiveEffects['getAvailableEffectsLookup'](_0x3783f6,{'isActorEffect':!![]});_0x27a766[_0x5ab47a(0x1cd)](_0x2dda71=>{const _0x3ab606=_0x5ab47a;if(typeof _0x2dda71['value']!=='string')return;const _0x2fcaa8=UtilActiveEffects[_0x3ab606(0x1ae)](_0x1a24ce,_0x2dda71[_0x3ab606(0x1c9)]);if(_0x2fcaa8==null)return;switch(_0x2fcaa8){case'object':case'array':{try{_0x2dda71[_0x3ab606(0x1d9)]=eval(_0x2dda71[_0x3ab606(0x1d9)]);}catch(_0x575901){if(Util['isDebug']())console[_0x3ab606(0x1c0)](...LGT,_0x575901);}break;}case _0x3ab606(0x1bc):case _0x3ab606(0x1e1):case _0x3ab606(0x1a4):{if(!_0x22b9df)_0x22b9df=Patcher_Actor[_0x3ab606(0x1a6)](_0x3783f6);try{const _0x1b3558=new Roll(_0x2dda71[_0x3ab606(0x1d9)],_0x22b9df);_0x1b3558['evaluate']({'async':![]}),_0x2dda71['value']=_0x1b3558[_0x3ab606(0x1d6)];if(_0x2fcaa8===_0x3ab606(0x1a4))_0x2dda71[_0x3ab606(0x1d9)]=!!_0x2dda71['value'];}catch(_0x3978ff){if(Util[_0x3ab606(0x1b0)]())console[_0x3ab606(0x1c0)](...LGT,_0x3978ff);}break;}case _0x3ab606(0x1dc):case'undefined':default:break;}});}static[_0x5a5a34(0x1a6)](_0x2f75bc){const _0x144492=_0x5a5a34,_0x2e945f=MiscUtil['copy'](_0x2f75bc[_0x144492(0x1ab)]);_0x2e945f['effects']=[];const _0x179f75=new CONFIG[(_0x144492(0x1df))][(_0x144492(0x1a9))]({..._0x2e945f});return _0x179f75['prepareData'](),_0x179f75[_0x144492(0x1aa)]();}static[_0x5a5a34(0x1c1)](_0x488aa5,_0x2f87d1){const _0x484030=_0x5a5a34;if(!Config[_0x484030(0x1b3)](_0x484030(0x1c3),'isUseExtendedActiveEffectsParser'))return;if(!(_0x2f87d1[_0x484030(0x1c9)]||'')['startsWith'](SharedConsts[_0x484030(0x1bb)]))return;const _0x51bb98=UtilActiveEffects[_0x484030(0x1a3)](_0x2f87d1['key']);switch(_0x51bb98){case _0x484030(0x1e9):{const {value:_0x7b07a1}=_0x2f87d1,_0x326edd=foundry['utils'][_0x484030(0x1d8)](_0x488aa5[_0x484030(0x1ab)],_0x51bb98);if(typeof _0x326edd===_0x484030(0x1e1)&&_0x326edd>=Number(_0x7b07a1))return null;setProperty(_0x488aa5[_0x484030(0x1ab)],_0x51bb98,_0x7b07a1);return;}default:console[_0x484030(0x1d3)](...LGT,_0x484030(0x1a7)+_0x51bb98);}}}export{Patcher_Actor};