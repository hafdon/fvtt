const _0x17b6=['class/subclass\x20feature','pGetClassSubclassFeatures','_pGetItemEffects','optionalfeature','_actor','addImportFeature','name','26pRPORp','page','entries','featureEntriesPageFilter','11dReOGO','_initCreateSheetItemHook','1609CzZVBP','_titleButtonRun','Subclass\x20Feature','pGetDereferencedClassSubclassFeatureItem','5etools','pGetClassSubclassFeatureItemEffects','Name','mix','classFeature','absorbFnBindListeners','sourceJsonToColor','DataSourceSpecial','TASK_EXIT_CANCELLED','5etools-class-subclass-features','getFilteredFeatures','level','Class\x20&\x20Subclass\x20Features','804356mjvLaL','Level','pHasClassSubclassSideLoadedEffects','bindPreviewButton','Import\x20Class\x20&\x20Subclass\x20Features','filterBox','options','_pGetEntityItem','Item','pGetInitClassSubclassFeatureLoadeds','_page','subclassShortName','_titleSearch','doAbsorbItems','length','get','PG_CLASS_SUBCLASS_FEATURES','existingFeatureChecker','source','absorbFnGetData','sourceJsonToFull','_pMutActorUpdateFeature','sourceLong','DataSourceUrl','mutateForFilters','_pGetSideData','isLeaf','isSkippableLeaf','SYM_UI_SKIP','additionalSpells','getData','sortClassFeatures','className','doApplyFilterToFeatureEntries','1184101iaVkGM','init','SOURCE_TYP_BREW','_isPreviewable','URL_TO_HASH_BUILDER','_pPostLoad','pSetContent','isPreLoadedFeature','_content','items','copy','24077ojuABu','Select','Upload\x20File','599624ldLWzN','isStreamerMode','_isRadio','filterValues','SRD','4144WlzuyY','status','DataSourceFile','Select\x20Class\x20or\x20Subclass\x20Feature','subclassFeature','SOURCE_TYP_CUSTOM','getFeaturesGroupedByOptionsSet','pGetUserInput','5069ZDcvgx','_contentDereferenced','182nBwtil','pGetClassSubclassFeatureItem','text-center','2339QWDiuC','type','pImportEntry','_pDoMergeAndApplyActorUpdate','sourceJsonToAbv','./ImportListOptionalFeature.js','class\x20and\x20subclass\x20features','pMutActorUpdateClassSubclassFeatureItem','toLowerCase','1GcCrnH','getImportableFeatures','map','pDoApplyAdditionalSpellsFormDataToActor','_pageFilter','Class','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','_list','constructor'];const _0x5153=function(_0x4fd92a,_0x361983){_0x4fd92a=_0x4fd92a-0x18a;let _0x17b628=_0x17b6[_0x4fd92a];return _0x17b628;};const _0x4ad7fc=_0x5153;(function(_0x2bcf78,_0x4a34cf){const _0x4f5b34=_0x5153;while(!![]){try{const _0x2bb355=-parseInt(_0x4f5b34(0x1b3))+-parseInt(_0x4f5b34(0x1f5))+parseInt(_0x4f5b34(0x1ce))*-parseInt(_0x4f5b34(0x1a5))+-parseInt(_0x4f5b34(0x1b0))*-parseInt(_0x4f5b34(0x1e2))+parseInt(_0x4f5b34(0x1c2))*-parseInt(_0x4f5b34(0x1b8))+parseInt(_0x4f5b34(0x1de))*parseInt(_0x4f5b34(0x1c0))+parseInt(_0x4f5b34(0x1c5))*parseInt(_0x4f5b34(0x1e4));if(_0x2bb355===_0x4a34cf)break;else _0x2bcf78['push'](_0x2bcf78['shift']());}catch(_0x970d6b){_0x2bcf78['push'](_0x2bcf78['shift']());}}}(_0x17b6,0xc7a8b));import{MixinUserChooseImporter}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilDataSource}from'./UtilDataSource.js';import{PageFilterClassFeatures}from'./PageFilterClassFeatures.js';import{DataConverterClassSubclassFeature}from'./DataConverterClassSubclassFeature.js';import{ImportListFeature}from'./ImportListFeature.js';import{UtilApplications}from'./UtilApplications.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';class ImportListClassFeature extends ImportListFeature{static[_0x4ad7fc(0x1a6)](){const _0x29f05c=_0x4ad7fc;this[_0x29f05c(0x1e3)]({'prop':_0x29f05c(0x1ec),'importerName':'Class\x20Feature'}),this[_0x29f05c(0x1e3)]({'prop':_0x29f05c(0x1bc),'importerName':_0x29f05c(0x1e6)});}constructor(_0x4e3542,_0x1a893c,_0xad1f15){const _0x527eee=_0x4ad7fc;_0x1a893c=_0x1a893c||{},_0xad1f15=_0xad1f15||{},super({'title':_0x527eee(0x1f9),..._0x1a893c},_0x4e3542,{'props':[_0x527eee(0x1ec),'subclassFeature'],'titleSearch':_0x527eee(0x1cb),'sidebarTab':_0x527eee(0x1ae),'gameProp':_0x527eee(0x1ae),'defaultFolderPath':[_0x527eee(0x1f4)],'folderType':_0x527eee(0x18b),'fnListSort':PageFilterClassFeatures[_0x527eee(0x1a2)],'listInitialSortBy':_0x527eee(0x1a3),'pageFilter':new PageFilterClassFeatures(),'page':UrlUtil[_0x527eee(0x193)],'isPreviewable':!![],'isDedupable':!![],..._0xad1f15},{'titleLog':_0x527eee(0x1d7)}),this[_0x527eee(0x1c1)]=null;}async['pGetSources'](){const _0x56376a=_0x4ad7fc;return[new UtilDataSource[(_0x56376a(0x1ef))](Config[_0x56376a(0x192)]('ui',_0x56376a(0x1b4))?_0x56376a(0x1b7):_0x56376a(0x1e8),Vetools[_0x56376a(0x1d8)],{'cacheKey':_0x56376a(0x1f1),'filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isUseProps':!![],'isDefault':!![],'pPostLoad':_0x1ba380=>this[_0x56376a(0x1d6)][_0x56376a(0x1aa)](_0x1ba380)}),new UtilDataSource['DataSourceUrl']('Custom\x20URL','',{'filterTypes':[UtilDataSource[_0x56376a(0x1bd)]],'pPostLoad':_0x58287d=>this[_0x56376a(0x1d6)][_0x56376a(0x1aa)](_0x58287d)}),new UtilDataSource[(_0x56376a(0x1ba))](_0x56376a(0x1b2),{'filterTypes':[UtilDataSource[_0x56376a(0x1bd)]],'pPostLoad':_0x189b73=>this[_0x56376a(0x1d6)]['_pPostLoad'](_0x189b73)}),...[...await Vetools['pGetHomebrewSources'](_0x56376a(0x1ec)),...await Vetools['pGetHomebrewSources'](_0x56376a(0x1bc))][_0x56376a(0x1d0)](({name:_0x34d1e4,url:_0x42ff91})=>new UtilDataSource[(_0x56376a(0x19a))](_0x34d1e4,_0x42ff91,{'filterTypes':[UtilDataSource[_0x56376a(0x1a7)]],'pPostLoad':_0x3c3d1f=>this['constructor']['_pPostLoad'](_0x3c3d1f)}))];}static[_0x4ad7fc(0x1aa)](_0x399543){const _0x40f01a=_0x4ad7fc;return _0x399543['filter'](_0x1cddd9=>_0x1cddd9[_0x40f01a(0x1dd)][_0x40f01a(0x1cd)]()!=='ability\x20score\x20improvement');}[_0x4ad7fc(0x1a1)](){const _0x4196af=_0x4ad7fc;return{'isRadio':this[_0x4196af(0x1b5)],'isPreviewable':this[_0x4196af(0x1a8)],'titleButtonRun':this[_0x4196af(0x1e5)],'titleSearch':this[_0x4196af(0x18f)],'cols':[{'name':_0x4196af(0x1ea),'width':0x5,'field':_0x4196af(0x1dd)},{'name':_0x4196af(0x1d3),'width':0x2,'field':_0x4196af(0x1a3)},{'name':'Subclass','width':0x2,'field':_0x4196af(0x18e)},{'name':_0x4196af(0x1f6),'width':0x1,'field':_0x4196af(0x1f3),'rowClassName':_0x4196af(0x1c4)},{'name':'Source','width':0x1,'field':_0x4196af(0x195),'titleProp':_0x4196af(0x199),'displayProp':'sourceShort','classNameProp':'sourceClassName','rowClassName':_0x4196af(0x1c4)}],'rows':this['_content'][_0x4196af(0x1d0)]((_0x26119e,_0x4a00ab)=>{const _0x4093c8=_0x4196af;return this[_0x4093c8(0x1d2)]['constructor'][_0x4093c8(0x19b)](_0x26119e),{'name':_0x26119e[_0x4093c8(0x1dd)],'className':_0x26119e[_0x4093c8(0x1a3)],'subclassShortName':_0x26119e[_0x4093c8(0x18e)],'level':_0x26119e[_0x4093c8(0x1f3)],'source':_0x26119e['source'],'sourceShort':Parser[_0x4093c8(0x1c9)](_0x26119e[_0x4093c8(0x195)]),'sourceLong':Parser[_0x4093c8(0x197)](_0x26119e[_0x4093c8(0x195)]),'sourceClassName':Parser[_0x4093c8(0x1ee)](_0x26119e[_0x4093c8(0x195)]),'ix':_0x4a00ab};})};}['_activateListeners_absorbListItems'](){const _0x53085a=_0x4ad7fc;this['_list'][_0x53085a(0x190)](this[_0x53085a(0x1ad)],{'fnGetName':_0x24d775=>_0x24d775[_0x53085a(0x1dd)],'fnGetValues':_0x54e0d0=>({'source':_0x54e0d0['source'],'className':_0x54e0d0[_0x53085a(0x1a3)],'subclassShortName':_0x54e0d0[_0x53085a(0x18e)]||'','level':_0x54e0d0[_0x53085a(0x1f3)],'hash':UrlUtil[_0x53085a(0x1a9)][this[_0x53085a(0x18d)]](_0x54e0d0)}),'fnGetData':UtilList2[_0x53085a(0x196)],'fnBindListeners':_0x1aab87=>this['_isRadio']?UtilList2['absorbFnBindListenersRadio'](this[_0x53085a(0x1d5)],_0x1aab87):UtilList2[_0x53085a(0x1ed)](this['_list'],_0x1aab87)});}async['pSetContent'](_0x542a77){const _0x24135d=_0x4ad7fc;await super[_0x24135d(0x1ab)](_0x542a77),this['_contentDereferenced']=await Promise['all'](_0x542a77['map'](_0x2ba278=>DataConverterClassSubclassFeature[_0x24135d(0x1e7)](_0x2ba278)));}['_activateListeners_initPreviewButton'](_0x20da14,_0x5955db){const _0x32ccfb=_0x4ad7fc;ListUiUtil[_0x32ccfb(0x1f8)](this['_page'],this[_0x32ccfb(0x1c1)],_0x20da14,_0x5955db);}async[_0x4ad7fc(0x1c7)](_0x379487,_0x883615){const _0x259e56=_0x4ad7fc;_0x883615=_0x883615||{};if(!this[_0x259e56(0x1db)]){const _0x8717b=await DataConverterClassSubclassFeature['pGetDereferencedClassSubclassFeatureItem'](_0x379487);return super[_0x259e56(0x1c7)](_0x8717b,_0x883615);}if(_0x883615[_0x259e56(0x19d)]){if(_0x883615[_0x259e56(0x19e)]&&_0x379487[_0x259e56(0x1e0)]?.[0x0]?.[_0x259e56(0x1c6)]===_0x259e56(0x1fb)&&_0x379487[_0x259e56(0x1e0)]?.[_0x259e56(0x191)]===0x1)return{'status':UtilApplications['TASK_EXIT_SKIPPED_OTHER']};return super['pImportEntry'](_0x379487,_0x883615);}let _0x530a60=null;const _0x26a868=_0x883615[_0x259e56(0x1ac)]?_0x883615[_0x259e56(0x1e1)]:this['_pageFilter'],_0xd384a5=_0x883615['isPreLoadedFeature']?_0x883615['featureEntriesPageFilterValues']:_0x883615[_0x259e56(0x1b6)]||this[_0x259e56(0x1d2)][_0x259e56(0x1fa)]['getValues']();let _0x1088d8;if(_0x883615[_0x259e56(0x1ac)])_0x1088d8=[_0x379487];else{const _0xb11e=await DataConverterClassSubclassFeature[_0x259e56(0x18c)](_0x379487);_0x1088d8=[_0xb11e];}_0x1088d8=Charactermancer_Class_Util[_0x259e56(0x1f2)](_0x1088d8,_0x26a868,_0xd384a5);if(!_0x1088d8[_0x259e56(0x191)])return{'status':UtilApplications[_0x259e56(0x1f0)]};_0x1088d8=Charactermancer_Class_Util[_0x259e56(0x1cf)](_0x1088d8),Charactermancer_Class_Util[_0x259e56(0x1a4)](_0x1088d8,_0x26a868,_0xd384a5);const _0x207106=Charactermancer_Class_Util[_0x259e56(0x1be)](_0x1088d8),_0x46bb94={};for(const _0x1cd512 of _0x207106){const {topLevelFeature:_0x506df9,optionsSets:_0x2e9d0c}=_0x1cd512;for(let _0x42e6ea=0x0;_0x42e6ea<_0x2e9d0c[_0x259e56(0x191)];++_0x42e6ea){const _0x286ba1=_0x2e9d0c[_0x42e6ea],_0x39f47b=await Charactermancer_Class_FeatureOptionsSelect[_0x259e56(0x1bf)]({'actor':this[_0x259e56(0x1db)],'optionsSet':_0x286ba1,'level':_0x506df9['level'],'existingFeatureChecker':_0x883615[_0x259e56(0x194)]});if(!_0x39f47b)return{'status':UtilApplications[_0x259e56(0x1f0)]};if(_0x39f47b===VeCt[_0x259e56(0x19f)])continue;for(const _0x28878c of _0x39f47b['data']?.['features']){const {entity:_0x40206e,type:_0x3271e8}=_0x28878c,_0x50307c=MiscUtil[_0x259e56(0x1af)](_0x40206e);delete _0x50307c[_0x259e56(0x1a0)];switch(_0x3271e8){case _0x259e56(0x1ec):case'subclassFeature':{const _0x316f03=await this[_0x259e56(0x1c7)](_0x50307c,{..._0x883615,'isLeaf':!![],'isSkippableLeaf':_0x42e6ea===0x0&&_0x2e9d0c[_0x259e56(0x191)]>0x1});if(_0x316f03?.[_0x259e56(0x1b9)]===UtilApplications['TASK_EXIT_CANCELLED'])return{'status':UtilApplications[_0x259e56(0x1f0)]};break;}case _0x259e56(0x1da):{if(!_0x530a60){const {ImportListOptionalFeature:_0x5e58fe}=await import(_0x259e56(0x1ca));_0x530a60=new _0x5e58fe({'actor':this['_actor']}),await _0x530a60['pInit']();}const _0x4d48e0={..._0x883615};delete _0x4d48e0[_0x259e56(0x1b6)],delete _0x4d48e0['existingFeatureChecker'],delete _0x4d48e0[_0x259e56(0x19d)];const _0x3bc28d=await _0x530a60[_0x259e56(0x1c7)](_0x50307c,_0x4d48e0);if(_0x3bc28d?.[_0x259e56(0x1b9)]===UtilApplications[_0x259e56(0x1f0)])return{'status':UtilApplications[_0x259e56(0x1f0)]};}}if(_0x883615[_0x259e56(0x194)])_0x883615['existingFeatureChecker'][_0x259e56(0x1dc)](_0x28878c[_0x259e56(0x1df)],_0x28878c[_0x259e56(0x195)],_0x28878c['hash']);}Charactermancer_Class_FeatureOptionsSelect['doApplyProficiencyFormDataToActorUpdate'](this['_actor'],_0x46bb94,_0x39f47b),await Charactermancer_Class_FeatureOptionsSelect[_0x259e56(0x1d1)]({'actor':this[_0x259e56(0x1db)],'formData':_0x39f47b,'abilityAbv':_0x883615['spellcastingAbilityAbv']});}}return await this[_0x259e56(0x1c8)](_0x46bb94),{'imported':[{'name':_0x379487['name'],'actor':this[_0x259e56(0x1db)]}],'status':UtilApplications['TASK_EXIT_COMPLETE']};}static async[_0x4ad7fc(0x18a)](_0x469113,_0x20a5d0){const _0x2dfc37=_0x4ad7fc;return DataConverterClassSubclassFeature[_0x2dfc37(0x1c3)](_0x20a5d0,{'actor':_0x469113});}static async[_0x4ad7fc(0x19c)](_0x197bcc,_0x5eebbc){return DataConverterClassSubclassFeature['pGetSideData'](_0x5eebbc);}static async['_pHasSideLoadedEffects'](_0x50fd9b,_0x2f9d0d){const _0x2488ed=_0x4ad7fc;return DataConverterClassSubclassFeature[_0x2488ed(0x1f7)](_0x50fd9b,_0x2f9d0d);}static async[_0x4ad7fc(0x1d9)](_0x523ef7,_0x186910,_0x1bf673,_0x3423a2){const _0x28261f=_0x4ad7fc;return DataConverterClassSubclassFeature[_0x28261f(0x1e9)](_0x523ef7,_0x186910,_0x1bf673,{'additionalData':{'import':{'chosenAbilityScoreIncrease':_0x3423a2['chosenAbilityScoreIncrease']}}});}async[_0x4ad7fc(0x198)](_0x4dbdf9,_0x5d25ac,_0x49b672){const _0x113c12=_0x4ad7fc;await DataConverterClassSubclassFeature[_0x113c12(0x1cc)](this[_0x113c12(0x1db)],_0x5d25ac,_0x4dbdf9,_0x49b672);}[_0x4ad7fc(0x1d4)](_0x5d780a,_0x31a0bf){const _0x1d4c75=_0x4ad7fc;return DataConverterClassSubclassFeature['pGetClassSubclassFeatureItem'](_0x5d780a,{'actor':this[_0x1d4c75(0x1db)],..._0x31a0bf});}}ImportListClassFeature['UserChoose']=class extends MiscUtil[_0x4ad7fc(0x1eb)](ImportListClassFeature)['with'](MixinUserChooseImporter){constructor(_0x2a96bd){const _0x313162=_0x4ad7fc;super(_0x2a96bd,{'title':_0x313162(0x1bb)},{'titleButtonRun':_0x313162(0x1b1)});}};export{ImportListClassFeature};